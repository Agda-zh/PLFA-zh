<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>编程语言基础：Agda 描述 – Bisimulation</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">编程语言基础：Agda 描述</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">主页</a> <a class="page-link" href="../Announcements/">公告</a> <a class="page-link" href="../GettingStarted/">使用说明</a> <a class="page-link" href="../Citing/">引用</a> <a class="page-link" href="https://plfa.github.io/">English</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../More/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part2/Bisimulation.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Inference/">下一章</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Bisimulation: 联系不同的规约系统</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-131" class="Keyword">module</a> <a id="plfa_plfa-part2-Bisimulation-138" href="../Bisimulation/#" class="Module">plfa.part2.Bisimulation</a> <a id="plfa_plfa-part2-Bisimulation-162" class="Keyword">where</a>
</pre><p>有一些构造可以用其他的构造来定义。 在上一章中，我们展示了 <em>let</em> 项可以被重写为抽象的应用，以及积的两种不同表示方法 —— 一种使用投影，一种使用匹配表达式。 本章中，我们来看看如何形式化这些断言。</p><p>给定两个不同的系统，它们有不同的项和不同的规约规则，我们定义诸如 『一个系统<strong>模拟（Simulate）</strong>了另一个系统』此类断言的意义。 假设两个系统分别叫做<strong>源</strong>（Source）和<strong>目标</strong>（Target），我们用 <code>M</code> 和 <code>N</code> 表示源系统的项，<code>M†</code> 和 <code>N†</code> 表示目标系统的项。 我们定义一个关系</p><pre><code>M ~ M†</code></pre><p>于两个系统对应的项之上。 如果每个源系统的每一个规约都有一个对应的规约序列，那我们就有了一个<strong>模拟</strong>。</p><p><strong>模拟</strong>：对于任意的 <code>M</code>、<code>M†</code> 和 <code>N</code>， 如果 <code>M ~ M†</code> 和 <code>M —→ N</code> 成立，那么 <code>M† —↠ N†</code> 和 <code>N ~ N†</code> 对于一些 <code>N†</code> 成立。</p><p>或者，用图表来表示：</p><pre><code>M  --- —→ --- N
|             |
|             |
~             ~
|             |
|             |
M† --- —↠ --- N†</code></pre><p>有时我们会使用一个更强的条件，使得每个源系统的规约对应目标系统的规约（而不是规约序列）：</p><pre><code>M  --- —→ --- N
|             |
|             |
~             ~
|             |
|             |
M† --- —→ --- N†</code></pre><p>这个更强的条件被称为<strong>锁步</strong>（Lock-step）或者<strong>准确无误</strong>（On the nose）的模拟。</p><p>『译注：<a href="https://dictionary.cambridge.org/dictionary/english-chinese-simplified/on-the-nose">On the nose</a> 本义为在鼻子之上，用于表述准确无误。』</p><p>如果从目标系统到源系统也有一个模拟：即每个目标系统的规约在源目标系统中有对应的规约序列， 我们对这样的情况尤其感兴趣。换句话说，<code>~</code> 是一个从源到目标的模拟，而 <code>~</code> 的逆是一个从目标的源的模拟。这样的情况被称为<strong>互模拟</strong>（Bisimulation）。 (In general, if &lt; and &gt; are arbitrary relations such that <code>x &lt; y</code> if and only if <code>y &gt; x</code> then we say that <code>&lt;</code> and <code>&gt;</code> are <em>converse</em> relations. Hence, if <code>~</code> is a relation from source to target, its converse is a relation from target to source.)</p><p>要建立模拟，我们需要分情况讨论所有的可能规约，以及所有它们可能联系的项。 对于每个源系统中规约的步骤，我们必须给出目标系统中对应的规约系列。</p><p>譬如说，源系统可以是带 <em>let</em> 项的 λ 演算，而目标系统中的 <code>let</code> 被翻译了。 定义这个关系的关键规则是：</p><pre><code>M ~ M†
N ~ N†
--------------------------------
let x = M in N ~ (ƛ x ⇒ N†) · M†</code></pre><p>其他的规则都是合同性的规则：变量于它们自身相关，抽象与应用在它们的组成部分分别相关时相关：</p><pre><code>-----
x ~ x

N ~ N†
------------------
ƛ x ⇒ N ~ ƛ x ⇒ N†

L ~ L†
M ~ M†
---------------
L · M ~ L† · M†</code></pre><p>讨论语言中的其他构造——自然数、不动点和积等——对我们本章的重点意义不大， 我们节约长度而不讨论。</p><p>在此情况下，关系的定义可以用一个从源至目标的函数来制定：</p><pre><code>(x) †               =  x
(ƛ x ⇒ N) †         =  ƛ x ⇒ (N †)
(L · M) †           =  (L †) · (M †)
(let x = M in N) †  =  (ƛ x ⇒ (N †)) · (M †)</code></pre><p>我们有：</p><pre><code>M † ≡ N
-------
M ~ N</code></pre><p>以及其逆命题。 但一般情况下，我们可能有一个关系而不一定有对应的函数。</p><p>本章形式化上文中定义的 <code>~</code> 关系是一个从源系统至目标系统的模拟。 我们将反向的证明留作习题。 另一个习题是证明 <a href="../More/">More</a> 章节中积的替代表示方法形成了一个互模拟。</p><h2 id="导入">导入</h2><p>我们从 <a href="../More/">More</a> 章节中导入源语言：</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-5497" class="Keyword">open</a> <a id="plfa_plfa-part2-Bisimulation-5502" class="Keyword">import</a> <a id="plfa_plfa-part2-Bisimulation-5509" href="../More/#" class="Module">plfa.part2.More</a>
</pre><h2 id="模拟">模拟</h2><p>我们直接地形式化导言中的模拟：</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-5681" class="Keyword">infix</a>  <a id="plfa_plfa-part2-Bisimulation-5688" class="Number">4</a> <a id="plfa_plfa-part2-Bisimulation-5690" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">_~_</a>
<a id="plfa_plfa-part2-Bisimulation-5694" class="Keyword">infix</a>  <a id="plfa_plfa-part2-Bisimulation-5701" class="Number">5</a> <a id="plfa_plfa-part2-Bisimulation-5703" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5834" class="InductiveConstructor Operator">~ƛ_</a>
<a id="plfa_plfa-part2-Bisimulation-5707" class="Keyword">infix</a>  <a id="plfa_plfa-part2-Bisimulation-5714" class="Number">7</a> <a id="plfa_plfa-part2-Bisimulation-5716" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5919" class="InductiveConstructor Operator">_~·_</a>

<a id="plfa_plfa-part2-Bisimulation-5722" class="Keyword">data</a> <a id="plfa_plfa-part2-Bisimulation-_~_"></a><a id="plfa_plfa-part2-Bisimulation-5727" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">_~_</a> <a id="plfa_plfa-part2-Bisimulation-5731" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5733" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-5735" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5736" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5736" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5738" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5738" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-5739" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-5741" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5743" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-5744" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5736" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5746" href="../More/#plfa_plfa-part2-More-22742" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-5748" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5738" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-5749" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-5751" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5753" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-5754" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5736" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5756" href="../More/#plfa_plfa-part2-More-22742" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-5758" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5738" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-5759" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-5761" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5763" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part2-Bisimulation-5767" class="Keyword">where</a>

  <a id="plfa_plfa-part2-Bisimulation-_~_.~`"></a><a id="plfa_plfa-part2-Bisimulation-5776" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5776" class="InductiveConstructor">~`</a> <a id="plfa_plfa-part2-Bisimulation-5779" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5781" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-5783" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5784" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5784" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5786" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5786" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-5787" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-5789" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5790" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5790" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-5792" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5794" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5784" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5796" href="../More/#plfa_plfa-part2-More-21600" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-5798" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5786" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-5799" class="Symbol">}</a>
     <a id="plfa_plfa-part2-Bisimulation-5806" class="Comment">---------</a>
   <a id="plfa_plfa-part2-Bisimulation-5819" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5821" href="../More/#plfa_plfa-part2-More-22787" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Bisimulation-5823" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5790" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-5825" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-5827" href="../More/#plfa_plfa-part2-More-22787" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Bisimulation-5829" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5790" class="Bound">x</a>

  <a id="plfa_plfa-part2-Bisimulation-_~_.~ƛ_"></a><a id="plfa_plfa-part2-Bisimulation-5834" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5834" class="InductiveConstructor Operator">~ƛ_</a> <a id="plfa_plfa-part2-Bisimulation-5838" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5840" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-5842" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5843" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5843" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5845" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5845" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-5847" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5847" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-5848" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-5850" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5851" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5851" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-5853" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5853" class="Bound">N†</a> <a id="plfa_plfa-part2-Bisimulation-5856" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5858" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5843" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5860" href="../More/#plfa_plfa-part2-More-21490" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Bisimulation-5862" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5845" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-5864" href="../More/#plfa_plfa-part2-More-22742" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-5866" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5847" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-5867" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Bisimulation-5873" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5875" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5851" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-5877" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-5879" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5853" class="Bound">N†</a>
      <a id="plfa_plfa-part2-Bisimulation-5888" class="Comment">----------</a>
    <a id="plfa_plfa-part2-Bisimulation-5903" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5905" href="../More/#plfa_plfa-part2-More-22848" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Bisimulation-5907" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5851" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-5909" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-5911" href="../More/#plfa_plfa-part2-More-22848" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Bisimulation-5913" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5853" class="Bound">N†</a>

  <a id="plfa_plfa-part2-Bisimulation-_~_._~·_"></a><a id="plfa_plfa-part2-Bisimulation-5919" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5919" class="InductiveConstructor Operator">_~·_</a> <a id="plfa_plfa-part2-Bisimulation-5924" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5926" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-5928" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5929" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5929" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5931" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5931" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-5933" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5933" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-5934" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-5936" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5937" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5937" class="Bound">L</a> <a id="plfa_plfa-part2-Bisimulation-5939" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5939" class="Bound">L†</a> <a id="plfa_plfa-part2-Bisimulation-5942" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5944" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5929" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5946" href="../More/#plfa_plfa-part2-More-22742" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-5948" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5931" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-5950" href="../More/#plfa_plfa-part2-More-21332" class="InductiveConstructor Operator">⇒</a> <a id="plfa_plfa-part2-Bisimulation-5952" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5933" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-5953" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-5955" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5956" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5956" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-5958" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5958" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-5961" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5963" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5929" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5965" href="../More/#plfa_plfa-part2-More-22742" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-5967" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5931" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-5968" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Bisimulation-5974" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5976" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5937" class="Bound">L</a> <a id="plfa_plfa-part2-Bisimulation-5978" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-5980" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5939" class="Bound">L†</a>
    <a id="plfa_plfa-part2-Bisimulation-5987" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5989" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5956" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-5991" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-5993" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5958" class="Bound">M†</a>
      <a id="plfa_plfa-part2-Bisimulation-6002" class="Comment">---------------</a>
    <a id="plfa_plfa-part2-Bisimulation-6022" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-6024" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5937" class="Bound">L</a> <a id="plfa_plfa-part2-Bisimulation-6026" href="../More/#plfa_plfa-part2-More-22916" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Bisimulation-6028" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5956" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-6030" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-6032" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5939" class="Bound">L†</a> <a id="plfa_plfa-part2-Bisimulation-6035" href="../More/#plfa_plfa-part2-More-22916" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Bisimulation-6037" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5958" class="Bound">M†</a>

  <a id="plfa_plfa-part2-Bisimulation-_~_.~let"></a><a id="plfa_plfa-part2-Bisimulation-6043" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6043" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-6048" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-6050" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-6052" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-6053" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6053" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-6055" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6055" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-6057" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6057" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-6058" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-6060" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-6061" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6061" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-6063" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6063" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-6066" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-6068" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6053" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-6070" href="../More/#plfa_plfa-part2-More-22742" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-6072" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6055" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-6073" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-6075" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-6076" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6076" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-6078" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6078" class="Bound">N†</a> <a id="plfa_plfa-part2-Bisimulation-6081" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-6083" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6053" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-6085" href="../More/#plfa_plfa-part2-More-21490" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Bisimulation-6087" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6055" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-6089" href="../More/#plfa_plfa-part2-More-22742" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-6091" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6057" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-6092" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Bisimulation-6098" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-6100" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6061" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-6102" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-6104" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6063" class="Bound">M†</a>
    <a id="plfa_plfa-part2-Bisimulation-6111" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-6113" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6076" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-6115" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-6117" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6078" class="Bound">N†</a>
      <a id="plfa_plfa-part2-Bisimulation-6126" class="Comment">----------------------</a>
    <a id="plfa_plfa-part2-Bisimulation-6153" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-6155" href="../More/#plfa_plfa-part2-More-23399" class="InductiveConstructor">`let</a> <a id="plfa_plfa-part2-Bisimulation-6160" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6061" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-6162" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6076" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-6164" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-6166" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-6167" href="../More/#plfa_plfa-part2-More-22848" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Bisimulation-6169" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6078" class="Bound">N†</a><a id="plfa_plfa-part2-Bisimulation-6171" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-6173" href="../More/#plfa_plfa-part2-More-22916" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Bisimulation-6175" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6063" class="Bound">M†</a>
</pre><p><a href="../More/">More</a> 章节中的语言有更多的构造，我们可以简单地扩充上述定义。 但是，使上述的定义小而精简让我们注重本章的重点。 虽然我们有一个较大的源语言，但我们只在模拟中考虑我们感兴趣的项，这是一个方便的小窍门。</p><h4 id="练习-_-实践">练习 <code>_†</code> （实践）</h4><p>形式化导言中给定的源语言至目标语言的翻译。 证明 <code>M † ≡ N</code> 蕴含了 <code>M ~ N</code>，以及其逆命题。</p><p><strong>提示：</strong>为了简洁，我们只注重语言中的一小部分构造，所以 <code>_†</code> 的定义只需要注重相关的部分。 达成此目的的一种方法是用<a href="../Decidable/#proof-by-reflection">互映证明</a>定义一个谓词来选出 <code>_†</code> 定义域中的项。</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-7278" class="Comment">-- 在这里写出你的代码。</a>
</pre><h2 id="模拟与值可交换">模拟与值可交换</h2><p>我们需要一系列技术结果。首先是模拟与值可交换（Commute）。 即：若 <code>M ~ M†</code> 且 <code>M</code> 是一个值，那么 <code>M†</code> 也是一个值。</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-~val"></a><a id="plfa_plfa-part2-Bisimulation-7604" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7604" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-7609" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-7611" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-7613" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-7614" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7614" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-7616" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7616" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-7617" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-7619" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-7620" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7620" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-7622" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7622" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-7625" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-7627" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7614" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-7629" href="../More/#plfa_plfa-part2-More-22742" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-7631" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7616" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-7632" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-7636" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-7638" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7620" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-7640" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-7642" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7622" class="Bound">M†</a>
  <a id="plfa_plfa-part2-Bisimulation-7647" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-7649" href="../More/#plfa_plfa-part2-More-27383" class="Datatype">Value</a> <a id="plfa_plfa-part2-Bisimulation-7655" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7620" class="Bound">M</a>
    <a id="plfa_plfa-part2-Bisimulation-7661" class="Comment">--------</a>
  <a id="plfa_plfa-part2-Bisimulation-7672" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-7674" href="../More/#plfa_plfa-part2-More-27383" class="Datatype">Value</a> <a id="plfa_plfa-part2-Bisimulation-7680" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7622" class="Bound">M†</a>
<a id="plfa_plfa-part2-Bisimulation-7683" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7604" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-7688" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5776" class="InductiveConstructor">~`</a>           <a id="plfa_plfa-part2-Bisimulation-7701" class="Symbol">()</a>
<a id="plfa_plfa-part2-Bisimulation-7704" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7604" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-7709" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-7710" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5834" class="InductiveConstructor Operator">~ƛ</a> <a id="plfa_plfa-part2-Bisimulation-7713" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7713" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-7715" class="Symbol">)</a>      <a id="plfa_plfa-part2-Bisimulation-7722" href="../More/#plfa_plfa-part2-More-27431" class="InductiveConstructor">V-ƛ</a>  <a id="plfa_plfa-part2-Bisimulation-7727" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-7730" href="../More/#plfa_plfa-part2-More-27431" class="InductiveConstructor">V-ƛ</a>
<a id="plfa_plfa-part2-Bisimulation-7734" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7604" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-7739" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-7740" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7740" class="Bound">~L</a> <a id="plfa_plfa-part2-Bisimulation-7743" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5919" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-7746" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7746" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-7748" class="Symbol">)</a>   <a id="plfa_plfa-part2-Bisimulation-7752" class="Symbol">()</a>
<a id="plfa_plfa-part2-Bisimulation-7755" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7604" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-7760" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-7761" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6043" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-7766" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7766" class="Bound">~M</a> <a id="plfa_plfa-part2-Bisimulation-7769" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7769" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-7771" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-7773" class="Symbol">()</a>
</pre><p>这是一个直接的分情况讨论，唯一有意思的情况是 λ 抽象。</p><h4 id="exercise-val¹-实践">Exercise <code>~val⁻¹</code> （实践）</h4><p>证明此命题在反方向亦成立： 若 <code>M ~ M†</code> 且 <code>Value M†</code>，那么 <code>Value M</code> 成立。</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-8164" class="Comment">-- 在这里写出你的代码。</a>
</pre><h2 id="模拟与重命名可交换">模拟与重命名可交换</h2><p>下一个技术结果是模拟和重命名可交换。 即：若 <code>ρ</code> 将任意的判断 <code>Γ ∋ A</code> 映射至另一个判断 <code>Δ ∋ A</code>，且 <code>M ~ M†</code>，那么 <code>rename ρ M ~ rename ρ M†</code>：</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-~rename"></a><a id="plfa_plfa-part2-Bisimulation-8547" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8547" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8555" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-8557" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-8559" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-8560" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8560" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-8562" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8562" class="Bound">Δ</a><a id="plfa_plfa-part2-Bisimulation-8563" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-8567" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-8569" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8570" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8570" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8572" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-8574" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-8576" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-8577" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8577" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-8578" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-8580" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-8582" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8560" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-8584" href="../More/#plfa_plfa-part2-More-21600" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-8586" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8577" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-8588" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-8590" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8562" class="Bound">Δ</a> <a id="plfa_plfa-part2-Bisimulation-8592" href="../More/#plfa_plfa-part2-More-21600" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-8594" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8577" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-8595" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Bisimulation-8601" class="Comment">----------------------------------------------------------</a>
  <a id="plfa_plfa-part2-Bisimulation-8662" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-8664" class="Symbol">(∀</a> <a id="plfa_plfa-part2-Bisimulation-8667" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-8668" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8668" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-8669" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-8671" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-8672" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8672" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-8674" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8674" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-8677" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-8679" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8560" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-8681" href="../More/#plfa_plfa-part2-More-22742" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-8683" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8668" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-8684" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-8686" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-8688" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8672" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-8690" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-8692" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8674" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-8695" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-8697" href="../More/#plfa_plfa-part2-More-24655" class="Function">rename</a> <a id="plfa_plfa-part2-Bisimulation-8704" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8570" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8706" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8672" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-8708" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-8710" href="../More/#plfa_plfa-part2-More-24655" class="Function">rename</a> <a id="plfa_plfa-part2-Bisimulation-8717" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8570" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8719" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8674" class="Bound">M†</a><a id="plfa_plfa-part2-Bisimulation-8721" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-8723" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8547" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8731" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8731" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8733" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8734" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5776" class="InductiveConstructor">~`</a><a id="plfa_plfa-part2-Bisimulation-8736" class="Symbol">)</a>          <a id="plfa_plfa-part2-Bisimulation-8747" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-8750" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5776" class="InductiveConstructor">~`</a>
<a id="plfa_plfa-part2-Bisimulation-8753" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8547" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8761" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8761" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8763" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8764" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5834" class="InductiveConstructor Operator">~ƛ</a> <a id="plfa_plfa-part2-Bisimulation-8767" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8767" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-8769" class="Symbol">)</a>       <a id="plfa_plfa-part2-Bisimulation-8777" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-8780" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5834" class="InductiveConstructor Operator">~ƛ</a> <a id="plfa_plfa-part2-Bisimulation-8783" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8784" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8547" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8792" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8793" href="../More/#plfa_plfa-part2-More-24484" class="Function">ext</a> <a id="plfa_plfa-part2-Bisimulation-8797" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8761" class="Bound">ρ</a><a id="plfa_plfa-part2-Bisimulation-8798" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-8800" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8767" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-8802" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-8804" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8547" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8812" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8812" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8814" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8815" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8815" class="Bound">~L</a> <a id="plfa_plfa-part2-Bisimulation-8818" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5919" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-8821" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8821" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-8823" class="Symbol">)</a>    <a id="plfa_plfa-part2-Bisimulation-8828" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-8831" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8832" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8547" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8840" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8812" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8842" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8815" class="Bound">~L</a><a id="plfa_plfa-part2-Bisimulation-8844" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-8846" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5919" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-8849" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8850" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8547" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8858" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8812" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8860" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8821" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-8862" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-8864" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8547" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8872" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8872" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8874" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8875" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6043" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-8880" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8880" class="Bound">~M</a> <a id="plfa_plfa-part2-Bisimulation-8883" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8883" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-8885" class="Symbol">)</a>  <a id="plfa_plfa-part2-Bisimulation-8888" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-8891" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6043" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-8896" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8897" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8547" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8905" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8872" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8907" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8880" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-8909" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-8911" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8912" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8547" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8920" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8921" href="../More/#plfa_plfa-part2-More-24484" class="Function">ext</a> <a id="plfa_plfa-part2-Bisimulation-8925" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8872" class="Bound">ρ</a><a id="plfa_plfa-part2-Bisimulation-8926" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-8928" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8883" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-8930" class="Symbol">)</a>
</pre><p>此证明的结构与重命名的结构相似： 使用递归来重新构造每一个项，并在需要时扩充语境（在这里，我们只需要在 λ 抽象的抽象体中使用）。</p><h2 id="模拟与替换可交换">模拟与替换可交换</h2><p>第三个技术结果是模拟与替换可交换。 这个结果比重命名更复杂，因为我们之前只有一个重命名映射 <code>ρ</code>， 而现在我们需要两个替换映射 <code>σ</code> 和 <code>σ†</code>。</p><p>这个证明首先需要我们构造一个类似于扩充的概念。 如果 <code>σ</code> 和 <code>σ†</code> 都将任何判断 <code>Γ ∋ A</code> 映射至一个判断 <code>Δ ⊢ A</code>， 且对于 <code>Γ ∋ A</code> 中的任意 <code>x</code>，我们有 <code>σ x ~ σ† x</code>， 那么对于任何 <code>Γ , B ∋ A</code> 中的 <code>x</code>，我们有 <code>exts σ x ~ exts σ† x</code>：</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-~exts"></a><a id="plfa_plfa-part2-Bisimulation-10023" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10023" class="Function">~exts</a> <a id="plfa_plfa-part2-Bisimulation-10029" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-10031" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-10033" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10034" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10034" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-10036" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10036" class="Bound">Δ</a><a id="plfa_plfa-part2-Bisimulation-10037" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-10041" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10043" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10044" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10044" class="Bound">σ</a>  <a id="plfa_plfa-part2-Bisimulation-10047" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-10049" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-10051" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10052" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10052" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10053" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-10055" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10057" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10034" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-10059" href="../More/#plfa_plfa-part2-More-21600" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-10061" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10052" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-10063" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10065" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10036" class="Bound">Δ</a> <a id="plfa_plfa-part2-Bisimulation-10067" href="../More/#plfa_plfa-part2-More-22742" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-10069" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10052" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10070" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-10074" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10076" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10077" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10077" class="Bound">σ†</a> <a id="plfa_plfa-part2-Bisimulation-10080" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-10082" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-10084" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10085" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10085" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10086" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-10088" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10090" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10034" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-10092" href="../More/#plfa_plfa-part2-More-21600" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-10094" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10085" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-10096" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10098" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10036" class="Bound">Δ</a> <a id="plfa_plfa-part2-Bisimulation-10100" href="../More/#plfa_plfa-part2-More-22742" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-10102" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10085" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10103" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-10107" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10109" class="Symbol">(∀</a> <a id="plfa_plfa-part2-Bisimulation-10112" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10113" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10113" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10114" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-10116" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10118" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-10119" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10119" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-10121" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-10123" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10034" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-10125" href="../More/#plfa_plfa-part2-More-21600" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-10127" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10113" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10128" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-10130" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10132" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10044" class="Bound">σ</a> <a id="plfa_plfa-part2-Bisimulation-10134" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10119" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-10136" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-10138" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10077" class="Bound">σ†</a> <a id="plfa_plfa-part2-Bisimulation-10141" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10119" class="Bound">x</a><a id="plfa_plfa-part2-Bisimulation-10142" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Bisimulation-10148" class="Comment">--------------------------------------------------</a>
  <a id="plfa_plfa-part2-Bisimulation-10201" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10203" class="Symbol">(∀</a> <a id="plfa_plfa-part2-Bisimulation-10206" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10207" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10207" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-10209" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10209" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-10210" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-10212" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10214" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-10215" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10215" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-10217" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-10219" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10034" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-10221" href="../More/#plfa_plfa-part2-More-21490" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Bisimulation-10223" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10209" class="Bound">B</a> <a id="plfa_plfa-part2-Bisimulation-10225" href="../More/#plfa_plfa-part2-More-21600" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-10227" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10207" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10228" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-10230" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10232" href="../More/#plfa_plfa-part2-More-25528" class="Function">exts</a> <a id="plfa_plfa-part2-Bisimulation-10237" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10044" class="Bound">σ</a> <a id="plfa_plfa-part2-Bisimulation-10239" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10215" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-10241" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-10243" href="../More/#plfa_plfa-part2-More-25528" class="Function">exts</a> <a id="plfa_plfa-part2-Bisimulation-10248" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10077" class="Bound">σ†</a> <a id="plfa_plfa-part2-Bisimulation-10251" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10215" class="Bound">x</a><a id="plfa_plfa-part2-Bisimulation-10252" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-10254" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10023" class="Function">~exts</a> <a id="plfa_plfa-part2-Bisimulation-10260" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10260" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-10263" href="../More/#plfa_plfa-part2-More-21636" class="InductiveConstructor">Z</a>      <a id="plfa_plfa-part2-Bisimulation-10270" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-10273" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5776" class="InductiveConstructor">~`</a>
<a id="plfa_plfa-part2-Bisimulation-10276" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10023" class="Function">~exts</a> <a id="plfa_plfa-part2-Bisimulation-10282" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10282" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-10285" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-10286" href="../More/#plfa_plfa-part2-More-21683" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Bisimulation-10288" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10288" class="Bound">x</a><a id="plfa_plfa-part2-Bisimulation-10289" class="Symbol">)</a>  <a id="plfa_plfa-part2-Bisimulation-10292" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-10295" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8547" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-10303" href="../More/#plfa_plfa-part2-More-21683" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Bisimulation-10306" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-10307" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10282" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-10310" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10288" class="Bound">x</a><a id="plfa_plfa-part2-Bisimulation-10311" class="Symbol">)</a>
</pre><p>这个证明的结构于扩充的结构相似。 新加入的变量平凡地与它自身相关，否则我们可以对假设使用重命名。</p><p>如上定义完扩充之后，证明替换与模拟交换就很直接了。 如果 <code>σ</code> 和 <code>σ†</code> 都将任何判断 <code>Γ ∋ A</code> 映射至一个判断 <code>Δ ⊢ A</code>， 且对于 <code>Γ ∋ A</code> 中的任意 <code>x</code>，我们有 <code>σ x ~ σ† x</code>， 如果 <code>M ~ M†</code>，那么 <code>subst σ M ~ subst σ† M†</code>：</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-~subst"></a><a id="plfa_plfa-part2-Bisimulation-10996" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10996" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-11003" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-11005" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-11007" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11008" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11008" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-11010" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11010" class="Bound">Δ</a><a id="plfa_plfa-part2-Bisimulation-11011" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-11015" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11017" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11018" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11018" class="Bound">σ</a>  <a id="plfa_plfa-part2-Bisimulation-11021" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-11023" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-11025" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11026" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11026" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-11027" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-11029" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11031" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11008" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-11033" href="../More/#plfa_plfa-part2-More-21600" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-11035" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11026" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-11037" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11039" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11010" class="Bound">Δ</a> <a id="plfa_plfa-part2-Bisimulation-11041" href="../More/#plfa_plfa-part2-More-22742" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-11043" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11026" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-11044" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-11048" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11050" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11051" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11051" class="Bound">σ†</a> <a id="plfa_plfa-part2-Bisimulation-11054" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-11056" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-11058" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11059" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11059" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-11060" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-11062" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11064" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11008" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-11066" href="../More/#plfa_plfa-part2-More-21600" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-11068" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11059" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-11070" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11072" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11010" class="Bound">Δ</a> <a id="plfa_plfa-part2-Bisimulation-11074" href="../More/#plfa_plfa-part2-More-22742" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-11076" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11059" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-11077" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-11081" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11083" class="Symbol">(∀</a> <a id="plfa_plfa-part2-Bisimulation-11086" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11087" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11087" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-11088" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-11090" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11092" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11093" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11093" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-11095" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-11097" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11008" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-11099" href="../More/#plfa_plfa-part2-More-21600" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-11101" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11087" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-11102" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-11104" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11106" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11018" class="Bound">σ</a> <a id="plfa_plfa-part2-Bisimulation-11108" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11093" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-11110" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-11112" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11051" class="Bound">σ†</a> <a id="plfa_plfa-part2-Bisimulation-11115" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11093" class="Bound">x</a><a id="plfa_plfa-part2-Bisimulation-11116" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Bisimulation-11122" class="Comment">---------------------------------------------------------</a>
  <a id="plfa_plfa-part2-Bisimulation-11182" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11184" class="Symbol">(∀</a> <a id="plfa_plfa-part2-Bisimulation-11187" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11188" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11188" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-11189" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-11191" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11192" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11192" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-11194" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11194" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-11197" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-11199" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11008" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-11201" href="../More/#plfa_plfa-part2-More-22742" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-11203" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11188" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-11204" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-11206" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11208" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11192" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-11210" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-11212" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11194" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-11215" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11217" href="../More/#plfa_plfa-part2-More-25660" class="Function">subst</a> <a id="plfa_plfa-part2-Bisimulation-11223" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11018" class="Bound">σ</a> <a id="plfa_plfa-part2-Bisimulation-11225" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11192" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-11227" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-11229" href="../More/#plfa_plfa-part2-More-25660" class="Function">subst</a> <a id="plfa_plfa-part2-Bisimulation-11235" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11051" class="Bound">σ†</a> <a id="plfa_plfa-part2-Bisimulation-11238" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11194" class="Bound">M†</a><a id="plfa_plfa-part2-Bisimulation-11240" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-11242" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10996" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-11249" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11249" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-11252" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11253" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5776" class="InductiveConstructor">~`</a> <a id="plfa_plfa-part2-Bisimulation-11256" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11257" class="Argument">x</a> <a id="plfa_plfa-part2-Bisimulation-11259" class="Symbol">=</a> <a id="plfa_plfa-part2-Bisimulation-11261" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11261" class="Bound">x</a><a id="plfa_plfa-part2-Bisimulation-11262" class="Symbol">})</a>  <a id="plfa_plfa-part2-Bisimulation-11266" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-11269" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11249" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-11272" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11261" class="Bound">x</a>
<a id="plfa_plfa-part2-Bisimulation-11274" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10996" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-11281" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11281" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-11284" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11285" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5834" class="InductiveConstructor Operator">~ƛ</a> <a id="plfa_plfa-part2-Bisimulation-11288" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11288" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-11290" class="Symbol">)</a>       <a id="plfa_plfa-part2-Bisimulation-11298" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-11301" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5834" class="InductiveConstructor Operator">~ƛ</a> <a id="plfa_plfa-part2-Bisimulation-11304" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11305" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10996" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-11312" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11313" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10023" class="Function">~exts</a> <a id="plfa_plfa-part2-Bisimulation-11319" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11281" class="Bound">~σ</a><a id="plfa_plfa-part2-Bisimulation-11321" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-11323" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11288" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-11325" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-11327" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10996" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-11334" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11334" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-11337" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11338" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11338" class="Bound">~L</a> <a id="plfa_plfa-part2-Bisimulation-11341" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5919" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-11344" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11344" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-11346" class="Symbol">)</a>    <a id="plfa_plfa-part2-Bisimulation-11351" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-11354" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11355" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10996" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-11362" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11334" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-11365" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11338" class="Bound">~L</a><a id="plfa_plfa-part2-Bisimulation-11367" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-11369" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5919" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-11372" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11373" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10996" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-11380" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11334" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-11383" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11344" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-11385" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-11387" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10996" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-11394" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11394" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-11397" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11398" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6043" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-11403" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11403" class="Bound">~M</a> <a id="plfa_plfa-part2-Bisimulation-11406" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11406" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-11408" class="Symbol">)</a>  <a id="plfa_plfa-part2-Bisimulation-11411" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-11414" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6043" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-11419" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11420" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10996" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-11427" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11394" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-11430" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11403" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-11432" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-11434" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11435" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10996" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-11442" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11443" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10023" class="Function">~exts</a> <a id="plfa_plfa-part2-Bisimulation-11449" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11394" class="Bound">~σ</a><a id="plfa_plfa-part2-Bisimulation-11451" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-11453" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11406" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-11455" class="Symbol">)</a>
</pre><p>与之前一样，这个证明的结构于替换的结构类似：使用递归重新构造每一个项， 并在需要时扩充语境（在这里，我们只需要在 λ 抽象的抽象体中使用）。</p><p>从上面的替换的广义定义，我们可以简单地推导出我们所需的特殊形式： 如果 <code>N ~ N†</code> 和 <code>M ∼ M†</code>，那么 <code>N [ M ] ~ N† [ M† ]</code>：</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-~sub"></a><a id="plfa_plfa-part2-Bisimulation-12023" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12023" class="Function">~sub</a> <a id="plfa_plfa-part2-Bisimulation-12028" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-12030" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-12032" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12033" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12033" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-12035" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12035" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-12037" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12037" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-12038" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-12040" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12041" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12041" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-12043" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12043" class="Bound">N†</a> <a id="plfa_plfa-part2-Bisimulation-12046" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-12048" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12033" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-12050" href="../More/#plfa_plfa-part2-More-21490" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Bisimulation-12052" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12037" class="Bound">B</a> <a id="plfa_plfa-part2-Bisimulation-12054" href="../More/#plfa_plfa-part2-More-22742" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-12056" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12035" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-12057" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-12059" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12060" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12060" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-12062" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12062" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-12065" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-12067" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12033" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-12069" href="../More/#plfa_plfa-part2-More-22742" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-12071" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12037" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-12072" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-12076" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-12078" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12041" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-12080" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-12082" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12043" class="Bound">N†</a>
  <a id="plfa_plfa-part2-Bisimulation-12087" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-12089" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12060" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-12091" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-12093" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12062" class="Bound">M†</a>
    <a id="plfa_plfa-part2-Bisimulation-12100" class="Comment">-----------------------</a>
  <a id="plfa_plfa-part2-Bisimulation-12126" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-12128" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-12129" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12041" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-12131" href="../More/#plfa_plfa-part2-More-26478" class="Function Operator">[</a> <a id="plfa_plfa-part2-Bisimulation-12133" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12060" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-12135" href="../More/#plfa_plfa-part2-More-26478" class="Function Operator">]</a><a id="plfa_plfa-part2-Bisimulation-12136" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-12138" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-12140" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-12141" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12043" class="Bound">N†</a> <a id="plfa_plfa-part2-Bisimulation-12144" href="../More/#plfa_plfa-part2-More-26478" class="Function Operator">[</a> <a id="plfa_plfa-part2-Bisimulation-12146" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12062" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-12149" href="../More/#plfa_plfa-part2-More-26478" class="Function Operator">]</a><a id="plfa_plfa-part2-Bisimulation-12150" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-12152" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12023" class="Function">~sub</a> <a id="plfa_plfa-part2-Bisimulation-12157" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12158" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12158" class="Bound">Γ</a><a id="plfa_plfa-part2-Bisimulation-12159" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-12161" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12162" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12162" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-12163" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-12165" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12166" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12166" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-12167" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-12169" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12169" class="Bound">~N</a> <a id="plfa_plfa-part2-Bisimulation-12172" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12172" class="Bound">~M</a> <a id="plfa_plfa-part2-Bisimulation-12175" class="Symbol">=</a> <a id="plfa_plfa-part2-Bisimulation-12177" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10996" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-12184" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12185" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12158" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-12187" href="../More/#plfa_plfa-part2-More-21490" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Bisimulation-12189" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12166" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-12190" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-12192" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12193" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12158" class="Bound">Γ</a><a id="plfa_plfa-part2-Bisimulation-12194" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-12196" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12216" class="Function">~σ</a> <a id="plfa_plfa-part2-Bisimulation-12199" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12200" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12162" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-12201" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-12203" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12169" class="Bound">~N</a>
  <a id="plfa_plfa-part2-Bisimulation-12208" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Bisimulation-12216" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12216" class="Function">~σ</a> <a id="plfa_plfa-part2-Bisimulation-12219" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-12221" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-12223" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12224" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12224" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-12225" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-12227" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-12229" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-12230" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12230" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-12232" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-12234" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12158" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-12236" href="../More/#plfa_plfa-part2-More-21490" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Bisimulation-12238" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12166" class="Bound">B</a> <a id="plfa_plfa-part2-Bisimulation-12240" href="../More/#plfa_plfa-part2-More-21600" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-12242" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12224" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-12243" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-12245" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-12247" class="Symbol">_</a> <a id="plfa_plfa-part2-Bisimulation-12249" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-12251" class="Symbol">_</a>
  <a id="plfa_plfa-part2-Bisimulation-12255" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12216" class="Function">~σ</a> <a id="plfa_plfa-part2-Bisimulation-12258" href="../More/#plfa_plfa-part2-More-21636" class="InductiveConstructor">Z</a>      <a id="plfa_plfa-part2-Bisimulation-12265" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-12268" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12172" class="Bound">~M</a>
  <a id="plfa_plfa-part2-Bisimulation-12273" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12216" class="Function">~σ</a> <a id="plfa_plfa-part2-Bisimulation-12276" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-12277" href="../More/#plfa_plfa-part2-More-21683" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Bisimulation-12279" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12279" class="Bound">x</a><a id="plfa_plfa-part2-Bisimulation-12280" class="Symbol">)</a>  <a id="plfa_plfa-part2-Bisimulation-12283" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-12286" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5776" class="InductiveConstructor">~`</a>
</pre><p>再一次，这个证明与原定义的结构类似。</p><h2 id="给出的关系是模拟">给出的关系是模拟</h2><p>最后，我们可以证明给出的关系的确是一个模拟。 实际上，我们将展示它满足更强的锁步模拟的条件。 我们期望展示的有：</p><p><strong>锁步模拟</strong>：对于任意的 <code>M</code>、<code>M†</code> 和 <code>N</code>， 如果 <code>M ~ M†</code> 和 <code>M —→ N</code> 成立，那么 <code>M† —→ N†</code> 和 <code>N ~ N†</code> 对于一些 <code>N†</code> 成立。</p><p>或者，用图表来表示：</p><pre><code>M  --- —→ --- N
|             |
|             |
~             ~
|             |
|             |
M† --- —→ --- N†</code></pre><p>我们首先形式化对应图表下方的一段的一个概念，即右面和下面的边：</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-13248" class="Keyword">data</a> <a id="plfa_plfa-part2-Bisimulation-Leg"></a><a id="plfa_plfa-part2-Bisimulation-13253" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13253" class="Datatype">Leg</a> <a id="plfa_plfa-part2-Bisimulation-13257" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-13258" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13258" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-13260" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13260" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-13261" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-13263" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13264" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13264" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-13267" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13267" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-13269" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-13271" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13258" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-13273" href="../More/#plfa_plfa-part2-More-22742" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-13275" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13260" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-13276" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-13278" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-13280" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part2-Bisimulation-13284" class="Keyword">where</a>

  <a id="plfa_plfa-part2-Bisimulation-Leg.leg"></a><a id="plfa_plfa-part2-Bisimulation-13293" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13293" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-13297" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-13299" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-13301" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-13302" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13302" class="Bound">N†</a> <a id="plfa_plfa-part2-Bisimulation-13305" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-13307" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13258" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-13309" href="../More/#plfa_plfa-part2-More-22742" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-13311" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13260" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-13312" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Bisimulation-13318" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-13320" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13267" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-13322" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-13324" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13302" class="Bound">N†</a>
    <a id="plfa_plfa-part2-Bisimulation-13331" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-13333" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13264" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-13336" href="../More/#plfa_plfa-part2-More-30216" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Bisimulation-13339" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13302" class="Bound">N†</a>
      <a id="plfa_plfa-part2-Bisimulation-13348" class="Comment">--------</a>
    <a id="plfa_plfa-part2-Bisimulation-13361" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-13363" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13253" class="Datatype">Leg</a> <a id="plfa_plfa-part2-Bisimulation-13367" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13264" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-13370" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13267" class="Bound">N</a>
</pre><p>在我们的形式化中，在这里，我们可以使用比 <code>—↠</code> 更强的关系，用 <code>—→</code> 来取而代之。</p><p>我们现在可以陈述并证明这个关系是一个模拟。 同样，在这里，我们可以使用比 <code>—↠</code> 更强的关系，用 <code>—→</code> 来取而代之。</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-sim"></a><a id="plfa_plfa-part2-Bisimulation-13763" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13763" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13767" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-13769" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-13771" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-13772" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13772" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-13774" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13774" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-13775" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-13777" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-13778" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13778" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-13780" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13780" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-13783" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13783" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-13785" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-13787" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13772" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-13789" href="../More/#plfa_plfa-part2-More-22742" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-13791" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13774" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-13792" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-13796" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-13798" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13778" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-13800" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5727" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-13802" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13780" class="Bound">M†</a>
  <a id="plfa_plfa-part2-Bisimulation-13807" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-13809" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13778" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-13811" href="../More/#plfa_plfa-part2-More-30216" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Bisimulation-13814" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13783" class="Bound">N</a>
    <a id="plfa_plfa-part2-Bisimulation-13820" class="Comment">---------</a>
  <a id="plfa_plfa-part2-Bisimulation-13832" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-13834" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13253" class="Datatype">Leg</a>  <a id="plfa_plfa-part2-Bisimulation-13839" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13780" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-13842" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13783" class="Bound">N</a>
<a id="plfa_plfa-part2-Bisimulation-13844" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13763" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13848" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5776" class="InductiveConstructor">~`</a>              <a id="plfa_plfa-part2-Bisimulation-13864" class="Symbol">()</a>
<a id="plfa_plfa-part2-Bisimulation-13867" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13763" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13871" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13872" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5834" class="InductiveConstructor Operator">~ƛ</a> <a id="plfa_plfa-part2-Bisimulation-13875" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13875" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-13877" class="Symbol">)</a>         <a id="plfa_plfa-part2-Bisimulation-13887" class="Symbol">()</a>
<a id="plfa_plfa-part2-Bisimulation-13890" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13763" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13894" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13895" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13895" class="Bound">~L</a> <a id="plfa_plfa-part2-Bisimulation-13898" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5919" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-13901" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13901" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-13903" class="Symbol">)</a>      <a id="plfa_plfa-part2-Bisimulation-13910" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13911" href="../More/#plfa_plfa-part2-More-30275" class="InductiveConstructor">ξ-·₁</a> <a id="plfa_plfa-part2-Bisimulation-13916" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13916" class="Bound">L—→</a><a id="plfa_plfa-part2-Bisimulation-13919" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Bisimulation-13923" class="Keyword">with</a> <a id="plfa_plfa-part2-Bisimulation-13928" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13763" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13932" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13895" class="Bound">~L</a> <a id="plfa_plfa-part2-Bisimulation-13935" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13916" class="Bound">L—→</a>
<a id="plfa_plfa-part2-Bisimulation-13939" class="Symbol">...</a>  <a id="plfa_plfa-part2-Bisimulation-13944" class="Symbol">|</a> <a id="plfa_plfa-part2-Bisimulation-13946" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13293" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-13950" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13950" class="Bound">~L′</a> <a id="plfa_plfa-part2-Bisimulation-13954" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13954" class="Bound">L†—→</a>                 <a id="plfa_plfa-part2-Bisimulation-13975" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-13978" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13293" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-13982" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13983" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13950" class="Bound">~L′</a> <a id="plfa_plfa-part2-Bisimulation-13987" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5919" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-13990" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-13992" class="Symbol">)</a>   <a id="plfa_plfa-part2-Bisimulation-13996" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13997" href="../More/#plfa_plfa-part2-More-30275" class="InductiveConstructor">ξ-·₁</a> <a id="plfa_plfa-part2-Bisimulation-14002" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13954" class="Bound">L†—→</a><a id="plfa_plfa-part2-Bisimulation-14006" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-14008" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13763" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-14012" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14013" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14013" class="Bound">~V</a> <a id="plfa_plfa-part2-Bisimulation-14016" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5919" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-14019" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14019" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-14021" class="Symbol">)</a>      <a id="plfa_plfa-part2-Bisimulation-14028" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14029" href="../More/#plfa_plfa-part2-More-30384" class="InductiveConstructor">ξ-·₂</a> <a id="plfa_plfa-part2-Bisimulation-14034" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14034" class="Bound">VV</a> <a id="plfa_plfa-part2-Bisimulation-14037" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14037" class="Bound">M—→</a><a id="plfa_plfa-part2-Bisimulation-14040" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Bisimulation-14044" class="Keyword">with</a> <a id="plfa_plfa-part2-Bisimulation-14049" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13763" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-14053" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14019" class="Bound">~M</a> <a id="plfa_plfa-part2-Bisimulation-14056" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14037" class="Bound">M—→</a>
<a id="plfa_plfa-part2-Bisimulation-14060" class="Symbol">...</a>  <a id="plfa_plfa-part2-Bisimulation-14065" class="Symbol">|</a> <a id="plfa_plfa-part2-Bisimulation-14067" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13293" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-14071" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14071" class="Bound">~M′</a> <a id="plfa_plfa-part2-Bisimulation-14075" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14075" class="Bound">M†—→</a>                 <a id="plfa_plfa-part2-Bisimulation-14096" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-14099" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13293" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-14103" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14104" class="Bound">~V</a> <a id="plfa_plfa-part2-Bisimulation-14107" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5919" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-14110" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14071" class="Bound">~M′</a><a id="plfa_plfa-part2-Bisimulation-14113" class="Symbol">)</a>   <a id="plfa_plfa-part2-Bisimulation-14117" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14118" href="../More/#plfa_plfa-part2-More-30384" class="InductiveConstructor">ξ-·₂</a> <a id="plfa_plfa-part2-Bisimulation-14123" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14124" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7604" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-14129" class="Bound">~V</a> <a id="plfa_plfa-part2-Bisimulation-14132" class="Bound">VV</a><a id="plfa_plfa-part2-Bisimulation-14134" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-14136" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14075" class="Bound">M†—→</a><a id="plfa_plfa-part2-Bisimulation-14140" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-14142" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13763" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-14146" class="Symbol">((</a><a id="plfa_plfa-part2-Bisimulation-14148" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5834" class="InductiveConstructor Operator">~ƛ</a> <a id="plfa_plfa-part2-Bisimulation-14151" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14151" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-14153" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-14155" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5919" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-14158" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14158" class="Bound">~V</a><a id="plfa_plfa-part2-Bisimulation-14160" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-14162" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14163" href="../More/#plfa_plfa-part2-More-30507" class="InductiveConstructor">β-ƛ</a> <a id="plfa_plfa-part2-Bisimulation-14167" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14167" class="Bound">VV</a><a id="plfa_plfa-part2-Bisimulation-14169" class="Symbol">)</a>        <a id="plfa_plfa-part2-Bisimulation-14178" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-14181" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13293" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-14185" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14186" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12023" class="Function">~sub</a> <a id="plfa_plfa-part2-Bisimulation-14191" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14151" class="Bound">~N</a> <a id="plfa_plfa-part2-Bisimulation-14194" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14158" class="Bound">~V</a><a id="plfa_plfa-part2-Bisimulation-14196" class="Symbol">)</a>  <a id="plfa_plfa-part2-Bisimulation-14199" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14200" href="../More/#plfa_plfa-part2-More-30507" class="InductiveConstructor">β-ƛ</a> <a id="plfa_plfa-part2-Bisimulation-14204" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14205" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7604" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-14210" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14158" class="Bound">~V</a> <a id="plfa_plfa-part2-Bisimulation-14213" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14167" class="Bound">VV</a><a id="plfa_plfa-part2-Bisimulation-14215" class="Symbol">))</a>
<a id="plfa_plfa-part2-Bisimulation-14218" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13763" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-14222" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14223" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6043" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-14228" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14228" class="Bound">~M</a> <a id="plfa_plfa-part2-Bisimulation-14231" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14231" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-14233" class="Symbol">)</a>    <a id="plfa_plfa-part2-Bisimulation-14238" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14239" href="../More/#plfa_plfa-part2-More-31534" class="InductiveConstructor">ξ-let</a> <a id="plfa_plfa-part2-Bisimulation-14245" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14245" class="Bound">M—→</a><a id="plfa_plfa-part2-Bisimulation-14248" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Bisimulation-14252" class="Keyword">with</a> <a id="plfa_plfa-part2-Bisimulation-14257" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13763" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-14261" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14228" class="Bound">~M</a> <a id="plfa_plfa-part2-Bisimulation-14264" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14245" class="Bound">M—→</a>
<a id="plfa_plfa-part2-Bisimulation-14268" class="Symbol">...</a>  <a id="plfa_plfa-part2-Bisimulation-14273" class="Symbol">|</a> <a id="plfa_plfa-part2-Bisimulation-14275" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13293" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-14279" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14279" class="Bound">~M′</a> <a id="plfa_plfa-part2-Bisimulation-14283" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14283" class="Bound">M†—→</a>                 <a id="plfa_plfa-part2-Bisimulation-14304" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-14307" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13293" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-14311" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14312" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6043" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-14317" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14279" class="Bound">~M′</a> <a id="plfa_plfa-part2-Bisimulation-14321" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-14323" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-14325" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14326" href="../More/#plfa_plfa-part2-More-30384" class="InductiveConstructor">ξ-·₂</a> <a id="plfa_plfa-part2-Bisimulation-14331" href="../More/#plfa_plfa-part2-More-27431" class="InductiveConstructor">V-ƛ</a> <a id="plfa_plfa-part2-Bisimulation-14335" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14283" class="Bound">M†—→</a><a id="plfa_plfa-part2-Bisimulation-14339" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-14341" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13763" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-14345" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14346" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6043" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-14351" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14351" class="Bound">~V</a> <a id="plfa_plfa-part2-Bisimulation-14354" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14354" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-14356" class="Symbol">)</a>    <a id="plfa_plfa-part2-Bisimulation-14361" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14362" href="../More/#plfa_plfa-part2-More-31656" class="InductiveConstructor">β-let</a> <a id="plfa_plfa-part2-Bisimulation-14368" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14368" class="Bound">VV</a><a id="plfa_plfa-part2-Bisimulation-14370" class="Symbol">)</a>      <a id="plfa_plfa-part2-Bisimulation-14377" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-14380" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13293" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-14384" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14385" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12023" class="Function">~sub</a> <a id="plfa_plfa-part2-Bisimulation-14390" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14354" class="Bound">~N</a> <a id="plfa_plfa-part2-Bisimulation-14393" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14351" class="Bound">~V</a><a id="plfa_plfa-part2-Bisimulation-14395" class="Symbol">)</a>  <a id="plfa_plfa-part2-Bisimulation-14398" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14399" href="../More/#plfa_plfa-part2-More-30507" class="InductiveConstructor">β-ƛ</a> <a id="plfa_plfa-part2-Bisimulation-14403" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14404" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7604" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-14409" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14351" class="Bound">~V</a> <a id="plfa_plfa-part2-Bisimulation-14412" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14368" class="Bound">VV</a><a id="plfa_plfa-part2-Bisimulation-14414" class="Symbol">))</a>
</pre><p>这个证明由分情况讨论来完成，检查每一个 <code>M ~ M†</code> 的例子，和每一个 <code>M —→ M†</code> 的例子， 并在规约是 <code>ξ</code> 规则时使用递归，也因此包括了另一个规约。 证明的结构和可进性的证明也有些类似：</p><ul><li>如果相关的项是变量，那么无可应用的规约。</li><li>如果相关的项是 λ 抽象，那么无可应用的规约。</li><li>如果相关的项是应用，那么有三种子情况：<ul><li><p>源项由 <code>ξ-·₁</code> 规约，在此情况下目标项也一样。递归应用可以让我们得到：</p><pre><code>L  --- —→ ---  L′
|              |
|              |
~              ~
|              |
|              |
L† --- —→ --- L′†</code></pre><p>从而得到：</p><pre><code> L · M  --- —→ ---  L′ · M
   |                   |
   |                   |
   ~                   ~
   |                   |
   |                   |
L† · M† --- —→ --- L′† · M†</code></pre></li></ul><ul><li><p>源项由 <code>ξ-·₂</code> 规约，在此情况下目标项也一样。递归应用可以让我们得到：</p><pre><code>M  --- —→ ---  M′
|              |
|              |
~              ~
|              |
|              |
M† --- —→ --- M′†</code></pre><p>从而得到：</p><pre><code> V · M  --- —→ ---  V · M′
   |                  |
   |                  |
   ~                  ~
   |                  |
   |                  |
V† · M† --- —→ --- V† · M′†</code></pre><p>因为模拟和值可交换，且 <code>V</code> 是一个值，所以 <code>V†</code> 也是一个值。</p></li></ul><ul><li><p>源项由 <code>β-ƛ</code> 规约，在此情况下目标项也一样：</p><pre><code> (ƛ x ⇒ N) · V  --- —→ ---  N [ x := V ]
      |                           |
      |                           |
      ~                           ~
      |                           |
      |                           |
(ƛ x ⇒ N†) · V† --- —→ --- N† [ x :=  V† ]</code></pre><p>因为模拟和值可交换，且 <code>V</code> 是一个值，所以 <code>V†</code> 也是一个值。 因为模拟和替换可交换，且 <code>N ~ N†</code> 和 <code>V ~ V†</code> 成立，所以我们得到 <code>N [ x := V ] ~ N† [ x := V† ]</code>。</p></li></ul></li></ul><ul><li><p>如果相关的项是 <code>let</code> 和抽象应用，那么有两种子情况：</p><ul><li><p>源项由 <code>ξ-let</code> 规约，在此情况下目标项由 <code>ξ-·₂</code> 规约。递归应用可以让我们得到：</p><pre><code>M  --- —→ ---  M′
|              |
|              |
~              ~
|              |
|              |
M† --- —→ --- M′†</code></pre><p>从而得到：</p><pre><code>let x = M in N --- —→ --- let x = M′ in N
      |                         |
      |                         |
      ~                         ~
      |                         |
      |                         |
(ƛ x ⇒ N) · M  --- —→ --- (ƛ x ⇒ N) · M′</code></pre></li></ul><ul><li><p>源项由 <code>β-let</code> 规约，在此情况下目标项由 <code>β-ƛ</code> 规约：</p><pre><code>let x = V in N  --- —→ ---  N [ x := V ]
      |                         |
      |                         |
      ~                         ~
      |                         |
      |                         |
(ƛ x ⇒ N†) · V† --- —→ --- N† [ x := V† ]</code></pre><p>因为模拟和值可交换，且 <code>V</code> 是一个值，所以 <code>V†</code> 也是一个值。 因为模拟和替换可交换，且 <code>N ~ N†</code> 和 <code>V ~ V†</code> 成立，所以我们得到 <code>N [ x := V ] ~ N† [ x := V† ]</code>。</p></li></ul></li></ul><h4 id="练习-sim¹-实践">练习 <code>sim⁻¹</code> （实践）</h4><p>证明我们也有反方向的模拟，因此我们有一个互模拟。</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-19184" class="Comment">-- 在这里写出你的代码。</a>
</pre><h4 id="练习-products-实践">练习 <code>products</code> （实践）</h4><p>证明 <a href="../More/">More</a> 章节中两种积的表达方式满足互模拟。 你需要包含的构造有：变量，以及与函数和积相关的构造。 在此情况下，模拟并<strong>不是</strong>锁步的。</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-19618" class="Comment">-- 在这里写出你的代码。</a>
</pre><h2 id="unicode">Unicode</h2><p>本章节使用了下列 Unicode：</p><pre><code>†  U+2020  DAGGER (\dag)
⁻  U+207B  SUPERSCRIPT MINUS (\^-)
¹  U+00B9  SUPERSCRIPT ONE (\^1)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../More/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part2/Bisimulation.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Inference/">下一章</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">编程语言基础：Agda 描述</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div><h3 class="footer-heading">本章翻译进度：100% ，译者：Fangyi Zhou</h3>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>