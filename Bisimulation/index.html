<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-MkpYfmkWIfATGEd6NpDhZJQB2nIkJDL4/+fTWrR8KGUYK4WpHdNkNtsOewHrkVqI4K1SrtjK7aC/fwQljbifBA==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-T2Tad3PSo5pIHyLVaV57XanuJRwSgTPT+WVb96FUf6y0ZJIXP4d/lNPJUqbUZ3j0Nq/gej2yteryEz/Hkr2Cdg==" title="Dark" id="stylesheet-dark" disabled><title>编程语言基础：Agda 描述 – Bisimulation</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header"><div class="wrapper"><a class="site-title" href="../">编程语言基础：Agda 描述</a><nav class="site-nav"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">主页</a> <a class="page-link" href="../Announcements/">公告</a> <a class="page-link" href="../GettingStarted/">使用说明</a> <a class="page-link" href="../Citing/">引用</a> <a class="page-link" href="https://plfa.github.io/">English</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager"><ul class="pagination"><li><a class="pagelink" href="../More/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part2/Bisimulation.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Inference/">下一章</a></li><li class="separator">•</li></ul></nav><header class="post-header"><h1 class="post-title">Bisimulation: 联系不同的规约系统</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-131" class="Keyword">module</a> <a id="plfa_plfa-part2-Bisimulation-138" href="../Bisimulation/#" class="Module">plfa.part2.Bisimulation</a> <a id="plfa_plfa-part2-Bisimulation-162" class="Keyword">where</a>
</pre><p>有一些构造可以用其他的构造来定义。 在上一章中，我们展示了 <em>let</em> 项可以被重写为抽象的应用，以及积的两种不同表示方法 —— 一种使用投影，一种使用匹配表达式。 本章中，我们来看看如何形式化这些断言。</p><p>给定两个不同的系统，它们有不同的项和不同的规约规则，我们定义诸如 『一个系统<strong>模拟（Simulate）</strong>了另一个系统』此类断言的意义。 假设两个系统分别叫做<strong>源</strong>（Source）和<strong>目标</strong>（Target），我们用 <code>M</code> 和 <code>N</code> 表示源系统的项，<code>M†</code> 和 <code>N†</code> 表示目标系统的项。 我们定义一个关系</p><pre><code>M ~ M†</code></pre><p>于两个系统对应的项之上。 如果每个源系统的每一个规约都有一个对应的规约序列，那我们就有了一个<strong>模拟</strong>。</p><p><strong>模拟</strong>：对于任意的 <code>M</code>、<code>M†</code> 和 <code>N</code>， 如果 <code>M ~ M†</code> 和 <code>M —→ N</code> 成立，那么 <code>M† —↠ N†</code> 和 <code>N ~ N†</code> 对于一些 <code>N†</code> 成立。</p><p>或者，用图表来表示：</p><pre><code>M  --- —→ --- N
|             |
|             |
~             ~
|             |
|             |
M† --- —↠ --- N†</code></pre><p>有时我们会使用一个更强的条件，使得每个源系统的规约对应目标系统的规约（而不是规约序列）：</p><pre><code>M  --- —→ --- N
|             |
|             |
~             ~
|             |
|             |
M† --- —→ --- N†</code></pre><p>这个更强的条件被称为<strong>锁步</strong>（Lock-step）或者<strong>准确无误</strong>（On the nose）的模拟。</p><p>『译注：<a href="https://dictionary.cambridge.org/dictionary/english-chinese-simplified/on-the-nose">On the nose</a> 本义为在鼻子之上，用于表述准确无误。』</p><p>如果从目标系统到源系统也有一个模拟：即每个目标系统的规约在源目标系统中有对应的规约序列， 我们对这样的情况尤其感兴趣。 这样的情况被称为<strong>双模拟</strong>（Bisimulation）。</p><p>要建立模拟，我们需要分情况讨论所有的可能规约，以及所有它们可能联系的项。 对于每个源系统中规约的步骤，我们必须给出目标系统中对应的规约系列。</p><p>譬如说，源系统可以是带 <em>let</em> 项的 λ 演算，而目标系统中的 <code>let</code> 被翻译了。 定义这个关系的关键规则是：</p><pre><code>M ~ M†
N ~ N†
--------------------------------
let x = M in N ~ (ƛ x ⇒ N†) · M†</code></pre><p>其他的规则都是合同性的规则：变量于它们自身相关，抽象与应用在它们的组成部分分别相关时相关：</p><pre><code>-----
x ~ x

N ~ N†
------------------
ƛ x ⇒ N ~ ƛ x ⇒ N†

L ~ L†
M ~ M†
---------------
L · M ~ L† · M†</code></pre><p>讨论语言中的其他构造——自然数、不动点和积等——对我们本章的重点意义不大， 我们节约长度而不讨论。</p><p>在此情况下，关系的定义可以用一个从源至目标的函数来制定：</p><pre><code>(x) †               =  x
(ƛ x ⇒ N) †         =  ƛ x ⇒ (N †)
(L · M) †           =  (L †) · (M †)
(let x = M in N) †  =  (ƛ x ⇒ (N †)) · (M †)</code></pre><p>我们有：</p><pre><code>M † ≡ N
-------
M ~ N</code></pre><p>以及其逆命题。 但一般情况下，我们可能有一个关系而不一定有对应的函数。</p><p>本章形式化上文中定义的 <code>~</code> 关系是一个从源系统至目标系统的模拟。 我们将反向的证明留作习题。 另一个习题是证明 <a href="../More/">More</a> 章节中积的替代表示方法形成了一个双模拟。</p><h2 id="导入">导入</h2><p>我们从 <a href="../More/">More</a> 章节中导入源语言：</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-4841" class="Keyword">open</a> <a id="plfa_plfa-part2-Bisimulation-4846" class="Keyword">import</a> <a id="plfa_plfa-part2-Bisimulation-4853" href="../More/#" class="Module">plfa.part2.More</a>
</pre><h2 id="模拟">模拟</h2><p>我们直接地形式化导言中的模拟：</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-5025" class="Keyword">infix</a>  <a id="plfa_plfa-part2-Bisimulation-5032" class="Number">4</a> <a id="plfa_plfa-part2-Bisimulation-5034" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">_~_</a>
<a id="plfa_plfa-part2-Bisimulation-5038" class="Keyword">infix</a>  <a id="plfa_plfa-part2-Bisimulation-5045" class="Number">5</a> <a id="plfa_plfa-part2-Bisimulation-5047" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5178" class="InductiveConstructor Operator">~ƛ_</a>
<a id="plfa_plfa-part2-Bisimulation-5051" class="Keyword">infix</a>  <a id="plfa_plfa-part2-Bisimulation-5058" class="Number">7</a> <a id="plfa_plfa-part2-Bisimulation-5060" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5263" class="InductiveConstructor Operator">_~·_</a>

<a id="plfa_plfa-part2-Bisimulation-5066" class="Keyword">data</a> <a id="plfa_plfa-part2-Bisimulation-_~_"></a><a id="plfa_plfa-part2-Bisimulation-5071" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">_~_</a> <a id="plfa_plfa-part2-Bisimulation-5075" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5077" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-5079" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5080" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5080" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5082" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5082" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-5083" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-5085" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5087" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-5088" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5080" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5090" href="../More/#plfa_plfa-part2-More-22743" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-5092" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5082" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-5093" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-5095" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5097" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-5098" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5080" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5100" href="../More/#plfa_plfa-part2-More-22743" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-5102" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5082" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-5103" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-5105" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5107" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#326" class="Primitive">Set</a> <a id="plfa_plfa-part2-Bisimulation-5111" class="Keyword">where</a>

  <a id="plfa_plfa-part2-Bisimulation-_~_.~`"></a><a id="plfa_plfa-part2-Bisimulation-5120" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5120" class="InductiveConstructor">~`</a> <a id="plfa_plfa-part2-Bisimulation-5123" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5125" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-5127" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5128" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5128" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5130" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5130" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-5131" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-5133" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5134" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5134" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-5136" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5138" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5128" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5140" href="../More/#plfa_plfa-part2-More-21601" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-5142" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5130" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-5143" class="Symbol">}</a>
     <a id="plfa_plfa-part2-Bisimulation-5150" class="Comment">---------</a>
   <a id="plfa_plfa-part2-Bisimulation-5163" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5165" href="../More/#plfa_plfa-part2-More-22788" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Bisimulation-5167" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5134" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-5169" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-5171" href="../More/#plfa_plfa-part2-More-22788" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Bisimulation-5173" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5134" class="Bound">x</a>

  <a id="plfa_plfa-part2-Bisimulation-_~_.~ƛ_"></a><a id="plfa_plfa-part2-Bisimulation-5178" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5178" class="InductiveConstructor Operator">~ƛ_</a> <a id="plfa_plfa-part2-Bisimulation-5182" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5184" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-5186" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5187" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5187" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5189" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5189" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-5191" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5191" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-5192" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-5194" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5195" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5195" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-5197" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5197" class="Bound">N†</a> <a id="plfa_plfa-part2-Bisimulation-5200" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5202" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5187" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5204" href="../More/#plfa_plfa-part2-More-21491" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Bisimulation-5206" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5189" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-5208" href="../More/#plfa_plfa-part2-More-22743" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-5210" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5191" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-5211" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Bisimulation-5217" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5219" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5195" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-5221" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-5223" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5197" class="Bound">N†</a>
      <a id="plfa_plfa-part2-Bisimulation-5232" class="Comment">----------</a>
    <a id="plfa_plfa-part2-Bisimulation-5247" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5249" href="../More/#plfa_plfa-part2-More-22849" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Bisimulation-5251" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5195" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-5253" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-5255" href="../More/#plfa_plfa-part2-More-22849" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Bisimulation-5257" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5197" class="Bound">N†</a>

  <a id="plfa_plfa-part2-Bisimulation-_~_._~·_"></a><a id="plfa_plfa-part2-Bisimulation-5263" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5263" class="InductiveConstructor Operator">_~·_</a> <a id="plfa_plfa-part2-Bisimulation-5268" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5270" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-5272" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5273" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5273" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5275" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5275" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-5277" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5277" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-5278" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-5280" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5281" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5281" class="Bound">L</a> <a id="plfa_plfa-part2-Bisimulation-5283" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5283" class="Bound">L†</a> <a id="plfa_plfa-part2-Bisimulation-5286" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5288" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5273" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5290" href="../More/#plfa_plfa-part2-More-22743" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-5292" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5275" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-5294" href="../More/#plfa_plfa-part2-More-21332" class="InductiveConstructor Operator">⇒</a> <a id="plfa_plfa-part2-Bisimulation-5296" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5277" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-5297" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-5299" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5300" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5300" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-5302" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5302" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-5305" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5307" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5273" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5309" href="../More/#plfa_plfa-part2-More-22743" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-5311" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5275" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-5312" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Bisimulation-5318" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5320" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5281" class="Bound">L</a> <a id="plfa_plfa-part2-Bisimulation-5322" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-5324" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5283" class="Bound">L†</a>
    <a id="plfa_plfa-part2-Bisimulation-5331" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5333" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5300" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-5335" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-5337" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5302" class="Bound">M†</a>
      <a id="plfa_plfa-part2-Bisimulation-5346" class="Comment">---------------</a>
    <a id="plfa_plfa-part2-Bisimulation-5366" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5368" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5281" class="Bound">L</a> <a id="plfa_plfa-part2-Bisimulation-5370" href="../More/#plfa_plfa-part2-More-22917" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Bisimulation-5372" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5300" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-5374" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-5376" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5283" class="Bound">L†</a> <a id="plfa_plfa-part2-Bisimulation-5379" href="../More/#plfa_plfa-part2-More-22917" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Bisimulation-5381" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5302" class="Bound">M†</a>

  <a id="plfa_plfa-part2-Bisimulation-_~_.~let"></a><a id="plfa_plfa-part2-Bisimulation-5387" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5387" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-5392" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5394" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-5396" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5397" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5397" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5399" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5399" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-5401" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5401" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-5402" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-5404" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5405" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5405" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-5407" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5407" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-5410" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5412" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5397" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5414" href="../More/#plfa_plfa-part2-More-22743" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-5416" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5399" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-5417" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-5419" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5420" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5420" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-5422" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5422" class="Bound">N†</a> <a id="plfa_plfa-part2-Bisimulation-5425" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5427" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5397" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5429" href="../More/#plfa_plfa-part2-More-21491" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Bisimulation-5431" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5399" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-5433" href="../More/#plfa_plfa-part2-More-22743" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-5435" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5401" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-5436" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Bisimulation-5442" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5444" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5405" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-5446" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-5448" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5407" class="Bound">M†</a>
    <a id="plfa_plfa-part2-Bisimulation-5455" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5457" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5420" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-5459" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-5461" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5422" class="Bound">N†</a>
      <a id="plfa_plfa-part2-Bisimulation-5470" class="Comment">----------------------</a>
    <a id="plfa_plfa-part2-Bisimulation-5497" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5499" href="../More/#plfa_plfa-part2-More-23400" class="InductiveConstructor">`let</a> <a id="plfa_plfa-part2-Bisimulation-5504" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5405" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-5506" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5420" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-5508" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-5510" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-5511" href="../More/#plfa_plfa-part2-More-22849" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Bisimulation-5513" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5422" class="Bound">N†</a><a id="plfa_plfa-part2-Bisimulation-5515" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-5517" href="../More/#plfa_plfa-part2-More-22917" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Bisimulation-5519" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5407" class="Bound">M†</a>
</pre><p><a href="../More/">More</a> 章节中的语言有更多的构造，我们可以简单地扩充上述定义。 但是，使上述的定义小而精简让我们注重本章的重点。 虽然我们有一个较大的源语言，但我们只在模拟中考虑我们感兴趣的项，这是一个方便的小窍门。</p><h4 id="练习-_-实践">练习 <code>_†</code> （实践）</h4><p>形式化导言中给定的源语言至目标语言的翻译。 证明 <code>M † ≡ N</code> 蕴含了 <code>M ~ N</code>，以及其逆命题。</p><p><strong>提示：</strong>为了简洁，我们只注重语言中的一小部分构造，所以 <code>_†</code> 的定义只需要注重相关的部分。 达成此目的的一种方法是用<a href="../Decidable/#proof-by-reflection">互映证明</a>定义一个谓词来选出 <code>_†</code> 定义域中的项。</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-6622" class="Comment">-- 在这里写出你的代码。</a>
</pre><h2 id="模拟与值可交换">模拟与值可交换</h2><p>我们需要一系列技术结果。首先是模拟与值可交换（Commute）。 即：若 <code>M ~ M†</code> 且 <code>M</code> 是一个值，那么 <code>M†</code> 也是一个值。</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-~val"></a><a id="plfa_plfa-part2-Bisimulation-6948" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6948" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-6953" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-6955" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-6957" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-6958" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6958" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-6960" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6960" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-6961" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-6963" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-6964" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6964" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-6966" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6966" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-6969" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-6971" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6958" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-6973" href="../More/#plfa_plfa-part2-More-22743" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-6975" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6960" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-6976" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-6980" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-6982" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6964" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-6984" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-6986" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6966" class="Bound">M†</a>
  <a id="plfa_plfa-part2-Bisimulation-6991" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-6993" href="../More/#plfa_plfa-part2-More-27416" class="Datatype">Value</a> <a id="plfa_plfa-part2-Bisimulation-6999" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6964" class="Bound">M</a>
    <a id="plfa_plfa-part2-Bisimulation-7005" class="Comment">--------</a>
  <a id="plfa_plfa-part2-Bisimulation-7016" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-7018" href="../More/#plfa_plfa-part2-More-27416" class="Datatype">Value</a> <a id="plfa_plfa-part2-Bisimulation-7024" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6966" class="Bound">M†</a>
<a id="plfa_plfa-part2-Bisimulation-7027" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6948" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-7032" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5120" class="InductiveConstructor">~`</a>           <a id="plfa_plfa-part2-Bisimulation-7045" class="Symbol">()</a>
<a id="plfa_plfa-part2-Bisimulation-7048" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6948" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-7053" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-7054" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5178" class="InductiveConstructor Operator">~ƛ</a> <a id="plfa_plfa-part2-Bisimulation-7057" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7057" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-7059" class="Symbol">)</a>      <a id="plfa_plfa-part2-Bisimulation-7066" href="../More/#plfa_plfa-part2-More-27464" class="InductiveConstructor">V-ƛ</a>  <a id="plfa_plfa-part2-Bisimulation-7071" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-7074" href="../More/#plfa_plfa-part2-More-27464" class="InductiveConstructor">V-ƛ</a>
<a id="plfa_plfa-part2-Bisimulation-7078" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6948" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-7083" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-7084" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7084" class="Bound">~L</a> <a id="plfa_plfa-part2-Bisimulation-7087" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5263" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-7090" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7090" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-7092" class="Symbol">)</a>   <a id="plfa_plfa-part2-Bisimulation-7096" class="Symbol">()</a>
<a id="plfa_plfa-part2-Bisimulation-7099" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6948" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-7104" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-7105" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5387" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-7110" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7110" class="Bound">~M</a> <a id="plfa_plfa-part2-Bisimulation-7113" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7113" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-7115" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-7117" class="Symbol">()</a>
</pre><p>这是一个直接的分情况讨论，唯一有意思的情况是 λ 抽象。</p><h4 id="exercise-val¹-实践">Exercise <code>~val⁻¹</code> （实践）</h4><p>证明此命题在反方向亦成立： 若 <code>M ~ M†</code> 且 <code>Value M†</code>，那么 <code>Value M</code> 成立。</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-7508" class="Comment">-- 在这里写出你的代码。</a>
</pre><h2 id="模拟与重命名可交换">模拟与重命名可交换</h2><p>下一个技术结果是模拟和重命名可交换。 即：若 <code>ρ</code> 将任意的判断 <code>Γ ∋ A</code> 映射至另一个判断 <code>Δ ∋ A</code>，且 <code>M ~ M†</code>，那么 <code>rename ρ M ~ rename ρ M†</code>：</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-~rename"></a><a id="plfa_plfa-part2-Bisimulation-7891" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7891" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-7899" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-7901" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-7903" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-7904" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7904" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-7906" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7906" class="Bound">Δ</a><a id="plfa_plfa-part2-Bisimulation-7907" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-7911" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-7913" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-7914" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7914" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-7916" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-7918" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-7920" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-7921" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7921" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-7922" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-7924" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-7926" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7904" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-7928" href="../More/#plfa_plfa-part2-More-21601" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-7930" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7921" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-7932" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-7934" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7906" class="Bound">Δ</a> <a id="plfa_plfa-part2-Bisimulation-7936" href="../More/#plfa_plfa-part2-More-21601" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-7938" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7921" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-7939" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Bisimulation-7945" class="Comment">----------------------------------------------------------</a>
  <a id="plfa_plfa-part2-Bisimulation-8006" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-8008" class="Symbol">(∀</a> <a id="plfa_plfa-part2-Bisimulation-8011" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-8012" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8012" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-8013" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-8015" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-8016" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8016" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-8018" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8018" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-8021" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-8023" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7904" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-8025" href="../More/#plfa_plfa-part2-More-22743" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-8027" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8012" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-8028" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-8030" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-8032" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8016" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-8034" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-8036" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8018" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-8039" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-8041" href="../More/#plfa_plfa-part2-More-24656" class="Function">rename</a> <a id="plfa_plfa-part2-Bisimulation-8048" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7914" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8050" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8016" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-8052" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-8054" href="../More/#plfa_plfa-part2-More-24656" class="Function">rename</a> <a id="plfa_plfa-part2-Bisimulation-8061" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7914" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8063" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8018" class="Bound">M†</a><a id="plfa_plfa-part2-Bisimulation-8065" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-8067" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7891" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8075" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8075" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8077" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8078" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5120" class="InductiveConstructor">~`</a><a id="plfa_plfa-part2-Bisimulation-8080" class="Symbol">)</a>          <a id="plfa_plfa-part2-Bisimulation-8091" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-8094" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5120" class="InductiveConstructor">~`</a>
<a id="plfa_plfa-part2-Bisimulation-8097" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7891" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8105" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8105" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8107" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8108" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5178" class="InductiveConstructor Operator">~ƛ</a> <a id="plfa_plfa-part2-Bisimulation-8111" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8111" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-8113" class="Symbol">)</a>       <a id="plfa_plfa-part2-Bisimulation-8121" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-8124" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5178" class="InductiveConstructor Operator">~ƛ</a> <a id="plfa_plfa-part2-Bisimulation-8127" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8128" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7891" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8136" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8137" href="../More/#plfa_plfa-part2-More-24485" class="Function">ext</a> <a id="plfa_plfa-part2-Bisimulation-8141" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8105" class="Bound">ρ</a><a id="plfa_plfa-part2-Bisimulation-8142" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-8144" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8111" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-8146" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-8148" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7891" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8156" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8156" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8158" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8159" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8159" class="Bound">~L</a> <a id="plfa_plfa-part2-Bisimulation-8162" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5263" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-8165" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8165" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-8167" class="Symbol">)</a>    <a id="plfa_plfa-part2-Bisimulation-8172" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-8175" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8176" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7891" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8184" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8156" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8186" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8159" class="Bound">~L</a><a id="plfa_plfa-part2-Bisimulation-8188" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-8190" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5263" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-8193" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8194" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7891" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8202" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8156" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8204" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8165" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-8206" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-8208" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7891" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8216" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8216" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8218" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8219" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5387" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-8224" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8224" class="Bound">~M</a> <a id="plfa_plfa-part2-Bisimulation-8227" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8227" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-8229" class="Symbol">)</a>  <a id="plfa_plfa-part2-Bisimulation-8232" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-8235" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5387" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-8240" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8241" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7891" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8249" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8216" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8251" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8224" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-8253" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-8255" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8256" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7891" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8264" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8265" href="../More/#plfa_plfa-part2-More-24485" class="Function">ext</a> <a id="plfa_plfa-part2-Bisimulation-8269" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8216" class="Bound">ρ</a><a id="plfa_plfa-part2-Bisimulation-8270" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-8272" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8227" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-8274" class="Symbol">)</a>
</pre><p>此证明的结构与重命名的结构相似： 使用递归来重新构造每一个项，并在需要时扩充上下文（在这里，我们只需要在 λ 抽象的抽象体中使用）。</p><h2 id="模拟与替换可交换">模拟与替换可交换</h2><p>第三个技术结果是模拟与替换可交换。 这个结果比重命名更复杂，因为我们之前只有一个重命名映射 <code>ρ</code>， 而现在我们需要两个替换映射 <code>σ</code> 和 <code>σ†</code>。</p><p>这个证明首先需要我们构造一个类似于扩充的概念。 如果 <code>σ</code> 和 <code>σ†</code> 都将任何判断 <code>Γ ∋ A</code> 映射至一个判断 <code>Δ ⊢ A</code>， 且对于 <code>Γ ∋ A</code> 中的任意 <code>x</code>，我们有 <code>σ x ~ σ† x</code>， 那么对于任何 <code>Γ , B ∋ A</code> 中的 <code>x</code>，我们有 <code>exts σ x ~ exts σ† x</code>：</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-~exts"></a><a id="plfa_plfa-part2-Bisimulation-9368" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9368" class="Function">~exts</a> <a id="plfa_plfa-part2-Bisimulation-9374" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-9376" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-9378" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-9379" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9379" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-9381" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9381" class="Bound">Δ</a><a id="plfa_plfa-part2-Bisimulation-9382" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-9386" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-9388" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-9389" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9389" class="Bound">σ</a>  <a id="plfa_plfa-part2-Bisimulation-9392" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-9394" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-9396" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-9397" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9397" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-9398" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-9400" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-9402" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9379" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-9404" href="../More/#plfa_plfa-part2-More-21601" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-9406" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9397" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-9408" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-9410" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9381" class="Bound">Δ</a> <a id="plfa_plfa-part2-Bisimulation-9412" href="../More/#plfa_plfa-part2-More-22743" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-9414" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9397" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-9415" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-9419" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-9421" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-9422" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9422" class="Bound">σ†</a> <a id="plfa_plfa-part2-Bisimulation-9425" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-9427" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-9429" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-9430" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9430" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-9431" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-9433" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-9435" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9379" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-9437" href="../More/#plfa_plfa-part2-More-21601" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-9439" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9430" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-9441" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-9443" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9381" class="Bound">Δ</a> <a id="plfa_plfa-part2-Bisimulation-9445" href="../More/#plfa_plfa-part2-More-22743" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-9447" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9430" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-9448" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-9452" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-9454" class="Symbol">(∀</a> <a id="plfa_plfa-part2-Bisimulation-9457" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-9458" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9458" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-9459" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-9461" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-9463" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-9464" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9464" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-9466" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-9468" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9379" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-9470" href="../More/#plfa_plfa-part2-More-21601" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-9472" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9458" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-9473" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-9475" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-9477" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9389" class="Bound">σ</a> <a id="plfa_plfa-part2-Bisimulation-9479" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9464" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-9481" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-9483" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9422" class="Bound">σ†</a> <a id="plfa_plfa-part2-Bisimulation-9486" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9464" class="Bound">x</a><a id="plfa_plfa-part2-Bisimulation-9487" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Bisimulation-9493" class="Comment">--------------------------------------------------</a>
  <a id="plfa_plfa-part2-Bisimulation-9546" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-9548" class="Symbol">(∀</a> <a id="plfa_plfa-part2-Bisimulation-9551" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-9552" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9552" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-9554" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9554" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-9555" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-9557" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-9559" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-9560" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9560" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-9562" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-9564" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9379" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-9566" href="../More/#plfa_plfa-part2-More-21491" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Bisimulation-9568" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9554" class="Bound">B</a> <a id="plfa_plfa-part2-Bisimulation-9570" href="../More/#plfa_plfa-part2-More-21601" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-9572" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9552" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-9573" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-9575" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-9577" href="../More/#plfa_plfa-part2-More-25529" class="Function">exts</a> <a id="plfa_plfa-part2-Bisimulation-9582" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9389" class="Bound">σ</a> <a id="plfa_plfa-part2-Bisimulation-9584" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9560" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-9586" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-9588" href="../More/#plfa_plfa-part2-More-25529" class="Function">exts</a> <a id="plfa_plfa-part2-Bisimulation-9593" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9422" class="Bound">σ†</a> <a id="plfa_plfa-part2-Bisimulation-9596" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9560" class="Bound">x</a><a id="plfa_plfa-part2-Bisimulation-9597" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-9599" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9368" class="Function">~exts</a> <a id="plfa_plfa-part2-Bisimulation-9605" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9605" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-9608" href="../More/#plfa_plfa-part2-More-21637" class="InductiveConstructor">Z</a>      <a id="plfa_plfa-part2-Bisimulation-9615" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-9618" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5120" class="InductiveConstructor">~`</a>
<a id="plfa_plfa-part2-Bisimulation-9621" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9368" class="Function">~exts</a> <a id="plfa_plfa-part2-Bisimulation-9627" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9627" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-9630" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-9631" href="../More/#plfa_plfa-part2-More-21684" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Bisimulation-9633" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9633" class="Bound">x</a><a id="plfa_plfa-part2-Bisimulation-9634" class="Symbol">)</a>  <a id="plfa_plfa-part2-Bisimulation-9637" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-9640" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7891" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-9648" href="../More/#plfa_plfa-part2-More-21684" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Bisimulation-9651" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-9652" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9627" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-9655" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9633" class="Bound">x</a><a id="plfa_plfa-part2-Bisimulation-9656" class="Symbol">)</a>
</pre><p>这个证明的结构于扩充的结构相似。 新加入的变量平凡地与它自身相关，否则我们可以对假设使用重命名。</p><p>如上定义完扩充之后，证明替换与模拟交换就很直接了。 如果 <code>σ</code> 和 <code>σ†</code> 都将任何判断 <code>Γ ∋ A</code> 映射至一个判断 <code>Δ ⊢ A</code>， 且对于 <code>Γ ∋ A</code> 中的任意 <code>x</code>，我们有 <code>σ x ~ σ† x</code>， 如果 <code>M ~ M†</code>，那么 <code>subst σ M ~ subst σ† M†</code>：</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-~subst"></a><a id="plfa_plfa-part2-Bisimulation-10341" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10341" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-10348" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-10350" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-10352" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10353" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10353" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-10355" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10355" class="Bound">Δ</a><a id="plfa_plfa-part2-Bisimulation-10356" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-10360" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10362" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10363" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10363" class="Bound">σ</a>  <a id="plfa_plfa-part2-Bisimulation-10366" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-10368" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-10370" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10371" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10371" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10372" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-10374" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10376" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10353" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-10378" href="../More/#plfa_plfa-part2-More-21601" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-10380" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10371" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-10382" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10384" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10355" class="Bound">Δ</a> <a id="plfa_plfa-part2-Bisimulation-10386" href="../More/#plfa_plfa-part2-More-22743" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-10388" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10371" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10389" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-10393" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10395" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10396" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10396" class="Bound">σ†</a> <a id="plfa_plfa-part2-Bisimulation-10399" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-10401" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-10403" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10404" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10404" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10405" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-10407" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10409" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10353" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-10411" href="../More/#plfa_plfa-part2-More-21601" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-10413" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10404" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-10415" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10417" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10355" class="Bound">Δ</a> <a id="plfa_plfa-part2-Bisimulation-10419" href="../More/#plfa_plfa-part2-More-22743" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-10421" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10404" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10422" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-10426" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10428" class="Symbol">(∀</a> <a id="plfa_plfa-part2-Bisimulation-10431" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10432" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10432" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10433" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-10435" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10437" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-10438" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10438" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-10440" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-10442" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10353" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-10444" href="../More/#plfa_plfa-part2-More-21601" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-10446" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10432" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10447" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-10449" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10451" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10363" class="Bound">σ</a> <a id="plfa_plfa-part2-Bisimulation-10453" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10438" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-10455" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-10457" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10396" class="Bound">σ†</a> <a id="plfa_plfa-part2-Bisimulation-10460" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10438" class="Bound">x</a><a id="plfa_plfa-part2-Bisimulation-10461" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Bisimulation-10467" class="Comment">---------------------------------------------------------</a>
  <a id="plfa_plfa-part2-Bisimulation-10527" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10529" class="Symbol">(∀</a> <a id="plfa_plfa-part2-Bisimulation-10532" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10533" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10533" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10534" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-10536" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10537" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10537" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-10539" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10539" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-10542" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-10544" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10353" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-10546" href="../More/#plfa_plfa-part2-More-22743" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-10548" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10533" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10549" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-10551" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10553" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10537" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-10555" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-10557" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10539" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-10560" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10562" href="../More/#plfa_plfa-part2-More-25661" class="Function">subst</a> <a id="plfa_plfa-part2-Bisimulation-10568" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10363" class="Bound">σ</a> <a id="plfa_plfa-part2-Bisimulation-10570" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10537" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-10572" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-10574" href="../More/#plfa_plfa-part2-More-25661" class="Function">subst</a> <a id="plfa_plfa-part2-Bisimulation-10580" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10396" class="Bound">σ†</a> <a id="plfa_plfa-part2-Bisimulation-10583" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10539" class="Bound">M†</a><a id="plfa_plfa-part2-Bisimulation-10585" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-10587" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10341" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-10594" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10594" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-10597" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-10598" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5120" class="InductiveConstructor">~`</a> <a id="plfa_plfa-part2-Bisimulation-10601" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10602" class="Argument">x</a> <a id="plfa_plfa-part2-Bisimulation-10604" class="Symbol">=</a> <a id="plfa_plfa-part2-Bisimulation-10606" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10606" class="Bound">x</a><a id="plfa_plfa-part2-Bisimulation-10607" class="Symbol">})</a>  <a id="plfa_plfa-part2-Bisimulation-10611" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-10614" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10594" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-10617" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10606" class="Bound">x</a>
<a id="plfa_plfa-part2-Bisimulation-10619" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10341" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-10626" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10626" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-10629" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-10630" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5178" class="InductiveConstructor Operator">~ƛ</a> <a id="plfa_plfa-part2-Bisimulation-10633" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10633" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-10635" class="Symbol">)</a>       <a id="plfa_plfa-part2-Bisimulation-10643" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-10646" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5178" class="InductiveConstructor Operator">~ƛ</a> <a id="plfa_plfa-part2-Bisimulation-10649" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-10650" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10341" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-10657" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-10658" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9368" class="Function">~exts</a> <a id="plfa_plfa-part2-Bisimulation-10664" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10626" class="Bound">~σ</a><a id="plfa_plfa-part2-Bisimulation-10666" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-10668" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10633" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-10670" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-10672" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10341" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-10679" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10679" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-10682" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-10683" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10683" class="Bound">~L</a> <a id="plfa_plfa-part2-Bisimulation-10686" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5263" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-10689" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10689" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-10691" class="Symbol">)</a>    <a id="plfa_plfa-part2-Bisimulation-10696" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-10699" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-10700" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10341" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-10707" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10679" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-10710" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10683" class="Bound">~L</a><a id="plfa_plfa-part2-Bisimulation-10712" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-10714" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5263" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-10717" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-10718" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10341" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-10725" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10679" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-10728" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10689" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-10730" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-10732" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10341" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-10739" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10739" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-10742" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-10743" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5387" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-10748" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10748" class="Bound">~M</a> <a id="plfa_plfa-part2-Bisimulation-10751" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10751" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-10753" class="Symbol">)</a>  <a id="plfa_plfa-part2-Bisimulation-10756" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-10759" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5387" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-10764" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-10765" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10341" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-10772" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10739" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-10775" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10748" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-10777" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-10779" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-10780" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10341" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-10787" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-10788" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-9368" class="Function">~exts</a> <a id="plfa_plfa-part2-Bisimulation-10794" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10739" class="Bound">~σ</a><a id="plfa_plfa-part2-Bisimulation-10796" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-10798" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10751" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-10800" class="Symbol">)</a>
</pre><p>与之前一样，这个证明的结构于替换的结构类似：使用递归重新构造每一个项， 并在需要时扩充上下文（在这里，我们只需要在 λ 抽象的抽象体中使用）。</p><p>从上面的替换的广义定义，我们可以简单地推导出我们所需的特殊形式： 如果 <code>N ~ N†</code> 和 <code>M ∼ M†</code>，那么 <code>N [ M ] ~ N† [ M† ]</code>：</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-~sub"></a><a id="plfa_plfa-part2-Bisimulation-11369" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11369" class="Function">~sub</a> <a id="plfa_plfa-part2-Bisimulation-11374" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-11376" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-11378" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11379" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11379" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-11381" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11381" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-11383" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11383" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-11384" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-11386" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11387" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11387" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-11389" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11389" class="Bound">N†</a> <a id="plfa_plfa-part2-Bisimulation-11392" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-11394" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11379" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-11396" href="../More/#plfa_plfa-part2-More-21491" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Bisimulation-11398" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11383" class="Bound">B</a> <a id="plfa_plfa-part2-Bisimulation-11400" href="../More/#plfa_plfa-part2-More-22743" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-11402" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11381" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-11403" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-11405" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11406" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11406" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-11408" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11408" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-11411" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-11413" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11379" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-11415" href="../More/#plfa_plfa-part2-More-22743" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-11417" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11383" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-11418" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-11422" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11424" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11387" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-11426" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-11428" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11389" class="Bound">N†</a>
  <a id="plfa_plfa-part2-Bisimulation-11433" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11435" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11406" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-11437" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-11439" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11408" class="Bound">M†</a>
    <a id="plfa_plfa-part2-Bisimulation-11446" class="Comment">-----------------------</a>
  <a id="plfa_plfa-part2-Bisimulation-11472" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11474" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11475" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11387" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-11477" href="../More/#plfa_plfa-part2-More-26581" class="Function Operator">[</a> <a id="plfa_plfa-part2-Bisimulation-11479" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11406" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-11481" href="../More/#plfa_plfa-part2-More-26581" class="Function Operator">]</a><a id="plfa_plfa-part2-Bisimulation-11482" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-11484" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-11486" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11487" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11389" class="Bound">N†</a> <a id="plfa_plfa-part2-Bisimulation-11490" href="../More/#plfa_plfa-part2-More-26581" class="Function Operator">[</a> <a id="plfa_plfa-part2-Bisimulation-11492" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11408" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-11495" href="../More/#plfa_plfa-part2-More-26581" class="Function Operator">]</a><a id="plfa_plfa-part2-Bisimulation-11496" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-11498" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11369" class="Function">~sub</a> <a id="plfa_plfa-part2-Bisimulation-11503" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11504" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11504" class="Bound">Γ</a><a id="plfa_plfa-part2-Bisimulation-11505" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-11507" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11508" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11508" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-11509" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-11511" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11512" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11512" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-11513" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-11515" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11515" class="Bound">~N</a> <a id="plfa_plfa-part2-Bisimulation-11518" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11518" class="Bound">~M</a> <a id="plfa_plfa-part2-Bisimulation-11521" class="Symbol">=</a> <a id="plfa_plfa-part2-Bisimulation-11523" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10341" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-11530" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11531" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11504" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-11533" href="../More/#plfa_plfa-part2-More-21491" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Bisimulation-11535" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11512" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-11536" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-11538" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11539" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11504" class="Bound">Γ</a><a id="plfa_plfa-part2-Bisimulation-11540" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-11542" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11562" class="Function">~σ</a> <a id="plfa_plfa-part2-Bisimulation-11545" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11546" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11508" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-11547" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-11549" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11515" class="Bound">~N</a>
  <a id="plfa_plfa-part2-Bisimulation-11554" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Bisimulation-11562" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11562" class="Function">~σ</a> <a id="plfa_plfa-part2-Bisimulation-11565" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-11567" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-11569" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11570" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11570" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-11571" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-11573" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11575" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11576" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11576" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-11578" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-11580" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11504" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-11582" href="../More/#plfa_plfa-part2-More-21491" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Bisimulation-11584" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11512" class="Bound">B</a> <a id="plfa_plfa-part2-Bisimulation-11586" href="../More/#plfa_plfa-part2-More-21601" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-11588" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11570" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-11589" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-11591" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11593" class="Symbol">_</a> <a id="plfa_plfa-part2-Bisimulation-11595" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-11597" class="Symbol">_</a>
  <a id="plfa_plfa-part2-Bisimulation-11601" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11562" class="Function">~σ</a> <a id="plfa_plfa-part2-Bisimulation-11604" href="../More/#plfa_plfa-part2-More-21637" class="InductiveConstructor">Z</a>      <a id="plfa_plfa-part2-Bisimulation-11611" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-11614" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11518" class="Bound">~M</a>
  <a id="plfa_plfa-part2-Bisimulation-11619" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11562" class="Function">~σ</a> <a id="plfa_plfa-part2-Bisimulation-11622" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11623" href="../More/#plfa_plfa-part2-More-21684" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Bisimulation-11625" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11625" class="Bound">x</a><a id="plfa_plfa-part2-Bisimulation-11626" class="Symbol">)</a>  <a id="plfa_plfa-part2-Bisimulation-11629" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-11632" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5120" class="InductiveConstructor">~`</a>
</pre><p>再一次，这个证明与原定义的结构类似。</p><h2 id="给出的关系是模拟">给出的关系是模拟</h2><p>最后，我们可以证明给出的关系的确是一个模拟。 实际上，我们将展示它满足更强的锁步模拟的条件。 我们期望展示的有：</p><p><strong>锁步模拟</strong>：对于任意的 <code>M</code>、<code>M†</code> 和 <code>N</code>， 如果 <code>M ~ M†</code> 和 <code>M —→ N</code> 成立，那么 <code>M† —→ N†</code> 和 <code>N ~ N†</code> 对于一些 <code>N†</code> 成立。</p><p>或者，用图表来表示：</p><pre><code>M  --- —→ --- N
|             |
|             |
~             ~
|             |
|             |
M† --- —→ --- N†</code></pre><p>我们首先形式化对应图表下方的一段的一个概念，即右面和下面的边：</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-12594" class="Keyword">data</a> <a id="plfa_plfa-part2-Bisimulation-Leg"></a><a id="plfa_plfa-part2-Bisimulation-12599" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12599" class="Datatype">Leg</a> <a id="plfa_plfa-part2-Bisimulation-12603" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12604" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12604" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-12606" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12606" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-12607" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-12609" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-12610" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12610" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-12613" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12613" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-12615" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-12617" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12604" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-12619" href="../More/#plfa_plfa-part2-More-22743" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-12621" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12606" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-12622" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-12624" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-12626" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#326" class="Primitive">Set</a> <a id="plfa_plfa-part2-Bisimulation-12630" class="Keyword">where</a>

  <a id="plfa_plfa-part2-Bisimulation-Leg.leg"></a><a id="plfa_plfa-part2-Bisimulation-12639" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12639" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-12643" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-12645" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-12647" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12648" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12648" class="Bound">N†</a> <a id="plfa_plfa-part2-Bisimulation-12651" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-12653" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12604" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-12655" href="../More/#plfa_plfa-part2-More-22743" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-12657" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12606" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-12658" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Bisimulation-12664" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-12666" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12613" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-12668" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-12670" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12648" class="Bound">N†</a>
    <a id="plfa_plfa-part2-Bisimulation-12677" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-12679" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12610" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-12682" href="../More/#plfa_plfa-part2-More-30249" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Bisimulation-12685" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12648" class="Bound">N†</a>
      <a id="plfa_plfa-part2-Bisimulation-12694" class="Comment">--------</a>
    <a id="plfa_plfa-part2-Bisimulation-12707" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-12709" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12599" class="Datatype">Leg</a> <a id="plfa_plfa-part2-Bisimulation-12713" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12610" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-12716" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12613" class="Bound">N</a>
</pre><p>在我们的形式化中，在这里，我们可以使用比 <code>—↠</code> 更强的关系，用 <code>—→</code> 来取而代之。</p><p>我们现在可以陈述并证明这个关系是一个模拟。 同样，在这里，我们可以使用比 <code>—↠</code> 更强的关系，用 <code>—→</code> 来取而代之。</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-sim"></a><a id="plfa_plfa-part2-Bisimulation-13109" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13109" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13113" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-13115" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-13117" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-13118" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13118" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-13120" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13120" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-13121" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-13123" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-13124" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13124" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-13126" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13126" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-13129" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13129" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-13131" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-13133" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13118" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-13135" href="../More/#plfa_plfa-part2-More-22743" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-13137" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13120" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-13138" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-13142" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-13144" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13124" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-13146" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5071" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-13148" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13126" class="Bound">M†</a>
  <a id="plfa_plfa-part2-Bisimulation-13153" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-13155" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13124" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-13157" href="../More/#plfa_plfa-part2-More-30249" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Bisimulation-13160" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13129" class="Bound">N</a>
    <a id="plfa_plfa-part2-Bisimulation-13166" class="Comment">---------</a>
  <a id="plfa_plfa-part2-Bisimulation-13178" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-13180" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12599" class="Datatype">Leg</a>  <a id="plfa_plfa-part2-Bisimulation-13185" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13126" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-13188" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13129" class="Bound">N</a>
<a id="plfa_plfa-part2-Bisimulation-13190" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13109" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13194" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5120" class="InductiveConstructor">~`</a>              <a id="plfa_plfa-part2-Bisimulation-13210" class="Symbol">()</a>
<a id="plfa_plfa-part2-Bisimulation-13213" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13109" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13217" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13218" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5178" class="InductiveConstructor Operator">~ƛ</a> <a id="plfa_plfa-part2-Bisimulation-13221" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13221" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-13223" class="Symbol">)</a>         <a id="plfa_plfa-part2-Bisimulation-13233" class="Symbol">()</a>
<a id="plfa_plfa-part2-Bisimulation-13236" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13109" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13240" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13241" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13241" class="Bound">~L</a> <a id="plfa_plfa-part2-Bisimulation-13244" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5263" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-13247" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13247" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-13249" class="Symbol">)</a>      <a id="plfa_plfa-part2-Bisimulation-13256" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13257" href="../More/#plfa_plfa-part2-More-30308" class="InductiveConstructor">ξ-·₁</a> <a id="plfa_plfa-part2-Bisimulation-13262" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13262" class="Bound">L—→</a><a id="plfa_plfa-part2-Bisimulation-13265" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Bisimulation-13269" class="Keyword">with</a> <a id="plfa_plfa-part2-Bisimulation-13274" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13109" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13278" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13241" class="Bound">~L</a> <a id="plfa_plfa-part2-Bisimulation-13281" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13262" class="Bound">L—→</a>
<a id="plfa_plfa-part2-Bisimulation-13285" class="Symbol">...</a>  <a id="plfa_plfa-part2-Bisimulation-13290" class="Symbol">|</a> <a id="plfa_plfa-part2-Bisimulation-13292" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12639" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-13296" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13296" class="Bound">~L′</a> <a id="plfa_plfa-part2-Bisimulation-13300" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13300" class="Bound">L†—→</a>                 <a id="plfa_plfa-part2-Bisimulation-13321" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-13324" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12639" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-13328" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13329" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13296" class="Bound">~L′</a> <a id="plfa_plfa-part2-Bisimulation-13333" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5263" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-13336" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-13338" class="Symbol">)</a>   <a id="plfa_plfa-part2-Bisimulation-13342" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13343" href="../More/#plfa_plfa-part2-More-30308" class="InductiveConstructor">ξ-·₁</a> <a id="plfa_plfa-part2-Bisimulation-13348" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13300" class="Bound">L†—→</a><a id="plfa_plfa-part2-Bisimulation-13352" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-13354" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13109" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13358" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13359" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13359" class="Bound">~V</a> <a id="plfa_plfa-part2-Bisimulation-13362" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5263" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-13365" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13365" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-13367" class="Symbol">)</a>      <a id="plfa_plfa-part2-Bisimulation-13374" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13375" href="../More/#plfa_plfa-part2-More-30417" class="InductiveConstructor">ξ-·₂</a> <a id="plfa_plfa-part2-Bisimulation-13380" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13380" class="Bound">VV</a> <a id="plfa_plfa-part2-Bisimulation-13383" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13383" class="Bound">M—→</a><a id="plfa_plfa-part2-Bisimulation-13386" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Bisimulation-13390" class="Keyword">with</a> <a id="plfa_plfa-part2-Bisimulation-13395" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13109" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13399" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13365" class="Bound">~M</a> <a id="plfa_plfa-part2-Bisimulation-13402" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13383" class="Bound">M—→</a>
<a id="plfa_plfa-part2-Bisimulation-13406" class="Symbol">...</a>  <a id="plfa_plfa-part2-Bisimulation-13411" class="Symbol">|</a> <a id="plfa_plfa-part2-Bisimulation-13413" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12639" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-13417" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13417" class="Bound">~M′</a> <a id="plfa_plfa-part2-Bisimulation-13421" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13421" class="Bound">M†—→</a>                 <a id="plfa_plfa-part2-Bisimulation-13442" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-13445" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12639" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-13449" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13450" class="Bound">~V</a> <a id="plfa_plfa-part2-Bisimulation-13453" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5263" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-13456" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13417" class="Bound">~M′</a><a id="plfa_plfa-part2-Bisimulation-13459" class="Symbol">)</a>   <a id="plfa_plfa-part2-Bisimulation-13463" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13464" href="../More/#plfa_plfa-part2-More-30417" class="InductiveConstructor">ξ-·₂</a> <a id="plfa_plfa-part2-Bisimulation-13469" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13470" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6948" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-13475" class="Bound">~V</a> <a id="plfa_plfa-part2-Bisimulation-13478" class="Bound">VV</a><a id="plfa_plfa-part2-Bisimulation-13480" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-13482" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13421" class="Bound">M†—→</a><a id="plfa_plfa-part2-Bisimulation-13486" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-13488" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13109" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13492" class="Symbol">((</a><a id="plfa_plfa-part2-Bisimulation-13494" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5178" class="InductiveConstructor Operator">~ƛ</a> <a id="plfa_plfa-part2-Bisimulation-13497" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13497" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-13499" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-13501" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5263" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-13504" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13504" class="Bound">~V</a><a id="plfa_plfa-part2-Bisimulation-13506" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-13508" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13509" href="../More/#plfa_plfa-part2-More-30540" class="InductiveConstructor">β-ƛ</a> <a id="plfa_plfa-part2-Bisimulation-13513" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13513" class="Bound">VV</a><a id="plfa_plfa-part2-Bisimulation-13515" class="Symbol">)</a>        <a id="plfa_plfa-part2-Bisimulation-13524" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-13527" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12639" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-13531" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13532" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11369" class="Function">~sub</a> <a id="plfa_plfa-part2-Bisimulation-13537" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13497" class="Bound">~N</a> <a id="plfa_plfa-part2-Bisimulation-13540" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13504" class="Bound">~V</a><a id="plfa_plfa-part2-Bisimulation-13542" class="Symbol">)</a>  <a id="plfa_plfa-part2-Bisimulation-13545" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13546" href="../More/#plfa_plfa-part2-More-30540" class="InductiveConstructor">β-ƛ</a> <a id="plfa_plfa-part2-Bisimulation-13550" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13551" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6948" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-13556" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13504" class="Bound">~V</a> <a id="plfa_plfa-part2-Bisimulation-13559" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13513" class="Bound">VV</a><a id="plfa_plfa-part2-Bisimulation-13561" class="Symbol">))</a>
<a id="plfa_plfa-part2-Bisimulation-13564" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13109" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13568" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13569" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5387" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-13574" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13574" class="Bound">~M</a> <a id="plfa_plfa-part2-Bisimulation-13577" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13577" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-13579" class="Symbol">)</a>    <a id="plfa_plfa-part2-Bisimulation-13584" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13585" href="../More/#plfa_plfa-part2-More-31567" class="InductiveConstructor">ξ-let</a> <a id="plfa_plfa-part2-Bisimulation-13591" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13591" class="Bound">M—→</a><a id="plfa_plfa-part2-Bisimulation-13594" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Bisimulation-13598" class="Keyword">with</a> <a id="plfa_plfa-part2-Bisimulation-13603" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13109" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13607" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13574" class="Bound">~M</a> <a id="plfa_plfa-part2-Bisimulation-13610" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13591" class="Bound">M—→</a>
<a id="plfa_plfa-part2-Bisimulation-13614" class="Symbol">...</a>  <a id="plfa_plfa-part2-Bisimulation-13619" class="Symbol">|</a> <a id="plfa_plfa-part2-Bisimulation-13621" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12639" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-13625" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13625" class="Bound">~M′</a> <a id="plfa_plfa-part2-Bisimulation-13629" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13629" class="Bound">M†—→</a>                 <a id="plfa_plfa-part2-Bisimulation-13650" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-13653" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12639" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-13657" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13658" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5387" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-13663" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13625" class="Bound">~M′</a> <a id="plfa_plfa-part2-Bisimulation-13667" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-13669" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-13671" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13672" href="../More/#plfa_plfa-part2-More-30417" class="InductiveConstructor">ξ-·₂</a> <a id="plfa_plfa-part2-Bisimulation-13677" href="../More/#plfa_plfa-part2-More-27464" class="InductiveConstructor">V-ƛ</a> <a id="plfa_plfa-part2-Bisimulation-13681" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13629" class="Bound">M†—→</a><a id="plfa_plfa-part2-Bisimulation-13685" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-13687" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13109" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13691" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13692" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5387" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-13697" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13697" class="Bound">~V</a> <a id="plfa_plfa-part2-Bisimulation-13700" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13700" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-13702" class="Symbol">)</a>    <a id="plfa_plfa-part2-Bisimulation-13707" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13708" href="../More/#plfa_plfa-part2-More-31689" class="InductiveConstructor">β-let</a> <a id="plfa_plfa-part2-Bisimulation-13714" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13714" class="Bound">VV</a><a id="plfa_plfa-part2-Bisimulation-13716" class="Symbol">)</a>      <a id="plfa_plfa-part2-Bisimulation-13723" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-13726" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12639" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-13730" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13731" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11369" class="Function">~sub</a> <a id="plfa_plfa-part2-Bisimulation-13736" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13700" class="Bound">~N</a> <a id="plfa_plfa-part2-Bisimulation-13739" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13697" class="Bound">~V</a><a id="plfa_plfa-part2-Bisimulation-13741" class="Symbol">)</a>  <a id="plfa_plfa-part2-Bisimulation-13744" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13745" href="../More/#plfa_plfa-part2-More-30540" class="InductiveConstructor">β-ƛ</a> <a id="plfa_plfa-part2-Bisimulation-13749" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13750" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6948" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-13755" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13697" class="Bound">~V</a> <a id="plfa_plfa-part2-Bisimulation-13758" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13714" class="Bound">VV</a><a id="plfa_plfa-part2-Bisimulation-13760" class="Symbol">))</a>
</pre><p>这个证明由分情况讨论来完成，检查每一个 <code>M ~ M†</code> 的例子，和每一个 <code>M —→ M†</code> 的例子， 并在规约是 <code>ξ</code> 规则时使用递归，也因此包括了另一个规约。 证明的结构和进行性的证明也有些类似：</p><ul><li>如果相关的项是变量，那么无可应用的规约。</li><li>如果相关的项是 λ 抽象，那么无可应用的规约。</li><li>如果相关的项是应用，那么有三种子情况：<ul><li><p>源项由 <code>ξ-·₁</code> 规约，在此情况下目标项也一样。递归应用可以让我们得到：</p><pre><code>L  --- —→ ---  L′
|              |
|              |
~              ~
|              |
|              |
L† --- —→ --- L′†</code></pre><p>从而得到：</p><pre><code> L · M  --- —→ ---  L′ · M
   |                   |
   |                   |
   ~                   ~
   |                   |
   |                   |
L† · M† --- —→ --- L′† · M†</code></pre></li></ul><ul><li><p>源项由 <code>ξ-·₂</code> 规约，在此情况下目标项也一样。递归应用可以让我们得到：</p><pre><code>M  --- —→ ---  M′
|              |
|              |
~              ~
|              |
|              |
M† --- —→ --- M′†</code></pre><p>从而得到：</p><pre><code> V · M  --- —→ ---  V · M′
   |                  |
   |                  |
   ~                  ~
   |                  |
   |                  |
V† · M† --- —→ --- V† · M′†</code></pre><p>因为模拟和值可交换，且 <code>V</code> 是一个值，所以 <code>V†</code> 也是一个值。</p></li></ul><ul><li><p>源项由 <code>β-ƛ</code> 规约，在此情况下目标项也一样：</p><pre><code> (ƛ x ⇒ N) · V  --- —→ ---  N [ x := V ]
      |                           |
      |                           |
      ~                           ~
      |                           |
      |                           |
(ƛ x ⇒ N†) · V† --- —→ --- N† [ x :=  V† ]</code></pre><p>因为模拟和值可交换，且 <code>V</code> 是一个值，所以 <code>V†</code> 也是一个值。 因为模拟和替换可交换，且 <code>N ~ N†</code> 和 <code>V ~ V†</code> 成立，所以我们得到 <code>N [ x := V ] ~ N† [ x := V† ]</code>。</p></li></ul></li></ul><ul><li><p>如果相关的项是 <code>let</code> 和抽象应用，那么有两种子情况：</p><ul><li><p>源项由 <code>ξ-let</code> 规约，在此情况下目标项由 <code>ξ-·₂</code> 规约。递归应用可以让我们得到：</p><pre><code>M  --- —→ ---  M′
|              |
|              |
~              ~
|              |
|              |
M† --- —→ --- M′†</code></pre><p>从而得到：</p><pre><code>let x = M in N --- —→ --- let x = M′ in N
      |                         |
      |                         |
      ~                         ~
      |                         |
      |                         |
(ƛ x ⇒ N) · M  --- —→ --- (ƛ x ⇒ N) · M′</code></pre></li></ul><ul><li><p>源项由 <code>β-let</code> 规约，在此情况下目标项由 <code>β-ƛ</code> 规约：</p><pre><code>let x = V in N  --- —→ ---  N [ x := V ]
      |                         |
      |                         |
      ~                         ~
      |                         |
      |                         |
(ƛ x ⇒ N†) · V† --- —→ --- N† [ x := V† ]</code></pre><p>因为模拟和值可交换，且 <code>V</code> 是一个值，所以 <code>V†</code> 也是一个值。 因为模拟和替换可交换，且 <code>N ~ N†</code> 和 <code>V ~ V†</code> 成立，所以我们得到 <code>N [ x := V ] ~ N† [ x := V† ]</code>。</p></li></ul></li></ul><h4 id="练习-sim¹-实践">练习 <code>sim⁻¹</code> （实践）</h4><p>证明我们也有反方向的模拟，因此我们有一个双模拟。</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-18530" class="Comment">-- 在这里写出你的代码。</a>
</pre><h4 id="练习-products-实践">练习 <code>products</code> （实践）</h4><p>证明 <a href="../More/">More</a> 章节中两种积的表达方式满足双模拟。 你需要包含的构造有：变量，以及与函数和积相关的构造。 在此情况下，模拟并<strong>不是</strong>锁步的。</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-18964" class="Comment">-- 在这里写出你的代码。</a>
</pre><h2 id="unicode">Unicode</h2><p>本章节使用了下列 Unicode：</p><pre><code>†  U+2020  DAGGER (\dag)
⁻  U+207B  SUPERSCRIPT MINUS (\^-)
¹  U+00B9  SUPERSCRIPT ONE (\^1)</code></pre></div><nav class="pager"><ul class="pagination"><li><a class="pagelink" href="../More/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part2/Bisimulation.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Inference/">下一章</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">编程语言基础：Agda 描述</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div><h3 class="footer-heading">本章翻译进度：100% ，译者：Fangyi Zhou</h3>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>