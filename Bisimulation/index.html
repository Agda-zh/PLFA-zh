<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>编程语言基础：Agda 描述 – Bisimulation</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">编程语言基础：Agda 描述</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">主页</a> <a class="page-link" href="../Announcements/">公告</a> <a class="page-link" href="../GettingStarted/">使用说明</a> <a class="page-link" href="../Citing/">引用</a> <a class="page-link" href="https://plfa.github.io/">English</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../More/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part2/Bisimulation.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Inference/">下一章</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Bisimulation: 联系不同的归约系统</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-114" class="Keyword">module</a> <a id="plfa_plfa-part2-Bisimulation-121" href="../Bisimulation/#" class="Module">plfa.part2.Bisimulation</a> <a id="plfa_plfa-part2-Bisimulation-145" class="Keyword">where</a>
</pre><p>有一些构造可以用其他的构造来定义。 在上一章中，我们展示了 <em>let</em> 项可以被重写为抽象的应用，以及积的两种不同表示方法 —— 一种使用投影，一种使用匹配表达式。 本章中，我们来看看如何形式化这些断言。</p><p>给定两个不同的系统，它们有不同的项和不同的归约规则，我们定义诸如 『一个系统<strong>模拟（Simulate）</strong>了另一个系统』此类断言的意义。 假设两个系统分别叫做<strong>源</strong>（Source）和<strong>目标</strong>（Target），我们用 <code>M</code> 和 <code>N</code> 表示源系统的项，<code>M†</code> 和 <code>N†</code> 表示目标系统的项。 我们定义一个关系</p><pre><code>M ~ M†</code></pre><p>于两个系统对应的项之上。 如果每个源系统的每一个归约都有一个对应的归约序列，那我们就有了一个<strong>模拟</strong>。</p><p><strong>模拟</strong>：对于任意的 <code>M</code>、<code>M†</code> 和 <code>N</code>， 如果 <code>M ~ M†</code> 和 <code>M —→ N</code> 成立，那么 <code>M† —↠ N†</code> 和 <code>N ~ N†</code> 对于一些 <code>N†</code> 成立。</p><p>或者，用图表来表示：</p><pre><code>M  --- —→ --- N
|             |
|             |
~             ~
|             |
|             |
M† --- —↠ --- N†</code></pre><p>有时我们会使用一个更强的条件，使得每个源系统的归约对应目标系统的归约（而不是归约序列）：</p><pre><code>M  --- —→ --- N
|             |
|             |
~             ~
|             |
|             |
M† --- —→ --- N†</code></pre><p>这个更强的条件被称为<strong>锁步</strong>（Lock-step）或者<strong>准确无误</strong>（On the nose）的模拟。</p><p>『译注：<a href="https://dictionary.cambridge.org/dictionary/english-chinese-simplified/on-the-nose">On the nose</a> 本义为在鼻子之上，用于表述准确无误。』</p><p>如果从目标系统到源系统也有一个模拟：即每个目标系统的归约在源目标系统中有对应的归约序列， 我们对这样的情况尤其感兴趣。换句话说，<code>~</code> 是一个从源到目标的模拟，而 <code>~</code> 的逆是一个从目标的源的模拟。这样的情况被称为<strong>互模拟</strong>（Bisimulation）。 (In general, if &lt; and &gt; are arbitrary relations such that <code>x &lt; y</code> if and only if <code>y &gt; x</code> then we say that <code>&lt;</code> and <code>&gt;</code> are <em>converse</em> relations. Hence, if <code>~</code> is a relation from source to target, its converse is a relation from target to source.)</p><p>要建立模拟，我们需要分情况讨论所有的可能归约，以及所有它们可能联系的项。 对于每个源系统中归约的步骤，我们必须给出目标系统中对应的归约系列。</p><p>譬如说，源系统可以是带 <em>let</em> 项的 λ 演算，而目标系统中的 <code>let</code> 被翻译了。 定义这个关系的关键规则是：</p><pre><code>M ~ M†
N ~ N†
--------------------------------
let x = M in N ~ (ƛ x ⇒ N†) · M†</code></pre><p>其他的规则都是合同性的规则：变量于它们自身相关，抽象与应用在它们的组成部分分别相关时相关：</p><pre><code>-----
x ~ x

N ~ N†
------------------
ƛ x ⇒ N ~ ƛ x ⇒ N†

L ~ L†
M ~ M†
---------------
L · M ~ L† · M†</code></pre><p>讨论语言中的其他构造——自然数、不动点和积等——对我们本章的重点意义不大， 我们节约长度而不讨论。</p><p>在此情况下，关系的定义可以用一个从源至目标的函数来制定：</p><pre><code>(x) †               =  x
(ƛ x ⇒ N) †         =  ƛ x ⇒ (N †)
(L · M) †           =  (L †) · (M †)
(let x = M in N) †  =  (ƛ x ⇒ (N †)) · (M †)</code></pre><p>我们有：</p><pre><code>M † ≡ N
-------
M ~ N</code></pre><p>以及其逆命题。 但一般情况下，我们可能有一个关系而不一定有对应的函数。</p><p>本章形式化上文中定义的 <code>~</code> 关系是一个从源系统至目标系统的模拟。 我们将反向的证明留作习题。 另一个习题是证明 <a href="../More/">More</a> 章节中积的替代表示方法形成了一个互模拟。</p><h2 id="导入">导入</h2><p>我们从 <a href="../More/">More</a> 章节中导入源语言：</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-5480" class="Keyword">open</a> <a id="plfa_plfa-part2-Bisimulation-5485" class="Keyword">import</a> <a id="plfa_plfa-part2-Bisimulation-5492" href="../More/#" class="Module">plfa.part2.More</a>
</pre><h2 id="模拟">模拟</h2><p>我们直接地形式化导言中的模拟：</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-5664" class="Keyword">infix</a>  <a id="plfa_plfa-part2-Bisimulation-5671" class="Number">4</a> <a id="plfa_plfa-part2-Bisimulation-5673" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">_~_</a>
<a id="plfa_plfa-part2-Bisimulation-5677" class="Keyword">infix</a>  <a id="plfa_plfa-part2-Bisimulation-5684" class="Number">5</a> <a id="plfa_plfa-part2-Bisimulation-5686" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5817" class="InductiveConstructor Operator">~ƛ_</a>
<a id="plfa_plfa-part2-Bisimulation-5690" class="Keyword">infix</a>  <a id="plfa_plfa-part2-Bisimulation-5697" class="Number">7</a> <a id="plfa_plfa-part2-Bisimulation-5699" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5902" class="InductiveConstructor Operator">_~·_</a>

<a id="plfa_plfa-part2-Bisimulation-5705" class="Keyword">data</a> <a id="plfa_plfa-part2-Bisimulation-_~_"></a><a id="plfa_plfa-part2-Bisimulation-5710" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">_~_</a> <a id="plfa_plfa-part2-Bisimulation-5714" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5716" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-5718" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5719" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5719" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5721" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5721" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-5722" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-5724" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5726" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-5727" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5719" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5729" href="../More/#plfa_plfa-part2-More-22725" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-5731" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5721" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-5732" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-5734" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5736" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-5737" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5719" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5739" href="../More/#plfa_plfa-part2-More-22725" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-5741" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5721" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-5742" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-5744" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5746" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part2-Bisimulation-5750" class="Keyword">where</a>

  <a id="plfa_plfa-part2-Bisimulation-_~_.~`"></a><a id="plfa_plfa-part2-Bisimulation-5759" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5759" class="InductiveConstructor">~`</a> <a id="plfa_plfa-part2-Bisimulation-5762" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5764" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-5766" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5767" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5767" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5769" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5769" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-5770" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-5772" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5773" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5773" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-5775" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5777" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5767" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5779" href="../More/#plfa_plfa-part2-More-21583" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-5781" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5769" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-5782" class="Symbol">}</a>
     <a id="plfa_plfa-part2-Bisimulation-5789" class="Comment">---------</a>
   <a id="plfa_plfa-part2-Bisimulation-5802" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5804" href="../More/#plfa_plfa-part2-More-22770" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Bisimulation-5806" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5773" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-5808" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-5810" href="../More/#plfa_plfa-part2-More-22770" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Bisimulation-5812" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5773" class="Bound">x</a>

  <a id="plfa_plfa-part2-Bisimulation-_~_.~ƛ_"></a><a id="plfa_plfa-part2-Bisimulation-5817" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5817" class="InductiveConstructor Operator">~ƛ_</a> <a id="plfa_plfa-part2-Bisimulation-5821" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5823" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-5825" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5826" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5826" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5828" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5828" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-5830" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5830" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-5831" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-5833" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5834" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5834" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-5836" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5836" class="Bound">N†</a> <a id="plfa_plfa-part2-Bisimulation-5839" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5841" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5826" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5843" href="../More/#plfa_plfa-part2-More-21473" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Bisimulation-5845" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5828" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-5847" href="../More/#plfa_plfa-part2-More-22725" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-5849" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5830" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-5850" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Bisimulation-5856" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5858" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5834" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-5860" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-5862" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5836" class="Bound">N†</a>
      <a id="plfa_plfa-part2-Bisimulation-5871" class="Comment">----------</a>
    <a id="plfa_plfa-part2-Bisimulation-5886" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5888" href="../More/#plfa_plfa-part2-More-22831" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Bisimulation-5890" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5834" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-5892" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-5894" href="../More/#plfa_plfa-part2-More-22831" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Bisimulation-5896" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5836" class="Bound">N†</a>

  <a id="plfa_plfa-part2-Bisimulation-_~_._~·_"></a><a id="plfa_plfa-part2-Bisimulation-5902" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5902" class="InductiveConstructor Operator">_~·_</a> <a id="plfa_plfa-part2-Bisimulation-5907" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5909" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-5911" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5912" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5912" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5914" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5914" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-5916" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5916" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-5917" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-5919" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5920" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5920" class="Bound">L</a> <a id="plfa_plfa-part2-Bisimulation-5922" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5922" class="Bound">L†</a> <a id="plfa_plfa-part2-Bisimulation-5925" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5927" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5912" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5929" href="../More/#plfa_plfa-part2-More-22725" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-5931" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5914" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-5933" href="../More/#plfa_plfa-part2-More-21315" class="InductiveConstructor Operator">⇒</a> <a id="plfa_plfa-part2-Bisimulation-5935" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5916" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-5936" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-5938" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-5939" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5939" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-5941" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5941" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-5944" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-5946" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5912" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-5948" href="../More/#plfa_plfa-part2-More-22725" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-5950" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5914" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-5951" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Bisimulation-5957" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5959" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5920" class="Bound">L</a> <a id="plfa_plfa-part2-Bisimulation-5961" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-5963" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5922" class="Bound">L†</a>
    <a id="plfa_plfa-part2-Bisimulation-5970" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-5972" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5939" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-5974" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-5976" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5941" class="Bound">M†</a>
      <a id="plfa_plfa-part2-Bisimulation-5985" class="Comment">---------------</a>
    <a id="plfa_plfa-part2-Bisimulation-6005" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-6007" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5920" class="Bound">L</a> <a id="plfa_plfa-part2-Bisimulation-6009" href="../More/#plfa_plfa-part2-More-22899" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Bisimulation-6011" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5939" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-6013" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-6015" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5922" class="Bound">L†</a> <a id="plfa_plfa-part2-Bisimulation-6018" href="../More/#plfa_plfa-part2-More-22899" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Bisimulation-6020" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5941" class="Bound">M†</a>

  <a id="plfa_plfa-part2-Bisimulation-_~_.~let"></a><a id="plfa_plfa-part2-Bisimulation-6026" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6026" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-6031" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-6033" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-6035" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-6036" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6036" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-6038" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6038" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-6040" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6040" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-6041" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-6043" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-6044" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6044" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-6046" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6046" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-6049" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-6051" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6036" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-6053" href="../More/#plfa_plfa-part2-More-22725" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-6055" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6038" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-6056" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-6058" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-6059" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6059" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-6061" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6061" class="Bound">N†</a> <a id="plfa_plfa-part2-Bisimulation-6064" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-6066" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6036" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-6068" href="../More/#plfa_plfa-part2-More-21473" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Bisimulation-6070" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6038" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-6072" href="../More/#plfa_plfa-part2-More-22725" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-6074" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6040" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-6075" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Bisimulation-6081" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-6083" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6044" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-6085" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-6087" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6046" class="Bound">M†</a>
    <a id="plfa_plfa-part2-Bisimulation-6094" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-6096" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6059" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-6098" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-6100" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6061" class="Bound">N†</a>
      <a id="plfa_plfa-part2-Bisimulation-6109" class="Comment">----------------------</a>
    <a id="plfa_plfa-part2-Bisimulation-6136" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-6138" href="../More/#plfa_plfa-part2-More-23382" class="InductiveConstructor">`let</a> <a id="plfa_plfa-part2-Bisimulation-6143" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6044" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-6145" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6059" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-6147" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-6149" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-6150" href="../More/#plfa_plfa-part2-More-22831" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Bisimulation-6152" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6061" class="Bound">N†</a><a id="plfa_plfa-part2-Bisimulation-6154" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-6156" href="../More/#plfa_plfa-part2-More-22899" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Bisimulation-6158" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6046" class="Bound">M†</a>
</pre><p><a href="../More/">More</a> 章节中的语言有更多的构造，我们可以简单地扩充上述定义。 但是，使上述的定义小而精简让我们注重本章的重点。 虽然我们有一个较大的源语言，但我们只在模拟中考虑我们感兴趣的项，这是一个方便的小窍门。</p><h4 id="练习-_-实践">练习 <code>_†</code> （实践）</h4><p>形式化导言中给定的源语言至目标语言的翻译。 证明 <code>M † ≡ N</code> 蕴含了 <code>M ~ N</code>，以及其逆命题。</p><p><strong>提示：</strong>为了简洁，我们只注重语言中的一小部分构造，所以 <code>_†</code> 的定义只需要注重相关的部分。 达成此目的的一种方法是用<a href="../Decidable/#proof-by-reflection">互映证明</a>定义一个谓词来选出 <code>_†</code> 定义域中的项。</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-7261" class="Comment">-- 在这里写出你的代码。</a>
</pre><h2 id="模拟与值可交换">模拟与值可交换</h2><p>我们需要一系列技术结果。首先是模拟与值可交换（Commute）。 即：若 <code>M ~ M†</code> 且 <code>M</code> 是一个值，那么 <code>M†</code> 也是一个值。</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-~val"></a><a id="plfa_plfa-part2-Bisimulation-7587" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7587" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-7592" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-7594" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-7596" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-7597" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7597" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-7599" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7599" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-7600" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-7602" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-7603" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7603" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-7605" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7605" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-7608" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-7610" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7597" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-7612" href="../More/#plfa_plfa-part2-More-22725" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-7614" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7599" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-7615" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-7619" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-7621" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7603" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-7623" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-7625" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7605" class="Bound">M†</a>
  <a id="plfa_plfa-part2-Bisimulation-7630" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-7632" href="../More/#plfa_plfa-part2-More-27366" class="Datatype">Value</a> <a id="plfa_plfa-part2-Bisimulation-7638" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7603" class="Bound">M</a>
    <a id="plfa_plfa-part2-Bisimulation-7644" class="Comment">--------</a>
  <a id="plfa_plfa-part2-Bisimulation-7655" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-7657" href="../More/#plfa_plfa-part2-More-27366" class="Datatype">Value</a> <a id="plfa_plfa-part2-Bisimulation-7663" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7605" class="Bound">M†</a>
<a id="plfa_plfa-part2-Bisimulation-7666" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7587" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-7671" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5759" class="InductiveConstructor">~`</a>           <a id="plfa_plfa-part2-Bisimulation-7684" class="Symbol">()</a>
<a id="plfa_plfa-part2-Bisimulation-7687" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7587" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-7692" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-7693" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5817" class="InductiveConstructor Operator">~ƛ</a> <a id="plfa_plfa-part2-Bisimulation-7696" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7696" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-7698" class="Symbol">)</a>      <a id="plfa_plfa-part2-Bisimulation-7705" href="../More/#plfa_plfa-part2-More-27414" class="InductiveConstructor">V-ƛ</a>  <a id="plfa_plfa-part2-Bisimulation-7710" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-7713" href="../More/#plfa_plfa-part2-More-27414" class="InductiveConstructor">V-ƛ</a>
<a id="plfa_plfa-part2-Bisimulation-7717" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7587" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-7722" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-7723" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7723" class="Bound">~L</a> <a id="plfa_plfa-part2-Bisimulation-7726" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5902" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-7729" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7729" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-7731" class="Symbol">)</a>   <a id="plfa_plfa-part2-Bisimulation-7735" class="Symbol">()</a>
<a id="plfa_plfa-part2-Bisimulation-7738" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7587" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-7743" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-7744" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6026" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-7749" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7749" class="Bound">~M</a> <a id="plfa_plfa-part2-Bisimulation-7752" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7752" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-7754" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-7756" class="Symbol">()</a>
</pre><p>这是一个直接的分情况讨论，唯一有意思的情况是 λ 抽象。</p><h4 id="exercise-val¹-实践">Exercise <code>~val⁻¹</code> （实践）</h4><p>证明此命题在反方向亦成立： 若 <code>M ~ M†</code> 且 <code>Value M†</code>，那么 <code>Value M</code> 成立。</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-8147" class="Comment">-- 在这里写出你的代码。</a>
</pre><h2 id="模拟与重命名可交换">模拟与重命名可交换</h2><p>下一个技术结果是模拟和重命名可交换。 即：若 <code>ρ</code> 将任意的判断 <code>Γ ∋ A</code> 映射至另一个判断 <code>Δ ∋ A</code>，且 <code>M ~ M†</code>，那么 <code>rename ρ M ~ rename ρ M†</code>：</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-~rename"></a><a id="plfa_plfa-part2-Bisimulation-8530" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8530" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8538" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-8540" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-8542" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-8543" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8543" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-8545" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8545" class="Bound">Δ</a><a id="plfa_plfa-part2-Bisimulation-8546" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-8550" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-8552" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8553" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8553" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8555" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-8557" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-8559" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-8560" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8560" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-8561" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-8563" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-8565" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8543" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-8567" href="../More/#plfa_plfa-part2-More-21583" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-8569" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8560" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-8571" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-8573" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8545" class="Bound">Δ</a> <a id="plfa_plfa-part2-Bisimulation-8575" href="../More/#plfa_plfa-part2-More-21583" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-8577" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8560" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-8578" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Bisimulation-8584" class="Comment">----------------------------------------------------------</a>
  <a id="plfa_plfa-part2-Bisimulation-8645" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-8647" class="Symbol">(∀</a> <a id="plfa_plfa-part2-Bisimulation-8650" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-8651" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8651" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-8652" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-8654" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-8655" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8655" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-8657" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8657" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-8660" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-8662" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8543" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-8664" href="../More/#plfa_plfa-part2-More-22725" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-8666" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8651" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-8667" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-8669" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-8671" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8655" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-8673" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-8675" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8657" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-8678" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-8680" href="../More/#plfa_plfa-part2-More-24638" class="Function">rename</a> <a id="plfa_plfa-part2-Bisimulation-8687" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8553" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8689" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8655" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-8691" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-8693" href="../More/#plfa_plfa-part2-More-24638" class="Function">rename</a> <a id="plfa_plfa-part2-Bisimulation-8700" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8553" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8702" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8657" class="Bound">M†</a><a id="plfa_plfa-part2-Bisimulation-8704" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-8706" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8530" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8714" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8714" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8716" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8717" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5759" class="InductiveConstructor">~`</a><a id="plfa_plfa-part2-Bisimulation-8719" class="Symbol">)</a>          <a id="plfa_plfa-part2-Bisimulation-8730" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-8733" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5759" class="InductiveConstructor">~`</a>
<a id="plfa_plfa-part2-Bisimulation-8736" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8530" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8744" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8744" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8746" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8747" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5817" class="InductiveConstructor Operator">~ƛ</a> <a id="plfa_plfa-part2-Bisimulation-8750" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8750" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-8752" class="Symbol">)</a>       <a id="plfa_plfa-part2-Bisimulation-8760" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-8763" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5817" class="InductiveConstructor Operator">~ƛ</a> <a id="plfa_plfa-part2-Bisimulation-8766" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8767" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8530" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8775" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8776" href="../More/#plfa_plfa-part2-More-24467" class="Function">ext</a> <a id="plfa_plfa-part2-Bisimulation-8780" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8744" class="Bound">ρ</a><a id="plfa_plfa-part2-Bisimulation-8781" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-8783" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8750" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-8785" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-8787" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8530" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8795" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8795" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8797" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8798" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8798" class="Bound">~L</a> <a id="plfa_plfa-part2-Bisimulation-8801" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5902" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-8804" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8804" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-8806" class="Symbol">)</a>    <a id="plfa_plfa-part2-Bisimulation-8811" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-8814" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8815" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8530" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8823" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8795" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8825" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8798" class="Bound">~L</a><a id="plfa_plfa-part2-Bisimulation-8827" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-8829" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5902" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-8832" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8833" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8530" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8841" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8795" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8843" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8804" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-8845" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-8847" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8530" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8855" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8855" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8857" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8858" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6026" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-8863" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8863" class="Bound">~M</a> <a id="plfa_plfa-part2-Bisimulation-8866" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8866" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-8868" class="Symbol">)</a>  <a id="plfa_plfa-part2-Bisimulation-8871" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-8874" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6026" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-8879" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8880" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8530" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8888" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8855" class="Bound">ρ</a> <a id="plfa_plfa-part2-Bisimulation-8890" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8863" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-8892" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-8894" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8895" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8530" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-8903" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-8904" href="../More/#plfa_plfa-part2-More-24467" class="Function">ext</a> <a id="plfa_plfa-part2-Bisimulation-8908" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8855" class="Bound">ρ</a><a id="plfa_plfa-part2-Bisimulation-8909" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-8911" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8866" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-8913" class="Symbol">)</a>
</pre><p>此证明的结构与重命名的结构相似： 使用递归来重新构造每一个项，并在需要时扩充语境（在这里，我们只需要在 λ 抽象的抽象体中使用）。</p><h2 id="模拟与替换可交换">模拟与替换可交换</h2><p>第三个技术结果是模拟与替换可交换。 这个结果比重命名更复杂，因为我们之前只有一个重命名映射 <code>ρ</code>， 而现在我们需要两个替换映射 <code>σ</code> 和 <code>σ†</code>。</p><p>这个证明首先需要我们构造一个类似于扩充的概念。 如果 <code>σ</code> 和 <code>σ†</code> 都将任何判断 <code>Γ ∋ A</code> 映射至一个判断 <code>Δ ⊢ A</code>， 且对于 <code>Γ ∋ A</code> 中的任意 <code>x</code>，我们有 <code>σ x ~ σ† x</code>， 那么对于任何 <code>Γ , B ∋ A</code> 中的 <code>x</code>，我们有 <code>exts σ x ~ exts σ† x</code>：</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-~exts"></a><a id="plfa_plfa-part2-Bisimulation-10006" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10006" class="Function">~exts</a> <a id="plfa_plfa-part2-Bisimulation-10012" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-10014" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-10016" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10017" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10017" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-10019" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10019" class="Bound">Δ</a><a id="plfa_plfa-part2-Bisimulation-10020" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-10024" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10026" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10027" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10027" class="Bound">σ</a>  <a id="plfa_plfa-part2-Bisimulation-10030" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-10032" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-10034" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10035" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10035" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10036" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-10038" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10040" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10017" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-10042" href="../More/#plfa_plfa-part2-More-21583" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-10044" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10035" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-10046" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10048" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10019" class="Bound">Δ</a> <a id="plfa_plfa-part2-Bisimulation-10050" href="../More/#plfa_plfa-part2-More-22725" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-10052" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10035" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10053" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-10057" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10059" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10060" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10060" class="Bound">σ†</a> <a id="plfa_plfa-part2-Bisimulation-10063" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-10065" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-10067" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10068" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10068" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10069" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-10071" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10073" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10017" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-10075" href="../More/#plfa_plfa-part2-More-21583" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-10077" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10068" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-10079" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10081" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10019" class="Bound">Δ</a> <a id="plfa_plfa-part2-Bisimulation-10083" href="../More/#plfa_plfa-part2-More-22725" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-10085" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10068" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10086" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-10090" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10092" class="Symbol">(∀</a> <a id="plfa_plfa-part2-Bisimulation-10095" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10096" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10096" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10097" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-10099" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10101" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-10102" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10102" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-10104" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-10106" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10017" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-10108" href="../More/#plfa_plfa-part2-More-21583" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-10110" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10096" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10111" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-10113" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10115" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10027" class="Bound">σ</a> <a id="plfa_plfa-part2-Bisimulation-10117" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10102" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-10119" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-10121" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10060" class="Bound">σ†</a> <a id="plfa_plfa-part2-Bisimulation-10124" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10102" class="Bound">x</a><a id="plfa_plfa-part2-Bisimulation-10125" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Bisimulation-10131" class="Comment">--------------------------------------------------</a>
  <a id="plfa_plfa-part2-Bisimulation-10184" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10186" class="Symbol">(∀</a> <a id="plfa_plfa-part2-Bisimulation-10189" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10190" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10190" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-10192" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10192" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-10193" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-10195" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10197" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-10198" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10198" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-10200" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-10202" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10017" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-10204" href="../More/#plfa_plfa-part2-More-21473" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Bisimulation-10206" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10192" class="Bound">B</a> <a id="plfa_plfa-part2-Bisimulation-10208" href="../More/#plfa_plfa-part2-More-21583" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-10210" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10190" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-10211" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-10213" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-10215" href="../More/#plfa_plfa-part2-More-25511" class="Function">exts</a> <a id="plfa_plfa-part2-Bisimulation-10220" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10027" class="Bound">σ</a> <a id="plfa_plfa-part2-Bisimulation-10222" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10198" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-10224" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-10226" href="../More/#plfa_plfa-part2-More-25511" class="Function">exts</a> <a id="plfa_plfa-part2-Bisimulation-10231" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10060" class="Bound">σ†</a> <a id="plfa_plfa-part2-Bisimulation-10234" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10198" class="Bound">x</a><a id="plfa_plfa-part2-Bisimulation-10235" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-10237" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10006" class="Function">~exts</a> <a id="plfa_plfa-part2-Bisimulation-10243" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10243" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-10246" href="../More/#plfa_plfa-part2-More-21619" class="InductiveConstructor">Z</a>      <a id="plfa_plfa-part2-Bisimulation-10253" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-10256" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5759" class="InductiveConstructor">~`</a>
<a id="plfa_plfa-part2-Bisimulation-10259" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10006" class="Function">~exts</a> <a id="plfa_plfa-part2-Bisimulation-10265" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10265" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-10268" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-10269" href="../More/#plfa_plfa-part2-More-21666" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Bisimulation-10271" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10271" class="Bound">x</a><a id="plfa_plfa-part2-Bisimulation-10272" class="Symbol">)</a>  <a id="plfa_plfa-part2-Bisimulation-10275" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-10278" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-8530" class="Function">~rename</a> <a id="plfa_plfa-part2-Bisimulation-10286" href="../More/#plfa_plfa-part2-More-21666" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Bisimulation-10289" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-10290" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10265" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-10293" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10271" class="Bound">x</a><a id="plfa_plfa-part2-Bisimulation-10294" class="Symbol">)</a>
</pre><p>这个证明的结构于扩充的结构相似。 新加入的变量平凡地与它自身相关，否则我们可以对假设使用重命名。</p><p>如上定义完扩充之后，证明替换与模拟交换就很直接了。 如果 <code>σ</code> 和 <code>σ†</code> 都将任何判断 <code>Γ ∋ A</code> 映射至一个判断 <code>Δ ⊢ A</code>， 且对于 <code>Γ ∋ A</code> 中的任意 <code>x</code>，我们有 <code>σ x ~ σ† x</code>， 如果 <code>M ~ M†</code>，那么 <code>subst σ M ~ subst σ† M†</code>：</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-~subst"></a><a id="plfa_plfa-part2-Bisimulation-10979" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10979" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-10986" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-10988" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-10990" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-10991" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10991" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-10993" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10993" class="Bound">Δ</a><a id="plfa_plfa-part2-Bisimulation-10994" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-10998" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11000" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11001" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11001" class="Bound">σ</a>  <a id="plfa_plfa-part2-Bisimulation-11004" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-11006" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-11008" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11009" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11009" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-11010" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-11012" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11014" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10991" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-11016" href="../More/#plfa_plfa-part2-More-21583" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-11018" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11009" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-11020" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11022" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10993" class="Bound">Δ</a> <a id="plfa_plfa-part2-Bisimulation-11024" href="../More/#plfa_plfa-part2-More-22725" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-11026" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11009" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-11027" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-11031" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11033" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11034" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11034" class="Bound">σ†</a> <a id="plfa_plfa-part2-Bisimulation-11037" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-11039" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-11041" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11042" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11042" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-11043" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-11045" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11047" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10991" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-11049" href="../More/#plfa_plfa-part2-More-21583" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-11051" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11042" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-11053" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11055" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10993" class="Bound">Δ</a> <a id="plfa_plfa-part2-Bisimulation-11057" href="../More/#plfa_plfa-part2-More-22725" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-11059" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11042" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-11060" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-11064" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11066" class="Symbol">(∀</a> <a id="plfa_plfa-part2-Bisimulation-11069" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11070" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11070" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-11071" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-11073" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11075" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11076" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11076" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-11078" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-11080" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10991" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-11082" href="../More/#plfa_plfa-part2-More-21583" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-11084" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11070" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-11085" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-11087" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11089" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11001" class="Bound">σ</a> <a id="plfa_plfa-part2-Bisimulation-11091" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11076" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-11093" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-11095" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11034" class="Bound">σ†</a> <a id="plfa_plfa-part2-Bisimulation-11098" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11076" class="Bound">x</a><a id="plfa_plfa-part2-Bisimulation-11099" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Bisimulation-11105" class="Comment">---------------------------------------------------------</a>
  <a id="plfa_plfa-part2-Bisimulation-11165" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11167" class="Symbol">(∀</a> <a id="plfa_plfa-part2-Bisimulation-11170" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11171" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11171" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-11172" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-11174" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11175" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11175" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-11177" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11177" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-11180" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-11182" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10991" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-11184" href="../More/#plfa_plfa-part2-More-22725" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-11186" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11171" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-11187" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-11189" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11191" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11175" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-11193" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-11195" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11177" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-11198" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-11200" href="../More/#plfa_plfa-part2-More-25643" class="Function">subst</a> <a id="plfa_plfa-part2-Bisimulation-11206" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11001" class="Bound">σ</a> <a id="plfa_plfa-part2-Bisimulation-11208" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11175" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-11210" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-11212" href="../More/#plfa_plfa-part2-More-25643" class="Function">subst</a> <a id="plfa_plfa-part2-Bisimulation-11218" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11034" class="Bound">σ†</a> <a id="plfa_plfa-part2-Bisimulation-11221" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11177" class="Bound">M†</a><a id="plfa_plfa-part2-Bisimulation-11223" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-11225" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10979" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-11232" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11232" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-11235" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11236" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5759" class="InductiveConstructor">~`</a> <a id="plfa_plfa-part2-Bisimulation-11239" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-11240" class="Argument">x</a> <a id="plfa_plfa-part2-Bisimulation-11242" class="Symbol">=</a> <a id="plfa_plfa-part2-Bisimulation-11244" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11244" class="Bound">x</a><a id="plfa_plfa-part2-Bisimulation-11245" class="Symbol">})</a>  <a id="plfa_plfa-part2-Bisimulation-11249" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-11252" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11232" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-11255" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11244" class="Bound">x</a>
<a id="plfa_plfa-part2-Bisimulation-11257" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10979" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-11264" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11264" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-11267" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11268" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5817" class="InductiveConstructor Operator">~ƛ</a> <a id="plfa_plfa-part2-Bisimulation-11271" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11271" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-11273" class="Symbol">)</a>       <a id="plfa_plfa-part2-Bisimulation-11281" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-11284" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5817" class="InductiveConstructor Operator">~ƛ</a> <a id="plfa_plfa-part2-Bisimulation-11287" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11288" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10979" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-11295" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11296" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10006" class="Function">~exts</a> <a id="plfa_plfa-part2-Bisimulation-11302" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11264" class="Bound">~σ</a><a id="plfa_plfa-part2-Bisimulation-11304" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-11306" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11271" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-11308" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-11310" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10979" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-11317" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11317" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-11320" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11321" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11321" class="Bound">~L</a> <a id="plfa_plfa-part2-Bisimulation-11324" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5902" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-11327" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11327" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-11329" class="Symbol">)</a>    <a id="plfa_plfa-part2-Bisimulation-11334" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-11337" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11338" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10979" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-11345" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11317" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-11348" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11321" class="Bound">~L</a><a id="plfa_plfa-part2-Bisimulation-11350" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-11352" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5902" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-11355" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11356" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10979" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-11363" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11317" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-11366" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11327" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-11368" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-11370" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10979" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-11377" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11377" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-11380" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11381" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6026" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-11386" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11386" class="Bound">~M</a> <a id="plfa_plfa-part2-Bisimulation-11389" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11389" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-11391" class="Symbol">)</a>  <a id="plfa_plfa-part2-Bisimulation-11394" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-11397" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6026" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-11402" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11403" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10979" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-11410" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11377" class="Bound">~σ</a> <a id="plfa_plfa-part2-Bisimulation-11413" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11386" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-11415" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-11417" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11418" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10979" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-11425" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-11426" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10006" class="Function">~exts</a> <a id="plfa_plfa-part2-Bisimulation-11432" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11377" class="Bound">~σ</a><a id="plfa_plfa-part2-Bisimulation-11434" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-11436" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-11389" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-11438" class="Symbol">)</a>
</pre><p>与之前一样，这个证明的结构于替换的结构类似：使用递归重新构造每一个项， 并在需要时扩充语境（在这里，我们只需要在 λ 抽象的抽象体中使用）。</p><p>从上面的替换的广义定义，我们可以简单地推导出我们所需的特殊形式： 如果 <code>N ~ N†</code> 和 <code>M ∼ M†</code>，那么 <code>N [ M ] ~ N† [ M† ]</code>：</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-~sub"></a><a id="plfa_plfa-part2-Bisimulation-12006" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12006" class="Function">~sub</a> <a id="plfa_plfa-part2-Bisimulation-12011" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-12013" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-12015" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12016" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12016" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-12018" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12018" class="Bound">A</a> <a id="plfa_plfa-part2-Bisimulation-12020" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12020" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-12021" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-12023" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12024" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12024" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-12026" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12026" class="Bound">N†</a> <a id="plfa_plfa-part2-Bisimulation-12029" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-12031" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12016" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-12033" href="../More/#plfa_plfa-part2-More-21473" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Bisimulation-12035" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12020" class="Bound">B</a> <a id="plfa_plfa-part2-Bisimulation-12037" href="../More/#plfa_plfa-part2-More-22725" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-12039" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12018" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-12040" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-12042" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12043" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12043" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-12045" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12045" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-12048" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-12050" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12016" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-12052" href="../More/#plfa_plfa-part2-More-22725" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-12054" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12020" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-12055" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-12059" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-12061" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12024" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-12063" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-12065" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12026" class="Bound">N†</a>
  <a id="plfa_plfa-part2-Bisimulation-12070" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-12072" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12043" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-12074" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-12076" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12045" class="Bound">M†</a>
    <a id="plfa_plfa-part2-Bisimulation-12083" class="Comment">-----------------------</a>
  <a id="plfa_plfa-part2-Bisimulation-12109" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-12111" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-12112" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12024" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-12114" href="../More/#plfa_plfa-part2-More-26461" class="Function Operator">[</a> <a id="plfa_plfa-part2-Bisimulation-12116" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12043" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-12118" href="../More/#plfa_plfa-part2-More-26461" class="Function Operator">]</a><a id="plfa_plfa-part2-Bisimulation-12119" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-12121" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-12123" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-12124" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12026" class="Bound">N†</a> <a id="plfa_plfa-part2-Bisimulation-12127" href="../More/#plfa_plfa-part2-More-26461" class="Function Operator">[</a> <a id="plfa_plfa-part2-Bisimulation-12129" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12045" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-12132" href="../More/#plfa_plfa-part2-More-26461" class="Function Operator">]</a><a id="plfa_plfa-part2-Bisimulation-12133" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-12135" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12006" class="Function">~sub</a> <a id="plfa_plfa-part2-Bisimulation-12140" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12141" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12141" class="Bound">Γ</a><a id="plfa_plfa-part2-Bisimulation-12142" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-12144" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12145" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12145" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-12146" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-12148" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12149" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12149" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-12150" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-12152" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12152" class="Bound">~N</a> <a id="plfa_plfa-part2-Bisimulation-12155" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12155" class="Bound">~M</a> <a id="plfa_plfa-part2-Bisimulation-12158" class="Symbol">=</a> <a id="plfa_plfa-part2-Bisimulation-12160" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-10979" class="Function">~subst</a> <a id="plfa_plfa-part2-Bisimulation-12167" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12168" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12141" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-12170" href="../More/#plfa_plfa-part2-More-21473" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Bisimulation-12172" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12149" class="Bound">B</a><a id="plfa_plfa-part2-Bisimulation-12173" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-12175" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12176" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12141" class="Bound">Γ</a><a id="plfa_plfa-part2-Bisimulation-12177" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-12179" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12199" class="Function">~σ</a> <a id="plfa_plfa-part2-Bisimulation-12182" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12183" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12145" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-12184" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-12186" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12152" class="Bound">~N</a>
  <a id="plfa_plfa-part2-Bisimulation-12191" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Bisimulation-12199" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12199" class="Function">~σ</a> <a id="plfa_plfa-part2-Bisimulation-12202" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-12204" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-12206" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-12207" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12207" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-12208" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-12210" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-12212" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-12213" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12213" class="Bound">x</a> <a id="plfa_plfa-part2-Bisimulation-12215" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-12217" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12141" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-12219" href="../More/#plfa_plfa-part2-More-21473" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Bisimulation-12221" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12149" class="Bound">B</a> <a id="plfa_plfa-part2-Bisimulation-12223" href="../More/#plfa_plfa-part2-More-21583" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Bisimulation-12225" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12207" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-12226" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-12228" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-12230" class="Symbol">_</a> <a id="plfa_plfa-part2-Bisimulation-12232" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-12234" class="Symbol">_</a>
  <a id="plfa_plfa-part2-Bisimulation-12238" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12199" class="Function">~σ</a> <a id="plfa_plfa-part2-Bisimulation-12241" href="../More/#plfa_plfa-part2-More-21619" class="InductiveConstructor">Z</a>      <a id="plfa_plfa-part2-Bisimulation-12248" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-12251" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12155" class="Bound">~M</a>
  <a id="plfa_plfa-part2-Bisimulation-12256" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12199" class="Function">~σ</a> <a id="plfa_plfa-part2-Bisimulation-12259" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-12260" href="../More/#plfa_plfa-part2-More-21666" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Bisimulation-12262" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12262" class="Bound">x</a><a id="plfa_plfa-part2-Bisimulation-12263" class="Symbol">)</a>  <a id="plfa_plfa-part2-Bisimulation-12266" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-12269" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5759" class="InductiveConstructor">~`</a>
</pre><p>再一次，这个证明与原定义的结构类似。</p><h2 id="给出的关系是模拟">给出的关系是模拟</h2><p>最后，我们可以证明给出的关系的确是一个模拟。 实际上，我们将展示它满足更强的锁步模拟的条件。 我们期望展示的有：</p><p><strong>锁步模拟</strong>：对于任意的 <code>M</code>、<code>M†</code> 和 <code>N</code>， 如果 <code>M ~ M†</code> 和 <code>M —→ N</code> 成立，那么 <code>M† —→ N†</code> 和 <code>N ~ N†</code> 对于一些 <code>N†</code> 成立。</p><p>或者，用图表来表示：</p><pre><code>M  --- —→ --- N
|             |
|             |
~             ~
|             |
|             |
M† --- —→ --- N†</code></pre><p>我们首先形式化对应图表下方的一段的一个概念，即右面和下面的边：</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-13231" class="Keyword">data</a> <a id="plfa_plfa-part2-Bisimulation-Leg"></a><a id="plfa_plfa-part2-Bisimulation-13236" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13236" class="Datatype">Leg</a> <a id="plfa_plfa-part2-Bisimulation-13240" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-13241" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13241" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-13243" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13243" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-13244" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-13246" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13247" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13247" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-13250" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13250" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-13252" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-13254" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13241" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-13256" href="../More/#plfa_plfa-part2-More-22725" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-13258" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13243" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-13259" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-13261" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-13263" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part2-Bisimulation-13267" class="Keyword">where</a>

  <a id="plfa_plfa-part2-Bisimulation-Leg.leg"></a><a id="plfa_plfa-part2-Bisimulation-13276" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13276" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-13280" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-13282" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-13284" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-13285" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13285" class="Bound">N†</a> <a id="plfa_plfa-part2-Bisimulation-13288" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-13290" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13241" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-13292" href="../More/#plfa_plfa-part2-More-22725" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-13294" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13243" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-13295" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Bisimulation-13301" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-13303" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13250" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-13305" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-13307" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13285" class="Bound">N†</a>
    <a id="plfa_plfa-part2-Bisimulation-13314" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-13316" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13247" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-13319" href="../More/#plfa_plfa-part2-More-30199" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Bisimulation-13322" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13285" class="Bound">N†</a>
      <a id="plfa_plfa-part2-Bisimulation-13331" class="Comment">--------</a>
    <a id="plfa_plfa-part2-Bisimulation-13344" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-13346" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13236" class="Datatype">Leg</a> <a id="plfa_plfa-part2-Bisimulation-13350" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13247" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-13353" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13250" class="Bound">N</a>
</pre><p>在我们的形式化中，在这里，我们可以使用比 <code>—↠</code> 更强的关系，用 <code>—→</code> 来取而代之。</p><p>我们现在可以陈述并证明这个关系是一个模拟。 同样，在这里，我们可以使用比 <code>—↠</code> 更强的关系，用 <code>—→</code> 来取而代之。</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-sim"></a><a id="plfa_plfa-part2-Bisimulation-13746" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13746" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13750" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-13752" class="Symbol">∀</a> <a id="plfa_plfa-part2-Bisimulation-13754" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-13755" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13755" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-13757" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13757" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-13758" class="Symbol">}</a> <a id="plfa_plfa-part2-Bisimulation-13760" class="Symbol">{</a><a id="plfa_plfa-part2-Bisimulation-13761" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13761" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-13763" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13763" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-13766" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13766" class="Bound">N</a> <a id="plfa_plfa-part2-Bisimulation-13768" class="Symbol">:</a> <a id="plfa_plfa-part2-Bisimulation-13770" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13755" class="Bound">Γ</a> <a id="plfa_plfa-part2-Bisimulation-13772" href="../More/#plfa_plfa-part2-More-22725" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Bisimulation-13774" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13757" class="Bound">A</a><a id="plfa_plfa-part2-Bisimulation-13775" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Bisimulation-13779" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-13781" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13761" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-13783" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5710" class="Datatype Operator">~</a> <a id="plfa_plfa-part2-Bisimulation-13785" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13763" class="Bound">M†</a>
  <a id="plfa_plfa-part2-Bisimulation-13790" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-13792" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13761" class="Bound">M</a> <a id="plfa_plfa-part2-Bisimulation-13794" href="../More/#plfa_plfa-part2-More-30199" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Bisimulation-13797" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13766" class="Bound">N</a>
    <a id="plfa_plfa-part2-Bisimulation-13803" class="Comment">---------</a>
  <a id="plfa_plfa-part2-Bisimulation-13815" class="Symbol">→</a> <a id="plfa_plfa-part2-Bisimulation-13817" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13236" class="Datatype">Leg</a>  <a id="plfa_plfa-part2-Bisimulation-13822" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13763" class="Bound">M†</a> <a id="plfa_plfa-part2-Bisimulation-13825" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13766" class="Bound">N</a>
<a id="plfa_plfa-part2-Bisimulation-13827" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13746" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13831" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5759" class="InductiveConstructor">~`</a>              <a id="plfa_plfa-part2-Bisimulation-13847" class="Symbol">()</a>
<a id="plfa_plfa-part2-Bisimulation-13850" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13746" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13854" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13855" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5817" class="InductiveConstructor Operator">~ƛ</a> <a id="plfa_plfa-part2-Bisimulation-13858" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13858" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-13860" class="Symbol">)</a>         <a id="plfa_plfa-part2-Bisimulation-13870" class="Symbol">()</a>
<a id="plfa_plfa-part2-Bisimulation-13873" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13746" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13877" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13878" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13878" class="Bound">~L</a> <a id="plfa_plfa-part2-Bisimulation-13881" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5902" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-13884" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13884" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-13886" class="Symbol">)</a>      <a id="plfa_plfa-part2-Bisimulation-13893" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13894" href="../More/#plfa_plfa-part2-More-30258" class="InductiveConstructor">ξ-·₁</a> <a id="plfa_plfa-part2-Bisimulation-13899" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13899" class="Bound">L—→</a><a id="plfa_plfa-part2-Bisimulation-13902" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Bisimulation-13906" class="Keyword">with</a> <a id="plfa_plfa-part2-Bisimulation-13911" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13746" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13915" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13878" class="Bound">~L</a> <a id="plfa_plfa-part2-Bisimulation-13918" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13899" class="Bound">L—→</a>
<a id="plfa_plfa-part2-Bisimulation-13922" class="Symbol">...</a>  <a id="plfa_plfa-part2-Bisimulation-13927" class="Symbol">|</a> <a id="plfa_plfa-part2-Bisimulation-13929" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13276" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-13933" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13933" class="Bound">~L′</a> <a id="plfa_plfa-part2-Bisimulation-13937" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13937" class="Bound">L†—→</a>                 <a id="plfa_plfa-part2-Bisimulation-13958" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-13961" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13276" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-13965" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13966" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13933" class="Bound">~L′</a> <a id="plfa_plfa-part2-Bisimulation-13970" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5902" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-13973" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-13975" class="Symbol">)</a>   <a id="plfa_plfa-part2-Bisimulation-13979" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13980" href="../More/#plfa_plfa-part2-More-30258" class="InductiveConstructor">ξ-·₁</a> <a id="plfa_plfa-part2-Bisimulation-13985" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13937" class="Bound">L†—→</a><a id="plfa_plfa-part2-Bisimulation-13989" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-13991" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13746" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-13995" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-13996" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13996" class="Bound">~V</a> <a id="plfa_plfa-part2-Bisimulation-13999" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5902" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-14002" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14002" class="Bound">~M</a><a id="plfa_plfa-part2-Bisimulation-14004" class="Symbol">)</a>      <a id="plfa_plfa-part2-Bisimulation-14011" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14012" href="../More/#plfa_plfa-part2-More-30367" class="InductiveConstructor">ξ-·₂</a> <a id="plfa_plfa-part2-Bisimulation-14017" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14017" class="Bound">VV</a> <a id="plfa_plfa-part2-Bisimulation-14020" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14020" class="Bound">M—→</a><a id="plfa_plfa-part2-Bisimulation-14023" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Bisimulation-14027" class="Keyword">with</a> <a id="plfa_plfa-part2-Bisimulation-14032" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13746" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-14036" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14002" class="Bound">~M</a> <a id="plfa_plfa-part2-Bisimulation-14039" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14020" class="Bound">M—→</a>
<a id="plfa_plfa-part2-Bisimulation-14043" class="Symbol">...</a>  <a id="plfa_plfa-part2-Bisimulation-14048" class="Symbol">|</a> <a id="plfa_plfa-part2-Bisimulation-14050" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13276" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-14054" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14054" class="Bound">~M′</a> <a id="plfa_plfa-part2-Bisimulation-14058" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14058" class="Bound">M†—→</a>                 <a id="plfa_plfa-part2-Bisimulation-14079" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-14082" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13276" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-14086" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14087" class="Bound">~V</a> <a id="plfa_plfa-part2-Bisimulation-14090" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5902" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-14093" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14054" class="Bound">~M′</a><a id="plfa_plfa-part2-Bisimulation-14096" class="Symbol">)</a>   <a id="plfa_plfa-part2-Bisimulation-14100" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14101" href="../More/#plfa_plfa-part2-More-30367" class="InductiveConstructor">ξ-·₂</a> <a id="plfa_plfa-part2-Bisimulation-14106" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14107" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7587" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-14112" class="Bound">~V</a> <a id="plfa_plfa-part2-Bisimulation-14115" class="Bound">VV</a><a id="plfa_plfa-part2-Bisimulation-14117" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-14119" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14058" class="Bound">M†—→</a><a id="plfa_plfa-part2-Bisimulation-14123" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-14125" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13746" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-14129" class="Symbol">((</a><a id="plfa_plfa-part2-Bisimulation-14131" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5817" class="InductiveConstructor Operator">~ƛ</a> <a id="plfa_plfa-part2-Bisimulation-14134" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14134" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-14136" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-14138" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-5902" class="InductiveConstructor Operator">~·</a> <a id="plfa_plfa-part2-Bisimulation-14141" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14141" class="Bound">~V</a><a id="plfa_plfa-part2-Bisimulation-14143" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-14145" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14146" href="../More/#plfa_plfa-part2-More-30490" class="InductiveConstructor">β-ƛ</a> <a id="plfa_plfa-part2-Bisimulation-14150" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14150" class="Bound">VV</a><a id="plfa_plfa-part2-Bisimulation-14152" class="Symbol">)</a>        <a id="plfa_plfa-part2-Bisimulation-14161" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-14164" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13276" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-14168" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14169" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12006" class="Function">~sub</a> <a id="plfa_plfa-part2-Bisimulation-14174" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14134" class="Bound">~N</a> <a id="plfa_plfa-part2-Bisimulation-14177" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14141" class="Bound">~V</a><a id="plfa_plfa-part2-Bisimulation-14179" class="Symbol">)</a>  <a id="plfa_plfa-part2-Bisimulation-14182" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14183" href="../More/#plfa_plfa-part2-More-30490" class="InductiveConstructor">β-ƛ</a> <a id="plfa_plfa-part2-Bisimulation-14187" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14188" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7587" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-14193" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14141" class="Bound">~V</a> <a id="plfa_plfa-part2-Bisimulation-14196" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14150" class="Bound">VV</a><a id="plfa_plfa-part2-Bisimulation-14198" class="Symbol">))</a>
<a id="plfa_plfa-part2-Bisimulation-14201" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13746" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-14205" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14206" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6026" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-14211" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14211" class="Bound">~M</a> <a id="plfa_plfa-part2-Bisimulation-14214" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14214" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-14216" class="Symbol">)</a>    <a id="plfa_plfa-part2-Bisimulation-14221" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14222" href="../More/#plfa_plfa-part2-More-31517" class="InductiveConstructor">ξ-let</a> <a id="plfa_plfa-part2-Bisimulation-14228" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14228" class="Bound">M—→</a><a id="plfa_plfa-part2-Bisimulation-14231" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Bisimulation-14235" class="Keyword">with</a> <a id="plfa_plfa-part2-Bisimulation-14240" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13746" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-14244" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14211" class="Bound">~M</a> <a id="plfa_plfa-part2-Bisimulation-14247" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14228" class="Bound">M—→</a>
<a id="plfa_plfa-part2-Bisimulation-14251" class="Symbol">...</a>  <a id="plfa_plfa-part2-Bisimulation-14256" class="Symbol">|</a> <a id="plfa_plfa-part2-Bisimulation-14258" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13276" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-14262" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14262" class="Bound">~M′</a> <a id="plfa_plfa-part2-Bisimulation-14266" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14266" class="Bound">M†—→</a>                 <a id="plfa_plfa-part2-Bisimulation-14287" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-14290" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13276" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-14294" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14295" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6026" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-14300" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14262" class="Bound">~M′</a> <a id="plfa_plfa-part2-Bisimulation-14304" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-14306" class="Symbol">)</a> <a id="plfa_plfa-part2-Bisimulation-14308" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14309" href="../More/#plfa_plfa-part2-More-30367" class="InductiveConstructor">ξ-·₂</a> <a id="plfa_plfa-part2-Bisimulation-14314" href="../More/#plfa_plfa-part2-More-27414" class="InductiveConstructor">V-ƛ</a> <a id="plfa_plfa-part2-Bisimulation-14318" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14266" class="Bound">M†—→</a><a id="plfa_plfa-part2-Bisimulation-14322" class="Symbol">)</a>
<a id="plfa_plfa-part2-Bisimulation-14324" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13746" class="Function">sim</a> <a id="plfa_plfa-part2-Bisimulation-14328" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14329" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-6026" class="InductiveConstructor">~let</a> <a id="plfa_plfa-part2-Bisimulation-14334" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14334" class="Bound">~V</a> <a id="plfa_plfa-part2-Bisimulation-14337" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14337" class="Bound">~N</a><a id="plfa_plfa-part2-Bisimulation-14339" class="Symbol">)</a>    <a id="plfa_plfa-part2-Bisimulation-14344" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14345" href="../More/#plfa_plfa-part2-More-31639" class="InductiveConstructor">β-let</a> <a id="plfa_plfa-part2-Bisimulation-14351" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14351" class="Bound">VV</a><a id="plfa_plfa-part2-Bisimulation-14353" class="Symbol">)</a>      <a id="plfa_plfa-part2-Bisimulation-14360" class="Symbol">=</a>  <a id="plfa_plfa-part2-Bisimulation-14363" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-13276" class="InductiveConstructor">leg</a> <a id="plfa_plfa-part2-Bisimulation-14367" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14368" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-12006" class="Function">~sub</a> <a id="plfa_plfa-part2-Bisimulation-14373" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14337" class="Bound">~N</a> <a id="plfa_plfa-part2-Bisimulation-14376" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14334" class="Bound">~V</a><a id="plfa_plfa-part2-Bisimulation-14378" class="Symbol">)</a>  <a id="plfa_plfa-part2-Bisimulation-14381" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14382" href="../More/#plfa_plfa-part2-More-30490" class="InductiveConstructor">β-ƛ</a> <a id="plfa_plfa-part2-Bisimulation-14386" class="Symbol">(</a><a id="plfa_plfa-part2-Bisimulation-14387" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-7587" class="Function">~val</a> <a id="plfa_plfa-part2-Bisimulation-14392" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14334" class="Bound">~V</a> <a id="plfa_plfa-part2-Bisimulation-14395" href="../Bisimulation/#plfa_plfa-part2-Bisimulation-14351" class="Bound">VV</a><a id="plfa_plfa-part2-Bisimulation-14397" class="Symbol">))</a>
</pre><p>这个证明由分情况讨论来完成，检查每一个 <code>M ~ M†</code> 的例子，和每一个 <code>M —→ M†</code> 的例子， 并在归约是 <code>ξ</code> 规则时使用递归，也因此包括了另一个归约。 证明的结构和可进性的证明也有些类似：</p><ul><li>如果相关的项是变量，那么无可应用的归约。</li><li>如果相关的项是 λ 抽象，那么无可应用的归约。</li><li>如果相关的项是应用，那么有三种子情况：<ul><li><p>源项由 <code>ξ-·₁</code> 归约，在此情况下目标项也一样。递归应用可以让我们得到：</p><pre><code>L  --- —→ ---  L′
|              |
|              |
~              ~
|              |
|              |
L† --- —→ --- L′†</code></pre><p>从而得到：</p><pre><code> L · M  --- —→ ---  L′ · M
   |                   |
   |                   |
   ~                   ~
   |                   |
   |                   |
L† · M† --- —→ --- L′† · M†</code></pre></li></ul><ul><li><p>源项由 <code>ξ-·₂</code> 归约，在此情况下目标项也一样。递归应用可以让我们得到：</p><pre><code>M  --- —→ ---  M′
|              |
|              |
~              ~
|              |
|              |
M† --- —→ --- M′†</code></pre><p>从而得到：</p><pre><code> V · M  --- —→ ---  V · M′
   |                  |
   |                  |
   ~                  ~
   |                  |
   |                  |
V† · M† --- —→ --- V† · M′†</code></pre><p>因为模拟和值可交换，且 <code>V</code> 是一个值，所以 <code>V†</code> 也是一个值。</p></li></ul><ul><li><p>源项由 <code>β-ƛ</code> 归约，在此情况下目标项也一样：</p><pre><code> (ƛ x ⇒ N) · V  --- —→ ---  N [ x := V ]
      |                           |
      |                           |
      ~                           ~
      |                           |
      |                           |
(ƛ x ⇒ N†) · V† --- —→ --- N† [ x :=  V† ]</code></pre><p>因为模拟和值可交换，且 <code>V</code> 是一个值，所以 <code>V†</code> 也是一个值。 因为模拟和替换可交换，且 <code>N ~ N†</code> 和 <code>V ~ V†</code> 成立，所以我们得到 <code>N [ x := V ] ~ N† [ x := V† ]</code>。</p></li></ul></li></ul><ul><li><p>如果相关的项是 <code>let</code> 和抽象应用，那么有两种子情况：</p><ul><li><p>源项由 <code>ξ-let</code> 归约，在此情况下目标项由 <code>ξ-·₂</code> 归约。递归应用可以让我们得到：</p><pre><code>M  --- —→ ---  M′
|              |
|              |
~              ~
|              |
|              |
M† --- —→ --- M′†</code></pre><p>从而得到：</p><pre><code>let x = M in N --- —→ --- let x = M′ in N
      |                         |
      |                         |
      ~                         ~
      |                         |
      |                         |
(ƛ x ⇒ N) · M  --- —→ --- (ƛ x ⇒ N) · M′</code></pre></li></ul><ul><li><p>源项由 <code>β-let</code> 归约，在此情况下目标项由 <code>β-ƛ</code> 归约：</p><pre><code>let x = V in N  --- —→ ---  N [ x := V ]
      |                         |
      |                         |
      ~                         ~
      |                         |
      |                         |
(ƛ x ⇒ N†) · V† --- —→ --- N† [ x := V† ]</code></pre><p>因为模拟和值可交换，且 <code>V</code> 是一个值，所以 <code>V†</code> 也是一个值。 因为模拟和替换可交换，且 <code>N ~ N†</code> 和 <code>V ~ V†</code> 成立，所以我们得到 <code>N [ x := V ] ~ N† [ x := V† ]</code>。</p></li></ul></li></ul><h4 id="练习-sim¹-实践">练习 <code>sim⁻¹</code> （实践）</h4><p>证明我们也有反方向的模拟，因此我们有一个互模拟。</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-19167" class="Comment">-- 在这里写出你的代码。</a>
</pre><h4 id="练习-products-实践">练习 <code>products</code> （实践）</h4><p>证明 <a href="../More/">More</a> 章节中两种积的表达方式满足互模拟。 你需要包含的构造有：变量，以及与函数和积相关的构造。 在此情况下，模拟并<strong>不是</strong>锁步的。</p><pre class="Agda"><a id="plfa_plfa-part2-Bisimulation-19601" class="Comment">-- 在这里写出你的代码。</a>
</pre><h2 id="unicode">Unicode</h2><p>本章节使用了下列 Unicode：</p><pre><code>†  U+2020  DAGGER (\dag)
⁻  U+207B  SUPERSCRIPT MINUS (\^-)
¹  U+00B9  SUPERSCRIPT ONE (\^1)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../More/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part2/Bisimulation.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Inference/">下一章</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">编程语言基础：Agda 描述</h2>本章译者：Fangyi Zhou<div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>本书按照<a rel="license" href="https://creativecommons.org/licenses/by/4.0/">创作公用 署名 4.0 国际</a>许可协议授权</div></footer></body></html>