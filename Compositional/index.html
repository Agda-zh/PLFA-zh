<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>编程语言基础：Agda 描述 – Compositional</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">编程语言基础：Agda 描述</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">主页</a> <a class="page-link" href="../Announcements/">公告</a> <a class="page-link" href="../GettingStarted/">使用说明</a> <a class="page-link" href="../Citing/">引用</a> <a class="page-link" href="https://plfa.github.io/">English</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Denotational/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Compositional.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Soundness/">下一章</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Compositional: 指称语义是可组合的</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part3-Compositional-85" class="Keyword">module</a> <a id="plfa_plfa-part3-Compositional-92" href="../Compositional/#" class="Module">plfa.part3.Compositional</a> <a id="plfa_plfa-part3-Compositional-117" class="Keyword">where</a>
</pre><h2 id="简介">简介</h2><p>本章我们会证明指称语义是可组合的，即我们会填补以下等式中省略号的部分。</p><pre><code>ℰ (` x) ≃ ...
ℰ (ƛ M) ≃ ... ℰ M ...
ℰ (M · N) ≃ ... ℰ M ... ℰ N ...</code></pre><p>这些等式蕴含了指称语义也可以定义为一个递归函数。 我们会在本章的结尾给出它的定义，并证明它等价于 ℰ。</p><h2 id="导入">导入</h2><pre class="Agda"><a id="plfa_plfa-part3-Compositional-726" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-731" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-738" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html" class="Module">Data.Product</a> <a id="plfa_plfa-part3-Compositional-751" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-757" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-758" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">_×_</a><a id="plfa_plfa-part3-Compositional-761" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-763" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="plfa_plfa-part3-Compositional-764" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-766" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ-syntax</a><a id="plfa_plfa-part3-Compositional-774" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-776" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1369" class="Function">∃</a><a id="plfa_plfa-part3-Compositional-777" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-779" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1806" class="Function">∃-syntax</a><a id="plfa_plfa-part3-Compositional-787" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-789" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a><a id="plfa_plfa-part3-Compositional-794" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-796" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a><a id="plfa_plfa-part3-Compositional-801" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-805" class="Keyword">renaming</a> <a id="plfa_plfa-part3-Compositional-814" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-815" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part3-Compositional-819" class="Symbol">to</a> <a id="plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part3-Compositional-827" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-829" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-834" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-841" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.html" class="Module">Data.Sum</a> <a id="plfa_plfa-part3-Compositional-850" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-856" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-857" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#734" class="Datatype Operator">_⊎_</a><a id="plfa_plfa-part3-Compositional-860" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-862" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a><a id="plfa_plfa-part3-Compositional-866" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-868" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a><a id="plfa_plfa-part3-Compositional-872" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-874" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-879" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-886" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Unit.html" class="Module">Data.Unit</a> <a id="plfa_plfa-part3-Compositional-896" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-902" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-903" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#158" class="Record">⊤</a><a id="plfa_plfa-part3-Compositional-904" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-906" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a><a id="plfa_plfa-part3-Compositional-908" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-910" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-915" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-922" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
  <a id="plfa_plfa-part3-Compositional-943" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-949" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-950" href="../Untyped/#plfa_plfa-part2-Untyped-3848" class="Datatype">Context</a><a id="plfa_plfa-part3-Compositional-957" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-959" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part3-Compositional-962" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-964" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-965" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-967" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part3-Compositional-970" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-972" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part3-Compositional-975" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-977" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part3-Compositional-979" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-981" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part3-Compositional-983" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-985" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part3-Compositional-988" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-990" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-995" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-1002" href="../Denotational/#" class="Module">plfa.part3.Denotational</a>
  <a id="plfa_plfa-part3-Compositional-1028" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-1034" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1035" href="../Denotational/#plfa_plfa-part3-Denotational-4969" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-1040" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1042" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">_↦_</a><a id="plfa_plfa-part3-Compositional-1045" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1047" href="../Denotational/#plfa_plfa-part3-Denotational-8930" class="Function Operator">_`,_</a><a id="plfa_plfa-part3-Compositional-1051" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1053" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">_⊔_</a><a id="plfa_plfa-part3-Compositional-1056" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1058" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-1059" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1061" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">_⊑_</a><a id="plfa_plfa-part3-Compositional-1064" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1066" href="../Denotational/#plfa_plfa-part3-Denotational-11466" class="Datatype Operator">_⊢_↓_</a><a id="plfa_plfa-part3-Compositional-1071" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1082" href="../Denotational/#plfa_plfa-part3-Denotational-5471" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-1087" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1089" href="../Denotational/#plfa_plfa-part3-Denotational-5797" class="InductiveConstructor">⊑-fun</a><a id="plfa_plfa-part3-Compositional-1094" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1096" href="../Denotational/#plfa_plfa-part3-Denotational-5496" class="InductiveConstructor">⊑-conj-L</a><a id="plfa_plfa-part3-Compositional-1104" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1106" href="../Denotational/#plfa_plfa-part3-Denotational-5580" class="InductiveConstructor">⊑-conj-R1</a><a id="plfa_plfa-part3-Compositional-1115" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1117" href="../Denotational/#plfa_plfa-part3-Denotational-5653" class="InductiveConstructor">⊑-conj-R2</a><a id="plfa_plfa-part3-Compositional-1126" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1137" href="../Denotational/#plfa_plfa-part3-Denotational-5900" class="InductiveConstructor">⊑-dist</a><a id="plfa_plfa-part3-Compositional-1143" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1145" href="../Denotational/#plfa_plfa-part3-Denotational-6832" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Compositional-1151" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1153" href="../Denotational/#plfa_plfa-part3-Denotational-5726" class="InductiveConstructor">⊑-trans</a><a id="plfa_plfa-part3-Compositional-1160" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1162" href="../Denotational/#plfa_plfa-part3-Denotational-7612" class="Function">⊔↦⊔-dist</a><a id="plfa_plfa-part3-Compositional-1170" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1181" href="../Denotational/#plfa_plfa-part3-Denotational-11520" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Compositional-1184" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1186" href="../Denotational/#plfa_plfa-part3-Denotational-11717" class="InductiveConstructor">↦-intro</a><a id="plfa_plfa-part3-Compositional-1193" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1195" href="../Denotational/#plfa_plfa-part3-Denotational-11595" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Compositional-1201" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1203" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Compositional-1210" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1212" href="../Denotational/#plfa_plfa-part3-Denotational-11829" class="InductiveConstructor">⊥-intro</a><a id="plfa_plfa-part3-Compositional-1219" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1221" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a><a id="plfa_plfa-part3-Compositional-1224" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1235" href="../Denotational/#plfa_plfa-part3-Denotational-32866" class="Function">up-env</a><a id="plfa_plfa-part3-Compositional-1241" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1243" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a><a id="plfa_plfa-part3-Compositional-1244" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1246" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">_≃_</a><a id="plfa_plfa-part3-Compositional-1249" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1251" href="../Denotational/#plfa_plfa-part3-Denotational-22805" class="Function">≃-sym</a><a id="plfa_plfa-part3-Compositional-1256" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1258" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a><a id="plfa_plfa-part3-Compositional-1268" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1270" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a><a id="plfa_plfa-part3-Compositional-1273" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-1275" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-1280" href="../Denotational/#plfa_plfa-part3-Denotational-23473" class="Module">plfa.part3.Denotational.≃-Reasoning</a>
</pre><h2 id="λ-抽象的等式">λ-抽象的等式</h2><p>考虑第一个等式</p><pre><code>ℰ (ƛ M) ≃ ... ℰ M ...</code></pre><p>我们需要定义一个函数，它将 <code>Denotation (Γ , ★)</code> 映射到 <code>Denotation Γ</code>， 我们将此函数命名为 <code>ℱ</code>。在应用到 λ-项时，它能够模拟语义中非递归的部分。 具体来说，我们需要考虑规则 <code>↦-intro</code>、<code>⊥-intro</code> 和 <code>⊔-intro</code>，因此 <code>ℱ</code> 有三个参数：子项 <code>M</code> 的指称 <code>D</code>、环境 <code>γ</code>，以及值 <code>v</code>。如果我们通过对值 <code>v</code> 进行递归来定义 <code>ℱ</code>，那么它正好匹配 <code>↦-intro</code>、<code>⊥-intro</code> 和 <code>⊔-intro</code> 这三条规则。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱ"></a><a id="plfa_plfa-part3-Compositional-2251" href="../Compositional/#plfa_plfa-part3-Compositional-2251" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2253" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-2255" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-2257" href="../Compositional/#plfa_plfa-part3-Compositional-2257" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-2258" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-2260" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2262" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-2273" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2274" href="../Compositional/#plfa_plfa-part3-Compositional-2257" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-2276" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-2278" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-2279" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2281" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2283" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-2294" href="../Compositional/#plfa_plfa-part3-Compositional-2257" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-2296" href="../Compositional/#plfa_plfa-part3-Compositional-2251" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2298" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2300" href="../Compositional/#plfa_plfa-part3-Compositional-2300" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2302" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2303" href="../Compositional/#plfa_plfa-part3-Compositional-2303" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-2305" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-2307" href="../Compositional/#plfa_plfa-part3-Compositional-2307" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-2308" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2310" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2312" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2314" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2315" href="../Compositional/#plfa_plfa-part3-Compositional-2300" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2317" href="../Denotational/#plfa_plfa-part3-Denotational-8930" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-2320" href="../Compositional/#plfa_plfa-part3-Compositional-2303" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-2321" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2323" href="../Compositional/#plfa_plfa-part3-Compositional-2307" class="Bound">w</a>
<a id="plfa_plfa-part3-Compositional-2325" href="../Compositional/#plfa_plfa-part3-Compositional-2251" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2327" href="../Compositional/#plfa_plfa-part3-Compositional-2327" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2329" href="../Compositional/#plfa_plfa-part3-Compositional-2329" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2331" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Compositional-2333" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2335" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#158" class="Record">⊤</a>
<a id="plfa_plfa-part3-Compositional-2337" href="../Compositional/#plfa_plfa-part3-Compositional-2251" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2339" href="../Compositional/#plfa_plfa-part3-Compositional-2339" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2341" href="../Compositional/#plfa_plfa-part3-Compositional-2341" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2343" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2344" href="../Compositional/#plfa_plfa-part3-Compositional-2344" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-2346" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-2348" href="../Compositional/#plfa_plfa-part3-Compositional-2348" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-2349" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2351" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2353" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2354" href="../Compositional/#plfa_plfa-part3-Compositional-2251" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2356" href="../Compositional/#plfa_plfa-part3-Compositional-2339" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2358" href="../Compositional/#plfa_plfa-part3-Compositional-2341" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2360" href="../Compositional/#plfa_plfa-part3-Compositional-2344" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-2361" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2363" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Compositional-2365" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2366" href="../Compositional/#plfa_plfa-part3-Compositional-2251" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2368" href="../Compositional/#plfa_plfa-part3-Compositional-2339" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2370" href="../Compositional/#plfa_plfa-part3-Compositional-2341" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2372" href="../Compositional/#plfa_plfa-part3-Compositional-2348" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-2373" class="Symbol">)</a>
</pre><p>如果你仔细观察，就会发现 <code>ℱ</code> 函数看起来像函数式程序员熟悉的 <code>curry</code> 化操作：它将一个以长度为 <code>n + 1</code> 的元组（即环境 <code>Γ , ★</code>）作为参数的函数， 转化为一个以长度为 <code>n</code> 的元组作为参数，并返回一个单参函数的函数。</p><p>我们希望通过 <code>ℱ</code> 函数证明</p><pre><code>ℰ (ƛ N) ≃ ℱ (ℰ N)</code></pre><p>当从一个更大的值 <code>v</code> 映射到一个更小的值 <code>u</code> 时，函数 <code>ℱ</code> 会保持成立。 它的证明就是在 <code>⊑-fun</code> 规则的情况中使用 <code>up-env</code> 引理，对 <code>u ⊑ v</code> 推导过程的直接归纳。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-sub-ℱ"></a><a id="plfa_plfa-part3-Compositional-3241" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3247" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3249" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-3251" href="../Compositional/#plfa_plfa-part3-Compositional-3251" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3252" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3254" href="../Compositional/#plfa_plfa-part3-Compositional-3254" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3256" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3258" href="../Compositional/#plfa_plfa-part3-Compositional-3251" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-3260" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3262" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-3264" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3266" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-3267" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3269" href="../Compositional/#plfa_plfa-part3-Compositional-3269" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3271" href="../Compositional/#plfa_plfa-part3-Compositional-3271" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-3273" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-3274" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-3278" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3280" href="../Compositional/#plfa_plfa-part3-Compositional-2251" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-3282" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3283" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-3285" href="../Compositional/#plfa_plfa-part3-Compositional-3254" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-3286" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3288" href="../Compositional/#plfa_plfa-part3-Compositional-3269" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3290" href="../Compositional/#plfa_plfa-part3-Compositional-3271" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-3294" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3296" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-3298" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-3300" href="../Compositional/#plfa_plfa-part3-Compositional-3271" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-3306" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-3321" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3323" href="../Compositional/#plfa_plfa-part3-Compositional-2251" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-3325" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3326" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-3328" href="../Compositional/#plfa_plfa-part3-Compositional-3254" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-3329" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3331" href="../Compositional/#plfa_plfa-part3-Compositional-3269" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3333" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Bound">u</a>
<a id="plfa_plfa-part3-Compositional-3335" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3341" href="../Compositional/#plfa_plfa-part3-Compositional-3341" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3343" href="../Denotational/#plfa_plfa-part3-Denotational-5471" class="InductiveConstructor">⊑-bot</a> <a id="plfa_plfa-part3-Compositional-3349" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3351" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a>
<a id="plfa_plfa-part3-Compositional-3354" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3360" href="../Compositional/#plfa_plfa-part3-Compositional-3360" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3362" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3363" href="../Denotational/#plfa_plfa-part3-Denotational-5797" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-3369" href="../Compositional/#plfa_plfa-part3-Compositional-3369" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-3372" href="../Compositional/#plfa_plfa-part3-Compositional-3372" class="Bound">lt′</a><a id="plfa_plfa-part3-Compositional-3375" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3377" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3379" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-3383" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3384" href="../Denotational/#plfa_plfa-part3-Denotational-32866" class="Function">up-env</a> <a id="plfa_plfa-part3-Compositional-3391" href="../Compositional/#plfa_plfa-part3-Compositional-3360" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3393" href="../Compositional/#plfa_plfa-part3-Compositional-3369" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3395" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3397" href="../Compositional/#plfa_plfa-part3-Compositional-3372" class="Bound">lt′</a>
<a id="plfa_plfa-part3-Compositional-3401" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3407" href="../Compositional/#plfa_plfa-part3-Compositional-3407" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3409" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3410" href="../Denotational/#plfa_plfa-part3-Denotational-5496" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-3419" href="../Compositional/#plfa_plfa-part3-Compositional-3419" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-3422" href="../Compositional/#plfa_plfa-part3-Compositional-3422" class="Bound">lt₁</a><a id="plfa_plfa-part3-Compositional-3425" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3427" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3429" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-3431" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3437" href="../Compositional/#plfa_plfa-part3-Compositional-3407" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3439" href="../Compositional/#plfa_plfa-part3-Compositional-3419" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-3442" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3444" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3450" href="../Compositional/#plfa_plfa-part3-Compositional-3407" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3452" href="../Compositional/#plfa_plfa-part3-Compositional-3422" class="Bound">lt₁</a> <a id="plfa_plfa-part3-Compositional-3456" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-3458" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3464" href="../Compositional/#plfa_plfa-part3-Compositional-3464" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3466" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3467" href="../Denotational/#plfa_plfa-part3-Denotational-5580" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Compositional-3477" href="../Compositional/#plfa_plfa-part3-Compositional-3477" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3479" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3481" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3483" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3489" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3490" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-3496" href="../Compositional/#plfa_plfa-part3-Compositional-3464" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-3497" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3499" href="../Compositional/#plfa_plfa-part3-Compositional-3477" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-3502" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3508" href="../Compositional/#plfa_plfa-part3-Compositional-3508" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3510" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3511" href="../Denotational/#plfa_plfa-part3-Denotational-5653" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Compositional-3521" href="../Compositional/#plfa_plfa-part3-Compositional-3521" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3523" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3525" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3527" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3533" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3534" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="plfa_plfa-part3-Compositional-3540" href="../Compositional/#plfa_plfa-part3-Compositional-3508" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-3541" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3543" href="../Compositional/#plfa_plfa-part3-Compositional-3521" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-3546" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3552" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-3553" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-3555" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3557" href="../Compositional/#plfa_plfa-part3-Compositional-3557" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3560" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3562" href="../Compositional/#plfa_plfa-part3-Compositional-3562" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-3565" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-3567" href="../Compositional/#plfa_plfa-part3-Compositional-3557" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3570" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3572" href="../Compositional/#plfa_plfa-part3-Compositional-3572" class="Bound">v₃</a><a id="plfa_plfa-part3-Compositional-3574" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-3576" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-3577" href="../Compositional/#plfa_plfa-part3-Compositional-3557" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3580" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3582" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3583" href="../Compositional/#plfa_plfa-part3-Compositional-3562" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-3586" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-3588" href="../Compositional/#plfa_plfa-part3-Compositional-3572" class="Bound">v₃</a><a id="plfa_plfa-part3-Compositional-3590" class="Symbol">)}</a> <a id="plfa_plfa-part3-Compositional-3593" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-3595" href="../Compositional/#plfa_plfa-part3-Compositional-3595" class="Bound">N2</a> <a id="plfa_plfa-part3-Compositional-3598" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3600" href="../Compositional/#plfa_plfa-part3-Compositional-3600" class="Bound">N3</a> <a id="plfa_plfa-part3-Compositional-3603" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-3605" href="../Denotational/#plfa_plfa-part3-Denotational-5900" class="InductiveConstructor">⊑-dist</a> <a id="plfa_plfa-part3-Compositional-3612" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Compositional-3617" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-3625" href="../Compositional/#plfa_plfa-part3-Compositional-3595" class="Bound">N2</a> <a id="plfa_plfa-part3-Compositional-3628" href="../Compositional/#plfa_plfa-part3-Compositional-3600" class="Bound">N3</a>
<a id="plfa_plfa-part3-Compositional-3631" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3637" href="../Compositional/#plfa_plfa-part3-Compositional-3637" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3639" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3640" href="../Denotational/#plfa_plfa-part3-Denotational-5726" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-3648" href="../Compositional/#plfa_plfa-part3-Compositional-3648" class="Bound">x₁</a> <a id="plfa_plfa-part3-Compositional-3651" href="../Compositional/#plfa_plfa-part3-Compositional-3651" class="Bound">x₂</a><a id="plfa_plfa-part3-Compositional-3653" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3655" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3657" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3663" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3664" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3670" href="../Compositional/#plfa_plfa-part3-Compositional-3637" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3672" href="../Compositional/#plfa_plfa-part3-Compositional-3651" class="Bound">x₂</a><a id="plfa_plfa-part3-Compositional-3674" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3676" href="../Compositional/#plfa_plfa-part3-Compositional-3648" class="Bound">x₁</a>
</pre><p>有了这个小前提的性质，我们就可以证明 λ-等式语义前进的方向。 证明是通过在 <code>sub</code> 规则的情况下使用 <code>sub-ℱ</code>，对语义进行归纳得出的。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰƛ→ℱℰ"></a><a id="plfa_plfa-part3-Compositional-3980" href="../Compositional/#plfa_plfa-part3-Compositional-3980" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3986" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3988" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-3990" href="../Compositional/#plfa_plfa-part3-Compositional-3990" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3991" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3993" href="../Compositional/#plfa_plfa-part3-Compositional-3993" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3995" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3997" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-4001" href="../Compositional/#plfa_plfa-part3-Compositional-3990" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4002" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4004" href="../Compositional/#plfa_plfa-part3-Compositional-4004" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4006" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4008" href="../Compositional/#plfa_plfa-part3-Compositional-3990" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4010" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4012" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4014" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4016" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4017" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4019" href="../Compositional/#plfa_plfa-part3-Compositional-4019" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-4021" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4023" href="../Denotational/#plfa_plfa-part3-Denotational-4969" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4028" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4032" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4034" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4036" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4037" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4039" href="../Compositional/#plfa_plfa-part3-Compositional-4004" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4040" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4042" href="../Compositional/#plfa_plfa-part3-Compositional-3993" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4044" href="../Compositional/#plfa_plfa-part3-Compositional-4019" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-4050" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-4065" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4067" href="../Compositional/#plfa_plfa-part3-Compositional-2251" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-4069" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4070" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4072" href="../Compositional/#plfa_plfa-part3-Compositional-4004" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4073" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4075" href="../Compositional/#plfa_plfa-part3-Compositional-3993" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4077" href="../Compositional/#plfa_plfa-part3-Compositional-4019" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-4079" href="../Compositional/#plfa_plfa-part3-Compositional-3980" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4085" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4086" href="../Denotational/#plfa_plfa-part3-Denotational-11717" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Compositional-4094" href="../Compositional/#plfa_plfa-part3-Compositional-4094" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-4095" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4097" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4099" href="../Compositional/#plfa_plfa-part3-Compositional-4094" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-4101" href="../Compositional/#plfa_plfa-part3-Compositional-3980" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4107" href="../Denotational/#plfa_plfa-part3-Denotational-11829" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-4115" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4117" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a>
<a id="plfa_plfa-part3-Compositional-4120" href="../Compositional/#plfa_plfa-part3-Compositional-3980" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4126" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4127" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-4135" href="../Compositional/#plfa_plfa-part3-Compositional-4135" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-4138" href="../Compositional/#plfa_plfa-part3-Compositional-4138" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-4140" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4142" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4144" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-4146" href="../Compositional/#plfa_plfa-part3-Compositional-3980" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4152" href="../Compositional/#plfa_plfa-part3-Compositional-4135" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-4155" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4157" href="../Compositional/#plfa_plfa-part3-Compositional-3980" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4163" href="../Compositional/#plfa_plfa-part3-Compositional-4138" class="Bound">d₂</a> <a id="plfa_plfa-part3-Compositional-4166" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-4168" href="../Compositional/#plfa_plfa-part3-Compositional-3980" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4174" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4175" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-4179" href="../Compositional/#plfa_plfa-part3-Compositional-4179" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4181" href="../Compositional/#plfa_plfa-part3-Compositional-4181" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-4183" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4185" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4187" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-4193" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4194" href="../Compositional/#plfa_plfa-part3-Compositional-3980" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4200" href="../Compositional/#plfa_plfa-part3-Compositional-4179" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-4201" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4203" href="../Compositional/#plfa_plfa-part3-Compositional-4181" class="Bound">lt</a>
</pre><p>λ-抽象的「反演引理」是上面定理的一种特例。反演引理在证明「规约会保持指称不变」时会很有用。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lambda-inversion"></a><a id="plfa_plfa-part3-Compositional-4440" href="../Compositional/#plfa_plfa-part3-Compositional-4440" class="Function">lambda-inversion</a> <a id="plfa_plfa-part3-Compositional-4457" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4459" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4461" href="../Compositional/#plfa_plfa-part3-Compositional-4461" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4462" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4464" href="../Compositional/#plfa_plfa-part3-Compositional-4464" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4466" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4468" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-4472" href="../Compositional/#plfa_plfa-part3-Compositional-4461" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4473" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4475" href="../Compositional/#plfa_plfa-part3-Compositional-4475" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4477" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4479" href="../Compositional/#plfa_plfa-part3-Compositional-4461" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4481" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4483" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4485" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4487" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4488" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4490" href="../Compositional/#plfa_plfa-part3-Compositional-4490" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4493" href="../Compositional/#plfa_plfa-part3-Compositional-4493" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-4496" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4498" href="../Denotational/#plfa_plfa-part3-Denotational-4969" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4503" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4507" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4509" href="../Compositional/#plfa_plfa-part3-Compositional-4464" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4511" href="../Denotational/#plfa_plfa-part3-Denotational-11466" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4513" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4515" href="../Compositional/#plfa_plfa-part3-Compositional-4475" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4517" href="../Denotational/#plfa_plfa-part3-Denotational-11466" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Compositional-4519" href="../Compositional/#plfa_plfa-part3-Compositional-4490" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4522" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-4524" href="../Compositional/#plfa_plfa-part3-Compositional-4493" class="Bound">v₂</a>
    <a id="plfa_plfa-part3-Compositional-4531" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Compositional-4551" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4553" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4554" href="../Compositional/#plfa_plfa-part3-Compositional-4464" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4556" href="../Denotational/#plfa_plfa-part3-Denotational-8930" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-4559" href="../Compositional/#plfa_plfa-part3-Compositional-4490" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-4561" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4563" href="../Denotational/#plfa_plfa-part3-Denotational-11466" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4565" href="../Compositional/#plfa_plfa-part3-Compositional-4475" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4567" href="../Denotational/#plfa_plfa-part3-Denotational-11466" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Compositional-4569" href="../Compositional/#plfa_plfa-part3-Compositional-4493" class="Bound">v₂</a>
<a id="plfa_plfa-part3-Compositional-4572" href="../Compositional/#plfa_plfa-part3-Compositional-4440" class="Function">lambda-inversion</a><a id="plfa_plfa-part3-Compositional-4588" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4589" class="Argument">v₁</a> <a id="plfa_plfa-part3-Compositional-4592" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4594" href="../Compositional/#plfa_plfa-part3-Compositional-4594" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-4596" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4598" class="Argument">v₂</a> <a id="plfa_plfa-part3-Compositional-4601" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4603" href="../Compositional/#plfa_plfa-part3-Compositional-4603" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4605" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4607" href="../Compositional/#plfa_plfa-part3-Compositional-4607" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4609" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4611" href="../Compositional/#plfa_plfa-part3-Compositional-3980" class="Function">ℰƛ→ℱℰ</a><a id="plfa_plfa-part3-Compositional-4616" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4617" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4619" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4621" href="../Compositional/#plfa_plfa-part3-Compositional-4594" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4624" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-4626" href="../Compositional/#plfa_plfa-part3-Compositional-4603" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4628" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4630" href="../Compositional/#plfa_plfa-part3-Compositional-4607" class="Bound">d</a>
</pre><p>λ-等式的语义后退的方向甚至比前进的方向更容易证明，我们只需对值 <code>v</code> 进行归纳：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱℰ→ℰƛ"></a><a id="plfa_plfa-part3-Compositional-4850" href="../Compositional/#plfa_plfa-part3-Compositional-4850" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4856" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4858" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4860" href="../Compositional/#plfa_plfa-part3-Compositional-4860" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4861" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4863" href="../Compositional/#plfa_plfa-part3-Compositional-4863" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4865" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4867" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-4871" href="../Compositional/#plfa_plfa-part3-Compositional-4860" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4872" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4874" href="../Compositional/#plfa_plfa-part3-Compositional-4874" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4876" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4878" href="../Compositional/#plfa_plfa-part3-Compositional-4860" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4880" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4882" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4884" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4886" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4887" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4889" href="../Compositional/#plfa_plfa-part3-Compositional-4889" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-4891" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4893" href="../Denotational/#plfa_plfa-part3-Denotational-4969" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4898" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4902" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4904" href="../Compositional/#plfa_plfa-part3-Compositional-2251" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-4906" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4907" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4909" href="../Compositional/#plfa_plfa-part3-Compositional-4874" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4910" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4912" href="../Compositional/#plfa_plfa-part3-Compositional-4863" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4914" href="../Compositional/#plfa_plfa-part3-Compositional-4889" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-4920" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-4935" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4937" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4939" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4940" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4942" href="../Compositional/#plfa_plfa-part3-Compositional-4874" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4943" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4945" href="../Compositional/#plfa_plfa-part3-Compositional-4863" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4947" href="../Compositional/#plfa_plfa-part3-Compositional-4889" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-4949" href="../Compositional/#plfa_plfa-part3-Compositional-4850" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4955" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4956" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4958" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4960" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-4961" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4963" href="../Compositional/#plfa_plfa-part3-Compositional-4963" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4965" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4967" href="../Denotational/#plfa_plfa-part3-Denotational-11829" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Compositional-4975" href="../Compositional/#plfa_plfa-part3-Compositional-4850" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4981" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4982" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4984" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4986" href="../Compositional/#plfa_plfa-part3-Compositional-4986" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4989" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-4991" href="../Compositional/#plfa_plfa-part3-Compositional-4991" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4993" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4995" href="../Compositional/#plfa_plfa-part3-Compositional-4995" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4997" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4999" href="../Denotational/#plfa_plfa-part3-Denotational-11717" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Compositional-5007" href="../Compositional/#plfa_plfa-part3-Compositional-4995" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-5009" href="../Compositional/#plfa_plfa-part3-Compositional-4850" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5015" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-5016" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-5018" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5020" href="../Compositional/#plfa_plfa-part3-Compositional-5020" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-5023" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-5025" href="../Compositional/#plfa_plfa-part3-Compositional-5025" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-5027" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-5029" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-5031" href="../Compositional/#plfa_plfa-part3-Compositional-5031" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-5034" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-5036" href="../Compositional/#plfa_plfa-part3-Compositional-5036" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-5039" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-5041" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5043" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-5051" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5052" href="../Compositional/#plfa_plfa-part3-Compositional-4850" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5058" href="../Compositional/#plfa_plfa-part3-Compositional-5031" class="Bound">d1</a><a id="plfa_plfa-part3-Compositional-5060" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-5062" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5063" href="../Compositional/#plfa_plfa-part3-Compositional-4850" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5069" href="../Compositional/#plfa_plfa-part3-Compositional-5036" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-5071" class="Symbol">)</a>
</pre><p>因此，指称语义对 λ-抽象来说是可组合的，正如函数 <code>ℱ</code> 所证明的那样：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lam-equiv"></a><a id="plfa_plfa-part3-Compositional-5260" href="../Compositional/#plfa_plfa-part3-Compositional-5260" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-5270" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-5272" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-5274" href="../Compositional/#plfa_plfa-part3-Compositional-5274" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-5275" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-5277" href="../Compositional/#plfa_plfa-part3-Compositional-5277" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-5279" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-5281" href="../Compositional/#plfa_plfa-part3-Compositional-5274" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-5283" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-5285" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-5287" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-5289" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-5290" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-5294" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-5296" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-5298" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5299" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-5301" href="../Compositional/#plfa_plfa-part3-Compositional-5277" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-5302" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-5304" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-5306" href="../Compositional/#plfa_plfa-part3-Compositional-2251" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-5308" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5309" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-5311" href="../Compositional/#plfa_plfa-part3-Compositional-5277" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-5312" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-5314" href="../Compositional/#plfa_plfa-part3-Compositional-5260" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-5324" href="../Compositional/#plfa_plfa-part3-Compositional-5324" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-5326" href="../Compositional/#plfa_plfa-part3-Compositional-5326" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-5328" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5330" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-5332" href="../Compositional/#plfa_plfa-part3-Compositional-3980" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-5338" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-5340" href="../Compositional/#plfa_plfa-part3-Compositional-4850" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5346" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="函数应用的等式">函数应用的等式</h2><p>接下来我们填补关于函数应用的等式中的省略号。</p><pre><code>ℰ (M · N) ≃ ... ℰ M ... ℰ N ...</code></pre><p>为此我们需要定义一个函数，它接受语境 <code>Γ</code> 中的两个指称，并产生语境 <code>Γ</code> 中的另一个指称。我们将此函数命名为 <code>●</code>，以模拟应用语义 <code>L · M</code> 中非递归的部分。我们无法像处理 <code>ℱ</code> 那样简单地对值 <code>v</code> 进行递归来定义函数， 因为 <code>↦-elim</code> 这类的规则可应用于任何值。相反，我们将通过直接处理 <code>↦-elim</code> 和 <code>⊥-intro</code> 规则而忽略 <code>⊔-intro</code> 的方式来定义 <code>●</code>。这使得证明的前进方向变得更加困难， 而 <code>⊔-intro</code> 的情况说明了为什么 <code>⊑-dist</code> 规则很重要。</p><p>这样我们就定义了 <code>D₁</code> 应用于 <code>D₂</code>，记作 <code>D₁ ● D₂</code>，来包含 <code>⊥-intro</code> 规则中所有等价于 <code>⊥</code> 的值 <code>w</code>，以及对于 <code>↦-elim</code> 规则，在 <code>D₁</code> 中的条目 <code>v ↦ w</code> 的所有输出值 <code>w</code>，前提是它的输入值 <code>v</code> 在 <code>D₂</code> 中。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-6921" class="Keyword">infixl</a> <a id="plfa_plfa-part3-Compositional-6928" class="Number">7</a> <a id="plfa_plfa-part3-Compositional-6930" href="../Compositional/#plfa_plfa-part3-Compositional-6935" class="Function Operator">_●_</a>

<a id="plfa_plfa-part3-Compositional-_●_"></a><a id="plfa_plfa-part3-Compositional-6935" href="../Compositional/#plfa_plfa-part3-Compositional-6935" class="Function Operator">_●_</a> <a id="plfa_plfa-part3-Compositional-6939" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6941" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-6943" href="../Compositional/#plfa_plfa-part3-Compositional-6943" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-6944" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6946" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-6948" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-6959" href="../Compositional/#plfa_plfa-part3-Compositional-6943" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-6961" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-6963" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-6974" href="../Compositional/#plfa_plfa-part3-Compositional-6943" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-6976" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-6978" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-6989" href="../Compositional/#plfa_plfa-part3-Compositional-6943" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-6991" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6992" href="../Compositional/#plfa_plfa-part3-Compositional-6992" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-6995" href="../Compositional/#plfa_plfa-part3-Compositional-6935" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-6997" href="../Compositional/#plfa_plfa-part3-Compositional-6997" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-6999" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7001" href="../Compositional/#plfa_plfa-part3-Compositional-7001" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7003" href="../Compositional/#plfa_plfa-part3-Compositional-7003" class="Bound">w</a> <a id="plfa_plfa-part3-Compositional-7005" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7007" href="../Compositional/#plfa_plfa-part3-Compositional-7003" class="Bound">w</a> <a id="plfa_plfa-part3-Compositional-7009" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-7011" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Compositional-7013" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="plfa_plfa-part3-Compositional-7015" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Compositional-7018" href="../Compositional/#plfa_plfa-part3-Compositional-7018" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7020" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Compositional-7022" href="../Denotational/#plfa_plfa-part3-Denotational-4969" class="Datatype">Value</a> <a id="plfa_plfa-part3-Compositional-7028" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a><a id="plfa_plfa-part3-Compositional-7029" class="Symbol">(</a> <a id="plfa_plfa-part3-Compositional-7031" href="../Compositional/#plfa_plfa-part3-Compositional-6992" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-7034" href="../Compositional/#plfa_plfa-part3-Compositional-7001" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7036" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7037" href="../Compositional/#plfa_plfa-part3-Compositional-7018" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7039" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-7041" href="../Compositional/#plfa_plfa-part3-Compositional-7003" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-7042" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7044" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Compositional-7046" href="../Compositional/#plfa_plfa-part3-Compositional-6997" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-7049" href="../Compositional/#plfa_plfa-part3-Compositional-7001" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7051" href="../Compositional/#plfa_plfa-part3-Compositional-7018" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7053" class="Symbol">)</a>
</pre><p>如果你仔细观察一下，就会发现 <code>_●_</code> 运算符看起来像函数式程序员熟悉的 <code>apply</code> 操作：它接受两个参数，并将第一个参数应用于第二个参数。</p><p>接下来我们考虑应用的反演引理，它同样是应用的语义等式的前进方向。 下面是它的证明：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰ·→●ℰ"></a><a id="plfa_plfa-part3-Compositional-7750" href="../Compositional/#plfa_plfa-part3-Compositional-7750" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7756" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7758" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-7760" href="../Compositional/#plfa_plfa-part3-Compositional-7760" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-7761" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7763" href="../Compositional/#plfa_plfa-part3-Compositional-7763" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7765" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7767" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-7771" href="../Compositional/#plfa_plfa-part3-Compositional-7760" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-7772" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7774" href="../Compositional/#plfa_plfa-part3-Compositional-7774" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-7776" href="../Compositional/#plfa_plfa-part3-Compositional-7776" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-7778" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7780" href="../Compositional/#plfa_plfa-part3-Compositional-7760" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-7782" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-7784" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-7785" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7787" href="../Compositional/#plfa_plfa-part3-Compositional-7787" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7789" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7791" href="../Denotational/#plfa_plfa-part3-Denotational-4969" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-7796" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-7800" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-7802" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-7804" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7805" href="../Compositional/#plfa_plfa-part3-Compositional-7774" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-7807" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-7809" href="../Compositional/#plfa_plfa-part3-Compositional-7776" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-7810" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7812" href="../Compositional/#plfa_plfa-part3-Compositional-7763" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7814" href="../Compositional/#plfa_plfa-part3-Compositional-7787" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-7820" class="Comment">----------------</a>
  <a id="plfa_plfa-part3-Compositional-7839" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-7841" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7842" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-7844" href="../Compositional/#plfa_plfa-part3-Compositional-7774" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-7846" href="../Compositional/#plfa_plfa-part3-Compositional-6935" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-7848" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-7850" href="../Compositional/#plfa_plfa-part3-Compositional-7776" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-7851" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7853" href="../Compositional/#plfa_plfa-part3-Compositional-7763" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7855" href="../Compositional/#plfa_plfa-part3-Compositional-7787" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-7857" href="../Compositional/#plfa_plfa-part3-Compositional-7750" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7863" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7864" href="../Denotational/#plfa_plfa-part3-Denotational-11595" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Compositional-7870" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-7871" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-7873" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7875" href="../Compositional/#plfa_plfa-part3-Compositional-7875" class="Bound">v′</a><a id="plfa_plfa-part3-Compositional-7877" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-7879" href="../Compositional/#plfa_plfa-part3-Compositional-7879" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-7882" href="../Compositional/#plfa_plfa-part3-Compositional-7882" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-7884" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7886" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7888" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-7893" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7895" href="../Compositional/#plfa_plfa-part3-Compositional-7875" class="Bound">v′</a> <a id="plfa_plfa-part3-Compositional-7898" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7900" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7902" href="../Compositional/#plfa_plfa-part3-Compositional-7879" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-7905" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7907" href="../Compositional/#plfa_plfa-part3-Compositional-7882" class="Bound">d₂</a> <a id="plfa_plfa-part3-Compositional-7910" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-7912" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-7914" href="../Compositional/#plfa_plfa-part3-Compositional-7750" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7920" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-7921" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-7923" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7925" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-7926" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-7928" href="../Denotational/#plfa_plfa-part3-Denotational-11829" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-7936" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7938" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-7943" href="../Denotational/#plfa_plfa-part3-Denotational-5471" class="InductiveConstructor">⊑-bot</a>
<a id="plfa_plfa-part3-Compositional-7949" href="../Compositional/#plfa_plfa-part3-Compositional-7750" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7955" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-7956" href="../Compositional/#plfa_plfa-part3-Compositional-7956" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-7957" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7959" href="../Compositional/#plfa_plfa-part3-Compositional-7959" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-7960" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7962" href="../Compositional/#plfa_plfa-part3-Compositional-7962" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-7963" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7965" href="../Compositional/#plfa_plfa-part3-Compositional-7965" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-7966" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7968" href="../Compositional/#plfa_plfa-part3-Compositional-7968" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-7969" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-7971" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7972" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Compositional-7979" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-7980" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-7982" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7984" href="../Compositional/#plfa_plfa-part3-Compositional-7984" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-7986" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7988" class="Argument">w</a> <a id="plfa_plfa-part3-Compositional-7990" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7992" href="../Compositional/#plfa_plfa-part3-Compositional-7992" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-7994" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-7996" href="../Compositional/#plfa_plfa-part3-Compositional-7996" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-7999" href="../Compositional/#plfa_plfa-part3-Compositional-7999" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-8001" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Compositional-8007" class="Keyword">with</a> <a id="plfa_plfa-part3-Compositional-8012" href="../Compositional/#plfa_plfa-part3-Compositional-7750" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8018" href="../Compositional/#plfa_plfa-part3-Compositional-7996" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-8021" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8023" href="../Compositional/#plfa_plfa-part3-Compositional-7750" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8029" href="../Compositional/#plfa_plfa-part3-Compositional-7999" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Compositional-8032" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8036" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8038" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8043" href="../Compositional/#plfa_plfa-part3-Compositional-8043" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8047" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8049" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8054" href="../Compositional/#plfa_plfa-part3-Compositional-8054" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8058" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8060" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8065" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8066" href="../Denotational/#plfa_plfa-part3-Denotational-5496" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-8075" href="../Compositional/#plfa_plfa-part3-Compositional-8043" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8079" href="../Compositional/#plfa_plfa-part3-Compositional-8054" class="Bound">lt2</a><a id="plfa_plfa-part3-Compositional-8082" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-8084" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8088" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8090" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8095" href="../Compositional/#plfa_plfa-part3-Compositional-8095" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8099" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8101" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8106" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8108" href="../Compositional/#plfa_plfa-part3-Compositional-8108" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8112" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8114" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8116" href="../Compositional/#plfa_plfa-part3-Compositional-8116" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8122" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8124" href="../Compositional/#plfa_plfa-part3-Compositional-8124" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8129" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8131" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8133" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8141" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8146" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8148" href="../Compositional/#plfa_plfa-part3-Compositional-8108" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8152" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8154" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8156" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8160" href="../Compositional/#plfa_plfa-part3-Compositional-8116" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8166" href="../Compositional/#plfa_plfa-part3-Compositional-8192" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8169" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8171" href="../Compositional/#plfa_plfa-part3-Compositional-8124" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8176" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8178" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part3-Compositional-8186" class="Keyword">where</a> <a id="plfa_plfa-part3-Compositional-8192" href="../Compositional/#plfa_plfa-part3-Compositional-8192" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8195" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-8197" href="../Compositional/#plfa_plfa-part3-Compositional-8108" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8201" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8203" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8204" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8207" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-8209" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-8211" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8213" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-8215" href="../Compositional/#plfa_plfa-part3-Compositional-8108" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8219" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8221" class="Bound">v₂</a>
            <a id="plfa_plfa-part3-Compositional-8236" href="../Compositional/#plfa_plfa-part3-Compositional-8192" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8239" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8241" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8242" href="../Denotational/#plfa_plfa-part3-Denotational-5797" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-8248" href="../Denotational/#plfa_plfa-part3-Denotational-6832" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8255" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8256" href="../Denotational/#plfa_plfa-part3-Denotational-5496" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-8265" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8266" href="../Denotational/#plfa_plfa-part3-Denotational-5726" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-8274" href="../Compositional/#plfa_plfa-part3-Compositional-8095" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8278" href="../Denotational/#plfa_plfa-part3-Denotational-5471" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-8283" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8285" href="../Denotational/#plfa_plfa-part3-Denotational-6832" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Compositional-8291" class="Symbol">))</a>
<a id="plfa_plfa-part3-Compositional-8294" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8298" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8300" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8305" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8307" href="../Compositional/#plfa_plfa-part3-Compositional-8307" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8311" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8313" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8315" href="../Compositional/#plfa_plfa-part3-Compositional-8315" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8321" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8323" href="../Compositional/#plfa_plfa-part3-Compositional-8323" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8328" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8330" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8332" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8334" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8339" href="../Compositional/#plfa_plfa-part3-Compositional-8339" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8343" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8351" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8356" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8358" href="../Compositional/#plfa_plfa-part3-Compositional-8307" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8362" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8364" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8366" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8370" href="../Compositional/#plfa_plfa-part3-Compositional-8315" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8376" href="../Compositional/#plfa_plfa-part3-Compositional-8402" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8379" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8381" href="../Compositional/#plfa_plfa-part3-Compositional-8323" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8386" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8388" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part3-Compositional-8396" class="Keyword">where</a> <a id="plfa_plfa-part3-Compositional-8402" href="../Compositional/#plfa_plfa-part3-Compositional-8402" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8405" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-8407" href="../Compositional/#plfa_plfa-part3-Compositional-8307" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8411" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8413" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8414" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8417" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-8419" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-8421" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8423" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-8425" href="../Compositional/#plfa_plfa-part3-Compositional-8307" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8429" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8431" class="Bound">v₁</a>
            <a id="plfa_plfa-part3-Compositional-8446" href="../Compositional/#plfa_plfa-part3-Compositional-8402" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8449" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8451" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8452" href="../Denotational/#plfa_plfa-part3-Denotational-5797" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-8458" href="../Denotational/#plfa_plfa-part3-Denotational-6832" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8465" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8466" href="../Denotational/#plfa_plfa-part3-Denotational-5496" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-8475" href="../Denotational/#plfa_plfa-part3-Denotational-6832" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8482" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8483" href="../Denotational/#plfa_plfa-part3-Denotational-5726" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-8491" href="../Compositional/#plfa_plfa-part3-Compositional-8339" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8495" href="../Denotational/#plfa_plfa-part3-Denotational-5471" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-8500" class="Symbol">)))</a>
<a id="plfa_plfa-part3-Compositional-8504" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8508" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8510" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8515" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8517" href="../Compositional/#plfa_plfa-part3-Compositional-8517" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8521" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8523" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8525" href="../Compositional/#plfa_plfa-part3-Compositional-8525" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8531" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8533" href="../Compositional/#plfa_plfa-part3-Compositional-8533" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8538" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8540" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8542" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8544" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8549" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8551" href="../Compositional/#plfa_plfa-part3-Compositional-8551" class="Bound">v₁′′</a> <a id="plfa_plfa-part3-Compositional-8556" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8558" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8560" href="../Compositional/#plfa_plfa-part3-Compositional-8560" class="Bound">L↓v12′</a> <a id="plfa_plfa-part3-Compositional-8567" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8569" href="../Compositional/#plfa_plfa-part3-Compositional-8569" class="Bound">M↓v3′</a> <a id="plfa_plfa-part3-Compositional-8575" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8577" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8579" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8587" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-8591" href="../Compositional/#plfa_plfa-part3-Compositional-8591" class="Bound">L↓⊔</a> <a id="plfa_plfa-part3-Compositional-8595" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8597" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-8605" href="../Compositional/#plfa_plfa-part3-Compositional-8525" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8611" href="../Compositional/#plfa_plfa-part3-Compositional-8560" class="Bound">L↓v12′</a> <a id="plfa_plfa-part3-Compositional-8618" class="Keyword">in</a>
      <a id="plfa_plfa-part3-Compositional-8627" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-8631" href="../Compositional/#plfa_plfa-part3-Compositional-8631" class="Bound">M↓⊔</a> <a id="plfa_plfa-part3-Compositional-8635" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8637" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-8645" href="../Compositional/#plfa_plfa-part3-Compositional-8533" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8650" href="../Compositional/#plfa_plfa-part3-Compositional-8569" class="Bound">M↓v3′</a> <a id="plfa_plfa-part3-Compositional-8656" class="Keyword">in</a>
      <a id="plfa_plfa-part3-Compositional-8665" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8670" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8672" href="../Compositional/#plfa_plfa-part3-Compositional-8517" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8676" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-8678" href="../Compositional/#plfa_plfa-part3-Compositional-8551" class="Bound">v₁′′</a> <a id="plfa_plfa-part3-Compositional-8683" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8685" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8687" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8691" href="../Compositional/#plfa_plfa-part3-Compositional-8591" class="Bound">L↓⊔</a> <a id="plfa_plfa-part3-Compositional-8695" href="../Denotational/#plfa_plfa-part3-Denotational-7612" class="Function">⊔↦⊔-dist</a> <a id="plfa_plfa-part3-Compositional-8704" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8706" href="../Compositional/#plfa_plfa-part3-Compositional-8631" class="Bound">M↓⊔</a> <a id="plfa_plfa-part3-Compositional-8710" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8712" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-8714" href="../Compositional/#plfa_plfa-part3-Compositional-7750" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8720" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-8721" href="../Compositional/#plfa_plfa-part3-Compositional-8721" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-8722" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8724" href="../Compositional/#plfa_plfa-part3-Compositional-8724" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-8725" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8727" href="../Compositional/#plfa_plfa-part3-Compositional-8727" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-8728" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8730" href="../Compositional/#plfa_plfa-part3-Compositional-8730" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-8731" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8733" href="../Compositional/#plfa_plfa-part3-Compositional-8733" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-8734" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-8736" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8737" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8741" href="../Compositional/#plfa_plfa-part3-Compositional-8741" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-8743" href="../Compositional/#plfa_plfa-part3-Compositional-8743" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-8745" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Compositional-8751" class="Keyword">with</a> <a id="plfa_plfa-part3-Compositional-8756" href="../Compositional/#plfa_plfa-part3-Compositional-7750" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8762" href="../Compositional/#plfa_plfa-part3-Compositional-8741" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-8764" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8768" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8770" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8775" href="../Compositional/#plfa_plfa-part3-Compositional-8775" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8779" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8781" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8786" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8787" href="../Denotational/#plfa_plfa-part3-Denotational-5726" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-8795" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-8798" href="../Compositional/#plfa_plfa-part3-Compositional-8775" class="Bound">lt2</a><a id="plfa_plfa-part3-Compositional-8801" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-8803" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8807" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8809" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8814" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8816" href="../Compositional/#plfa_plfa-part3-Compositional-8816" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8819" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8821" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8823" href="../Compositional/#plfa_plfa-part3-Compositional-8823" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8829" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8831" href="../Compositional/#plfa_plfa-part3-Compositional-8831" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8836" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8838" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8840" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8848" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8853" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8855" href="../Compositional/#plfa_plfa-part3-Compositional-8816" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8858" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8860" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8862" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8866" href="../Compositional/#plfa_plfa-part3-Compositional-8823" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8872" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8873" href="../Denotational/#plfa_plfa-part3-Denotational-5797" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-8879" href="../Denotational/#plfa_plfa-part3-Denotational-6832" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8886" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-8888" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8890" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8892" href="../Compositional/#plfa_plfa-part3-Compositional-8831" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8897" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8899" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a>
</pre><p>我们通过对语义进行归纳来证明：</p><ul><li><p>对于 <code>↦-elim</code> 的情况，我们有 <code>γ ⊢ L ↓ (v′ ↦ v)</code> 和 <code>γ ⊢ M ↓ v′</code>， 只需证明 <code>(ℰ L ● ℰ M) γ v</code> 即可。</p></li><li><p>对于 <code>⊥-intro</code> 的情况，我们有 <code>v = ⊥</code>，于是可推出 <code>v ⊑ ⊥</code>。</p></li></ul><ul><li><p>对于 <code>⊔-intro</code> 的情况，我们有 <code>ℰ (L · M) γ v₁</code> 和 <code>ℰ (L · M) γ v₂</code>， 且需要证明 <code>(ℰ L ● ℰ M) γ (v₁ ⊔ v₂)</code>。根据归纳假设，我们有 <code>(ℰ L ● ℰ M) γ v₁</code> 和 <code>(ℰ L ● ℰ M) γ v₂</code>，于是我们需要考虑四种子情况：</p><ul><li><p>假设 <code>v₁ ⊑ ⊥</code> 且 <code>v₂ ⊑ ⊥</code>，那么 <code>v₁ ⊔ v₂ ⊑ ⊥</code>。</p></li><li><p>假设 <code>v₁ ⊑ ⊥</code>，<code>γ ⊢ L ↓ v₁′ ↦ v₂</code> 且 <code>γ ⊢ M ↓ v₁′</code>， 根据 <code>sub</code> 规则我们有 <code>γ ⊢ L ↓ v₁′ ↦ (v₁ ⊔ v₂)</code>，因为 <code>v₁′ ↦ (v₁ ⊔ v₂) ⊑ v₁′ ↦ v₂</code>。</p></li><li><p>假设 <code>γ ⊢ L ↓ v₁′ ↦ v₁</code>，<code>γ ⊢ M ↓ v₁′</code> 且 <code>v₂ ⊑ ⊥</code>， 根据 <code>sub</code> 规则我们有 <code>γ ⊢ L ↓ v₁′ ↦ (v₁ ⊔ v₂)</code>，因为 <code>v₁′ ↦ (v₁ ⊔ v₂) ⊑ v₁′ ↦ v₁</code>。</p></li><li><p>假设 <code>γ ⊢ L ↓ v₁′′ ↦ v₁, γ ⊢ M ↓ v₁′′</code>， <code>γ ⊢ L ↓ v₁′ ↦ v₂</code> 且 <code>γ ⊢ M ↓ v₁′</code>， 这种情况是最有趣的部分。通过使用两次 <code>⊔-intro</code>，我们有 <code>γ ⊢ L ↓ (v₁′ ↦ v₂) ⊔ (v₁′′ ↦ v₁)</code> 且 <code>γ ⊢ M ↓ (v₁′ ⊔ v₁′′)</code>。但它对 <code>ℰ L ● ℰ M</code> 来说与我们的需要尚不匹配， 因为 <code>L</code> 的结果必须是一个输入条目为 <code>v₁′ ⊔ v₁′′</code> 的 <code>↦</code>。 因此我们需要使用 <code>sub</code> 规则来得到 <code>γ ⊢ L ↓ (v₁′ ⊔ v₁′′) ↦ (v₁ ⊔ v₂)</code>； 使用 <code>⊔↦⊔-dist</code> 引理（感谢 <code>⊑-dist</code> 规则）来证明：</p><pre><code>  (v₁′ ⊔ v₁′′) ↦ (v₁ ⊔ v₂) ⊑ (v₁′ ↦ v₂) ⊔ (v₁′′ ↦ v₁)</code></pre><p>这样我们就证明了该情况所有的子情况。</p></li></ul></li><li><p>对于情况 <code>sub</code>，我们有 <code>Γ ⊢ L · M ↓ v₁</code> 且 <code>v ⊑ v₁</code>。 根据归纳假设，我们有 <code>(ℰ L ● ℰ M) γ v₁</code>，于是我们需要考虑两种子情况：</p><ul><li>假设 <code>v₁ ⊑ ⊥</code>，我们可推出 <code>v ⊑ ⊥</code>。</li><li>假设 <code>Γ ⊢ L ↓ v′ → v₁</code> 且 <code>Γ ⊢ M ↓ v′</code>，我们可根据规则 <code>sub</code> 推出 <code>Γ ⊢ L ↓ v′ → v</code>，因为 <code>v′ → v ⊑ v′ → v₁</code>。</li></ul></li></ul><p>后退的方向可通过在前提 <code>(ℰ L ● ℰ M) γ v</code> 下进行情况分析来证明。 对于情况 <code>v ⊑ ⊥</code>，我们可通过规则 <code>⊥-intro</code> 得到 <code>Γ ⊢ L · M ↓ ⊥</code>。 否则，我们可直接通过规则 <code>↦-elim</code> 得出结论：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-●ℰ→ℰ·"></a><a id="plfa_plfa-part3-Compositional-12132" href="../Compositional/#plfa_plfa-part3-Compositional-12132" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12138" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12140" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12142" href="../Compositional/#plfa_plfa-part3-Compositional-12142" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12143" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12145" href="../Compositional/#plfa_plfa-part3-Compositional-12145" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12147" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12149" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-12153" href="../Compositional/#plfa_plfa-part3-Compositional-12142" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12154" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12156" href="../Compositional/#plfa_plfa-part3-Compositional-12156" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12158" href="../Compositional/#plfa_plfa-part3-Compositional-12158" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-12160" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12162" href="../Compositional/#plfa_plfa-part3-Compositional-12142" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-12164" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-12166" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-12167" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12169" href="../Compositional/#plfa_plfa-part3-Compositional-12169" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12170" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12174" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12176" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12177" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12179" href="../Compositional/#plfa_plfa-part3-Compositional-12156" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12181" href="../Compositional/#plfa_plfa-part3-Compositional-6935" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12183" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12185" href="../Compositional/#plfa_plfa-part3-Compositional-12158" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12186" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12188" href="../Compositional/#plfa_plfa-part3-Compositional-12145" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12190" href="../Compositional/#plfa_plfa-part3-Compositional-12169" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-12196" class="Comment">----------------</a>
  <a id="plfa_plfa-part3-Compositional-12215" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12217" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12219" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12220" href="../Compositional/#plfa_plfa-part3-Compositional-12156" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12222" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-12224" href="../Compositional/#plfa_plfa-part3-Compositional-12158" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12225" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12227" href="../Compositional/#plfa_plfa-part3-Compositional-12145" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12229" href="../Compositional/#plfa_plfa-part3-Compositional-12169" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-12231" href="../Compositional/#plfa_plfa-part3-Compositional-12132" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12237" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12238" href="../Compositional/#plfa_plfa-part3-Compositional-12238" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-12239" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12241" href="../Compositional/#plfa_plfa-part3-Compositional-12241" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12242" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12244" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12245" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-12250" href="../Compositional/#plfa_plfa-part3-Compositional-12250" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-12252" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12254" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12256" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-12260" href="../Denotational/#plfa_plfa-part3-Denotational-11829" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-12268" href="../Compositional/#plfa_plfa-part3-Compositional-12250" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-12271" href="../Compositional/#plfa_plfa-part3-Compositional-12132" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12277" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12278" href="../Compositional/#plfa_plfa-part3-Compositional-12278" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-12279" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12281" href="../Compositional/#plfa_plfa-part3-Compositional-12281" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12282" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12284" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12285" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-12290" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12292" href="../Compositional/#plfa_plfa-part3-Compositional-12292" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-12295" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12297" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12299" href="../Compositional/#plfa_plfa-part3-Compositional-12299" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-12302" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12304" href="../Compositional/#plfa_plfa-part3-Compositional-12304" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-12307" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-12309" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-12310" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12312" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12314" href="../Denotational/#plfa_plfa-part3-Denotational-11595" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Compositional-12321" href="../Compositional/#plfa_plfa-part3-Compositional-12299" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-12324" href="../Compositional/#plfa_plfa-part3-Compositional-12304" class="Bound">d2</a>
</pre><p>这样我们就通过 <code>●</code> 函数的相关定理，证明了对于函数应用来说，语义是可组合的。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-app-equiv"></a><a id="plfa_plfa-part3-Compositional-12518" href="../Compositional/#plfa_plfa-part3-Compositional-12518" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-12528" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12530" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12532" href="../Compositional/#plfa_plfa-part3-Compositional-12532" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12533" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12535" href="../Compositional/#plfa_plfa-part3-Compositional-12535" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12537" href="../Compositional/#plfa_plfa-part3-Compositional-12537" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-12539" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12541" href="../Compositional/#plfa_plfa-part3-Compositional-12532" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-12543" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-12545" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-12546" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12550" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12552" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12554" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12555" href="../Compositional/#plfa_plfa-part3-Compositional-12535" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12557" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-12559" href="../Compositional/#plfa_plfa-part3-Compositional-12537" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12560" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12562" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12564" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12565" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12567" href="../Compositional/#plfa_plfa-part3-Compositional-12535" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-12568" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12570" href="../Compositional/#plfa_plfa-part3-Compositional-6935" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12572" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12573" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12575" href="../Compositional/#plfa_plfa-part3-Compositional-12537" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12576" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-12578" href="../Compositional/#plfa_plfa-part3-Compositional-12518" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-12588" href="../Compositional/#plfa_plfa-part3-Compositional-12588" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12590" href="../Compositional/#plfa_plfa-part3-Compositional-12590" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12592" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12594" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12596" href="../Compositional/#plfa_plfa-part3-Compositional-7750" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-12602" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12604" href="../Compositional/#plfa_plfa-part3-Compositional-12132" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12610" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a>
</pre><p>我们还需要一个变量的反演引理：若 <code>Γ ⊢ x ↓ v</code>，则 <code>v ⊑ γ x</code>。 它的证明就是对语义的直接归纳：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-var-inv"></a><a id="plfa_plfa-part3-Compositional-12832" href="../Compositional/#plfa_plfa-part3-Compositional-12832" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12840" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12842" class="Symbol">∀</a> <a id="plfa_plfa-part3-Compositional-12844" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12845" href="../Compositional/#plfa_plfa-part3-Compositional-12845" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-12847" href="../Compositional/#plfa_plfa-part3-Compositional-12847" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12849" href="../Compositional/#plfa_plfa-part3-Compositional-12849" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-12850" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12852" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12853" href="../Compositional/#plfa_plfa-part3-Compositional-12853" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12855" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12857" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-12861" href="../Compositional/#plfa_plfa-part3-Compositional-12845" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12862" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12866" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12868" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12870" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12871" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-12873" href="../Compositional/#plfa_plfa-part3-Compositional-12849" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-12874" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12876" href="../Compositional/#plfa_plfa-part3-Compositional-12853" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12878" href="../Compositional/#plfa_plfa-part3-Compositional-12847" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-12884" class="Comment">-------------------</a>
  <a id="plfa_plfa-part3-Compositional-12906" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12908" href="../Compositional/#plfa_plfa-part3-Compositional-12847" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12910" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-12912" href="../Compositional/#plfa_plfa-part3-Compositional-12853" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12914" href="../Compositional/#plfa_plfa-part3-Compositional-12849" class="Bound">x</a>
<a id="plfa_plfa-part3-Compositional-12916" href="../Compositional/#plfa_plfa-part3-Compositional-12832" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12924" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12925" href="../Denotational/#plfa_plfa-part3-Denotational-11520" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Compositional-12928" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12930" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12932" href="../Denotational/#plfa_plfa-part3-Denotational-6832" class="Function">⊑-refl</a>
<a id="plfa_plfa-part3-Compositional-12939" href="../Compositional/#plfa_plfa-part3-Compositional-12832" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12947" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12948" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-12956" href="../Compositional/#plfa_plfa-part3-Compositional-12956" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-12959" href="../Compositional/#plfa_plfa-part3-Compositional-12959" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-12961" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12963" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12965" href="../Denotational/#plfa_plfa-part3-Denotational-5496" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-12974" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12975" href="../Compositional/#plfa_plfa-part3-Compositional-12832" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12983" href="../Compositional/#plfa_plfa-part3-Compositional-12956" class="Bound">d₁</a><a id="plfa_plfa-part3-Compositional-12985" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12987" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12988" href="../Compositional/#plfa_plfa-part3-Compositional-12832" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12996" href="../Compositional/#plfa_plfa-part3-Compositional-12959" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-12998" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-13000" href="../Compositional/#plfa_plfa-part3-Compositional-12832" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13008" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13009" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-13013" href="../Compositional/#plfa_plfa-part3-Compositional-13013" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-13015" href="../Compositional/#plfa_plfa-part3-Compositional-13015" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-13017" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13019" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-13021" href="../Denotational/#plfa_plfa-part3-Denotational-5726" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-13029" href="../Compositional/#plfa_plfa-part3-Compositional-13015" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-13032" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13033" href="../Compositional/#plfa_plfa-part3-Compositional-12832" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13041" href="../Compositional/#plfa_plfa-part3-Compositional-13013" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-13042" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-13044" href="../Compositional/#plfa_plfa-part3-Compositional-12832" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13052" href="../Denotational/#plfa_plfa-part3-Denotational-11829" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-13060" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-13062" href="../Denotational/#plfa_plfa-part3-Denotational-5471" class="InductiveConstructor">⊑-bot</a>
</pre><p>为了完善语义等式，我们建立以下变量等式：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-var-equiv"></a><a id="plfa_plfa-part3-Compositional-13196" href="../Compositional/#plfa_plfa-part3-Compositional-13196" class="Function">var-equiv</a> <a id="plfa_plfa-part3-Compositional-13206" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13208" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-13210" href="../Compositional/#plfa_plfa-part3-Compositional-13210" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-13211" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13213" href="../Compositional/#plfa_plfa-part3-Compositional-13213" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-13215" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13217" href="../Compositional/#plfa_plfa-part3-Compositional-13210" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13219" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Compositional-13221" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-13222" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13224" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13226" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13228" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13229" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-13231" href="../Compositional/#plfa_plfa-part3-Compositional-13213" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-13232" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13234" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-13236" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-13239" href="../Compositional/#plfa_plfa-part3-Compositional-13239" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-13241" href="../Compositional/#plfa_plfa-part3-Compositional-13241" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-13243" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13245" href="../Compositional/#plfa_plfa-part3-Compositional-13241" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-13247" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-13249" href="../Compositional/#plfa_plfa-part3-Compositional-13239" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-13251" href="../Compositional/#plfa_plfa-part3-Compositional-13213" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-13252" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-13254" href="../Compositional/#plfa_plfa-part3-Compositional-13196" class="Function">var-equiv</a> <a id="plfa_plfa-part3-Compositional-13264" href="../Compositional/#plfa_plfa-part3-Compositional-13264" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-13266" href="../Compositional/#plfa_plfa-part3-Compositional-13266" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-13268" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-13270" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-13272" href="../Compositional/#plfa_plfa-part3-Compositional-12832" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13280" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-13282" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-13285" href="../Compositional/#plfa_plfa-part3-Compositional-13285" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-13288" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13290" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-13294" href="../Denotational/#plfa_plfa-part3-Denotational-11520" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Compositional-13298" href="../Compositional/#plfa_plfa-part3-Compositional-13285" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-13300" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13302" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="合同性">合同性</h2><p>本章的主要工作已经完成：我们建立了语义等式来展示指称语义是如何组合的。 在本节和下一节中，我们将利用这些等式来证明一些推论：指称相等满足<strong>合同性（congruence）</strong>， 并证明指称具有<strong>可组合性（compositionality property）</strong>， 该性质指出在同一语境中，两个指称相等的项会产生两个指称相等的程序 。</p><p>我们首先证明指称相等对 λ-抽象满足合同性：<code>ℰ N ≃ ℰ N′</code> 蕴含 <code>ℰ (ƛ N) ≃ ℰ (ƛ N′)</code>。我们用 <code>lam-equiv</code> 等式将这个问题简化为 <code>ℱ</code> 是否满足合同性：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱ-cong"></a><a id="plfa_plfa-part3-Compositional-14333" href="../Compositional/#plfa_plfa-part3-Compositional-14333" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-14340" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14342" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-14344" href="../Compositional/#plfa_plfa-part3-Compositional-14344" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14345" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14347" href="../Compositional/#plfa_plfa-part3-Compositional-14347" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14349" href="../Compositional/#plfa_plfa-part3-Compositional-14349" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14352" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14354" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-14365" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14366" href="../Compositional/#plfa_plfa-part3-Compositional-14344" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14368" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14370" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-14371" class="Symbol">)}</a>
  <a id="plfa_plfa-part3-Compositional-14376" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14378" href="../Compositional/#plfa_plfa-part3-Compositional-14347" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14380" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-14382" href="../Compositional/#plfa_plfa-part3-Compositional-14349" class="Bound">D′</a>
    <a id="plfa_plfa-part3-Compositional-14389" class="Comment">-----------</a>
  <a id="plfa_plfa-part3-Compositional-14403" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14405" href="../Compositional/#plfa_plfa-part3-Compositional-2251" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14407" href="../Compositional/#plfa_plfa-part3-Compositional-14347" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14409" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-14411" href="../Compositional/#plfa_plfa-part3-Compositional-2251" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14413" href="../Compositional/#plfa_plfa-part3-Compositional-14349" class="Bound">D′</a>
<a id="plfa_plfa-part3-Compositional-14416" href="../Compositional/#plfa_plfa-part3-Compositional-14333" class="Function">ℱ-cong</a><a id="plfa_plfa-part3-Compositional-14422" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14423" href="../Compositional/#plfa_plfa-part3-Compositional-14423" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14424" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14426" href="../Compositional/#plfa_plfa-part3-Compositional-14426" class="Bound">D≃D′</a> <a id="plfa_plfa-part3-Compositional-14431" href="../Compositional/#plfa_plfa-part3-Compositional-14431" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14433" href="../Compositional/#plfa_plfa-part3-Compositional-14433" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-14435" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-14439" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-14441" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-14444" href="../Compositional/#plfa_plfa-part3-Compositional-14444" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14446" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14448" href="../Compositional/#plfa_plfa-part3-Compositional-14511" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14450" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14451" href="../Compositional/#plfa_plfa-part3-Compositional-14431" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14452" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14454" href="../Compositional/#plfa_plfa-part3-Compositional-14433" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14455" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14457" href="../Compositional/#plfa_plfa-part3-Compositional-14444" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14459" href="../Compositional/#plfa_plfa-part3-Compositional-14426" class="Bound">D≃D′</a><a id="plfa_plfa-part3-Compositional-14463" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14465" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14467" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-14470" href="../Compositional/#plfa_plfa-part3-Compositional-14470" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14472" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14474" href="../Compositional/#plfa_plfa-part3-Compositional-14511" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14476" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14477" href="../Compositional/#plfa_plfa-part3-Compositional-14431" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14478" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14480" href="../Compositional/#plfa_plfa-part3-Compositional-14433" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14481" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14483" href="../Compositional/#plfa_plfa-part3-Compositional-14470" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14485" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14486" href="../Denotational/#plfa_plfa-part3-Denotational-22805" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-14492" href="../Compositional/#plfa_plfa-part3-Compositional-14426" class="Bound">D≃D′</a><a id="plfa_plfa-part3-Compositional-14496" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-14499" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Compositional-14503" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-14511" href="../Compositional/#plfa_plfa-part3-Compositional-14511" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14514" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14516" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-14518" href="../Compositional/#plfa_plfa-part3-Compositional-14518" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14520" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14522" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-14526" href="../Compositional/#plfa_plfa-part3-Compositional-14423" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14527" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14529" href="../Compositional/#plfa_plfa-part3-Compositional-14529" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14530" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14532" href="../Compositional/#plfa_plfa-part3-Compositional-14532" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14534" href="../Compositional/#plfa_plfa-part3-Compositional-14534" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14537" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14539" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-14550" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14551" href="../Compositional/#plfa_plfa-part3-Compositional-14423" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14553" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14555" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-14556" class="Symbol">)}</a>
    <a id="plfa_plfa-part3-Compositional-14563" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14565" href="../Compositional/#plfa_plfa-part3-Compositional-2251" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14567" href="../Compositional/#plfa_plfa-part3-Compositional-14532" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14569" href="../Compositional/#plfa_plfa-part3-Compositional-14518" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14571" href="../Compositional/#plfa_plfa-part3-Compositional-14529" class="Bound">v</a>  <a id="plfa_plfa-part3-Compositional-14574" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-14577" href="../Compositional/#plfa_plfa-part3-Compositional-14532" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14579" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-14581" href="../Compositional/#plfa_plfa-part3-Compositional-14534" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14584" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14586" href="../Compositional/#plfa_plfa-part3-Compositional-2251" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14588" href="../Compositional/#plfa_plfa-part3-Compositional-14534" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14591" href="../Compositional/#plfa_plfa-part3-Compositional-14518" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14593" href="../Compositional/#plfa_plfa-part3-Compositional-14529" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-14597" href="../Compositional/#plfa_plfa-part3-Compositional-14511" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14600" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14601" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-14603" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14605" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-14606" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14608" href="../Compositional/#plfa_plfa-part3-Compositional-14608" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-14611" href="../Compositional/#plfa_plfa-part3-Compositional-14611" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14615" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14617" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a>
  <a id="plfa_plfa-part3-Compositional-14622" href="../Compositional/#plfa_plfa-part3-Compositional-14511" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14625" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14626" href="../Compositional/#plfa_plfa-part3-Compositional-14626" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14627" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14629" href="../Compositional/#plfa_plfa-part3-Compositional-14629" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-14631" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-14633" href="../Compositional/#plfa_plfa-part3-Compositional-14633" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14634" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14636" href="../Compositional/#plfa_plfa-part3-Compositional-14636" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-14639" href="../Compositional/#plfa_plfa-part3-Compositional-14639" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14643" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14645" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-14651" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14652" href="../Compositional/#plfa_plfa-part3-Compositional-14639" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14656" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14657" href="../Compositional/#plfa_plfa-part3-Compositional-14626" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14659" href="../Denotational/#plfa_plfa-part3-Denotational-8930" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-14662" href="../Compositional/#plfa_plfa-part3-Compositional-14629" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14663" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14665" href="../Compositional/#plfa_plfa-part3-Compositional-14633" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14666" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14668" href="../Compositional/#plfa_plfa-part3-Compositional-14636" class="Bound">fd</a>
  <a id="plfa_plfa-part3-Compositional-14673" href="../Compositional/#plfa_plfa-part3-Compositional-14511" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14676" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14677" href="../Compositional/#plfa_plfa-part3-Compositional-14677" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14678" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14680" href="../Compositional/#plfa_plfa-part3-Compositional-14680" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-14682" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-14684" href="../Compositional/#plfa_plfa-part3-Compositional-14684" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14685" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14687" href="../Compositional/#plfa_plfa-part3-Compositional-14687" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-14690" href="../Compositional/#plfa_plfa-part3-Compositional-14690" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14694" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14696" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-14698" href="../Compositional/#plfa_plfa-part3-Compositional-14511" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14700" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14701" href="../Compositional/#plfa_plfa-part3-Compositional-14677" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14702" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14704" href="../Compositional/#plfa_plfa-part3-Compositional-14680" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-14705" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14707" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14708" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-14714" href="../Compositional/#plfa_plfa-part3-Compositional-14687" class="Bound">fd</a><a id="plfa_plfa-part3-Compositional-14716" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14718" href="../Compositional/#plfa_plfa-part3-Compositional-14690" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14722" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14724" href="../Compositional/#plfa_plfa-part3-Compositional-14511" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14726" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14727" href="../Compositional/#plfa_plfa-part3-Compositional-14677" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14728" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14730" href="../Compositional/#plfa_plfa-part3-Compositional-14684" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14731" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14733" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14734" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="plfa_plfa-part3-Compositional-14740" href="../Compositional/#plfa_plfa-part3-Compositional-14687" class="Bound">fd</a><a id="plfa_plfa-part3-Compositional-14742" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14744" href="../Compositional/#plfa_plfa-part3-Compositional-14690" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14748" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a>
</pre><p><code>ℱ-cong</code> 的证明使用了 <code>ℱ≃</code> 来处理「当且仅当」的两个方向。 该引理直接通过对值 <code>v</code> 进行归纳得证。</p><p>现在我们通过直白的等式推理证明 λ-抽象满足合同性：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lam-cong"></a><a id="plfa_plfa-part3-Compositional-15117" href="../Compositional/#plfa_plfa-part3-Compositional-15117" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-15126" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15128" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-15130" href="../Compositional/#plfa_plfa-part3-Compositional-15130" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15131" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15133" href="../Compositional/#plfa_plfa-part3-Compositional-15133" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-15135" href="../Compositional/#plfa_plfa-part3-Compositional-15135" class="Bound">N′</a> <a id="plfa_plfa-part3-Compositional-15138" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15140" href="../Compositional/#plfa_plfa-part3-Compositional-15130" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-15142" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-15144" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-15146" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-15148" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-15149" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-15153" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15155" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15157" href="../Compositional/#plfa_plfa-part3-Compositional-15133" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-15159" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15161" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15163" href="../Compositional/#plfa_plfa-part3-Compositional-15135" class="Bound">N′</a>
    <a id="plfa_plfa-part3-Compositional-15170" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Compositional-15190" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15192" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15194" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15195" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15197" href="../Compositional/#plfa_plfa-part3-Compositional-15133" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15198" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15200" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15202" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15204" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15205" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15207" href="../Compositional/#plfa_plfa-part3-Compositional-15135" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15209" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-15211" href="../Compositional/#plfa_plfa-part3-Compositional-15117" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-15220" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15221" href="../Compositional/#plfa_plfa-part3-Compositional-15221" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15222" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15224" href="../Compositional/#plfa_plfa-part3-Compositional-15224" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15225" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15227" href="../Compositional/#plfa_plfa-part3-Compositional-15227" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15229" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15231" href="../Compositional/#plfa_plfa-part3-Compositional-15231" class="Bound">N≃N′</a> <a id="plfa_plfa-part3-Compositional-15236" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15240" href="../Denotational/#plfa_plfa-part3-Denotational-23565" class="Function Operator">start</a>
    <a id="plfa_plfa-part3-Compositional-15250" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15252" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15253" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15255" href="../Compositional/#plfa_plfa-part3-Compositional-15224" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15256" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15260" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-15263" href="../Compositional/#plfa_plfa-part3-Compositional-5260" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-15273" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-15279" href="../Compositional/#plfa_plfa-part3-Compositional-2251" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-15281" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15282" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15284" href="../Compositional/#plfa_plfa-part3-Compositional-15224" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15285" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15289" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-15292" href="../Compositional/#plfa_plfa-part3-Compositional-14333" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-15299" href="../Compositional/#plfa_plfa-part3-Compositional-15231" class="Bound">N≃N′</a> <a id="plfa_plfa-part3-Compositional-15304" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-15310" href="../Compositional/#plfa_plfa-part3-Compositional-2251" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-15312" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15313" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15315" href="../Compositional/#plfa_plfa-part3-Compositional-15227" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15317" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15321" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-15324" href="../Denotational/#plfa_plfa-part3-Denotational-22805" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-15330" href="../Compositional/#plfa_plfa-part3-Compositional-5260" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-15340" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-15346" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15348" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15349" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15351" href="../Compositional/#plfa_plfa-part3-Compositional-15227" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15353" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15357" href="../Denotational/#plfa_plfa-part3-Denotational-23903" class="Function Operator">☐</a>
</pre><p>接下来我们证明指称相等对于应用也满足合同性：<code>ℰ L ≃ ℰ L′</code> 和 <code>ℰ M ≃ ℰ M′</code> 蕴含 <code>ℰ (L · M) ≃ ℰ (L′ · M′)</code>。等式 <code>app-equiv</code> 将其规约为 <code>●</code> 运算符是否满足合同性的问题。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-●-cong"></a><a id="plfa_plfa-part3-Compositional-15743" href="../Compositional/#plfa_plfa-part3-Compositional-15743" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-15750" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15752" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-15754" href="../Compositional/#plfa_plfa-part3-Compositional-15754" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15755" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15757" href="../Compositional/#plfa_plfa-part3-Compositional-15757" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-15760" href="../Compositional/#plfa_plfa-part3-Compositional-15760" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-15764" href="../Compositional/#plfa_plfa-part3-Compositional-15764" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-15767" href="../Compositional/#plfa_plfa-part3-Compositional-15767" class="Bound">D₂′</a> <a id="plfa_plfa-part3-Compositional-15771" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15773" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-15784" href="../Compositional/#plfa_plfa-part3-Compositional-15754" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15785" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-15789" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15791" href="../Compositional/#plfa_plfa-part3-Compositional-15757" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-15794" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15796" href="../Compositional/#plfa_plfa-part3-Compositional-15760" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-15800" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15802" href="../Compositional/#plfa_plfa-part3-Compositional-15764" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-15805" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15807" href="../Compositional/#plfa_plfa-part3-Compositional-15767" class="Bound">D₂′</a>
  <a id="plfa_plfa-part3-Compositional-15813" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15815" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15816" href="../Compositional/#plfa_plfa-part3-Compositional-15757" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-15819" href="../Compositional/#plfa_plfa-part3-Compositional-6935" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-15821" href="../Compositional/#plfa_plfa-part3-Compositional-15764" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-15823" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15825" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15827" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15828" href="../Compositional/#plfa_plfa-part3-Compositional-15760" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-15832" href="../Compositional/#plfa_plfa-part3-Compositional-6935" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-15834" href="../Compositional/#plfa_plfa-part3-Compositional-15767" class="Bound">D₂′</a><a id="plfa_plfa-part3-Compositional-15837" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-15839" href="../Compositional/#plfa_plfa-part3-Compositional-15743" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-15846" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15847" href="../Compositional/#plfa_plfa-part3-Compositional-15847" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15848" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15850" href="../Compositional/#plfa_plfa-part3-Compositional-15850" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-15853" href="../Compositional/#plfa_plfa-part3-Compositional-15853" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-15856" href="../Compositional/#plfa_plfa-part3-Compositional-15856" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-15858" href="../Compositional/#plfa_plfa-part3-Compositional-15858" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-15860" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15862" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-15864" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15867" href="../Compositional/#plfa_plfa-part3-Compositional-15867" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15869" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15871" href="../Compositional/#plfa_plfa-part3-Compositional-15957" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-15874" href="../Compositional/#plfa_plfa-part3-Compositional-15867" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15876" href="../Compositional/#plfa_plfa-part3-Compositional-15850" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-15879" href="../Compositional/#plfa_plfa-part3-Compositional-15853" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-15881" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15883" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a>
                         <a id="plfa_plfa-part3-Compositional-15910" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15913" href="../Compositional/#plfa_plfa-part3-Compositional-15913" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15915" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15917" href="../Compositional/#plfa_plfa-part3-Compositional-15957" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-15920" href="../Compositional/#plfa_plfa-part3-Compositional-15913" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15922" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15923" href="../Denotational/#plfa_plfa-part3-Denotational-22805" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-15929" href="../Compositional/#plfa_plfa-part3-Compositional-15850" class="Bound">d1</a><a id="plfa_plfa-part3-Compositional-15931" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15933" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15934" href="../Denotational/#plfa_plfa-part3-Denotational-22805" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-15940" href="../Compositional/#plfa_plfa-part3-Compositional-15853" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-15942" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-15945" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Compositional-15949" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-15957" href="../Compositional/#plfa_plfa-part3-Compositional-15957" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-15960" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15962" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-15964" href="../Compositional/#plfa_plfa-part3-Compositional-15964" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-15966" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15968" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-15972" href="../Compositional/#plfa_plfa-part3-Compositional-15847" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15973" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15975" href="../Compositional/#plfa_plfa-part3-Compositional-15975" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-15976" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15978" href="../Compositional/#plfa_plfa-part3-Compositional-15978" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-15981" href="../Compositional/#plfa_plfa-part3-Compositional-15981" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-15985" href="../Compositional/#plfa_plfa-part3-Compositional-15985" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-15988" href="../Compositional/#plfa_plfa-part3-Compositional-15988" class="Bound">D₂′</a> <a id="plfa_plfa-part3-Compositional-15992" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15994" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-16005" href="../Compositional/#plfa_plfa-part3-Compositional-15847" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16006" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Compositional-16012" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16014" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16015" href="../Compositional/#plfa_plfa-part3-Compositional-15978" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-16018" href="../Compositional/#plfa_plfa-part3-Compositional-6935" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16020" href="../Compositional/#plfa_plfa-part3-Compositional-15985" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-16022" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16024" href="../Compositional/#plfa_plfa-part3-Compositional-15964" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16026" href="../Compositional/#plfa_plfa-part3-Compositional-15975" class="Bound">v</a>  <a id="plfa_plfa-part3-Compositional-16029" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-16032" href="../Compositional/#plfa_plfa-part3-Compositional-15978" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-16035" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16037" href="../Compositional/#plfa_plfa-part3-Compositional-15981" class="Bound">D₁′</a>  <a id="plfa_plfa-part3-Compositional-16042" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-16045" href="../Compositional/#plfa_plfa-part3-Compositional-15985" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-16048" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16050" href="../Compositional/#plfa_plfa-part3-Compositional-15988" class="Bound">D₂′</a>
    <a id="plfa_plfa-part3-Compositional-16058" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16060" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16061" href="../Compositional/#plfa_plfa-part3-Compositional-15981" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-16065" href="../Compositional/#plfa_plfa-part3-Compositional-6935" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16067" href="../Compositional/#plfa_plfa-part3-Compositional-15988" class="Bound">D₂′</a><a id="plfa_plfa-part3-Compositional-16070" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16072" href="../Compositional/#plfa_plfa-part3-Compositional-15964" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16074" href="../Compositional/#plfa_plfa-part3-Compositional-15975" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-16078" href="../Compositional/#plfa_plfa-part3-Compositional-15957" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-16081" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16082" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-16087" href="../Compositional/#plfa_plfa-part3-Compositional-16087" class="Bound">v⊑⊥</a><a id="plfa_plfa-part3-Compositional-16090" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16092" href="../Compositional/#plfa_plfa-part3-Compositional-16092" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-16096" href="../Compositional/#plfa_plfa-part3-Compositional-16096" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-16100" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16102" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-16107" href="../Compositional/#plfa_plfa-part3-Compositional-16087" class="Bound">v⊑⊥</a>
  <a id="plfa_plfa-part3-Compositional-16113" href="../Compositional/#plfa_plfa-part3-Compositional-15957" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-16116" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16117" href="../Compositional/#plfa_plfa-part3-Compositional-16117" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-16118" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16120" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16121" href="../Compositional/#plfa_plfa-part3-Compositional-16121" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-16122" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16124" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16125" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-16130" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16132" href="../Compositional/#plfa_plfa-part3-Compositional-16132" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16134" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16136" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16138" href="../Compositional/#plfa_plfa-part3-Compositional-16138" class="Bound">Dv↦w</a> <a id="plfa_plfa-part3-Compositional-16143" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16145" href="../Compositional/#plfa_plfa-part3-Compositional-16145" class="Bound">Dv</a> <a id="plfa_plfa-part3-Compositional-16148" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-16150" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-16151" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16153" href="../Compositional/#plfa_plfa-part3-Compositional-16153" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-16157" href="../Compositional/#plfa_plfa-part3-Compositional-16157" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-16161" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Compositional-16167" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-16172" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16174" href="../Compositional/#plfa_plfa-part3-Compositional-16132" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16176" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16178" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16180" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-16186" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16187" href="../Compositional/#plfa_plfa-part3-Compositional-16153" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-16191" href="../Compositional/#plfa_plfa-part3-Compositional-16117" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16193" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16194" href="../Compositional/#plfa_plfa-part3-Compositional-16132" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16196" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-16198" href="../Compositional/#plfa_plfa-part3-Compositional-16121" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-16199" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-16202" href="../Compositional/#plfa_plfa-part3-Compositional-16138" class="Bound">Dv↦w</a> <a id="plfa_plfa-part3-Compositional-16207" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16209" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-16215" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16216" href="../Compositional/#plfa_plfa-part3-Compositional-16157" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-16220" href="../Compositional/#plfa_plfa-part3-Compositional-16117" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16222" href="../Compositional/#plfa_plfa-part3-Compositional-16132" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-16223" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16225" href="../Compositional/#plfa_plfa-part3-Compositional-16145" class="Bound">Dv</a> <a id="plfa_plfa-part3-Compositional-16228" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-16230" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a>
</pre><p>同样，「当且仅当」的两个方向需要通过一个引理来证明，而该引理则通过对 <code>(D₁ ● D₂) γ v</code> 进行情况分析来证明。</p><p>根据 <code>●</code> 的合同性，我们可以直接通过等式推理证明应用也满足合同性。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-app-cong"></a><a id="plfa_plfa-part3-Compositional-16599" href="../Compositional/#plfa_plfa-part3-Compositional-16599" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-16608" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16610" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-16612" href="../Compositional/#plfa_plfa-part3-Compositional-16612" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16613" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16615" href="../Compositional/#plfa_plfa-part3-Compositional-16615" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16617" href="../Compositional/#plfa_plfa-part3-Compositional-16617" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16620" href="../Compositional/#plfa_plfa-part3-Compositional-16620" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16622" href="../Compositional/#plfa_plfa-part3-Compositional-16622" class="Bound">M′</a> <a id="plfa_plfa-part3-Compositional-16625" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16627" href="../Compositional/#plfa_plfa-part3-Compositional-16612" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-16629" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-16631" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-16632" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-16636" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16638" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16640" href="../Compositional/#plfa_plfa-part3-Compositional-16615" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16642" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16644" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16646" href="../Compositional/#plfa_plfa-part3-Compositional-16617" class="Bound">L′</a>
  <a id="plfa_plfa-part3-Compositional-16651" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16653" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16655" href="../Compositional/#plfa_plfa-part3-Compositional-16620" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16657" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16659" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16661" href="../Compositional/#plfa_plfa-part3-Compositional-16622" class="Bound">M′</a>
    <a id="plfa_plfa-part3-Compositional-16668" class="Comment">-------------------------</a>
  <a id="plfa_plfa-part3-Compositional-16696" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16698" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16700" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16701" href="../Compositional/#plfa_plfa-part3-Compositional-16615" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16703" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16705" href="../Compositional/#plfa_plfa-part3-Compositional-16620" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16706" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16708" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16710" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16712" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16713" href="../Compositional/#plfa_plfa-part3-Compositional-16617" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16716" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16718" href="../Compositional/#plfa_plfa-part3-Compositional-16622" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-16720" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-16722" href="../Compositional/#plfa_plfa-part3-Compositional-16599" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-16731" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16732" href="../Compositional/#plfa_plfa-part3-Compositional-16732" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16733" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16735" href="../Compositional/#plfa_plfa-part3-Compositional-16735" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-16736" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16738" href="../Compositional/#plfa_plfa-part3-Compositional-16738" class="Bound">L′</a><a id="plfa_plfa-part3-Compositional-16740" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16742" href="../Compositional/#plfa_plfa-part3-Compositional-16742" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16743" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16745" href="../Compositional/#plfa_plfa-part3-Compositional-16745" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-16747" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16749" href="../Compositional/#plfa_plfa-part3-Compositional-16749" class="Bound">L≅L′</a> <a id="plfa_plfa-part3-Compositional-16754" href="../Compositional/#plfa_plfa-part3-Compositional-16754" class="Bound">M≅M′</a> <a id="plfa_plfa-part3-Compositional-16759" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-16763" href="../Denotational/#plfa_plfa-part3-Denotational-23565" class="Function Operator">start</a>
    <a id="plfa_plfa-part3-Compositional-16773" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16775" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16776" href="../Compositional/#plfa_plfa-part3-Compositional-16735" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16778" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16780" href="../Compositional/#plfa_plfa-part3-Compositional-16742" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16781" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16785" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16788" href="../Compositional/#plfa_plfa-part3-Compositional-12518" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-16798" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16804" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16806" href="../Compositional/#plfa_plfa-part3-Compositional-16735" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16808" href="../Compositional/#plfa_plfa-part3-Compositional-6935" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16810" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16812" href="../Compositional/#plfa_plfa-part3-Compositional-16742" class="Bound">M</a>
  <a id="plfa_plfa-part3-Compositional-16816" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16819" href="../Compositional/#plfa_plfa-part3-Compositional-15743" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-16826" href="../Compositional/#plfa_plfa-part3-Compositional-16749" class="Bound">L≅L′</a> <a id="plfa_plfa-part3-Compositional-16831" href="../Compositional/#plfa_plfa-part3-Compositional-16754" class="Bound">M≅M′</a> <a id="plfa_plfa-part3-Compositional-16836" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16842" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16844" href="../Compositional/#plfa_plfa-part3-Compositional-16738" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16847" href="../Compositional/#plfa_plfa-part3-Compositional-6935" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16849" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16851" href="../Compositional/#plfa_plfa-part3-Compositional-16745" class="Bound">M′</a>
  <a id="plfa_plfa-part3-Compositional-16856" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16859" href="../Denotational/#plfa_plfa-part3-Denotational-22805" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-16865" href="../Compositional/#plfa_plfa-part3-Compositional-12518" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-16875" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16881" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16883" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16884" href="../Compositional/#plfa_plfa-part3-Compositional-16738" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16887" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16889" href="../Compositional/#plfa_plfa-part3-Compositional-16745" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-16891" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16895" href="../Denotational/#plfa_plfa-part3-Denotational-23903" class="Function Operator">☐</a>
</pre><h2 id="可组合性">可组合性</h2><p><strong>可组合性（Compositionality Property）</strong>说明了在同一语境下， 两个指称相等的项会产生两个指称相等的程序。为准确起见，我们定义了 「语境」和「在语境下」的含义。</p><p><strong>语境（Context）</strong>是一个带洞的程序。以下数据定义 <code>Ctx</code> 将这个概念表示了出来。 我们使用两个变量语境来索引 <code>Ctx</code> 数据类型：一个表示洞，另一个表示填洞所产生的项。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-17894" class="Keyword">data</a> <a id="plfa_plfa-part3-Compositional-Ctx"></a><a id="plfa_plfa-part3-Compositional-17899" href="../Compositional/#plfa_plfa-part3-Compositional-17899" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-17903" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-17905" href="../Untyped/#plfa_plfa-part2-Untyped-3848" class="Datatype">Context</a> <a id="plfa_plfa-part3-Compositional-17913" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-17915" href="../Untyped/#plfa_plfa-part2-Untyped-3848" class="Datatype">Context</a> <a id="plfa_plfa-part3-Compositional-17923" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-17925" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part3-Compositional-17929" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-hole"></a><a id="plfa_plfa-part3-Compositional-17937" href="../Compositional/#plfa_plfa-part3-Compositional-17937" class="InductiveConstructor">ctx-hole</a> <a id="plfa_plfa-part3-Compositional-17946" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-17948" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-17950" href="../Compositional/#plfa_plfa-part3-Compositional-17950" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-17951" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-17953" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-17955" href="../Compositional/#plfa_plfa-part3-Compositional-17899" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-17959" href="../Compositional/#plfa_plfa-part3-Compositional-17950" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-17961" href="../Compositional/#plfa_plfa-part3-Compositional-17950" class="Bound">Γ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-lam"></a><a id="plfa_plfa-part3-Compositional-17965" href="../Compositional/#plfa_plfa-part3-Compositional-17965" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-17973" class="Symbol">:</a>  <a id="plfa_plfa-part3-Compositional-17976" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-17978" href="../Compositional/#plfa_plfa-part3-Compositional-17978" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-17980" href="../Compositional/#plfa_plfa-part3-Compositional-17980" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-17981" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-17983" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-17985" href="../Compositional/#plfa_plfa-part3-Compositional-17899" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-17989" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-17990" href="../Compositional/#plfa_plfa-part3-Compositional-17978" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-17992" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-17994" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-17995" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-17997" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-17998" href="../Compositional/#plfa_plfa-part3-Compositional-17980" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18000" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-18002" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-18003" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-18005" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18007" href="../Compositional/#plfa_plfa-part3-Compositional-17899" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18011" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-18012" href="../Compositional/#plfa_plfa-part3-Compositional-17978" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18014" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-18016" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-18017" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-18019" href="../Compositional/#plfa_plfa-part3-Compositional-17980" class="Bound">Δ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-app-L"></a><a id="plfa_plfa-part3-Compositional-18023" href="../Compositional/#plfa_plfa-part3-Compositional-18023" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-18033" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-18035" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-18037" href="../Compositional/#plfa_plfa-part3-Compositional-18037" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18039" href="../Compositional/#plfa_plfa-part3-Compositional-18039" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-18040" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-18042" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18044" href="../Compositional/#plfa_plfa-part3-Compositional-17899" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18048" href="../Compositional/#plfa_plfa-part3-Compositional-18037" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18050" href="../Compositional/#plfa_plfa-part3-Compositional-18039" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18052" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18054" href="../Compositional/#plfa_plfa-part3-Compositional-18039" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18056" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-18058" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-18060" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18062" href="../Compositional/#plfa_plfa-part3-Compositional-17899" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18066" href="../Compositional/#plfa_plfa-part3-Compositional-18037" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18068" href="../Compositional/#plfa_plfa-part3-Compositional-18039" class="Bound">Δ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-app-R"></a><a id="plfa_plfa-part3-Compositional-18072" href="../Compositional/#plfa_plfa-part3-Compositional-18072" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-18082" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-18084" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-18086" href="../Compositional/#plfa_plfa-part3-Compositional-18086" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18088" href="../Compositional/#plfa_plfa-part3-Compositional-18088" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-18089" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-18091" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18093" href="../Compositional/#plfa_plfa-part3-Compositional-18088" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18095" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-18097" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-18099" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18101" href="../Compositional/#plfa_plfa-part3-Compositional-17899" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18105" href="../Compositional/#plfa_plfa-part3-Compositional-18086" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18107" href="../Compositional/#plfa_plfa-part3-Compositional-18088" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18109" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18111" href="../Compositional/#plfa_plfa-part3-Compositional-17899" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18115" href="../Compositional/#plfa_plfa-part3-Compositional-18086" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18117" href="../Compositional/#plfa_plfa-part3-Compositional-18088" class="Bound">Δ</a>
</pre><ul><li>构造子 <code>ctx-hole</code> 表示洞，且在此情况中洞的变量语境 与填洞所产生的项的变量语境相同。</li></ul><ul><li>构造子 <code>ctx-lam</code> 接受一个 <code>Ctx</code> 并在顶部添加 λ-抽象来产生一个更大的 <code>Ctx</code>。 洞的变量语境保持不变，而我们从结果项的语境中删除一个变量，因为它被此 λ-抽象约束。</li></ul><ul><li>应用有两种构造，<code>ctx-app-L</code> 和 <code>ctx-app-R</code>。<code>ctx-app-L</code> 对应洞位于左侧项（运算符）内的情况，<code>ctx-app-R</code> 对应洞位于右侧项（运算数）内的情况。</li></ul><p>将项插入到某个语境下的操作由以下 <code>plug</code> 函数定义，它是通过对语境进行递归来定义的：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-plug"></a><a id="plfa_plfa-part3-Compositional-19328" href="../Compositional/#plfa_plfa-part3-Compositional-19328" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19333" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19335" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-19337" href="../Compositional/#plfa_plfa-part3-Compositional-19337" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-19338" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-19340" href="../Compositional/#plfa_plfa-part3-Compositional-19340" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-19341" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-19343" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19345" href="../Compositional/#plfa_plfa-part3-Compositional-17899" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-19349" href="../Compositional/#plfa_plfa-part3-Compositional-19337" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19351" href="../Compositional/#plfa_plfa-part3-Compositional-19340" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-19353" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19355" href="../Compositional/#plfa_plfa-part3-Compositional-19337" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19357" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-19359" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-19361" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19363" href="../Compositional/#plfa_plfa-part3-Compositional-19340" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-19365" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-19367" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a>
<a id="plfa_plfa-part3-Compositional-19369" href="../Compositional/#plfa_plfa-part3-Compositional-19328" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19374" href="../Compositional/#plfa_plfa-part3-Compositional-17937" class="InductiveConstructor">ctx-hole</a> <a id="plfa_plfa-part3-Compositional-19383" href="../Compositional/#plfa_plfa-part3-Compositional-19383" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19385" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19387" href="../Compositional/#plfa_plfa-part3-Compositional-19383" class="Bound">M</a>
<a id="plfa_plfa-part3-Compositional-19389" href="../Compositional/#plfa_plfa-part3-Compositional-19328" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19394" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19395" href="../Compositional/#plfa_plfa-part3-Compositional-17965" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-19403" href="../Compositional/#plfa_plfa-part3-Compositional-19403" class="Bound">C</a><a id="plfa_plfa-part3-Compositional-19404" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19406" href="../Compositional/#plfa_plfa-part3-Compositional-19406" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-19408" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19410" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-19412" href="../Compositional/#plfa_plfa-part3-Compositional-19328" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19417" href="../Compositional/#plfa_plfa-part3-Compositional-19403" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19419" href="../Compositional/#plfa_plfa-part3-Compositional-19406" class="Bound">N</a>
<a id="plfa_plfa-part3-Compositional-19421" href="../Compositional/#plfa_plfa-part3-Compositional-19328" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19426" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19427" href="../Compositional/#plfa_plfa-part3-Compositional-18023" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-19437" href="../Compositional/#plfa_plfa-part3-Compositional-19437" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19439" href="../Compositional/#plfa_plfa-part3-Compositional-19439" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-19440" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19442" href="../Compositional/#plfa_plfa-part3-Compositional-19442" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-19444" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19446" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19447" href="../Compositional/#plfa_plfa-part3-Compositional-19328" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19452" href="../Compositional/#plfa_plfa-part3-Compositional-19437" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19454" href="../Compositional/#plfa_plfa-part3-Compositional-19442" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-19455" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19457" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-19459" href="../Compositional/#plfa_plfa-part3-Compositional-19439" class="Bound">N</a>
<a id="plfa_plfa-part3-Compositional-19461" href="../Compositional/#plfa_plfa-part3-Compositional-19328" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19466" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19467" href="../Compositional/#plfa_plfa-part3-Compositional-18072" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-19477" href="../Compositional/#plfa_plfa-part3-Compositional-19477" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-19479" href="../Compositional/#plfa_plfa-part3-Compositional-19479" class="Bound">C</a><a id="plfa_plfa-part3-Compositional-19480" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19482" href="../Compositional/#plfa_plfa-part3-Compositional-19482" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19484" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19486" href="../Compositional/#plfa_plfa-part3-Compositional-19477" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-19488" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-19490" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19491" href="../Compositional/#plfa_plfa-part3-Compositional-19328" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19496" href="../Compositional/#plfa_plfa-part3-Compositional-19479" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19498" href="../Compositional/#plfa_plfa-part3-Compositional-19482" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-19499" class="Symbol">)</a>
</pre><p>我们接下来陈述并证明组合性原则：给定两个项 <code>M</code> 和 <code>N</code>，若它们的指称相等， 那么将它们插入到任意语境 <code>C</code> 中都会产生两个指称相等的程序：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-compositionality"></a><a id="plfa_plfa-part3-Compositional-19826" href="../Compositional/#plfa_plfa-part3-Compositional-19826" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-19843" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19845" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-19847" href="../Compositional/#plfa_plfa-part3-Compositional-19847" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19849" href="../Compositional/#plfa_plfa-part3-Compositional-19849" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-19850" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-19852" href="../Compositional/#plfa_plfa-part3-Compositional-19852" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19854" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19856" href="../Compositional/#plfa_plfa-part3-Compositional-17899" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-19860" href="../Compositional/#plfa_plfa-part3-Compositional-19847" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19862" href="../Compositional/#plfa_plfa-part3-Compositional-19849" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-19863" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-19865" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-19866" href="../Compositional/#plfa_plfa-part3-Compositional-19866" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19868" href="../Compositional/#plfa_plfa-part3-Compositional-19868" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-19870" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19872" href="../Compositional/#plfa_plfa-part3-Compositional-19847" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19874" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-19876" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-19877" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-19881" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19883" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19885" href="../Compositional/#plfa_plfa-part3-Compositional-19866" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19887" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-19889" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19891" href="../Compositional/#plfa_plfa-part3-Compositional-19868" class="Bound">N</a>
    <a id="plfa_plfa-part3-Compositional-19897" class="Comment">---------------------------</a>
  <a id="plfa_plfa-part3-Compositional-19927" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19929" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19931" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19932" href="../Compositional/#plfa_plfa-part3-Compositional-19328" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19937" href="../Compositional/#plfa_plfa-part3-Compositional-19852" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19939" href="../Compositional/#plfa_plfa-part3-Compositional-19866" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-19940" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19942" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-19944" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19946" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19947" href="../Compositional/#plfa_plfa-part3-Compositional-19328" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19952" href="../Compositional/#plfa_plfa-part3-Compositional-19852" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19954" href="../Compositional/#plfa_plfa-part3-Compositional-19868" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-19955" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-19957" href="../Compositional/#plfa_plfa-part3-Compositional-19826" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-19974" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-19975" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-19977" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19979" href="../Compositional/#plfa_plfa-part3-Compositional-17937" class="InductiveConstructor">ctx-hole</a><a id="plfa_plfa-part3-Compositional-19987" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-19989" href="../Compositional/#plfa_plfa-part3-Compositional-19989" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-19993" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-19997" href="../Compositional/#plfa_plfa-part3-Compositional-19989" class="Bound">M≃N</a>
<a id="plfa_plfa-part3-Compositional-20001" href="../Compositional/#plfa_plfa-part3-Compositional-19826" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20018" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20019" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20021" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20023" href="../Compositional/#plfa_plfa-part3-Compositional-17965" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-20031" href="../Compositional/#plfa_plfa-part3-Compositional-20031" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20033" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20035" href="../Compositional/#plfa_plfa-part3-Compositional-20035" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-20039" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-20043" href="../Compositional/#plfa_plfa-part3-Compositional-15117" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-20052" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-20053" href="../Compositional/#plfa_plfa-part3-Compositional-19826" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20070" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20071" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20073" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20075" href="../Compositional/#plfa_plfa-part3-Compositional-20031" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20077" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20079" href="../Compositional/#plfa_plfa-part3-Compositional-20035" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-20082" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-20084" href="../Compositional/#plfa_plfa-part3-Compositional-19826" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20101" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20102" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20104" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20106" href="../Compositional/#plfa_plfa-part3-Compositional-18023" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-20116" href="../Compositional/#plfa_plfa-part3-Compositional-20116" class="Bound">C′</a> <a id="plfa_plfa-part3-Compositional-20119" href="../Compositional/#plfa_plfa-part3-Compositional-20119" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-20120" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20122" href="../Compositional/#plfa_plfa-part3-Compositional-20122" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-20126" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-20130" href="../Compositional/#plfa_plfa-part3-Compositional-16599" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-20139" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-20140" href="../Compositional/#plfa_plfa-part3-Compositional-19826" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20157" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20158" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20160" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20162" href="../Compositional/#plfa_plfa-part3-Compositional-20116" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20164" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20166" href="../Compositional/#plfa_plfa-part3-Compositional-20122" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-20169" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20171" class="Symbol">λ</a> <a id="plfa_plfa-part3-Compositional-20173" href="../Compositional/#plfa_plfa-part3-Compositional-20173" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-20175" href="../Compositional/#plfa_plfa-part3-Compositional-20175" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-20177" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20179" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-20181" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20184" href="../Compositional/#plfa_plfa-part3-Compositional-20184" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20186" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20188" href="../Compositional/#plfa_plfa-part3-Compositional-20184" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20189" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20191" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-20193" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20196" href="../Compositional/#plfa_plfa-part3-Compositional-20196" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20198" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20200" href="../Compositional/#plfa_plfa-part3-Compositional-20196" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20201" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20203" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-20205" href="../Compositional/#plfa_plfa-part3-Compositional-19826" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20222" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20223" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20225" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20227" href="../Compositional/#plfa_plfa-part3-Compositional-18072" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-20237" href="../Compositional/#plfa_plfa-part3-Compositional-20237" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-20239" href="../Compositional/#plfa_plfa-part3-Compositional-20239" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20241" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20243" href="../Compositional/#plfa_plfa-part3-Compositional-20243" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-20247" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-20251" href="../Compositional/#plfa_plfa-part3-Compositional-16599" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-20260" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20263" href="../Compositional/#plfa_plfa-part3-Compositional-20263" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-20265" href="../Compositional/#plfa_plfa-part3-Compositional-20265" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-20267" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20269" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-20271" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20274" href="../Compositional/#plfa_plfa-part3-Compositional-20274" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20276" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20278" href="../Compositional/#plfa_plfa-part3-Compositional-20274" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20279" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20281" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-20283" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20286" href="../Compositional/#plfa_plfa-part3-Compositional-20286" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20288" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20290" href="../Compositional/#plfa_plfa-part3-Compositional-20286" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20291" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20293" href="../Compositional/#plfa_plfa-part3-Compositional-822" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-20294" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20296" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-20297" href="../Compositional/#plfa_plfa-part3-Compositional-19826" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20314" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20315" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20317" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20319" href="../Compositional/#plfa_plfa-part3-Compositional-20239" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20321" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20323" href="../Compositional/#plfa_plfa-part3-Compositional-20243" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-20326" class="Symbol">)</a>
</pre><p>它可以通过直接对语境 <code>C</code> 进行归纳，用我们之前建立的合同性质 <code>lam-cong</code> 和 <code>app-cong</code> 来证明。</p><h2 id="指称语义作为函数来定义">指称语义作为函数来定义</h2><p>建立了 <code>var-equiv</code>、<code>lam-equiv</code> 和 <code>app-equiv</code> 三个等式后， 我们就能将指称语义定义为一个在输入项 <code>M</code> 上递归的函数。其实， 我们可以定义以下函数 <code>⟦ M ⟧</code>，利用辅助的柯里化函数 <code>ℱ</code>， 并分别在 λ-抽象和应用的情况下应用 <code>●</code> 函数来将项映射到指称。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-⟦_⟧"></a><a id="plfa_plfa-part3-Compositional-21179" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟦_⟧</a> <a id="plfa_plfa-part3-Compositional-21183" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21185" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-21187" href="../Compositional/#plfa_plfa-part3-Compositional-21187" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21188" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21190" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-21192" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21193" href="../Compositional/#plfa_plfa-part3-Compositional-21193" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21195" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21197" href="../Compositional/#plfa_plfa-part3-Compositional-21187" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-21199" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-21201" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-21202" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-21204" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-21206" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-21217" href="../Compositional/#plfa_plfa-part3-Compositional-21187" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-21219" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21221" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-21223" href="../Compositional/#plfa_plfa-part3-Compositional-21223" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-21225" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21227" href="../Compositional/#plfa_plfa-part3-Compositional-21227" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-21229" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-21231" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21233" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-21235" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-21237" href="../Compositional/#plfa_plfa-part3-Compositional-21227" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-21239" href="../Compositional/#plfa_plfa-part3-Compositional-21223" class="Bound">x</a>
<a id="plfa_plfa-part3-Compositional-21241" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21243" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21245" href="../Compositional/#plfa_plfa-part3-Compositional-21245" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21247" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21249" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21251" href="../Compositional/#plfa_plfa-part3-Compositional-2251" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-21253" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21255" href="../Compositional/#plfa_plfa-part3-Compositional-21245" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21257" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟧</a>
<a id="plfa_plfa-part3-Compositional-21259" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21261" href="../Compositional/#plfa_plfa-part3-Compositional-21261" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21263" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21265" href="../Compositional/#plfa_plfa-part3-Compositional-21265" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21267" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21269" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21271" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21273" href="../Compositional/#plfa_plfa-part3-Compositional-21261" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21275" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21277" href="../Compositional/#plfa_plfa-part3-Compositional-6935" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-21279" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21281" href="../Compositional/#plfa_plfa-part3-Compositional-21265" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21283" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟧</a>
</pre><p><code>ℰ M</code> 和 <code>⟦ M ⟧</code> 指称相等的证明可通过 <code>var-equiv</code>、<code>lam-equiv</code> 和 <code>app-equiv</code> 三个等式以及 <code>ℱ</code> 和 <code>●</code> 的合同性引理直接归纳得出。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰ≃⟦⟧"></a><a id="plfa_plfa-part3-Compositional-21614" href="../Compositional/#plfa_plfa-part3-Compositional-21614" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21619" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21621" class="Symbol">∀</a> <a id="plfa_plfa-part3-Compositional-21623" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21624" href="../Compositional/#plfa_plfa-part3-Compositional-21624" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21625" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21627" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21628" href="../Compositional/#plfa_plfa-part3-Compositional-21628" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21630" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21632" href="../Compositional/#plfa_plfa-part3-Compositional-21624" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-21634" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-21636" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-21637" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21639" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-21641" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21643" href="../Compositional/#plfa_plfa-part3-Compositional-21628" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21645" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-21647" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21649" href="../Compositional/#plfa_plfa-part3-Compositional-21628" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21651" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟧</a>
<a id="plfa_plfa-part3-Compositional-21653" href="../Compositional/#plfa_plfa-part3-Compositional-21614" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21658" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21659" href="../Compositional/#plfa_plfa-part3-Compositional-21659" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21660" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21662" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21663" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-21665" href="../Compositional/#plfa_plfa-part3-Compositional-21665" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-21666" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21668" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21670" href="../Compositional/#plfa_plfa-part3-Compositional-13196" class="Function">var-equiv</a>
<a id="plfa_plfa-part3-Compositional-21680" href="../Compositional/#plfa_plfa-part3-Compositional-21614" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21685" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21686" href="../Compositional/#plfa_plfa-part3-Compositional-21686" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21687" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21689" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21690" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21692" href="../Compositional/#plfa_plfa-part3-Compositional-21692" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21693" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21695" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-21699" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-21703" href="../Compositional/#plfa_plfa-part3-Compositional-21703" class="Bound">ih</a> <a id="plfa_plfa-part3-Compositional-21706" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21708" href="../Compositional/#plfa_plfa-part3-Compositional-21614" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21713" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21714" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21716" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21718" href="../Compositional/#plfa_plfa-part3-Compositional-21692" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21719" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21721" class="Keyword">in</a>
    <a id="plfa_plfa-part3-Compositional-21728" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21730" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21731" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21733" href="../Compositional/#plfa_plfa-part3-Compositional-21692" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21734" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-21738" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21741" href="../Compositional/#plfa_plfa-part3-Compositional-5260" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-21751" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-21757" href="../Compositional/#plfa_plfa-part3-Compositional-2251" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-21759" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21760" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21762" href="../Compositional/#plfa_plfa-part3-Compositional-21692" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21763" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-21767" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21770" href="../Compositional/#plfa_plfa-part3-Compositional-14333" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-21777" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21778" href="../Compositional/#plfa_plfa-part3-Compositional-21614" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21783" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21784" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21786" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21788" href="../Compositional/#plfa_plfa-part3-Compositional-21692" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21789" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-21792" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-21798" href="../Compositional/#plfa_plfa-part3-Compositional-2251" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-21800" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21802" href="../Compositional/#plfa_plfa-part3-Compositional-21692" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21804" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-21808" href="../Denotational/#plfa_plfa-part3-Denotational-23796" class="Function Operator">≃⟨⟩</a>
    <a id="plfa_plfa-part3-Compositional-21816" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21818" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21820" href="../Compositional/#plfa_plfa-part3-Compositional-21692" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21822" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-21826" href="../Denotational/#plfa_plfa-part3-Denotational-23903" class="Function Operator">☐</a>
<a id="plfa_plfa-part3-Compositional-21828" href="../Compositional/#plfa_plfa-part3-Compositional-21614" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21833" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21834" href="../Compositional/#plfa_plfa-part3-Compositional-21834" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21835" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21837" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21838" href="../Compositional/#plfa_plfa-part3-Compositional-21838" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21840" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21842" href="../Compositional/#plfa_plfa-part3-Compositional-21842" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-21843" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21845" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Compositional-21850" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21852" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21853" href="../Compositional/#plfa_plfa-part3-Compositional-21838" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21855" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21857" href="../Compositional/#plfa_plfa-part3-Compositional-21842" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-21858" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-21862" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21865" href="../Compositional/#plfa_plfa-part3-Compositional-12518" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-21875" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
   <a id="plfa_plfa-part3-Compositional-21880" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21882" href="../Compositional/#plfa_plfa-part3-Compositional-21838" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21884" href="../Compositional/#plfa_plfa-part3-Compositional-6935" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-21886" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21888" href="../Compositional/#plfa_plfa-part3-Compositional-21842" class="Bound">M</a>
  <a id="plfa_plfa-part3-Compositional-21892" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21895" href="../Compositional/#plfa_plfa-part3-Compositional-15743" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-21902" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21903" href="../Compositional/#plfa_plfa-part3-Compositional-21614" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21908" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21909" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21911" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21913" href="../Compositional/#plfa_plfa-part3-Compositional-21838" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-21914" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-21917" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21918" href="../Compositional/#plfa_plfa-part3-Compositional-21614" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21923" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21924" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21926" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21928" href="../Compositional/#plfa_plfa-part3-Compositional-21842" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-21929" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-21932" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
   <a id="plfa_plfa-part3-Compositional-21937" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21939" href="../Compositional/#plfa_plfa-part3-Compositional-21838" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21941" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21943" href="../Compositional/#plfa_plfa-part3-Compositional-6935" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-21945" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21947" href="../Compositional/#plfa_plfa-part3-Compositional-21842" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21949" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-21953" href="../Denotational/#plfa_plfa-part3-Denotational-23796" class="Function Operator">≃⟨⟩</a>
    <a id="plfa_plfa-part3-Compositional-21961" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21963" href="../Compositional/#plfa_plfa-part3-Compositional-21838" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21965" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21967" href="../Compositional/#plfa_plfa-part3-Compositional-21842" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21969" href="../Compositional/#plfa_plfa-part3-Compositional-21179" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-21973" href="../Denotational/#plfa_plfa-part3-Denotational-23903" class="Function Operator">☐</a>
</pre><h2 id="unicode">Unicode</h2><p>本章使用了以下 Unicode：</p><pre><code>ℱ  U+2131  SCRIPT CAPITAL F (\McF)
●  U+2131  BLACK CIRCLE (\cib)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Denotational/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Compositional.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Soundness/">下一章</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">编程语言基础：Agda 描述</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>