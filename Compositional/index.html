<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>编程语言基础：Agda 描述 – Compositional</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header"><div class="wrapper"><a class="site-title" href="../">编程语言基础：Agda 描述</a><nav class="site-nav"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">主页</a> <a class="page-link" href="../Announcements/">公告</a> <a class="page-link" href="../GettingStarted/">使用说明</a> <a class="page-link" href="../Citing/">引用</a> <a class="page-link" href="https://plfa.github.io/">English</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon" aria-hidden="true"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book" aria-hidden="true"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager"><ul class="pagination"><li><a class="pagelink" href="../Denotational/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Compositional.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Soundness/">下一章</a></li><li class="separator">•</li></ul></nav><header class="post-header"><h1 class="post-title">Compositional: The denotational semantics is compositional</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part3-Compositional-119" class="Keyword">module</a> <a id="plfa_plfa-part3-Compositional-126" href="../Compositional/#" class="Module">plfa.part3.Compositional</a> <a id="plfa_plfa-part3-Compositional-151" class="Keyword">where</a>
</pre><h2 id="introduction">Introduction</h2><p>In this chapter we prove that the denotational semantics is compositional, which means we fill in the ellipses in the following equations.</p><pre><code>ℰ (` x) ≃ ...
ℰ (ƛ M) ≃ ... ℰ M ...
ℰ (M · N) ≃ ... ℰ M ... ℰ N ...</code></pre><p>Such equations would imply that the denotational semantics could be instead defined as a recursive function. Indeed, we end this chapter with such a definition and prove that it is equivalent to ℰ.</p><h2 id="imports">Imports</h2><pre class="Agda"><a id="plfa_plfa-part3-Compositional-620" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-625" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-632" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html" class="Module">Data.Product</a> <a id="plfa_plfa-part3-Compositional-645" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-651" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-652" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">_×_</a><a id="plfa_plfa-part3-Compositional-655" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-657" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="plfa_plfa-part3-Compositional-658" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-660" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ-syntax</a><a id="plfa_plfa-part3-Compositional-668" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-670" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1369" class="Function">∃</a><a id="plfa_plfa-part3-Compositional-671" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-673" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1806" class="Function">∃-syntax</a><a id="plfa_plfa-part3-Compositional-681" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-683" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a><a id="plfa_plfa-part3-Compositional-688" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-690" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a><a id="plfa_plfa-part3-Compositional-695" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-699" class="Keyword">renaming</a> <a id="plfa_plfa-part3-Compositional-708" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-709" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part3-Compositional-713" class="Symbol">to</a> <a id="plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part3-Compositional-721" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-723" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-728" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-735" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.html" class="Module">Data.Sum</a> <a id="plfa_plfa-part3-Compositional-744" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-750" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-751" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#734" class="Datatype Operator">_⊎_</a><a id="plfa_plfa-part3-Compositional-754" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-756" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a><a id="plfa_plfa-part3-Compositional-760" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-762" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a><a id="plfa_plfa-part3-Compositional-766" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-768" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-773" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-780" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Unit.html" class="Module">Data.Unit</a> <a id="plfa_plfa-part3-Compositional-790" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-796" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-797" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#158" class="Record">⊤</a><a id="plfa_plfa-part3-Compositional-798" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-800" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a><a id="plfa_plfa-part3-Compositional-802" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-804" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-809" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-816" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
  <a id="plfa_plfa-part3-Compositional-837" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-843" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-844" href="../Untyped/#plfa_plfa-part2-Untyped-3850" class="Datatype">Context</a><a id="plfa_plfa-part3-Compositional-851" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-853" href="../Untyped/#plfa_plfa-part2-Untyped-3888" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part3-Compositional-856" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-858" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-859" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-861" href="../Untyped/#plfa_plfa-part2-Untyped-4377" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part3-Compositional-864" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-866" href="../Untyped/#plfa_plfa-part2-Untyped-5421" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part3-Compositional-869" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-871" href="../Untyped/#plfa_plfa-part2-Untyped-5457" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part3-Compositional-873" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-875" href="../Untyped/#plfa_plfa-part2-Untyped-5509" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part3-Compositional-877" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-879" href="../Untyped/#plfa_plfa-part2-Untyped-5569" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part3-Compositional-882" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-884" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-889" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-896" href="../Denotational/#" class="Module">plfa.part3.Denotational</a>
  <a id="plfa_plfa-part3-Compositional-922" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-928" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-929" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-934" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-936" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">_↦_</a><a id="plfa_plfa-part3-Compositional-939" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-941" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">_`,_</a><a id="plfa_plfa-part3-Compositional-945" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-947" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">_⊔_</a><a id="plfa_plfa-part3-Compositional-950" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-952" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-953" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-955" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">_⊑_</a><a id="plfa_plfa-part3-Compositional-958" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-960" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">_⊢_↓_</a><a id="plfa_plfa-part3-Compositional-965" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-976" href="../Denotational/#plfa_plfa-part3-Denotational-4370" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-981" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-983" href="../Denotational/#plfa_plfa-part3-Denotational-4696" class="InductiveConstructor">⊑-fun</a><a id="plfa_plfa-part3-Compositional-988" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-990" href="../Denotational/#plfa_plfa-part3-Denotational-4395" class="InductiveConstructor">⊑-conj-L</a><a id="plfa_plfa-part3-Compositional-998" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1000" href="../Denotational/#plfa_plfa-part3-Denotational-4479" class="InductiveConstructor">⊑-conj-R1</a><a id="plfa_plfa-part3-Compositional-1009" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1011" href="../Denotational/#plfa_plfa-part3-Denotational-4552" class="InductiveConstructor">⊑-conj-R2</a><a id="plfa_plfa-part3-Compositional-1020" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1031" href="../Denotational/#plfa_plfa-part3-Denotational-4799" class="InductiveConstructor">⊑-dist</a><a id="plfa_plfa-part3-Compositional-1037" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1039" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Compositional-1045" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1047" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a><a id="plfa_plfa-part3-Compositional-1054" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1056" href="../Denotational/#plfa_plfa-part3-Denotational-6112" class="Function">⊔↦⊔-dist</a><a id="plfa_plfa-part3-Compositional-1064" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1075" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Compositional-1078" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1080" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a><a id="plfa_plfa-part3-Compositional-1087" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1089" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Compositional-1095" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1097" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Compositional-1104" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1106" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a><a id="plfa_plfa-part3-Compositional-1113" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1115" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a><a id="plfa_plfa-part3-Compositional-1118" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1129" href="../Denotational/#plfa_plfa-part3-Denotational-25555" class="Function">up-env</a><a id="plfa_plfa-part3-Compositional-1135" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1137" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a><a id="plfa_plfa-part3-Compositional-1138" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1140" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">_≃_</a><a id="plfa_plfa-part3-Compositional-1143" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1145" href="../Denotational/#plfa_plfa-part3-Denotational-17871" class="Function">≃-sym</a><a id="plfa_plfa-part3-Compositional-1150" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1152" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a><a id="plfa_plfa-part3-Compositional-1162" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1164" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a><a id="plfa_plfa-part3-Compositional-1167" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-1169" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-1174" href="../Denotational/#plfa_plfa-part3-Denotational-18448" class="Module">plfa.part3.Denotational.≃-Reasoning</a>
</pre><h2 id="equation-for-lambda-abstraction">Equation for lambda abstraction</h2><p>Regarding the first equation</p><pre><code>ℰ (ƛ M) ≃ ... ℰ M ...</code></pre><p>we need to define a function that maps a <code>Denotation (Γ , ★)</code> to a <code>Denotation Γ</code>. This function, let us name it <code>ℱ</code>, should mimic the non-recursive part of the semantics when applied to a lambda term. In particular, we need to consider the rules <code>↦-intro</code>, <code>⊥-intro</code>, and <code>⊔-intro</code>. So <code>ℱ</code> has three parameters, the denotation <code>D</code> of the subterm <code>M</code>, an environment <code>γ</code>, and a value <code>v</code>. If we define <code>ℱ</code> by recursion on the value <code>v</code>, then it matches up nicely with the three rules <code>↦-intro</code>, <code>⊥-intro</code>, and <code>⊔-intro</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱ"></a><a id="plfa_plfa-part3-Compositional-1840" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1842" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-1844" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-1846" href="../Compositional/#plfa_plfa-part3-Compositional-1846" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-1847" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-1849" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-1851" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-1862" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1863" href="../Compositional/#plfa_plfa-part3-Compositional-1846" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-1865" href="../Untyped/#plfa_plfa-part2-Untyped-3888" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-1867" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-1868" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-1870" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-1872" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-1883" href="../Compositional/#plfa_plfa-part3-Compositional-1846" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-1885" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1887" href="../Compositional/#plfa_plfa-part3-Compositional-1887" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1889" href="../Compositional/#plfa_plfa-part3-Compositional-1889" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1891" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1892" href="../Compositional/#plfa_plfa-part3-Compositional-1892" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-1894" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-1896" href="../Compositional/#plfa_plfa-part3-Compositional-1896" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-1897" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-1899" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-1901" href="../Compositional/#plfa_plfa-part3-Compositional-1887" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1903" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1904" href="../Compositional/#plfa_plfa-part3-Compositional-1889" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1906" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-1909" href="../Compositional/#plfa_plfa-part3-Compositional-1892" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-1910" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-1912" href="../Compositional/#plfa_plfa-part3-Compositional-1896" class="Bound">w</a>
<a id="plfa_plfa-part3-Compositional-1914" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1916" href="../Compositional/#plfa_plfa-part3-Compositional-1916" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1918" href="../Compositional/#plfa_plfa-part3-Compositional-1918" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1920" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Compositional-1922" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-1924" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#158" class="Record">⊤</a>
<a id="plfa_plfa-part3-Compositional-1926" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1928" href="../Compositional/#plfa_plfa-part3-Compositional-1928" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1930" href="../Compositional/#plfa_plfa-part3-Compositional-1930" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1932" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1933" href="../Compositional/#plfa_plfa-part3-Compositional-1933" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-1935" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-1937" href="../Compositional/#plfa_plfa-part3-Compositional-1937" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-1938" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-1940" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-1942" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1943" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1945" href="../Compositional/#plfa_plfa-part3-Compositional-1928" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1947" href="../Compositional/#plfa_plfa-part3-Compositional-1930" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1949" href="../Compositional/#plfa_plfa-part3-Compositional-1933" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-1950" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-1952" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Compositional-1954" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1955" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1957" href="../Compositional/#plfa_plfa-part3-Compositional-1928" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1959" href="../Compositional/#plfa_plfa-part3-Compositional-1930" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1961" href="../Compositional/#plfa_plfa-part3-Compositional-1937" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-1962" class="Symbol">)</a>
</pre><p>If one squints hard enough, the <code>ℱ</code> function starts to look like the <code>curry</code> operation familiar to functional programmers. It turns a function that expects a tuple of length <code>n + 1</code> (the environment <code>Γ , ★</code>) into a function that expects a tuple of length <code>n</code> and returns a function of one parameter.</p><p>Using this <code>ℱ</code>, we hope to prove that</p><pre><code>ℰ (ƛ N) ≃ ℱ (ℰ N)</code></pre><p>The function <code>ℱ</code> is preserved when going from a larger value <code>v</code> to a smaller value <code>u</code>. The proof is a straightforward induction on the derivation of <code>u ⊑ v</code>, using the <code>up-env</code> lemma in the case for the <code>⊑-fun</code> rule.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-sub-ℱ"></a><a id="plfa_plfa-part3-Compositional-2560" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2566" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-2568" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-2570" href="../Compositional/#plfa_plfa-part3-Compositional-2570" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-2571" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-2573" href="../Compositional/#plfa_plfa-part3-Compositional-2573" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-2575" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-2577" href="../Compositional/#plfa_plfa-part3-Compositional-2570" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-2579" href="../Untyped/#plfa_plfa-part2-Untyped-3888" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-2581" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-2583" href="../Untyped/#plfa_plfa-part2-Untyped-5421" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-2585" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-2586" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-2588" href="../Compositional/#plfa_plfa-part3-Compositional-2588" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2590" href="../Compositional/#plfa_plfa-part3-Compositional-2590" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-2592" href="../Compositional/#plfa_plfa-part3-Compositional-2592" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-2593" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-2597" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2599" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2601" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2602" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-2604" href="../Compositional/#plfa_plfa-part3-Compositional-2573" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-2605" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2607" href="../Compositional/#plfa_plfa-part3-Compositional-2588" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2609" href="../Compositional/#plfa_plfa-part3-Compositional-2590" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-2613" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2615" href="../Compositional/#plfa_plfa-part3-Compositional-2592" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-2617" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-2619" href="../Compositional/#plfa_plfa-part3-Compositional-2590" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-2625" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-2640" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2642" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2644" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2645" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-2647" href="../Compositional/#plfa_plfa-part3-Compositional-2573" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-2648" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2650" href="../Compositional/#plfa_plfa-part3-Compositional-2588" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2652" href="../Compositional/#plfa_plfa-part3-Compositional-2592" class="Bound">u</a>
<a id="plfa_plfa-part3-Compositional-2654" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2660" href="../Compositional/#plfa_plfa-part3-Compositional-2660" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2662" href="../Denotational/#plfa_plfa-part3-Denotational-4370" class="InductiveConstructor">⊑-bot</a> <a id="plfa_plfa-part3-Compositional-2668" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2670" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a>
<a id="plfa_plfa-part3-Compositional-2673" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2679" href="../Compositional/#plfa_plfa-part3-Compositional-2679" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2681" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2682" href="../Denotational/#plfa_plfa-part3-Denotational-4696" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-2688" href="../Compositional/#plfa_plfa-part3-Compositional-2688" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-2691" href="../Compositional/#plfa_plfa-part3-Compositional-2691" class="Bound">lt′</a><a id="plfa_plfa-part3-Compositional-2694" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2696" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2698" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-2702" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2703" href="../Denotational/#plfa_plfa-part3-Denotational-25555" class="Function">up-env</a> <a id="plfa_plfa-part3-Compositional-2710" href="../Compositional/#plfa_plfa-part3-Compositional-2679" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2712" href="../Compositional/#plfa_plfa-part3-Compositional-2688" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-2714" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2716" href="../Compositional/#plfa_plfa-part3-Compositional-2691" class="Bound">lt′</a>
<a id="plfa_plfa-part3-Compositional-2720" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2726" href="../Compositional/#plfa_plfa-part3-Compositional-2726" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2728" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2729" href="../Denotational/#plfa_plfa-part3-Denotational-4395" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-2738" href="../Compositional/#plfa_plfa-part3-Compositional-2738" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-2741" href="../Compositional/#plfa_plfa-part3-Compositional-2741" class="Bound">lt₁</a><a id="plfa_plfa-part3-Compositional-2744" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2746" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2748" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-2750" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2756" href="../Compositional/#plfa_plfa-part3-Compositional-2726" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2758" href="../Compositional/#plfa_plfa-part3-Compositional-2738" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-2761" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-2763" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2769" href="../Compositional/#plfa_plfa-part3-Compositional-2726" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2771" href="../Compositional/#plfa_plfa-part3-Compositional-2741" class="Bound">lt₁</a> <a id="plfa_plfa-part3-Compositional-2775" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-2777" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2783" href="../Compositional/#plfa_plfa-part3-Compositional-2783" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2785" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2786" href="../Denotational/#plfa_plfa-part3-Denotational-4479" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Compositional-2796" href="../Compositional/#plfa_plfa-part3-Compositional-2796" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-2798" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2800" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2802" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2808" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2809" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-2815" href="../Compositional/#plfa_plfa-part3-Compositional-2783" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-2816" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2818" href="../Compositional/#plfa_plfa-part3-Compositional-2796" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-2821" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2827" href="../Compositional/#plfa_plfa-part3-Compositional-2827" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2829" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2830" href="../Denotational/#plfa_plfa-part3-Denotational-4552" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Compositional-2840" href="../Compositional/#plfa_plfa-part3-Compositional-2840" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-2842" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2844" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2846" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2852" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2853" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="plfa_plfa-part3-Compositional-2859" href="../Compositional/#plfa_plfa-part3-Compositional-2827" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-2860" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2862" href="../Compositional/#plfa_plfa-part3-Compositional-2840" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-2865" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2871" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-2872" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-2874" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2876" href="../Compositional/#plfa_plfa-part3-Compositional-2876" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-2879" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-2881" href="../Compositional/#plfa_plfa-part3-Compositional-2881" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-2884" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-2886" href="../Compositional/#plfa_plfa-part3-Compositional-2876" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-2889" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-2891" href="../Compositional/#plfa_plfa-part3-Compositional-2891" class="Bound">v₃</a><a id="plfa_plfa-part3-Compositional-2893" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-2895" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-2896" href="../Compositional/#plfa_plfa-part3-Compositional-2876" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-2899" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-2901" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2902" href="../Compositional/#plfa_plfa-part3-Compositional-2881" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-2905" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-2907" href="../Compositional/#plfa_plfa-part3-Compositional-2891" class="Bound">v₃</a><a id="plfa_plfa-part3-Compositional-2909" class="Symbol">)}</a> <a id="plfa_plfa-part3-Compositional-2912" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-2914" href="../Compositional/#plfa_plfa-part3-Compositional-2914" class="Bound">N2</a> <a id="plfa_plfa-part3-Compositional-2917" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-2919" href="../Compositional/#plfa_plfa-part3-Compositional-2919" class="Bound">N3</a> <a id="plfa_plfa-part3-Compositional-2922" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-2924" href="../Denotational/#plfa_plfa-part3-Denotational-4799" class="InductiveConstructor">⊑-dist</a> <a id="plfa_plfa-part3-Compositional-2931" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Compositional-2936" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-2944" href="../Compositional/#plfa_plfa-part3-Compositional-2914" class="Bound">N2</a> <a id="plfa_plfa-part3-Compositional-2947" href="../Compositional/#plfa_plfa-part3-Compositional-2919" class="Bound">N3</a>
<a id="plfa_plfa-part3-Compositional-2950" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2956" href="../Compositional/#plfa_plfa-part3-Compositional-2956" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2958" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2959" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-2967" href="../Compositional/#plfa_plfa-part3-Compositional-2967" class="Bound">x₁</a> <a id="plfa_plfa-part3-Compositional-2970" href="../Compositional/#plfa_plfa-part3-Compositional-2970" class="Bound">x₂</a><a id="plfa_plfa-part3-Compositional-2972" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2974" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2976" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2982" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2983" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2989" href="../Compositional/#plfa_plfa-part3-Compositional-2956" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2991" href="../Compositional/#plfa_plfa-part3-Compositional-2970" class="Bound">x₂</a><a id="plfa_plfa-part3-Compositional-2993" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2995" href="../Compositional/#plfa_plfa-part3-Compositional-2967" class="Bound">x₁</a>
</pre><p>With this subsumption property in hand, we can prove the forward direction of the semantic equation for lambda. The proof is by induction on the semantics, using <code>sub-ℱ</code> in the case for the <code>sub</code> rule.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰƛ→ℱℰ"></a><a id="plfa_plfa-part3-Compositional-3215" href="../Compositional/#plfa_plfa-part3-Compositional-3215" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3221" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3223" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-3225" href="../Compositional/#plfa_plfa-part3-Compositional-3225" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3226" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3228" href="../Compositional/#plfa_plfa-part3-Compositional-3228" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3230" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3232" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-3236" href="../Compositional/#plfa_plfa-part3-Compositional-3225" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3237" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3239" href="../Compositional/#plfa_plfa-part3-Compositional-3239" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3241" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3243" href="../Compositional/#plfa_plfa-part3-Compositional-3225" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-3245" href="../Untyped/#plfa_plfa-part2-Untyped-3888" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3247" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-3249" href="../Untyped/#plfa_plfa-part2-Untyped-5421" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3251" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-3252" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3254" href="../Compositional/#plfa_plfa-part3-Compositional-3254" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-3256" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3258" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-3263" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-3267" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3269" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-3271" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3272" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-3274" href="../Compositional/#plfa_plfa-part3-Compositional-3239" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-3275" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3277" href="../Compositional/#plfa_plfa-part3-Compositional-3228" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3279" href="../Compositional/#plfa_plfa-part3-Compositional-3254" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-3285" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-3300" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3302" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-3304" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3305" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-3307" href="../Compositional/#plfa_plfa-part3-Compositional-3239" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-3308" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3310" href="../Compositional/#plfa_plfa-part3-Compositional-3228" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3312" href="../Compositional/#plfa_plfa-part3-Compositional-3254" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-3314" href="../Compositional/#plfa_plfa-part3-Compositional-3215" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3320" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3321" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Compositional-3329" href="../Compositional/#plfa_plfa-part3-Compositional-3329" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-3330" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3332" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3334" href="../Compositional/#plfa_plfa-part3-Compositional-3329" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-3336" href="../Compositional/#plfa_plfa-part3-Compositional-3215" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3342" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-3350" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3352" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a>
<a id="plfa_plfa-part3-Compositional-3355" href="../Compositional/#plfa_plfa-part3-Compositional-3215" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3361" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3362" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-3370" href="../Compositional/#plfa_plfa-part3-Compositional-3370" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-3373" href="../Compositional/#plfa_plfa-part3-Compositional-3373" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-3375" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3377" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3379" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-3381" href="../Compositional/#plfa_plfa-part3-Compositional-3215" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3387" href="../Compositional/#plfa_plfa-part3-Compositional-3370" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-3390" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3392" href="../Compositional/#plfa_plfa-part3-Compositional-3215" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3398" href="../Compositional/#plfa_plfa-part3-Compositional-3373" class="Bound">d₂</a> <a id="plfa_plfa-part3-Compositional-3401" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-3403" href="../Compositional/#plfa_plfa-part3-Compositional-3215" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3409" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3410" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-3414" href="../Compositional/#plfa_plfa-part3-Compositional-3414" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3416" href="../Compositional/#plfa_plfa-part3-Compositional-3416" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3418" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3420" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3422" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3428" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3429" href="../Compositional/#plfa_plfa-part3-Compositional-3215" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3435" href="../Compositional/#plfa_plfa-part3-Compositional-3414" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-3436" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3438" href="../Compositional/#plfa_plfa-part3-Compositional-3416" class="Bound">lt</a>
</pre><p>The “inversion lemma” for lambda abstraction is a special case of the above. The inversion lemma is useful in proving that denotations are preserved by reduction.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lambda-inversion"></a><a id="plfa_plfa-part3-Compositional-3618" href="../Compositional/#plfa_plfa-part3-Compositional-3618" class="Function">lambda-inversion</a> <a id="plfa_plfa-part3-Compositional-3635" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3637" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-3639" href="../Compositional/#plfa_plfa-part3-Compositional-3639" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3640" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3642" href="../Compositional/#plfa_plfa-part3-Compositional-3642" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3644" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3646" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-3650" href="../Compositional/#plfa_plfa-part3-Compositional-3639" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3651" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3653" href="../Compositional/#plfa_plfa-part3-Compositional-3653" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3655" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3657" href="../Compositional/#plfa_plfa-part3-Compositional-3639" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-3659" href="../Untyped/#plfa_plfa-part2-Untyped-3888" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3661" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-3663" href="../Untyped/#plfa_plfa-part2-Untyped-5421" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3665" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-3666" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3668" href="../Compositional/#plfa_plfa-part3-Compositional-3668" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3671" href="../Compositional/#plfa_plfa-part3-Compositional-3671" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-3674" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3676" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-3681" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-3685" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3687" href="../Compositional/#plfa_plfa-part3-Compositional-3642" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3689" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3691" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-3693" href="../Compositional/#plfa_plfa-part3-Compositional-3653" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3695" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Compositional-3697" href="../Compositional/#plfa_plfa-part3-Compositional-3668" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3700" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3702" href="../Compositional/#plfa_plfa-part3-Compositional-3671" class="Bound">v₂</a>
    <a id="plfa_plfa-part3-Compositional-3709" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Compositional-3729" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3731" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3732" href="../Compositional/#plfa_plfa-part3-Compositional-3642" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3734" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-3737" href="../Compositional/#plfa_plfa-part3-Compositional-3668" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-3739" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3741" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3743" href="../Compositional/#plfa_plfa-part3-Compositional-3653" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3745" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Compositional-3747" href="../Compositional/#plfa_plfa-part3-Compositional-3671" class="Bound">v₂</a>
<a id="plfa_plfa-part3-Compositional-3750" href="../Compositional/#plfa_plfa-part3-Compositional-3618" class="Function">lambda-inversion</a><a id="plfa_plfa-part3-Compositional-3766" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-3767" class="Argument">v₁</a> <a id="plfa_plfa-part3-Compositional-3770" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3772" href="../Compositional/#plfa_plfa-part3-Compositional-3772" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-3774" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3776" class="Argument">v₂</a> <a id="plfa_plfa-part3-Compositional-3779" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3781" href="../Compositional/#plfa_plfa-part3-Compositional-3781" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-3783" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-3785" href="../Compositional/#plfa_plfa-part3-Compositional-3785" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3787" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3789" href="../Compositional/#plfa_plfa-part3-Compositional-3215" class="Function">ℰƛ→ℱℰ</a><a id="plfa_plfa-part3-Compositional-3794" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-3795" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-3797" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3799" href="../Compositional/#plfa_plfa-part3-Compositional-3772" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3802" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3804" href="../Compositional/#plfa_plfa-part3-Compositional-3781" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-3806" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-3808" href="../Compositional/#plfa_plfa-part3-Compositional-3785" class="Bound">d</a>
</pre><p>The backward direction of the semantic equation for lambda is even easier to prove than the forward direction. We proceed by induction on the value v.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱℰ→ℰƛ"></a><a id="plfa_plfa-part3-Compositional-3975" href="../Compositional/#plfa_plfa-part3-Compositional-3975" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-3981" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3983" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-3985" href="../Compositional/#plfa_plfa-part3-Compositional-3985" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3986" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3988" href="../Compositional/#plfa_plfa-part3-Compositional-3988" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3990" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3992" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-3996" href="../Compositional/#plfa_plfa-part3-Compositional-3985" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3997" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3999" href="../Compositional/#plfa_plfa-part3-Compositional-3999" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4001" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4003" href="../Compositional/#plfa_plfa-part3-Compositional-3985" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4005" href="../Untyped/#plfa_plfa-part2-Untyped-3888" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4007" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4009" href="../Untyped/#plfa_plfa-part2-Untyped-5421" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4011" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4012" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4014" href="../Compositional/#plfa_plfa-part3-Compositional-4014" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-4016" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4018" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4023" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4027" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4029" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-4031" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4032" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4034" href="../Compositional/#plfa_plfa-part3-Compositional-3999" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4035" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4037" href="../Compositional/#plfa_plfa-part3-Compositional-3988" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4039" href="../Compositional/#plfa_plfa-part3-Compositional-4014" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-4045" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-4060" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4062" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4064" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4065" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4067" href="../Compositional/#plfa_plfa-part3-Compositional-3999" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4068" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4070" href="../Compositional/#plfa_plfa-part3-Compositional-3988" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4072" href="../Compositional/#plfa_plfa-part3-Compositional-4014" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-4074" href="../Compositional/#plfa_plfa-part3-Compositional-3975" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4080" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4081" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4083" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4085" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-4086" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4088" href="../Compositional/#plfa_plfa-part3-Compositional-4088" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4090" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4092" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Compositional-4100" href="../Compositional/#plfa_plfa-part3-Compositional-3975" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4106" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4107" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4109" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4111" href="../Compositional/#plfa_plfa-part3-Compositional-4111" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4114" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-4116" href="../Compositional/#plfa_plfa-part3-Compositional-4116" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4118" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4120" href="../Compositional/#plfa_plfa-part3-Compositional-4120" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4122" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4124" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Compositional-4132" href="../Compositional/#plfa_plfa-part3-Compositional-4120" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-4134" href="../Compositional/#plfa_plfa-part3-Compositional-3975" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4140" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4141" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4143" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4145" href="../Compositional/#plfa_plfa-part3-Compositional-4145" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4148" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-4150" href="../Compositional/#plfa_plfa-part3-Compositional-4150" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4152" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4154" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-4156" href="../Compositional/#plfa_plfa-part3-Compositional-4156" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-4159" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4161" href="../Compositional/#plfa_plfa-part3-Compositional-4161" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-4164" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-4166" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4168" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-4176" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4177" href="../Compositional/#plfa_plfa-part3-Compositional-3975" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4183" href="../Compositional/#plfa_plfa-part3-Compositional-4156" class="Bound">d1</a><a id="plfa_plfa-part3-Compositional-4185" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4187" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4188" href="../Compositional/#plfa_plfa-part3-Compositional-3975" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4194" href="../Compositional/#plfa_plfa-part3-Compositional-4161" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-4196" class="Symbol">)</a>
</pre><p>So indeed, the denotational semantics is compositional with respect to lambda abstraction, as witnessed by the function <code>ℱ</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lam-equiv"></a><a id="plfa_plfa-part3-Compositional-4337" href="../Compositional/#plfa_plfa-part3-Compositional-4337" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-4347" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4349" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4351" href="../Compositional/#plfa_plfa-part3-Compositional-4351" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4352" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4354" href="../Compositional/#plfa_plfa-part3-Compositional-4354" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4356" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4358" href="../Compositional/#plfa_plfa-part3-Compositional-4351" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4360" href="../Untyped/#plfa_plfa-part2-Untyped-3888" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4362" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4364" href="../Untyped/#plfa_plfa-part2-Untyped-5421" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4366" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4367" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4371" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4373" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4375" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4376" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4378" href="../Compositional/#plfa_plfa-part3-Compositional-4354" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4379" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4381" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-4383" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-4385" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4386" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4388" href="../Compositional/#plfa_plfa-part3-Compositional-4354" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4389" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-4391" href="../Compositional/#plfa_plfa-part3-Compositional-4337" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-4401" href="../Compositional/#plfa_plfa-part3-Compositional-4401" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4403" href="../Compositional/#plfa_plfa-part3-Compositional-4403" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-4405" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4407" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-4409" href="../Compositional/#plfa_plfa-part3-Compositional-3215" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4415" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4417" href="../Compositional/#plfa_plfa-part3-Compositional-3975" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4423" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="equation-for-function-application">Equation for function application</h2><p>Next we fill in the ellipses for the equation concerning function application.</p><pre><code>ℰ (M · N) ≃ ... ℰ M ... ℰ N ...</code></pre><p>For this we need to define a function that takes two denotations, both in context <code>Γ</code>, and produces another one in context <code>Γ</code>. This function, let us name it <code>●</code>, needs to mimic the non-recursive aspects of the semantics of an application <code>L · M</code>. We cannot proceed as easily as for <code>ℱ</code> and define the function by recursion on value <code>v</code> because, for example, the rule <code>↦-elim</code> applies to any value. Instead we shall define <code>●</code> in a way that directly deals with the <code>↦-elim</code> and <code>⊥-intro</code> rules but ignores <code>⊔-intro</code>. This makes the forward direction of the proof more difficult, and the case for <code>⊔-intro</code> demonstrates why the <code>⊑-dist</code> rule is important.</p><p>So we define the application of <code>D₁</code> to <code>D₂</code>, written <code>D₁ ● D₂</code>, to include any value <code>w</code> equivalent to <code>⊥</code>, for the <code>⊥-intro</code> rule, and to include any value <code>w</code> that is the output of an entry <code>v ↦ w</code> in <code>D₁</code>, provided the input <code>v</code> is in <code>D₂</code>, for the <code>↦-elim</code> rule.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-5520" class="Keyword">infixl</a> <a id="plfa_plfa-part3-Compositional-5527" class="Number">7</a> <a id="plfa_plfa-part3-Compositional-5529" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">_●_</a>

<a id="plfa_plfa-part3-Compositional-_●_"></a><a id="plfa_plfa-part3-Compositional-5534" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">_●_</a> <a id="plfa_plfa-part3-Compositional-5538" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-5540" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-5542" href="../Compositional/#plfa_plfa-part3-Compositional-5542" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-5543" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-5545" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-5547" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-5558" href="../Compositional/#plfa_plfa-part3-Compositional-5542" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-5560" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-5562" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-5573" href="../Compositional/#plfa_plfa-part3-Compositional-5542" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-5575" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-5577" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-5588" href="../Compositional/#plfa_plfa-part3-Compositional-5542" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-5590" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5591" href="../Compositional/#plfa_plfa-part3-Compositional-5591" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-5594" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-5596" href="../Compositional/#plfa_plfa-part3-Compositional-5596" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-5598" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-5600" href="../Compositional/#plfa_plfa-part3-Compositional-5600" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-5602" href="../Compositional/#plfa_plfa-part3-Compositional-5602" class="Bound">w</a> <a id="plfa_plfa-part3-Compositional-5604" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5606" href="../Compositional/#plfa_plfa-part3-Compositional-5602" class="Bound">w</a> <a id="plfa_plfa-part3-Compositional-5608" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-5610" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Compositional-5612" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="plfa_plfa-part3-Compositional-5614" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Compositional-5617" href="../Compositional/#plfa_plfa-part3-Compositional-5617" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-5619" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Compositional-5621" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Compositional-5627" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a><a id="plfa_plfa-part3-Compositional-5628" class="Symbol">(</a> <a id="plfa_plfa-part3-Compositional-5630" href="../Compositional/#plfa_plfa-part3-Compositional-5591" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-5633" href="../Compositional/#plfa_plfa-part3-Compositional-5600" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-5635" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5636" href="../Compositional/#plfa_plfa-part3-Compositional-5617" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-5638" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-5640" href="../Compositional/#plfa_plfa-part3-Compositional-5602" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-5641" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-5643" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Compositional-5645" href="../Compositional/#plfa_plfa-part3-Compositional-5596" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-5648" href="../Compositional/#plfa_plfa-part3-Compositional-5600" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-5650" href="../Compositional/#plfa_plfa-part3-Compositional-5617" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-5652" class="Symbol">)</a>
</pre><p>If one squints hard enough, the <code>_●_</code> operator starts to look like the <code>apply</code> operation familiar to functional programmers. It takes two parameters and applies the first to the second.</p><p>Next we consider the inversion lemma for application, which is also the forward direction of the semantic equation for application. We describe the proof below.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰ·→●ℰ"></a><a id="plfa_plfa-part3-Compositional-6017" href="../Compositional/#plfa_plfa-part3-Compositional-6017" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6023" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6025" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-6027" href="../Compositional/#plfa_plfa-part3-Compositional-6027" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-6028" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6030" href="../Compositional/#plfa_plfa-part3-Compositional-6030" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-6032" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6034" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-6038" href="../Compositional/#plfa_plfa-part3-Compositional-6027" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-6039" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6041" href="../Compositional/#plfa_plfa-part3-Compositional-6041" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-6043" href="../Compositional/#plfa_plfa-part3-Compositional-6043" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-6045" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6047" href="../Compositional/#plfa_plfa-part3-Compositional-6027" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-6049" href="../Untyped/#plfa_plfa-part2-Untyped-5421" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-6051" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-6052" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6054" href="../Compositional/#plfa_plfa-part3-Compositional-6054" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-6056" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6058" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-6063" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-6067" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-6069" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-6071" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6072" href="../Compositional/#plfa_plfa-part3-Compositional-6041" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-6074" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-6076" href="../Compositional/#plfa_plfa-part3-Compositional-6043" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-6077" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6079" href="../Compositional/#plfa_plfa-part3-Compositional-6030" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-6081" href="../Compositional/#plfa_plfa-part3-Compositional-6054" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-6087" class="Comment">----------------</a>
  <a id="plfa_plfa-part3-Compositional-6106" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-6108" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6109" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-6111" href="../Compositional/#plfa_plfa-part3-Compositional-6041" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-6113" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-6115" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-6117" href="../Compositional/#plfa_plfa-part3-Compositional-6043" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-6118" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6120" href="../Compositional/#plfa_plfa-part3-Compositional-6030" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-6122" href="../Compositional/#plfa_plfa-part3-Compositional-6054" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-6124" href="../Compositional/#plfa_plfa-part3-Compositional-6017" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6130" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6131" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Compositional-6137" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-6138" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-6140" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6142" href="../Compositional/#plfa_plfa-part3-Compositional-6142" class="Bound">v′</a><a id="plfa_plfa-part3-Compositional-6144" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6146" href="../Compositional/#plfa_plfa-part3-Compositional-6146" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-6149" href="../Compositional/#plfa_plfa-part3-Compositional-6149" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-6151" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6153" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6155" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6160" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6162" href="../Compositional/#plfa_plfa-part3-Compositional-6142" class="Bound">v′</a> <a id="plfa_plfa-part3-Compositional-6165" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6167" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6169" href="../Compositional/#plfa_plfa-part3-Compositional-6146" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-6172" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6174" href="../Compositional/#plfa_plfa-part3-Compositional-6149" class="Bound">d₂</a> <a id="plfa_plfa-part3-Compositional-6177" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6179" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-6181" href="../Compositional/#plfa_plfa-part3-Compositional-6017" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6187" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-6188" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-6190" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6192" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-6193" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6195" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-6203" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6205" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6210" href="../Denotational/#plfa_plfa-part3-Denotational-4370" class="InductiveConstructor">⊑-bot</a>
<a id="plfa_plfa-part3-Compositional-6216" href="../Compositional/#plfa_plfa-part3-Compositional-6017" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6222" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-6223" href="../Compositional/#plfa_plfa-part3-Compositional-6223" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-6224" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6226" href="../Compositional/#plfa_plfa-part3-Compositional-6226" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-6227" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6229" href="../Compositional/#plfa_plfa-part3-Compositional-6229" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-6230" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6232" href="../Compositional/#plfa_plfa-part3-Compositional-6232" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-6233" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6235" href="../Compositional/#plfa_plfa-part3-Compositional-6235" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-6236" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6238" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6239" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Compositional-6246" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-6247" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-6249" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6251" href="../Compositional/#plfa_plfa-part3-Compositional-6251" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-6253" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6255" class="Argument">w</a> <a id="plfa_plfa-part3-Compositional-6257" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6259" href="../Compositional/#plfa_plfa-part3-Compositional-6259" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-6261" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6263" href="../Compositional/#plfa_plfa-part3-Compositional-6263" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-6266" href="../Compositional/#plfa_plfa-part3-Compositional-6266" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-6268" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Compositional-6274" class="Keyword">with</a> <a id="plfa_plfa-part3-Compositional-6279" href="../Compositional/#plfa_plfa-part3-Compositional-6017" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6285" href="../Compositional/#plfa_plfa-part3-Compositional-6263" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-6288" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6290" href="../Compositional/#plfa_plfa-part3-Compositional-6017" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6296" href="../Compositional/#plfa_plfa-part3-Compositional-6266" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Compositional-6299" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-6303" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6305" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6310" href="../Compositional/#plfa_plfa-part3-Compositional-6310" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-6314" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6316" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6321" href="../Compositional/#plfa_plfa-part3-Compositional-6321" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-6325" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6327" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6332" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6333" href="../Denotational/#plfa_plfa-part3-Denotational-4395" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-6342" href="../Compositional/#plfa_plfa-part3-Compositional-6310" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-6346" href="../Compositional/#plfa_plfa-part3-Compositional-6321" class="Bound">lt2</a><a id="plfa_plfa-part3-Compositional-6349" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-6351" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-6355" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6357" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6362" href="../Compositional/#plfa_plfa-part3-Compositional-6362" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-6366" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6368" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6373" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6375" href="../Compositional/#plfa_plfa-part3-Compositional-6375" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6379" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6381" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6383" href="../Compositional/#plfa_plfa-part3-Compositional-6383" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6389" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6391" href="../Compositional/#plfa_plfa-part3-Compositional-6391" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6396" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6398" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6400" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-6408" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6413" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6415" href="../Compositional/#plfa_plfa-part3-Compositional-6375" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6419" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6421" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6423" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-6427" href="../Compositional/#plfa_plfa-part3-Compositional-6383" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6433" href="../Compositional/#plfa_plfa-part3-Compositional-6459" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6436" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6438" href="../Compositional/#plfa_plfa-part3-Compositional-6391" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6443" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6445" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part3-Compositional-6453" class="Keyword">where</a> <a id="plfa_plfa-part3-Compositional-6459" href="../Compositional/#plfa_plfa-part3-Compositional-6459" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6462" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6464" href="../Compositional/#plfa_plfa-part3-Compositional-6375" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6468" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-6470" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6471" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-6474" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-6476" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-6478" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6480" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-6482" href="../Compositional/#plfa_plfa-part3-Compositional-6375" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6486" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-6488" class="Bound">v₂</a>
            <a id="plfa_plfa-part3-Compositional-6503" href="../Compositional/#plfa_plfa-part3-Compositional-6459" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6506" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6508" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6509" href="../Denotational/#plfa_plfa-part3-Denotational-4696" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-6515" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-6522" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6523" href="../Denotational/#plfa_plfa-part3-Denotational-4395" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-6532" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6533" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-6541" href="../Compositional/#plfa_plfa-part3-Compositional-6362" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-6545" href="../Denotational/#plfa_plfa-part3-Denotational-4370" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-6550" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6552" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Compositional-6558" class="Symbol">))</a>
<a id="plfa_plfa-part3-Compositional-6561" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-6565" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6567" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6572" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6574" href="../Compositional/#plfa_plfa-part3-Compositional-6574" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6578" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6580" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6582" href="../Compositional/#plfa_plfa-part3-Compositional-6582" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6588" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6590" href="../Compositional/#plfa_plfa-part3-Compositional-6590" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6595" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6597" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6599" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6601" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6606" href="../Compositional/#plfa_plfa-part3-Compositional-6606" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-6610" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-6618" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6623" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6625" href="../Compositional/#plfa_plfa-part3-Compositional-6574" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6629" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6631" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6633" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-6637" href="../Compositional/#plfa_plfa-part3-Compositional-6582" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6643" href="../Compositional/#plfa_plfa-part3-Compositional-6669" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6646" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6648" href="../Compositional/#plfa_plfa-part3-Compositional-6590" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6653" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6655" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part3-Compositional-6663" class="Keyword">where</a> <a id="plfa_plfa-part3-Compositional-6669" href="../Compositional/#plfa_plfa-part3-Compositional-6669" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6672" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6674" href="../Compositional/#plfa_plfa-part3-Compositional-6574" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6678" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-6680" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6681" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-6684" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-6686" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-6688" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6690" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-6692" href="../Compositional/#plfa_plfa-part3-Compositional-6574" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6696" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-6698" class="Bound">v₁</a>
            <a id="plfa_plfa-part3-Compositional-6713" href="../Compositional/#plfa_plfa-part3-Compositional-6669" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6716" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6718" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6719" href="../Denotational/#plfa_plfa-part3-Denotational-4696" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-6725" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-6732" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6733" href="../Denotational/#plfa_plfa-part3-Denotational-4395" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-6742" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-6749" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6750" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-6758" href="../Compositional/#plfa_plfa-part3-Compositional-6606" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-6762" href="../Denotational/#plfa_plfa-part3-Denotational-4370" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-6767" class="Symbol">)))</a>
<a id="plfa_plfa-part3-Compositional-6771" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-6775" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6777" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6782" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6784" href="../Compositional/#plfa_plfa-part3-Compositional-6784" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6788" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6790" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6792" href="../Compositional/#plfa_plfa-part3-Compositional-6792" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6798" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6800" href="../Compositional/#plfa_plfa-part3-Compositional-6800" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6805" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6807" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6809" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6811" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6816" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6818" href="../Compositional/#plfa_plfa-part3-Compositional-6818" class="Bound">v₁′′</a> <a id="plfa_plfa-part3-Compositional-6823" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6825" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6827" href="../Compositional/#plfa_plfa-part3-Compositional-6827" class="Bound">L↓v12′</a> <a id="plfa_plfa-part3-Compositional-6834" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6836" href="../Compositional/#plfa_plfa-part3-Compositional-6836" class="Bound">M↓v3′</a> <a id="plfa_plfa-part3-Compositional-6842" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6844" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6846" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-6854" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-6858" href="../Compositional/#plfa_plfa-part3-Compositional-6858" class="Bound">L↓⊔</a> <a id="plfa_plfa-part3-Compositional-6862" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6864" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-6872" href="../Compositional/#plfa_plfa-part3-Compositional-6792" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6878" href="../Compositional/#plfa_plfa-part3-Compositional-6827" class="Bound">L↓v12′</a> <a id="plfa_plfa-part3-Compositional-6885" class="Keyword">in</a>
      <a id="plfa_plfa-part3-Compositional-6894" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-6898" href="../Compositional/#plfa_plfa-part3-Compositional-6898" class="Bound">M↓⊔</a> <a id="plfa_plfa-part3-Compositional-6902" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6904" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-6912" href="../Compositional/#plfa_plfa-part3-Compositional-6800" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6917" href="../Compositional/#plfa_plfa-part3-Compositional-6836" class="Bound">M↓v3′</a> <a id="plfa_plfa-part3-Compositional-6923" class="Keyword">in</a>
      <a id="plfa_plfa-part3-Compositional-6932" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6937" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6939" href="../Compositional/#plfa_plfa-part3-Compositional-6784" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6943" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-6945" href="../Compositional/#plfa_plfa-part3-Compositional-6818" class="Bound">v₁′′</a> <a id="plfa_plfa-part3-Compositional-6950" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6952" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6954" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-6958" href="../Compositional/#plfa_plfa-part3-Compositional-6858" class="Bound">L↓⊔</a> <a id="plfa_plfa-part3-Compositional-6962" href="../Denotational/#plfa_plfa-part3-Denotational-6112" class="Function">⊔↦⊔-dist</a> <a id="plfa_plfa-part3-Compositional-6971" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6973" href="../Compositional/#plfa_plfa-part3-Compositional-6898" class="Bound">M↓⊔</a> <a id="plfa_plfa-part3-Compositional-6977" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6979" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-6981" href="../Compositional/#plfa_plfa-part3-Compositional-6017" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6987" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-6988" href="../Compositional/#plfa_plfa-part3-Compositional-6988" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-6989" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6991" href="../Compositional/#plfa_plfa-part3-Compositional-6991" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-6992" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6994" href="../Compositional/#plfa_plfa-part3-Compositional-6994" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-6995" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6997" href="../Compositional/#plfa_plfa-part3-Compositional-6997" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-6998" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7000" href="../Compositional/#plfa_plfa-part3-Compositional-7000" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-7001" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-7003" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7004" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-7008" href="../Compositional/#plfa_plfa-part3-Compositional-7008" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-7010" href="../Compositional/#plfa_plfa-part3-Compositional-7010" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-7012" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Compositional-7018" class="Keyword">with</a> <a id="plfa_plfa-part3-Compositional-7023" href="../Compositional/#plfa_plfa-part3-Compositional-6017" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7029" href="../Compositional/#plfa_plfa-part3-Compositional-7008" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-7031" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-7035" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-7037" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-7042" href="../Compositional/#plfa_plfa-part3-Compositional-7042" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-7046" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7048" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-7053" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7054" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-7062" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-7065" href="../Compositional/#plfa_plfa-part3-Compositional-7042" class="Bound">lt2</a><a id="plfa_plfa-part3-Compositional-7068" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-7070" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-7074" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-7076" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-7081" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7083" href="../Compositional/#plfa_plfa-part3-Compositional-7083" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-7086" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7088" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7090" href="../Compositional/#plfa_plfa-part3-Compositional-7090" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-7096" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7098" href="../Compositional/#plfa_plfa-part3-Compositional-7098" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-7103" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-7105" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-7107" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-7115" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-7120" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7122" href="../Compositional/#plfa_plfa-part3-Compositional-7083" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-7125" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7127" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7129" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-7133" href="../Compositional/#plfa_plfa-part3-Compositional-7090" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-7139" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7140" href="../Denotational/#plfa_plfa-part3-Denotational-4696" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-7146" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-7153" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-7155" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7157" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7159" href="../Compositional/#plfa_plfa-part3-Compositional-7098" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-7164" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-7166" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
</pre><p>We proceed by induction on the semantics.</p><ul><li><p>In case <code>↦-elim</code> we have <code>γ ⊢ L ↓ (v′ ↦ v)</code> and <code>γ ⊢ M ↓ v′</code>, which is all we need to show <code>(ℰ L ● ℰ M) γ v</code>.</p></li><li><p>In case <code>⊥-intro</code> we have <code>v = ⊥</code>. We conclude that <code>v ⊑ ⊥</code>.</p></li><li><p>In case <code>⊔-intro</code> we have <code>ℰ (L · M) γ v₁</code> and <code>ℰ (L · M) γ v₂</code> and need to show <code>(ℰ L ● ℰ M) γ (v₁ ⊔ v₂)</code>. By the induction hypothesis, we have <code>(ℰ L ● ℰ M) γ v₁</code> and <code>(ℰ L ● ℰ M) γ v₂</code>. We have four subcases to consider.</p><ul><li><p>Suppose <code>v₁ ⊑ ⊥</code> and <code>v₂ ⊑ ⊥</code>. Then <code>v₁ ⊔ v₂ ⊑ ⊥</code>.</p></li><li><p>Suppose <code>v₁ ⊑ ⊥</code>, <code>γ ⊢ L ↓ v₁′ ↦ v₂</code>, and <code>γ ⊢ M ↓ v₁′</code>. We have <code>γ ⊢ L ↓ v₁′ ↦ (v₁ ⊔ v₂)</code> by rule <code>sub</code> because <code>v₁′ ↦ (v₁ ⊔ v₂) ⊑ v₁′ ↦ v₂</code>.</p></li><li><p>Suppose <code>γ ⊢ L ↓ v₁′ ↦ v₁</code>, <code>γ ⊢ M ↓ v₁′</code>, and <code>v₂ ⊑ ⊥</code>. We have <code>γ ⊢ L ↓ v₁′ ↦ (v₁ ⊔ v₂)</code> by rule <code>sub</code> because <code>v₁′ ↦ (v₁ ⊔ v₂) ⊑ v₁′ ↦ v₁</code>.</p></li><li><p>Suppose <code>γ ⊢ L ↓ v₁′′ ↦ v₁, γ ⊢ M ↓ v₁′′</code>, <code>γ ⊢ L ↓ v₁′ ↦ v₂</code>, and <code>γ ⊢ M ↓ v₁′</code>. This case is the most interesting. By two uses of the rule <code>⊔-intro</code> we have <code>γ ⊢ L ↓ (v₁′ ↦ v₂) ⊔ (v₁′′ ↦ v₁)</code> and <code>γ ⊢ M ↓ (v₁′ ⊔ v₁′′)</code>. But this does not yet match what we need for <code>ℰ L ● ℰ M</code> because the result of <code>L</code> must be an <code>↦</code> whose input entry is <code>v₁′ ⊔ v₁′′</code>. So we use the <code>sub</code> rule to obtain <code>γ ⊢ L ↓ (v₁′ ⊔ v₁′′) ↦ (v₁ ⊔ v₂)</code>, using the <code>⊔↦⊔-dist</code> lemma (thanks to the <code>⊑-dist</code> rule) to show that</p><pre><code>  (v₁′ ⊔ v₁′′) ↦ (v₁ ⊔ v₂) ⊑ (v₁′ ↦ v₂) ⊔ (v₁′′ ↦ v₁)</code></pre><p>So we have proved what is needed for this case.</p></li></ul></li><li><p>In case <code>sub</code> we have <code>Γ ⊢ L · M ↓ v₁</code> and <code>v ⊑ v₁</code>. By the induction hypothesis, we have <code>(ℰ L ● ℰ M) γ v₁</code>. We have two subcases to consider.</p><ul><li>Suppose <code>v₁ ⊑ ⊥</code>. We conclude that <code>v ⊑ ⊥</code>.</li><li>Suppose <code>Γ ⊢ L ↓ v′ → v₁</code> and <code>Γ ⊢ M ↓ v′</code>. We conclude with <code>Γ ⊢ L ↓ v′ → v</code> by rule <code>sub</code>, because <code>v′ → v ⊑ v′ → v₁</code>.</li></ul></li></ul><p>The forward direction is proved by cases on the premise <code>(ℰ L ● ℰ M) γ v</code>. In case <code>v ⊑ ⊥</code>, we obtain <code>Γ ⊢ L · M ↓ ⊥</code> by rule <code>⊥-intro</code>. Otherwise, we conclude immediately by rule <code>↦-elim</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-●ℰ→ℰ·"></a><a id="plfa_plfa-part3-Compositional-9236" href="../Compositional/#plfa_plfa-part3-Compositional-9236" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-9242" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9244" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-9246" href="../Compositional/#plfa_plfa-part3-Compositional-9246" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-9247" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9249" href="../Compositional/#plfa_plfa-part3-Compositional-9249" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9251" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9253" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-9257" href="../Compositional/#plfa_plfa-part3-Compositional-9246" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-9258" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9260" href="../Compositional/#plfa_plfa-part3-Compositional-9260" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-9262" href="../Compositional/#plfa_plfa-part3-Compositional-9262" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-9264" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9266" href="../Compositional/#plfa_plfa-part3-Compositional-9246" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-9268" href="../Untyped/#plfa_plfa-part2-Untyped-5421" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-9270" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-9271" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9273" href="../Compositional/#plfa_plfa-part3-Compositional-9273" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-9274" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-9278" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-9280" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9281" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9283" href="../Compositional/#plfa_plfa-part3-Compositional-9260" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-9285" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-9287" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9289" href="../Compositional/#plfa_plfa-part3-Compositional-9262" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-9290" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9292" href="../Compositional/#plfa_plfa-part3-Compositional-9249" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9294" href="../Compositional/#plfa_plfa-part3-Compositional-9273" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-9300" class="Comment">----------------</a>
  <a id="plfa_plfa-part3-Compositional-9319" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-9321" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9323" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9324" href="../Compositional/#plfa_plfa-part3-Compositional-9260" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-9326" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-9328" href="../Compositional/#plfa_plfa-part3-Compositional-9262" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-9329" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9331" href="../Compositional/#plfa_plfa-part3-Compositional-9249" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9333" href="../Compositional/#plfa_plfa-part3-Compositional-9273" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-9335" href="../Compositional/#plfa_plfa-part3-Compositional-9236" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-9341" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-9342" href="../Compositional/#plfa_plfa-part3-Compositional-9342" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-9343" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9345" href="../Compositional/#plfa_plfa-part3-Compositional-9345" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-9346" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-9348" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9349" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-9354" href="../Compositional/#plfa_plfa-part3-Compositional-9354" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-9356" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9358" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-9360" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-9364" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-9372" href="../Compositional/#plfa_plfa-part3-Compositional-9354" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-9375" href="../Compositional/#plfa_plfa-part3-Compositional-9236" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-9381" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-9382" href="../Compositional/#plfa_plfa-part3-Compositional-9382" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-9383" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9385" href="../Compositional/#plfa_plfa-part3-Compositional-9385" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-9386" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-9388" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9389" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-9394" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-9396" href="../Compositional/#plfa_plfa-part3-Compositional-9396" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-9399" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-9401" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-9403" href="../Compositional/#plfa_plfa-part3-Compositional-9403" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-9406" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-9408" href="../Compositional/#plfa_plfa-part3-Compositional-9408" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-9411" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-9413" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-9414" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9416" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-9418" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Compositional-9425" href="../Compositional/#plfa_plfa-part3-Compositional-9403" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-9428" href="../Compositional/#plfa_plfa-part3-Compositional-9408" class="Bound">d2</a>
</pre><p>So we have proved that the semantics is compositional with respect to function application, as witnessed by the <code>●</code> function.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-app-equiv"></a><a id="plfa_plfa-part3-Compositional-9571" href="../Compositional/#plfa_plfa-part3-Compositional-9571" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-9581" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9583" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-9585" href="../Compositional/#plfa_plfa-part3-Compositional-9585" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-9586" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9588" href="../Compositional/#plfa_plfa-part3-Compositional-9588" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-9590" href="../Compositional/#plfa_plfa-part3-Compositional-9590" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-9592" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9594" href="../Compositional/#plfa_plfa-part3-Compositional-9585" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-9596" href="../Untyped/#plfa_plfa-part2-Untyped-5421" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-9598" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-9599" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-9603" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-9605" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9607" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9608" href="../Compositional/#plfa_plfa-part3-Compositional-9588" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-9610" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-9612" href="../Compositional/#plfa_plfa-part3-Compositional-9590" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-9613" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9615" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-9617" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9618" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9620" href="../Compositional/#plfa_plfa-part3-Compositional-9588" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-9621" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9623" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-9625" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9626" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9628" href="../Compositional/#plfa_plfa-part3-Compositional-9590" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-9629" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-9631" href="../Compositional/#plfa_plfa-part3-Compositional-9571" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-9641" href="../Compositional/#plfa_plfa-part3-Compositional-9641" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9643" href="../Compositional/#plfa_plfa-part3-Compositional-9643" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-9645" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-9647" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-9649" href="../Compositional/#plfa_plfa-part3-Compositional-6017" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-9655" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-9657" href="../Compositional/#plfa_plfa-part3-Compositional-9236" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-9663" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
</pre><p>We also need an inversion lemma for variables. If <code>Γ ⊢ x ↓ v</code>, then <code>v ⊑ γ x</code>. The proof is a straightforward induction on the semantics.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-var-inv"></a><a id="plfa_plfa-part3-Compositional-9817" href="../Compositional/#plfa_plfa-part3-Compositional-9817" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-9825" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9827" class="Symbol">∀</a> <a id="plfa_plfa-part3-Compositional-9829" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-9830" href="../Compositional/#plfa_plfa-part3-Compositional-9830" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-9832" href="../Compositional/#plfa_plfa-part3-Compositional-9832" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-9834" href="../Compositional/#plfa_plfa-part3-Compositional-9834" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-9835" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-9837" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-9838" href="../Compositional/#plfa_plfa-part3-Compositional-9838" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9840" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9842" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-9846" href="../Compositional/#plfa_plfa-part3-Compositional-9830" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-9847" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-9851" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-9853" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9855" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9856" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-9858" href="../Compositional/#plfa_plfa-part3-Compositional-9834" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-9859" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9861" href="../Compositional/#plfa_plfa-part3-Compositional-9838" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9863" href="../Compositional/#plfa_plfa-part3-Compositional-9832" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-9869" class="Comment">-------------------</a>
  <a id="plfa_plfa-part3-Compositional-9891" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-9893" href="../Compositional/#plfa_plfa-part3-Compositional-9832" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-9895" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-9897" href="../Compositional/#plfa_plfa-part3-Compositional-9838" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9899" href="../Compositional/#plfa_plfa-part3-Compositional-9834" class="Bound">x</a>
<a id="plfa_plfa-part3-Compositional-9901" href="../Compositional/#plfa_plfa-part3-Compositional-9817" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-9909" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9910" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Compositional-9913" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9915" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-9917" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a>
<a id="plfa_plfa-part3-Compositional-9924" href="../Compositional/#plfa_plfa-part3-Compositional-9817" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-9932" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9933" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-9941" href="../Compositional/#plfa_plfa-part3-Compositional-9941" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-9944" href="../Compositional/#plfa_plfa-part3-Compositional-9944" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-9946" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9948" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-9950" href="../Denotational/#plfa_plfa-part3-Denotational-4395" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-9959" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9960" href="../Compositional/#plfa_plfa-part3-Compositional-9817" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-9968" href="../Compositional/#plfa_plfa-part3-Compositional-9941" class="Bound">d₁</a><a id="plfa_plfa-part3-Compositional-9970" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9972" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9973" href="../Compositional/#plfa_plfa-part3-Compositional-9817" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-9981" href="../Compositional/#plfa_plfa-part3-Compositional-9944" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-9983" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-9985" href="../Compositional/#plfa_plfa-part3-Compositional-9817" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-9993" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9994" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-9998" href="../Compositional/#plfa_plfa-part3-Compositional-9998" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-10000" href="../Compositional/#plfa_plfa-part3-Compositional-10000" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-10002" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-10004" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-10006" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-10014" href="../Compositional/#plfa_plfa-part3-Compositional-10000" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-10017" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-10018" href="../Compositional/#plfa_plfa-part3-Compositional-9817" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-10026" href="../Compositional/#plfa_plfa-part3-Compositional-9998" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-10027" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-10029" href="../Compositional/#plfa_plfa-part3-Compositional-9817" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-10037" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-10045" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-10047" href="../Denotational/#plfa_plfa-part3-Denotational-4370" class="InductiveConstructor">⊑-bot</a>
</pre><p>To round-out the semantic equations, we establish the following one for variables.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-var-equiv"></a><a id="plfa_plfa-part3-Compositional-10150" href="../Compositional/#plfa_plfa-part3-Compositional-10150" class="Function">var-equiv</a> <a id="plfa_plfa-part3-Compositional-10160" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-10162" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-10164" href="../Compositional/#plfa_plfa-part3-Compositional-10164" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-10165" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-10167" href="../Compositional/#plfa_plfa-part3-Compositional-10167" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-10169" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-10171" href="../Compositional/#plfa_plfa-part3-Compositional-10164" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-10173" href="../Untyped/#plfa_plfa-part2-Untyped-4377" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Compositional-10175" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-10176" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-10178" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-10180" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-10182" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-10183" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-10185" href="../Compositional/#plfa_plfa-part3-Compositional-10167" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-10186" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-10188" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-10190" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-10193" href="../Compositional/#plfa_plfa-part3-Compositional-10193" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-10195" href="../Compositional/#plfa_plfa-part3-Compositional-10195" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-10197" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-10199" href="../Compositional/#plfa_plfa-part3-Compositional-10195" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-10201" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-10203" href="../Compositional/#plfa_plfa-part3-Compositional-10193" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-10205" href="../Compositional/#plfa_plfa-part3-Compositional-10167" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-10206" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-10208" href="../Compositional/#plfa_plfa-part3-Compositional-10150" class="Function">var-equiv</a> <a id="plfa_plfa-part3-Compositional-10218" href="../Compositional/#plfa_plfa-part3-Compositional-10218" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-10220" href="../Compositional/#plfa_plfa-part3-Compositional-10220" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-10222" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-10224" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-10226" href="../Compositional/#plfa_plfa-part3-Compositional-9817" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-10234" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-10236" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-10239" href="../Compositional/#plfa_plfa-part3-Compositional-10239" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-10242" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-10244" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-10248" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Compositional-10252" href="../Compositional/#plfa_plfa-part3-Compositional-10239" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-10254" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-10256" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="congruence">Congruence</h2><p>The main work of this chapter is complete: we have established semantic equations that show how the denotational semantics is compositional. In this section and the next we make use of these equations to prove some corollaries: that denotational equality is a <em>congruence</em> and to prove the <em>compositionality property</em>, which states that surrounding two denotationally-equal terms in the same context produces two programs that are denotationally equal.</p><p>We begin by showing that denotational equality is a congruence with respect to lambda abstraction: that <code>ℰ N ≃ ℰ N′</code> implies <code>ℰ (ƛ N) ≃ ℰ (ƛ N′)</code>. We shall use the <code>lam-equiv</code> equation to reduce this question to whether <code>ℱ</code> is a congruence.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱ-cong"></a><a id="plfa_plfa-part3-Compositional-10984" href="../Compositional/#plfa_plfa-part3-Compositional-10984" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-10991" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-10993" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-10995" href="../Compositional/#plfa_plfa-part3-Compositional-10995" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-10996" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-10998" href="../Compositional/#plfa_plfa-part3-Compositional-10998" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11000" href="../Compositional/#plfa_plfa-part3-Compositional-11000" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-11003" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11005" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-11016" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11017" href="../Compositional/#plfa_plfa-part3-Compositional-10995" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-11019" href="../Untyped/#plfa_plfa-part2-Untyped-3888" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-11021" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-11022" class="Symbol">)}</a>
  <a id="plfa_plfa-part3-Compositional-11027" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11029" href="../Compositional/#plfa_plfa-part3-Compositional-10998" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11031" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-11033" href="../Compositional/#plfa_plfa-part3-Compositional-11000" class="Bound">D′</a>
    <a id="plfa_plfa-part3-Compositional-11040" class="Comment">-----------</a>
  <a id="plfa_plfa-part3-Compositional-11054" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11056" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11058" href="../Compositional/#plfa_plfa-part3-Compositional-10998" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11060" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-11062" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11064" href="../Compositional/#plfa_plfa-part3-Compositional-11000" class="Bound">D′</a>
<a id="plfa_plfa-part3-Compositional-11067" href="../Compositional/#plfa_plfa-part3-Compositional-10984" class="Function">ℱ-cong</a><a id="plfa_plfa-part3-Compositional-11073" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11074" href="../Compositional/#plfa_plfa-part3-Compositional-11074" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-11075" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11077" href="../Compositional/#plfa_plfa-part3-Compositional-11077" class="Bound">D≃D′</a> <a id="plfa_plfa-part3-Compositional-11082" href="../Compositional/#plfa_plfa-part3-Compositional-11082" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-11084" href="../Compositional/#plfa_plfa-part3-Compositional-11084" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-11086" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-11090" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-11092" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-11095" href="../Compositional/#plfa_plfa-part3-Compositional-11095" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-11097" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11099" href="../Compositional/#plfa_plfa-part3-Compositional-11162" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-11101" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11102" href="../Compositional/#plfa_plfa-part3-Compositional-11082" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11103" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11105" href="../Compositional/#plfa_plfa-part3-Compositional-11084" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-11106" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11108" href="../Compositional/#plfa_plfa-part3-Compositional-11095" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-11110" href="../Compositional/#plfa_plfa-part3-Compositional-11077" class="Bound">D≃D′</a><a id="plfa_plfa-part3-Compositional-11114" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11116" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-11118" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-11121" href="../Compositional/#plfa_plfa-part3-Compositional-11121" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-11123" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11125" href="../Compositional/#plfa_plfa-part3-Compositional-11162" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-11127" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11128" href="../Compositional/#plfa_plfa-part3-Compositional-11082" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11129" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11131" href="../Compositional/#plfa_plfa-part3-Compositional-11084" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-11132" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11134" href="../Compositional/#plfa_plfa-part3-Compositional-11121" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-11136" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11137" href="../Denotational/#plfa_plfa-part3-Denotational-17871" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-11143" href="../Compositional/#plfa_plfa-part3-Compositional-11077" class="Bound">D≃D′</a><a id="plfa_plfa-part3-Compositional-11147" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-11150" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Compositional-11154" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-11162" href="../Compositional/#plfa_plfa-part3-Compositional-11162" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-11165" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11167" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-11169" href="../Compositional/#plfa_plfa-part3-Compositional-11169" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-11171" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11173" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-11177" href="../Compositional/#plfa_plfa-part3-Compositional-11074" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-11178" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11180" href="../Compositional/#plfa_plfa-part3-Compositional-11180" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-11181" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11183" href="../Compositional/#plfa_plfa-part3-Compositional-11183" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11185" href="../Compositional/#plfa_plfa-part3-Compositional-11185" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-11188" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11190" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-11201" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11202" href="../Compositional/#plfa_plfa-part3-Compositional-11074" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-11204" href="../Untyped/#plfa_plfa-part2-Untyped-3888" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-11206" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-11207" class="Symbol">)}</a>
    <a id="plfa_plfa-part3-Compositional-11214" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11216" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11218" href="../Compositional/#plfa_plfa-part3-Compositional-11183" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11220" href="../Compositional/#plfa_plfa-part3-Compositional-11169" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-11222" href="../Compositional/#plfa_plfa-part3-Compositional-11180" class="Bound">v</a>  <a id="plfa_plfa-part3-Compositional-11225" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-11228" href="../Compositional/#plfa_plfa-part3-Compositional-11183" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11230" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-11232" href="../Compositional/#plfa_plfa-part3-Compositional-11185" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-11235" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11237" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11239" href="../Compositional/#plfa_plfa-part3-Compositional-11185" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-11242" href="../Compositional/#plfa_plfa-part3-Compositional-11169" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-11244" href="../Compositional/#plfa_plfa-part3-Compositional-11180" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-11248" href="../Compositional/#plfa_plfa-part3-Compositional-11162" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-11251" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11252" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-11254" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-11256" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-11257" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11259" href="../Compositional/#plfa_plfa-part3-Compositional-11259" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-11262" href="../Compositional/#plfa_plfa-part3-Compositional-11262" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11266" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-11268" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a>
  <a id="plfa_plfa-part3-Compositional-11273" href="../Compositional/#plfa_plfa-part3-Compositional-11162" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-11276" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11277" href="../Compositional/#plfa_plfa-part3-Compositional-11277" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11278" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11280" href="../Compositional/#plfa_plfa-part3-Compositional-11280" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-11282" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-11284" href="../Compositional/#plfa_plfa-part3-Compositional-11284" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-11285" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11287" href="../Compositional/#plfa_plfa-part3-Compositional-11287" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-11290" href="../Compositional/#plfa_plfa-part3-Compositional-11290" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11294" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-11296" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-11302" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11303" href="../Compositional/#plfa_plfa-part3-Compositional-11290" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11307" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11308" href="../Compositional/#plfa_plfa-part3-Compositional-11277" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-11310" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-11313" href="../Compositional/#plfa_plfa-part3-Compositional-11280" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-11314" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11316" href="../Compositional/#plfa_plfa-part3-Compositional-11284" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-11317" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11319" href="../Compositional/#plfa_plfa-part3-Compositional-11287" class="Bound">fd</a>
  <a id="plfa_plfa-part3-Compositional-11324" href="../Compositional/#plfa_plfa-part3-Compositional-11162" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-11327" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11328" href="../Compositional/#plfa_plfa-part3-Compositional-11328" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11329" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11331" href="../Compositional/#plfa_plfa-part3-Compositional-11331" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-11333" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-11335" href="../Compositional/#plfa_plfa-part3-Compositional-11335" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-11336" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11338" href="../Compositional/#plfa_plfa-part3-Compositional-11338" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-11341" href="../Compositional/#plfa_plfa-part3-Compositional-11341" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11345" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-11347" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-11349" href="../Compositional/#plfa_plfa-part3-Compositional-11162" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-11351" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11352" href="../Compositional/#plfa_plfa-part3-Compositional-11328" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11353" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11355" href="../Compositional/#plfa_plfa-part3-Compositional-11331" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-11356" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11358" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11359" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-11365" href="../Compositional/#plfa_plfa-part3-Compositional-11338" class="Bound">fd</a><a id="plfa_plfa-part3-Compositional-11367" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11369" href="../Compositional/#plfa_plfa-part3-Compositional-11341" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11373" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-11375" href="../Compositional/#plfa_plfa-part3-Compositional-11162" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-11377" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11378" href="../Compositional/#plfa_plfa-part3-Compositional-11328" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11379" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11381" href="../Compositional/#plfa_plfa-part3-Compositional-11335" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-11382" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11384" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11385" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="plfa_plfa-part3-Compositional-11391" href="../Compositional/#plfa_plfa-part3-Compositional-11338" class="Bound">fd</a><a id="plfa_plfa-part3-Compositional-11393" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11395" href="../Compositional/#plfa_plfa-part3-Compositional-11341" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11399" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
</pre><p>The proof of <code>ℱ-cong</code> uses the lemma <code>ℱ≃</code> to handle both directions of the if-and-only-if. That lemma is proved by a straightforward induction on the value <code>v</code>.</p><p>We now prove that lambda abstraction is a congruence by direct equational reasoning.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lam-cong"></a><a id="plfa_plfa-part3-Compositional-11662" href="../Compositional/#plfa_plfa-part3-Compositional-11662" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-11671" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11673" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-11675" href="../Compositional/#plfa_plfa-part3-Compositional-11675" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-11676" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11678" href="../Compositional/#plfa_plfa-part3-Compositional-11678" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-11680" href="../Compositional/#plfa_plfa-part3-Compositional-11680" class="Bound">N′</a> <a id="plfa_plfa-part3-Compositional-11683" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11685" href="../Compositional/#plfa_plfa-part3-Compositional-11675" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-11687" href="../Untyped/#plfa_plfa-part2-Untyped-3888" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-11689" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-11691" href="../Untyped/#plfa_plfa-part2-Untyped-5421" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-11693" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-11694" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-11698" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11700" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11702" href="../Compositional/#plfa_plfa-part3-Compositional-11678" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-11704" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-11706" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11708" href="../Compositional/#plfa_plfa-part3-Compositional-11680" class="Bound">N′</a>
    <a id="plfa_plfa-part3-Compositional-11715" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Compositional-11735" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11737" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11739" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11740" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-11742" href="../Compositional/#plfa_plfa-part3-Compositional-11678" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-11743" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11745" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-11747" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11749" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11750" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-11752" href="../Compositional/#plfa_plfa-part3-Compositional-11680" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-11754" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-11756" href="../Compositional/#plfa_plfa-part3-Compositional-11662" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-11765" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11766" href="../Compositional/#plfa_plfa-part3-Compositional-11766" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-11767" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11769" href="../Compositional/#plfa_plfa-part3-Compositional-11769" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-11770" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11772" href="../Compositional/#plfa_plfa-part3-Compositional-11772" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-11774" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11776" href="../Compositional/#plfa_plfa-part3-Compositional-11776" class="Bound">N≃N′</a> <a id="plfa_plfa-part3-Compositional-11781" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-11785" href="../Denotational/#plfa_plfa-part3-Denotational-18540" class="Function Operator">start</a>
    <a id="plfa_plfa-part3-Compositional-11795" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11797" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11798" href="../Untyped/#plfa_plfa-part2-Untyped-5509" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-11800" href="../Compositional/#plfa_plfa-part3-Compositional-11769" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-11801" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-11805" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-11808" href="../Compositional/#plfa_plfa-part3-Compositional-4337" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-11818" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-11824" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11826" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11827" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11829" href="../Compositional/#plfa_plfa-part3-Compositional-11769" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-11830" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-11834" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-11837" href="../Compositional/#plfa_plfa-part3-Compositional-10984" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-11844" href="../Compositional/#plfa_plfa-part3-Compositional-11776" class="Bound">N≃N′</a> <a id="plfa_plfa-part3-Compositional-11849" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-11855" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11857" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11858" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11860" href="../Compositional/#plfa_plfa-part3-Compositional-11772" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-11862" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-11866" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-11869" href="../Denotational/#plfa_plfa-part3-Denotational-17871" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-11875" href="../Compositional/#plfa_plfa-part3-Compositional-4337" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-11885" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-11891" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11893" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11894" href="../Untyped/#plfa_plfa-part2-Untyped-5509" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-11896" href="../Compositional/#plfa_plfa-part3-Compositional-11772" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-11898" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-11902" href="../Denotational/#plfa_plfa-part3-Denotational-18878" class="Function Operator">☐</a>
</pre><p>Next we prove that denotational equality is a congruence for application: that <code>ℰ L ≃ ℰ L′</code> and <code>ℰ M ≃ ℰ M′</code> imply <code>ℰ (L · M) ≃ ℰ (L′ · M′)</code>. The <code>app-equiv</code> equation reduces this to the question of whether the <code>●</code> operator is a congruence.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-●-cong"></a><a id="plfa_plfa-part3-Compositional-12159" href="../Compositional/#plfa_plfa-part3-Compositional-12159" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-12166" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12168" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12170" href="../Compositional/#plfa_plfa-part3-Compositional-12170" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12171" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12173" href="../Compositional/#plfa_plfa-part3-Compositional-12173" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12176" href="../Compositional/#plfa_plfa-part3-Compositional-12176" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-12180" href="../Compositional/#plfa_plfa-part3-Compositional-12180" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-12183" href="../Compositional/#plfa_plfa-part3-Compositional-12183" class="Bound">D₂′</a> <a id="plfa_plfa-part3-Compositional-12187" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12189" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-12200" href="../Compositional/#plfa_plfa-part3-Compositional-12170" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12201" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12205" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12207" href="../Compositional/#plfa_plfa-part3-Compositional-12173" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12210" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12212" href="../Compositional/#plfa_plfa-part3-Compositional-12176" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-12216" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12218" href="../Compositional/#plfa_plfa-part3-Compositional-12180" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-12221" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12223" href="../Compositional/#plfa_plfa-part3-Compositional-12183" class="Bound">D₂′</a>
  <a id="plfa_plfa-part3-Compositional-12229" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12231" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12232" href="../Compositional/#plfa_plfa-part3-Compositional-12173" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12235" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12237" href="../Compositional/#plfa_plfa-part3-Compositional-12180" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-12239" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12241" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12243" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12244" href="../Compositional/#plfa_plfa-part3-Compositional-12176" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-12248" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12250" href="../Compositional/#plfa_plfa-part3-Compositional-12183" class="Bound">D₂′</a><a id="plfa_plfa-part3-Compositional-12253" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-12255" href="../Compositional/#plfa_plfa-part3-Compositional-12159" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-12262" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12263" href="../Compositional/#plfa_plfa-part3-Compositional-12263" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12264" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12266" href="../Compositional/#plfa_plfa-part3-Compositional-12266" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-12269" href="../Compositional/#plfa_plfa-part3-Compositional-12269" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-12272" href="../Compositional/#plfa_plfa-part3-Compositional-12272" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12274" href="../Compositional/#plfa_plfa-part3-Compositional-12274" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12276" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12278" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12280" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-12283" href="../Compositional/#plfa_plfa-part3-Compositional-12283" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-12285" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12287" href="../Compositional/#plfa_plfa-part3-Compositional-12373" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-12290" href="../Compositional/#plfa_plfa-part3-Compositional-12283" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-12292" href="../Compositional/#plfa_plfa-part3-Compositional-12266" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-12295" href="../Compositional/#plfa_plfa-part3-Compositional-12269" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-12297" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12299" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a>
                         <a id="plfa_plfa-part3-Compositional-12326" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-12329" href="../Compositional/#plfa_plfa-part3-Compositional-12329" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-12331" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12333" href="../Compositional/#plfa_plfa-part3-Compositional-12373" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-12336" href="../Compositional/#plfa_plfa-part3-Compositional-12329" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-12338" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12339" href="../Denotational/#plfa_plfa-part3-Denotational-17871" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-12345" href="../Compositional/#plfa_plfa-part3-Compositional-12266" class="Bound">d1</a><a id="plfa_plfa-part3-Compositional-12347" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12349" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12350" href="../Denotational/#plfa_plfa-part3-Denotational-17871" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-12356" href="../Compositional/#plfa_plfa-part3-Compositional-12269" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-12358" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-12361" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Compositional-12365" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-12373" href="../Compositional/#plfa_plfa-part3-Compositional-12373" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-12376" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12378" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12380" href="../Compositional/#plfa_plfa-part3-Compositional-12380" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12382" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12384" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-12388" href="../Compositional/#plfa_plfa-part3-Compositional-12263" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12389" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12391" href="../Compositional/#plfa_plfa-part3-Compositional-12391" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12392" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12394" href="../Compositional/#plfa_plfa-part3-Compositional-12394" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12397" href="../Compositional/#plfa_plfa-part3-Compositional-12397" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-12401" href="../Compositional/#plfa_plfa-part3-Compositional-12401" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-12404" href="../Compositional/#plfa_plfa-part3-Compositional-12404" class="Bound">D₂′</a> <a id="plfa_plfa-part3-Compositional-12408" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12410" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-12421" href="../Compositional/#plfa_plfa-part3-Compositional-12263" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12422" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Compositional-12428" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12430" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12431" href="../Compositional/#plfa_plfa-part3-Compositional-12394" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12434" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12436" href="../Compositional/#plfa_plfa-part3-Compositional-12401" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-12438" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12440" href="../Compositional/#plfa_plfa-part3-Compositional-12380" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12442" href="../Compositional/#plfa_plfa-part3-Compositional-12391" class="Bound">v</a>  <a id="plfa_plfa-part3-Compositional-12445" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-12448" href="../Compositional/#plfa_plfa-part3-Compositional-12394" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12451" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12453" href="../Compositional/#plfa_plfa-part3-Compositional-12397" class="Bound">D₁′</a>  <a id="plfa_plfa-part3-Compositional-12458" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-12461" href="../Compositional/#plfa_plfa-part3-Compositional-12401" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-12464" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12466" href="../Compositional/#plfa_plfa-part3-Compositional-12404" class="Bound">D₂′</a>
    <a id="plfa_plfa-part3-Compositional-12474" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12476" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12477" href="../Compositional/#plfa_plfa-part3-Compositional-12397" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-12481" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12483" href="../Compositional/#plfa_plfa-part3-Compositional-12404" class="Bound">D₂′</a><a id="plfa_plfa-part3-Compositional-12486" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12488" href="../Compositional/#plfa_plfa-part3-Compositional-12380" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12490" href="../Compositional/#plfa_plfa-part3-Compositional-12391" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-12494" href="../Compositional/#plfa_plfa-part3-Compositional-12373" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-12497" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12498" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-12503" href="../Compositional/#plfa_plfa-part3-Compositional-12503" class="Bound">v⊑⊥</a><a id="plfa_plfa-part3-Compositional-12506" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12508" href="../Compositional/#plfa_plfa-part3-Compositional-12508" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-12512" href="../Compositional/#plfa_plfa-part3-Compositional-12512" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-12516" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12518" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-12523" href="../Compositional/#plfa_plfa-part3-Compositional-12503" class="Bound">v⊑⊥</a>
  <a id="plfa_plfa-part3-Compositional-12529" href="../Compositional/#plfa_plfa-part3-Compositional-12373" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-12532" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12533" href="../Compositional/#plfa_plfa-part3-Compositional-12533" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-12534" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12536" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12537" href="../Compositional/#plfa_plfa-part3-Compositional-12537" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-12538" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12540" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12541" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-12546" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12548" href="../Compositional/#plfa_plfa-part3-Compositional-12548" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12550" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12552" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12554" href="../Compositional/#plfa_plfa-part3-Compositional-12554" class="Bound">Dv↦w</a> <a id="plfa_plfa-part3-Compositional-12559" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12561" href="../Compositional/#plfa_plfa-part3-Compositional-12561" class="Bound">Dv</a> <a id="plfa_plfa-part3-Compositional-12564" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-12566" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-12567" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12569" href="../Compositional/#plfa_plfa-part3-Compositional-12569" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-12573" href="../Compositional/#plfa_plfa-part3-Compositional-12573" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-12577" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Compositional-12583" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-12588" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12590" href="../Compositional/#plfa_plfa-part3-Compositional-12548" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12592" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12594" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12596" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-12602" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12603" href="../Compositional/#plfa_plfa-part3-Compositional-12569" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-12607" href="../Compositional/#plfa_plfa-part3-Compositional-12533" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12609" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12610" href="../Compositional/#plfa_plfa-part3-Compositional-12548" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12612" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-12614" href="../Compositional/#plfa_plfa-part3-Compositional-12537" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-12615" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-12618" href="../Compositional/#plfa_plfa-part3-Compositional-12554" class="Bound">Dv↦w</a> <a id="plfa_plfa-part3-Compositional-12623" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12625" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-12631" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12632" href="../Compositional/#plfa_plfa-part3-Compositional-12573" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-12636" href="../Compositional/#plfa_plfa-part3-Compositional-12533" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12638" href="../Compositional/#plfa_plfa-part3-Compositional-12548" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12639" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12641" href="../Compositional/#plfa_plfa-part3-Compositional-12561" class="Bound">Dv</a> <a id="plfa_plfa-part3-Compositional-12644" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-12646" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
</pre><p>Again, both directions of the if-and-only-if are proved via a lemma. This time the lemma is proved by cases on <code>(D₁ ● D₂) γ v</code>.</p><p>With the congruence of <code>●</code>, we can prove that application is a congruence by direct equational reasoning.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-app-cong"></a><a id="plfa_plfa-part3-Compositional-12897" href="../Compositional/#plfa_plfa-part3-Compositional-12897" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-12906" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12908" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12910" href="../Compositional/#plfa_plfa-part3-Compositional-12910" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12911" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12913" href="../Compositional/#plfa_plfa-part3-Compositional-12913" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12915" href="../Compositional/#plfa_plfa-part3-Compositional-12915" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-12918" href="../Compositional/#plfa_plfa-part3-Compositional-12918" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-12920" href="../Compositional/#plfa_plfa-part3-Compositional-12920" class="Bound">M′</a> <a id="plfa_plfa-part3-Compositional-12923" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12925" href="../Compositional/#plfa_plfa-part3-Compositional-12910" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-12927" href="../Untyped/#plfa_plfa-part2-Untyped-5421" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-12929" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-12930" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12934" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12936" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12938" href="../Compositional/#plfa_plfa-part3-Compositional-12913" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12940" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12942" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12944" href="../Compositional/#plfa_plfa-part3-Compositional-12915" class="Bound">L′</a>
  <a id="plfa_plfa-part3-Compositional-12949" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12951" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12953" href="../Compositional/#plfa_plfa-part3-Compositional-12918" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-12955" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12957" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12959" href="../Compositional/#plfa_plfa-part3-Compositional-12920" class="Bound">M′</a>
    <a id="plfa_plfa-part3-Compositional-12966" class="Comment">-------------------------</a>
  <a id="plfa_plfa-part3-Compositional-12994" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12996" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12998" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12999" href="../Compositional/#plfa_plfa-part3-Compositional-12913" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-13001" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-13003" href="../Compositional/#plfa_plfa-part3-Compositional-12918" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-13004" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13006" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-13008" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13010" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13011" href="../Compositional/#plfa_plfa-part3-Compositional-12915" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-13014" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-13016" href="../Compositional/#plfa_plfa-part3-Compositional-12920" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-13018" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-13020" href="../Compositional/#plfa_plfa-part3-Compositional-12897" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-13029" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-13030" href="../Compositional/#plfa_plfa-part3-Compositional-13030" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-13031" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13033" href="../Compositional/#plfa_plfa-part3-Compositional-13033" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-13034" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13036" href="../Compositional/#plfa_plfa-part3-Compositional-13036" class="Bound">L′</a><a id="plfa_plfa-part3-Compositional-13038" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13040" href="../Compositional/#plfa_plfa-part3-Compositional-13040" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-13041" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13043" href="../Compositional/#plfa_plfa-part3-Compositional-13043" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-13045" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13047" href="../Compositional/#plfa_plfa-part3-Compositional-13047" class="Bound">L≅L′</a> <a id="plfa_plfa-part3-Compositional-13052" href="../Compositional/#plfa_plfa-part3-Compositional-13052" class="Bound">M≅M′</a> <a id="plfa_plfa-part3-Compositional-13057" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-13061" href="../Denotational/#plfa_plfa-part3-Denotational-18540" class="Function Operator">start</a>
    <a id="plfa_plfa-part3-Compositional-13071" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13073" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13074" href="../Compositional/#plfa_plfa-part3-Compositional-13033" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-13076" href="../Untyped/#plfa_plfa-part2-Untyped-5569" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-13078" href="../Compositional/#plfa_plfa-part3-Compositional-13040" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-13079" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-13083" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-13086" href="../Compositional/#plfa_plfa-part3-Compositional-9571" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-13096" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-13102" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13104" href="../Compositional/#plfa_plfa-part3-Compositional-13033" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-13106" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-13108" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13110" href="../Compositional/#plfa_plfa-part3-Compositional-13040" class="Bound">M</a>
  <a id="plfa_plfa-part3-Compositional-13114" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-13117" href="../Compositional/#plfa_plfa-part3-Compositional-12159" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-13124" href="../Compositional/#plfa_plfa-part3-Compositional-13047" class="Bound">L≅L′</a> <a id="plfa_plfa-part3-Compositional-13129" href="../Compositional/#plfa_plfa-part3-Compositional-13052" class="Bound">M≅M′</a> <a id="plfa_plfa-part3-Compositional-13134" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-13140" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13142" href="../Compositional/#plfa_plfa-part3-Compositional-13036" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-13145" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-13147" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13149" href="../Compositional/#plfa_plfa-part3-Compositional-13043" class="Bound">M′</a>
  <a id="plfa_plfa-part3-Compositional-13154" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-13157" href="../Denotational/#plfa_plfa-part3-Denotational-17871" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-13163" href="../Compositional/#plfa_plfa-part3-Compositional-9571" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-13173" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-13179" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13181" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13182" href="../Compositional/#plfa_plfa-part3-Compositional-13036" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-13185" href="../Untyped/#plfa_plfa-part2-Untyped-5569" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-13187" href="../Compositional/#plfa_plfa-part3-Compositional-13043" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-13189" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-13193" href="../Denotational/#plfa_plfa-part3-Denotational-18878" class="Function Operator">☐</a>
</pre><h2 id="compositionality">Compositionality</h2><p>The <em>compositionality property</em> states that surrounding two terms that are denotationally equal in the same context produces two programs that are denotationally equal. To make this precise, we define what we mean by “context” and “surround”.</p><p>A <em>context</em> is a program with one hole in it. The following data definition <code>Ctx</code> makes this idea explicit. We index the <code>Ctx</code> data type with two contexts for variables: one for the hole and one for terms that result from filling the hole.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-13715" class="Keyword">data</a> <a id="plfa_plfa-part3-Compositional-Ctx"></a><a id="plfa_plfa-part3-Compositional-13720" href="../Compositional/#plfa_plfa-part3-Compositional-13720" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13724" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13726" href="../Untyped/#plfa_plfa-part2-Untyped-3850" class="Datatype">Context</a> <a id="plfa_plfa-part3-Compositional-13734" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13736" href="../Untyped/#plfa_plfa-part2-Untyped-3850" class="Datatype">Context</a> <a id="plfa_plfa-part3-Compositional-13744" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13746" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part3-Compositional-13750" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-hole"></a><a id="plfa_plfa-part3-Compositional-13758" href="../Compositional/#plfa_plfa-part3-Compositional-13758" class="InductiveConstructor">ctx-hole</a> <a id="plfa_plfa-part3-Compositional-13767" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13769" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-13771" href="../Compositional/#plfa_plfa-part3-Compositional-13771" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-13772" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13774" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13776" href="../Compositional/#plfa_plfa-part3-Compositional-13720" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13780" href="../Compositional/#plfa_plfa-part3-Compositional-13771" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13782" href="../Compositional/#plfa_plfa-part3-Compositional-13771" class="Bound">Γ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-lam"></a><a id="plfa_plfa-part3-Compositional-13786" href="../Compositional/#plfa_plfa-part3-Compositional-13786" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-13794" class="Symbol">:</a>  <a id="plfa_plfa-part3-Compositional-13797" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-13799" href="../Compositional/#plfa_plfa-part3-Compositional-13799" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13801" href="../Compositional/#plfa_plfa-part3-Compositional-13801" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-13802" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13804" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13806" href="../Compositional/#plfa_plfa-part3-Compositional-13720" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13810" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13811" href="../Compositional/#plfa_plfa-part3-Compositional-13799" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13813" href="../Untyped/#plfa_plfa-part2-Untyped-3888" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-13815" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-13816" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13818" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13819" href="../Compositional/#plfa_plfa-part3-Compositional-13801" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-13821" href="../Untyped/#plfa_plfa-part2-Untyped-3888" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-13823" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-13824" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13826" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13828" href="../Compositional/#plfa_plfa-part3-Compositional-13720" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13832" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13833" href="../Compositional/#plfa_plfa-part3-Compositional-13799" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13835" href="../Untyped/#plfa_plfa-part2-Untyped-3888" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-13837" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-13838" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13840" href="../Compositional/#plfa_plfa-part3-Compositional-13801" class="Bound">Δ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-app-L"></a><a id="plfa_plfa-part3-Compositional-13844" href="../Compositional/#plfa_plfa-part3-Compositional-13844" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-13854" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13856" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-13858" href="../Compositional/#plfa_plfa-part3-Compositional-13858" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13860" href="../Compositional/#plfa_plfa-part3-Compositional-13860" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-13861" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13863" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13865" href="../Compositional/#plfa_plfa-part3-Compositional-13720" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13869" href="../Compositional/#plfa_plfa-part3-Compositional-13858" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13871" href="../Compositional/#plfa_plfa-part3-Compositional-13860" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-13873" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13875" href="../Compositional/#plfa_plfa-part3-Compositional-13860" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-13877" href="../Untyped/#plfa_plfa-part2-Untyped-5421" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-13879" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-13881" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13883" href="../Compositional/#plfa_plfa-part3-Compositional-13720" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13887" href="../Compositional/#plfa_plfa-part3-Compositional-13858" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13889" href="../Compositional/#plfa_plfa-part3-Compositional-13860" class="Bound">Δ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-app-R"></a><a id="plfa_plfa-part3-Compositional-13893" href="../Compositional/#plfa_plfa-part3-Compositional-13893" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-13903" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13905" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-13907" href="../Compositional/#plfa_plfa-part3-Compositional-13907" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13909" href="../Compositional/#plfa_plfa-part3-Compositional-13909" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-13910" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13912" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13914" href="../Compositional/#plfa_plfa-part3-Compositional-13909" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-13916" href="../Untyped/#plfa_plfa-part2-Untyped-5421" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-13918" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-13920" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13922" href="../Compositional/#plfa_plfa-part3-Compositional-13720" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13926" href="../Compositional/#plfa_plfa-part3-Compositional-13907" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13928" href="../Compositional/#plfa_plfa-part3-Compositional-13909" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-13930" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13932" href="../Compositional/#plfa_plfa-part3-Compositional-13720" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13936" href="../Compositional/#plfa_plfa-part3-Compositional-13907" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13938" href="../Compositional/#plfa_plfa-part3-Compositional-13909" class="Bound">Δ</a>
</pre><ul><li><p>The constructor <code>ctx-hole</code> represents the hole, and in this case the variable context for the hole is the same as the variable context for the term that results from filling the hole.</p></li><li><p>The constructor <code>ctx-lam</code> takes a <code>Ctx</code> and produces a larger one that adds a lambda abstraction at the top. The variable context of the hole stays the same, whereas we remove one variable from the context of the resulting term because it is bound by this lambda abstraction.</p></li><li><p>There are two constructions for application, <code>ctx-app-L</code> and <code>ctx-app-R</code>. The <code>ctx-app-L</code> is for when the hole is inside the left-hand term (the operator) and the later is when the hole is inside the right-hand term (the operand).</p></li></ul><p>The action of surrounding a term with a context is defined by the following <code>plug</code> function. It is defined by recursion on the context.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-plug"></a><a id="plfa_plfa-part3-Compositional-14808" href="../Compositional/#plfa_plfa-part3-Compositional-14808" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14813" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14815" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-14817" href="../Compositional/#plfa_plfa-part3-Compositional-14817" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14818" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14820" href="../Compositional/#plfa_plfa-part3-Compositional-14820" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-14821" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14823" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14825" href="../Compositional/#plfa_plfa-part3-Compositional-13720" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-14829" href="../Compositional/#plfa_plfa-part3-Compositional-14817" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14831" href="../Compositional/#plfa_plfa-part3-Compositional-14820" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-14833" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14835" href="../Compositional/#plfa_plfa-part3-Compositional-14817" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14837" href="../Untyped/#plfa_plfa-part2-Untyped-5421" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-14839" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-14841" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14843" href="../Compositional/#plfa_plfa-part3-Compositional-14820" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-14845" href="../Untyped/#plfa_plfa-part2-Untyped-5421" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-14847" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a>
<a id="plfa_plfa-part3-Compositional-14849" href="../Compositional/#plfa_plfa-part3-Compositional-14808" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14854" href="../Compositional/#plfa_plfa-part3-Compositional-13758" class="InductiveConstructor">ctx-hole</a> <a id="plfa_plfa-part3-Compositional-14863" href="../Compositional/#plfa_plfa-part3-Compositional-14863" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-14865" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14867" href="../Compositional/#plfa_plfa-part3-Compositional-14863" class="Bound">M</a>
<a id="plfa_plfa-part3-Compositional-14869" href="../Compositional/#plfa_plfa-part3-Compositional-14808" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14874" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14875" href="../Compositional/#plfa_plfa-part3-Compositional-13786" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-14883" href="../Compositional/#plfa_plfa-part3-Compositional-14883" class="Bound">C</a><a id="plfa_plfa-part3-Compositional-14884" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14886" href="../Compositional/#plfa_plfa-part3-Compositional-14886" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-14888" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14890" href="../Untyped/#plfa_plfa-part2-Untyped-5509" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-14892" href="../Compositional/#plfa_plfa-part3-Compositional-14808" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14897" href="../Compositional/#plfa_plfa-part3-Compositional-14883" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-14899" href="../Compositional/#plfa_plfa-part3-Compositional-14886" class="Bound">N</a>
<a id="plfa_plfa-part3-Compositional-14901" href="../Compositional/#plfa_plfa-part3-Compositional-14808" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14906" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14907" href="../Compositional/#plfa_plfa-part3-Compositional-13844" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-14917" href="../Compositional/#plfa_plfa-part3-Compositional-14917" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-14919" href="../Compositional/#plfa_plfa-part3-Compositional-14919" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-14920" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14922" href="../Compositional/#plfa_plfa-part3-Compositional-14922" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-14924" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14926" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14927" href="../Compositional/#plfa_plfa-part3-Compositional-14808" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14932" href="../Compositional/#plfa_plfa-part3-Compositional-14917" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-14934" href="../Compositional/#plfa_plfa-part3-Compositional-14922" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-14935" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14937" href="../Untyped/#plfa_plfa-part2-Untyped-5569" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-14939" href="../Compositional/#plfa_plfa-part3-Compositional-14919" class="Bound">N</a>
<a id="plfa_plfa-part3-Compositional-14941" href="../Compositional/#plfa_plfa-part3-Compositional-14808" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14946" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14947" href="../Compositional/#plfa_plfa-part3-Compositional-13893" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-14957" href="../Compositional/#plfa_plfa-part3-Compositional-14957" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-14959" href="../Compositional/#plfa_plfa-part3-Compositional-14959" class="Bound">C</a><a id="plfa_plfa-part3-Compositional-14960" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14962" href="../Compositional/#plfa_plfa-part3-Compositional-14962" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-14964" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14966" href="../Compositional/#plfa_plfa-part3-Compositional-14957" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-14968" href="../Untyped/#plfa_plfa-part2-Untyped-5569" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-14970" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14971" href="../Compositional/#plfa_plfa-part3-Compositional-14808" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14976" href="../Compositional/#plfa_plfa-part3-Compositional-14959" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-14978" href="../Compositional/#plfa_plfa-part3-Compositional-14962" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-14979" class="Symbol">)</a>
</pre><p>We are ready to state and prove the compositionality principle. Given two terms <code>M</code> and <code>N</code> that are denotationally equal, plugging them both into an arbitrary context <code>C</code> produces two programs that are denotationally equal.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-compositionality"></a><a id="plfa_plfa-part3-Compositional-15221" href="../Compositional/#plfa_plfa-part3-Compositional-15221" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15238" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15240" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-15242" href="../Compositional/#plfa_plfa-part3-Compositional-15242" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-15244" href="../Compositional/#plfa_plfa-part3-Compositional-15244" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-15245" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15247" href="../Compositional/#plfa_plfa-part3-Compositional-15247" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-15249" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15251" href="../Compositional/#plfa_plfa-part3-Compositional-13720" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-15255" href="../Compositional/#plfa_plfa-part3-Compositional-15242" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-15257" href="../Compositional/#plfa_plfa-part3-Compositional-15244" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-15258" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15260" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15261" href="../Compositional/#plfa_plfa-part3-Compositional-15261" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-15263" href="../Compositional/#plfa_plfa-part3-Compositional-15263" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-15265" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15267" href="../Compositional/#plfa_plfa-part3-Compositional-15242" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-15269" href="../Untyped/#plfa_plfa-part2-Untyped-5421" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-15271" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-15272" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-15276" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15278" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15280" href="../Compositional/#plfa_plfa-part3-Compositional-15261" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-15282" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15284" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15286" href="../Compositional/#plfa_plfa-part3-Compositional-15263" class="Bound">N</a>
    <a id="plfa_plfa-part3-Compositional-15292" class="Comment">---------------------------</a>
  <a id="plfa_plfa-part3-Compositional-15322" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15324" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15326" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15327" href="../Compositional/#plfa_plfa-part3-Compositional-14808" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-15332" href="../Compositional/#plfa_plfa-part3-Compositional-15247" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-15334" href="../Compositional/#plfa_plfa-part3-Compositional-15261" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-15335" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15337" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15339" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15341" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15342" href="../Compositional/#plfa_plfa-part3-Compositional-14808" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-15347" href="../Compositional/#plfa_plfa-part3-Compositional-15247" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-15349" href="../Compositional/#plfa_plfa-part3-Compositional-15263" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15350" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-15352" href="../Compositional/#plfa_plfa-part3-Compositional-15221" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15369" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15370" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15372" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15374" href="../Compositional/#plfa_plfa-part3-Compositional-13758" class="InductiveConstructor">ctx-hole</a><a id="plfa_plfa-part3-Compositional-15382" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15384" href="../Compositional/#plfa_plfa-part3-Compositional-15384" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-15388" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15392" href="../Compositional/#plfa_plfa-part3-Compositional-15384" class="Bound">M≃N</a>
<a id="plfa_plfa-part3-Compositional-15396" href="../Compositional/#plfa_plfa-part3-Compositional-15221" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15413" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15414" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15416" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15418" href="../Compositional/#plfa_plfa-part3-Compositional-13786" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-15426" href="../Compositional/#plfa_plfa-part3-Compositional-15426" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-15428" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15430" href="../Compositional/#plfa_plfa-part3-Compositional-15430" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-15434" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15438" href="../Compositional/#plfa_plfa-part3-Compositional-11662" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-15447" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15448" href="../Compositional/#plfa_plfa-part3-Compositional-15221" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15465" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15466" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15468" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15470" href="../Compositional/#plfa_plfa-part3-Compositional-15426" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-15472" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15474" href="../Compositional/#plfa_plfa-part3-Compositional-15430" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-15477" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-15479" href="../Compositional/#plfa_plfa-part3-Compositional-15221" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15496" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15497" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15499" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15501" href="../Compositional/#plfa_plfa-part3-Compositional-13844" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-15511" href="../Compositional/#plfa_plfa-part3-Compositional-15511" class="Bound">C′</a> <a id="plfa_plfa-part3-Compositional-15514" href="../Compositional/#plfa_plfa-part3-Compositional-15514" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-15515" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15517" href="../Compositional/#plfa_plfa-part3-Compositional-15517" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-15521" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15525" href="../Compositional/#plfa_plfa-part3-Compositional-12897" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-15534" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15535" href="../Compositional/#plfa_plfa-part3-Compositional-15221" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15552" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15553" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15555" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15557" href="../Compositional/#plfa_plfa-part3-Compositional-15511" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-15559" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15561" href="../Compositional/#plfa_plfa-part3-Compositional-15517" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-15564" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15566" class="Symbol">λ</a> <a id="plfa_plfa-part3-Compositional-15568" href="../Compositional/#plfa_plfa-part3-Compositional-15568" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-15570" href="../Compositional/#plfa_plfa-part3-Compositional-15570" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-15572" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15574" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-15576" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15579" href="../Compositional/#plfa_plfa-part3-Compositional-15579" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15581" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15583" href="../Compositional/#plfa_plfa-part3-Compositional-15579" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-15584" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15586" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-15588" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15591" href="../Compositional/#plfa_plfa-part3-Compositional-15591" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15593" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15595" href="../Compositional/#plfa_plfa-part3-Compositional-15591" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-15596" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15598" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-15600" href="../Compositional/#plfa_plfa-part3-Compositional-15221" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15617" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15618" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15620" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15622" href="../Compositional/#plfa_plfa-part3-Compositional-13893" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-15632" href="../Compositional/#plfa_plfa-part3-Compositional-15632" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-15634" href="../Compositional/#plfa_plfa-part3-Compositional-15634" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-15636" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15638" href="../Compositional/#plfa_plfa-part3-Compositional-15638" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-15642" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15646" href="../Compositional/#plfa_plfa-part3-Compositional-12897" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-15655" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15658" href="../Compositional/#plfa_plfa-part3-Compositional-15658" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-15660" href="../Compositional/#plfa_plfa-part3-Compositional-15660" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-15662" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15664" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-15666" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15669" href="../Compositional/#plfa_plfa-part3-Compositional-15669" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15671" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15673" href="../Compositional/#plfa_plfa-part3-Compositional-15669" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-15674" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15676" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-15678" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15681" href="../Compositional/#plfa_plfa-part3-Compositional-15681" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15683" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15685" href="../Compositional/#plfa_plfa-part3-Compositional-15681" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-15686" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15688" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-15689" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15691" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15692" href="../Compositional/#plfa_plfa-part3-Compositional-15221" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15709" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15710" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15712" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15714" href="../Compositional/#plfa_plfa-part3-Compositional-15634" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-15716" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15718" href="../Compositional/#plfa_plfa-part3-Compositional-15638" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-15721" class="Symbol">)</a>
</pre><p>The proof is a straightforward induction on the context <code>C</code>, using the congruence properties <code>lam-cong</code> and <code>app-cong</code> that we established above.</p><h2 id="the-denotational-semantics-defined-as-a-function">The denotational semantics defined as a function</h2><p>Having established the three equations <code>var-equiv</code>, <code>lam-equiv</code>, and <code>app-equiv</code>, one should be able to define the denotational semantics as a recursive function over the input term <code>M</code>. Indeed, we define the following function <code>⟦ M ⟧</code> that maps terms to denotations, using the auxiliary curry <code>ℱ</code> and apply <code>●</code> functions in the cases for lambda and application, respectively.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-⟦_⟧"></a><a id="plfa_plfa-part3-Compositional-16314" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟦_⟧</a> <a id="plfa_plfa-part3-Compositional-16318" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16320" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-16322" href="../Compositional/#plfa_plfa-part3-Compositional-16322" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16323" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16325" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16327" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16328" href="../Compositional/#plfa_plfa-part3-Compositional-16328" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16330" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16332" href="../Compositional/#plfa_plfa-part3-Compositional-16322" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-16334" href="../Untyped/#plfa_plfa-part2-Untyped-5421" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-16336" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-16337" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16339" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16341" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-16352" href="../Compositional/#plfa_plfa-part3-Compositional-16322" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-16354" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16356" href="../Untyped/#plfa_plfa-part2-Untyped-5457" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-16358" href="../Compositional/#plfa_plfa-part3-Compositional-16358" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-16360" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-16362" href="../Compositional/#plfa_plfa-part3-Compositional-16362" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16364" href="../Compositional/#plfa_plfa-part3-Compositional-16364" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16366" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16368" href="../Compositional/#plfa_plfa-part3-Compositional-16364" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16370" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-16372" href="../Compositional/#plfa_plfa-part3-Compositional-16362" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16374" href="../Compositional/#plfa_plfa-part3-Compositional-16358" class="Bound">x</a>
<a id="plfa_plfa-part3-Compositional-16376" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16378" href="../Untyped/#plfa_plfa-part2-Untyped-5509" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-16380" href="../Compositional/#plfa_plfa-part3-Compositional-16380" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-16382" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-16384" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16386" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-16388" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16390" href="../Compositional/#plfa_plfa-part3-Compositional-16380" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-16392" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟧</a>
<a id="plfa_plfa-part3-Compositional-16394" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16396" href="../Compositional/#plfa_plfa-part3-Compositional-16396" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16398" href="../Untyped/#plfa_plfa-part2-Untyped-5569" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16400" href="../Compositional/#plfa_plfa-part3-Compositional-16400" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16402" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-16404" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16406" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16408" href="../Compositional/#plfa_plfa-part3-Compositional-16396" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16410" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-16412" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16414" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16416" href="../Compositional/#plfa_plfa-part3-Compositional-16400" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16418" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟧</a>
</pre><p>The proof that <code>ℰ M</code> is denotationally equal to <code>⟦ M ⟧</code> is a straightforward induction, using the three equations <code>var-equiv</code>, <code>lam-equiv</code>, and <code>app-equiv</code> together with the congruence lemmas for <code>ℱ</code> and <code>●</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰ≃⟦⟧"></a><a id="plfa_plfa-part3-Compositional-16643" href="../Compositional/#plfa_plfa-part3-Compositional-16643" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16648" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16650" class="Symbol">∀</a> <a id="plfa_plfa-part3-Compositional-16652" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16653" href="../Compositional/#plfa_plfa-part3-Compositional-16653" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16654" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16656" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16657" href="../Compositional/#plfa_plfa-part3-Compositional-16657" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16659" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16661" href="../Compositional/#plfa_plfa-part3-Compositional-16653" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-16663" href="../Untyped/#plfa_plfa-part2-Untyped-5421" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-16665" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-16666" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16668" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16670" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16672" href="../Compositional/#plfa_plfa-part3-Compositional-16657" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16674" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16676" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16678" href="../Compositional/#plfa_plfa-part3-Compositional-16657" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16680" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟧</a>
<a id="plfa_plfa-part3-Compositional-16682" href="../Compositional/#plfa_plfa-part3-Compositional-16643" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16687" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16688" href="../Compositional/#plfa_plfa-part3-Compositional-16688" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16689" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16691" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16692" href="../Untyped/#plfa_plfa-part2-Untyped-5457" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-16694" href="../Compositional/#plfa_plfa-part3-Compositional-16694" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-16695" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16697" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16699" href="../Compositional/#plfa_plfa-part3-Compositional-10150" class="Function">var-equiv</a>
<a id="plfa_plfa-part3-Compositional-16709" href="../Compositional/#plfa_plfa-part3-Compositional-16643" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16714" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16715" href="../Compositional/#plfa_plfa-part3-Compositional-16715" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16716" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16718" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16719" href="../Untyped/#plfa_plfa-part2-Untyped-5509" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-16721" href="../Compositional/#plfa_plfa-part3-Compositional-16721" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-16722" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16724" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-16728" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-16732" href="../Compositional/#plfa_plfa-part3-Compositional-16732" class="Bound">ih</a> <a id="plfa_plfa-part3-Compositional-16735" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16737" href="../Compositional/#plfa_plfa-part3-Compositional-16643" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16742" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16743" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-16745" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16747" href="../Compositional/#plfa_plfa-part3-Compositional-16721" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-16748" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16750" class="Keyword">in</a>
    <a id="plfa_plfa-part3-Compositional-16757" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16759" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16760" href="../Untyped/#plfa_plfa-part2-Untyped-5509" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-16762" href="../Compositional/#plfa_plfa-part3-Compositional-16721" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-16763" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16767" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16770" href="../Compositional/#plfa_plfa-part3-Compositional-4337" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-16780" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16786" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-16788" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16789" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16791" href="../Compositional/#plfa_plfa-part3-Compositional-16721" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-16792" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16796" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16799" href="../Compositional/#plfa_plfa-part3-Compositional-10984" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-16806" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16807" href="../Compositional/#plfa_plfa-part3-Compositional-16643" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16812" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16813" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-16815" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16817" href="../Compositional/#plfa_plfa-part3-Compositional-16721" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-16818" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-16821" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16827" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-16829" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16831" href="../Compositional/#plfa_plfa-part3-Compositional-16721" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-16833" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-16837" href="../Denotational/#plfa_plfa-part3-Denotational-18771" class="Function Operator">≃⟨⟩</a>
    <a id="plfa_plfa-part3-Compositional-16845" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16847" href="../Untyped/#plfa_plfa-part2-Untyped-5509" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-16849" href="../Compositional/#plfa_plfa-part3-Compositional-16721" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-16851" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-16855" href="../Denotational/#plfa_plfa-part3-Denotational-18878" class="Function Operator">☐</a>
<a id="plfa_plfa-part3-Compositional-16857" href="../Compositional/#plfa_plfa-part3-Compositional-16643" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16862" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16863" href="../Compositional/#plfa_plfa-part3-Compositional-16863" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16864" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16866" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16867" href="../Compositional/#plfa_plfa-part3-Compositional-16867" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16869" href="../Untyped/#plfa_plfa-part2-Untyped-5569" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16871" href="../Compositional/#plfa_plfa-part3-Compositional-16871" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16872" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16874" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Compositional-16879" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16881" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16882" href="../Compositional/#plfa_plfa-part3-Compositional-16867" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16884" href="../Untyped/#plfa_plfa-part2-Untyped-5569" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16886" href="../Compositional/#plfa_plfa-part3-Compositional-16871" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16887" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16891" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16894" href="../Compositional/#plfa_plfa-part3-Compositional-9571" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-16904" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">⟩</a>
   <a id="plfa_plfa-part3-Compositional-16909" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16911" href="../Compositional/#plfa_plfa-part3-Compositional-16867" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16913" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16915" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16917" href="../Compositional/#plfa_plfa-part3-Compositional-16871" class="Bound">M</a>
  <a id="plfa_plfa-part3-Compositional-16921" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16924" href="../Compositional/#plfa_plfa-part3-Compositional-12159" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-16931" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16932" href="../Compositional/#plfa_plfa-part3-Compositional-16643" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16937" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16938" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-16940" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16942" href="../Compositional/#plfa_plfa-part3-Compositional-16867" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-16943" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-16946" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16947" href="../Compositional/#plfa_plfa-part3-Compositional-16643" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16952" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16953" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-16955" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16957" href="../Compositional/#plfa_plfa-part3-Compositional-16871" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16958" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-16961" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">⟩</a>
   <a id="plfa_plfa-part3-Compositional-16966" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16968" href="../Compositional/#plfa_plfa-part3-Compositional-16867" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16970" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-16972" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16974" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16976" href="../Compositional/#plfa_plfa-part3-Compositional-16871" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16978" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-16982" href="../Denotational/#plfa_plfa-part3-Denotational-18771" class="Function Operator">≃⟨⟩</a>
    <a id="plfa_plfa-part3-Compositional-16990" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16992" href="../Compositional/#plfa_plfa-part3-Compositional-16867" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16994" href="../Untyped/#plfa_plfa-part2-Untyped-5569" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16996" href="../Compositional/#plfa_plfa-part3-Compositional-16871" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16998" href="../Compositional/#plfa_plfa-part3-Compositional-16314" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-17002" href="../Denotational/#plfa_plfa-part3-Denotational-18878" class="Function Operator">☐</a>
</pre><h2 id="unicode">Unicode</h2><p>This chapter uses the following unicode:</p><pre><code>ℱ  U+2131  SCRIPT CAPITAL F (\McF)
●  U+2131  BLACK CIRCLE (\cib)</code></pre></div><nav class="pager"><ul class="pagination"><li><a class="pagelink" href="../Denotational/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Compositional.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Soundness/">下一章</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">编程语言基础：Agda 描述</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>