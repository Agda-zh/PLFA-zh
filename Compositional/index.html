<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>编程语言基础：Agda 描述 – Compositional</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">编程语言基础：Agda 描述</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">主页</a> <a class="page-link" href="../Announcements/">公告</a> <a class="page-link" href="../GettingStarted/">使用说明</a> <a class="page-link" href="../Citing/">引用</a> <a class="page-link" href="https://plfa.github.io/">English</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Denotational/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Compositional.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Soundness/">下一章</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Compositional: 指称语义是可组合的</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part3-Compositional-85" class="Keyword">module</a> <a id="plfa_plfa-part3-Compositional-92" href="../Compositional/#" class="Module">plfa.part3.Compositional</a> <a id="plfa_plfa-part3-Compositional-117" class="Keyword">where</a>
</pre><h2 id="简介">简介</h2><p>本章我们会证明指称语义是可组合的，即我们会填补以下等式中省略号的部分。</p><pre><code>ℰ (` x) ≃ ...
ℰ (ƛ M) ≃ ... ℰ M ...
ℰ (M · N) ≃ ... ℰ M ... ℰ N ...</code></pre><p>这些等式蕴含了指称语义也可以定义为一个递归函数。 我们会在本章的结尾给它的定义，并证明它等价于 ℰ。</p><h2 id="导入">导入</h2><pre class="Agda"><a id="plfa_plfa-part3-Compositional-725" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-730" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-737" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html" class="Module">Data.Product</a> <a id="plfa_plfa-part3-Compositional-750" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-756" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-757" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">_×_</a><a id="plfa_plfa-part3-Compositional-760" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-762" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="plfa_plfa-part3-Compositional-763" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-765" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ-syntax</a><a id="plfa_plfa-part3-Compositional-773" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-775" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1369" class="Function">∃</a><a id="plfa_plfa-part3-Compositional-776" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-778" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1806" class="Function">∃-syntax</a><a id="plfa_plfa-part3-Compositional-786" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-788" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a><a id="plfa_plfa-part3-Compositional-793" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-795" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a><a id="plfa_plfa-part3-Compositional-800" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-804" class="Keyword">renaming</a> <a id="plfa_plfa-part3-Compositional-813" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-814" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part3-Compositional-818" class="Symbol">to</a> <a id="plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part3-Compositional-826" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-828" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-833" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-840" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.html" class="Module">Data.Sum</a> <a id="plfa_plfa-part3-Compositional-849" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-855" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-856" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#734" class="Datatype Operator">_⊎_</a><a id="plfa_plfa-part3-Compositional-859" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-861" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a><a id="plfa_plfa-part3-Compositional-865" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-867" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a><a id="plfa_plfa-part3-Compositional-871" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-873" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-878" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-885" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Unit.html" class="Module">Data.Unit</a> <a id="plfa_plfa-part3-Compositional-895" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-901" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-902" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#158" class="Record">⊤</a><a id="plfa_plfa-part3-Compositional-903" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-905" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a><a id="plfa_plfa-part3-Compositional-907" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-909" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-914" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-921" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
  <a id="plfa_plfa-part3-Compositional-942" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-948" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-949" href="../Untyped/#plfa_plfa-part2-Untyped-3848" class="Datatype">Context</a><a id="plfa_plfa-part3-Compositional-956" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-958" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part3-Compositional-961" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-963" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-964" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-966" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part3-Compositional-969" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-971" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part3-Compositional-974" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-976" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part3-Compositional-978" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-980" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part3-Compositional-982" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-984" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part3-Compositional-987" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-989" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-994" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-1001" href="../Denotational/#" class="Module">plfa.part3.Denotational</a>
  <a id="plfa_plfa-part3-Compositional-1027" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-1033" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1034" href="../Denotational/#plfa_plfa-part3-Denotational-4969" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-1039" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1041" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">_↦_</a><a id="plfa_plfa-part3-Compositional-1044" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1046" href="../Denotational/#plfa_plfa-part3-Denotational-8930" class="Function Operator">_`,_</a><a id="plfa_plfa-part3-Compositional-1050" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1052" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">_⊔_</a><a id="plfa_plfa-part3-Compositional-1055" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1057" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-1058" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1060" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">_⊑_</a><a id="plfa_plfa-part3-Compositional-1063" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1065" href="../Denotational/#plfa_plfa-part3-Denotational-11466" class="Datatype Operator">_⊢_↓_</a><a id="plfa_plfa-part3-Compositional-1070" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1081" href="../Denotational/#plfa_plfa-part3-Denotational-5471" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-1086" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1088" href="../Denotational/#plfa_plfa-part3-Denotational-5797" class="InductiveConstructor">⊑-fun</a><a id="plfa_plfa-part3-Compositional-1093" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1095" href="../Denotational/#plfa_plfa-part3-Denotational-5496" class="InductiveConstructor">⊑-conj-L</a><a id="plfa_plfa-part3-Compositional-1103" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1105" href="../Denotational/#plfa_plfa-part3-Denotational-5580" class="InductiveConstructor">⊑-conj-R1</a><a id="plfa_plfa-part3-Compositional-1114" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1116" href="../Denotational/#plfa_plfa-part3-Denotational-5653" class="InductiveConstructor">⊑-conj-R2</a><a id="plfa_plfa-part3-Compositional-1125" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1136" href="../Denotational/#plfa_plfa-part3-Denotational-5900" class="InductiveConstructor">⊑-dist</a><a id="plfa_plfa-part3-Compositional-1142" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1144" href="../Denotational/#plfa_plfa-part3-Denotational-6832" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Compositional-1150" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1152" href="../Denotational/#plfa_plfa-part3-Denotational-5726" class="InductiveConstructor">⊑-trans</a><a id="plfa_plfa-part3-Compositional-1159" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1161" href="../Denotational/#plfa_plfa-part3-Denotational-7612" class="Function">⊔↦⊔-dist</a><a id="plfa_plfa-part3-Compositional-1169" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1180" href="../Denotational/#plfa_plfa-part3-Denotational-11520" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Compositional-1183" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1185" href="../Denotational/#plfa_plfa-part3-Denotational-11717" class="InductiveConstructor">↦-intro</a><a id="plfa_plfa-part3-Compositional-1192" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1194" href="../Denotational/#plfa_plfa-part3-Denotational-11595" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Compositional-1200" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1202" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Compositional-1209" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1211" href="../Denotational/#plfa_plfa-part3-Denotational-11829" class="InductiveConstructor">⊥-intro</a><a id="plfa_plfa-part3-Compositional-1218" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1220" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a><a id="plfa_plfa-part3-Compositional-1223" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1234" href="../Denotational/#plfa_plfa-part3-Denotational-32866" class="Function">up-env</a><a id="plfa_plfa-part3-Compositional-1240" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1242" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a><a id="plfa_plfa-part3-Compositional-1243" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1245" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">_≃_</a><a id="plfa_plfa-part3-Compositional-1248" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1250" href="../Denotational/#plfa_plfa-part3-Denotational-22805" class="Function">≃-sym</a><a id="plfa_plfa-part3-Compositional-1255" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1257" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a><a id="plfa_plfa-part3-Compositional-1267" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1269" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a><a id="plfa_plfa-part3-Compositional-1272" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-1274" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-1279" href="../Denotational/#plfa_plfa-part3-Denotational-23473" class="Module">plfa.part3.Denotational.≃-Reasoning</a>
</pre><h2 id="λ-抽象的等式">λ-抽象的等式</h2><p>考虑第一个等式</p><pre><code>ℰ (ƛ M) ≃ ... ℰ M ...</code></pre><p>我们需要定义一个函数，它将 <code>Denotation (Γ , ★)</code> 映射到 <code>Denotation Γ</code>。 我们将此函数命名为 <code>ℱ</code>，在应用到 λ-项时，它应该能够模拟语义中非递归的部分。 具体来说，我们需要考虑规则 <code>↦-intro</code>、<code>⊥-intro</code> 和 <code>⊔-intro</code>。因此 <code>ℱ</code> 有三个参数：子项 <code>M</code> 的指称 <code>D</code>、环境 <code>γ</code>，以及值 <code>v</code>。如果我们通过对值 <code>v</code> 进行递归来定义 <code>ℱ</code>，那么它正好匹配 <code>↦-intro</code>、<code>⊥-intro</code> 和 <code>⊔-intro</code> 这三条规则。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱ"></a><a id="plfa_plfa-part3-Compositional-2252" href="../Compositional/#plfa_plfa-part3-Compositional-2252" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2254" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-2256" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-2258" href="../Compositional/#plfa_plfa-part3-Compositional-2258" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-2259" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-2261" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2263" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-2274" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2275" href="../Compositional/#plfa_plfa-part3-Compositional-2258" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-2277" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-2279" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-2280" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2282" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2284" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-2295" href="../Compositional/#plfa_plfa-part3-Compositional-2258" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-2297" href="../Compositional/#plfa_plfa-part3-Compositional-2252" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2299" href="../Compositional/#plfa_plfa-part3-Compositional-2299" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2301" href="../Compositional/#plfa_plfa-part3-Compositional-2301" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2303" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2304" href="../Compositional/#plfa_plfa-part3-Compositional-2304" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-2306" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-2308" href="../Compositional/#plfa_plfa-part3-Compositional-2308" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-2309" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2311" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2313" href="../Compositional/#plfa_plfa-part3-Compositional-2299" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2315" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2316" href="../Compositional/#plfa_plfa-part3-Compositional-2301" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2318" href="../Denotational/#plfa_plfa-part3-Denotational-8930" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-2321" href="../Compositional/#plfa_plfa-part3-Compositional-2304" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-2322" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2324" href="../Compositional/#plfa_plfa-part3-Compositional-2308" class="Bound">w</a>
<a id="plfa_plfa-part3-Compositional-2326" href="../Compositional/#plfa_plfa-part3-Compositional-2252" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2328" href="../Compositional/#plfa_plfa-part3-Compositional-2328" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2330" href="../Compositional/#plfa_plfa-part3-Compositional-2330" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2332" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Compositional-2334" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2336" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#158" class="Record">⊤</a>
<a id="plfa_plfa-part3-Compositional-2338" href="../Compositional/#plfa_plfa-part3-Compositional-2252" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2340" href="../Compositional/#plfa_plfa-part3-Compositional-2340" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2342" href="../Compositional/#plfa_plfa-part3-Compositional-2342" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2344" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2345" href="../Compositional/#plfa_plfa-part3-Compositional-2345" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-2347" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-2349" href="../Compositional/#plfa_plfa-part3-Compositional-2349" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-2350" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2352" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2354" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2355" href="../Compositional/#plfa_plfa-part3-Compositional-2252" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2357" href="../Compositional/#plfa_plfa-part3-Compositional-2340" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2359" href="../Compositional/#plfa_plfa-part3-Compositional-2342" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2361" href="../Compositional/#plfa_plfa-part3-Compositional-2345" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-2362" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2364" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Compositional-2366" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2367" href="../Compositional/#plfa_plfa-part3-Compositional-2252" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2369" href="../Compositional/#plfa_plfa-part3-Compositional-2340" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2371" href="../Compositional/#plfa_plfa-part3-Compositional-2342" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2373" href="../Compositional/#plfa_plfa-part3-Compositional-2349" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-2374" class="Symbol">)</a>
</pre><p>如果你仔细观察，就会发现 <code>ℱ</code> 函数看起来像函数式程序员熟悉的 <code>curry</code> 化操作：它将一个以长度为 <code>n + 1</code> 的元组（环境 <code>Γ , ★</code>）作为参数的函数， 转化为一个以长度为 <code>n</code> 的元组作为参数并返回一个单参函数的函数。</p><p>使用该 <code>ℱ</code> 函数，我们希望证明</p><pre><code>ℰ (ƛ N) ≃ ℱ (ℰ N)</code></pre><p>当从一个更大的值 <code>v</code> 映射到一个更小的值 <code>u</code> 时，函数 <code>ℱ</code> 会被保留。 它的证明就是在 <code>⊑-fun</code> 规则的情况中使用 <code>up-env</code> 引理，对 <code>u ⊑ v</code> 推导过程的直接归纳。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-sub-ℱ"></a><a id="plfa_plfa-part3-Compositional-3241" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3247" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3249" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-3251" href="../Compositional/#plfa_plfa-part3-Compositional-3251" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3252" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3254" href="../Compositional/#plfa_plfa-part3-Compositional-3254" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3256" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3258" href="../Compositional/#plfa_plfa-part3-Compositional-3251" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-3260" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3262" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-3264" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3266" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-3267" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3269" href="../Compositional/#plfa_plfa-part3-Compositional-3269" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3271" href="../Compositional/#plfa_plfa-part3-Compositional-3271" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-3273" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-3274" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-3278" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3280" href="../Compositional/#plfa_plfa-part3-Compositional-2252" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-3282" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3283" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-3285" href="../Compositional/#plfa_plfa-part3-Compositional-3254" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-3286" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3288" href="../Compositional/#plfa_plfa-part3-Compositional-3269" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3290" href="../Compositional/#plfa_plfa-part3-Compositional-3271" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-3294" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3296" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-3298" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-3300" href="../Compositional/#plfa_plfa-part3-Compositional-3271" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-3306" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-3321" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3323" href="../Compositional/#plfa_plfa-part3-Compositional-2252" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-3325" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3326" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-3328" href="../Compositional/#plfa_plfa-part3-Compositional-3254" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-3329" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3331" href="../Compositional/#plfa_plfa-part3-Compositional-3269" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3333" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Bound">u</a>
<a id="plfa_plfa-part3-Compositional-3335" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3341" href="../Compositional/#plfa_plfa-part3-Compositional-3341" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3343" href="../Denotational/#plfa_plfa-part3-Denotational-5471" class="InductiveConstructor">⊑-bot</a> <a id="plfa_plfa-part3-Compositional-3349" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3351" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a>
<a id="plfa_plfa-part3-Compositional-3354" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3360" href="../Compositional/#plfa_plfa-part3-Compositional-3360" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3362" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3363" href="../Denotational/#plfa_plfa-part3-Denotational-5797" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-3369" href="../Compositional/#plfa_plfa-part3-Compositional-3369" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-3372" href="../Compositional/#plfa_plfa-part3-Compositional-3372" class="Bound">lt′</a><a id="plfa_plfa-part3-Compositional-3375" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3377" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3379" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-3383" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3384" href="../Denotational/#plfa_plfa-part3-Denotational-32866" class="Function">up-env</a> <a id="plfa_plfa-part3-Compositional-3391" href="../Compositional/#plfa_plfa-part3-Compositional-3360" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3393" href="../Compositional/#plfa_plfa-part3-Compositional-3369" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3395" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3397" href="../Compositional/#plfa_plfa-part3-Compositional-3372" class="Bound">lt′</a>
<a id="plfa_plfa-part3-Compositional-3401" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3407" href="../Compositional/#plfa_plfa-part3-Compositional-3407" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3409" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3410" href="../Denotational/#plfa_plfa-part3-Denotational-5496" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-3419" href="../Compositional/#plfa_plfa-part3-Compositional-3419" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-3422" href="../Compositional/#plfa_plfa-part3-Compositional-3422" class="Bound">lt₁</a><a id="plfa_plfa-part3-Compositional-3425" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3427" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3429" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-3431" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3437" href="../Compositional/#plfa_plfa-part3-Compositional-3407" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3439" href="../Compositional/#plfa_plfa-part3-Compositional-3419" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-3442" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3444" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3450" href="../Compositional/#plfa_plfa-part3-Compositional-3407" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3452" href="../Compositional/#plfa_plfa-part3-Compositional-3422" class="Bound">lt₁</a> <a id="plfa_plfa-part3-Compositional-3456" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-3458" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3464" href="../Compositional/#plfa_plfa-part3-Compositional-3464" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3466" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3467" href="../Denotational/#plfa_plfa-part3-Denotational-5580" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Compositional-3477" href="../Compositional/#plfa_plfa-part3-Compositional-3477" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3479" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3481" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3483" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3489" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3490" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-3496" href="../Compositional/#plfa_plfa-part3-Compositional-3464" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-3497" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3499" href="../Compositional/#plfa_plfa-part3-Compositional-3477" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-3502" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3508" href="../Compositional/#plfa_plfa-part3-Compositional-3508" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3510" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3511" href="../Denotational/#plfa_plfa-part3-Denotational-5653" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Compositional-3521" href="../Compositional/#plfa_plfa-part3-Compositional-3521" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3523" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3525" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3527" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3533" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3534" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="plfa_plfa-part3-Compositional-3540" href="../Compositional/#plfa_plfa-part3-Compositional-3508" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-3541" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3543" href="../Compositional/#plfa_plfa-part3-Compositional-3521" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-3546" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3552" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-3553" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-3555" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3557" href="../Compositional/#plfa_plfa-part3-Compositional-3557" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3560" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3562" href="../Compositional/#plfa_plfa-part3-Compositional-3562" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-3565" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-3567" href="../Compositional/#plfa_plfa-part3-Compositional-3557" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3570" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3572" href="../Compositional/#plfa_plfa-part3-Compositional-3572" class="Bound">v₃</a><a id="plfa_plfa-part3-Compositional-3574" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-3576" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-3577" href="../Compositional/#plfa_plfa-part3-Compositional-3557" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3580" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3582" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3583" href="../Compositional/#plfa_plfa-part3-Compositional-3562" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-3586" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-3588" href="../Compositional/#plfa_plfa-part3-Compositional-3572" class="Bound">v₃</a><a id="plfa_plfa-part3-Compositional-3590" class="Symbol">)}</a> <a id="plfa_plfa-part3-Compositional-3593" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-3595" href="../Compositional/#plfa_plfa-part3-Compositional-3595" class="Bound">N2</a> <a id="plfa_plfa-part3-Compositional-3598" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3600" href="../Compositional/#plfa_plfa-part3-Compositional-3600" class="Bound">N3</a> <a id="plfa_plfa-part3-Compositional-3603" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-3605" href="../Denotational/#plfa_plfa-part3-Denotational-5900" class="InductiveConstructor">⊑-dist</a> <a id="plfa_plfa-part3-Compositional-3612" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Compositional-3617" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-3625" href="../Compositional/#plfa_plfa-part3-Compositional-3595" class="Bound">N2</a> <a id="plfa_plfa-part3-Compositional-3628" href="../Compositional/#plfa_plfa-part3-Compositional-3600" class="Bound">N3</a>
<a id="plfa_plfa-part3-Compositional-3631" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3637" href="../Compositional/#plfa_plfa-part3-Compositional-3637" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3639" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3640" href="../Denotational/#plfa_plfa-part3-Denotational-5726" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-3648" href="../Compositional/#plfa_plfa-part3-Compositional-3648" class="Bound">x₁</a> <a id="plfa_plfa-part3-Compositional-3651" href="../Compositional/#plfa_plfa-part3-Compositional-3651" class="Bound">x₂</a><a id="plfa_plfa-part3-Compositional-3653" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3655" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3657" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3663" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3664" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3670" href="../Compositional/#plfa_plfa-part3-Compositional-3637" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3672" href="../Compositional/#plfa_plfa-part3-Compositional-3651" class="Bound">x₂</a><a id="plfa_plfa-part3-Compositional-3674" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3676" href="../Compositional/#plfa_plfa-part3-Compositional-3648" class="Bound">x₁</a>
</pre><p>有了这个小前提的性质，我们就可以证明 λ-等式语义前进的方向。 证明是通过在 <code>sub</code> 规则的情况下使用 <code>sub-ℱ</code>，对语义进行归纳得出的。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰƛ→ℱℰ"></a><a id="plfa_plfa-part3-Compositional-3980" href="../Compositional/#plfa_plfa-part3-Compositional-3980" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3986" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3988" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-3990" href="../Compositional/#plfa_plfa-part3-Compositional-3990" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3991" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3993" href="../Compositional/#plfa_plfa-part3-Compositional-3993" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3995" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3997" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-4001" href="../Compositional/#plfa_plfa-part3-Compositional-3990" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4002" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4004" href="../Compositional/#plfa_plfa-part3-Compositional-4004" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4006" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4008" href="../Compositional/#plfa_plfa-part3-Compositional-3990" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4010" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4012" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4014" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4016" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4017" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4019" href="../Compositional/#plfa_plfa-part3-Compositional-4019" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-4021" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4023" href="../Denotational/#plfa_plfa-part3-Denotational-4969" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4028" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4032" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4034" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4036" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4037" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4039" href="../Compositional/#plfa_plfa-part3-Compositional-4004" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4040" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4042" href="../Compositional/#plfa_plfa-part3-Compositional-3993" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4044" href="../Compositional/#plfa_plfa-part3-Compositional-4019" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-4050" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-4065" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4067" href="../Compositional/#plfa_plfa-part3-Compositional-2252" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-4069" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4070" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4072" href="../Compositional/#plfa_plfa-part3-Compositional-4004" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4073" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4075" href="../Compositional/#plfa_plfa-part3-Compositional-3993" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4077" href="../Compositional/#plfa_plfa-part3-Compositional-4019" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-4079" href="../Compositional/#plfa_plfa-part3-Compositional-3980" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4085" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4086" href="../Denotational/#plfa_plfa-part3-Denotational-11717" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Compositional-4094" href="../Compositional/#plfa_plfa-part3-Compositional-4094" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-4095" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4097" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4099" href="../Compositional/#plfa_plfa-part3-Compositional-4094" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-4101" href="../Compositional/#plfa_plfa-part3-Compositional-3980" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4107" href="../Denotational/#plfa_plfa-part3-Denotational-11829" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-4115" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4117" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a>
<a id="plfa_plfa-part3-Compositional-4120" href="../Compositional/#plfa_plfa-part3-Compositional-3980" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4126" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4127" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-4135" href="../Compositional/#plfa_plfa-part3-Compositional-4135" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-4138" href="../Compositional/#plfa_plfa-part3-Compositional-4138" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-4140" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4142" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4144" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-4146" href="../Compositional/#plfa_plfa-part3-Compositional-3980" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4152" href="../Compositional/#plfa_plfa-part3-Compositional-4135" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-4155" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4157" href="../Compositional/#plfa_plfa-part3-Compositional-3980" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4163" href="../Compositional/#plfa_plfa-part3-Compositional-4138" class="Bound">d₂</a> <a id="plfa_plfa-part3-Compositional-4166" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-4168" href="../Compositional/#plfa_plfa-part3-Compositional-3980" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4174" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4175" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-4179" href="../Compositional/#plfa_plfa-part3-Compositional-4179" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4181" href="../Compositional/#plfa_plfa-part3-Compositional-4181" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-4183" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4185" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4187" href="../Compositional/#plfa_plfa-part3-Compositional-3241" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-4193" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4194" href="../Compositional/#plfa_plfa-part3-Compositional-3980" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4200" href="../Compositional/#plfa_plfa-part3-Compositional-4179" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-4201" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4203" href="../Compositional/#plfa_plfa-part3-Compositional-4181" class="Bound">lt</a>
</pre><p>λ-抽象的「反演引理」是上面定理的一种特例。反演引理在证明「规约会保留指称」时会很有用。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lambda-inversion"></a><a id="plfa_plfa-part3-Compositional-4438" href="../Compositional/#plfa_plfa-part3-Compositional-4438" class="Function">lambda-inversion</a> <a id="plfa_plfa-part3-Compositional-4455" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4457" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4459" href="../Compositional/#plfa_plfa-part3-Compositional-4459" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4460" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4462" href="../Compositional/#plfa_plfa-part3-Compositional-4462" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4464" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4466" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-4470" href="../Compositional/#plfa_plfa-part3-Compositional-4459" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4471" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4473" href="../Compositional/#plfa_plfa-part3-Compositional-4473" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4475" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4477" href="../Compositional/#plfa_plfa-part3-Compositional-4459" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4479" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4481" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4483" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4485" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4486" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4488" href="../Compositional/#plfa_plfa-part3-Compositional-4488" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4491" href="../Compositional/#plfa_plfa-part3-Compositional-4491" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-4494" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4496" href="../Denotational/#plfa_plfa-part3-Denotational-4969" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4501" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4505" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4507" href="../Compositional/#plfa_plfa-part3-Compositional-4462" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4509" href="../Denotational/#plfa_plfa-part3-Denotational-11466" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4511" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4513" href="../Compositional/#plfa_plfa-part3-Compositional-4473" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4515" href="../Denotational/#plfa_plfa-part3-Denotational-11466" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Compositional-4517" href="../Compositional/#plfa_plfa-part3-Compositional-4488" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4520" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-4522" href="../Compositional/#plfa_plfa-part3-Compositional-4491" class="Bound">v₂</a>
    <a id="plfa_plfa-part3-Compositional-4529" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Compositional-4549" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4551" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4552" href="../Compositional/#plfa_plfa-part3-Compositional-4462" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4554" href="../Denotational/#plfa_plfa-part3-Denotational-8930" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-4557" href="../Compositional/#plfa_plfa-part3-Compositional-4488" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-4559" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4561" href="../Denotational/#plfa_plfa-part3-Denotational-11466" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4563" href="../Compositional/#plfa_plfa-part3-Compositional-4473" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4565" href="../Denotational/#plfa_plfa-part3-Denotational-11466" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Compositional-4567" href="../Compositional/#plfa_plfa-part3-Compositional-4491" class="Bound">v₂</a>
<a id="plfa_plfa-part3-Compositional-4570" href="../Compositional/#plfa_plfa-part3-Compositional-4438" class="Function">lambda-inversion</a><a id="plfa_plfa-part3-Compositional-4586" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4587" class="Argument">v₁</a> <a id="plfa_plfa-part3-Compositional-4590" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4592" href="../Compositional/#plfa_plfa-part3-Compositional-4592" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-4594" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4596" class="Argument">v₂</a> <a id="plfa_plfa-part3-Compositional-4599" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4601" href="../Compositional/#plfa_plfa-part3-Compositional-4601" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4603" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4605" href="../Compositional/#plfa_plfa-part3-Compositional-4605" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4607" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4609" href="../Compositional/#plfa_plfa-part3-Compositional-3980" class="Function">ℰƛ→ℱℰ</a><a id="plfa_plfa-part3-Compositional-4614" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4615" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4617" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4619" href="../Compositional/#plfa_plfa-part3-Compositional-4592" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4622" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-4624" href="../Compositional/#plfa_plfa-part3-Compositional-4601" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4626" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4628" href="../Compositional/#plfa_plfa-part3-Compositional-4605" class="Bound">d</a>
</pre><p>λ-等式的语义后退的方向甚至比前进的方向更容易证明，我们只需对值 <code>v</code> 进行归纳：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱℰ→ℰƛ"></a><a id="plfa_plfa-part3-Compositional-4848" href="../Compositional/#plfa_plfa-part3-Compositional-4848" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4854" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4856" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4858" href="../Compositional/#plfa_plfa-part3-Compositional-4858" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4859" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4861" href="../Compositional/#plfa_plfa-part3-Compositional-4861" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4863" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4865" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-4869" href="../Compositional/#plfa_plfa-part3-Compositional-4858" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4870" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4872" href="../Compositional/#plfa_plfa-part3-Compositional-4872" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4874" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4876" href="../Compositional/#plfa_plfa-part3-Compositional-4858" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4878" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4880" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4882" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4884" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4885" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4887" href="../Compositional/#plfa_plfa-part3-Compositional-4887" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-4889" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4891" href="../Denotational/#plfa_plfa-part3-Denotational-4969" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4896" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4900" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4902" href="../Compositional/#plfa_plfa-part3-Compositional-2252" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-4904" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4905" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4907" href="../Compositional/#plfa_plfa-part3-Compositional-4872" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4908" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4910" href="../Compositional/#plfa_plfa-part3-Compositional-4861" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4912" href="../Compositional/#plfa_plfa-part3-Compositional-4887" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-4918" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-4933" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4935" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4937" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4938" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4940" href="../Compositional/#plfa_plfa-part3-Compositional-4872" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4941" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4943" href="../Compositional/#plfa_plfa-part3-Compositional-4861" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4945" href="../Compositional/#plfa_plfa-part3-Compositional-4887" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-4947" href="../Compositional/#plfa_plfa-part3-Compositional-4848" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4953" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4954" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4956" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4958" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-4959" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4961" href="../Compositional/#plfa_plfa-part3-Compositional-4961" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4963" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4965" href="../Denotational/#plfa_plfa-part3-Denotational-11829" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Compositional-4973" href="../Compositional/#plfa_plfa-part3-Compositional-4848" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4979" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4980" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4982" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4984" href="../Compositional/#plfa_plfa-part3-Compositional-4984" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4987" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-4989" href="../Compositional/#plfa_plfa-part3-Compositional-4989" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4991" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4993" href="../Compositional/#plfa_plfa-part3-Compositional-4993" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4995" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4997" href="../Denotational/#plfa_plfa-part3-Denotational-11717" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Compositional-5005" href="../Compositional/#plfa_plfa-part3-Compositional-4993" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-5007" href="../Compositional/#plfa_plfa-part3-Compositional-4848" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5013" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-5014" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-5016" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5018" href="../Compositional/#plfa_plfa-part3-Compositional-5018" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-5021" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-5023" href="../Compositional/#plfa_plfa-part3-Compositional-5023" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-5025" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-5027" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-5029" href="../Compositional/#plfa_plfa-part3-Compositional-5029" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-5032" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-5034" href="../Compositional/#plfa_plfa-part3-Compositional-5034" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-5037" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-5039" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5041" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-5049" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5050" href="../Compositional/#plfa_plfa-part3-Compositional-4848" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5056" href="../Compositional/#plfa_plfa-part3-Compositional-5029" class="Bound">d1</a><a id="plfa_plfa-part3-Compositional-5058" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-5060" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5061" href="../Compositional/#plfa_plfa-part3-Compositional-4848" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5067" href="../Compositional/#plfa_plfa-part3-Compositional-5034" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-5069" class="Symbol">)</a>
</pre><p>因此，指称语义对 λ-抽象来说是可组合的，正如函数 <code>ℱ</code> 所证明的那样：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lam-equiv"></a><a id="plfa_plfa-part3-Compositional-5258" href="../Compositional/#plfa_plfa-part3-Compositional-5258" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-5268" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-5270" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-5272" href="../Compositional/#plfa_plfa-part3-Compositional-5272" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-5273" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-5275" href="../Compositional/#plfa_plfa-part3-Compositional-5275" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-5277" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-5279" href="../Compositional/#plfa_plfa-part3-Compositional-5272" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-5281" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-5283" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-5285" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-5287" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-5288" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-5292" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-5294" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-5296" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5297" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-5299" href="../Compositional/#plfa_plfa-part3-Compositional-5275" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-5300" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-5302" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-5304" href="../Compositional/#plfa_plfa-part3-Compositional-2252" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-5306" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5307" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-5309" href="../Compositional/#plfa_plfa-part3-Compositional-5275" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-5310" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-5312" href="../Compositional/#plfa_plfa-part3-Compositional-5258" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-5322" href="../Compositional/#plfa_plfa-part3-Compositional-5322" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-5324" href="../Compositional/#plfa_plfa-part3-Compositional-5324" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-5326" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5328" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-5330" href="../Compositional/#plfa_plfa-part3-Compositional-3980" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-5336" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-5338" href="../Compositional/#plfa_plfa-part3-Compositional-4848" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5344" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="函数应用的等式">函数应用的等式</h2><p>接下来我们填补关于函数应用的等式中的省略号。</p><pre><code>ℰ (M · N) ≃ ... ℰ M ... ℰ N ...</code></pre><p>为此我们需要定义一个函数，它接受语境 <code>Γ</code> 中的两个指称，并产生语境 <code>Γ</code> 中的另一个指称。我们将此函数命名为 <code>●</code>，以模拟应用语义 <code>L · M</code> 中非递归的部分。我们无法像处理 <code>ℱ</code> 那样简单地对值 <code>v</code> 进行递归来定义函数， 因为 <code>↦-elim</code> 这类的规则课应用于任何值。相反，我们将以直接处理 <code>↦-elim</code> 和 <code>⊥-intro</code> 规则而忽略 <code>⊔-intro</code> 的方式定义 <code>●</code>。这使得证明的前进方向变得更加困难， 而 <code>⊔-intro</code> 的情况说明了为什么 <code>⊑-dist</code> 规则很重要。</p><p>于是我们定义了 <code>D₁</code> 应用于 <code>D₂</code>，记作 <code>D₁ ● D₂</code>，来包含 <code>⊥-intro</code> 规则中所有等价于 <code>⊥</code> 的值 <code>w</code>，以及对于 <code>↦-elim</code> 规则，在 <code>D₁</code> 中的条目 <code>v ↦ w</code> 的所有输出值 <code>w</code>，前提是它的输入值 <code>v</code> 在 <code>D₂</code> 中。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-6916" class="Keyword">infixl</a> <a id="plfa_plfa-part3-Compositional-6923" class="Number">7</a> <a id="plfa_plfa-part3-Compositional-6925" href="../Compositional/#plfa_plfa-part3-Compositional-6930" class="Function Operator">_●_</a>

<a id="plfa_plfa-part3-Compositional-_●_"></a><a id="plfa_plfa-part3-Compositional-6930" href="../Compositional/#plfa_plfa-part3-Compositional-6930" class="Function Operator">_●_</a> <a id="plfa_plfa-part3-Compositional-6934" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6936" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-6938" href="../Compositional/#plfa_plfa-part3-Compositional-6938" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-6939" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6941" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-6943" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-6954" href="../Compositional/#plfa_plfa-part3-Compositional-6938" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-6956" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-6958" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-6969" href="../Compositional/#plfa_plfa-part3-Compositional-6938" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-6971" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-6973" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-6984" href="../Compositional/#plfa_plfa-part3-Compositional-6938" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-6986" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6987" href="../Compositional/#plfa_plfa-part3-Compositional-6987" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-6990" href="../Compositional/#plfa_plfa-part3-Compositional-6930" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-6992" href="../Compositional/#plfa_plfa-part3-Compositional-6992" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-6994" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6996" href="../Compositional/#plfa_plfa-part3-Compositional-6996" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-6998" href="../Compositional/#plfa_plfa-part3-Compositional-6998" class="Bound">w</a> <a id="plfa_plfa-part3-Compositional-7000" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7002" href="../Compositional/#plfa_plfa-part3-Compositional-6998" class="Bound">w</a> <a id="plfa_plfa-part3-Compositional-7004" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-7006" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Compositional-7008" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="plfa_plfa-part3-Compositional-7010" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Compositional-7013" href="../Compositional/#plfa_plfa-part3-Compositional-7013" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7015" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Compositional-7017" href="../Denotational/#plfa_plfa-part3-Denotational-4969" class="Datatype">Value</a> <a id="plfa_plfa-part3-Compositional-7023" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a><a id="plfa_plfa-part3-Compositional-7024" class="Symbol">(</a> <a id="plfa_plfa-part3-Compositional-7026" href="../Compositional/#plfa_plfa-part3-Compositional-6987" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-7029" href="../Compositional/#plfa_plfa-part3-Compositional-6996" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7031" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7032" href="../Compositional/#plfa_plfa-part3-Compositional-7013" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7034" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-7036" href="../Compositional/#plfa_plfa-part3-Compositional-6998" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-7037" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7039" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Compositional-7041" href="../Compositional/#plfa_plfa-part3-Compositional-6992" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-7044" href="../Compositional/#plfa_plfa-part3-Compositional-6996" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7046" href="../Compositional/#plfa_plfa-part3-Compositional-7013" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7048" class="Symbol">)</a>
</pre><p>如果你仔细观察一下，就会发现 <code>_●_</code> 运算符看起来像函数式程序员熟悉的 <code>apply</code> 操作：它接受两个参数，并将第一个参数应用于第二个。</p><p>接下来我们考虑应用的反演引理，它同样是应用的语义等式的前进方向。 下面是它的证明：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰ·→●ℰ"></a><a id="plfa_plfa-part3-Compositional-7743" href="../Compositional/#plfa_plfa-part3-Compositional-7743" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7749" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7751" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-7753" href="../Compositional/#plfa_plfa-part3-Compositional-7753" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-7754" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7756" href="../Compositional/#plfa_plfa-part3-Compositional-7756" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7758" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7760" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-7764" href="../Compositional/#plfa_plfa-part3-Compositional-7753" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-7765" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7767" href="../Compositional/#plfa_plfa-part3-Compositional-7767" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-7769" href="../Compositional/#plfa_plfa-part3-Compositional-7769" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-7771" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7773" href="../Compositional/#plfa_plfa-part3-Compositional-7753" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-7775" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-7777" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-7778" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7780" href="../Compositional/#plfa_plfa-part3-Compositional-7780" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7782" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7784" href="../Denotational/#plfa_plfa-part3-Denotational-4969" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-7789" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-7793" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-7795" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-7797" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7798" href="../Compositional/#plfa_plfa-part3-Compositional-7767" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-7800" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-7802" href="../Compositional/#plfa_plfa-part3-Compositional-7769" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-7803" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7805" href="../Compositional/#plfa_plfa-part3-Compositional-7756" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7807" href="../Compositional/#plfa_plfa-part3-Compositional-7780" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-7813" class="Comment">----------------</a>
  <a id="plfa_plfa-part3-Compositional-7832" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-7834" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7835" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-7837" href="../Compositional/#plfa_plfa-part3-Compositional-7767" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-7839" href="../Compositional/#plfa_plfa-part3-Compositional-6930" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-7841" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-7843" href="../Compositional/#plfa_plfa-part3-Compositional-7769" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-7844" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7846" href="../Compositional/#plfa_plfa-part3-Compositional-7756" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7848" href="../Compositional/#plfa_plfa-part3-Compositional-7780" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-7850" href="../Compositional/#plfa_plfa-part3-Compositional-7743" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7856" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7857" href="../Denotational/#plfa_plfa-part3-Denotational-11595" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Compositional-7863" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-7864" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-7866" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7868" href="../Compositional/#plfa_plfa-part3-Compositional-7868" class="Bound">v′</a><a id="plfa_plfa-part3-Compositional-7870" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-7872" href="../Compositional/#plfa_plfa-part3-Compositional-7872" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-7875" href="../Compositional/#plfa_plfa-part3-Compositional-7875" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-7877" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7879" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7881" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-7886" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7888" href="../Compositional/#plfa_plfa-part3-Compositional-7868" class="Bound">v′</a> <a id="plfa_plfa-part3-Compositional-7891" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7893" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7895" href="../Compositional/#plfa_plfa-part3-Compositional-7872" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-7898" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7900" href="../Compositional/#plfa_plfa-part3-Compositional-7875" class="Bound">d₂</a> <a id="plfa_plfa-part3-Compositional-7903" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-7905" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-7907" href="../Compositional/#plfa_plfa-part3-Compositional-7743" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7913" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-7914" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-7916" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7918" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-7919" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-7921" href="../Denotational/#plfa_plfa-part3-Denotational-11829" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-7929" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7931" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-7936" href="../Denotational/#plfa_plfa-part3-Denotational-5471" class="InductiveConstructor">⊑-bot</a>
<a id="plfa_plfa-part3-Compositional-7942" href="../Compositional/#plfa_plfa-part3-Compositional-7743" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7948" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-7949" href="../Compositional/#plfa_plfa-part3-Compositional-7949" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-7950" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7952" href="../Compositional/#plfa_plfa-part3-Compositional-7952" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-7953" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7955" href="../Compositional/#plfa_plfa-part3-Compositional-7955" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-7956" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7958" href="../Compositional/#plfa_plfa-part3-Compositional-7958" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-7959" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7961" href="../Compositional/#plfa_plfa-part3-Compositional-7961" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-7962" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-7964" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7965" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Compositional-7972" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-7973" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-7975" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7977" href="../Compositional/#plfa_plfa-part3-Compositional-7977" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-7979" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7981" class="Argument">w</a> <a id="plfa_plfa-part3-Compositional-7983" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7985" href="../Compositional/#plfa_plfa-part3-Compositional-7985" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-7987" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-7989" href="../Compositional/#plfa_plfa-part3-Compositional-7989" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-7992" href="../Compositional/#plfa_plfa-part3-Compositional-7992" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-7994" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Compositional-8000" class="Keyword">with</a> <a id="plfa_plfa-part3-Compositional-8005" href="../Compositional/#plfa_plfa-part3-Compositional-7743" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8011" href="../Compositional/#plfa_plfa-part3-Compositional-7989" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-8014" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8016" href="../Compositional/#plfa_plfa-part3-Compositional-7743" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8022" href="../Compositional/#plfa_plfa-part3-Compositional-7992" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Compositional-8025" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8029" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8031" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8036" href="../Compositional/#plfa_plfa-part3-Compositional-8036" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8040" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8042" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8047" href="../Compositional/#plfa_plfa-part3-Compositional-8047" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8051" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8053" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8058" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8059" href="../Denotational/#plfa_plfa-part3-Denotational-5496" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-8068" href="../Compositional/#plfa_plfa-part3-Compositional-8036" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8072" href="../Compositional/#plfa_plfa-part3-Compositional-8047" class="Bound">lt2</a><a id="plfa_plfa-part3-Compositional-8075" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-8077" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8081" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8083" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8088" href="../Compositional/#plfa_plfa-part3-Compositional-8088" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8092" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8094" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8099" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8101" href="../Compositional/#plfa_plfa-part3-Compositional-8101" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8105" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8107" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8109" href="../Compositional/#plfa_plfa-part3-Compositional-8109" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8115" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8117" href="../Compositional/#plfa_plfa-part3-Compositional-8117" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8122" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8124" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8126" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8134" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8139" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8141" href="../Compositional/#plfa_plfa-part3-Compositional-8101" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8145" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8147" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8149" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8153" href="../Compositional/#plfa_plfa-part3-Compositional-8109" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8159" href="../Compositional/#plfa_plfa-part3-Compositional-8185" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8162" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8164" href="../Compositional/#plfa_plfa-part3-Compositional-8117" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8169" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8171" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part3-Compositional-8179" class="Keyword">where</a> <a id="plfa_plfa-part3-Compositional-8185" href="../Compositional/#plfa_plfa-part3-Compositional-8185" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8188" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-8190" href="../Compositional/#plfa_plfa-part3-Compositional-8101" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8194" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8196" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8197" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8200" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-8202" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-8204" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8206" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-8208" href="../Compositional/#plfa_plfa-part3-Compositional-8101" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8212" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8214" class="Bound">v₂</a>
            <a id="plfa_plfa-part3-Compositional-8229" href="../Compositional/#plfa_plfa-part3-Compositional-8185" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8232" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8234" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8235" href="../Denotational/#plfa_plfa-part3-Denotational-5797" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-8241" href="../Denotational/#plfa_plfa-part3-Denotational-6832" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8248" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8249" href="../Denotational/#plfa_plfa-part3-Denotational-5496" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-8258" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8259" href="../Denotational/#plfa_plfa-part3-Denotational-5726" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-8267" href="../Compositional/#plfa_plfa-part3-Compositional-8088" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8271" href="../Denotational/#plfa_plfa-part3-Denotational-5471" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-8276" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8278" href="../Denotational/#plfa_plfa-part3-Denotational-6832" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Compositional-8284" class="Symbol">))</a>
<a id="plfa_plfa-part3-Compositional-8287" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8291" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8293" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8298" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8300" href="../Compositional/#plfa_plfa-part3-Compositional-8300" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8304" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8306" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8308" href="../Compositional/#plfa_plfa-part3-Compositional-8308" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8314" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8316" href="../Compositional/#plfa_plfa-part3-Compositional-8316" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8321" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8323" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8325" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8327" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8332" href="../Compositional/#plfa_plfa-part3-Compositional-8332" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8336" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8344" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8349" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8351" href="../Compositional/#plfa_plfa-part3-Compositional-8300" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8355" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8357" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8359" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8363" href="../Compositional/#plfa_plfa-part3-Compositional-8308" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8369" href="../Compositional/#plfa_plfa-part3-Compositional-8395" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8372" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8374" href="../Compositional/#plfa_plfa-part3-Compositional-8316" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8379" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8381" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part3-Compositional-8389" class="Keyword">where</a> <a id="plfa_plfa-part3-Compositional-8395" href="../Compositional/#plfa_plfa-part3-Compositional-8395" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8398" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-8400" href="../Compositional/#plfa_plfa-part3-Compositional-8300" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8404" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8406" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8407" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8410" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-8412" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-8414" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8416" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-8418" href="../Compositional/#plfa_plfa-part3-Compositional-8300" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8422" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8424" class="Bound">v₁</a>
            <a id="plfa_plfa-part3-Compositional-8439" href="../Compositional/#plfa_plfa-part3-Compositional-8395" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8442" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8444" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8445" href="../Denotational/#plfa_plfa-part3-Denotational-5797" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-8451" href="../Denotational/#plfa_plfa-part3-Denotational-6832" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8458" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8459" href="../Denotational/#plfa_plfa-part3-Denotational-5496" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-8468" href="../Denotational/#plfa_plfa-part3-Denotational-6832" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8475" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8476" href="../Denotational/#plfa_plfa-part3-Denotational-5726" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-8484" href="../Compositional/#plfa_plfa-part3-Compositional-8332" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8488" href="../Denotational/#plfa_plfa-part3-Denotational-5471" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-8493" class="Symbol">)))</a>
<a id="plfa_plfa-part3-Compositional-8497" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8501" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8503" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8508" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8510" href="../Compositional/#plfa_plfa-part3-Compositional-8510" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8514" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8516" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8518" href="../Compositional/#plfa_plfa-part3-Compositional-8518" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8524" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8526" href="../Compositional/#plfa_plfa-part3-Compositional-8526" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8531" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8533" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8535" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8537" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8542" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8544" href="../Compositional/#plfa_plfa-part3-Compositional-8544" class="Bound">v₁′′</a> <a id="plfa_plfa-part3-Compositional-8549" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8551" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8553" href="../Compositional/#plfa_plfa-part3-Compositional-8553" class="Bound">L↓v12′</a> <a id="plfa_plfa-part3-Compositional-8560" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8562" href="../Compositional/#plfa_plfa-part3-Compositional-8562" class="Bound">M↓v3′</a> <a id="plfa_plfa-part3-Compositional-8568" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8570" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8572" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8580" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-8584" href="../Compositional/#plfa_plfa-part3-Compositional-8584" class="Bound">L↓⊔</a> <a id="plfa_plfa-part3-Compositional-8588" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8590" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-8598" href="../Compositional/#plfa_plfa-part3-Compositional-8518" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8604" href="../Compositional/#plfa_plfa-part3-Compositional-8553" class="Bound">L↓v12′</a> <a id="plfa_plfa-part3-Compositional-8611" class="Keyword">in</a>
      <a id="plfa_plfa-part3-Compositional-8620" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-8624" href="../Compositional/#plfa_plfa-part3-Compositional-8624" class="Bound">M↓⊔</a> <a id="plfa_plfa-part3-Compositional-8628" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8630" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-8638" href="../Compositional/#plfa_plfa-part3-Compositional-8526" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8643" href="../Compositional/#plfa_plfa-part3-Compositional-8562" class="Bound">M↓v3′</a> <a id="plfa_plfa-part3-Compositional-8649" class="Keyword">in</a>
      <a id="plfa_plfa-part3-Compositional-8658" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8663" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8665" href="../Compositional/#plfa_plfa-part3-Compositional-8510" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8669" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-8671" href="../Compositional/#plfa_plfa-part3-Compositional-8544" class="Bound">v₁′′</a> <a id="plfa_plfa-part3-Compositional-8676" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8678" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8680" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8684" href="../Compositional/#plfa_plfa-part3-Compositional-8584" class="Bound">L↓⊔</a> <a id="plfa_plfa-part3-Compositional-8688" href="../Denotational/#plfa_plfa-part3-Denotational-7612" class="Function">⊔↦⊔-dist</a> <a id="plfa_plfa-part3-Compositional-8697" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8699" href="../Compositional/#plfa_plfa-part3-Compositional-8624" class="Bound">M↓⊔</a> <a id="plfa_plfa-part3-Compositional-8703" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8705" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-8707" href="../Compositional/#plfa_plfa-part3-Compositional-7743" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8713" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-8714" href="../Compositional/#plfa_plfa-part3-Compositional-8714" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-8715" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8717" href="../Compositional/#plfa_plfa-part3-Compositional-8717" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-8718" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8720" href="../Compositional/#plfa_plfa-part3-Compositional-8720" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-8721" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8723" href="../Compositional/#plfa_plfa-part3-Compositional-8723" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-8724" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8726" href="../Compositional/#plfa_plfa-part3-Compositional-8726" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-8727" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-8729" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8730" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8734" href="../Compositional/#plfa_plfa-part3-Compositional-8734" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-8736" href="../Compositional/#plfa_plfa-part3-Compositional-8736" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-8738" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Compositional-8744" class="Keyword">with</a> <a id="plfa_plfa-part3-Compositional-8749" href="../Compositional/#plfa_plfa-part3-Compositional-7743" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8755" href="../Compositional/#plfa_plfa-part3-Compositional-8734" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-8757" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8761" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8763" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8768" href="../Compositional/#plfa_plfa-part3-Compositional-8768" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8772" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8774" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8779" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8780" href="../Denotational/#plfa_plfa-part3-Denotational-5726" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-8788" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-8791" href="../Compositional/#plfa_plfa-part3-Compositional-8768" class="Bound">lt2</a><a id="plfa_plfa-part3-Compositional-8794" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-8796" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8800" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8802" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8807" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8809" href="../Compositional/#plfa_plfa-part3-Compositional-8809" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8812" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8814" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8816" href="../Compositional/#plfa_plfa-part3-Compositional-8816" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8822" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8824" href="../Compositional/#plfa_plfa-part3-Compositional-8824" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8829" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8831" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8833" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8841" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8846" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8848" href="../Compositional/#plfa_plfa-part3-Compositional-8809" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8851" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8853" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8855" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8859" href="../Compositional/#plfa_plfa-part3-Compositional-8816" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8865" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8866" href="../Denotational/#plfa_plfa-part3-Denotational-5797" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-8872" href="../Denotational/#plfa_plfa-part3-Denotational-6832" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8879" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-8881" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8883" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8885" href="../Compositional/#plfa_plfa-part3-Compositional-8824" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8890" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8892" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a>
</pre><p>我们通过在语义上进行归纳来证明：</p><ul><li><p>对于 <code>↦-elim</code> 的情况，我们有 <code>γ ⊢ L ↓ (v′ ↦ v)</code> 和 <code>γ ⊢ M ↓ v′</code>， 我们只需证明 <code>(ℰ L ● ℰ M) γ v</code> 即可。</p></li><li><p>对于 <code>⊥-intro</code> 的情况，我们有 <code>v = ⊥</code>，于是可推出 <code>v ⊑ ⊥</code>。</p></li></ul><ul><li><p>对于 <code>⊔-intro</code> 的情况，我们有 <code>ℰ (L · M) γ v₁</code> 和 <code>ℰ (L · M) γ v₂</code>， 且需要证明 <code>(ℰ L ● ℰ M) γ (v₁ ⊔ v₂)</code>。根据归纳假设，我们有 <code>(ℰ L ● ℰ M) γ v₁</code> 和 <code>(ℰ L ● ℰ M) γ v₂</code>，于是我们需要考虑四种子情况：</p><ul><li><p>假设 <code>v₁ ⊑ ⊥</code> 且 <code>v₂ ⊑ ⊥</code>，那么 <code>v₁ ⊔ v₂ ⊑ ⊥</code>。</p></li><li><p>假设 <code>v₁ ⊑ ⊥</code>，<code>γ ⊢ L ↓ v₁′ ↦ v₂</code> 且 <code>γ ⊢ M ↓ v₁′</code>， 根据 <code>sub</code> 规则我们有 <code>γ ⊢ L ↓ v₁′ ↦ (v₁ ⊔ v₂)</code>，因为 <code>v₁′ ↦ (v₁ ⊔ v₂) ⊑ v₁′ ↦ v₂</code>。</p></li><li><p>假设 <code>γ ⊢ L ↓ v₁′ ↦ v₁</code>, <code>γ ⊢ M ↓ v₁′</code> 且 <code>v₂ ⊑ ⊥</code>， 根据 <code>sub</code> 规则我们有 <code>γ ⊢ L ↓ v₁′ ↦ (v₁ ⊔ v₂)</code>，因为 <code>v₁′ ↦ (v₁ ⊔ v₂) ⊑ v₁′ ↦ v₁</code>。</p></li><li><p>假设 <code>γ ⊢ L ↓ v₁′′ ↦ v₁, γ ⊢ M ↓ v₁′′</code>， <code>γ ⊢ L ↓ v₁′ ↦ v₂</code> 且 <code>γ ⊢ M ↓ v₁′</code>， 这种情况是最有趣的部分。通过使用两次 <code>⊔-intro</code>，我们有 <code>γ ⊢ L ↓ (v₁′ ↦ v₂) ⊔ (v₁′′ ↦ v₁)</code> 且 <code>γ ⊢ M ↓ (v₁′ ⊔ v₁′′)</code>。但它对 <code>ℰ L ● ℰ M</code> 来说与我们的需要尚不匹配， 因为 <code>L</code> 的结果必须是一个输入条目为 <code>v₁′ ⊔ v₁′′</code> 的 <code>↦</code>。 因此我们需要使用 <code>sub</code> 规则来得到 <code>γ ⊢ L ↓ (v₁′ ⊔ v₁′′) ↦ (v₁ ⊔ v₂)</code>； 使用 <code>⊔↦⊔-dist</code> 引理（感谢 <code>⊑-dist</code> 规则）来证明：</p><pre><code>  (v₁′ ⊔ v₁′′) ↦ (v₁ ⊔ v₂) ⊑ (v₁′ ↦ v₂) ⊔ (v₁′′ ↦ v₁)</code></pre><p>这样我们就证明了该情况所有的子情况。</p></li></ul></li><li><p>对于情况 <code>sub</code>，我们有 <code>Γ ⊢ L · M ↓ v₁</code> 且 <code>v ⊑ v₁</code>。 根据归纳假设，我们有 <code>(ℰ L ● ℰ M) γ v₁</code>，于是我们需要考虑两种子情况：</p><ul><li>假设 <code>v₁ ⊑ ⊥</code>，我们可推出 <code>v ⊑ ⊥</code>。</li><li>假设 <code>Γ ⊢ L ↓ v′ → v₁</code> 且 <code>Γ ⊢ M ↓ v′</code>，我们可根据规则 <code>sub</code> 推出 <code>Γ ⊢ L ↓ v′ → v</code>，因为 <code>v′ → v ⊑ v′ → v₁</code>。</li></ul></li></ul><p>后退的方向可通过在前提 <code>(ℰ L ● ℰ M) γ v</code> 下进行情况分析来证明。 对于情况 <code>v ⊑ ⊥</code>，我们可通过规则 <code>⊥-intro</code> 得到 <code>Γ ⊢ L · M ↓ ⊥</code>。 否则，我们可直接通过规则 <code>↦-elim</code> 得出结论：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-●ℰ→ℰ·"></a><a id="plfa_plfa-part3-Compositional-12129" href="../Compositional/#plfa_plfa-part3-Compositional-12129" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12135" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12137" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12139" href="../Compositional/#plfa_plfa-part3-Compositional-12139" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12140" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12142" href="../Compositional/#plfa_plfa-part3-Compositional-12142" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12144" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12146" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-12150" href="../Compositional/#plfa_plfa-part3-Compositional-12139" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12151" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12153" href="../Compositional/#plfa_plfa-part3-Compositional-12153" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12155" href="../Compositional/#plfa_plfa-part3-Compositional-12155" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-12157" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12159" href="../Compositional/#plfa_plfa-part3-Compositional-12139" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-12161" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-12163" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-12164" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12166" href="../Compositional/#plfa_plfa-part3-Compositional-12166" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12167" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12171" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12173" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12174" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12176" href="../Compositional/#plfa_plfa-part3-Compositional-12153" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12178" href="../Compositional/#plfa_plfa-part3-Compositional-6930" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12180" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12182" href="../Compositional/#plfa_plfa-part3-Compositional-12155" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12183" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12185" href="../Compositional/#plfa_plfa-part3-Compositional-12142" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12187" href="../Compositional/#plfa_plfa-part3-Compositional-12166" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-12193" class="Comment">----------------</a>
  <a id="plfa_plfa-part3-Compositional-12212" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12214" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12216" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12217" href="../Compositional/#plfa_plfa-part3-Compositional-12153" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12219" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-12221" href="../Compositional/#plfa_plfa-part3-Compositional-12155" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12222" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12224" href="../Compositional/#plfa_plfa-part3-Compositional-12142" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12226" href="../Compositional/#plfa_plfa-part3-Compositional-12166" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-12228" href="../Compositional/#plfa_plfa-part3-Compositional-12129" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12234" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12235" href="../Compositional/#plfa_plfa-part3-Compositional-12235" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-12236" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12238" href="../Compositional/#plfa_plfa-part3-Compositional-12238" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12239" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12241" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12242" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-12247" href="../Compositional/#plfa_plfa-part3-Compositional-12247" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-12249" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12251" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12253" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-12257" href="../Denotational/#plfa_plfa-part3-Denotational-11829" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-12265" href="../Compositional/#plfa_plfa-part3-Compositional-12247" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-12268" href="../Compositional/#plfa_plfa-part3-Compositional-12129" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12274" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12275" href="../Compositional/#plfa_plfa-part3-Compositional-12275" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-12276" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12278" href="../Compositional/#plfa_plfa-part3-Compositional-12278" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12279" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12281" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12282" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-12287" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12289" href="../Compositional/#plfa_plfa-part3-Compositional-12289" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-12292" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12294" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12296" href="../Compositional/#plfa_plfa-part3-Compositional-12296" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-12299" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12301" href="../Compositional/#plfa_plfa-part3-Compositional-12301" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-12304" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-12306" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-12307" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12309" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12311" href="../Denotational/#plfa_plfa-part3-Denotational-11595" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Compositional-12318" href="../Compositional/#plfa_plfa-part3-Compositional-12296" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-12321" href="../Compositional/#plfa_plfa-part3-Compositional-12301" class="Bound">d2</a>
</pre><p>这样我们就通过 <code>●</code> 函数的相关定理，证明了对于函数应用来说，语义是可组合的。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-app-equiv"></a><a id="plfa_plfa-part3-Compositional-12515" href="../Compositional/#plfa_plfa-part3-Compositional-12515" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-12525" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12527" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12529" href="../Compositional/#plfa_plfa-part3-Compositional-12529" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12530" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12532" href="../Compositional/#plfa_plfa-part3-Compositional-12532" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12534" href="../Compositional/#plfa_plfa-part3-Compositional-12534" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-12536" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12538" href="../Compositional/#plfa_plfa-part3-Compositional-12529" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-12540" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-12542" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-12543" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12547" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12549" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12551" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12552" href="../Compositional/#plfa_plfa-part3-Compositional-12532" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12554" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-12556" href="../Compositional/#plfa_plfa-part3-Compositional-12534" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12557" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12559" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12561" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12562" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12564" href="../Compositional/#plfa_plfa-part3-Compositional-12532" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-12565" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12567" href="../Compositional/#plfa_plfa-part3-Compositional-6930" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12569" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12570" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12572" href="../Compositional/#plfa_plfa-part3-Compositional-12534" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12573" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-12575" href="../Compositional/#plfa_plfa-part3-Compositional-12515" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-12585" href="../Compositional/#plfa_plfa-part3-Compositional-12585" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12587" href="../Compositional/#plfa_plfa-part3-Compositional-12587" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12589" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12591" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12593" href="../Compositional/#plfa_plfa-part3-Compositional-7743" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-12599" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12601" href="../Compositional/#plfa_plfa-part3-Compositional-12129" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12607" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a>
</pre><p>我们还需要一个变量的反演引理：若 <code>Γ ⊢ x ↓ v</code>，则 <code>v ⊑ γ x</code>。 它的证明就是对语义的直接归纳：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-var-inv"></a><a id="plfa_plfa-part3-Compositional-12829" href="../Compositional/#plfa_plfa-part3-Compositional-12829" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12837" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12839" class="Symbol">∀</a> <a id="plfa_plfa-part3-Compositional-12841" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12842" href="../Compositional/#plfa_plfa-part3-Compositional-12842" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-12844" href="../Compositional/#plfa_plfa-part3-Compositional-12844" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12846" href="../Compositional/#plfa_plfa-part3-Compositional-12846" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-12847" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12849" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12850" href="../Compositional/#plfa_plfa-part3-Compositional-12850" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12852" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12854" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-12858" href="../Compositional/#plfa_plfa-part3-Compositional-12842" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12859" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12863" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12865" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12867" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12868" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-12870" href="../Compositional/#plfa_plfa-part3-Compositional-12846" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-12871" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12873" href="../Compositional/#plfa_plfa-part3-Compositional-12850" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12875" href="../Compositional/#plfa_plfa-part3-Compositional-12844" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-12881" class="Comment">-------------------</a>
  <a id="plfa_plfa-part3-Compositional-12903" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12905" href="../Compositional/#plfa_plfa-part3-Compositional-12844" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12907" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-12909" href="../Compositional/#plfa_plfa-part3-Compositional-12850" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12911" href="../Compositional/#plfa_plfa-part3-Compositional-12846" class="Bound">x</a>
<a id="plfa_plfa-part3-Compositional-12913" href="../Compositional/#plfa_plfa-part3-Compositional-12829" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12921" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12922" href="../Denotational/#plfa_plfa-part3-Denotational-11520" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Compositional-12925" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12927" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12929" href="../Denotational/#plfa_plfa-part3-Denotational-6832" class="Function">⊑-refl</a>
<a id="plfa_plfa-part3-Compositional-12936" href="../Compositional/#plfa_plfa-part3-Compositional-12829" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12944" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12945" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-12953" href="../Compositional/#plfa_plfa-part3-Compositional-12953" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-12956" href="../Compositional/#plfa_plfa-part3-Compositional-12956" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-12958" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12960" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12962" href="../Denotational/#plfa_plfa-part3-Denotational-5496" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-12971" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12972" href="../Compositional/#plfa_plfa-part3-Compositional-12829" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12980" href="../Compositional/#plfa_plfa-part3-Compositional-12953" class="Bound">d₁</a><a id="plfa_plfa-part3-Compositional-12982" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12984" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12985" href="../Compositional/#plfa_plfa-part3-Compositional-12829" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12993" href="../Compositional/#plfa_plfa-part3-Compositional-12956" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-12995" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-12997" href="../Compositional/#plfa_plfa-part3-Compositional-12829" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13005" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13006" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-13010" href="../Compositional/#plfa_plfa-part3-Compositional-13010" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-13012" href="../Compositional/#plfa_plfa-part3-Compositional-13012" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-13014" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13016" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-13018" href="../Denotational/#plfa_plfa-part3-Denotational-5726" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-13026" href="../Compositional/#plfa_plfa-part3-Compositional-13012" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-13029" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13030" href="../Compositional/#plfa_plfa-part3-Compositional-12829" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13038" href="../Compositional/#plfa_plfa-part3-Compositional-13010" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-13039" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-13041" href="../Compositional/#plfa_plfa-part3-Compositional-12829" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13049" href="../Denotational/#plfa_plfa-part3-Denotational-11829" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-13057" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-13059" href="../Denotational/#plfa_plfa-part3-Denotational-5471" class="InductiveConstructor">⊑-bot</a>
</pre><p>为了完善语义等式，我们建立以下变量等式：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-var-equiv"></a><a id="plfa_plfa-part3-Compositional-13193" href="../Compositional/#plfa_plfa-part3-Compositional-13193" class="Function">var-equiv</a> <a id="plfa_plfa-part3-Compositional-13203" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13205" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-13207" href="../Compositional/#plfa_plfa-part3-Compositional-13207" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-13208" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13210" href="../Compositional/#plfa_plfa-part3-Compositional-13210" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-13212" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13214" href="../Compositional/#plfa_plfa-part3-Compositional-13207" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13216" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Compositional-13218" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-13219" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13221" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13223" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13225" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13226" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-13228" href="../Compositional/#plfa_plfa-part3-Compositional-13210" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-13229" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13231" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-13233" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-13236" href="../Compositional/#plfa_plfa-part3-Compositional-13236" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-13238" href="../Compositional/#plfa_plfa-part3-Compositional-13238" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-13240" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13242" href="../Compositional/#plfa_plfa-part3-Compositional-13238" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-13244" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-13246" href="../Compositional/#plfa_plfa-part3-Compositional-13236" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-13248" href="../Compositional/#plfa_plfa-part3-Compositional-13210" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-13249" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-13251" href="../Compositional/#plfa_plfa-part3-Compositional-13193" class="Function">var-equiv</a> <a id="plfa_plfa-part3-Compositional-13261" href="../Compositional/#plfa_plfa-part3-Compositional-13261" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-13263" href="../Compositional/#plfa_plfa-part3-Compositional-13263" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-13265" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-13267" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-13269" href="../Compositional/#plfa_plfa-part3-Compositional-12829" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13277" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-13279" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-13282" href="../Compositional/#plfa_plfa-part3-Compositional-13282" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-13285" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13287" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-13291" href="../Denotational/#plfa_plfa-part3-Denotational-11520" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Compositional-13295" href="../Compositional/#plfa_plfa-part3-Compositional-13282" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-13297" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13299" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="合同性">合同性</h2><p>本章的主要工作已经完成：我们建立了语义等式来展示指称语义是如何组合的。 在本节和下一节中，我们将利用这些等式来证明一些推论：指称相等是满足<strong>合同性（congruence）</strong>， 并证明<strong>组合性的性质</strong>，该性质指出在同一语境中，两个指称相等的项会产生两个指称相等的程序 。</p><p>我们首先证明指称相等对 λ-抽象满足合同性：<code>ℰ N ≃ ℰ N′</code> 蕴含 <code>ℰ (ƛ N) ≃ ℰ (ƛ N′)</code>。我们用 <code>lam-equiv</code> 等式将这个问题简化为 <code>ℱ</code> 是否满足合同性：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱ-cong"></a><a id="plfa_plfa-part3-Compositional-14301" href="../Compositional/#plfa_plfa-part3-Compositional-14301" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-14308" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14310" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-14312" href="../Compositional/#plfa_plfa-part3-Compositional-14312" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14313" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14315" href="../Compositional/#plfa_plfa-part3-Compositional-14315" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14317" href="../Compositional/#plfa_plfa-part3-Compositional-14317" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14320" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14322" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-14333" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14334" href="../Compositional/#plfa_plfa-part3-Compositional-14312" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14336" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14338" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-14339" class="Symbol">)}</a>
  <a id="plfa_plfa-part3-Compositional-14344" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14346" href="../Compositional/#plfa_plfa-part3-Compositional-14315" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14348" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-14350" href="../Compositional/#plfa_plfa-part3-Compositional-14317" class="Bound">D′</a>
    <a id="plfa_plfa-part3-Compositional-14357" class="Comment">-----------</a>
  <a id="plfa_plfa-part3-Compositional-14371" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14373" href="../Compositional/#plfa_plfa-part3-Compositional-2252" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14375" href="../Compositional/#plfa_plfa-part3-Compositional-14315" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14377" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-14379" href="../Compositional/#plfa_plfa-part3-Compositional-2252" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14381" href="../Compositional/#plfa_plfa-part3-Compositional-14317" class="Bound">D′</a>
<a id="plfa_plfa-part3-Compositional-14384" href="../Compositional/#plfa_plfa-part3-Compositional-14301" class="Function">ℱ-cong</a><a id="plfa_plfa-part3-Compositional-14390" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14391" href="../Compositional/#plfa_plfa-part3-Compositional-14391" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14392" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14394" href="../Compositional/#plfa_plfa-part3-Compositional-14394" class="Bound">D≃D′</a> <a id="plfa_plfa-part3-Compositional-14399" href="../Compositional/#plfa_plfa-part3-Compositional-14399" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14401" href="../Compositional/#plfa_plfa-part3-Compositional-14401" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-14403" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-14407" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-14409" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-14412" href="../Compositional/#plfa_plfa-part3-Compositional-14412" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14414" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14416" href="../Compositional/#plfa_plfa-part3-Compositional-14479" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14418" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14419" href="../Compositional/#plfa_plfa-part3-Compositional-14399" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14420" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14422" href="../Compositional/#plfa_plfa-part3-Compositional-14401" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14423" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14425" href="../Compositional/#plfa_plfa-part3-Compositional-14412" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14427" href="../Compositional/#plfa_plfa-part3-Compositional-14394" class="Bound">D≃D′</a><a id="plfa_plfa-part3-Compositional-14431" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14433" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14435" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-14438" href="../Compositional/#plfa_plfa-part3-Compositional-14438" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14440" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14442" href="../Compositional/#plfa_plfa-part3-Compositional-14479" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14444" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14445" href="../Compositional/#plfa_plfa-part3-Compositional-14399" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14446" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14448" href="../Compositional/#plfa_plfa-part3-Compositional-14401" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14449" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14451" href="../Compositional/#plfa_plfa-part3-Compositional-14438" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14453" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14454" href="../Denotational/#plfa_plfa-part3-Denotational-22805" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-14460" href="../Compositional/#plfa_plfa-part3-Compositional-14394" class="Bound">D≃D′</a><a id="plfa_plfa-part3-Compositional-14464" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-14467" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Compositional-14471" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-14479" href="../Compositional/#plfa_plfa-part3-Compositional-14479" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14482" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14484" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-14486" href="../Compositional/#plfa_plfa-part3-Compositional-14486" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14488" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14490" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-14494" href="../Compositional/#plfa_plfa-part3-Compositional-14391" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14495" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14497" href="../Compositional/#plfa_plfa-part3-Compositional-14497" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14498" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14500" href="../Compositional/#plfa_plfa-part3-Compositional-14500" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14502" href="../Compositional/#plfa_plfa-part3-Compositional-14502" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14505" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14507" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-14518" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14519" href="../Compositional/#plfa_plfa-part3-Compositional-14391" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14521" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14523" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-14524" class="Symbol">)}</a>
    <a id="plfa_plfa-part3-Compositional-14531" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14533" href="../Compositional/#plfa_plfa-part3-Compositional-2252" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14535" href="../Compositional/#plfa_plfa-part3-Compositional-14500" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14537" href="../Compositional/#plfa_plfa-part3-Compositional-14486" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14539" href="../Compositional/#plfa_plfa-part3-Compositional-14497" class="Bound">v</a>  <a id="plfa_plfa-part3-Compositional-14542" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-14545" href="../Compositional/#plfa_plfa-part3-Compositional-14500" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14547" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-14549" href="../Compositional/#plfa_plfa-part3-Compositional-14502" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14552" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14554" href="../Compositional/#plfa_plfa-part3-Compositional-2252" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14556" href="../Compositional/#plfa_plfa-part3-Compositional-14502" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14559" href="../Compositional/#plfa_plfa-part3-Compositional-14486" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14561" href="../Compositional/#plfa_plfa-part3-Compositional-14497" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-14565" href="../Compositional/#plfa_plfa-part3-Compositional-14479" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14568" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14569" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-14571" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14573" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-14574" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14576" href="../Compositional/#plfa_plfa-part3-Compositional-14576" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-14579" href="../Compositional/#plfa_plfa-part3-Compositional-14579" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14583" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14585" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a>
  <a id="plfa_plfa-part3-Compositional-14590" href="../Compositional/#plfa_plfa-part3-Compositional-14479" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14593" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14594" href="../Compositional/#plfa_plfa-part3-Compositional-14594" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14595" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14597" href="../Compositional/#plfa_plfa-part3-Compositional-14597" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-14599" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-14601" href="../Compositional/#plfa_plfa-part3-Compositional-14601" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14602" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14604" href="../Compositional/#plfa_plfa-part3-Compositional-14604" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-14607" href="../Compositional/#plfa_plfa-part3-Compositional-14607" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14611" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14613" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-14619" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14620" href="../Compositional/#plfa_plfa-part3-Compositional-14607" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14624" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14625" href="../Compositional/#plfa_plfa-part3-Compositional-14594" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14627" href="../Denotational/#plfa_plfa-part3-Denotational-8930" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-14630" href="../Compositional/#plfa_plfa-part3-Compositional-14597" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14631" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14633" href="../Compositional/#plfa_plfa-part3-Compositional-14601" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14634" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14636" href="../Compositional/#plfa_plfa-part3-Compositional-14604" class="Bound">fd</a>
  <a id="plfa_plfa-part3-Compositional-14641" href="../Compositional/#plfa_plfa-part3-Compositional-14479" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14644" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14645" href="../Compositional/#plfa_plfa-part3-Compositional-14645" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14646" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14648" href="../Compositional/#plfa_plfa-part3-Compositional-14648" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-14650" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-14652" href="../Compositional/#plfa_plfa-part3-Compositional-14652" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14653" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14655" href="../Compositional/#plfa_plfa-part3-Compositional-14655" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-14658" href="../Compositional/#plfa_plfa-part3-Compositional-14658" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14662" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14664" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-14666" href="../Compositional/#plfa_plfa-part3-Compositional-14479" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14668" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14669" href="../Compositional/#plfa_plfa-part3-Compositional-14645" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14670" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14672" href="../Compositional/#plfa_plfa-part3-Compositional-14648" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-14673" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14675" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14676" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-14682" href="../Compositional/#plfa_plfa-part3-Compositional-14655" class="Bound">fd</a><a id="plfa_plfa-part3-Compositional-14684" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14686" href="../Compositional/#plfa_plfa-part3-Compositional-14658" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14690" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14692" href="../Compositional/#plfa_plfa-part3-Compositional-14479" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14694" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14695" href="../Compositional/#plfa_plfa-part3-Compositional-14645" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14696" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14698" href="../Compositional/#plfa_plfa-part3-Compositional-14652" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14699" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14701" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14702" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="plfa_plfa-part3-Compositional-14708" href="../Compositional/#plfa_plfa-part3-Compositional-14655" class="Bound">fd</a><a id="plfa_plfa-part3-Compositional-14710" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14712" href="../Compositional/#plfa_plfa-part3-Compositional-14658" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14716" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a>
</pre><p><code>ℱ-cong</code> 的证明使用了 <code>ℱ≃</code> 来处理「当且仅当」的两个方向。 该引理直接通过对值 <code>v</code> 进行归纳得证。</p><p>现在我们通过直白的等式推理证明 λ-抽象满足合同性：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lam-cong"></a><a id="plfa_plfa-part3-Compositional-15085" href="../Compositional/#plfa_plfa-part3-Compositional-15085" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-15094" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15096" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-15098" href="../Compositional/#plfa_plfa-part3-Compositional-15098" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15099" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15101" href="../Compositional/#plfa_plfa-part3-Compositional-15101" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-15103" href="../Compositional/#plfa_plfa-part3-Compositional-15103" class="Bound">N′</a> <a id="plfa_plfa-part3-Compositional-15106" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15108" href="../Compositional/#plfa_plfa-part3-Compositional-15098" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-15110" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-15112" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-15114" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-15116" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-15117" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-15121" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15123" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15125" href="../Compositional/#plfa_plfa-part3-Compositional-15101" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-15127" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15129" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15131" href="../Compositional/#plfa_plfa-part3-Compositional-15103" class="Bound">N′</a>
    <a id="plfa_plfa-part3-Compositional-15138" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Compositional-15158" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15160" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15162" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15163" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15165" href="../Compositional/#plfa_plfa-part3-Compositional-15101" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15166" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15168" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15170" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15172" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15173" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15175" href="../Compositional/#plfa_plfa-part3-Compositional-15103" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15177" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-15179" href="../Compositional/#plfa_plfa-part3-Compositional-15085" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-15188" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15189" href="../Compositional/#plfa_plfa-part3-Compositional-15189" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15190" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15192" href="../Compositional/#plfa_plfa-part3-Compositional-15192" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15193" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15195" href="../Compositional/#plfa_plfa-part3-Compositional-15195" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15197" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15199" href="../Compositional/#plfa_plfa-part3-Compositional-15199" class="Bound">N≃N′</a> <a id="plfa_plfa-part3-Compositional-15204" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15208" href="../Denotational/#plfa_plfa-part3-Denotational-23565" class="Function Operator">start</a>
    <a id="plfa_plfa-part3-Compositional-15218" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15220" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15221" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15223" href="../Compositional/#plfa_plfa-part3-Compositional-15192" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15224" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15228" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-15231" href="../Compositional/#plfa_plfa-part3-Compositional-5258" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-15241" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-15247" href="../Compositional/#plfa_plfa-part3-Compositional-2252" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-15249" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15250" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15252" href="../Compositional/#plfa_plfa-part3-Compositional-15192" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15253" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15257" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-15260" href="../Compositional/#plfa_plfa-part3-Compositional-14301" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-15267" href="../Compositional/#plfa_plfa-part3-Compositional-15199" class="Bound">N≃N′</a> <a id="plfa_plfa-part3-Compositional-15272" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-15278" href="../Compositional/#plfa_plfa-part3-Compositional-2252" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-15280" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15281" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15283" href="../Compositional/#plfa_plfa-part3-Compositional-15195" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15285" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15289" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-15292" href="../Denotational/#plfa_plfa-part3-Denotational-22805" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-15298" href="../Compositional/#plfa_plfa-part3-Compositional-5258" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-15308" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-15314" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15316" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15317" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15319" href="../Compositional/#plfa_plfa-part3-Compositional-15195" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15321" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15325" href="../Denotational/#plfa_plfa-part3-Denotational-23903" class="Function Operator">☐</a>
</pre><p>接下来我们证明指称相等对应用也满足合同性：<code>ℰ L ≃ ℰ L′</code> 和 <code>ℰ M ≃ ℰ M′</code> 蕴含 <code>ℰ (L · M) ≃ ℰ (L′ · M′)</code>。等式 <code>app-equiv</code> 将其规约为 <code>●</code> 运算符是否满足合同性的问题。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-●-cong"></a><a id="plfa_plfa-part3-Compositional-15710" href="../Compositional/#plfa_plfa-part3-Compositional-15710" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-15717" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15719" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-15721" href="../Compositional/#plfa_plfa-part3-Compositional-15721" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15722" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15724" href="../Compositional/#plfa_plfa-part3-Compositional-15724" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-15727" href="../Compositional/#plfa_plfa-part3-Compositional-15727" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-15731" href="../Compositional/#plfa_plfa-part3-Compositional-15731" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-15734" href="../Compositional/#plfa_plfa-part3-Compositional-15734" class="Bound">D₂′</a> <a id="plfa_plfa-part3-Compositional-15738" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15740" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-15751" href="../Compositional/#plfa_plfa-part3-Compositional-15721" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15752" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-15756" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15758" href="../Compositional/#plfa_plfa-part3-Compositional-15724" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-15761" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15763" href="../Compositional/#plfa_plfa-part3-Compositional-15727" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-15767" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15769" href="../Compositional/#plfa_plfa-part3-Compositional-15731" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-15772" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15774" href="../Compositional/#plfa_plfa-part3-Compositional-15734" class="Bound">D₂′</a>
  <a id="plfa_plfa-part3-Compositional-15780" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15782" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15783" href="../Compositional/#plfa_plfa-part3-Compositional-15724" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-15786" href="../Compositional/#plfa_plfa-part3-Compositional-6930" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-15788" href="../Compositional/#plfa_plfa-part3-Compositional-15731" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-15790" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15792" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15794" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15795" href="../Compositional/#plfa_plfa-part3-Compositional-15727" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-15799" href="../Compositional/#plfa_plfa-part3-Compositional-6930" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-15801" href="../Compositional/#plfa_plfa-part3-Compositional-15734" class="Bound">D₂′</a><a id="plfa_plfa-part3-Compositional-15804" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-15806" href="../Compositional/#plfa_plfa-part3-Compositional-15710" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-15813" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15814" href="../Compositional/#plfa_plfa-part3-Compositional-15814" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15815" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15817" href="../Compositional/#plfa_plfa-part3-Compositional-15817" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-15820" href="../Compositional/#plfa_plfa-part3-Compositional-15820" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-15823" href="../Compositional/#plfa_plfa-part3-Compositional-15823" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-15825" href="../Compositional/#plfa_plfa-part3-Compositional-15825" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-15827" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15829" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-15831" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15834" href="../Compositional/#plfa_plfa-part3-Compositional-15834" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15836" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15838" href="../Compositional/#plfa_plfa-part3-Compositional-15924" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-15841" href="../Compositional/#plfa_plfa-part3-Compositional-15834" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15843" href="../Compositional/#plfa_plfa-part3-Compositional-15817" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-15846" href="../Compositional/#plfa_plfa-part3-Compositional-15820" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-15848" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15850" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a>
                         <a id="plfa_plfa-part3-Compositional-15877" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15880" href="../Compositional/#plfa_plfa-part3-Compositional-15880" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15882" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15884" href="../Compositional/#plfa_plfa-part3-Compositional-15924" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-15887" href="../Compositional/#plfa_plfa-part3-Compositional-15880" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15889" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15890" href="../Denotational/#plfa_plfa-part3-Denotational-22805" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-15896" href="../Compositional/#plfa_plfa-part3-Compositional-15817" class="Bound">d1</a><a id="plfa_plfa-part3-Compositional-15898" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15900" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15901" href="../Denotational/#plfa_plfa-part3-Denotational-22805" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-15907" href="../Compositional/#plfa_plfa-part3-Compositional-15820" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-15909" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-15912" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Compositional-15916" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-15924" href="../Compositional/#plfa_plfa-part3-Compositional-15924" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-15927" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15929" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-15931" href="../Compositional/#plfa_plfa-part3-Compositional-15931" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-15933" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15935" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-15939" href="../Compositional/#plfa_plfa-part3-Compositional-15814" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15940" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15942" href="../Compositional/#plfa_plfa-part3-Compositional-15942" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-15943" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15945" href="../Compositional/#plfa_plfa-part3-Compositional-15945" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-15948" href="../Compositional/#plfa_plfa-part3-Compositional-15948" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-15952" href="../Compositional/#plfa_plfa-part3-Compositional-15952" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-15955" href="../Compositional/#plfa_plfa-part3-Compositional-15955" class="Bound">D₂′</a> <a id="plfa_plfa-part3-Compositional-15959" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15961" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-15972" href="../Compositional/#plfa_plfa-part3-Compositional-15814" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15973" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Compositional-15979" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15981" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15982" href="../Compositional/#plfa_plfa-part3-Compositional-15945" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-15985" href="../Compositional/#plfa_plfa-part3-Compositional-6930" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-15987" href="../Compositional/#plfa_plfa-part3-Compositional-15952" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-15989" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15991" href="../Compositional/#plfa_plfa-part3-Compositional-15931" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-15993" href="../Compositional/#plfa_plfa-part3-Compositional-15942" class="Bound">v</a>  <a id="plfa_plfa-part3-Compositional-15996" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-15999" href="../Compositional/#plfa_plfa-part3-Compositional-15945" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-16002" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16004" href="../Compositional/#plfa_plfa-part3-Compositional-15948" class="Bound">D₁′</a>  <a id="plfa_plfa-part3-Compositional-16009" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-16012" href="../Compositional/#plfa_plfa-part3-Compositional-15952" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-16015" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16017" href="../Compositional/#plfa_plfa-part3-Compositional-15955" class="Bound">D₂′</a>
    <a id="plfa_plfa-part3-Compositional-16025" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16027" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16028" href="../Compositional/#plfa_plfa-part3-Compositional-15948" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-16032" href="../Compositional/#plfa_plfa-part3-Compositional-6930" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16034" href="../Compositional/#plfa_plfa-part3-Compositional-15955" class="Bound">D₂′</a><a id="plfa_plfa-part3-Compositional-16037" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16039" href="../Compositional/#plfa_plfa-part3-Compositional-15931" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16041" href="../Compositional/#plfa_plfa-part3-Compositional-15942" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-16045" href="../Compositional/#plfa_plfa-part3-Compositional-15924" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-16048" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16049" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-16054" href="../Compositional/#plfa_plfa-part3-Compositional-16054" class="Bound">v⊑⊥</a><a id="plfa_plfa-part3-Compositional-16057" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16059" href="../Compositional/#plfa_plfa-part3-Compositional-16059" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-16063" href="../Compositional/#plfa_plfa-part3-Compositional-16063" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-16067" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16069" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-16074" href="../Compositional/#plfa_plfa-part3-Compositional-16054" class="Bound">v⊑⊥</a>
  <a id="plfa_plfa-part3-Compositional-16080" href="../Compositional/#plfa_plfa-part3-Compositional-15924" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-16083" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16084" href="../Compositional/#plfa_plfa-part3-Compositional-16084" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-16085" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16087" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16088" href="../Compositional/#plfa_plfa-part3-Compositional-16088" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-16089" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16091" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16092" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-16097" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16099" href="../Compositional/#plfa_plfa-part3-Compositional-16099" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16101" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16103" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16105" href="../Compositional/#plfa_plfa-part3-Compositional-16105" class="Bound">Dv↦w</a> <a id="plfa_plfa-part3-Compositional-16110" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16112" href="../Compositional/#plfa_plfa-part3-Compositional-16112" class="Bound">Dv</a> <a id="plfa_plfa-part3-Compositional-16115" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-16117" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-16118" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16120" href="../Compositional/#plfa_plfa-part3-Compositional-16120" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-16124" href="../Compositional/#plfa_plfa-part3-Compositional-16124" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-16128" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Compositional-16134" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-16139" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16141" href="../Compositional/#plfa_plfa-part3-Compositional-16099" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16143" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16145" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16147" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-16153" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16154" href="../Compositional/#plfa_plfa-part3-Compositional-16120" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-16158" href="../Compositional/#plfa_plfa-part3-Compositional-16084" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16160" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16161" href="../Compositional/#plfa_plfa-part3-Compositional-16099" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16163" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-16165" href="../Compositional/#plfa_plfa-part3-Compositional-16088" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-16166" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-16169" href="../Compositional/#plfa_plfa-part3-Compositional-16105" class="Bound">Dv↦w</a> <a id="plfa_plfa-part3-Compositional-16174" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16176" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-16182" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16183" href="../Compositional/#plfa_plfa-part3-Compositional-16124" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-16187" href="../Compositional/#plfa_plfa-part3-Compositional-16084" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16189" href="../Compositional/#plfa_plfa-part3-Compositional-16099" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-16190" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16192" href="../Compositional/#plfa_plfa-part3-Compositional-16112" class="Bound">Dv</a> <a id="plfa_plfa-part3-Compositional-16195" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-16197" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a>
</pre><p>同样，「当且仅当」的两个方向通过一个引理来证明。这里的引理通过对 <code>(D₁ ● D₂) γ v</code> 进行情况分析来证明。</p><p>根据 <code>●</code> 的合同性，我们可以直接通过等式推理证明应用也满足合同性。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-app-cong"></a><a id="plfa_plfa-part3-Compositional-16564" href="../Compositional/#plfa_plfa-part3-Compositional-16564" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-16573" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16575" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-16577" href="../Compositional/#plfa_plfa-part3-Compositional-16577" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16578" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16580" href="../Compositional/#plfa_plfa-part3-Compositional-16580" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16582" href="../Compositional/#plfa_plfa-part3-Compositional-16582" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16585" href="../Compositional/#plfa_plfa-part3-Compositional-16585" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16587" href="../Compositional/#plfa_plfa-part3-Compositional-16587" class="Bound">M′</a> <a id="plfa_plfa-part3-Compositional-16590" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16592" href="../Compositional/#plfa_plfa-part3-Compositional-16577" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-16594" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-16596" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-16597" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-16601" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16603" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16605" href="../Compositional/#plfa_plfa-part3-Compositional-16580" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16607" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16609" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16611" href="../Compositional/#plfa_plfa-part3-Compositional-16582" class="Bound">L′</a>
  <a id="plfa_plfa-part3-Compositional-16616" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16618" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16620" href="../Compositional/#plfa_plfa-part3-Compositional-16585" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16622" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16624" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16626" href="../Compositional/#plfa_plfa-part3-Compositional-16587" class="Bound">M′</a>
    <a id="plfa_plfa-part3-Compositional-16633" class="Comment">-------------------------</a>
  <a id="plfa_plfa-part3-Compositional-16661" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16663" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16665" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16666" href="../Compositional/#plfa_plfa-part3-Compositional-16580" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16668" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16670" href="../Compositional/#plfa_plfa-part3-Compositional-16585" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16671" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16673" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16675" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16677" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16678" href="../Compositional/#plfa_plfa-part3-Compositional-16582" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16681" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16683" href="../Compositional/#plfa_plfa-part3-Compositional-16587" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-16685" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-16687" href="../Compositional/#plfa_plfa-part3-Compositional-16564" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-16696" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16697" href="../Compositional/#plfa_plfa-part3-Compositional-16697" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16698" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16700" href="../Compositional/#plfa_plfa-part3-Compositional-16700" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-16701" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16703" href="../Compositional/#plfa_plfa-part3-Compositional-16703" class="Bound">L′</a><a id="plfa_plfa-part3-Compositional-16705" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16707" href="../Compositional/#plfa_plfa-part3-Compositional-16707" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16708" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16710" href="../Compositional/#plfa_plfa-part3-Compositional-16710" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-16712" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16714" href="../Compositional/#plfa_plfa-part3-Compositional-16714" class="Bound">L≅L′</a> <a id="plfa_plfa-part3-Compositional-16719" href="../Compositional/#plfa_plfa-part3-Compositional-16719" class="Bound">M≅M′</a> <a id="plfa_plfa-part3-Compositional-16724" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-16728" href="../Denotational/#plfa_plfa-part3-Denotational-23565" class="Function Operator">start</a>
    <a id="plfa_plfa-part3-Compositional-16738" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16740" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16741" href="../Compositional/#plfa_plfa-part3-Compositional-16700" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16743" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16745" href="../Compositional/#plfa_plfa-part3-Compositional-16707" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16746" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16750" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16753" href="../Compositional/#plfa_plfa-part3-Compositional-12515" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-16763" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16769" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16771" href="../Compositional/#plfa_plfa-part3-Compositional-16700" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16773" href="../Compositional/#plfa_plfa-part3-Compositional-6930" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16775" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16777" href="../Compositional/#plfa_plfa-part3-Compositional-16707" class="Bound">M</a>
  <a id="plfa_plfa-part3-Compositional-16781" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16784" href="../Compositional/#plfa_plfa-part3-Compositional-15710" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-16791" href="../Compositional/#plfa_plfa-part3-Compositional-16714" class="Bound">L≅L′</a> <a id="plfa_plfa-part3-Compositional-16796" href="../Compositional/#plfa_plfa-part3-Compositional-16719" class="Bound">M≅M′</a> <a id="plfa_plfa-part3-Compositional-16801" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16807" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16809" href="../Compositional/#plfa_plfa-part3-Compositional-16703" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16812" href="../Compositional/#plfa_plfa-part3-Compositional-6930" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16814" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16816" href="../Compositional/#plfa_plfa-part3-Compositional-16710" class="Bound">M′</a>
  <a id="plfa_plfa-part3-Compositional-16821" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16824" href="../Denotational/#plfa_plfa-part3-Denotational-22805" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-16830" href="../Compositional/#plfa_plfa-part3-Compositional-12515" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-16840" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16846" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16848" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16849" href="../Compositional/#plfa_plfa-part3-Compositional-16703" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16852" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16854" href="../Compositional/#plfa_plfa-part3-Compositional-16710" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-16856" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16860" href="../Denotational/#plfa_plfa-part3-Denotational-23903" class="Function Operator">☐</a>
</pre><h2 id="可组合性">可组合性</h2><p><strong>可组合性（Compositionality Property）</strong>说明了在同一语境下， 两个指称相等的项会产生两个指称相等的程序。为准确起见，我们定义了 「语境」和「在语境下」的含义。</p><p><strong>语境（Context）</strong>是一个带洞的程序。以下数据定义 <code>Ctx</code> 将这个概念表现了出来。 我们使用两个变量的语境来索引 <code>Ctx</code> 数据类型：一个表示洞，另一个表示填洞所产生的项。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-17860" class="Keyword">data</a> <a id="plfa_plfa-part3-Compositional-Ctx"></a><a id="plfa_plfa-part3-Compositional-17865" href="../Compositional/#plfa_plfa-part3-Compositional-17865" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-17869" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-17871" href="../Untyped/#plfa_plfa-part2-Untyped-3848" class="Datatype">Context</a> <a id="plfa_plfa-part3-Compositional-17879" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-17881" href="../Untyped/#plfa_plfa-part2-Untyped-3848" class="Datatype">Context</a> <a id="plfa_plfa-part3-Compositional-17889" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-17891" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part3-Compositional-17895" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-hole"></a><a id="plfa_plfa-part3-Compositional-17903" href="../Compositional/#plfa_plfa-part3-Compositional-17903" class="InductiveConstructor">ctx-hole</a> <a id="plfa_plfa-part3-Compositional-17912" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-17914" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-17916" href="../Compositional/#plfa_plfa-part3-Compositional-17916" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-17917" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-17919" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-17921" href="../Compositional/#plfa_plfa-part3-Compositional-17865" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-17925" href="../Compositional/#plfa_plfa-part3-Compositional-17916" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-17927" href="../Compositional/#plfa_plfa-part3-Compositional-17916" class="Bound">Γ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-lam"></a><a id="plfa_plfa-part3-Compositional-17931" href="../Compositional/#plfa_plfa-part3-Compositional-17931" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-17939" class="Symbol">:</a>  <a id="plfa_plfa-part3-Compositional-17942" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-17944" href="../Compositional/#plfa_plfa-part3-Compositional-17944" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-17946" href="../Compositional/#plfa_plfa-part3-Compositional-17946" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-17947" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-17949" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-17951" href="../Compositional/#plfa_plfa-part3-Compositional-17865" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-17955" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-17956" href="../Compositional/#plfa_plfa-part3-Compositional-17944" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-17958" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-17960" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-17961" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-17963" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-17964" href="../Compositional/#plfa_plfa-part3-Compositional-17946" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-17966" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-17968" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-17969" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-17971" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-17973" href="../Compositional/#plfa_plfa-part3-Compositional-17865" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-17977" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-17978" href="../Compositional/#plfa_plfa-part3-Compositional-17944" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-17980" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-17982" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-17983" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-17985" href="../Compositional/#plfa_plfa-part3-Compositional-17946" class="Bound">Δ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-app-L"></a><a id="plfa_plfa-part3-Compositional-17989" href="../Compositional/#plfa_plfa-part3-Compositional-17989" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-17999" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-18001" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-18003" href="../Compositional/#plfa_plfa-part3-Compositional-18003" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18005" href="../Compositional/#plfa_plfa-part3-Compositional-18005" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-18006" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-18008" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18010" href="../Compositional/#plfa_plfa-part3-Compositional-17865" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18014" href="../Compositional/#plfa_plfa-part3-Compositional-18003" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18016" href="../Compositional/#plfa_plfa-part3-Compositional-18005" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18018" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18020" href="../Compositional/#plfa_plfa-part3-Compositional-18005" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18022" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-18024" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-18026" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18028" href="../Compositional/#plfa_plfa-part3-Compositional-17865" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18032" href="../Compositional/#plfa_plfa-part3-Compositional-18003" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18034" href="../Compositional/#plfa_plfa-part3-Compositional-18005" class="Bound">Δ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-app-R"></a><a id="plfa_plfa-part3-Compositional-18038" href="../Compositional/#plfa_plfa-part3-Compositional-18038" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-18048" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-18050" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-18052" href="../Compositional/#plfa_plfa-part3-Compositional-18052" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18054" href="../Compositional/#plfa_plfa-part3-Compositional-18054" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-18055" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-18057" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18059" href="../Compositional/#plfa_plfa-part3-Compositional-18054" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18061" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-18063" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-18065" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18067" href="../Compositional/#plfa_plfa-part3-Compositional-17865" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18071" href="../Compositional/#plfa_plfa-part3-Compositional-18052" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18073" href="../Compositional/#plfa_plfa-part3-Compositional-18054" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18075" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18077" href="../Compositional/#plfa_plfa-part3-Compositional-17865" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18081" href="../Compositional/#plfa_plfa-part3-Compositional-18052" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18083" href="../Compositional/#plfa_plfa-part3-Compositional-18054" class="Bound">Δ</a>
</pre><ul><li>构造子 <code>ctx-hole</code> 表示洞，且在此情况中洞的变量语境 与填洞所产生的项的变量语境相同。</li></ul><ul><li>构造子 <code>ctx-lam</code> 接受一个 <code>Ctx</code> 并在顶部添加 λ-抽象来产生一个更大的 <code>Ctx</code>。 洞的变量语境保持不变，而我们从结果项的语境中删除一个变量，因为它被此 λ-抽象约束。</li></ul><ul><li>应用有两种构造，<code>ctx-app-L</code> 和 <code>ctx-app-R</code>。<code>ctx-app-L</code> 对应洞位于左侧项（运算符）内的情况，后者对应洞位于右侧项（运算数）内。</li></ul><p>将项插入某个语境下的操作由以下 <code>plug</code> 函数定义，它是通过对语境进行递归来定义的：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-plug"></a><a id="plfa_plfa-part3-Compositional-19278" href="../Compositional/#plfa_plfa-part3-Compositional-19278" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19283" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19285" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-19287" href="../Compositional/#plfa_plfa-part3-Compositional-19287" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-19288" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-19290" href="../Compositional/#plfa_plfa-part3-Compositional-19290" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-19291" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-19293" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19295" href="../Compositional/#plfa_plfa-part3-Compositional-17865" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-19299" href="../Compositional/#plfa_plfa-part3-Compositional-19287" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19301" href="../Compositional/#plfa_plfa-part3-Compositional-19290" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-19303" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19305" href="../Compositional/#plfa_plfa-part3-Compositional-19287" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19307" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-19309" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-19311" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19313" href="../Compositional/#plfa_plfa-part3-Compositional-19290" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-19315" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-19317" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a>
<a id="plfa_plfa-part3-Compositional-19319" href="../Compositional/#plfa_plfa-part3-Compositional-19278" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19324" href="../Compositional/#plfa_plfa-part3-Compositional-17903" class="InductiveConstructor">ctx-hole</a> <a id="plfa_plfa-part3-Compositional-19333" href="../Compositional/#plfa_plfa-part3-Compositional-19333" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19335" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19337" href="../Compositional/#plfa_plfa-part3-Compositional-19333" class="Bound">M</a>
<a id="plfa_plfa-part3-Compositional-19339" href="../Compositional/#plfa_plfa-part3-Compositional-19278" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19344" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19345" href="../Compositional/#plfa_plfa-part3-Compositional-17931" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-19353" href="../Compositional/#plfa_plfa-part3-Compositional-19353" class="Bound">C</a><a id="plfa_plfa-part3-Compositional-19354" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19356" href="../Compositional/#plfa_plfa-part3-Compositional-19356" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-19358" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19360" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-19362" href="../Compositional/#plfa_plfa-part3-Compositional-19278" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19367" href="../Compositional/#plfa_plfa-part3-Compositional-19353" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19369" href="../Compositional/#plfa_plfa-part3-Compositional-19356" class="Bound">N</a>
<a id="plfa_plfa-part3-Compositional-19371" href="../Compositional/#plfa_plfa-part3-Compositional-19278" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19376" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19377" href="../Compositional/#plfa_plfa-part3-Compositional-17989" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-19387" href="../Compositional/#plfa_plfa-part3-Compositional-19387" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19389" href="../Compositional/#plfa_plfa-part3-Compositional-19389" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-19390" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19392" href="../Compositional/#plfa_plfa-part3-Compositional-19392" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-19394" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19396" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19397" href="../Compositional/#plfa_plfa-part3-Compositional-19278" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19402" href="../Compositional/#plfa_plfa-part3-Compositional-19387" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19404" href="../Compositional/#plfa_plfa-part3-Compositional-19392" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-19405" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19407" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-19409" href="../Compositional/#plfa_plfa-part3-Compositional-19389" class="Bound">N</a>
<a id="plfa_plfa-part3-Compositional-19411" href="../Compositional/#plfa_plfa-part3-Compositional-19278" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19416" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19417" href="../Compositional/#plfa_plfa-part3-Compositional-18038" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-19427" href="../Compositional/#plfa_plfa-part3-Compositional-19427" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-19429" href="../Compositional/#plfa_plfa-part3-Compositional-19429" class="Bound">C</a><a id="plfa_plfa-part3-Compositional-19430" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19432" href="../Compositional/#plfa_plfa-part3-Compositional-19432" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19434" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19436" href="../Compositional/#plfa_plfa-part3-Compositional-19427" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-19438" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-19440" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19441" href="../Compositional/#plfa_plfa-part3-Compositional-19278" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19446" href="../Compositional/#plfa_plfa-part3-Compositional-19429" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19448" href="../Compositional/#plfa_plfa-part3-Compositional-19432" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-19449" class="Symbol">)</a>
</pre><p>我们接下来陈述并证明组合性原则。给定两个项 <code>M</code> 和 <code>N</code>，它们的指称相等， 将它们插入到任意语境 <code>C</code> 中会产生两个指称相等的程序：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-compositionality"></a><a id="plfa_plfa-part3-Compositional-19772" href="../Compositional/#plfa_plfa-part3-Compositional-19772" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-19789" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19791" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-19793" href="../Compositional/#plfa_plfa-part3-Compositional-19793" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19795" href="../Compositional/#plfa_plfa-part3-Compositional-19795" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-19796" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-19798" href="../Compositional/#plfa_plfa-part3-Compositional-19798" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19800" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19802" href="../Compositional/#plfa_plfa-part3-Compositional-17865" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-19806" href="../Compositional/#plfa_plfa-part3-Compositional-19793" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19808" href="../Compositional/#plfa_plfa-part3-Compositional-19795" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-19809" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-19811" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-19812" href="../Compositional/#plfa_plfa-part3-Compositional-19812" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19814" href="../Compositional/#plfa_plfa-part3-Compositional-19814" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-19816" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19818" href="../Compositional/#plfa_plfa-part3-Compositional-19793" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19820" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-19822" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-19823" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-19827" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19829" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19831" href="../Compositional/#plfa_plfa-part3-Compositional-19812" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19833" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-19835" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19837" href="../Compositional/#plfa_plfa-part3-Compositional-19814" class="Bound">N</a>
    <a id="plfa_plfa-part3-Compositional-19843" class="Comment">---------------------------</a>
  <a id="plfa_plfa-part3-Compositional-19873" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19875" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19877" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19878" href="../Compositional/#plfa_plfa-part3-Compositional-19278" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19883" href="../Compositional/#plfa_plfa-part3-Compositional-19798" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19885" href="../Compositional/#plfa_plfa-part3-Compositional-19812" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-19886" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19888" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-19890" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19892" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19893" href="../Compositional/#plfa_plfa-part3-Compositional-19278" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19898" href="../Compositional/#plfa_plfa-part3-Compositional-19798" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19900" href="../Compositional/#plfa_plfa-part3-Compositional-19814" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-19901" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-19903" href="../Compositional/#plfa_plfa-part3-Compositional-19772" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-19920" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-19921" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-19923" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19925" href="../Compositional/#plfa_plfa-part3-Compositional-17903" class="InductiveConstructor">ctx-hole</a><a id="plfa_plfa-part3-Compositional-19933" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-19935" href="../Compositional/#plfa_plfa-part3-Compositional-19935" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-19939" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-19943" href="../Compositional/#plfa_plfa-part3-Compositional-19935" class="Bound">M≃N</a>
<a id="plfa_plfa-part3-Compositional-19947" href="../Compositional/#plfa_plfa-part3-Compositional-19772" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-19964" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-19965" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-19967" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19969" href="../Compositional/#plfa_plfa-part3-Compositional-17931" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-19977" href="../Compositional/#plfa_plfa-part3-Compositional-19977" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-19979" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-19981" href="../Compositional/#plfa_plfa-part3-Compositional-19981" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-19985" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-19989" href="../Compositional/#plfa_plfa-part3-Compositional-15085" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-19998" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19999" href="../Compositional/#plfa_plfa-part3-Compositional-19772" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20016" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20017" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20019" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20021" href="../Compositional/#plfa_plfa-part3-Compositional-19977" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20023" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20025" href="../Compositional/#plfa_plfa-part3-Compositional-19981" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-20028" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-20030" href="../Compositional/#plfa_plfa-part3-Compositional-19772" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20047" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20048" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20050" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20052" href="../Compositional/#plfa_plfa-part3-Compositional-17989" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-20062" href="../Compositional/#plfa_plfa-part3-Compositional-20062" class="Bound">C′</a> <a id="plfa_plfa-part3-Compositional-20065" href="../Compositional/#plfa_plfa-part3-Compositional-20065" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-20066" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20068" href="../Compositional/#plfa_plfa-part3-Compositional-20068" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-20072" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-20076" href="../Compositional/#plfa_plfa-part3-Compositional-16564" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-20085" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-20086" href="../Compositional/#plfa_plfa-part3-Compositional-19772" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20103" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20104" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20106" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20108" href="../Compositional/#plfa_plfa-part3-Compositional-20062" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20110" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20112" href="../Compositional/#plfa_plfa-part3-Compositional-20068" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-20115" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20117" class="Symbol">λ</a> <a id="plfa_plfa-part3-Compositional-20119" href="../Compositional/#plfa_plfa-part3-Compositional-20119" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-20121" href="../Compositional/#plfa_plfa-part3-Compositional-20121" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-20123" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20125" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-20127" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20130" href="../Compositional/#plfa_plfa-part3-Compositional-20130" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20132" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20134" href="../Compositional/#plfa_plfa-part3-Compositional-20130" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20135" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20137" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-20139" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20142" href="../Compositional/#plfa_plfa-part3-Compositional-20142" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20144" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20146" href="../Compositional/#plfa_plfa-part3-Compositional-20142" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20147" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20149" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-20151" href="../Compositional/#plfa_plfa-part3-Compositional-19772" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20168" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20169" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20171" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20173" href="../Compositional/#plfa_plfa-part3-Compositional-18038" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-20183" href="../Compositional/#plfa_plfa-part3-Compositional-20183" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-20185" href="../Compositional/#plfa_plfa-part3-Compositional-20185" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20187" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20189" href="../Compositional/#plfa_plfa-part3-Compositional-20189" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-20193" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-20197" href="../Compositional/#plfa_plfa-part3-Compositional-16564" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-20206" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20209" href="../Compositional/#plfa_plfa-part3-Compositional-20209" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-20211" href="../Compositional/#plfa_plfa-part3-Compositional-20211" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-20213" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20215" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-20217" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20220" href="../Compositional/#plfa_plfa-part3-Compositional-20220" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20222" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20224" href="../Compositional/#plfa_plfa-part3-Compositional-20220" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20225" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20227" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-20229" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20232" href="../Compositional/#plfa_plfa-part3-Compositional-20232" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20234" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20236" href="../Compositional/#plfa_plfa-part3-Compositional-20232" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20237" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20239" href="../Compositional/#plfa_plfa-part3-Compositional-821" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-20240" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20242" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-20243" href="../Compositional/#plfa_plfa-part3-Compositional-19772" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20260" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20261" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20263" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20265" href="../Compositional/#plfa_plfa-part3-Compositional-20185" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20267" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20269" href="../Compositional/#plfa_plfa-part3-Compositional-20189" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-20272" class="Symbol">)</a>
</pre><p>它可以通过直接对语境 <code>C</code> 进行归纳，用我们之前建立的合同性质 <code>lam-cong</code> 和 <code>app-cong</code> 来证明。</p><h2 id="指称语义作为函数来定义">指称语义作为函数来定义</h2><p>建立了 <code>var-equiv</code>、<code>lam-equiv</code> 和 <code>app-equiv</code> 三个等式后， 我们就能将指称语义定义为一个在输入项 <code>M</code> 上递归的函数。其实， 我们可以定义以下函数 <code>⟦ M ⟧</code>，利用辅助的柯里化函数 <code>ℱ</code>， 并分别在 λ-抽象和应用的情况下应用 <code>●</code> 函数来将项映射到指称。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-⟦_⟧"></a><a id="plfa_plfa-part3-Compositional-21125" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟦_⟧</a> <a id="plfa_plfa-part3-Compositional-21129" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21131" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-21133" href="../Compositional/#plfa_plfa-part3-Compositional-21133" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21134" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21136" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-21138" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21139" href="../Compositional/#plfa_plfa-part3-Compositional-21139" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21141" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21143" href="../Compositional/#plfa_plfa-part3-Compositional-21133" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-21145" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-21147" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-21148" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-21150" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-21152" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-21163" href="../Compositional/#plfa_plfa-part3-Compositional-21133" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-21165" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21167" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-21169" href="../Compositional/#plfa_plfa-part3-Compositional-21169" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-21171" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21173" href="../Compositional/#plfa_plfa-part3-Compositional-21173" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-21175" href="../Compositional/#plfa_plfa-part3-Compositional-21175" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-21177" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21179" href="../Compositional/#plfa_plfa-part3-Compositional-21175" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-21181" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-21183" href="../Compositional/#plfa_plfa-part3-Compositional-21173" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-21185" href="../Compositional/#plfa_plfa-part3-Compositional-21169" class="Bound">x</a>
<a id="plfa_plfa-part3-Compositional-21187" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21189" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21191" href="../Compositional/#plfa_plfa-part3-Compositional-21191" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21193" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21195" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21197" href="../Compositional/#plfa_plfa-part3-Compositional-2252" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-21199" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21201" href="../Compositional/#plfa_plfa-part3-Compositional-21191" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21203" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟧</a>
<a id="plfa_plfa-part3-Compositional-21205" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21207" href="../Compositional/#plfa_plfa-part3-Compositional-21207" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21209" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21211" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21213" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21215" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21217" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21219" href="../Compositional/#plfa_plfa-part3-Compositional-21207" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21221" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21223" href="../Compositional/#plfa_plfa-part3-Compositional-6930" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-21225" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21227" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21229" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟧</a>
</pre><p><code>ℰ M</code> 和 <code>⟦ M ⟧</code> 指称相等的证明可通过 <code>var-equiv</code>、<code>lam-equiv</code> 和 <code>app-equiv</code> 三个等式以及 <code>ℱ</code> 和 <code>●</code> 的合同性引理直接归纳得出。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰ≃⟦⟧"></a><a id="plfa_plfa-part3-Compositional-21560" href="../Compositional/#plfa_plfa-part3-Compositional-21560" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21565" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21567" class="Symbol">∀</a> <a id="plfa_plfa-part3-Compositional-21569" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21570" href="../Compositional/#plfa_plfa-part3-Compositional-21570" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21571" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21573" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21574" href="../Compositional/#plfa_plfa-part3-Compositional-21574" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21576" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21578" href="../Compositional/#plfa_plfa-part3-Compositional-21570" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-21580" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-21582" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-21583" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21585" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-21587" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21589" href="../Compositional/#plfa_plfa-part3-Compositional-21574" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21591" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-21593" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21595" href="../Compositional/#plfa_plfa-part3-Compositional-21574" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21597" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟧</a>
<a id="plfa_plfa-part3-Compositional-21599" href="../Compositional/#plfa_plfa-part3-Compositional-21560" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21604" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21605" href="../Compositional/#plfa_plfa-part3-Compositional-21605" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21606" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21608" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21609" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-21611" href="../Compositional/#plfa_plfa-part3-Compositional-21611" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-21612" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21614" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21616" href="../Compositional/#plfa_plfa-part3-Compositional-13193" class="Function">var-equiv</a>
<a id="plfa_plfa-part3-Compositional-21626" href="../Compositional/#plfa_plfa-part3-Compositional-21560" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21631" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21632" href="../Compositional/#plfa_plfa-part3-Compositional-21632" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21633" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21635" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21636" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21638" href="../Compositional/#plfa_plfa-part3-Compositional-21638" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21639" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21641" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-21645" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-21649" href="../Compositional/#plfa_plfa-part3-Compositional-21649" class="Bound">ih</a> <a id="plfa_plfa-part3-Compositional-21652" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21654" href="../Compositional/#plfa_plfa-part3-Compositional-21560" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21659" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21660" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21662" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21664" href="../Compositional/#plfa_plfa-part3-Compositional-21638" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21665" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21667" class="Keyword">in</a>
    <a id="plfa_plfa-part3-Compositional-21674" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21676" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21677" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21679" href="../Compositional/#plfa_plfa-part3-Compositional-21638" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21680" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-21684" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21687" href="../Compositional/#plfa_plfa-part3-Compositional-5258" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-21697" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-21703" href="../Compositional/#plfa_plfa-part3-Compositional-2252" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-21705" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21706" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21708" href="../Compositional/#plfa_plfa-part3-Compositional-21638" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21709" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-21713" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21716" href="../Compositional/#plfa_plfa-part3-Compositional-14301" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-21723" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21724" href="../Compositional/#plfa_plfa-part3-Compositional-21560" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21729" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21730" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21732" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21734" href="../Compositional/#plfa_plfa-part3-Compositional-21638" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21735" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-21738" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-21744" href="../Compositional/#plfa_plfa-part3-Compositional-2252" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-21746" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21748" href="../Compositional/#plfa_plfa-part3-Compositional-21638" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21750" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-21754" href="../Denotational/#plfa_plfa-part3-Denotational-23796" class="Function Operator">≃⟨⟩</a>
    <a id="plfa_plfa-part3-Compositional-21762" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21764" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21766" href="../Compositional/#plfa_plfa-part3-Compositional-21638" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21768" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-21772" href="../Denotational/#plfa_plfa-part3-Denotational-23903" class="Function Operator">☐</a>
<a id="plfa_plfa-part3-Compositional-21774" href="../Compositional/#plfa_plfa-part3-Compositional-21560" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21779" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21780" href="../Compositional/#plfa_plfa-part3-Compositional-21780" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21781" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21783" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21784" href="../Compositional/#plfa_plfa-part3-Compositional-21784" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21786" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21788" href="../Compositional/#plfa_plfa-part3-Compositional-21788" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-21789" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21791" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Compositional-21796" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21798" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21799" href="../Compositional/#plfa_plfa-part3-Compositional-21784" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21801" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21803" href="../Compositional/#plfa_plfa-part3-Compositional-21788" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-21804" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-21808" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21811" href="../Compositional/#plfa_plfa-part3-Compositional-12515" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-21821" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
   <a id="plfa_plfa-part3-Compositional-21826" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21828" href="../Compositional/#plfa_plfa-part3-Compositional-21784" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21830" href="../Compositional/#plfa_plfa-part3-Compositional-6930" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-21832" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21834" href="../Compositional/#plfa_plfa-part3-Compositional-21788" class="Bound">M</a>
  <a id="plfa_plfa-part3-Compositional-21838" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21841" href="../Compositional/#plfa_plfa-part3-Compositional-15710" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-21848" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21849" href="../Compositional/#plfa_plfa-part3-Compositional-21560" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21854" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21855" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21857" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21859" href="../Compositional/#plfa_plfa-part3-Compositional-21784" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-21860" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-21863" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21864" href="../Compositional/#plfa_plfa-part3-Compositional-21560" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21869" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21870" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21872" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21874" href="../Compositional/#plfa_plfa-part3-Compositional-21788" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-21875" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-21878" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
   <a id="plfa_plfa-part3-Compositional-21883" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21885" href="../Compositional/#plfa_plfa-part3-Compositional-21784" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21887" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21889" href="../Compositional/#plfa_plfa-part3-Compositional-6930" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-21891" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21893" href="../Compositional/#plfa_plfa-part3-Compositional-21788" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21895" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-21899" href="../Denotational/#plfa_plfa-part3-Denotational-23796" class="Function Operator">≃⟨⟩</a>
    <a id="plfa_plfa-part3-Compositional-21907" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21909" href="../Compositional/#plfa_plfa-part3-Compositional-21784" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21911" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21913" href="../Compositional/#plfa_plfa-part3-Compositional-21788" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21915" href="../Compositional/#plfa_plfa-part3-Compositional-21125" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-21919" href="../Denotational/#plfa_plfa-part3-Denotational-23903" class="Function Operator">☐</a>
</pre><h2 id="unicode">Unicode</h2><p>本章使用了以下 Unicode：</p><pre><code>ℱ  U+2131  SCRIPT CAPITAL F (\McF)
●  U+2131  BLACK CIRCLE (\cib)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Denotational/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Compositional.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Soundness/">下一章</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">编程语言基础：Agda 描述</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>