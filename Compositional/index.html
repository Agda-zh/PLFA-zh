<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>编程语言基础：Agda 描述 – Compositional</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">编程语言基础：Agda 描述</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">主页</a> <a class="page-link" href="../Announcements/">公告</a> <a class="page-link" href="../GettingStarted/">使用说明</a> <a class="page-link" href="../Citing/">引用</a> <a class="page-link" href="https://plfa.github.io/">English</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Denotational/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Compositional.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Soundness/">下一章</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Compositional: 指称语义的可组合性</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part3-Compositional-116" class="Keyword">module</a> <a id="plfa_plfa-part3-Compositional-123" href="../Compositional/#" class="Module">plfa.part3.Compositional</a> <a id="plfa_plfa-part3-Compositional-148" class="Keyword">where</a>
</pre><h2 id="简介">简介</h2><p>本章我们会证明指称语义满足可组合性，即我们会填补以下方程中省略号的部分。</p><pre><code>ℰ (` x) ≃ ...
ℰ (ƛ M) ≃ ... ℰ M ...
ℰ (M · N) ≃ ... ℰ M ... ℰ N ...</code></pre><p>这些方程蕴含了指称语义也可以定义为一个递归函数。 我们会在本章的结尾给出它的定义，并证明它等价于 ℰ。</p><h2 id="导入">导入</h2><pre class="Agda"><a id="plfa_plfa-part3-Compositional-758" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-763" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-770" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html" class="Module">Data.Product.Base</a> <a id="plfa_plfa-part3-Compositional-788" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-794" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-795" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="plfa_plfa-part3-Compositional-798" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-800" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="plfa_plfa-part3-Compositional-801" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-803" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">Σ-syntax</a><a id="plfa_plfa-part3-Compositional-811" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-813" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#852" class="Function">∃</a><a id="plfa_plfa-part3-Compositional-814" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-816" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1371" class="Function">∃-syntax</a><a id="plfa_plfa-part3-Compositional-824" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-826" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#636" class="Field">proj₁</a><a id="plfa_plfa-part3-Compositional-831" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-833" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#650" class="Field">proj₂</a><a id="plfa_plfa-part3-Compositional-838" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-842" class="Keyword">renaming</a> <a id="plfa_plfa-part3-Compositional-851" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-852" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part3-Compositional-856" class="Symbol">to</a> <a id="plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part3-Compositional-864" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-866" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-871" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-878" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html" class="Module">Data.Sum.Base</a> <a id="plfa_plfa-part3-Compositional-892" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-898" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-899" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#625" class="Datatype Operator">_⊎_</a><a id="plfa_plfa-part3-Compositional-902" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-904" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a><a id="plfa_plfa-part3-Compositional-908" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-910" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a><a id="plfa_plfa-part3-Compositional-914" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-916" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-921" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-928" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Unit.Base.html" class="Module">Data.Unit.Base</a> <a id="plfa_plfa-part3-Compositional-943" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-949" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-950" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="plfa_plfa-part3-Compositional-951" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-953" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a><a id="plfa_plfa-part3-Compositional-955" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-957" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-962" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-969" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
  <a id="plfa_plfa-part3-Compositional-990" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-996" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-997" href="../Untyped/#plfa_plfa-part2-Untyped-3798" class="Datatype">Context</a><a id="plfa_plfa-part3-Compositional-1004" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1006" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part3-Compositional-1009" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1011" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-1012" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1014" href="../Untyped/#plfa_plfa-part2-Untyped-4323" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part3-Compositional-1017" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1019" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part3-Compositional-1022" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1024" href="../Untyped/#plfa_plfa-part2-Untyped-5402" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part3-Compositional-1026" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1028" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part3-Compositional-1030" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1032" href="../Untyped/#plfa_plfa-part2-Untyped-5514" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part3-Compositional-1035" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-1037" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-1042" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-1049" href="../Denotational/#" class="Module">plfa.part3.Denotational</a>
  <a id="plfa_plfa-part3-Compositional-1075" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-1081" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1082" href="../Denotational/#plfa_plfa-part3-Denotational-4890" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-1087" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1089" href="../Denotational/#plfa_plfa-part3-Denotational-4922" class="InductiveConstructor Operator">_↦_</a><a id="plfa_plfa-part3-Compositional-1092" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1094" href="../Denotational/#plfa_plfa-part3-Denotational-8851" class="Function Operator">_`,_</a><a id="plfa_plfa-part3-Compositional-1098" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1100" href="../Denotational/#plfa_plfa-part3-Denotational-4952" class="InductiveConstructor Operator">_⊔_</a><a id="plfa_plfa-part3-Compositional-1103" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1105" href="../Denotational/#plfa_plfa-part3-Denotational-4910" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-1106" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1108" href="../Denotational/#plfa_plfa-part3-Denotational-5357" class="Datatype Operator">_⊑_</a><a id="plfa_plfa-part3-Compositional-1111" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1113" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">_⊢_↓_</a><a id="plfa_plfa-part3-Compositional-1118" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1129" href="../Denotational/#plfa_plfa-part3-Denotational-5392" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-1134" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1136" href="../Denotational/#plfa_plfa-part3-Denotational-5718" class="InductiveConstructor">⊑-fun</a><a id="plfa_plfa-part3-Compositional-1141" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1143" href="../Denotational/#plfa_plfa-part3-Denotational-5417" class="InductiveConstructor">⊑-conj-L</a><a id="plfa_plfa-part3-Compositional-1151" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1153" href="../Denotational/#plfa_plfa-part3-Denotational-5501" class="InductiveConstructor">⊑-conj-R1</a><a id="plfa_plfa-part3-Compositional-1162" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1164" href="../Denotational/#plfa_plfa-part3-Denotational-5574" class="InductiveConstructor">⊑-conj-R2</a><a id="plfa_plfa-part3-Compositional-1173" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1184" href="../Denotational/#plfa_plfa-part3-Denotational-5821" class="InductiveConstructor">⊑-dist</a><a id="plfa_plfa-part3-Compositional-1190" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1192" href="../Denotational/#plfa_plfa-part3-Denotational-6753" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Compositional-1198" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1200" href="../Denotational/#plfa_plfa-part3-Denotational-5647" class="InductiveConstructor">⊑-trans</a><a id="plfa_plfa-part3-Compositional-1207" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1209" href="../Denotational/#plfa_plfa-part3-Denotational-7533" class="Function">⊔↦⊔-dist</a><a id="plfa_plfa-part3-Compositional-1217" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1228" href="../Denotational/#plfa_plfa-part3-Denotational-11441" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Compositional-1231" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1233" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a><a id="plfa_plfa-part3-Compositional-1240" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1242" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Compositional-1248" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1250" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Compositional-1257" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1259" href="../Denotational/#plfa_plfa-part3-Denotational-11750" class="InductiveConstructor">⊥-intro</a><a id="plfa_plfa-part3-Compositional-1266" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1268" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a><a id="plfa_plfa-part3-Compositional-1271" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1282" href="../Denotational/#plfa_plfa-part3-Denotational-32787" class="Function">up-env</a><a id="plfa_plfa-part3-Compositional-1288" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1290" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a><a id="plfa_plfa-part3-Compositional-1291" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1293" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">_≃_</a><a id="plfa_plfa-part3-Compositional-1296" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1298" href="../Denotational/#plfa_plfa-part3-Denotational-22726" class="Function">≃-sym</a><a id="plfa_plfa-part3-Compositional-1303" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1305" href="../Denotational/#plfa_plfa-part3-Denotational-21933" class="Function">Denotation</a><a id="plfa_plfa-part3-Compositional-1315" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1317" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a><a id="plfa_plfa-part3-Compositional-1320" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-1322" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-1327" href="../Denotational/#plfa_plfa-part3-Denotational-23394" class="Module">plfa.part3.Denotational.≃-Reasoning</a>
</pre><h2 id="λ-抽象的方程">λ-抽象的方程</h2><p>考虑第一个方程</p><pre><code>ℰ (ƛ M) ≃ ... ℰ M ...</code></pre><p>我们需要定义一个函数，它将 <code>Denotation (Γ , ★)</code> 映射到 <code>Denotation Γ</code>， 我们将此函数命名为 <code>ℱ</code>。在应用到 λ-项时，它能够模拟语义中非递归的部分。 具体来说，我们需要考虑规则 <code>↦-intro</code>、<code>⊥-intro</code> 和 <code>⊔-intro</code>，因此 <code>ℱ</code> 有三个参数：子项 <code>M</code> 的指称 <code>D</code>、环境 <code>γ</code>，以及值 <code>v</code>。如果我们通过对值 <code>v</code> 进行递归来定义 <code>ℱ</code>，那么它正好匹配 <code>↦-intro</code>、<code>⊥-intro</code> 和 <code>⊔-intro</code> 这三条规则。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱ"></a><a id="plfa_plfa-part3-Compositional-2298" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2300" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-2302" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-2304" href="../Compositional/#plfa_plfa-part3-Compositional-2304" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-2305" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-2307" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2309" href="../Denotational/#plfa_plfa-part3-Denotational-21933" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-2320" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2321" href="../Compositional/#plfa_plfa-part3-Compositional-2304" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-2323" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-2325" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-2326" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2328" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2330" href="../Denotational/#plfa_plfa-part3-Denotational-21933" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-2341" href="../Compositional/#plfa_plfa-part3-Compositional-2304" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-2343" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2345" href="../Compositional/#plfa_plfa-part3-Compositional-2345" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2347" href="../Compositional/#plfa_plfa-part3-Compositional-2347" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2349" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2350" href="../Compositional/#plfa_plfa-part3-Compositional-2350" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-2352" href="../Denotational/#plfa_plfa-part3-Denotational-4922" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-2354" href="../Compositional/#plfa_plfa-part3-Compositional-2354" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-2355" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2357" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2359" href="../Compositional/#plfa_plfa-part3-Compositional-2345" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2361" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2362" href="../Compositional/#plfa_plfa-part3-Compositional-2347" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2364" href="../Denotational/#plfa_plfa-part3-Denotational-8851" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-2367" href="../Compositional/#plfa_plfa-part3-Compositional-2350" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-2368" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2370" href="../Compositional/#plfa_plfa-part3-Compositional-2354" class="Bound">w</a>
<a id="plfa_plfa-part3-Compositional-2372" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2374" href="../Compositional/#plfa_plfa-part3-Compositional-2374" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2376" href="../Compositional/#plfa_plfa-part3-Compositional-2376" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2378" href="../Denotational/#plfa_plfa-part3-Denotational-4910" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Compositional-2380" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2382" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Unit.html#175" class="Record">⊤</a>
<a id="plfa_plfa-part3-Compositional-2384" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2386" href="../Compositional/#plfa_plfa-part3-Compositional-2386" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2388" href="../Compositional/#plfa_plfa-part3-Compositional-2388" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2390" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2391" href="../Compositional/#plfa_plfa-part3-Compositional-2391" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-2393" href="../Denotational/#plfa_plfa-part3-Denotational-4952" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-2395" href="../Compositional/#plfa_plfa-part3-Compositional-2395" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-2396" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2398" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2400" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2401" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2403" href="../Compositional/#plfa_plfa-part3-Compositional-2386" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2405" href="../Compositional/#plfa_plfa-part3-Compositional-2388" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2407" href="../Compositional/#plfa_plfa-part3-Compositional-2391" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-2408" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2410" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="plfa_plfa-part3-Compositional-2412" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2413" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2415" href="../Compositional/#plfa_plfa-part3-Compositional-2386" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2417" href="../Compositional/#plfa_plfa-part3-Compositional-2388" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2419" href="../Compositional/#plfa_plfa-part3-Compositional-2395" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-2420" class="Symbol">)</a>
</pre><p>如果你仔细观察，就会发现 <code>ℱ</code> 函数看起来像函数式程序员熟悉的 <code>curry</code> 化操作：它将一个以长度为 <code>n + 1</code> 的元组（即环境 <code>Γ , ★</code>）作为参数的函数， 转化为一个以长度为 <code>n</code> 的元组作为参数，并返回一个单参函数的函数。</p><p>我们希望通过 <code>ℱ</code> 函数证明</p><pre><code>ℰ (ƛ N) ≃ ℱ (ℰ N)</code></pre><p>当从一个更大的值 <code>v</code> 映射到一个更小的值 <code>u</code> 时，函数 <code>ℱ</code> 会保持成立。 它的证明就是在 <code>⊑-fun</code> 规则的情况中使用 <code>up-env</code> 引理，对 <code>u ⊑ v</code> 推导过程的直接归纳。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-sub-ℱ"></a><a id="plfa_plfa-part3-Compositional-3288" href="../Compositional/#plfa_plfa-part3-Compositional-3288" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3294" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3296" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-3298" href="../Compositional/#plfa_plfa-part3-Compositional-3298" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3299" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3301" href="../Compositional/#plfa_plfa-part3-Compositional-3301" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3303" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3305" href="../Compositional/#plfa_plfa-part3-Compositional-3298" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-3307" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3309" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-3311" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3313" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-3314" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3316" href="../Compositional/#plfa_plfa-part3-Compositional-3316" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3318" href="../Compositional/#plfa_plfa-part3-Compositional-3318" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-3320" href="../Compositional/#plfa_plfa-part3-Compositional-3320" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-3321" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-3325" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3327" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-3329" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3330" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-3332" href="../Compositional/#plfa_plfa-part3-Compositional-3301" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-3333" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3335" href="../Compositional/#plfa_plfa-part3-Compositional-3316" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3337" href="../Compositional/#plfa_plfa-part3-Compositional-3318" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-3341" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3343" href="../Compositional/#plfa_plfa-part3-Compositional-3320" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-3345" href="../Denotational/#plfa_plfa-part3-Denotational-5357" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-3347" href="../Compositional/#plfa_plfa-part3-Compositional-3318" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-3353" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-3368" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3370" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-3372" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3373" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-3375" href="../Compositional/#plfa_plfa-part3-Compositional-3301" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-3376" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3378" href="../Compositional/#plfa_plfa-part3-Compositional-3316" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3380" href="../Compositional/#plfa_plfa-part3-Compositional-3320" class="Bound">u</a>
<a id="plfa_plfa-part3-Compositional-3382" href="../Compositional/#plfa_plfa-part3-Compositional-3288" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3388" href="../Compositional/#plfa_plfa-part3-Compositional-3388" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3390" href="../Denotational/#plfa_plfa-part3-Denotational-5392" class="InductiveConstructor">⊑-bot</a> <a id="plfa_plfa-part3-Compositional-3396" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3398" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a>
<a id="plfa_plfa-part3-Compositional-3401" href="../Compositional/#plfa_plfa-part3-Compositional-3288" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3407" href="../Compositional/#plfa_plfa-part3-Compositional-3407" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3409" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3410" href="../Denotational/#plfa_plfa-part3-Denotational-5718" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-3416" href="../Compositional/#plfa_plfa-part3-Compositional-3416" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-3419" href="../Compositional/#plfa_plfa-part3-Compositional-3419" class="Bound">lt′</a><a id="plfa_plfa-part3-Compositional-3422" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3424" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3426" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-3430" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3431" href="../Denotational/#plfa_plfa-part3-Denotational-32787" class="Function">up-env</a> <a id="plfa_plfa-part3-Compositional-3438" href="../Compositional/#plfa_plfa-part3-Compositional-3407" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3440" href="../Compositional/#plfa_plfa-part3-Compositional-3416" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3442" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3444" href="../Compositional/#plfa_plfa-part3-Compositional-3419" class="Bound">lt′</a>
<a id="plfa_plfa-part3-Compositional-3448" href="../Compositional/#plfa_plfa-part3-Compositional-3288" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3454" href="../Compositional/#plfa_plfa-part3-Compositional-3454" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3456" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3457" href="../Denotational/#plfa_plfa-part3-Denotational-5417" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-3466" href="../Compositional/#plfa_plfa-part3-Compositional-3466" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-3469" href="../Compositional/#plfa_plfa-part3-Compositional-3469" class="Bound">lt₁</a><a id="plfa_plfa-part3-Compositional-3472" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3474" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3476" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-3478" href="../Compositional/#plfa_plfa-part3-Compositional-3288" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3484" href="../Compositional/#plfa_plfa-part3-Compositional-3454" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3486" href="../Compositional/#plfa_plfa-part3-Compositional-3466" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-3489" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3491" href="../Compositional/#plfa_plfa-part3-Compositional-3288" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3497" href="../Compositional/#plfa_plfa-part3-Compositional-3454" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3499" href="../Compositional/#plfa_plfa-part3-Compositional-3469" class="Bound">lt₁</a> <a id="plfa_plfa-part3-Compositional-3503" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-3505" href="../Compositional/#plfa_plfa-part3-Compositional-3288" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3511" href="../Compositional/#plfa_plfa-part3-Compositional-3511" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3513" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3514" href="../Denotational/#plfa_plfa-part3-Denotational-5501" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Compositional-3524" href="../Compositional/#plfa_plfa-part3-Compositional-3524" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3526" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3528" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3530" href="../Compositional/#plfa_plfa-part3-Compositional-3288" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3536" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3537" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#636" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-3543" href="../Compositional/#plfa_plfa-part3-Compositional-3511" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-3544" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3546" href="../Compositional/#plfa_plfa-part3-Compositional-3524" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-3549" href="../Compositional/#plfa_plfa-part3-Compositional-3288" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3555" href="../Compositional/#plfa_plfa-part3-Compositional-3555" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3557" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3558" href="../Denotational/#plfa_plfa-part3-Denotational-5574" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Compositional-3568" href="../Compositional/#plfa_plfa-part3-Compositional-3568" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3570" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3572" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3574" href="../Compositional/#plfa_plfa-part3-Compositional-3288" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3580" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3581" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#650" class="Field">proj₂</a> <a id="plfa_plfa-part3-Compositional-3587" href="../Compositional/#plfa_plfa-part3-Compositional-3555" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-3588" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3590" href="../Compositional/#plfa_plfa-part3-Compositional-3568" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-3593" href="../Compositional/#plfa_plfa-part3-Compositional-3288" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3599" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-3600" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-3602" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3604" href="../Compositional/#plfa_plfa-part3-Compositional-3604" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3607" href="../Denotational/#plfa_plfa-part3-Denotational-4922" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3609" href="../Compositional/#plfa_plfa-part3-Compositional-3609" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-3612" href="../Denotational/#plfa_plfa-part3-Denotational-4952" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-3614" href="../Compositional/#plfa_plfa-part3-Compositional-3604" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3617" href="../Denotational/#plfa_plfa-part3-Denotational-4922" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3619" href="../Compositional/#plfa_plfa-part3-Compositional-3619" class="Bound">v₃</a><a id="plfa_plfa-part3-Compositional-3621" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-3623" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-3624" href="../Compositional/#plfa_plfa-part3-Compositional-3604" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3627" href="../Denotational/#plfa_plfa-part3-Denotational-4922" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3629" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3630" href="../Compositional/#plfa_plfa-part3-Compositional-3609" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-3633" href="../Denotational/#plfa_plfa-part3-Denotational-4952" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-3635" href="../Compositional/#plfa_plfa-part3-Compositional-3619" class="Bound">v₃</a><a id="plfa_plfa-part3-Compositional-3637" class="Symbol">)}</a> <a id="plfa_plfa-part3-Compositional-3640" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-3642" href="../Compositional/#plfa_plfa-part3-Compositional-3642" class="Bound">N2</a> <a id="plfa_plfa-part3-Compositional-3645" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3647" href="../Compositional/#plfa_plfa-part3-Compositional-3647" class="Bound">N3</a> <a id="plfa_plfa-part3-Compositional-3650" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-3652" href="../Denotational/#plfa_plfa-part3-Denotational-5821" class="InductiveConstructor">⊑-dist</a> <a id="plfa_plfa-part3-Compositional-3659" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Compositional-3664" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-3672" href="../Compositional/#plfa_plfa-part3-Compositional-3642" class="Bound">N2</a> <a id="plfa_plfa-part3-Compositional-3675" href="../Compositional/#plfa_plfa-part3-Compositional-3647" class="Bound">N3</a>
<a id="plfa_plfa-part3-Compositional-3678" href="../Compositional/#plfa_plfa-part3-Compositional-3288" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3684" href="../Compositional/#plfa_plfa-part3-Compositional-3684" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3686" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3687" href="../Denotational/#plfa_plfa-part3-Denotational-5647" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-3695" href="../Compositional/#plfa_plfa-part3-Compositional-3695" class="Bound">x₁</a> <a id="plfa_plfa-part3-Compositional-3698" href="../Compositional/#plfa_plfa-part3-Compositional-3698" class="Bound">x₂</a><a id="plfa_plfa-part3-Compositional-3700" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3702" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3704" href="../Compositional/#plfa_plfa-part3-Compositional-3288" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3710" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3711" href="../Compositional/#plfa_plfa-part3-Compositional-3288" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3717" href="../Compositional/#plfa_plfa-part3-Compositional-3684" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3719" href="../Compositional/#plfa_plfa-part3-Compositional-3698" class="Bound">x₂</a><a id="plfa_plfa-part3-Compositional-3721" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3723" href="../Compositional/#plfa_plfa-part3-Compositional-3695" class="Bound">x₁</a>
</pre><p>有了这个小前提的性质，我们就可以证明 λ-方程语义向右的方向。 证明是通过在 <code>sub</code> 规则的情况下使用 <code>sub-ℱ</code>，对语义进行归纳得出的。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰƛ→ℱℰ"></a><a id="plfa_plfa-part3-Compositional-4027" href="../Compositional/#plfa_plfa-part3-Compositional-4027" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4033" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4035" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4037" href="../Compositional/#plfa_plfa-part3-Compositional-4037" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4038" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4040" href="../Compositional/#plfa_plfa-part3-Compositional-4040" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4042" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4044" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-4048" href="../Compositional/#plfa_plfa-part3-Compositional-4037" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4049" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4051" href="../Compositional/#plfa_plfa-part3-Compositional-4051" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4053" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4055" href="../Compositional/#plfa_plfa-part3-Compositional-4037" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4057" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4059" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4061" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4063" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4064" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4066" href="../Compositional/#plfa_plfa-part3-Compositional-4066" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-4068" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4070" href="../Denotational/#plfa_plfa-part3-Denotational-4890" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4075" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4079" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4081" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4083" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4084" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4086" href="../Compositional/#plfa_plfa-part3-Compositional-4051" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4087" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4089" href="../Compositional/#plfa_plfa-part3-Compositional-4040" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4091" href="../Compositional/#plfa_plfa-part3-Compositional-4066" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-4097" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-4112" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4114" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-4116" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4117" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4119" href="../Compositional/#plfa_plfa-part3-Compositional-4051" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4120" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4122" href="../Compositional/#plfa_plfa-part3-Compositional-4040" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4124" href="../Compositional/#plfa_plfa-part3-Compositional-4066" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-4126" href="../Compositional/#plfa_plfa-part3-Compositional-4027" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4132" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4133" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Compositional-4141" href="../Compositional/#plfa_plfa-part3-Compositional-4141" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-4142" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4144" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4146" href="../Compositional/#plfa_plfa-part3-Compositional-4141" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-4148" href="../Compositional/#plfa_plfa-part3-Compositional-4027" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4154" href="../Denotational/#plfa_plfa-part3-Denotational-11750" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-4162" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4164" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a>
<a id="plfa_plfa-part3-Compositional-4167" href="../Compositional/#plfa_plfa-part3-Compositional-4027" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4173" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4174" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-4182" href="../Compositional/#plfa_plfa-part3-Compositional-4182" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-4185" href="../Compositional/#plfa_plfa-part3-Compositional-4185" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-4187" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4189" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4191" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-4193" href="../Compositional/#plfa_plfa-part3-Compositional-4027" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4199" href="../Compositional/#plfa_plfa-part3-Compositional-4182" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-4202" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4204" href="../Compositional/#plfa_plfa-part3-Compositional-4027" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4210" href="../Compositional/#plfa_plfa-part3-Compositional-4185" class="Bound">d₂</a> <a id="plfa_plfa-part3-Compositional-4213" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-4215" href="../Compositional/#plfa_plfa-part3-Compositional-4027" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4221" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4222" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-4226" href="../Compositional/#plfa_plfa-part3-Compositional-4226" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4228" href="../Compositional/#plfa_plfa-part3-Compositional-4228" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-4230" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4232" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4234" href="../Compositional/#plfa_plfa-part3-Compositional-3288" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-4240" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4241" href="../Compositional/#plfa_plfa-part3-Compositional-4027" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4247" href="../Compositional/#plfa_plfa-part3-Compositional-4226" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-4248" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4250" href="../Compositional/#plfa_plfa-part3-Compositional-4228" class="Bound">lt</a>
</pre><p>λ-抽象的「反演引理」是上面定理的一种特例。反演引理在证明「归约会保持指称不变」时会很有用。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lambda-inversion"></a><a id="plfa_plfa-part3-Compositional-4487" href="../Compositional/#plfa_plfa-part3-Compositional-4487" class="Function">lambda-inversion</a> <a id="plfa_plfa-part3-Compositional-4504" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4506" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4508" href="../Compositional/#plfa_plfa-part3-Compositional-4508" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4509" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4511" href="../Compositional/#plfa_plfa-part3-Compositional-4511" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4513" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4515" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-4519" href="../Compositional/#plfa_plfa-part3-Compositional-4508" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4520" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4522" href="../Compositional/#plfa_plfa-part3-Compositional-4522" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4524" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4526" href="../Compositional/#plfa_plfa-part3-Compositional-4508" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4528" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4530" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4532" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4534" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4535" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4537" href="../Compositional/#plfa_plfa-part3-Compositional-4537" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4540" href="../Compositional/#plfa_plfa-part3-Compositional-4540" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-4543" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4545" href="../Denotational/#plfa_plfa-part3-Denotational-4890" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4550" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4554" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4556" href="../Compositional/#plfa_plfa-part3-Compositional-4511" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4558" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4560" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4562" href="../Compositional/#plfa_plfa-part3-Compositional-4522" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4564" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Compositional-4566" href="../Compositional/#plfa_plfa-part3-Compositional-4537" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4569" href="../Denotational/#plfa_plfa-part3-Denotational-4922" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-4571" href="../Compositional/#plfa_plfa-part3-Compositional-4540" class="Bound">v₂</a>
    <a id="plfa_plfa-part3-Compositional-4578" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Compositional-4598" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4600" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4601" href="../Compositional/#plfa_plfa-part3-Compositional-4511" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4603" href="../Denotational/#plfa_plfa-part3-Denotational-8851" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-4606" href="../Compositional/#plfa_plfa-part3-Compositional-4537" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-4608" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4610" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4612" href="../Compositional/#plfa_plfa-part3-Compositional-4522" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4614" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Compositional-4616" href="../Compositional/#plfa_plfa-part3-Compositional-4540" class="Bound">v₂</a>
<a id="plfa_plfa-part3-Compositional-4619" href="../Compositional/#plfa_plfa-part3-Compositional-4487" class="Function">lambda-inversion</a><a id="plfa_plfa-part3-Compositional-4635" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4636" class="Argument">v₁</a> <a id="plfa_plfa-part3-Compositional-4639" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4641" href="../Compositional/#plfa_plfa-part3-Compositional-4641" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-4643" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4645" class="Argument">v₂</a> <a id="plfa_plfa-part3-Compositional-4648" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4650" href="../Compositional/#plfa_plfa-part3-Compositional-4650" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4652" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4654" href="../Compositional/#plfa_plfa-part3-Compositional-4654" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4656" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4658" href="../Compositional/#plfa_plfa-part3-Compositional-4027" class="Function">ℰƛ→ℱℰ</a><a id="plfa_plfa-part3-Compositional-4663" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4664" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4666" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4668" href="../Compositional/#plfa_plfa-part3-Compositional-4641" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4671" href="../Denotational/#plfa_plfa-part3-Denotational-4922" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-4673" href="../Compositional/#plfa_plfa-part3-Compositional-4650" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4675" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4677" href="../Compositional/#plfa_plfa-part3-Compositional-4654" class="Bound">d</a>
</pre><p>λ-抽象的语义方程向左的方向甚至比向右的方向更容易证明，我们只需对值 <code>v</code> 进行归纳：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱℰ→ℰƛ"></a><a id="plfa_plfa-part3-Compositional-4899" href="../Compositional/#plfa_plfa-part3-Compositional-4899" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4905" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4907" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4909" href="../Compositional/#plfa_plfa-part3-Compositional-4909" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4910" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4912" href="../Compositional/#plfa_plfa-part3-Compositional-4912" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4914" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4916" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-4920" href="../Compositional/#plfa_plfa-part3-Compositional-4909" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4921" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4923" href="../Compositional/#plfa_plfa-part3-Compositional-4923" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4925" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4927" href="../Compositional/#plfa_plfa-part3-Compositional-4909" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4929" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4931" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4933" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4935" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4936" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4938" href="../Compositional/#plfa_plfa-part3-Compositional-4938" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-4940" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4942" href="../Denotational/#plfa_plfa-part3-Denotational-4890" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4947" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4951" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4953" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-4955" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4956" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4958" href="../Compositional/#plfa_plfa-part3-Compositional-4923" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4959" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4961" href="../Compositional/#plfa_plfa-part3-Compositional-4912" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4963" href="../Compositional/#plfa_plfa-part3-Compositional-4938" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-4969" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-4984" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4986" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4988" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4989" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4991" href="../Compositional/#plfa_plfa-part3-Compositional-4923" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4992" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4994" href="../Compositional/#plfa_plfa-part3-Compositional-4912" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4996" href="../Compositional/#plfa_plfa-part3-Compositional-4938" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-4998" href="../Compositional/#plfa_plfa-part3-Compositional-4899" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5004" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-5005" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-5007" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5009" href="../Denotational/#plfa_plfa-part3-Denotational-4910" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-5010" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-5012" href="../Compositional/#plfa_plfa-part3-Compositional-5012" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-5014" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5016" href="../Denotational/#plfa_plfa-part3-Denotational-11750" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Compositional-5024" href="../Compositional/#plfa_plfa-part3-Compositional-4899" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5030" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-5031" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-5033" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5035" href="../Compositional/#plfa_plfa-part3-Compositional-5035" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-5038" href="../Denotational/#plfa_plfa-part3-Denotational-4922" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-5040" href="../Compositional/#plfa_plfa-part3-Compositional-5040" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-5042" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-5044" href="../Compositional/#plfa_plfa-part3-Compositional-5044" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-5046" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5048" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Compositional-5056" href="../Compositional/#plfa_plfa-part3-Compositional-5044" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-5058" href="../Compositional/#plfa_plfa-part3-Compositional-4899" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5064" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-5065" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-5067" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5069" href="../Compositional/#plfa_plfa-part3-Compositional-5069" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-5072" href="../Denotational/#plfa_plfa-part3-Denotational-4952" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-5074" href="../Compositional/#plfa_plfa-part3-Compositional-5074" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-5076" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-5078" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-5080" href="../Compositional/#plfa_plfa-part3-Compositional-5080" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-5083" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-5085" href="../Compositional/#plfa_plfa-part3-Compositional-5085" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-5088" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-5090" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5092" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-5100" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5101" href="../Compositional/#plfa_plfa-part3-Compositional-4899" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5107" href="../Compositional/#plfa_plfa-part3-Compositional-5080" class="Bound">d1</a><a id="plfa_plfa-part3-Compositional-5109" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-5111" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5112" href="../Compositional/#plfa_plfa-part3-Compositional-4899" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5118" href="../Compositional/#plfa_plfa-part3-Compositional-5085" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-5120" class="Symbol">)</a>
</pre><p>因此，指称语义对 λ-抽象来说是可组合的，正如函数 <code>ℱ</code> 所证明的那样：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lam-equiv"></a><a id="plfa_plfa-part3-Compositional-5309" href="../Compositional/#plfa_plfa-part3-Compositional-5309" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-5319" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-5321" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-5323" href="../Compositional/#plfa_plfa-part3-Compositional-5323" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-5324" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-5326" href="../Compositional/#plfa_plfa-part3-Compositional-5326" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-5328" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-5330" href="../Compositional/#plfa_plfa-part3-Compositional-5323" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-5332" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-5334" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-5336" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-5338" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-5339" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-5343" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-5345" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-5347" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5348" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-5350" href="../Compositional/#plfa_plfa-part3-Compositional-5326" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-5351" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-5353" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-5355" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-5357" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5358" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-5360" href="../Compositional/#plfa_plfa-part3-Compositional-5326" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-5361" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-5363" href="../Compositional/#plfa_plfa-part3-Compositional-5309" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-5373" href="../Compositional/#plfa_plfa-part3-Compositional-5373" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-5375" href="../Compositional/#plfa_plfa-part3-Compositional-5375" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-5377" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5379" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-5381" href="../Compositional/#plfa_plfa-part3-Compositional-4027" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-5387" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-5389" href="../Compositional/#plfa_plfa-part3-Compositional-4899" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5395" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="函数应用的方程">函数应用的方程</h2><p>接下来我们填补关于函数应用的方程中的省略号。</p><pre><code>ℰ (M · N) ≃ ... ℰ M ... ℰ N ...</code></pre><p>为此我们需要定义一个函数，它接受语境 <code>Γ</code> 中的两个指称，并产生语境 <code>Γ</code> 中的另一个指称。我们将此函数命名为 <code>●</code>，以模拟应用语义 <code>L · M</code> 中非递归的部分。我们无法像处理 <code>ℱ</code> 那样简单地对值 <code>v</code> 进行递归来定义函数， 因为 <code>↦-elim</code> 这类的规则可应用于任何值。相反，我们将通过直接处理 <code>↦-elim</code> 和 <code>⊥-intro</code> 规则而忽略 <code>⊔-intro</code> 的方式来定义 <code>●</code>。这使得证明的向右方向变得更加困难， 而 <code>⊔-intro</code> 的情况说明了为什么 <code>⊑-dist</code> 规则很重要。</p><p>这样我们就定义了 <code>D₁</code> 应用于 <code>D₂</code>，记作 <code>D₁ ● D₂</code>，来包含 <code>⊥-intro</code> 规则中所有等价于 <code>⊥</code> 的值 <code>w</code>，以及对于 <code>↦-elim</code> 规则，在 <code>D₁</code> 中的条目 <code>v ↦ w</code> 的所有输出值 <code>w</code>，前提是它的输入值 <code>v</code> 在 <code>D₂</code> 中。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-6970" class="Keyword">infixl</a> <a id="plfa_plfa-part3-Compositional-6977" class="Number">7</a> <a id="plfa_plfa-part3-Compositional-6979" href="../Compositional/#plfa_plfa-part3-Compositional-6984" class="Function Operator">_●_</a>

<a id="plfa_plfa-part3-Compositional-_●_"></a><a id="plfa_plfa-part3-Compositional-6984" href="../Compositional/#plfa_plfa-part3-Compositional-6984" class="Function Operator">_●_</a> <a id="plfa_plfa-part3-Compositional-6988" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6990" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-6992" href="../Compositional/#plfa_plfa-part3-Compositional-6992" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-6993" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6995" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-6997" href="../Denotational/#plfa_plfa-part3-Denotational-21933" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-7008" href="../Compositional/#plfa_plfa-part3-Compositional-6992" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-7010" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-7012" href="../Denotational/#plfa_plfa-part3-Denotational-21933" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-7023" href="../Compositional/#plfa_plfa-part3-Compositional-6992" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-7025" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-7027" href="../Denotational/#plfa_plfa-part3-Denotational-21933" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-7038" href="../Compositional/#plfa_plfa-part3-Compositional-6992" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-7040" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7041" href="../Compositional/#plfa_plfa-part3-Compositional-7041" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-7044" href="../Compositional/#plfa_plfa-part3-Compositional-6984" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-7046" href="../Compositional/#plfa_plfa-part3-Compositional-7046" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-7048" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7050" href="../Compositional/#plfa_plfa-part3-Compositional-7050" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7052" href="../Compositional/#plfa_plfa-part3-Compositional-7052" class="Bound">w</a> <a id="plfa_plfa-part3-Compositional-7054" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7056" href="../Compositional/#plfa_plfa-part3-Compositional-7052" class="Bound">w</a> <a id="plfa_plfa-part3-Compositional-7058" href="../Denotational/#plfa_plfa-part3-Denotational-5357" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-7060" href="../Denotational/#plfa_plfa-part3-Denotational-4910" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Compositional-7062" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="plfa_plfa-part3-Compositional-7064" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">Σ[</a> <a id="plfa_plfa-part3-Compositional-7067" href="../Compositional/#plfa_plfa-part3-Compositional-7067" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7069" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">∈</a> <a id="plfa_plfa-part3-Compositional-7071" href="../Denotational/#plfa_plfa-part3-Denotational-4890" class="Datatype">Value</a> <a id="plfa_plfa-part3-Compositional-7077" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">]</a><a id="plfa_plfa-part3-Compositional-7078" class="Symbol">(</a> <a id="plfa_plfa-part3-Compositional-7080" href="../Compositional/#plfa_plfa-part3-Compositional-7041" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-7083" href="../Compositional/#plfa_plfa-part3-Compositional-7050" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7085" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7086" href="../Compositional/#plfa_plfa-part3-Compositional-7067" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7088" href="../Denotational/#plfa_plfa-part3-Denotational-4922" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-7090" href="../Compositional/#plfa_plfa-part3-Compositional-7052" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-7091" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7093" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="plfa_plfa-part3-Compositional-7095" href="../Compositional/#plfa_plfa-part3-Compositional-7046" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-7098" href="../Compositional/#plfa_plfa-part3-Compositional-7050" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7100" href="../Compositional/#plfa_plfa-part3-Compositional-7067" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7102" class="Symbol">)</a>
</pre><p>如果你仔细观察一下，就会发现 <code>_●_</code> 运算符看起来像函数式程序员熟悉的 <code>apply</code> 操作：它接受两个参数，并将第一个参数应用于第二个参数。</p><p>接下来我们考虑应用的反演引理，它同样是应用的语义方程的向右方向。 下面是它的证明：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰ·→●ℰ"></a><a id="plfa_plfa-part3-Compositional-7799" href="../Compositional/#plfa_plfa-part3-Compositional-7799" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7805" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7807" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-7809" href="../Compositional/#plfa_plfa-part3-Compositional-7809" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-7810" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7812" href="../Compositional/#plfa_plfa-part3-Compositional-7812" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7814" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7816" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-7820" href="../Compositional/#plfa_plfa-part3-Compositional-7809" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-7821" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7823" href="../Compositional/#plfa_plfa-part3-Compositional-7823" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-7825" href="../Compositional/#plfa_plfa-part3-Compositional-7825" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-7827" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7829" href="../Compositional/#plfa_plfa-part3-Compositional-7809" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-7831" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-7833" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-7834" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7836" href="../Compositional/#plfa_plfa-part3-Compositional-7836" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7838" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7840" href="../Denotational/#plfa_plfa-part3-Denotational-4890" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-7845" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-7849" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-7851" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-7853" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7854" href="../Compositional/#plfa_plfa-part3-Compositional-7823" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-7856" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-7858" href="../Compositional/#plfa_plfa-part3-Compositional-7825" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-7859" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7861" href="../Compositional/#plfa_plfa-part3-Compositional-7812" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7863" href="../Compositional/#plfa_plfa-part3-Compositional-7836" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-7869" class="Comment">----------------</a>
  <a id="plfa_plfa-part3-Compositional-7888" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-7890" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7891" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-7893" href="../Compositional/#plfa_plfa-part3-Compositional-7823" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-7895" href="../Compositional/#plfa_plfa-part3-Compositional-6984" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-7897" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-7899" href="../Compositional/#plfa_plfa-part3-Compositional-7825" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-7900" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7902" href="../Compositional/#plfa_plfa-part3-Compositional-7812" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7904" href="../Compositional/#plfa_plfa-part3-Compositional-7836" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-7906" href="../Compositional/#plfa_plfa-part3-Compositional-7799" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7912" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7913" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Compositional-7919" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-7920" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-7922" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7924" href="../Compositional/#plfa_plfa-part3-Compositional-7924" class="Bound">v′</a><a id="plfa_plfa-part3-Compositional-7926" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-7928" href="../Compositional/#plfa_plfa-part3-Compositional-7928" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-7931" href="../Compositional/#plfa_plfa-part3-Compositional-7931" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-7933" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7935" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7937" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-7942" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7944" href="../Compositional/#plfa_plfa-part3-Compositional-7924" class="Bound">v′</a> <a id="plfa_plfa-part3-Compositional-7947" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7949" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7951" href="../Compositional/#plfa_plfa-part3-Compositional-7928" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-7954" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7956" href="../Compositional/#plfa_plfa-part3-Compositional-7931" class="Bound">d₂</a> <a id="plfa_plfa-part3-Compositional-7959" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-7961" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-7963" href="../Compositional/#plfa_plfa-part3-Compositional-7799" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7969" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-7970" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-7972" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7974" href="../Denotational/#plfa_plfa-part3-Denotational-4910" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-7975" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-7977" href="../Denotational/#plfa_plfa-part3-Denotational-11750" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-7985" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7987" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-7992" href="../Denotational/#plfa_plfa-part3-Denotational-5392" class="InductiveConstructor">⊑-bot</a>
<a id="plfa_plfa-part3-Compositional-7998" href="../Compositional/#plfa_plfa-part3-Compositional-7799" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8004" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-8005" href="../Compositional/#plfa_plfa-part3-Compositional-8005" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-8006" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8008" href="../Compositional/#plfa_plfa-part3-Compositional-8008" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-8009" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8011" href="../Compositional/#plfa_plfa-part3-Compositional-8011" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-8012" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8014" href="../Compositional/#plfa_plfa-part3-Compositional-8014" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-8015" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8017" href="../Compositional/#plfa_plfa-part3-Compositional-8017" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-8018" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-8020" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8021" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Compositional-8028" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-8029" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-8031" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8033" href="../Compositional/#plfa_plfa-part3-Compositional-8033" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-8035" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8037" class="Argument">w</a> <a id="plfa_plfa-part3-Compositional-8039" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8041" href="../Compositional/#plfa_plfa-part3-Compositional-8041" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-8043" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-8045" href="../Compositional/#plfa_plfa-part3-Compositional-8045" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-8048" href="../Compositional/#plfa_plfa-part3-Compositional-8048" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-8050" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Compositional-8056" class="Keyword">with</a> <a id="plfa_plfa-part3-Compositional-8061" href="../Compositional/#plfa_plfa-part3-Compositional-7799" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8067" href="../Compositional/#plfa_plfa-part3-Compositional-8045" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-8070" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8072" href="../Compositional/#plfa_plfa-part3-Compositional-7799" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8078" href="../Compositional/#plfa_plfa-part3-Compositional-8048" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Compositional-8081" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8085" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8087" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8092" href="../Compositional/#plfa_plfa-part3-Compositional-8092" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8096" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8098" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8103" href="../Compositional/#plfa_plfa-part3-Compositional-8103" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8107" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8109" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8114" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8115" href="../Denotational/#plfa_plfa-part3-Denotational-5417" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-8124" href="../Compositional/#plfa_plfa-part3-Compositional-8092" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8128" href="../Compositional/#plfa_plfa-part3-Compositional-8103" class="Bound">lt2</a><a id="plfa_plfa-part3-Compositional-8131" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-8133" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8137" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8139" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8144" href="../Compositional/#plfa_plfa-part3-Compositional-8144" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8148" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8150" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8155" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8157" href="../Compositional/#plfa_plfa-part3-Compositional-8157" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8161" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8163" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8165" href="../Compositional/#plfa_plfa-part3-Compositional-8165" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8171" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8173" href="../Compositional/#plfa_plfa-part3-Compositional-8173" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8178" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8180" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8182" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8190" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8195" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8197" href="../Compositional/#plfa_plfa-part3-Compositional-8157" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8201" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8203" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8205" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8209" href="../Compositional/#plfa_plfa-part3-Compositional-8165" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8215" href="../Compositional/#plfa_plfa-part3-Compositional-8241" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8218" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8220" href="../Compositional/#plfa_plfa-part3-Compositional-8173" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8225" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8227" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part3-Compositional-8235" class="Keyword">where</a> <a id="plfa_plfa-part3-Compositional-8241" href="../Compositional/#plfa_plfa-part3-Compositional-8241" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8244" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-8246" href="../Compositional/#plfa_plfa-part3-Compositional-8157" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8250" href="../Denotational/#plfa_plfa-part3-Denotational-4922" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8252" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8253" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8256" href="../Denotational/#plfa_plfa-part3-Denotational-4952" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-8258" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-8260" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8262" href="../Denotational/#plfa_plfa-part3-Denotational-5357" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-8264" href="../Compositional/#plfa_plfa-part3-Compositional-8157" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8268" href="../Denotational/#plfa_plfa-part3-Denotational-4922" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8270" class="Bound">v₂</a>
            <a id="plfa_plfa-part3-Compositional-8285" href="../Compositional/#plfa_plfa-part3-Compositional-8241" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8288" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8290" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8291" href="../Denotational/#plfa_plfa-part3-Denotational-5718" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-8297" href="../Denotational/#plfa_plfa-part3-Denotational-6753" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8304" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8305" href="../Denotational/#plfa_plfa-part3-Denotational-5417" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-8314" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8315" href="../Denotational/#plfa_plfa-part3-Denotational-5647" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-8323" href="../Compositional/#plfa_plfa-part3-Compositional-8144" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8327" href="../Denotational/#plfa_plfa-part3-Denotational-5392" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-8332" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8334" href="../Denotational/#plfa_plfa-part3-Denotational-6753" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Compositional-8340" class="Symbol">))</a>
<a id="plfa_plfa-part3-Compositional-8343" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8347" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8349" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8354" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8356" href="../Compositional/#plfa_plfa-part3-Compositional-8356" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8360" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8362" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8364" href="../Compositional/#plfa_plfa-part3-Compositional-8364" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8370" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8372" href="../Compositional/#plfa_plfa-part3-Compositional-8372" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8377" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8379" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8381" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8383" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8388" href="../Compositional/#plfa_plfa-part3-Compositional-8388" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8392" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8400" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8405" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8407" href="../Compositional/#plfa_plfa-part3-Compositional-8356" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8411" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8413" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8415" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8419" href="../Compositional/#plfa_plfa-part3-Compositional-8364" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8425" href="../Compositional/#plfa_plfa-part3-Compositional-8451" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8428" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8430" href="../Compositional/#plfa_plfa-part3-Compositional-8372" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8435" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8437" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part3-Compositional-8445" class="Keyword">where</a> <a id="plfa_plfa-part3-Compositional-8451" href="../Compositional/#plfa_plfa-part3-Compositional-8451" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8454" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-8456" href="../Compositional/#plfa_plfa-part3-Compositional-8356" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8460" href="../Denotational/#plfa_plfa-part3-Denotational-4922" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8462" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8463" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8466" href="../Denotational/#plfa_plfa-part3-Denotational-4952" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-8468" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-8470" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8472" href="../Denotational/#plfa_plfa-part3-Denotational-5357" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-8474" href="../Compositional/#plfa_plfa-part3-Compositional-8356" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8478" href="../Denotational/#plfa_plfa-part3-Denotational-4922" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8480" class="Bound">v₁</a>
            <a id="plfa_plfa-part3-Compositional-8495" href="../Compositional/#plfa_plfa-part3-Compositional-8451" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8498" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8500" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8501" href="../Denotational/#plfa_plfa-part3-Denotational-5718" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-8507" href="../Denotational/#plfa_plfa-part3-Denotational-6753" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8514" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8515" href="../Denotational/#plfa_plfa-part3-Denotational-5417" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-8524" href="../Denotational/#plfa_plfa-part3-Denotational-6753" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8531" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8532" href="../Denotational/#plfa_plfa-part3-Denotational-5647" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-8540" href="../Compositional/#plfa_plfa-part3-Compositional-8388" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8544" href="../Denotational/#plfa_plfa-part3-Denotational-5392" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-8549" class="Symbol">)))</a>
<a id="plfa_plfa-part3-Compositional-8553" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8557" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8559" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8564" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8566" href="../Compositional/#plfa_plfa-part3-Compositional-8566" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8570" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8572" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8574" href="../Compositional/#plfa_plfa-part3-Compositional-8574" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8580" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8582" href="../Compositional/#plfa_plfa-part3-Compositional-8582" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8587" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8589" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8591" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8593" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8598" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8600" href="../Compositional/#plfa_plfa-part3-Compositional-8600" class="Bound">v₁′′</a> <a id="plfa_plfa-part3-Compositional-8605" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8607" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8609" href="../Compositional/#plfa_plfa-part3-Compositional-8609" class="Bound">L↓v12′</a> <a id="plfa_plfa-part3-Compositional-8616" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8618" href="../Compositional/#plfa_plfa-part3-Compositional-8618" class="Bound">M↓v3′</a> <a id="plfa_plfa-part3-Compositional-8624" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8626" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8628" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8636" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-8640" href="../Compositional/#plfa_plfa-part3-Compositional-8640" class="Bound">L↓⊔</a> <a id="plfa_plfa-part3-Compositional-8644" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8646" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-8654" href="../Compositional/#plfa_plfa-part3-Compositional-8574" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8660" href="../Compositional/#plfa_plfa-part3-Compositional-8609" class="Bound">L↓v12′</a> <a id="plfa_plfa-part3-Compositional-8667" class="Keyword">in</a>
      <a id="plfa_plfa-part3-Compositional-8676" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-8680" href="../Compositional/#plfa_plfa-part3-Compositional-8680" class="Bound">M↓⊔</a> <a id="plfa_plfa-part3-Compositional-8684" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8686" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-8694" href="../Compositional/#plfa_plfa-part3-Compositional-8582" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8699" href="../Compositional/#plfa_plfa-part3-Compositional-8618" class="Bound">M↓v3′</a> <a id="plfa_plfa-part3-Compositional-8705" class="Keyword">in</a>
      <a id="plfa_plfa-part3-Compositional-8714" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8719" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8721" href="../Compositional/#plfa_plfa-part3-Compositional-8566" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8725" href="../Denotational/#plfa_plfa-part3-Denotational-4952" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-8727" href="../Compositional/#plfa_plfa-part3-Compositional-8600" class="Bound">v₁′′</a> <a id="plfa_plfa-part3-Compositional-8732" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8734" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8736" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8740" href="../Compositional/#plfa_plfa-part3-Compositional-8640" class="Bound">L↓⊔</a> <a id="plfa_plfa-part3-Compositional-8744" href="../Denotational/#plfa_plfa-part3-Denotational-7533" class="Function">⊔↦⊔-dist</a> <a id="plfa_plfa-part3-Compositional-8753" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8755" href="../Compositional/#plfa_plfa-part3-Compositional-8680" class="Bound">M↓⊔</a> <a id="plfa_plfa-part3-Compositional-8759" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8761" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-8763" href="../Compositional/#plfa_plfa-part3-Compositional-7799" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8769" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-8770" href="../Compositional/#plfa_plfa-part3-Compositional-8770" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-8771" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8773" href="../Compositional/#plfa_plfa-part3-Compositional-8773" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-8774" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8776" href="../Compositional/#plfa_plfa-part3-Compositional-8776" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-8777" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8779" href="../Compositional/#plfa_plfa-part3-Compositional-8779" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-8780" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8782" href="../Compositional/#plfa_plfa-part3-Compositional-8782" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-8783" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-8785" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8786" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8790" href="../Compositional/#plfa_plfa-part3-Compositional-8790" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-8792" href="../Compositional/#plfa_plfa-part3-Compositional-8792" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-8794" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Compositional-8800" class="Keyword">with</a> <a id="plfa_plfa-part3-Compositional-8805" href="../Compositional/#plfa_plfa-part3-Compositional-7799" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8811" href="../Compositional/#plfa_plfa-part3-Compositional-8790" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-8813" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8817" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8819" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8824" href="../Compositional/#plfa_plfa-part3-Compositional-8824" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8828" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8830" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8835" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8836" href="../Denotational/#plfa_plfa-part3-Denotational-5647" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-8844" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-8847" href="../Compositional/#plfa_plfa-part3-Compositional-8824" class="Bound">lt2</a><a id="plfa_plfa-part3-Compositional-8850" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-8852" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8856" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8858" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8863" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8865" href="../Compositional/#plfa_plfa-part3-Compositional-8865" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8868" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8870" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8872" href="../Compositional/#plfa_plfa-part3-Compositional-8872" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8878" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8880" href="../Compositional/#plfa_plfa-part3-Compositional-8880" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8885" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8887" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8889" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8897" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8902" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8904" href="../Compositional/#plfa_plfa-part3-Compositional-8865" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8907" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8909" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8911" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8915" href="../Compositional/#plfa_plfa-part3-Compositional-8872" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8921" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8922" href="../Denotational/#plfa_plfa-part3-Denotational-5718" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-8928" href="../Denotational/#plfa_plfa-part3-Denotational-6753" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8935" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-8937" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8939" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8941" href="../Compositional/#plfa_plfa-part3-Compositional-8880" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8946" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8948" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a>
</pre><p>我们通过对语义进行归纳来证明：</p><ul><li><p>对于 <code>↦-elim</code> 的情况，我们有 <code>γ ⊢ L ↓ (v′ ↦ v)</code> 和 <code>γ ⊢ M ↓ v′</code>， 只需证明 <code>(ℰ L ● ℰ M) γ v</code> 即可。</p></li><li><p>对于 <code>⊥-intro</code> 的情况，我们有 <code>v = ⊥</code>，于是可推出 <code>v ⊑ ⊥</code>。</p></li></ul><ul><li><p>对于 <code>⊔-intro</code> 的情况，我们有 <code>ℰ (L · M) γ v₁</code> 和 <code>ℰ (L · M) γ v₂</code>， 且需要证明 <code>(ℰ L ● ℰ M) γ (v₁ ⊔ v₂)</code>。根据归纳假设，我们有 <code>(ℰ L ● ℰ M) γ v₁</code> 和 <code>(ℰ L ● ℰ M) γ v₂</code>，于是我们需要考虑四种子情况：</p><ul><li><p>假设 <code>v₁ ⊑ ⊥</code> 且 <code>v₂ ⊑ ⊥</code>，那么 <code>v₁ ⊔ v₂ ⊑ ⊥</code>。</p></li><li><p>假设 <code>v₁ ⊑ ⊥</code>，<code>γ ⊢ L ↓ v₁′ ↦ v₂</code> 且 <code>γ ⊢ M ↓ v₁′</code>， 根据 <code>sub</code> 规则我们有 <code>γ ⊢ L ↓ v₁′ ↦ (v₁ ⊔ v₂)</code>，因为 <code>v₁′ ↦ (v₁ ⊔ v₂) ⊑ v₁′ ↦ v₂</code>。</p></li><li><p>假设 <code>γ ⊢ L ↓ v₁′ ↦ v₁</code>，<code>γ ⊢ M ↓ v₁′</code> 且 <code>v₂ ⊑ ⊥</code>， 根据 <code>sub</code> 规则我们有 <code>γ ⊢ L ↓ v₁′ ↦ (v₁ ⊔ v₂)</code>，因为 <code>v₁′ ↦ (v₁ ⊔ v₂) ⊑ v₁′ ↦ v₁</code>。</p></li><li><p>假设 <code>γ ⊢ L ↓ v₁′′ ↦ v₁, γ ⊢ M ↓ v₁′′</code>， <code>γ ⊢ L ↓ v₁′ ↦ v₂</code> 且 <code>γ ⊢ M ↓ v₁′</code>， 这种情况是最有趣的部分。通过使用两次 <code>⊔-intro</code>，我们有 <code>γ ⊢ L ↓ (v₁′ ↦ v₂) ⊔ (v₁′′ ↦ v₁)</code> 且 <code>γ ⊢ M ↓ (v₁′ ⊔ v₁′′)</code>。但它对 <code>ℰ L ● ℰ M</code> 来说与我们的需要尚不匹配， 因为 <code>L</code> 的结果必须是一个输入条目为 <code>v₁′ ⊔ v₁′′</code> 的 <code>↦</code>。 因此我们需要使用 <code>sub</code> 规则来得到 <code>γ ⊢ L ↓ (v₁′ ⊔ v₁′′) ↦ (v₁ ⊔ v₂)</code>； 使用 <code>⊔↦⊔-dist</code> 引理（感谢 <code>⊑-dist</code> 规则）来证明：</p><pre><code>  (v₁′ ⊔ v₁′′) ↦ (v₁ ⊔ v₂) ⊑ (v₁′ ↦ v₂) ⊔ (v₁′′ ↦ v₁)</code></pre><p>这样我们就证明了该情况所有的子情况。</p></li></ul></li><li><p>对于情况 <code>sub</code>，我们有 <code>Γ ⊢ L · M ↓ v₁</code> 且 <code>v ⊑ v₁</code>。 根据归纳假设，我们有 <code>(ℰ L ● ℰ M) γ v₁</code>，于是我们需要考虑两种子情况：</p><ul><li>假设 <code>v₁ ⊑ ⊥</code>，我们可推出 <code>v ⊑ ⊥</code>。</li><li>假设 <code>Γ ⊢ L ↓ v′ → v₁</code> 且 <code>Γ ⊢ M ↓ v′</code>，我们可根据规则 <code>sub</code> 推出 <code>Γ ⊢ L ↓ v′ → v</code>，因为 <code>v′ → v ⊑ v′ → v₁</code>。</li></ul></li></ul><p>向左的方向可通过在前提 <code>(ℰ L ● ℰ M) γ v</code> 下进行情况分析来证明。 对于情况 <code>v ⊑ ⊥</code>，我们可通过规则 <code>⊥-intro</code> 得到 <code>Γ ⊢ L · M ↓ ⊥</code>。 否则，我们可直接通过规则 <code>↦-elim</code> 得出结论：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-●ℰ→ℰ·"></a><a id="plfa_plfa-part3-Compositional-12181" href="../Compositional/#plfa_plfa-part3-Compositional-12181" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12187" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12189" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12191" href="../Compositional/#plfa_plfa-part3-Compositional-12191" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12192" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12194" href="../Compositional/#plfa_plfa-part3-Compositional-12194" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12196" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12198" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-12202" href="../Compositional/#plfa_plfa-part3-Compositional-12191" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12203" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12205" href="../Compositional/#plfa_plfa-part3-Compositional-12205" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12207" href="../Compositional/#plfa_plfa-part3-Compositional-12207" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-12209" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12211" href="../Compositional/#plfa_plfa-part3-Compositional-12191" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-12213" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-12215" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-12216" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12218" href="../Compositional/#plfa_plfa-part3-Compositional-12218" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12219" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12223" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12225" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12226" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12228" href="../Compositional/#plfa_plfa-part3-Compositional-12205" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12230" href="../Compositional/#plfa_plfa-part3-Compositional-6984" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12232" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12234" href="../Compositional/#plfa_plfa-part3-Compositional-12207" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12235" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12237" href="../Compositional/#plfa_plfa-part3-Compositional-12194" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12239" href="../Compositional/#plfa_plfa-part3-Compositional-12218" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-12245" class="Comment">----------------</a>
  <a id="plfa_plfa-part3-Compositional-12264" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12266" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12268" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12269" href="../Compositional/#plfa_plfa-part3-Compositional-12205" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12271" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-12273" href="../Compositional/#plfa_plfa-part3-Compositional-12207" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12274" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12276" href="../Compositional/#plfa_plfa-part3-Compositional-12194" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12278" href="../Compositional/#plfa_plfa-part3-Compositional-12218" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-12280" href="../Compositional/#plfa_plfa-part3-Compositional-12181" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12286" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12287" href="../Compositional/#plfa_plfa-part3-Compositional-12287" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-12288" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12290" href="../Compositional/#plfa_plfa-part3-Compositional-12290" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12291" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12293" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12294" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-12299" href="../Compositional/#plfa_plfa-part3-Compositional-12299" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-12301" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12303" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12305" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-12309" href="../Denotational/#plfa_plfa-part3-Denotational-11750" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-12317" href="../Compositional/#plfa_plfa-part3-Compositional-12299" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-12320" href="../Compositional/#plfa_plfa-part3-Compositional-12181" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12326" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12327" href="../Compositional/#plfa_plfa-part3-Compositional-12327" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-12328" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12330" href="../Compositional/#plfa_plfa-part3-Compositional-12330" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12331" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12333" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12334" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-12339" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12341" href="../Compositional/#plfa_plfa-part3-Compositional-12341" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-12344" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12346" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12348" href="../Compositional/#plfa_plfa-part3-Compositional-12348" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-12351" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12353" href="../Compositional/#plfa_plfa-part3-Compositional-12353" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-12356" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-12358" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-12359" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12361" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12363" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Compositional-12370" href="../Compositional/#plfa_plfa-part3-Compositional-12348" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-12373" href="../Compositional/#plfa_plfa-part3-Compositional-12353" class="Bound">d2</a>
</pre><p>这样我们就通过 <code>●</code> 函数的相关定理，证明了对于函数应用来说，语义是可组合的。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-app-equiv"></a><a id="plfa_plfa-part3-Compositional-12567" href="../Compositional/#plfa_plfa-part3-Compositional-12567" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-12577" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12579" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12581" href="../Compositional/#plfa_plfa-part3-Compositional-12581" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12582" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12584" href="../Compositional/#plfa_plfa-part3-Compositional-12584" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12586" href="../Compositional/#plfa_plfa-part3-Compositional-12586" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-12588" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12590" href="../Compositional/#plfa_plfa-part3-Compositional-12581" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-12592" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-12594" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-12595" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12599" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12601" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12603" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12604" href="../Compositional/#plfa_plfa-part3-Compositional-12584" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12606" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-12608" href="../Compositional/#plfa_plfa-part3-Compositional-12586" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12609" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12611" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12613" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12614" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12616" href="../Compositional/#plfa_plfa-part3-Compositional-12584" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-12617" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12619" href="../Compositional/#plfa_plfa-part3-Compositional-6984" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12621" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12622" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12624" href="../Compositional/#plfa_plfa-part3-Compositional-12586" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12625" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-12627" href="../Compositional/#plfa_plfa-part3-Compositional-12567" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-12637" href="../Compositional/#plfa_plfa-part3-Compositional-12637" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12639" href="../Compositional/#plfa_plfa-part3-Compositional-12639" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12641" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12643" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12645" href="../Compositional/#plfa_plfa-part3-Compositional-7799" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-12651" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12653" href="../Compositional/#plfa_plfa-part3-Compositional-12181" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12659" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a>
</pre><p>我们还需要一个变量的反演引理：若 <code>Γ ⊢ x ↓ v</code>，则 <code>v ⊑ γ x</code>。 它的证明就是对语义的直接归纳：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-var-inv"></a><a id="plfa_plfa-part3-Compositional-12881" href="../Compositional/#plfa_plfa-part3-Compositional-12881" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12889" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12891" class="Symbol">∀</a> <a id="plfa_plfa-part3-Compositional-12893" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12894" href="../Compositional/#plfa_plfa-part3-Compositional-12894" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-12896" href="../Compositional/#plfa_plfa-part3-Compositional-12896" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12898" href="../Compositional/#plfa_plfa-part3-Compositional-12898" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-12899" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12901" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12902" href="../Compositional/#plfa_plfa-part3-Compositional-12902" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12904" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12906" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-12910" href="../Compositional/#plfa_plfa-part3-Compositional-12894" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12911" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12915" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12917" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12919" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12920" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-12922" href="../Compositional/#plfa_plfa-part3-Compositional-12898" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-12923" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12925" href="../Compositional/#plfa_plfa-part3-Compositional-12902" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12927" href="../Compositional/#plfa_plfa-part3-Compositional-12896" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-12933" class="Comment">-------------------</a>
  <a id="plfa_plfa-part3-Compositional-12955" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12957" href="../Compositional/#plfa_plfa-part3-Compositional-12896" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12959" href="../Denotational/#plfa_plfa-part3-Denotational-5357" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-12961" href="../Compositional/#plfa_plfa-part3-Compositional-12902" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12963" href="../Compositional/#plfa_plfa-part3-Compositional-12898" class="Bound">x</a>
<a id="plfa_plfa-part3-Compositional-12965" href="../Compositional/#plfa_plfa-part3-Compositional-12881" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12973" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12974" href="../Denotational/#plfa_plfa-part3-Denotational-11441" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Compositional-12977" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12979" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12981" href="../Denotational/#plfa_plfa-part3-Denotational-6753" class="Function">⊑-refl</a>
<a id="plfa_plfa-part3-Compositional-12988" href="../Compositional/#plfa_plfa-part3-Compositional-12881" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12996" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12997" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-13005" href="../Compositional/#plfa_plfa-part3-Compositional-13005" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-13008" href="../Compositional/#plfa_plfa-part3-Compositional-13008" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-13010" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13012" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-13014" href="../Denotational/#plfa_plfa-part3-Denotational-5417" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-13023" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13024" href="../Compositional/#plfa_plfa-part3-Compositional-12881" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13032" href="../Compositional/#plfa_plfa-part3-Compositional-13005" class="Bound">d₁</a><a id="plfa_plfa-part3-Compositional-13034" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13036" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13037" href="../Compositional/#plfa_plfa-part3-Compositional-12881" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13045" href="../Compositional/#plfa_plfa-part3-Compositional-13008" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-13047" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-13049" href="../Compositional/#plfa_plfa-part3-Compositional-12881" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13057" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13058" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-13062" href="../Compositional/#plfa_plfa-part3-Compositional-13062" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-13064" href="../Compositional/#plfa_plfa-part3-Compositional-13064" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-13066" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13068" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-13070" href="../Denotational/#plfa_plfa-part3-Denotational-5647" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-13078" href="../Compositional/#plfa_plfa-part3-Compositional-13064" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-13081" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13082" href="../Compositional/#plfa_plfa-part3-Compositional-12881" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13090" href="../Compositional/#plfa_plfa-part3-Compositional-13062" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-13091" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-13093" href="../Compositional/#plfa_plfa-part3-Compositional-12881" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13101" href="../Denotational/#plfa_plfa-part3-Denotational-11750" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-13109" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-13111" href="../Denotational/#plfa_plfa-part3-Denotational-5392" class="InductiveConstructor">⊑-bot</a>
</pre><p>为了完善语义方程，我们为变量建立以下方程：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-var-equiv"></a><a id="plfa_plfa-part3-Compositional-13246" href="../Compositional/#plfa_plfa-part3-Compositional-13246" class="Function">var-equiv</a> <a id="plfa_plfa-part3-Compositional-13256" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13258" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-13260" href="../Compositional/#plfa_plfa-part3-Compositional-13260" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-13261" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13263" href="../Compositional/#plfa_plfa-part3-Compositional-13263" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-13265" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13267" href="../Compositional/#plfa_plfa-part3-Compositional-13260" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13269" href="../Untyped/#plfa_plfa-part2-Untyped-4323" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Compositional-13271" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-13272" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13274" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13276" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13278" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13279" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-13281" href="../Compositional/#plfa_plfa-part3-Compositional-13263" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-13282" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13284" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-13286" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-13289" href="../Compositional/#plfa_plfa-part3-Compositional-13289" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-13291" href="../Compositional/#plfa_plfa-part3-Compositional-13291" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-13293" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13295" href="../Compositional/#plfa_plfa-part3-Compositional-13291" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-13297" href="../Denotational/#plfa_plfa-part3-Denotational-5357" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-13299" href="../Compositional/#plfa_plfa-part3-Compositional-13289" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-13301" href="../Compositional/#plfa_plfa-part3-Compositional-13263" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-13302" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-13304" href="../Compositional/#plfa_plfa-part3-Compositional-13246" class="Function">var-equiv</a> <a id="plfa_plfa-part3-Compositional-13314" href="../Compositional/#plfa_plfa-part3-Compositional-13314" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-13316" href="../Compositional/#plfa_plfa-part3-Compositional-13316" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-13318" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-13320" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-13322" href="../Compositional/#plfa_plfa-part3-Compositional-12881" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13330" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-13332" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-13335" href="../Compositional/#plfa_plfa-part3-Compositional-13335" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-13338" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13340" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-13344" href="../Denotational/#plfa_plfa-part3-Denotational-11441" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Compositional-13348" href="../Compositional/#plfa_plfa-part3-Compositional-13335" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-13350" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13352" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="合同性">合同性</h2><p>本章的主要工作已经完成：我们建立了语义方程来展示指称语义是如何组合的。 在本节和下一节中，我们将利用这些方程来证明一些推论：指称相等满足<strong>合同性（congruence）</strong>， 并证明指称具有<strong>可组合性（compositionality property）</strong>， 该性质指出在同一语境中，两个指称相等的项会产生两个指称相等的程序 。</p><p>我们首先证明指称相等对 λ-抽象满足合同性：<code>ℰ N ≃ ℰ N′</code> 蕴含 <code>ℰ (ƛ N) ≃ ℰ (ƛ N′)</code>。我们用 <code>lam-equiv</code> 方程将这个问题简化为 <code>ℱ</code> 是否满足合同性：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱ-cong"></a><a id="plfa_plfa-part3-Compositional-14383" href="../Compositional/#plfa_plfa-part3-Compositional-14383" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-14390" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14392" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-14394" href="../Compositional/#plfa_plfa-part3-Compositional-14394" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14395" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14397" href="../Compositional/#plfa_plfa-part3-Compositional-14397" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14399" href="../Compositional/#plfa_plfa-part3-Compositional-14399" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14402" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14404" href="../Denotational/#plfa_plfa-part3-Denotational-21933" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-14415" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14416" href="../Compositional/#plfa_plfa-part3-Compositional-14394" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14418" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14420" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-14421" class="Symbol">)}</a>
  <a id="plfa_plfa-part3-Compositional-14426" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14428" href="../Compositional/#plfa_plfa-part3-Compositional-14397" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14430" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-14432" href="../Compositional/#plfa_plfa-part3-Compositional-14399" class="Bound">D′</a>
    <a id="plfa_plfa-part3-Compositional-14439" class="Comment">-----------</a>
  <a id="plfa_plfa-part3-Compositional-14453" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14455" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14457" href="../Compositional/#plfa_plfa-part3-Compositional-14397" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14459" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-14461" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14463" href="../Compositional/#plfa_plfa-part3-Compositional-14399" class="Bound">D′</a>
<a id="plfa_plfa-part3-Compositional-14466" href="../Compositional/#plfa_plfa-part3-Compositional-14383" class="Function">ℱ-cong</a><a id="plfa_plfa-part3-Compositional-14472" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14473" href="../Compositional/#plfa_plfa-part3-Compositional-14473" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14474" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14476" href="../Compositional/#plfa_plfa-part3-Compositional-14476" class="Bound">D≃D′</a> <a id="plfa_plfa-part3-Compositional-14481" href="../Compositional/#plfa_plfa-part3-Compositional-14481" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14483" href="../Compositional/#plfa_plfa-part3-Compositional-14483" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-14485" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-14489" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-14491" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-14494" href="../Compositional/#plfa_plfa-part3-Compositional-14494" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14496" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14498" href="../Compositional/#plfa_plfa-part3-Compositional-14561" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14500" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14501" href="../Compositional/#plfa_plfa-part3-Compositional-14481" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14502" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14504" href="../Compositional/#plfa_plfa-part3-Compositional-14483" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14505" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14507" href="../Compositional/#plfa_plfa-part3-Compositional-14494" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14509" href="../Compositional/#plfa_plfa-part3-Compositional-14476" class="Bound">D≃D′</a><a id="plfa_plfa-part3-Compositional-14513" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14515" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14517" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-14520" href="../Compositional/#plfa_plfa-part3-Compositional-14520" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14522" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14524" href="../Compositional/#plfa_plfa-part3-Compositional-14561" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14526" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14527" href="../Compositional/#plfa_plfa-part3-Compositional-14481" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14528" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14530" href="../Compositional/#plfa_plfa-part3-Compositional-14483" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14531" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14533" href="../Compositional/#plfa_plfa-part3-Compositional-14520" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14535" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14536" href="../Denotational/#plfa_plfa-part3-Denotational-22726" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-14542" href="../Compositional/#plfa_plfa-part3-Compositional-14476" class="Bound">D≃D′</a><a id="plfa_plfa-part3-Compositional-14546" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-14549" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Compositional-14553" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-14561" href="../Compositional/#plfa_plfa-part3-Compositional-14561" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14564" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14566" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-14568" href="../Compositional/#plfa_plfa-part3-Compositional-14568" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14570" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14572" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-14576" href="../Compositional/#plfa_plfa-part3-Compositional-14473" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14577" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14579" href="../Compositional/#plfa_plfa-part3-Compositional-14579" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14580" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14582" href="../Compositional/#plfa_plfa-part3-Compositional-14582" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14584" href="../Compositional/#plfa_plfa-part3-Compositional-14584" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14587" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14589" href="../Denotational/#plfa_plfa-part3-Denotational-21933" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-14600" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14601" href="../Compositional/#plfa_plfa-part3-Compositional-14473" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14603" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14605" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-14606" class="Symbol">)}</a>
    <a id="plfa_plfa-part3-Compositional-14613" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14615" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14617" href="../Compositional/#plfa_plfa-part3-Compositional-14582" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14619" href="../Compositional/#plfa_plfa-part3-Compositional-14568" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14621" href="../Compositional/#plfa_plfa-part3-Compositional-14579" class="Bound">v</a>  <a id="plfa_plfa-part3-Compositional-14624" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-14627" href="../Compositional/#plfa_plfa-part3-Compositional-14582" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14629" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-14631" href="../Compositional/#plfa_plfa-part3-Compositional-14584" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14634" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14636" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14638" href="../Compositional/#plfa_plfa-part3-Compositional-14584" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14641" href="../Compositional/#plfa_plfa-part3-Compositional-14568" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14643" href="../Compositional/#plfa_plfa-part3-Compositional-14579" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-14647" href="../Compositional/#plfa_plfa-part3-Compositional-14561" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14650" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14651" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-14653" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14655" href="../Denotational/#plfa_plfa-part3-Denotational-4910" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-14656" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14658" href="../Compositional/#plfa_plfa-part3-Compositional-14658" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-14661" href="../Compositional/#plfa_plfa-part3-Compositional-14661" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14665" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14667" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a>
  <a id="plfa_plfa-part3-Compositional-14672" href="../Compositional/#plfa_plfa-part3-Compositional-14561" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14675" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14676" href="../Compositional/#plfa_plfa-part3-Compositional-14676" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14677" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14679" href="../Compositional/#plfa_plfa-part3-Compositional-14679" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-14681" href="../Denotational/#plfa_plfa-part3-Denotational-4922" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-14683" href="../Compositional/#plfa_plfa-part3-Compositional-14683" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14684" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14686" href="../Compositional/#plfa_plfa-part3-Compositional-14686" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-14689" href="../Compositional/#plfa_plfa-part3-Compositional-14689" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14693" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14695" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#636" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-14701" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14702" href="../Compositional/#plfa_plfa-part3-Compositional-14689" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14706" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14707" href="../Compositional/#plfa_plfa-part3-Compositional-14676" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14709" href="../Denotational/#plfa_plfa-part3-Denotational-8851" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-14712" href="../Compositional/#plfa_plfa-part3-Compositional-14679" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14713" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14715" href="../Compositional/#plfa_plfa-part3-Compositional-14683" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14716" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14718" href="../Compositional/#plfa_plfa-part3-Compositional-14686" class="Bound">fd</a>
  <a id="plfa_plfa-part3-Compositional-14723" href="../Compositional/#plfa_plfa-part3-Compositional-14561" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14726" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14727" href="../Compositional/#plfa_plfa-part3-Compositional-14727" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14728" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14730" href="../Compositional/#plfa_plfa-part3-Compositional-14730" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-14732" href="../Denotational/#plfa_plfa-part3-Denotational-4952" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-14734" href="../Compositional/#plfa_plfa-part3-Compositional-14734" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14735" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14737" href="../Compositional/#plfa_plfa-part3-Compositional-14737" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-14740" href="../Compositional/#plfa_plfa-part3-Compositional-14740" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14744" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14746" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-14748" href="../Compositional/#plfa_plfa-part3-Compositional-14561" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14750" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14751" href="../Compositional/#plfa_plfa-part3-Compositional-14727" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14752" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14754" href="../Compositional/#plfa_plfa-part3-Compositional-14730" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-14755" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14757" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14758" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#636" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-14764" href="../Compositional/#plfa_plfa-part3-Compositional-14737" class="Bound">fd</a><a id="plfa_plfa-part3-Compositional-14766" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14768" href="../Compositional/#plfa_plfa-part3-Compositional-14740" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14772" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14774" href="../Compositional/#plfa_plfa-part3-Compositional-14561" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14776" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14777" href="../Compositional/#plfa_plfa-part3-Compositional-14727" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14778" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14780" href="../Compositional/#plfa_plfa-part3-Compositional-14734" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14781" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14783" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14784" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#650" class="Field">proj₂</a> <a id="plfa_plfa-part3-Compositional-14790" href="../Compositional/#plfa_plfa-part3-Compositional-14737" class="Bound">fd</a><a id="plfa_plfa-part3-Compositional-14792" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14794" href="../Compositional/#plfa_plfa-part3-Compositional-14740" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14798" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a>
</pre><p><code>ℱ-cong</code> 的证明使用了 <code>ℱ≃</code> 来处理「当且仅当」的两个方向。 该引理直接通过对值 <code>v</code> 进行归纳得证。</p><p>现在我们通过直白的等式推理证明 λ-抽象满足合同性：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lam-cong"></a><a id="plfa_plfa-part3-Compositional-15167" href="../Compositional/#plfa_plfa-part3-Compositional-15167" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-15176" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15178" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-15180" href="../Compositional/#plfa_plfa-part3-Compositional-15180" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15181" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15183" href="../Compositional/#plfa_plfa-part3-Compositional-15183" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-15185" href="../Compositional/#plfa_plfa-part3-Compositional-15185" class="Bound">N′</a> <a id="plfa_plfa-part3-Compositional-15188" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15190" href="../Compositional/#plfa_plfa-part3-Compositional-15180" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-15192" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-15194" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-15196" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-15198" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-15199" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-15203" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15205" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15207" href="../Compositional/#plfa_plfa-part3-Compositional-15183" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-15209" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15211" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15213" href="../Compositional/#plfa_plfa-part3-Compositional-15185" class="Bound">N′</a>
    <a id="plfa_plfa-part3-Compositional-15220" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Compositional-15240" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15242" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15244" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15245" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15247" href="../Compositional/#plfa_plfa-part3-Compositional-15183" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15248" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15250" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15252" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15254" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15255" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15257" href="../Compositional/#plfa_plfa-part3-Compositional-15185" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15259" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-15261" href="../Compositional/#plfa_plfa-part3-Compositional-15167" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-15270" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15271" href="../Compositional/#plfa_plfa-part3-Compositional-15271" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15272" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15274" href="../Compositional/#plfa_plfa-part3-Compositional-15274" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15275" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15277" href="../Compositional/#plfa_plfa-part3-Compositional-15277" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15279" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15281" href="../Compositional/#plfa_plfa-part3-Compositional-15281" class="Bound">N≃N′</a> <a id="plfa_plfa-part3-Compositional-15286" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15290" href="../Denotational/#plfa_plfa-part3-Denotational-23486" class="Function Operator">start</a>
    <a id="plfa_plfa-part3-Compositional-15300" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15302" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15303" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15305" href="../Compositional/#plfa_plfa-part3-Compositional-15274" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15306" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15310" href="../Denotational/#plfa_plfa-part3-Denotational-23577" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-15313" href="../Compositional/#plfa_plfa-part3-Compositional-5309" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-15323" href="../Denotational/#plfa_plfa-part3-Denotational-23577" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-15329" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-15331" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15332" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15334" href="../Compositional/#plfa_plfa-part3-Compositional-15274" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15335" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15339" href="../Denotational/#plfa_plfa-part3-Denotational-23577" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-15342" href="../Compositional/#plfa_plfa-part3-Compositional-14383" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-15349" href="../Compositional/#plfa_plfa-part3-Compositional-15281" class="Bound">N≃N′</a> <a id="plfa_plfa-part3-Compositional-15354" href="../Denotational/#plfa_plfa-part3-Denotational-23577" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-15360" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-15362" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15363" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15365" href="../Compositional/#plfa_plfa-part3-Compositional-15277" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15367" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15371" href="../Denotational/#plfa_plfa-part3-Denotational-23577" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-15374" href="../Denotational/#plfa_plfa-part3-Denotational-22726" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-15380" href="../Compositional/#plfa_plfa-part3-Compositional-5309" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-15390" href="../Denotational/#plfa_plfa-part3-Denotational-23577" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-15396" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15398" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15399" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15401" href="../Compositional/#plfa_plfa-part3-Compositional-15277" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15403" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15407" href="../Denotational/#plfa_plfa-part3-Denotational-23824" class="Function Operator">☐</a>
</pre><p>接下来我们证明指称相等对于应用也满足合同性：<code>ℰ L ≃ ℰ L′</code> 和 <code>ℰ M ≃ ℰ M′</code> 蕴含 <code>ℰ (L · M) ≃ ℰ (L′ · M′)</code>。方程 <code>app-equiv</code> 将其归约为 <code>●</code> 运算符是否满足合同性的问题。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-●-cong"></a><a id="plfa_plfa-part3-Compositional-15793" href="../Compositional/#plfa_plfa-part3-Compositional-15793" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-15800" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15802" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-15804" href="../Compositional/#plfa_plfa-part3-Compositional-15804" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15805" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15807" href="../Compositional/#plfa_plfa-part3-Compositional-15807" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-15810" href="../Compositional/#plfa_plfa-part3-Compositional-15810" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-15814" href="../Compositional/#plfa_plfa-part3-Compositional-15814" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-15817" href="../Compositional/#plfa_plfa-part3-Compositional-15817" class="Bound">D₂′</a> <a id="plfa_plfa-part3-Compositional-15821" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15823" href="../Denotational/#plfa_plfa-part3-Denotational-21933" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-15834" href="../Compositional/#plfa_plfa-part3-Compositional-15804" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15835" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-15839" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15841" href="../Compositional/#plfa_plfa-part3-Compositional-15807" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-15844" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15846" href="../Compositional/#plfa_plfa-part3-Compositional-15810" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-15850" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15852" href="../Compositional/#plfa_plfa-part3-Compositional-15814" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-15855" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15857" href="../Compositional/#plfa_plfa-part3-Compositional-15817" class="Bound">D₂′</a>
  <a id="plfa_plfa-part3-Compositional-15863" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15865" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15866" href="../Compositional/#plfa_plfa-part3-Compositional-15807" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-15869" href="../Compositional/#plfa_plfa-part3-Compositional-6984" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-15871" href="../Compositional/#plfa_plfa-part3-Compositional-15814" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-15873" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15875" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15877" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15878" href="../Compositional/#plfa_plfa-part3-Compositional-15810" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-15882" href="../Compositional/#plfa_plfa-part3-Compositional-6984" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-15884" href="../Compositional/#plfa_plfa-part3-Compositional-15817" class="Bound">D₂′</a><a id="plfa_plfa-part3-Compositional-15887" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-15889" href="../Compositional/#plfa_plfa-part3-Compositional-15793" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-15896" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15897" href="../Compositional/#plfa_plfa-part3-Compositional-15897" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15898" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15900" href="../Compositional/#plfa_plfa-part3-Compositional-15900" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-15903" href="../Compositional/#plfa_plfa-part3-Compositional-15903" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-15906" href="../Compositional/#plfa_plfa-part3-Compositional-15906" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-15908" href="../Compositional/#plfa_plfa-part3-Compositional-15908" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-15910" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15912" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-15914" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15917" href="../Compositional/#plfa_plfa-part3-Compositional-15917" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15919" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15921" href="../Compositional/#plfa_plfa-part3-Compositional-16007" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-15924" href="../Compositional/#plfa_plfa-part3-Compositional-15917" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15926" href="../Compositional/#plfa_plfa-part3-Compositional-15900" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-15929" href="../Compositional/#plfa_plfa-part3-Compositional-15903" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-15931" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15933" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a>
                         <a id="plfa_plfa-part3-Compositional-15960" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15963" href="../Compositional/#plfa_plfa-part3-Compositional-15963" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15965" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15967" href="../Compositional/#plfa_plfa-part3-Compositional-16007" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-15970" href="../Compositional/#plfa_plfa-part3-Compositional-15963" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15972" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15973" href="../Denotational/#plfa_plfa-part3-Denotational-22726" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-15979" href="../Compositional/#plfa_plfa-part3-Compositional-15900" class="Bound">d1</a><a id="plfa_plfa-part3-Compositional-15981" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15983" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15984" href="../Denotational/#plfa_plfa-part3-Denotational-22726" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-15990" href="../Compositional/#plfa_plfa-part3-Compositional-15903" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-15992" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-15995" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Compositional-15999" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-16007" href="../Compositional/#plfa_plfa-part3-Compositional-16007" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-16010" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16012" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-16014" href="../Compositional/#plfa_plfa-part3-Compositional-16014" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16016" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16018" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-16022" href="../Compositional/#plfa_plfa-part3-Compositional-15897" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16023" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16025" href="../Compositional/#plfa_plfa-part3-Compositional-16025" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-16026" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16028" href="../Compositional/#plfa_plfa-part3-Compositional-16028" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-16031" href="../Compositional/#plfa_plfa-part3-Compositional-16031" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-16035" href="../Compositional/#plfa_plfa-part3-Compositional-16035" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-16038" href="../Compositional/#plfa_plfa-part3-Compositional-16038" class="Bound">D₂′</a> <a id="plfa_plfa-part3-Compositional-16042" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16044" href="../Denotational/#plfa_plfa-part3-Denotational-21933" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-16055" href="../Compositional/#plfa_plfa-part3-Compositional-15897" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16056" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Compositional-16062" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16064" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16065" href="../Compositional/#plfa_plfa-part3-Compositional-16028" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-16068" href="../Compositional/#plfa_plfa-part3-Compositional-6984" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16070" href="../Compositional/#plfa_plfa-part3-Compositional-16035" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-16072" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16074" href="../Compositional/#plfa_plfa-part3-Compositional-16014" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16076" href="../Compositional/#plfa_plfa-part3-Compositional-16025" class="Bound">v</a>  <a id="plfa_plfa-part3-Compositional-16079" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-16082" href="../Compositional/#plfa_plfa-part3-Compositional-16028" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-16085" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16087" href="../Compositional/#plfa_plfa-part3-Compositional-16031" class="Bound">D₁′</a>  <a id="plfa_plfa-part3-Compositional-16092" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-16095" href="../Compositional/#plfa_plfa-part3-Compositional-16035" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-16098" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16100" href="../Compositional/#plfa_plfa-part3-Compositional-16038" class="Bound">D₂′</a>
    <a id="plfa_plfa-part3-Compositional-16108" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16110" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16111" href="../Compositional/#plfa_plfa-part3-Compositional-16031" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-16115" href="../Compositional/#plfa_plfa-part3-Compositional-6984" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16117" href="../Compositional/#plfa_plfa-part3-Compositional-16038" class="Bound">D₂′</a><a id="plfa_plfa-part3-Compositional-16120" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16122" href="../Compositional/#plfa_plfa-part3-Compositional-16014" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16124" href="../Compositional/#plfa_plfa-part3-Compositional-16025" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-16128" href="../Compositional/#plfa_plfa-part3-Compositional-16007" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-16131" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16132" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-16137" href="../Compositional/#plfa_plfa-part3-Compositional-16137" class="Bound">v⊑⊥</a><a id="plfa_plfa-part3-Compositional-16140" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16142" href="../Compositional/#plfa_plfa-part3-Compositional-16142" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-16146" href="../Compositional/#plfa_plfa-part3-Compositional-16146" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-16150" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16152" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-16157" href="../Compositional/#plfa_plfa-part3-Compositional-16137" class="Bound">v⊑⊥</a>
  <a id="plfa_plfa-part3-Compositional-16163" href="../Compositional/#plfa_plfa-part3-Compositional-16007" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-16166" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16167" href="../Compositional/#plfa_plfa-part3-Compositional-16167" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-16168" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16170" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16171" href="../Compositional/#plfa_plfa-part3-Compositional-16171" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-16172" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16174" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16175" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-16180" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16182" href="../Compositional/#plfa_plfa-part3-Compositional-16182" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16184" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16186" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16188" href="../Compositional/#plfa_plfa-part3-Compositional-16188" class="Bound">Dv↦w</a> <a id="plfa_plfa-part3-Compositional-16193" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16195" href="../Compositional/#plfa_plfa-part3-Compositional-16195" class="Bound">Dv</a> <a id="plfa_plfa-part3-Compositional-16198" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-16200" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-16201" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16203" href="../Compositional/#plfa_plfa-part3-Compositional-16203" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-16207" href="../Compositional/#plfa_plfa-part3-Compositional-16207" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-16211" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Compositional-16217" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-16222" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16224" href="../Compositional/#plfa_plfa-part3-Compositional-16182" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16226" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16228" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16230" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#636" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-16236" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16237" href="../Compositional/#plfa_plfa-part3-Compositional-16203" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-16241" href="../Compositional/#plfa_plfa-part3-Compositional-16167" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16243" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16244" href="../Compositional/#plfa_plfa-part3-Compositional-16182" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16246" href="../Denotational/#plfa_plfa-part3-Denotational-4922" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-16248" href="../Compositional/#plfa_plfa-part3-Compositional-16171" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-16249" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-16252" href="../Compositional/#plfa_plfa-part3-Compositional-16188" class="Bound">Dv↦w</a> <a id="plfa_plfa-part3-Compositional-16257" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16259" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#636" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-16265" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16266" href="../Compositional/#plfa_plfa-part3-Compositional-16207" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-16270" href="../Compositional/#plfa_plfa-part3-Compositional-16167" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16272" href="../Compositional/#plfa_plfa-part3-Compositional-16182" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-16273" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16275" href="../Compositional/#plfa_plfa-part3-Compositional-16195" class="Bound">Dv</a> <a id="plfa_plfa-part3-Compositional-16278" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-16280" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a>
</pre><p>同样，「当且仅当」的两个方向需要通过一个引理来证明，而该引理则通过对 <code>(D₁ ● D₂) γ v</code> 进行情况分析来证明。</p><p>根据 <code>●</code> 的合同性，我们可以直接通过等式推理证明应用也满足合同性。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-app-cong"></a><a id="plfa_plfa-part3-Compositional-16649" href="../Compositional/#plfa_plfa-part3-Compositional-16649" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-16658" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16660" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-16662" href="../Compositional/#plfa_plfa-part3-Compositional-16662" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16663" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16665" href="../Compositional/#plfa_plfa-part3-Compositional-16665" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16667" href="../Compositional/#plfa_plfa-part3-Compositional-16667" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16670" href="../Compositional/#plfa_plfa-part3-Compositional-16670" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16672" href="../Compositional/#plfa_plfa-part3-Compositional-16672" class="Bound">M′</a> <a id="plfa_plfa-part3-Compositional-16675" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16677" href="../Compositional/#plfa_plfa-part3-Compositional-16662" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-16679" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-16681" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-16682" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-16686" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16688" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16690" href="../Compositional/#plfa_plfa-part3-Compositional-16665" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16692" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16694" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16696" href="../Compositional/#plfa_plfa-part3-Compositional-16667" class="Bound">L′</a>
  <a id="plfa_plfa-part3-Compositional-16701" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16703" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16705" href="../Compositional/#plfa_plfa-part3-Compositional-16670" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16707" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16709" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16711" href="../Compositional/#plfa_plfa-part3-Compositional-16672" class="Bound">M′</a>
    <a id="plfa_plfa-part3-Compositional-16718" class="Comment">-------------------------</a>
  <a id="plfa_plfa-part3-Compositional-16746" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16748" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16750" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16751" href="../Compositional/#plfa_plfa-part3-Compositional-16665" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16753" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16755" href="../Compositional/#plfa_plfa-part3-Compositional-16670" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16756" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16758" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16760" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16762" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16763" href="../Compositional/#plfa_plfa-part3-Compositional-16667" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16766" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16768" href="../Compositional/#plfa_plfa-part3-Compositional-16672" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-16770" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-16772" href="../Compositional/#plfa_plfa-part3-Compositional-16649" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-16781" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16782" href="../Compositional/#plfa_plfa-part3-Compositional-16782" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16783" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16785" href="../Compositional/#plfa_plfa-part3-Compositional-16785" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-16786" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16788" href="../Compositional/#plfa_plfa-part3-Compositional-16788" class="Bound">L′</a><a id="plfa_plfa-part3-Compositional-16790" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16792" href="../Compositional/#plfa_plfa-part3-Compositional-16792" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16793" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16795" href="../Compositional/#plfa_plfa-part3-Compositional-16795" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-16797" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16799" href="../Compositional/#plfa_plfa-part3-Compositional-16799" class="Bound">L≅L′</a> <a id="plfa_plfa-part3-Compositional-16804" href="../Compositional/#plfa_plfa-part3-Compositional-16804" class="Bound">M≅M′</a> <a id="plfa_plfa-part3-Compositional-16809" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-16813" href="../Denotational/#plfa_plfa-part3-Denotational-23486" class="Function Operator">start</a>
    <a id="plfa_plfa-part3-Compositional-16823" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16825" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16826" href="../Compositional/#plfa_plfa-part3-Compositional-16785" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16828" href="../Untyped/#plfa_plfa-part2-Untyped-5514" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16830" href="../Compositional/#plfa_plfa-part3-Compositional-16792" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16831" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16835" href="../Denotational/#plfa_plfa-part3-Denotational-23577" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16838" href="../Compositional/#plfa_plfa-part3-Compositional-12567" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-16848" href="../Denotational/#plfa_plfa-part3-Denotational-23577" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16854" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16856" href="../Compositional/#plfa_plfa-part3-Compositional-16785" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16858" href="../Compositional/#plfa_plfa-part3-Compositional-6984" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16860" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16862" href="../Compositional/#plfa_plfa-part3-Compositional-16792" class="Bound">M</a>
  <a id="plfa_plfa-part3-Compositional-16866" href="../Denotational/#plfa_plfa-part3-Denotational-23577" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16869" href="../Compositional/#plfa_plfa-part3-Compositional-15793" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-16876" href="../Compositional/#plfa_plfa-part3-Compositional-16799" class="Bound">L≅L′</a> <a id="plfa_plfa-part3-Compositional-16881" href="../Compositional/#plfa_plfa-part3-Compositional-16804" class="Bound">M≅M′</a> <a id="plfa_plfa-part3-Compositional-16886" href="../Denotational/#plfa_plfa-part3-Denotational-23577" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16892" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16894" href="../Compositional/#plfa_plfa-part3-Compositional-16788" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16897" href="../Compositional/#plfa_plfa-part3-Compositional-6984" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16899" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16901" href="../Compositional/#plfa_plfa-part3-Compositional-16795" class="Bound">M′</a>
  <a id="plfa_plfa-part3-Compositional-16906" href="../Denotational/#plfa_plfa-part3-Denotational-23577" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16909" href="../Denotational/#plfa_plfa-part3-Denotational-22726" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-16915" href="../Compositional/#plfa_plfa-part3-Compositional-12567" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-16925" href="../Denotational/#plfa_plfa-part3-Denotational-23577" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16931" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16933" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16934" href="../Compositional/#plfa_plfa-part3-Compositional-16788" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16937" href="../Untyped/#plfa_plfa-part2-Untyped-5514" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16939" href="../Compositional/#plfa_plfa-part3-Compositional-16795" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-16941" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16945" href="../Denotational/#plfa_plfa-part3-Denotational-23824" class="Function Operator">☐</a>
</pre><h2 id="可组合性">可组合性</h2><p><strong>可组合性（Compositionality Property）</strong>说明了在同一语境下， 两个指称相等的项会产生两个指称相等的程序。为准确起见，我们定义了 「语境」和「在语境下」的含义。</p><p><strong>语境（Context）</strong>是一个带洞的程序。以下数据定义 <code>Ctx</code> 将这个概念表示了出来。 我们使用两个变量语境来索引 <code>Ctx</code> 数据类型：一个表示洞，另一个表示填洞所产生的项。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-17944" class="Keyword">data</a> <a id="plfa_plfa-part3-Compositional-Ctx"></a><a id="plfa_plfa-part3-Compositional-17949" href="../Compositional/#plfa_plfa-part3-Compositional-17949" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-17953" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-17955" href="../Untyped/#plfa_plfa-part2-Untyped-3798" class="Datatype">Context</a> <a id="plfa_plfa-part3-Compositional-17963" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-17965" href="../Untyped/#plfa_plfa-part2-Untyped-3798" class="Datatype">Context</a> <a id="plfa_plfa-part3-Compositional-17973" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-17975" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Primitive.html#388" class="Primitive">Set</a> <a id="plfa_plfa-part3-Compositional-17979" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-hole"></a><a id="plfa_plfa-part3-Compositional-17987" href="../Compositional/#plfa_plfa-part3-Compositional-17987" class="InductiveConstructor">ctx-hole</a> <a id="plfa_plfa-part3-Compositional-17996" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-17998" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-18000" href="../Compositional/#plfa_plfa-part3-Compositional-18000" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-18001" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-18003" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18005" href="../Compositional/#plfa_plfa-part3-Compositional-17949" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18009" href="../Compositional/#plfa_plfa-part3-Compositional-18000" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18011" href="../Compositional/#plfa_plfa-part3-Compositional-18000" class="Bound">Γ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-lam"></a><a id="plfa_plfa-part3-Compositional-18015" href="../Compositional/#plfa_plfa-part3-Compositional-18015" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-18023" class="Symbol">:</a>  <a id="plfa_plfa-part3-Compositional-18026" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-18028" href="../Compositional/#plfa_plfa-part3-Compositional-18028" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18030" href="../Compositional/#plfa_plfa-part3-Compositional-18030" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-18031" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-18033" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18035" href="../Compositional/#plfa_plfa-part3-Compositional-17949" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18039" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-18040" href="../Compositional/#plfa_plfa-part3-Compositional-18028" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18042" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-18044" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-18045" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-18047" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-18048" href="../Compositional/#plfa_plfa-part3-Compositional-18030" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18050" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-18052" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-18053" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-18055" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18057" href="../Compositional/#plfa_plfa-part3-Compositional-17949" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18061" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-18062" href="../Compositional/#plfa_plfa-part3-Compositional-18028" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18064" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-18066" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-18067" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-18069" href="../Compositional/#plfa_plfa-part3-Compositional-18030" class="Bound">Δ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-app-L"></a><a id="plfa_plfa-part3-Compositional-18073" href="../Compositional/#plfa_plfa-part3-Compositional-18073" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-18083" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-18085" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-18087" href="../Compositional/#plfa_plfa-part3-Compositional-18087" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18089" href="../Compositional/#plfa_plfa-part3-Compositional-18089" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-18090" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-18092" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18094" href="../Compositional/#plfa_plfa-part3-Compositional-17949" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18098" href="../Compositional/#plfa_plfa-part3-Compositional-18087" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18100" href="../Compositional/#plfa_plfa-part3-Compositional-18089" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18102" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18104" href="../Compositional/#plfa_plfa-part3-Compositional-18089" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18106" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-18108" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-18110" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18112" href="../Compositional/#plfa_plfa-part3-Compositional-17949" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18116" href="../Compositional/#plfa_plfa-part3-Compositional-18087" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18118" href="../Compositional/#plfa_plfa-part3-Compositional-18089" class="Bound">Δ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-app-R"></a><a id="plfa_plfa-part3-Compositional-18122" href="../Compositional/#plfa_plfa-part3-Compositional-18122" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-18132" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-18134" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-18136" href="../Compositional/#plfa_plfa-part3-Compositional-18136" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18138" href="../Compositional/#plfa_plfa-part3-Compositional-18138" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-18139" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-18141" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18143" href="../Compositional/#plfa_plfa-part3-Compositional-18138" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18145" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-18147" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-18149" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18151" href="../Compositional/#plfa_plfa-part3-Compositional-17949" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18155" href="../Compositional/#plfa_plfa-part3-Compositional-18136" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18157" href="../Compositional/#plfa_plfa-part3-Compositional-18138" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18159" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18161" href="../Compositional/#plfa_plfa-part3-Compositional-17949" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18165" href="../Compositional/#plfa_plfa-part3-Compositional-18136" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18167" href="../Compositional/#plfa_plfa-part3-Compositional-18138" class="Bound">Δ</a>
</pre><ul><li>构造子 <code>ctx-hole</code> 表示洞，且在此情况中洞的变量语境 与填洞所产生的项的变量语境相同。</li></ul><ul><li>构造子 <code>ctx-lam</code> 接受一个 <code>Ctx</code> 并在顶部添加 λ-抽象来产生一个更大的 <code>Ctx</code>。 洞的变量语境保持不变，而我们从结果项的语境中删除一个变量，因为它被此 λ-抽象约束。</li></ul><ul><li>应用有两种构造，<code>ctx-app-L</code> 和 <code>ctx-app-R</code>。<code>ctx-app-L</code> 对应洞位于左侧项（运算符）内的情况，<code>ctx-app-R</code> 对应洞位于右侧项（运算数）内的情况。</li></ul><p>将项插入到某个语境下的操作由以下 <code>plug</code> 函数定义，它是通过对语境进行递归来定义的：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-plug"></a><a id="plfa_plfa-part3-Compositional-19378" href="../Compositional/#plfa_plfa-part3-Compositional-19378" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19383" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19385" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-19387" href="../Compositional/#plfa_plfa-part3-Compositional-19387" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-19388" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-19390" href="../Compositional/#plfa_plfa-part3-Compositional-19390" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-19391" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-19393" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19395" href="../Compositional/#plfa_plfa-part3-Compositional-17949" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-19399" href="../Compositional/#plfa_plfa-part3-Compositional-19387" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19401" href="../Compositional/#plfa_plfa-part3-Compositional-19390" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-19403" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19405" href="../Compositional/#plfa_plfa-part3-Compositional-19387" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19407" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-19409" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-19411" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19413" href="../Compositional/#plfa_plfa-part3-Compositional-19390" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-19415" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-19417" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a>
<a id="plfa_plfa-part3-Compositional-19419" href="../Compositional/#plfa_plfa-part3-Compositional-19378" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19424" href="../Compositional/#plfa_plfa-part3-Compositional-17987" class="InductiveConstructor">ctx-hole</a> <a id="plfa_plfa-part3-Compositional-19433" href="../Compositional/#plfa_plfa-part3-Compositional-19433" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19435" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19437" href="../Compositional/#plfa_plfa-part3-Compositional-19433" class="Bound">M</a>
<a id="plfa_plfa-part3-Compositional-19439" href="../Compositional/#plfa_plfa-part3-Compositional-19378" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19444" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19445" href="../Compositional/#plfa_plfa-part3-Compositional-18015" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-19453" href="../Compositional/#plfa_plfa-part3-Compositional-19453" class="Bound">C</a><a id="plfa_plfa-part3-Compositional-19454" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19456" href="../Compositional/#plfa_plfa-part3-Compositional-19456" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-19458" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19460" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-19462" href="../Compositional/#plfa_plfa-part3-Compositional-19378" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19467" href="../Compositional/#plfa_plfa-part3-Compositional-19453" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19469" href="../Compositional/#plfa_plfa-part3-Compositional-19456" class="Bound">N</a>
<a id="plfa_plfa-part3-Compositional-19471" href="../Compositional/#plfa_plfa-part3-Compositional-19378" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19476" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19477" href="../Compositional/#plfa_plfa-part3-Compositional-18073" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-19487" href="../Compositional/#plfa_plfa-part3-Compositional-19487" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19489" href="../Compositional/#plfa_plfa-part3-Compositional-19489" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-19490" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19492" href="../Compositional/#plfa_plfa-part3-Compositional-19492" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-19494" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19496" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19497" href="../Compositional/#plfa_plfa-part3-Compositional-19378" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19502" href="../Compositional/#plfa_plfa-part3-Compositional-19487" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19504" href="../Compositional/#plfa_plfa-part3-Compositional-19492" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-19505" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19507" href="../Untyped/#plfa_plfa-part2-Untyped-5514" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-19509" href="../Compositional/#plfa_plfa-part3-Compositional-19489" class="Bound">N</a>
<a id="plfa_plfa-part3-Compositional-19511" href="../Compositional/#plfa_plfa-part3-Compositional-19378" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19516" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19517" href="../Compositional/#plfa_plfa-part3-Compositional-18122" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-19527" href="../Compositional/#plfa_plfa-part3-Compositional-19527" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-19529" href="../Compositional/#plfa_plfa-part3-Compositional-19529" class="Bound">C</a><a id="plfa_plfa-part3-Compositional-19530" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19532" href="../Compositional/#plfa_plfa-part3-Compositional-19532" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19534" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19536" href="../Compositional/#plfa_plfa-part3-Compositional-19527" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-19538" href="../Untyped/#plfa_plfa-part2-Untyped-5514" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-19540" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19541" href="../Compositional/#plfa_plfa-part3-Compositional-19378" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19546" href="../Compositional/#plfa_plfa-part3-Compositional-19529" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19548" href="../Compositional/#plfa_plfa-part3-Compositional-19532" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-19549" class="Symbol">)</a>
</pre><p>我们接下来陈述并证明组合性原则：给定两个项 <code>M</code> 和 <code>N</code>，若它们的指称相等， 那么将它们插入到任意语境 <code>C</code> 中都会产生两个指称相等的程序：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-compositionality"></a><a id="plfa_plfa-part3-Compositional-19876" href="../Compositional/#plfa_plfa-part3-Compositional-19876" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-19893" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19895" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-19897" href="../Compositional/#plfa_plfa-part3-Compositional-19897" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19899" href="../Compositional/#plfa_plfa-part3-Compositional-19899" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-19900" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-19902" href="../Compositional/#plfa_plfa-part3-Compositional-19902" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19904" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19906" href="../Compositional/#plfa_plfa-part3-Compositional-17949" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-19910" href="../Compositional/#plfa_plfa-part3-Compositional-19897" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19912" href="../Compositional/#plfa_plfa-part3-Compositional-19899" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-19913" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-19915" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-19916" href="../Compositional/#plfa_plfa-part3-Compositional-19916" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19918" href="../Compositional/#plfa_plfa-part3-Compositional-19918" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-19920" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19922" href="../Compositional/#plfa_plfa-part3-Compositional-19897" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19924" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-19926" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-19927" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-19931" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19933" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19935" href="../Compositional/#plfa_plfa-part3-Compositional-19916" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19937" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-19939" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19941" href="../Compositional/#plfa_plfa-part3-Compositional-19918" class="Bound">N</a>
    <a id="plfa_plfa-part3-Compositional-19947" class="Comment">---------------------------</a>
  <a id="plfa_plfa-part3-Compositional-19977" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19979" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19981" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19982" href="../Compositional/#plfa_plfa-part3-Compositional-19378" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19987" href="../Compositional/#plfa_plfa-part3-Compositional-19902" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19989" href="../Compositional/#plfa_plfa-part3-Compositional-19916" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-19990" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19992" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-19994" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19996" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19997" href="../Compositional/#plfa_plfa-part3-Compositional-19378" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-20002" href="../Compositional/#plfa_plfa-part3-Compositional-19902" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-20004" href="../Compositional/#plfa_plfa-part3-Compositional-19918" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-20005" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-20007" href="../Compositional/#plfa_plfa-part3-Compositional-19876" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20024" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20025" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20027" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20029" href="../Compositional/#plfa_plfa-part3-Compositional-17987" class="InductiveConstructor">ctx-hole</a><a id="plfa_plfa-part3-Compositional-20037" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20039" href="../Compositional/#plfa_plfa-part3-Compositional-20039" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-20043" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-20047" href="../Compositional/#plfa_plfa-part3-Compositional-20039" class="Bound">M≃N</a>
<a id="plfa_plfa-part3-Compositional-20051" href="../Compositional/#plfa_plfa-part3-Compositional-19876" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20068" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20069" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20071" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20073" href="../Compositional/#plfa_plfa-part3-Compositional-18015" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-20081" href="../Compositional/#plfa_plfa-part3-Compositional-20081" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20083" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20085" href="../Compositional/#plfa_plfa-part3-Compositional-20085" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-20089" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-20093" href="../Compositional/#plfa_plfa-part3-Compositional-15167" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-20102" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-20103" href="../Compositional/#plfa_plfa-part3-Compositional-19876" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20120" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20121" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20123" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20125" href="../Compositional/#plfa_plfa-part3-Compositional-20081" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20127" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20129" href="../Compositional/#plfa_plfa-part3-Compositional-20085" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-20132" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-20134" href="../Compositional/#plfa_plfa-part3-Compositional-19876" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20151" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20152" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20154" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20156" href="../Compositional/#plfa_plfa-part3-Compositional-18073" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-20166" href="../Compositional/#plfa_plfa-part3-Compositional-20166" class="Bound">C′</a> <a id="plfa_plfa-part3-Compositional-20169" href="../Compositional/#plfa_plfa-part3-Compositional-20169" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-20170" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20172" href="../Compositional/#plfa_plfa-part3-Compositional-20172" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-20176" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-20180" href="../Compositional/#plfa_plfa-part3-Compositional-16649" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-20189" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-20190" href="../Compositional/#plfa_plfa-part3-Compositional-19876" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20207" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20208" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20210" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20212" href="../Compositional/#plfa_plfa-part3-Compositional-20166" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20214" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20216" href="../Compositional/#plfa_plfa-part3-Compositional-20172" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-20219" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20221" class="Symbol">λ</a> <a id="plfa_plfa-part3-Compositional-20223" href="../Compositional/#plfa_plfa-part3-Compositional-20223" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-20225" href="../Compositional/#plfa_plfa-part3-Compositional-20225" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-20227" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20229" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-20231" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20234" href="../Compositional/#plfa_plfa-part3-Compositional-20234" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20236" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20238" href="../Compositional/#plfa_plfa-part3-Compositional-20234" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20239" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20241" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-20243" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20246" href="../Compositional/#plfa_plfa-part3-Compositional-20246" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20248" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20250" href="../Compositional/#plfa_plfa-part3-Compositional-20246" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20251" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20253" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-20255" href="../Compositional/#plfa_plfa-part3-Compositional-19876" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20272" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20273" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20275" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20277" href="../Compositional/#plfa_plfa-part3-Compositional-18122" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-20287" href="../Compositional/#plfa_plfa-part3-Compositional-20287" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-20289" href="../Compositional/#plfa_plfa-part3-Compositional-20289" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20291" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20293" href="../Compositional/#plfa_plfa-part3-Compositional-20293" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-20297" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-20301" href="../Compositional/#plfa_plfa-part3-Compositional-16649" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-20310" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20313" href="../Compositional/#plfa_plfa-part3-Compositional-20313" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-20315" href="../Compositional/#plfa_plfa-part3-Compositional-20315" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-20317" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20319" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-20321" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20324" href="../Compositional/#plfa_plfa-part3-Compositional-20324" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20326" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20328" href="../Compositional/#plfa_plfa-part3-Compositional-20324" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20329" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20331" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-20333" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20336" href="../Compositional/#plfa_plfa-part3-Compositional-20336" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20338" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20340" href="../Compositional/#plfa_plfa-part3-Compositional-20336" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20341" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20343" href="../Compositional/#plfa_plfa-part3-Compositional-859" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-20344" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20346" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-20347" href="../Compositional/#plfa_plfa-part3-Compositional-19876" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20364" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20365" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20367" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20369" href="../Compositional/#plfa_plfa-part3-Compositional-20289" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20371" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20373" href="../Compositional/#plfa_plfa-part3-Compositional-20293" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-20376" class="Symbol">)</a>
</pre><p>它可以通过直接对语境 <code>C</code> 进行归纳，用我们之前建立的合同性质 <code>lam-cong</code> 和 <code>app-cong</code> 来证明。</p><h2 id="指称语义作为函数来定义">指称语义作为函数来定义</h2><p>建立了 <code>var-equiv</code>、<code>lam-equiv</code> 和 <code>app-equiv</code> 三个方程后， 我们就能将指称语义定义为一个在输入项 <code>M</code> 上递归的函数。其实， 我们可以定义以下函数 <code>⟦ M ⟧</code>，利用辅助的柯里化函数 <code>ℱ</code>， 并分别在 λ-抽象和应用的情况下应用 <code>●</code> 函数来将项映射到指称。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-⟦_⟧"></a><a id="plfa_plfa-part3-Compositional-21229" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟦_⟧</a> <a id="plfa_plfa-part3-Compositional-21233" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21235" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-21237" href="../Compositional/#plfa_plfa-part3-Compositional-21237" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21238" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21240" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-21242" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21243" href="../Compositional/#plfa_plfa-part3-Compositional-21243" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21245" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21247" href="../Compositional/#plfa_plfa-part3-Compositional-21237" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-21249" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-21251" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-21252" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-21254" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-21256" href="../Denotational/#plfa_plfa-part3-Denotational-21933" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-21267" href="../Compositional/#plfa_plfa-part3-Compositional-21237" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-21269" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21271" href="../Untyped/#plfa_plfa-part2-Untyped-5402" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-21273" href="../Compositional/#plfa_plfa-part3-Compositional-21273" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-21275" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21277" href="../Compositional/#plfa_plfa-part3-Compositional-21277" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-21279" href="../Compositional/#plfa_plfa-part3-Compositional-21279" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-21281" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21283" href="../Compositional/#plfa_plfa-part3-Compositional-21279" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-21285" href="../Denotational/#plfa_plfa-part3-Denotational-5357" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-21287" href="../Compositional/#plfa_plfa-part3-Compositional-21277" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-21289" href="../Compositional/#plfa_plfa-part3-Compositional-21273" class="Bound">x</a>
<a id="plfa_plfa-part3-Compositional-21291" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21293" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21295" href="../Compositional/#plfa_plfa-part3-Compositional-21295" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21297" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21299" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21301" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-21303" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21305" href="../Compositional/#plfa_plfa-part3-Compositional-21295" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21307" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟧</a>
<a id="plfa_plfa-part3-Compositional-21309" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21311" href="../Compositional/#plfa_plfa-part3-Compositional-21311" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21313" href="../Untyped/#plfa_plfa-part2-Untyped-5514" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21315" href="../Compositional/#plfa_plfa-part3-Compositional-21315" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21317" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21319" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21321" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21323" href="../Compositional/#plfa_plfa-part3-Compositional-21311" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21325" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21327" href="../Compositional/#plfa_plfa-part3-Compositional-6984" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-21329" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21331" href="../Compositional/#plfa_plfa-part3-Compositional-21315" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21333" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟧</a>
</pre><p><code>ℰ M</code> 和 <code>⟦ M ⟧</code> 指称相等的证明可通过 <code>var-equiv</code>、<code>lam-equiv</code> 和 <code>app-equiv</code> 三个方程以及 <code>ℱ</code> 和 <code>●</code> 的合同性引理直接归纳得出。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰ≃⟦⟧"></a><a id="plfa_plfa-part3-Compositional-21664" href="../Compositional/#plfa_plfa-part3-Compositional-21664" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21669" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21671" class="Symbol">∀</a> <a id="plfa_plfa-part3-Compositional-21673" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21674" href="../Compositional/#plfa_plfa-part3-Compositional-21674" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21675" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21677" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21678" href="../Compositional/#plfa_plfa-part3-Compositional-21678" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21680" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21682" href="../Compositional/#plfa_plfa-part3-Compositional-21674" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-21684" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-21686" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-21687" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21689" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-21691" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21693" href="../Compositional/#plfa_plfa-part3-Compositional-21678" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21695" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-21697" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21699" href="../Compositional/#plfa_plfa-part3-Compositional-21678" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21701" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟧</a>
<a id="plfa_plfa-part3-Compositional-21703" href="../Compositional/#plfa_plfa-part3-Compositional-21664" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21708" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21709" href="../Compositional/#plfa_plfa-part3-Compositional-21709" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21710" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21712" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21713" href="../Untyped/#plfa_plfa-part2-Untyped-5402" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-21715" href="../Compositional/#plfa_plfa-part3-Compositional-21715" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-21716" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21718" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21720" href="../Compositional/#plfa_plfa-part3-Compositional-13246" class="Function">var-equiv</a>
<a id="plfa_plfa-part3-Compositional-21730" href="../Compositional/#plfa_plfa-part3-Compositional-21664" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21735" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21736" href="../Compositional/#plfa_plfa-part3-Compositional-21736" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21737" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21739" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21740" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21742" href="../Compositional/#plfa_plfa-part3-Compositional-21742" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21743" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21745" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-21749" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-21753" href="../Compositional/#plfa_plfa-part3-Compositional-21753" class="Bound">ih</a> <a id="plfa_plfa-part3-Compositional-21756" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21758" href="../Compositional/#plfa_plfa-part3-Compositional-21664" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21763" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21764" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21766" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21768" href="../Compositional/#plfa_plfa-part3-Compositional-21742" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21769" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21771" class="Keyword">in</a>
    <a id="plfa_plfa-part3-Compositional-21778" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21780" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21781" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21783" href="../Compositional/#plfa_plfa-part3-Compositional-21742" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21784" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-21788" href="../Denotational/#plfa_plfa-part3-Denotational-23577" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21791" href="../Compositional/#plfa_plfa-part3-Compositional-5309" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-21801" href="../Denotational/#plfa_plfa-part3-Denotational-23577" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-21807" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-21809" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21810" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21812" href="../Compositional/#plfa_plfa-part3-Compositional-21742" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21813" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-21817" href="../Denotational/#plfa_plfa-part3-Denotational-23577" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21820" href="../Compositional/#plfa_plfa-part3-Compositional-14383" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-21827" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21828" href="../Compositional/#plfa_plfa-part3-Compositional-21664" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21833" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21834" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21836" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21838" href="../Compositional/#plfa_plfa-part3-Compositional-21742" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21839" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-21842" href="../Denotational/#plfa_plfa-part3-Denotational-23577" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-21848" href="../Compositional/#plfa_plfa-part3-Compositional-2298" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-21850" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21852" href="../Compositional/#plfa_plfa-part3-Compositional-21742" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21854" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-21858" href="../Denotational/#plfa_plfa-part3-Denotational-23717" class="Function Operator">≃⟨⟩</a>
    <a id="plfa_plfa-part3-Compositional-21866" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21868" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21870" href="../Compositional/#plfa_plfa-part3-Compositional-21742" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21872" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-21876" href="../Denotational/#plfa_plfa-part3-Denotational-23824" class="Function Operator">☐</a>
<a id="plfa_plfa-part3-Compositional-21878" href="../Compositional/#plfa_plfa-part3-Compositional-21664" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21883" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21884" href="../Compositional/#plfa_plfa-part3-Compositional-21884" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21885" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21887" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21888" href="../Compositional/#plfa_plfa-part3-Compositional-21888" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21890" href="../Untyped/#plfa_plfa-part2-Untyped-5514" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21892" href="../Compositional/#plfa_plfa-part3-Compositional-21892" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-21893" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21895" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Compositional-21900" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21902" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21903" href="../Compositional/#plfa_plfa-part3-Compositional-21888" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21905" href="../Untyped/#plfa_plfa-part2-Untyped-5514" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21907" href="../Compositional/#plfa_plfa-part3-Compositional-21892" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-21908" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-21912" href="../Denotational/#plfa_plfa-part3-Denotational-23577" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21915" href="../Compositional/#plfa_plfa-part3-Compositional-12567" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-21925" href="../Denotational/#plfa_plfa-part3-Denotational-23577" class="Function Operator">⟩</a>
   <a id="plfa_plfa-part3-Compositional-21930" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21932" href="../Compositional/#plfa_plfa-part3-Compositional-21888" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21934" href="../Compositional/#plfa_plfa-part3-Compositional-6984" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-21936" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21938" href="../Compositional/#plfa_plfa-part3-Compositional-21892" class="Bound">M</a>
  <a id="plfa_plfa-part3-Compositional-21942" href="../Denotational/#plfa_plfa-part3-Denotational-23577" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21945" href="../Compositional/#plfa_plfa-part3-Compositional-15793" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-21952" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21953" href="../Compositional/#plfa_plfa-part3-Compositional-21664" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21958" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21959" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21961" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21963" href="../Compositional/#plfa_plfa-part3-Compositional-21888" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-21964" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-21967" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21968" href="../Compositional/#plfa_plfa-part3-Compositional-21664" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21973" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21974" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21976" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21978" href="../Compositional/#plfa_plfa-part3-Compositional-21892" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-21979" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-21982" href="../Denotational/#plfa_plfa-part3-Denotational-23577" class="Function Operator">⟩</a>
   <a id="plfa_plfa-part3-Compositional-21987" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21989" href="../Compositional/#plfa_plfa-part3-Compositional-21888" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21991" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21993" href="../Compositional/#plfa_plfa-part3-Compositional-6984" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-21995" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21997" href="../Compositional/#plfa_plfa-part3-Compositional-21892" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21999" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-22003" href="../Denotational/#plfa_plfa-part3-Denotational-23717" class="Function Operator">≃⟨⟩</a>
    <a id="plfa_plfa-part3-Compositional-22011" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-22013" href="../Compositional/#plfa_plfa-part3-Compositional-21888" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-22015" href="../Untyped/#plfa_plfa-part2-Untyped-5514" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-22017" href="../Compositional/#plfa_plfa-part3-Compositional-21892" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-22019" href="../Compositional/#plfa_plfa-part3-Compositional-21229" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-22023" href="../Denotational/#plfa_plfa-part3-Denotational-23824" class="Function Operator">☐</a>
</pre><h2 id="unicode">Unicode</h2><p>本章使用了以下 Unicode：</p><pre><code>ℱ  U+2131  SCRIPT CAPITAL F (\McF)
●  U+2131  BLACK CIRCLE (\cib)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Denotational/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Compositional.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Soundness/">下一章</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">编程语言基础：Agda 描述</h2>本章译者：OlingCat<div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>本书按照<a rel="license" href="https://creativecommons.org/licenses/by/4.0/">创作公用 署名 4.0 国际</a>许可协议授权</div></footer></body></html>