<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>编程语言基础：Agda 描述 – Compositional</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">编程语言基础：Agda 描述</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">主页</a> <a class="page-link" href="../Announcements/">公告</a> <a class="page-link" href="../GettingStarted/">使用说明</a> <a class="page-link" href="../Citing/">引用</a> <a class="page-link" href="https://plfa.github.io/">English</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Denotational/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Compositional.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Soundness/">下一章</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Compositional: 指称语义的可组合性</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part3-Compositional-116" class="Keyword">module</a> <a id="plfa_plfa-part3-Compositional-123" href="../Compositional/#" class="Module">plfa.part3.Compositional</a> <a id="plfa_plfa-part3-Compositional-148" class="Keyword">where</a>
</pre><h2 id="简介">简介</h2><p>本章我们会证明指称语义满足可组合性，即我们会填补以下等式中省略号的部分。</p><pre><code>ℰ (` x) ≃ ...
ℰ (ƛ M) ≃ ... ℰ M ...
ℰ (M · N) ≃ ... ℰ M ... ℰ N ...</code></pre><p>这些等式蕴含了指称语义也可以定义为一个递归函数。 我们会在本章的结尾给出它的定义，并证明它等价于 ℰ。</p><h2 id="导入">导入</h2><pre class="Agda"><a id="plfa_plfa-part3-Compositional-758" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-763" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-770" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html" class="Module">Data.Product</a> <a id="plfa_plfa-part3-Compositional-783" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-789" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-790" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">_×_</a><a id="plfa_plfa-part3-Compositional-793" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-795" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="plfa_plfa-part3-Compositional-796" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-798" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ-syntax</a><a id="plfa_plfa-part3-Compositional-806" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-808" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1369" class="Function">∃</a><a id="plfa_plfa-part3-Compositional-809" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-811" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1806" class="Function">∃-syntax</a><a id="plfa_plfa-part3-Compositional-819" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-821" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a><a id="plfa_plfa-part3-Compositional-826" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-828" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a><a id="plfa_plfa-part3-Compositional-833" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-837" class="Keyword">renaming</a> <a id="plfa_plfa-part3-Compositional-846" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-847" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part3-Compositional-851" class="Symbol">to</a> <a id="plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part3-Compositional-859" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-861" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-866" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-873" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.html" class="Module">Data.Sum</a> <a id="plfa_plfa-part3-Compositional-882" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-888" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-889" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#734" class="Datatype Operator">_⊎_</a><a id="plfa_plfa-part3-Compositional-892" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-894" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a><a id="plfa_plfa-part3-Compositional-898" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-900" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a><a id="plfa_plfa-part3-Compositional-904" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-906" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-911" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-918" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Unit.html" class="Module">Data.Unit</a> <a id="plfa_plfa-part3-Compositional-928" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-934" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-935" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#158" class="Record">⊤</a><a id="plfa_plfa-part3-Compositional-936" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-938" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a><a id="plfa_plfa-part3-Compositional-940" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-942" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-947" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-954" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
  <a id="plfa_plfa-part3-Compositional-975" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-981" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-982" href="../Untyped/#plfa_plfa-part2-Untyped-3848" class="Datatype">Context</a><a id="plfa_plfa-part3-Compositional-989" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-991" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part3-Compositional-994" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-996" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-997" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-999" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part3-Compositional-1002" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1004" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part3-Compositional-1007" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1009" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part3-Compositional-1011" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1013" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part3-Compositional-1015" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1017" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part3-Compositional-1020" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-1022" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-1027" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-1034" href="../Denotational/#" class="Module">plfa.part3.Denotational</a>
  <a id="plfa_plfa-part3-Compositional-1060" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-1066" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1067" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-1072" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1074" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">_↦_</a><a id="plfa_plfa-part3-Compositional-1077" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1079" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">_`,_</a><a id="plfa_plfa-part3-Compositional-1083" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1085" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">_⊔_</a><a id="plfa_plfa-part3-Compositional-1088" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1090" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-1091" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1093" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">_⊑_</a><a id="plfa_plfa-part3-Compositional-1096" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1098" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">_⊢_↓_</a><a id="plfa_plfa-part3-Compositional-1103" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1114" href="../Denotational/#plfa_plfa-part3-Denotational-5459" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-1119" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1121" href="../Denotational/#plfa_plfa-part3-Denotational-5785" class="InductiveConstructor">⊑-fun</a><a id="plfa_plfa-part3-Compositional-1126" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1128" href="../Denotational/#plfa_plfa-part3-Denotational-5484" class="InductiveConstructor">⊑-conj-L</a><a id="plfa_plfa-part3-Compositional-1136" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1138" href="../Denotational/#plfa_plfa-part3-Denotational-5568" class="InductiveConstructor">⊑-conj-R1</a><a id="plfa_plfa-part3-Compositional-1147" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1149" href="../Denotational/#plfa_plfa-part3-Denotational-5641" class="InductiveConstructor">⊑-conj-R2</a><a id="plfa_plfa-part3-Compositional-1158" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1169" href="../Denotational/#plfa_plfa-part3-Denotational-5888" class="InductiveConstructor">⊑-dist</a><a id="plfa_plfa-part3-Compositional-1175" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1177" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Compositional-1183" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1185" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a><a id="plfa_plfa-part3-Compositional-1192" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1194" href="../Denotational/#plfa_plfa-part3-Denotational-7600" class="Function">⊔↦⊔-dist</a><a id="plfa_plfa-part3-Compositional-1202" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1213" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Compositional-1216" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1218" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a><a id="plfa_plfa-part3-Compositional-1225" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1227" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Compositional-1233" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1235" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Compositional-1242" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1244" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a><a id="plfa_plfa-part3-Compositional-1251" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1253" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a><a id="plfa_plfa-part3-Compositional-1256" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1267" href="../Denotational/#plfa_plfa-part3-Denotational-32854" class="Function">up-env</a><a id="plfa_plfa-part3-Compositional-1273" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1275" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a><a id="plfa_plfa-part3-Compositional-1276" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1278" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">_≃_</a><a id="plfa_plfa-part3-Compositional-1281" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1283" href="../Denotational/#plfa_plfa-part3-Denotational-22793" class="Function">≃-sym</a><a id="plfa_plfa-part3-Compositional-1288" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1290" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a><a id="plfa_plfa-part3-Compositional-1300" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1302" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a><a id="plfa_plfa-part3-Compositional-1305" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-1307" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-1312" href="../Denotational/#plfa_plfa-part3-Denotational-23461" class="Module">plfa.part3.Denotational.≃-Reasoning</a>
</pre><h2 id="λ-抽象的等式">λ-抽象的等式</h2><p>考虑第一个等式</p><pre><code>ℰ (ƛ M) ≃ ... ℰ M ...</code></pre><p>我们需要定义一个函数，它将 <code>Denotation (Γ , ★)</code> 映射到 <code>Denotation Γ</code>， 我们将此函数命名为 <code>ℱ</code>。在应用到 λ-项时，它能够模拟语义中非递归的部分。 具体来说，我们需要考虑规则 <code>↦-intro</code>、<code>⊥-intro</code> 和 <code>⊔-intro</code>，因此 <code>ℱ</code> 有三个参数：子项 <code>M</code> 的指称 <code>D</code>、环境 <code>γ</code>，以及值 <code>v</code>。如果我们通过对值 <code>v</code> 进行递归来定义 <code>ℱ</code>，那么它正好匹配 <code>↦-intro</code>、<code>⊥-intro</code> 和 <code>⊔-intro</code> 这三条规则。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱ"></a><a id="plfa_plfa-part3-Compositional-2283" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2285" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-2287" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-2289" href="../Compositional/#plfa_plfa-part3-Compositional-2289" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-2290" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-2292" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2294" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-2305" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2306" href="../Compositional/#plfa_plfa-part3-Compositional-2289" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-2308" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-2310" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-2311" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2313" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2315" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-2326" href="../Compositional/#plfa_plfa-part3-Compositional-2289" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-2328" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2330" href="../Compositional/#plfa_plfa-part3-Compositional-2330" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2332" href="../Compositional/#plfa_plfa-part3-Compositional-2332" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2334" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2335" href="../Compositional/#plfa_plfa-part3-Compositional-2335" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-2337" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-2339" href="../Compositional/#plfa_plfa-part3-Compositional-2339" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-2340" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2342" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2344" href="../Compositional/#plfa_plfa-part3-Compositional-2330" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2346" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2347" href="../Compositional/#plfa_plfa-part3-Compositional-2332" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2349" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-2352" href="../Compositional/#plfa_plfa-part3-Compositional-2335" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-2353" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2355" href="../Compositional/#plfa_plfa-part3-Compositional-2339" class="Bound">w</a>
<a id="plfa_plfa-part3-Compositional-2357" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2359" href="../Compositional/#plfa_plfa-part3-Compositional-2359" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2361" href="../Compositional/#plfa_plfa-part3-Compositional-2361" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2363" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Compositional-2365" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2367" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#158" class="Record">⊤</a>
<a id="plfa_plfa-part3-Compositional-2369" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2371" href="../Compositional/#plfa_plfa-part3-Compositional-2371" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2373" href="../Compositional/#plfa_plfa-part3-Compositional-2373" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2375" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2376" href="../Compositional/#plfa_plfa-part3-Compositional-2376" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-2378" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-2380" href="../Compositional/#plfa_plfa-part3-Compositional-2380" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-2381" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2383" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2385" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2386" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2388" href="../Compositional/#plfa_plfa-part3-Compositional-2371" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2390" href="../Compositional/#plfa_plfa-part3-Compositional-2373" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2392" href="../Compositional/#plfa_plfa-part3-Compositional-2376" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-2393" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2395" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Compositional-2397" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2398" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2400" href="../Compositional/#plfa_plfa-part3-Compositional-2371" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2402" href="../Compositional/#plfa_plfa-part3-Compositional-2373" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2404" href="../Compositional/#plfa_plfa-part3-Compositional-2380" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-2405" class="Symbol">)</a>
</pre><p>如果你仔细观察，就会发现 <code>ℱ</code> 函数看起来像函数式程序员熟悉的 <code>curry</code> 化操作：它将一个以长度为 <code>n + 1</code> 的元组（即环境 <code>Γ , ★</code>）作为参数的函数， 转化为一个以长度为 <code>n</code> 的元组作为参数，并返回一个单参函数的函数。</p><p>我们希望通过 <code>ℱ</code> 函数证明</p><pre><code>ℰ (ƛ N) ≃ ℱ (ℰ N)</code></pre><p>当从一个更大的值 <code>v</code> 映射到一个更小的值 <code>u</code> 时，函数 <code>ℱ</code> 会保持成立。 它的证明就是在 <code>⊑-fun</code> 规则的情况中使用 <code>up-env</code> 引理，对 <code>u ⊑ v</code> 推导过程的直接归纳。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-sub-ℱ"></a><a id="plfa_plfa-part3-Compositional-3273" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3279" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3281" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-3283" href="../Compositional/#plfa_plfa-part3-Compositional-3283" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3284" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3286" href="../Compositional/#plfa_plfa-part3-Compositional-3286" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3288" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3290" href="../Compositional/#plfa_plfa-part3-Compositional-3283" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-3292" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3294" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-3296" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3298" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-3299" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3301" href="../Compositional/#plfa_plfa-part3-Compositional-3301" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3303" href="../Compositional/#plfa_plfa-part3-Compositional-3303" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-3305" href="../Compositional/#plfa_plfa-part3-Compositional-3305" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-3306" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-3310" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3312" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-3314" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3315" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-3317" href="../Compositional/#plfa_plfa-part3-Compositional-3286" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-3318" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3320" href="../Compositional/#plfa_plfa-part3-Compositional-3301" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3322" href="../Compositional/#plfa_plfa-part3-Compositional-3303" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-3326" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3328" href="../Compositional/#plfa_plfa-part3-Compositional-3305" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-3330" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-3332" href="../Compositional/#plfa_plfa-part3-Compositional-3303" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-3338" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-3353" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3355" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-3357" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3358" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-3360" href="../Compositional/#plfa_plfa-part3-Compositional-3286" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-3361" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3363" href="../Compositional/#plfa_plfa-part3-Compositional-3301" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3365" href="../Compositional/#plfa_plfa-part3-Compositional-3305" class="Bound">u</a>
<a id="plfa_plfa-part3-Compositional-3367" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3373" href="../Compositional/#plfa_plfa-part3-Compositional-3373" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3375" href="../Denotational/#plfa_plfa-part3-Denotational-5459" class="InductiveConstructor">⊑-bot</a> <a id="plfa_plfa-part3-Compositional-3381" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3383" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a>
<a id="plfa_plfa-part3-Compositional-3386" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3392" href="../Compositional/#plfa_plfa-part3-Compositional-3392" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3394" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3395" href="../Denotational/#plfa_plfa-part3-Denotational-5785" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-3401" href="../Compositional/#plfa_plfa-part3-Compositional-3401" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-3404" href="../Compositional/#plfa_plfa-part3-Compositional-3404" class="Bound">lt′</a><a id="plfa_plfa-part3-Compositional-3407" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3409" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3411" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-3415" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3416" href="../Denotational/#plfa_plfa-part3-Denotational-32854" class="Function">up-env</a> <a id="plfa_plfa-part3-Compositional-3423" href="../Compositional/#plfa_plfa-part3-Compositional-3392" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3425" href="../Compositional/#plfa_plfa-part3-Compositional-3401" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3427" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3429" href="../Compositional/#plfa_plfa-part3-Compositional-3404" class="Bound">lt′</a>
<a id="plfa_plfa-part3-Compositional-3433" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3439" href="../Compositional/#plfa_plfa-part3-Compositional-3439" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3441" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3442" href="../Denotational/#plfa_plfa-part3-Denotational-5484" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-3451" href="../Compositional/#plfa_plfa-part3-Compositional-3451" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-3454" href="../Compositional/#plfa_plfa-part3-Compositional-3454" class="Bound">lt₁</a><a id="plfa_plfa-part3-Compositional-3457" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3459" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3461" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-3463" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3469" href="../Compositional/#plfa_plfa-part3-Compositional-3439" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3471" href="../Compositional/#plfa_plfa-part3-Compositional-3451" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-3474" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3476" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3482" href="../Compositional/#plfa_plfa-part3-Compositional-3439" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3484" href="../Compositional/#plfa_plfa-part3-Compositional-3454" class="Bound">lt₁</a> <a id="plfa_plfa-part3-Compositional-3488" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-3490" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3496" href="../Compositional/#plfa_plfa-part3-Compositional-3496" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3498" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3499" href="../Denotational/#plfa_plfa-part3-Denotational-5568" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Compositional-3509" href="../Compositional/#plfa_plfa-part3-Compositional-3509" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3511" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3513" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3515" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3521" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3522" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-3528" href="../Compositional/#plfa_plfa-part3-Compositional-3496" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-3529" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3531" href="../Compositional/#plfa_plfa-part3-Compositional-3509" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-3534" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3540" href="../Compositional/#plfa_plfa-part3-Compositional-3540" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3542" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3543" href="../Denotational/#plfa_plfa-part3-Denotational-5641" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Compositional-3553" href="../Compositional/#plfa_plfa-part3-Compositional-3553" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3555" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3557" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3559" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3565" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3566" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="plfa_plfa-part3-Compositional-3572" href="../Compositional/#plfa_plfa-part3-Compositional-3540" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-3573" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3575" href="../Compositional/#plfa_plfa-part3-Compositional-3553" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-3578" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3584" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-3585" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-3587" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3589" href="../Compositional/#plfa_plfa-part3-Compositional-3589" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3592" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3594" href="../Compositional/#plfa_plfa-part3-Compositional-3594" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-3597" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-3599" href="../Compositional/#plfa_plfa-part3-Compositional-3589" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3602" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3604" href="../Compositional/#plfa_plfa-part3-Compositional-3604" class="Bound">v₃</a><a id="plfa_plfa-part3-Compositional-3606" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-3608" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-3609" href="../Compositional/#plfa_plfa-part3-Compositional-3589" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3612" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3614" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3615" href="../Compositional/#plfa_plfa-part3-Compositional-3594" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-3618" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-3620" href="../Compositional/#plfa_plfa-part3-Compositional-3604" class="Bound">v₃</a><a id="plfa_plfa-part3-Compositional-3622" class="Symbol">)}</a> <a id="plfa_plfa-part3-Compositional-3625" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-3627" href="../Compositional/#plfa_plfa-part3-Compositional-3627" class="Bound">N2</a> <a id="plfa_plfa-part3-Compositional-3630" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3632" href="../Compositional/#plfa_plfa-part3-Compositional-3632" class="Bound">N3</a> <a id="plfa_plfa-part3-Compositional-3635" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-3637" href="../Denotational/#plfa_plfa-part3-Denotational-5888" class="InductiveConstructor">⊑-dist</a> <a id="plfa_plfa-part3-Compositional-3644" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Compositional-3649" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-3657" href="../Compositional/#plfa_plfa-part3-Compositional-3627" class="Bound">N2</a> <a id="plfa_plfa-part3-Compositional-3660" href="../Compositional/#plfa_plfa-part3-Compositional-3632" class="Bound">N3</a>
<a id="plfa_plfa-part3-Compositional-3663" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3669" href="../Compositional/#plfa_plfa-part3-Compositional-3669" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3671" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3672" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-3680" href="../Compositional/#plfa_plfa-part3-Compositional-3680" class="Bound">x₁</a> <a id="plfa_plfa-part3-Compositional-3683" href="../Compositional/#plfa_plfa-part3-Compositional-3683" class="Bound">x₂</a><a id="plfa_plfa-part3-Compositional-3685" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3687" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3689" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3695" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3696" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3702" href="../Compositional/#plfa_plfa-part3-Compositional-3669" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3704" href="../Compositional/#plfa_plfa-part3-Compositional-3683" class="Bound">x₂</a><a id="plfa_plfa-part3-Compositional-3706" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3708" href="../Compositional/#plfa_plfa-part3-Compositional-3680" class="Bound">x₁</a>
</pre><p>有了这个小前提的性质，我们就可以证明 λ-等式语义前进的方向。 证明是通过在 <code>sub</code> 规则的情况下使用 <code>sub-ℱ</code>，对语义进行归纳得出的。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰƛ→ℱℰ"></a><a id="plfa_plfa-part3-Compositional-4012" href="../Compositional/#plfa_plfa-part3-Compositional-4012" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4018" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4020" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4022" href="../Compositional/#plfa_plfa-part3-Compositional-4022" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4023" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4025" href="../Compositional/#plfa_plfa-part3-Compositional-4025" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4027" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4029" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-4033" href="../Compositional/#plfa_plfa-part3-Compositional-4022" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4034" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4036" href="../Compositional/#plfa_plfa-part3-Compositional-4036" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4038" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4040" href="../Compositional/#plfa_plfa-part3-Compositional-4022" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4042" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4044" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4046" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4048" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4049" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4051" href="../Compositional/#plfa_plfa-part3-Compositional-4051" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-4053" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4055" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4060" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4064" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4066" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4068" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4069" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4071" href="../Compositional/#plfa_plfa-part3-Compositional-4036" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4072" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4074" href="../Compositional/#plfa_plfa-part3-Compositional-4025" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4076" href="../Compositional/#plfa_plfa-part3-Compositional-4051" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-4082" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-4097" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4099" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-4101" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4102" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4104" href="../Compositional/#plfa_plfa-part3-Compositional-4036" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4105" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4107" href="../Compositional/#plfa_plfa-part3-Compositional-4025" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4109" href="../Compositional/#plfa_plfa-part3-Compositional-4051" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-4111" href="../Compositional/#plfa_plfa-part3-Compositional-4012" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4117" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4118" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Compositional-4126" href="../Compositional/#plfa_plfa-part3-Compositional-4126" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-4127" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4129" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4131" href="../Compositional/#plfa_plfa-part3-Compositional-4126" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-4133" href="../Compositional/#plfa_plfa-part3-Compositional-4012" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4139" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-4147" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4149" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a>
<a id="plfa_plfa-part3-Compositional-4152" href="../Compositional/#plfa_plfa-part3-Compositional-4012" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4158" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4159" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-4167" href="../Compositional/#plfa_plfa-part3-Compositional-4167" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-4170" href="../Compositional/#plfa_plfa-part3-Compositional-4170" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-4172" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4174" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4176" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-4178" href="../Compositional/#plfa_plfa-part3-Compositional-4012" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4184" href="../Compositional/#plfa_plfa-part3-Compositional-4167" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-4187" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4189" href="../Compositional/#plfa_plfa-part3-Compositional-4012" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4195" href="../Compositional/#plfa_plfa-part3-Compositional-4170" class="Bound">d₂</a> <a id="plfa_plfa-part3-Compositional-4198" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-4200" href="../Compositional/#plfa_plfa-part3-Compositional-4012" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4206" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4207" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-4211" href="../Compositional/#plfa_plfa-part3-Compositional-4211" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4213" href="../Compositional/#plfa_plfa-part3-Compositional-4213" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-4215" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4217" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4219" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-4225" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4226" href="../Compositional/#plfa_plfa-part3-Compositional-4012" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4232" href="../Compositional/#plfa_plfa-part3-Compositional-4211" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-4233" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4235" href="../Compositional/#plfa_plfa-part3-Compositional-4213" class="Bound">lt</a>
</pre><p>λ-抽象的「反演引理」是上面定理的一种特例。反演引理在证明「归约会保持指称不变」时会很有用。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lambda-inversion"></a><a id="plfa_plfa-part3-Compositional-4472" href="../Compositional/#plfa_plfa-part3-Compositional-4472" class="Function">lambda-inversion</a> <a id="plfa_plfa-part3-Compositional-4489" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4491" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4493" href="../Compositional/#plfa_plfa-part3-Compositional-4493" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4494" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4496" href="../Compositional/#plfa_plfa-part3-Compositional-4496" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4498" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4500" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-4504" href="../Compositional/#plfa_plfa-part3-Compositional-4493" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4505" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4507" href="../Compositional/#plfa_plfa-part3-Compositional-4507" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4509" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4511" href="../Compositional/#plfa_plfa-part3-Compositional-4493" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4513" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4515" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4517" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4519" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4520" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4522" href="../Compositional/#plfa_plfa-part3-Compositional-4522" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4525" href="../Compositional/#plfa_plfa-part3-Compositional-4525" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-4528" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4530" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4535" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4539" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4541" href="../Compositional/#plfa_plfa-part3-Compositional-4496" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4543" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4545" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4547" href="../Compositional/#plfa_plfa-part3-Compositional-4507" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4549" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Compositional-4551" href="../Compositional/#plfa_plfa-part3-Compositional-4522" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4554" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-4556" href="../Compositional/#plfa_plfa-part3-Compositional-4525" class="Bound">v₂</a>
    <a id="plfa_plfa-part3-Compositional-4563" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Compositional-4583" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4585" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4586" href="../Compositional/#plfa_plfa-part3-Compositional-4496" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4588" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-4591" href="../Compositional/#plfa_plfa-part3-Compositional-4522" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-4593" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4595" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4597" href="../Compositional/#plfa_plfa-part3-Compositional-4507" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4599" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Compositional-4601" href="../Compositional/#plfa_plfa-part3-Compositional-4525" class="Bound">v₂</a>
<a id="plfa_plfa-part3-Compositional-4604" href="../Compositional/#plfa_plfa-part3-Compositional-4472" class="Function">lambda-inversion</a><a id="plfa_plfa-part3-Compositional-4620" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4621" class="Argument">v₁</a> <a id="plfa_plfa-part3-Compositional-4624" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4626" href="../Compositional/#plfa_plfa-part3-Compositional-4626" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-4628" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4630" class="Argument">v₂</a> <a id="plfa_plfa-part3-Compositional-4633" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4635" href="../Compositional/#plfa_plfa-part3-Compositional-4635" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4637" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4639" href="../Compositional/#plfa_plfa-part3-Compositional-4639" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4641" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4643" href="../Compositional/#plfa_plfa-part3-Compositional-4012" class="Function">ℰƛ→ℱℰ</a><a id="plfa_plfa-part3-Compositional-4648" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4649" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4651" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4653" href="../Compositional/#plfa_plfa-part3-Compositional-4626" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4656" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-4658" href="../Compositional/#plfa_plfa-part3-Compositional-4635" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4660" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4662" href="../Compositional/#plfa_plfa-part3-Compositional-4639" class="Bound">d</a>
</pre><p>λ-等式的语义后退的方向甚至比前进的方向更容易证明，我们只需对值 <code>v</code> 进行归纳：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱℰ→ℰƛ"></a><a id="plfa_plfa-part3-Compositional-4882" href="../Compositional/#plfa_plfa-part3-Compositional-4882" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4888" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4890" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4892" href="../Compositional/#plfa_plfa-part3-Compositional-4892" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4893" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4895" href="../Compositional/#plfa_plfa-part3-Compositional-4895" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4897" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4899" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-4903" href="../Compositional/#plfa_plfa-part3-Compositional-4892" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4904" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4906" href="../Compositional/#plfa_plfa-part3-Compositional-4906" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4908" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4910" href="../Compositional/#plfa_plfa-part3-Compositional-4892" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4912" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4914" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4916" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4918" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4919" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4921" href="../Compositional/#plfa_plfa-part3-Compositional-4921" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-4923" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4925" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4930" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4934" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4936" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-4938" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4939" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4941" href="../Compositional/#plfa_plfa-part3-Compositional-4906" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4942" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4944" href="../Compositional/#plfa_plfa-part3-Compositional-4895" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4946" href="../Compositional/#plfa_plfa-part3-Compositional-4921" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-4952" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-4967" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4969" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4971" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4972" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4974" href="../Compositional/#plfa_plfa-part3-Compositional-4906" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4975" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4977" href="../Compositional/#plfa_plfa-part3-Compositional-4895" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4979" href="../Compositional/#plfa_plfa-part3-Compositional-4921" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-4981" href="../Compositional/#plfa_plfa-part3-Compositional-4882" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4987" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4988" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4990" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4992" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-4993" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4995" href="../Compositional/#plfa_plfa-part3-Compositional-4995" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4997" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4999" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Compositional-5007" href="../Compositional/#plfa_plfa-part3-Compositional-4882" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5013" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-5014" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-5016" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5018" href="../Compositional/#plfa_plfa-part3-Compositional-5018" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-5021" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-5023" href="../Compositional/#plfa_plfa-part3-Compositional-5023" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-5025" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-5027" href="../Compositional/#plfa_plfa-part3-Compositional-5027" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-5029" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5031" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Compositional-5039" href="../Compositional/#plfa_plfa-part3-Compositional-5027" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-5041" href="../Compositional/#plfa_plfa-part3-Compositional-4882" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5047" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-5048" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-5050" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5052" href="../Compositional/#plfa_plfa-part3-Compositional-5052" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-5055" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-5057" href="../Compositional/#plfa_plfa-part3-Compositional-5057" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-5059" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-5061" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-5063" href="../Compositional/#plfa_plfa-part3-Compositional-5063" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-5066" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-5068" href="../Compositional/#plfa_plfa-part3-Compositional-5068" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-5071" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-5073" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5075" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-5083" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5084" href="../Compositional/#plfa_plfa-part3-Compositional-4882" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5090" href="../Compositional/#plfa_plfa-part3-Compositional-5063" class="Bound">d1</a><a id="plfa_plfa-part3-Compositional-5092" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-5094" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5095" href="../Compositional/#plfa_plfa-part3-Compositional-4882" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5101" href="../Compositional/#plfa_plfa-part3-Compositional-5068" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-5103" class="Symbol">)</a>
</pre><p>因此，指称语义对 λ-抽象来说是可组合的，正如函数 <code>ℱ</code> 所证明的那样：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lam-equiv"></a><a id="plfa_plfa-part3-Compositional-5292" href="../Compositional/#plfa_plfa-part3-Compositional-5292" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-5302" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-5304" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-5306" href="../Compositional/#plfa_plfa-part3-Compositional-5306" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-5307" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-5309" href="../Compositional/#plfa_plfa-part3-Compositional-5309" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-5311" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-5313" href="../Compositional/#plfa_plfa-part3-Compositional-5306" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-5315" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-5317" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-5319" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-5321" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-5322" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-5326" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-5328" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-5330" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5331" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-5333" href="../Compositional/#plfa_plfa-part3-Compositional-5309" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-5334" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-5336" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-5338" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-5340" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5341" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-5343" href="../Compositional/#plfa_plfa-part3-Compositional-5309" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-5344" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-5346" href="../Compositional/#plfa_plfa-part3-Compositional-5292" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-5356" href="../Compositional/#plfa_plfa-part3-Compositional-5356" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-5358" href="../Compositional/#plfa_plfa-part3-Compositional-5358" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-5360" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5362" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-5364" href="../Compositional/#plfa_plfa-part3-Compositional-4012" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-5370" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-5372" href="../Compositional/#plfa_plfa-part3-Compositional-4882" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5378" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="函数应用的等式">函数应用的等式</h2><p>接下来我们填补关于函数应用的等式中的省略号。</p><pre><code>ℰ (M · N) ≃ ... ℰ M ... ℰ N ...</code></pre><p>为此我们需要定义一个函数，它接受语境 <code>Γ</code> 中的两个指称，并产生语境 <code>Γ</code> 中的另一个指称。我们将此函数命名为 <code>●</code>，以模拟应用语义 <code>L · M</code> 中非递归的部分。我们无法像处理 <code>ℱ</code> 那样简单地对值 <code>v</code> 进行递归来定义函数， 因为 <code>↦-elim</code> 这类的规则可应用于任何值。相反，我们将通过直接处理 <code>↦-elim</code> 和 <code>⊥-intro</code> 规则而忽略 <code>⊔-intro</code> 的方式来定义 <code>●</code>。这使得证明的前进方向变得更加困难， 而 <code>⊔-intro</code> 的情况说明了为什么 <code>⊑-dist</code> 规则很重要。</p><p>这样我们就定义了 <code>D₁</code> 应用于 <code>D₂</code>，记作 <code>D₁ ● D₂</code>，来包含 <code>⊥-intro</code> 规则中所有等价于 <code>⊥</code> 的值 <code>w</code>，以及对于 <code>↦-elim</code> 规则，在 <code>D₁</code> 中的条目 <code>v ↦ w</code> 的所有输出值 <code>w</code>，前提是它的输入值 <code>v</code> 在 <code>D₂</code> 中。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-6953" class="Keyword">infixl</a> <a id="plfa_plfa-part3-Compositional-6960" class="Number">7</a> <a id="plfa_plfa-part3-Compositional-6962" href="../Compositional/#plfa_plfa-part3-Compositional-6967" class="Function Operator">_●_</a>

<a id="plfa_plfa-part3-Compositional-_●_"></a><a id="plfa_plfa-part3-Compositional-6967" href="../Compositional/#plfa_plfa-part3-Compositional-6967" class="Function Operator">_●_</a> <a id="plfa_plfa-part3-Compositional-6971" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6973" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-6975" href="../Compositional/#plfa_plfa-part3-Compositional-6975" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-6976" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6978" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-6980" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-6991" href="../Compositional/#plfa_plfa-part3-Compositional-6975" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-6993" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-6995" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-7006" href="../Compositional/#plfa_plfa-part3-Compositional-6975" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-7008" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-7010" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-7021" href="../Compositional/#plfa_plfa-part3-Compositional-6975" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-7023" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7024" href="../Compositional/#plfa_plfa-part3-Compositional-7024" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-7027" href="../Compositional/#plfa_plfa-part3-Compositional-6967" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-7029" href="../Compositional/#plfa_plfa-part3-Compositional-7029" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-7031" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7033" href="../Compositional/#plfa_plfa-part3-Compositional-7033" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7035" href="../Compositional/#plfa_plfa-part3-Compositional-7035" class="Bound">w</a> <a id="plfa_plfa-part3-Compositional-7037" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7039" href="../Compositional/#plfa_plfa-part3-Compositional-7035" class="Bound">w</a> <a id="plfa_plfa-part3-Compositional-7041" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-7043" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Compositional-7045" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="plfa_plfa-part3-Compositional-7047" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Compositional-7050" href="../Compositional/#plfa_plfa-part3-Compositional-7050" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7052" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Compositional-7054" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a> <a id="plfa_plfa-part3-Compositional-7060" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a><a id="plfa_plfa-part3-Compositional-7061" class="Symbol">(</a> <a id="plfa_plfa-part3-Compositional-7063" href="../Compositional/#plfa_plfa-part3-Compositional-7024" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-7066" href="../Compositional/#plfa_plfa-part3-Compositional-7033" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7068" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7069" href="../Compositional/#plfa_plfa-part3-Compositional-7050" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7071" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-7073" href="../Compositional/#plfa_plfa-part3-Compositional-7035" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-7074" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7076" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Compositional-7078" href="../Compositional/#plfa_plfa-part3-Compositional-7029" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-7081" href="../Compositional/#plfa_plfa-part3-Compositional-7033" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7083" href="../Compositional/#plfa_plfa-part3-Compositional-7050" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7085" class="Symbol">)</a>
</pre><p>如果你仔细观察一下，就会发现 <code>_●_</code> 运算符看起来像函数式程序员熟悉的 <code>apply</code> 操作：它接受两个参数，并将第一个参数应用于第二个参数。</p><p>接下来我们考虑应用的反演引理，它同样是应用的语义等式的前进方向。 下面是它的证明：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰ·→●ℰ"></a><a id="plfa_plfa-part3-Compositional-7782" href="../Compositional/#plfa_plfa-part3-Compositional-7782" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7788" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7790" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-7792" href="../Compositional/#plfa_plfa-part3-Compositional-7792" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-7793" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7795" href="../Compositional/#plfa_plfa-part3-Compositional-7795" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7797" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7799" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-7803" href="../Compositional/#plfa_plfa-part3-Compositional-7792" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-7804" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7806" href="../Compositional/#plfa_plfa-part3-Compositional-7806" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-7808" href="../Compositional/#plfa_plfa-part3-Compositional-7808" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-7810" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7812" href="../Compositional/#plfa_plfa-part3-Compositional-7792" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-7814" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-7816" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-7817" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7819" href="../Compositional/#plfa_plfa-part3-Compositional-7819" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7821" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7823" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-7828" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-7832" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-7834" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-7836" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7837" href="../Compositional/#plfa_plfa-part3-Compositional-7806" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-7839" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-7841" href="../Compositional/#plfa_plfa-part3-Compositional-7808" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-7842" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7844" href="../Compositional/#plfa_plfa-part3-Compositional-7795" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7846" href="../Compositional/#plfa_plfa-part3-Compositional-7819" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-7852" class="Comment">----------------</a>
  <a id="plfa_plfa-part3-Compositional-7871" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-7873" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7874" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-7876" href="../Compositional/#plfa_plfa-part3-Compositional-7806" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-7878" href="../Compositional/#plfa_plfa-part3-Compositional-6967" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-7880" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-7882" href="../Compositional/#plfa_plfa-part3-Compositional-7808" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-7883" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7885" href="../Compositional/#plfa_plfa-part3-Compositional-7795" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7887" href="../Compositional/#plfa_plfa-part3-Compositional-7819" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-7889" href="../Compositional/#plfa_plfa-part3-Compositional-7782" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7895" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7896" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Compositional-7902" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-7903" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-7905" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7907" href="../Compositional/#plfa_plfa-part3-Compositional-7907" class="Bound">v′</a><a id="plfa_plfa-part3-Compositional-7909" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-7911" href="../Compositional/#plfa_plfa-part3-Compositional-7911" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-7914" href="../Compositional/#plfa_plfa-part3-Compositional-7914" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-7916" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7918" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7920" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-7925" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7927" href="../Compositional/#plfa_plfa-part3-Compositional-7907" class="Bound">v′</a> <a id="plfa_plfa-part3-Compositional-7930" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7932" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7934" href="../Compositional/#plfa_plfa-part3-Compositional-7911" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-7937" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7939" href="../Compositional/#plfa_plfa-part3-Compositional-7914" class="Bound">d₂</a> <a id="plfa_plfa-part3-Compositional-7942" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-7944" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-7946" href="../Compositional/#plfa_plfa-part3-Compositional-7782" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7952" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-7953" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-7955" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7957" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-7958" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-7960" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-7968" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7970" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-7975" href="../Denotational/#plfa_plfa-part3-Denotational-5459" class="InductiveConstructor">⊑-bot</a>
<a id="plfa_plfa-part3-Compositional-7981" href="../Compositional/#plfa_plfa-part3-Compositional-7782" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7987" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-7988" href="../Compositional/#plfa_plfa-part3-Compositional-7988" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-7989" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7991" href="../Compositional/#plfa_plfa-part3-Compositional-7991" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-7992" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7994" href="../Compositional/#plfa_plfa-part3-Compositional-7994" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-7995" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7997" href="../Compositional/#plfa_plfa-part3-Compositional-7997" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-7998" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8000" href="../Compositional/#plfa_plfa-part3-Compositional-8000" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-8001" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-8003" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8004" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Compositional-8011" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-8012" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-8014" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8016" href="../Compositional/#plfa_plfa-part3-Compositional-8016" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-8018" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8020" class="Argument">w</a> <a id="plfa_plfa-part3-Compositional-8022" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8024" href="../Compositional/#plfa_plfa-part3-Compositional-8024" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-8026" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-8028" href="../Compositional/#plfa_plfa-part3-Compositional-8028" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-8031" href="../Compositional/#plfa_plfa-part3-Compositional-8031" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-8033" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Compositional-8039" class="Keyword">with</a> <a id="plfa_plfa-part3-Compositional-8044" href="../Compositional/#plfa_plfa-part3-Compositional-7782" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8050" href="../Compositional/#plfa_plfa-part3-Compositional-8028" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-8053" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8055" href="../Compositional/#plfa_plfa-part3-Compositional-7782" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8061" href="../Compositional/#plfa_plfa-part3-Compositional-8031" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Compositional-8064" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8068" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8070" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8075" href="../Compositional/#plfa_plfa-part3-Compositional-8075" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8079" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8081" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8086" href="../Compositional/#plfa_plfa-part3-Compositional-8086" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8090" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8092" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8097" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8098" href="../Denotational/#plfa_plfa-part3-Denotational-5484" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-8107" href="../Compositional/#plfa_plfa-part3-Compositional-8075" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8111" href="../Compositional/#plfa_plfa-part3-Compositional-8086" class="Bound">lt2</a><a id="plfa_plfa-part3-Compositional-8114" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-8116" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8120" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8122" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8127" href="../Compositional/#plfa_plfa-part3-Compositional-8127" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8131" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8133" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8138" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8140" href="../Compositional/#plfa_plfa-part3-Compositional-8140" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8144" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8146" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8148" href="../Compositional/#plfa_plfa-part3-Compositional-8148" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8154" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8156" href="../Compositional/#plfa_plfa-part3-Compositional-8156" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8161" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8163" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8165" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8173" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8178" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8180" href="../Compositional/#plfa_plfa-part3-Compositional-8140" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8184" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8186" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8188" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8192" href="../Compositional/#plfa_plfa-part3-Compositional-8148" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8198" href="../Compositional/#plfa_plfa-part3-Compositional-8224" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8201" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8203" href="../Compositional/#plfa_plfa-part3-Compositional-8156" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8208" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8210" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part3-Compositional-8218" class="Keyword">where</a> <a id="plfa_plfa-part3-Compositional-8224" href="../Compositional/#plfa_plfa-part3-Compositional-8224" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8227" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-8229" href="../Compositional/#plfa_plfa-part3-Compositional-8140" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8233" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8235" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8236" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8239" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-8241" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-8243" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8245" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-8247" href="../Compositional/#plfa_plfa-part3-Compositional-8140" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8251" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8253" class="Bound">v₂</a>
            <a id="plfa_plfa-part3-Compositional-8268" href="../Compositional/#plfa_plfa-part3-Compositional-8224" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8271" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8273" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8274" href="../Denotational/#plfa_plfa-part3-Denotational-5785" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-8280" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8287" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8288" href="../Denotational/#plfa_plfa-part3-Denotational-5484" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-8297" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8298" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-8306" href="../Compositional/#plfa_plfa-part3-Compositional-8127" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8310" href="../Denotational/#plfa_plfa-part3-Denotational-5459" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-8315" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8317" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Compositional-8323" class="Symbol">))</a>
<a id="plfa_plfa-part3-Compositional-8326" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8330" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8332" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8337" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8339" href="../Compositional/#plfa_plfa-part3-Compositional-8339" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8343" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8345" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8347" href="../Compositional/#plfa_plfa-part3-Compositional-8347" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8353" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8355" href="../Compositional/#plfa_plfa-part3-Compositional-8355" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8360" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8362" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8364" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8366" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8371" href="../Compositional/#plfa_plfa-part3-Compositional-8371" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8375" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8383" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8388" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8390" href="../Compositional/#plfa_plfa-part3-Compositional-8339" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8394" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8396" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8398" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8402" href="../Compositional/#plfa_plfa-part3-Compositional-8347" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8408" href="../Compositional/#plfa_plfa-part3-Compositional-8434" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8411" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8413" href="../Compositional/#plfa_plfa-part3-Compositional-8355" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8418" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8420" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part3-Compositional-8428" class="Keyword">where</a> <a id="plfa_plfa-part3-Compositional-8434" href="../Compositional/#plfa_plfa-part3-Compositional-8434" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8437" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-8439" href="../Compositional/#plfa_plfa-part3-Compositional-8339" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8443" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8445" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8446" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8449" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-8451" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-8453" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8455" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-8457" href="../Compositional/#plfa_plfa-part3-Compositional-8339" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8461" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8463" class="Bound">v₁</a>
            <a id="plfa_plfa-part3-Compositional-8478" href="../Compositional/#plfa_plfa-part3-Compositional-8434" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8481" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8483" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8484" href="../Denotational/#plfa_plfa-part3-Denotational-5785" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-8490" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8497" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8498" href="../Denotational/#plfa_plfa-part3-Denotational-5484" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-8507" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8514" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8515" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-8523" href="../Compositional/#plfa_plfa-part3-Compositional-8371" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8527" href="../Denotational/#plfa_plfa-part3-Denotational-5459" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-8532" class="Symbol">)))</a>
<a id="plfa_plfa-part3-Compositional-8536" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8540" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8542" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8547" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8549" href="../Compositional/#plfa_plfa-part3-Compositional-8549" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8553" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8555" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8557" href="../Compositional/#plfa_plfa-part3-Compositional-8557" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8563" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8565" href="../Compositional/#plfa_plfa-part3-Compositional-8565" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8570" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8572" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8574" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8576" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8581" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8583" href="../Compositional/#plfa_plfa-part3-Compositional-8583" class="Bound">v₁′′</a> <a id="plfa_plfa-part3-Compositional-8588" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8590" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8592" href="../Compositional/#plfa_plfa-part3-Compositional-8592" class="Bound">L↓v12′</a> <a id="plfa_plfa-part3-Compositional-8599" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8601" href="../Compositional/#plfa_plfa-part3-Compositional-8601" class="Bound">M↓v3′</a> <a id="plfa_plfa-part3-Compositional-8607" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8609" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8611" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8619" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-8623" href="../Compositional/#plfa_plfa-part3-Compositional-8623" class="Bound">L↓⊔</a> <a id="plfa_plfa-part3-Compositional-8627" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8629" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-8637" href="../Compositional/#plfa_plfa-part3-Compositional-8557" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8643" href="../Compositional/#plfa_plfa-part3-Compositional-8592" class="Bound">L↓v12′</a> <a id="plfa_plfa-part3-Compositional-8650" class="Keyword">in</a>
      <a id="plfa_plfa-part3-Compositional-8659" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-8663" href="../Compositional/#plfa_plfa-part3-Compositional-8663" class="Bound">M↓⊔</a> <a id="plfa_plfa-part3-Compositional-8667" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8669" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-8677" href="../Compositional/#plfa_plfa-part3-Compositional-8565" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8682" href="../Compositional/#plfa_plfa-part3-Compositional-8601" class="Bound">M↓v3′</a> <a id="plfa_plfa-part3-Compositional-8688" class="Keyword">in</a>
      <a id="plfa_plfa-part3-Compositional-8697" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8702" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8704" href="../Compositional/#plfa_plfa-part3-Compositional-8549" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8708" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-8710" href="../Compositional/#plfa_plfa-part3-Compositional-8583" class="Bound">v₁′′</a> <a id="plfa_plfa-part3-Compositional-8715" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8717" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8719" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8723" href="../Compositional/#plfa_plfa-part3-Compositional-8623" class="Bound">L↓⊔</a> <a id="plfa_plfa-part3-Compositional-8727" href="../Denotational/#plfa_plfa-part3-Denotational-7600" class="Function">⊔↦⊔-dist</a> <a id="plfa_plfa-part3-Compositional-8736" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8738" href="../Compositional/#plfa_plfa-part3-Compositional-8663" class="Bound">M↓⊔</a> <a id="plfa_plfa-part3-Compositional-8742" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8744" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-8746" href="../Compositional/#plfa_plfa-part3-Compositional-7782" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8752" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-8753" href="../Compositional/#plfa_plfa-part3-Compositional-8753" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-8754" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8756" href="../Compositional/#plfa_plfa-part3-Compositional-8756" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-8757" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8759" href="../Compositional/#plfa_plfa-part3-Compositional-8759" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-8760" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8762" href="../Compositional/#plfa_plfa-part3-Compositional-8762" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-8763" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8765" href="../Compositional/#plfa_plfa-part3-Compositional-8765" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-8766" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-8768" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8769" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8773" href="../Compositional/#plfa_plfa-part3-Compositional-8773" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-8775" href="../Compositional/#plfa_plfa-part3-Compositional-8775" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-8777" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Compositional-8783" class="Keyword">with</a> <a id="plfa_plfa-part3-Compositional-8788" href="../Compositional/#plfa_plfa-part3-Compositional-7782" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8794" href="../Compositional/#plfa_plfa-part3-Compositional-8773" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-8796" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8800" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8802" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8807" href="../Compositional/#plfa_plfa-part3-Compositional-8807" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8811" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8813" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8818" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8819" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-8827" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-8830" href="../Compositional/#plfa_plfa-part3-Compositional-8807" class="Bound">lt2</a><a id="plfa_plfa-part3-Compositional-8833" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-8835" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8839" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8841" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8846" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8848" href="../Compositional/#plfa_plfa-part3-Compositional-8848" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8851" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8853" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8855" href="../Compositional/#plfa_plfa-part3-Compositional-8855" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8861" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8863" href="../Compositional/#plfa_plfa-part3-Compositional-8863" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8868" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8870" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8872" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8880" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8885" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8887" href="../Compositional/#plfa_plfa-part3-Compositional-8848" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8890" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8892" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8894" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8898" href="../Compositional/#plfa_plfa-part3-Compositional-8855" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8904" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8905" href="../Denotational/#plfa_plfa-part3-Denotational-5785" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-8911" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8918" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-8920" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8922" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8924" href="../Compositional/#plfa_plfa-part3-Compositional-8863" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8929" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8931" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
</pre><p>我们通过对语义进行归纳来证明：</p><ul><li><p>对于 <code>↦-elim</code> 的情况，我们有 <code>γ ⊢ L ↓ (v′ ↦ v)</code> 和 <code>γ ⊢ M ↓ v′</code>， 只需证明 <code>(ℰ L ● ℰ M) γ v</code> 即可。</p></li><li><p>对于 <code>⊥-intro</code> 的情况，我们有 <code>v = ⊥</code>，于是可推出 <code>v ⊑ ⊥</code>。</p></li></ul><ul><li><p>对于 <code>⊔-intro</code> 的情况，我们有 <code>ℰ (L · M) γ v₁</code> 和 <code>ℰ (L · M) γ v₂</code>， 且需要证明 <code>(ℰ L ● ℰ M) γ (v₁ ⊔ v₂)</code>。根据归纳假设，我们有 <code>(ℰ L ● ℰ M) γ v₁</code> 和 <code>(ℰ L ● ℰ M) γ v₂</code>，于是我们需要考虑四种子情况：</p><ul><li><p>假设 <code>v₁ ⊑ ⊥</code> 且 <code>v₂ ⊑ ⊥</code>，那么 <code>v₁ ⊔ v₂ ⊑ ⊥</code>。</p></li><li><p>假设 <code>v₁ ⊑ ⊥</code>，<code>γ ⊢ L ↓ v₁′ ↦ v₂</code> 且 <code>γ ⊢ M ↓ v₁′</code>， 根据 <code>sub</code> 规则我们有 <code>γ ⊢ L ↓ v₁′ ↦ (v₁ ⊔ v₂)</code>，因为 <code>v₁′ ↦ (v₁ ⊔ v₂) ⊑ v₁′ ↦ v₂</code>。</p></li><li><p>假设 <code>γ ⊢ L ↓ v₁′ ↦ v₁</code>，<code>γ ⊢ M ↓ v₁′</code> 且 <code>v₂ ⊑ ⊥</code>， 根据 <code>sub</code> 规则我们有 <code>γ ⊢ L ↓ v₁′ ↦ (v₁ ⊔ v₂)</code>，因为 <code>v₁′ ↦ (v₁ ⊔ v₂) ⊑ v₁′ ↦ v₁</code>。</p></li><li><p>假设 <code>γ ⊢ L ↓ v₁′′ ↦ v₁, γ ⊢ M ↓ v₁′′</code>， <code>γ ⊢ L ↓ v₁′ ↦ v₂</code> 且 <code>γ ⊢ M ↓ v₁′</code>， 这种情况是最有趣的部分。通过使用两次 <code>⊔-intro</code>，我们有 <code>γ ⊢ L ↓ (v₁′ ↦ v₂) ⊔ (v₁′′ ↦ v₁)</code> 且 <code>γ ⊢ M ↓ (v₁′ ⊔ v₁′′)</code>。但它对 <code>ℰ L ● ℰ M</code> 来说与我们的需要尚不匹配， 因为 <code>L</code> 的结果必须是一个输入条目为 <code>v₁′ ⊔ v₁′′</code> 的 <code>↦</code>。 因此我们需要使用 <code>sub</code> 规则来得到 <code>γ ⊢ L ↓ (v₁′ ⊔ v₁′′) ↦ (v₁ ⊔ v₂)</code>； 使用 <code>⊔↦⊔-dist</code> 引理（感谢 <code>⊑-dist</code> 规则）来证明：</p><pre><code>  (v₁′ ⊔ v₁′′) ↦ (v₁ ⊔ v₂) ⊑ (v₁′ ↦ v₂) ⊔ (v₁′′ ↦ v₁)</code></pre><p>这样我们就证明了该情况所有的子情况。</p></li></ul></li><li><p>对于情况 <code>sub</code>，我们有 <code>Γ ⊢ L · M ↓ v₁</code> 且 <code>v ⊑ v₁</code>。 根据归纳假设，我们有 <code>(ℰ L ● ℰ M) γ v₁</code>，于是我们需要考虑两种子情况：</p><ul><li>假设 <code>v₁ ⊑ ⊥</code>，我们可推出 <code>v ⊑ ⊥</code>。</li><li>假设 <code>Γ ⊢ L ↓ v′ → v₁</code> 且 <code>Γ ⊢ M ↓ v′</code>，我们可根据规则 <code>sub</code> 推出 <code>Γ ⊢ L ↓ v′ → v</code>，因为 <code>v′ → v ⊑ v′ → v₁</code>。</li></ul></li></ul><p>后退的方向可通过在前提 <code>(ℰ L ● ℰ M) γ v</code> 下进行情况分析来证明。 对于情况 <code>v ⊑ ⊥</code>，我们可通过规则 <code>⊥-intro</code> 得到 <code>Γ ⊢ L · M ↓ ⊥</code>。 否则，我们可直接通过规则 <code>↦-elim</code> 得出结论：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-●ℰ→ℰ·"></a><a id="plfa_plfa-part3-Compositional-12164" href="../Compositional/#plfa_plfa-part3-Compositional-12164" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12170" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12172" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12174" href="../Compositional/#plfa_plfa-part3-Compositional-12174" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12175" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12177" href="../Compositional/#plfa_plfa-part3-Compositional-12177" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12179" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12181" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-12185" href="../Compositional/#plfa_plfa-part3-Compositional-12174" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12186" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12188" href="../Compositional/#plfa_plfa-part3-Compositional-12188" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12190" href="../Compositional/#plfa_plfa-part3-Compositional-12190" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-12192" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12194" href="../Compositional/#plfa_plfa-part3-Compositional-12174" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-12196" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-12198" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-12199" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12201" href="../Compositional/#plfa_plfa-part3-Compositional-12201" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12202" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12206" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12208" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12209" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12211" href="../Compositional/#plfa_plfa-part3-Compositional-12188" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12213" href="../Compositional/#plfa_plfa-part3-Compositional-6967" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12215" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12217" href="../Compositional/#plfa_plfa-part3-Compositional-12190" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12218" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12220" href="../Compositional/#plfa_plfa-part3-Compositional-12177" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12222" href="../Compositional/#plfa_plfa-part3-Compositional-12201" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-12228" class="Comment">----------------</a>
  <a id="plfa_plfa-part3-Compositional-12247" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12249" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12251" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12252" href="../Compositional/#plfa_plfa-part3-Compositional-12188" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12254" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-12256" href="../Compositional/#plfa_plfa-part3-Compositional-12190" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12257" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12259" href="../Compositional/#plfa_plfa-part3-Compositional-12177" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12261" href="../Compositional/#plfa_plfa-part3-Compositional-12201" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-12263" href="../Compositional/#plfa_plfa-part3-Compositional-12164" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12269" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12270" href="../Compositional/#plfa_plfa-part3-Compositional-12270" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-12271" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12273" href="../Compositional/#plfa_plfa-part3-Compositional-12273" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12274" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12276" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12277" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-12282" href="../Compositional/#plfa_plfa-part3-Compositional-12282" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-12284" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12286" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12288" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-12292" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-12300" href="../Compositional/#plfa_plfa-part3-Compositional-12282" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-12303" href="../Compositional/#plfa_plfa-part3-Compositional-12164" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12309" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12310" href="../Compositional/#plfa_plfa-part3-Compositional-12310" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-12311" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12313" href="../Compositional/#plfa_plfa-part3-Compositional-12313" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12314" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12316" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12317" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-12322" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12324" href="../Compositional/#plfa_plfa-part3-Compositional-12324" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-12327" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12329" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12331" href="../Compositional/#plfa_plfa-part3-Compositional-12331" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-12334" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12336" href="../Compositional/#plfa_plfa-part3-Compositional-12336" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-12339" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-12341" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-12342" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12344" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12346" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Compositional-12353" href="../Compositional/#plfa_plfa-part3-Compositional-12331" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-12356" href="../Compositional/#plfa_plfa-part3-Compositional-12336" class="Bound">d2</a>
</pre><p>这样我们就通过 <code>●</code> 函数的相关定理，证明了对于函数应用来说，语义是可组合的。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-app-equiv"></a><a id="plfa_plfa-part3-Compositional-12550" href="../Compositional/#plfa_plfa-part3-Compositional-12550" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-12560" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12562" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12564" href="../Compositional/#plfa_plfa-part3-Compositional-12564" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12565" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12567" href="../Compositional/#plfa_plfa-part3-Compositional-12567" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12569" href="../Compositional/#plfa_plfa-part3-Compositional-12569" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-12571" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12573" href="../Compositional/#plfa_plfa-part3-Compositional-12564" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-12575" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-12577" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-12578" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12582" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12584" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12586" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12587" href="../Compositional/#plfa_plfa-part3-Compositional-12567" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12589" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-12591" href="../Compositional/#plfa_plfa-part3-Compositional-12569" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12592" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12594" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12596" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12597" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12599" href="../Compositional/#plfa_plfa-part3-Compositional-12567" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-12600" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12602" href="../Compositional/#plfa_plfa-part3-Compositional-6967" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12604" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12605" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12607" href="../Compositional/#plfa_plfa-part3-Compositional-12569" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12608" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-12610" href="../Compositional/#plfa_plfa-part3-Compositional-12550" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-12620" href="../Compositional/#plfa_plfa-part3-Compositional-12620" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12622" href="../Compositional/#plfa_plfa-part3-Compositional-12622" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12624" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12626" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12628" href="../Compositional/#plfa_plfa-part3-Compositional-7782" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-12634" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12636" href="../Compositional/#plfa_plfa-part3-Compositional-12164" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12642" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
</pre><p>我们还需要一个变量的反演引理：若 <code>Γ ⊢ x ↓ v</code>，则 <code>v ⊑ γ x</code>。 它的证明就是对语义的直接归纳：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-var-inv"></a><a id="plfa_plfa-part3-Compositional-12864" href="../Compositional/#plfa_plfa-part3-Compositional-12864" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12872" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12874" class="Symbol">∀</a> <a id="plfa_plfa-part3-Compositional-12876" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12877" href="../Compositional/#plfa_plfa-part3-Compositional-12877" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-12879" href="../Compositional/#plfa_plfa-part3-Compositional-12879" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12881" href="../Compositional/#plfa_plfa-part3-Compositional-12881" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-12882" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12884" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12885" href="../Compositional/#plfa_plfa-part3-Compositional-12885" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12887" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12889" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-12893" href="../Compositional/#plfa_plfa-part3-Compositional-12877" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12894" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12898" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12900" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12902" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12903" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-12905" href="../Compositional/#plfa_plfa-part3-Compositional-12881" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-12906" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12908" href="../Compositional/#plfa_plfa-part3-Compositional-12885" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12910" href="../Compositional/#plfa_plfa-part3-Compositional-12879" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-12916" class="Comment">-------------------</a>
  <a id="plfa_plfa-part3-Compositional-12938" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12940" href="../Compositional/#plfa_plfa-part3-Compositional-12879" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12942" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-12944" href="../Compositional/#plfa_plfa-part3-Compositional-12885" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12946" href="../Compositional/#plfa_plfa-part3-Compositional-12881" class="Bound">x</a>
<a id="plfa_plfa-part3-Compositional-12948" href="../Compositional/#plfa_plfa-part3-Compositional-12864" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12956" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12957" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Compositional-12960" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12962" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12964" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a>
<a id="plfa_plfa-part3-Compositional-12971" href="../Compositional/#plfa_plfa-part3-Compositional-12864" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12979" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12980" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-12988" href="../Compositional/#plfa_plfa-part3-Compositional-12988" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-12991" href="../Compositional/#plfa_plfa-part3-Compositional-12991" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-12993" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12995" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12997" href="../Denotational/#plfa_plfa-part3-Denotational-5484" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-13006" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13007" href="../Compositional/#plfa_plfa-part3-Compositional-12864" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13015" href="../Compositional/#plfa_plfa-part3-Compositional-12988" class="Bound">d₁</a><a id="plfa_plfa-part3-Compositional-13017" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13019" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13020" href="../Compositional/#plfa_plfa-part3-Compositional-12864" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13028" href="../Compositional/#plfa_plfa-part3-Compositional-12991" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-13030" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-13032" href="../Compositional/#plfa_plfa-part3-Compositional-12864" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13040" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13041" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-13045" href="../Compositional/#plfa_plfa-part3-Compositional-13045" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-13047" href="../Compositional/#plfa_plfa-part3-Compositional-13047" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-13049" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13051" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-13053" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-13061" href="../Compositional/#plfa_plfa-part3-Compositional-13047" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-13064" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13065" href="../Compositional/#plfa_plfa-part3-Compositional-12864" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13073" href="../Compositional/#plfa_plfa-part3-Compositional-13045" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-13074" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-13076" href="../Compositional/#plfa_plfa-part3-Compositional-12864" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13084" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-13092" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-13094" href="../Denotational/#plfa_plfa-part3-Denotational-5459" class="InductiveConstructor">⊑-bot</a>
</pre><p>为了完善语义等式，我们建立以下变量等式：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-var-equiv"></a><a id="plfa_plfa-part3-Compositional-13228" href="../Compositional/#plfa_plfa-part3-Compositional-13228" class="Function">var-equiv</a> <a id="plfa_plfa-part3-Compositional-13238" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13240" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-13242" href="../Compositional/#plfa_plfa-part3-Compositional-13242" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-13243" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13245" href="../Compositional/#plfa_plfa-part3-Compositional-13245" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-13247" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13249" href="../Compositional/#plfa_plfa-part3-Compositional-13242" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13251" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Compositional-13253" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-13254" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13256" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13258" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13260" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13261" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-13263" href="../Compositional/#plfa_plfa-part3-Compositional-13245" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-13264" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13266" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-13268" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-13271" href="../Compositional/#plfa_plfa-part3-Compositional-13271" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-13273" href="../Compositional/#plfa_plfa-part3-Compositional-13273" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-13275" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13277" href="../Compositional/#plfa_plfa-part3-Compositional-13273" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-13279" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-13281" href="../Compositional/#plfa_plfa-part3-Compositional-13271" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-13283" href="../Compositional/#plfa_plfa-part3-Compositional-13245" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-13284" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-13286" href="../Compositional/#plfa_plfa-part3-Compositional-13228" class="Function">var-equiv</a> <a id="plfa_plfa-part3-Compositional-13296" href="../Compositional/#plfa_plfa-part3-Compositional-13296" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-13298" href="../Compositional/#plfa_plfa-part3-Compositional-13298" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-13300" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-13302" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-13304" href="../Compositional/#plfa_plfa-part3-Compositional-12864" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13312" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-13314" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-13317" href="../Compositional/#plfa_plfa-part3-Compositional-13317" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-13320" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13322" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-13326" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Compositional-13330" href="../Compositional/#plfa_plfa-part3-Compositional-13317" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-13332" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13334" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="合同性">合同性</h2><p>本章的主要工作已经完成：我们建立了语义等式来展示指称语义是如何组合的。 在本节和下一节中，我们将利用这些等式来证明一些推论：指称相等满足<strong>合同性（congruence）</strong>， 并证明指称具有<strong>可组合性（compositionality property）</strong>， 该性质指出在同一语境中，两个指称相等的项会产生两个指称相等的程序 。</p><p>我们首先证明指称相等对 λ-抽象满足合同性：<code>ℰ N ≃ ℰ N′</code> 蕴含 <code>ℰ (ƛ N) ≃ ℰ (ƛ N′)</code>。我们用 <code>lam-equiv</code> 等式将这个问题简化为 <code>ℱ</code> 是否满足合同性：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱ-cong"></a><a id="plfa_plfa-part3-Compositional-14365" href="../Compositional/#plfa_plfa-part3-Compositional-14365" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-14372" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14374" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-14376" href="../Compositional/#plfa_plfa-part3-Compositional-14376" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14377" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14379" href="../Compositional/#plfa_plfa-part3-Compositional-14379" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14381" href="../Compositional/#plfa_plfa-part3-Compositional-14381" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14384" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14386" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-14397" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14398" href="../Compositional/#plfa_plfa-part3-Compositional-14376" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14400" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14402" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-14403" class="Symbol">)}</a>
  <a id="plfa_plfa-part3-Compositional-14408" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14410" href="../Compositional/#plfa_plfa-part3-Compositional-14379" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14412" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-14414" href="../Compositional/#plfa_plfa-part3-Compositional-14381" class="Bound">D′</a>
    <a id="plfa_plfa-part3-Compositional-14421" class="Comment">-----------</a>
  <a id="plfa_plfa-part3-Compositional-14435" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14437" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14439" href="../Compositional/#plfa_plfa-part3-Compositional-14379" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14441" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-14443" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14445" href="../Compositional/#plfa_plfa-part3-Compositional-14381" class="Bound">D′</a>
<a id="plfa_plfa-part3-Compositional-14448" href="../Compositional/#plfa_plfa-part3-Compositional-14365" class="Function">ℱ-cong</a><a id="plfa_plfa-part3-Compositional-14454" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14455" href="../Compositional/#plfa_plfa-part3-Compositional-14455" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14456" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14458" href="../Compositional/#plfa_plfa-part3-Compositional-14458" class="Bound">D≃D′</a> <a id="plfa_plfa-part3-Compositional-14463" href="../Compositional/#plfa_plfa-part3-Compositional-14463" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14465" href="../Compositional/#plfa_plfa-part3-Compositional-14465" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-14467" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-14471" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-14473" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-14476" href="../Compositional/#plfa_plfa-part3-Compositional-14476" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14478" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14480" href="../Compositional/#plfa_plfa-part3-Compositional-14543" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14482" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14483" href="../Compositional/#plfa_plfa-part3-Compositional-14463" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14484" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14486" href="../Compositional/#plfa_plfa-part3-Compositional-14465" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14487" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14489" href="../Compositional/#plfa_plfa-part3-Compositional-14476" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14491" href="../Compositional/#plfa_plfa-part3-Compositional-14458" class="Bound">D≃D′</a><a id="plfa_plfa-part3-Compositional-14495" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14497" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14499" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-14502" href="../Compositional/#plfa_plfa-part3-Compositional-14502" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14504" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14506" href="../Compositional/#plfa_plfa-part3-Compositional-14543" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14508" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14509" href="../Compositional/#plfa_plfa-part3-Compositional-14463" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14510" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14512" href="../Compositional/#plfa_plfa-part3-Compositional-14465" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14513" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14515" href="../Compositional/#plfa_plfa-part3-Compositional-14502" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14517" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14518" href="../Denotational/#plfa_plfa-part3-Denotational-22793" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-14524" href="../Compositional/#plfa_plfa-part3-Compositional-14458" class="Bound">D≃D′</a><a id="plfa_plfa-part3-Compositional-14528" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-14531" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Compositional-14535" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-14543" href="../Compositional/#plfa_plfa-part3-Compositional-14543" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14546" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14548" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-14550" href="../Compositional/#plfa_plfa-part3-Compositional-14550" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14552" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14554" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-14558" href="../Compositional/#plfa_plfa-part3-Compositional-14455" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14559" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14561" href="../Compositional/#plfa_plfa-part3-Compositional-14561" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14562" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14564" href="../Compositional/#plfa_plfa-part3-Compositional-14564" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14566" href="../Compositional/#plfa_plfa-part3-Compositional-14566" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14569" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14571" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-14582" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14583" href="../Compositional/#plfa_plfa-part3-Compositional-14455" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14585" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14587" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-14588" class="Symbol">)}</a>
    <a id="plfa_plfa-part3-Compositional-14595" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14597" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14599" href="../Compositional/#plfa_plfa-part3-Compositional-14564" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14601" href="../Compositional/#plfa_plfa-part3-Compositional-14550" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14603" href="../Compositional/#plfa_plfa-part3-Compositional-14561" class="Bound">v</a>  <a id="plfa_plfa-part3-Compositional-14606" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-14609" href="../Compositional/#plfa_plfa-part3-Compositional-14564" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14611" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-14613" href="../Compositional/#plfa_plfa-part3-Compositional-14566" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14616" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14618" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14620" href="../Compositional/#plfa_plfa-part3-Compositional-14566" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14623" href="../Compositional/#plfa_plfa-part3-Compositional-14550" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14625" href="../Compositional/#plfa_plfa-part3-Compositional-14561" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-14629" href="../Compositional/#plfa_plfa-part3-Compositional-14543" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14632" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14633" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-14635" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14637" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-14638" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14640" href="../Compositional/#plfa_plfa-part3-Compositional-14640" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-14643" href="../Compositional/#plfa_plfa-part3-Compositional-14643" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14647" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14649" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a>
  <a id="plfa_plfa-part3-Compositional-14654" href="../Compositional/#plfa_plfa-part3-Compositional-14543" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14657" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14658" href="../Compositional/#plfa_plfa-part3-Compositional-14658" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14659" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14661" href="../Compositional/#plfa_plfa-part3-Compositional-14661" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-14663" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-14665" href="../Compositional/#plfa_plfa-part3-Compositional-14665" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14666" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14668" href="../Compositional/#plfa_plfa-part3-Compositional-14668" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-14671" href="../Compositional/#plfa_plfa-part3-Compositional-14671" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14675" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14677" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-14683" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14684" href="../Compositional/#plfa_plfa-part3-Compositional-14671" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14688" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14689" href="../Compositional/#plfa_plfa-part3-Compositional-14658" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14691" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-14694" href="../Compositional/#plfa_plfa-part3-Compositional-14661" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14695" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14697" href="../Compositional/#plfa_plfa-part3-Compositional-14665" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14698" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14700" href="../Compositional/#plfa_plfa-part3-Compositional-14668" class="Bound">fd</a>
  <a id="plfa_plfa-part3-Compositional-14705" href="../Compositional/#plfa_plfa-part3-Compositional-14543" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14708" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14709" href="../Compositional/#plfa_plfa-part3-Compositional-14709" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14710" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14712" href="../Compositional/#plfa_plfa-part3-Compositional-14712" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-14714" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-14716" href="../Compositional/#plfa_plfa-part3-Compositional-14716" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14717" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14719" href="../Compositional/#plfa_plfa-part3-Compositional-14719" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-14722" href="../Compositional/#plfa_plfa-part3-Compositional-14722" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14726" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14728" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-14730" href="../Compositional/#plfa_plfa-part3-Compositional-14543" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14732" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14733" href="../Compositional/#plfa_plfa-part3-Compositional-14709" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14734" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14736" href="../Compositional/#plfa_plfa-part3-Compositional-14712" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-14737" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14739" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14740" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-14746" href="../Compositional/#plfa_plfa-part3-Compositional-14719" class="Bound">fd</a><a id="plfa_plfa-part3-Compositional-14748" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14750" href="../Compositional/#plfa_plfa-part3-Compositional-14722" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14754" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14756" href="../Compositional/#plfa_plfa-part3-Compositional-14543" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14758" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14759" href="../Compositional/#plfa_plfa-part3-Compositional-14709" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14760" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14762" href="../Compositional/#plfa_plfa-part3-Compositional-14716" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14763" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14765" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14766" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="plfa_plfa-part3-Compositional-14772" href="../Compositional/#plfa_plfa-part3-Compositional-14719" class="Bound">fd</a><a id="plfa_plfa-part3-Compositional-14774" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14776" href="../Compositional/#plfa_plfa-part3-Compositional-14722" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14780" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
</pre><p><code>ℱ-cong</code> 的证明使用了 <code>ℱ≃</code> 来处理「当且仅当」的两个方向。 该引理直接通过对值 <code>v</code> 进行归纳得证。</p><p>现在我们通过直白的等式推理证明 λ-抽象满足合同性：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lam-cong"></a><a id="plfa_plfa-part3-Compositional-15149" href="../Compositional/#plfa_plfa-part3-Compositional-15149" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-15158" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15160" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-15162" href="../Compositional/#plfa_plfa-part3-Compositional-15162" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15163" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15165" href="../Compositional/#plfa_plfa-part3-Compositional-15165" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-15167" href="../Compositional/#plfa_plfa-part3-Compositional-15167" class="Bound">N′</a> <a id="plfa_plfa-part3-Compositional-15170" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15172" href="../Compositional/#plfa_plfa-part3-Compositional-15162" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-15174" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-15176" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-15178" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-15180" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-15181" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-15185" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15187" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15189" href="../Compositional/#plfa_plfa-part3-Compositional-15165" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-15191" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15193" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15195" href="../Compositional/#plfa_plfa-part3-Compositional-15167" class="Bound">N′</a>
    <a id="plfa_plfa-part3-Compositional-15202" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Compositional-15222" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15224" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15226" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15227" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15229" href="../Compositional/#plfa_plfa-part3-Compositional-15165" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15230" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15232" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15234" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15236" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15237" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15239" href="../Compositional/#plfa_plfa-part3-Compositional-15167" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15241" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-15243" href="../Compositional/#plfa_plfa-part3-Compositional-15149" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-15252" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15253" href="../Compositional/#plfa_plfa-part3-Compositional-15253" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15254" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15256" href="../Compositional/#plfa_plfa-part3-Compositional-15256" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15257" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15259" href="../Compositional/#plfa_plfa-part3-Compositional-15259" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15261" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15263" href="../Compositional/#plfa_plfa-part3-Compositional-15263" class="Bound">N≃N′</a> <a id="plfa_plfa-part3-Compositional-15268" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15272" href="../Denotational/#plfa_plfa-part3-Denotational-23553" class="Function Operator">start</a>
    <a id="plfa_plfa-part3-Compositional-15282" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15284" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15285" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15287" href="../Compositional/#plfa_plfa-part3-Compositional-15256" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15288" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15292" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-15295" href="../Compositional/#plfa_plfa-part3-Compositional-5292" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-15305" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-15311" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-15313" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15314" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15316" href="../Compositional/#plfa_plfa-part3-Compositional-15256" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15317" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15321" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-15324" href="../Compositional/#plfa_plfa-part3-Compositional-14365" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-15331" href="../Compositional/#plfa_plfa-part3-Compositional-15263" class="Bound">N≃N′</a> <a id="plfa_plfa-part3-Compositional-15336" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-15342" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-15344" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15345" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15347" href="../Compositional/#plfa_plfa-part3-Compositional-15259" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15349" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15353" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-15356" href="../Denotational/#plfa_plfa-part3-Denotational-22793" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-15362" href="../Compositional/#plfa_plfa-part3-Compositional-5292" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-15372" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-15378" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15380" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15381" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15383" href="../Compositional/#plfa_plfa-part3-Compositional-15259" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15385" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15389" href="../Denotational/#plfa_plfa-part3-Denotational-23891" class="Function Operator">☐</a>
</pre><p>接下来我们证明指称相等对于应用也满足合同性：<code>ℰ L ≃ ℰ L′</code> 和 <code>ℰ M ≃ ℰ M′</code> 蕴含 <code>ℰ (L · M) ≃ ℰ (L′ · M′)</code>。等式 <code>app-equiv</code> 将其归约为 <code>●</code> 运算符是否满足合同性的问题。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-●-cong"></a><a id="plfa_plfa-part3-Compositional-15775" href="../Compositional/#plfa_plfa-part3-Compositional-15775" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-15782" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15784" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-15786" href="../Compositional/#plfa_plfa-part3-Compositional-15786" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15787" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15789" href="../Compositional/#plfa_plfa-part3-Compositional-15789" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-15792" href="../Compositional/#plfa_plfa-part3-Compositional-15792" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-15796" href="../Compositional/#plfa_plfa-part3-Compositional-15796" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-15799" href="../Compositional/#plfa_plfa-part3-Compositional-15799" class="Bound">D₂′</a> <a id="plfa_plfa-part3-Compositional-15803" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15805" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-15816" href="../Compositional/#plfa_plfa-part3-Compositional-15786" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15817" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-15821" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15823" href="../Compositional/#plfa_plfa-part3-Compositional-15789" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-15826" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15828" href="../Compositional/#plfa_plfa-part3-Compositional-15792" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-15832" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15834" href="../Compositional/#plfa_plfa-part3-Compositional-15796" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-15837" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15839" href="../Compositional/#plfa_plfa-part3-Compositional-15799" class="Bound">D₂′</a>
  <a id="plfa_plfa-part3-Compositional-15845" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15847" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15848" href="../Compositional/#plfa_plfa-part3-Compositional-15789" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-15851" href="../Compositional/#plfa_plfa-part3-Compositional-6967" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-15853" href="../Compositional/#plfa_plfa-part3-Compositional-15796" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-15855" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15857" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15859" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15860" href="../Compositional/#plfa_plfa-part3-Compositional-15792" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-15864" href="../Compositional/#plfa_plfa-part3-Compositional-6967" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-15866" href="../Compositional/#plfa_plfa-part3-Compositional-15799" class="Bound">D₂′</a><a id="plfa_plfa-part3-Compositional-15869" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-15871" href="../Compositional/#plfa_plfa-part3-Compositional-15775" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-15878" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15879" href="../Compositional/#plfa_plfa-part3-Compositional-15879" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15880" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15882" href="../Compositional/#plfa_plfa-part3-Compositional-15882" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-15885" href="../Compositional/#plfa_plfa-part3-Compositional-15885" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-15888" href="../Compositional/#plfa_plfa-part3-Compositional-15888" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-15890" href="../Compositional/#plfa_plfa-part3-Compositional-15890" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-15892" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15894" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-15896" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15899" href="../Compositional/#plfa_plfa-part3-Compositional-15899" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15901" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15903" href="../Compositional/#plfa_plfa-part3-Compositional-15989" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-15906" href="../Compositional/#plfa_plfa-part3-Compositional-15899" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15908" href="../Compositional/#plfa_plfa-part3-Compositional-15882" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-15911" href="../Compositional/#plfa_plfa-part3-Compositional-15885" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-15913" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15915" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a>
                         <a id="plfa_plfa-part3-Compositional-15942" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15945" href="../Compositional/#plfa_plfa-part3-Compositional-15945" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15947" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15949" href="../Compositional/#plfa_plfa-part3-Compositional-15989" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-15952" href="../Compositional/#plfa_plfa-part3-Compositional-15945" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15954" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15955" href="../Denotational/#plfa_plfa-part3-Denotational-22793" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-15961" href="../Compositional/#plfa_plfa-part3-Compositional-15882" class="Bound">d1</a><a id="plfa_plfa-part3-Compositional-15963" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15965" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15966" href="../Denotational/#plfa_plfa-part3-Denotational-22793" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-15972" href="../Compositional/#plfa_plfa-part3-Compositional-15885" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-15974" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-15977" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Compositional-15981" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-15989" href="../Compositional/#plfa_plfa-part3-Compositional-15989" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-15992" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15994" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-15996" href="../Compositional/#plfa_plfa-part3-Compositional-15996" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-15998" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16000" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-16004" href="../Compositional/#plfa_plfa-part3-Compositional-15879" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16005" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16007" href="../Compositional/#plfa_plfa-part3-Compositional-16007" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-16008" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16010" href="../Compositional/#plfa_plfa-part3-Compositional-16010" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-16013" href="../Compositional/#plfa_plfa-part3-Compositional-16013" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-16017" href="../Compositional/#plfa_plfa-part3-Compositional-16017" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-16020" href="../Compositional/#plfa_plfa-part3-Compositional-16020" class="Bound">D₂′</a> <a id="plfa_plfa-part3-Compositional-16024" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16026" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-16037" href="../Compositional/#plfa_plfa-part3-Compositional-15879" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16038" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Compositional-16044" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16046" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16047" href="../Compositional/#plfa_plfa-part3-Compositional-16010" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-16050" href="../Compositional/#plfa_plfa-part3-Compositional-6967" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16052" href="../Compositional/#plfa_plfa-part3-Compositional-16017" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-16054" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16056" href="../Compositional/#plfa_plfa-part3-Compositional-15996" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16058" href="../Compositional/#plfa_plfa-part3-Compositional-16007" class="Bound">v</a>  <a id="plfa_plfa-part3-Compositional-16061" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-16064" href="../Compositional/#plfa_plfa-part3-Compositional-16010" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-16067" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16069" href="../Compositional/#plfa_plfa-part3-Compositional-16013" class="Bound">D₁′</a>  <a id="plfa_plfa-part3-Compositional-16074" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-16077" href="../Compositional/#plfa_plfa-part3-Compositional-16017" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-16080" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16082" href="../Compositional/#plfa_plfa-part3-Compositional-16020" class="Bound">D₂′</a>
    <a id="plfa_plfa-part3-Compositional-16090" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16092" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16093" href="../Compositional/#plfa_plfa-part3-Compositional-16013" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-16097" href="../Compositional/#plfa_plfa-part3-Compositional-6967" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16099" href="../Compositional/#plfa_plfa-part3-Compositional-16020" class="Bound">D₂′</a><a id="plfa_plfa-part3-Compositional-16102" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16104" href="../Compositional/#plfa_plfa-part3-Compositional-15996" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16106" href="../Compositional/#plfa_plfa-part3-Compositional-16007" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-16110" href="../Compositional/#plfa_plfa-part3-Compositional-15989" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-16113" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16114" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-16119" href="../Compositional/#plfa_plfa-part3-Compositional-16119" class="Bound">v⊑⊥</a><a id="plfa_plfa-part3-Compositional-16122" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16124" href="../Compositional/#plfa_plfa-part3-Compositional-16124" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-16128" href="../Compositional/#plfa_plfa-part3-Compositional-16128" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-16132" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16134" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-16139" href="../Compositional/#plfa_plfa-part3-Compositional-16119" class="Bound">v⊑⊥</a>
  <a id="plfa_plfa-part3-Compositional-16145" href="../Compositional/#plfa_plfa-part3-Compositional-15989" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-16148" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16149" href="../Compositional/#plfa_plfa-part3-Compositional-16149" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-16150" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16152" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16153" href="../Compositional/#plfa_plfa-part3-Compositional-16153" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-16154" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16156" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16157" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-16162" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16164" href="../Compositional/#plfa_plfa-part3-Compositional-16164" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16166" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16168" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16170" href="../Compositional/#plfa_plfa-part3-Compositional-16170" class="Bound">Dv↦w</a> <a id="plfa_plfa-part3-Compositional-16175" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16177" href="../Compositional/#plfa_plfa-part3-Compositional-16177" class="Bound">Dv</a> <a id="plfa_plfa-part3-Compositional-16180" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-16182" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-16183" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16185" href="../Compositional/#plfa_plfa-part3-Compositional-16185" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-16189" href="../Compositional/#plfa_plfa-part3-Compositional-16189" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-16193" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Compositional-16199" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-16204" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16206" href="../Compositional/#plfa_plfa-part3-Compositional-16164" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16208" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16210" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16212" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-16218" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16219" href="../Compositional/#plfa_plfa-part3-Compositional-16185" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-16223" href="../Compositional/#plfa_plfa-part3-Compositional-16149" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16225" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16226" href="../Compositional/#plfa_plfa-part3-Compositional-16164" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16228" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-16230" href="../Compositional/#plfa_plfa-part3-Compositional-16153" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-16231" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-16234" href="../Compositional/#plfa_plfa-part3-Compositional-16170" class="Bound">Dv↦w</a> <a id="plfa_plfa-part3-Compositional-16239" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16241" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-16247" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16248" href="../Compositional/#plfa_plfa-part3-Compositional-16189" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-16252" href="../Compositional/#plfa_plfa-part3-Compositional-16149" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16254" href="../Compositional/#plfa_plfa-part3-Compositional-16164" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-16255" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16257" href="../Compositional/#plfa_plfa-part3-Compositional-16177" class="Bound">Dv</a> <a id="plfa_plfa-part3-Compositional-16260" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-16262" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
</pre><p>同样，「当且仅当」的两个方向需要通过一个引理来证明，而该引理则通过对 <code>(D₁ ● D₂) γ v</code> 进行情况分析来证明。</p><p>根据 <code>●</code> 的合同性，我们可以直接通过等式推理证明应用也满足合同性。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-app-cong"></a><a id="plfa_plfa-part3-Compositional-16631" href="../Compositional/#plfa_plfa-part3-Compositional-16631" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-16640" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16642" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-16644" href="../Compositional/#plfa_plfa-part3-Compositional-16644" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16645" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16647" href="../Compositional/#plfa_plfa-part3-Compositional-16647" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16649" href="../Compositional/#plfa_plfa-part3-Compositional-16649" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16652" href="../Compositional/#plfa_plfa-part3-Compositional-16652" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16654" href="../Compositional/#plfa_plfa-part3-Compositional-16654" class="Bound">M′</a> <a id="plfa_plfa-part3-Compositional-16657" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16659" href="../Compositional/#plfa_plfa-part3-Compositional-16644" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-16661" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-16663" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-16664" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-16668" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16670" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16672" href="../Compositional/#plfa_plfa-part3-Compositional-16647" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16674" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16676" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16678" href="../Compositional/#plfa_plfa-part3-Compositional-16649" class="Bound">L′</a>
  <a id="plfa_plfa-part3-Compositional-16683" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16685" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16687" href="../Compositional/#plfa_plfa-part3-Compositional-16652" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16689" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16691" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16693" href="../Compositional/#plfa_plfa-part3-Compositional-16654" class="Bound">M′</a>
    <a id="plfa_plfa-part3-Compositional-16700" class="Comment">-------------------------</a>
  <a id="plfa_plfa-part3-Compositional-16728" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16730" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16732" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16733" href="../Compositional/#plfa_plfa-part3-Compositional-16647" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16735" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16737" href="../Compositional/#plfa_plfa-part3-Compositional-16652" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16738" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16740" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16742" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16744" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16745" href="../Compositional/#plfa_plfa-part3-Compositional-16649" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16748" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16750" href="../Compositional/#plfa_plfa-part3-Compositional-16654" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-16752" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-16754" href="../Compositional/#plfa_plfa-part3-Compositional-16631" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-16763" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16764" href="../Compositional/#plfa_plfa-part3-Compositional-16764" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16765" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16767" href="../Compositional/#plfa_plfa-part3-Compositional-16767" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-16768" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16770" href="../Compositional/#plfa_plfa-part3-Compositional-16770" class="Bound">L′</a><a id="plfa_plfa-part3-Compositional-16772" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16774" href="../Compositional/#plfa_plfa-part3-Compositional-16774" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16775" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16777" href="../Compositional/#plfa_plfa-part3-Compositional-16777" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-16779" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16781" href="../Compositional/#plfa_plfa-part3-Compositional-16781" class="Bound">L≅L′</a> <a id="plfa_plfa-part3-Compositional-16786" href="../Compositional/#plfa_plfa-part3-Compositional-16786" class="Bound">M≅M′</a> <a id="plfa_plfa-part3-Compositional-16791" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-16795" href="../Denotational/#plfa_plfa-part3-Denotational-23553" class="Function Operator">start</a>
    <a id="plfa_plfa-part3-Compositional-16805" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16807" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16808" href="../Compositional/#plfa_plfa-part3-Compositional-16767" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16810" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16812" href="../Compositional/#plfa_plfa-part3-Compositional-16774" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16813" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16817" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16820" href="../Compositional/#plfa_plfa-part3-Compositional-12550" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-16830" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16836" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16838" href="../Compositional/#plfa_plfa-part3-Compositional-16767" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16840" href="../Compositional/#plfa_plfa-part3-Compositional-6967" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16842" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16844" href="../Compositional/#plfa_plfa-part3-Compositional-16774" class="Bound">M</a>
  <a id="plfa_plfa-part3-Compositional-16848" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16851" href="../Compositional/#plfa_plfa-part3-Compositional-15775" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-16858" href="../Compositional/#plfa_plfa-part3-Compositional-16781" class="Bound">L≅L′</a> <a id="plfa_plfa-part3-Compositional-16863" href="../Compositional/#plfa_plfa-part3-Compositional-16786" class="Bound">M≅M′</a> <a id="plfa_plfa-part3-Compositional-16868" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16874" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16876" href="../Compositional/#plfa_plfa-part3-Compositional-16770" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16879" href="../Compositional/#plfa_plfa-part3-Compositional-6967" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16881" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16883" href="../Compositional/#plfa_plfa-part3-Compositional-16777" class="Bound">M′</a>
  <a id="plfa_plfa-part3-Compositional-16888" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16891" href="../Denotational/#plfa_plfa-part3-Denotational-22793" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-16897" href="../Compositional/#plfa_plfa-part3-Compositional-12550" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-16907" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16913" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16915" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16916" href="../Compositional/#plfa_plfa-part3-Compositional-16770" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16919" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16921" href="../Compositional/#plfa_plfa-part3-Compositional-16777" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-16923" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16927" href="../Denotational/#plfa_plfa-part3-Denotational-23891" class="Function Operator">☐</a>
</pre><h2 id="可组合性">可组合性</h2><p><strong>可组合性（Compositionality Property）</strong>说明了在同一语境下， 两个指称相等的项会产生两个指称相等的程序。为准确起见，我们定义了 「语境」和「在语境下」的含义。</p><p><strong>语境（Context）</strong>是一个带洞的程序。以下数据定义 <code>Ctx</code> 将这个概念表示了出来。 我们使用两个变量语境来索引 <code>Ctx</code> 数据类型：一个表示洞，另一个表示填洞所产生的项。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-17926" class="Keyword">data</a> <a id="plfa_plfa-part3-Compositional-Ctx"></a><a id="plfa_plfa-part3-Compositional-17931" href="../Compositional/#plfa_plfa-part3-Compositional-17931" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-17935" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-17937" href="../Untyped/#plfa_plfa-part2-Untyped-3848" class="Datatype">Context</a> <a id="plfa_plfa-part3-Compositional-17945" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-17947" href="../Untyped/#plfa_plfa-part2-Untyped-3848" class="Datatype">Context</a> <a id="plfa_plfa-part3-Compositional-17955" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-17957" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part3-Compositional-17961" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-hole"></a><a id="plfa_plfa-part3-Compositional-17969" href="../Compositional/#plfa_plfa-part3-Compositional-17969" class="InductiveConstructor">ctx-hole</a> <a id="plfa_plfa-part3-Compositional-17978" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-17980" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-17982" href="../Compositional/#plfa_plfa-part3-Compositional-17982" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-17983" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-17985" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-17987" href="../Compositional/#plfa_plfa-part3-Compositional-17931" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-17991" href="../Compositional/#plfa_plfa-part3-Compositional-17982" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-17993" href="../Compositional/#plfa_plfa-part3-Compositional-17982" class="Bound">Γ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-lam"></a><a id="plfa_plfa-part3-Compositional-17997" href="../Compositional/#plfa_plfa-part3-Compositional-17997" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-18005" class="Symbol">:</a>  <a id="plfa_plfa-part3-Compositional-18008" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-18010" href="../Compositional/#plfa_plfa-part3-Compositional-18010" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18012" href="../Compositional/#plfa_plfa-part3-Compositional-18012" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-18013" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-18015" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18017" href="../Compositional/#plfa_plfa-part3-Compositional-17931" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18021" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-18022" href="../Compositional/#plfa_plfa-part3-Compositional-18010" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18024" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-18026" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-18027" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-18029" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-18030" href="../Compositional/#plfa_plfa-part3-Compositional-18012" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18032" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-18034" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-18035" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-18037" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18039" href="../Compositional/#plfa_plfa-part3-Compositional-17931" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18043" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-18044" href="../Compositional/#plfa_plfa-part3-Compositional-18010" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18046" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-18048" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-18049" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-18051" href="../Compositional/#plfa_plfa-part3-Compositional-18012" class="Bound">Δ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-app-L"></a><a id="plfa_plfa-part3-Compositional-18055" href="../Compositional/#plfa_plfa-part3-Compositional-18055" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-18065" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-18067" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-18069" href="../Compositional/#plfa_plfa-part3-Compositional-18069" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18071" href="../Compositional/#plfa_plfa-part3-Compositional-18071" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-18072" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-18074" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18076" href="../Compositional/#plfa_plfa-part3-Compositional-17931" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18080" href="../Compositional/#plfa_plfa-part3-Compositional-18069" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18082" href="../Compositional/#plfa_plfa-part3-Compositional-18071" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18084" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18086" href="../Compositional/#plfa_plfa-part3-Compositional-18071" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18088" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-18090" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-18092" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18094" href="../Compositional/#plfa_plfa-part3-Compositional-17931" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18098" href="../Compositional/#plfa_plfa-part3-Compositional-18069" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18100" href="../Compositional/#plfa_plfa-part3-Compositional-18071" class="Bound">Δ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-app-R"></a><a id="plfa_plfa-part3-Compositional-18104" href="../Compositional/#plfa_plfa-part3-Compositional-18104" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-18114" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-18116" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-18118" href="../Compositional/#plfa_plfa-part3-Compositional-18118" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18120" href="../Compositional/#plfa_plfa-part3-Compositional-18120" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-18121" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-18123" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18125" href="../Compositional/#plfa_plfa-part3-Compositional-18120" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18127" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-18129" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-18131" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18133" href="../Compositional/#plfa_plfa-part3-Compositional-17931" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18137" href="../Compositional/#plfa_plfa-part3-Compositional-18118" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18139" href="../Compositional/#plfa_plfa-part3-Compositional-18120" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18141" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18143" href="../Compositional/#plfa_plfa-part3-Compositional-17931" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18147" href="../Compositional/#plfa_plfa-part3-Compositional-18118" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18149" href="../Compositional/#plfa_plfa-part3-Compositional-18120" class="Bound">Δ</a>
</pre><ul><li>构造子 <code>ctx-hole</code> 表示洞，且在此情况中洞的变量语境 与填洞所产生的项的变量语境相同。</li></ul><ul><li>构造子 <code>ctx-lam</code> 接受一个 <code>Ctx</code> 并在顶部添加 λ-抽象来产生一个更大的 <code>Ctx</code>。 洞的变量语境保持不变，而我们从结果项的语境中删除一个变量，因为它被此 λ-抽象约束。</li></ul><ul><li>应用有两种构造，<code>ctx-app-L</code> 和 <code>ctx-app-R</code>。<code>ctx-app-L</code> 对应洞位于左侧项（运算符）内的情况，<code>ctx-app-R</code> 对应洞位于右侧项（运算数）内的情况。</li></ul><p>将项插入到某个语境下的操作由以下 <code>plug</code> 函数定义，它是通过对语境进行递归来定义的：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-plug"></a><a id="plfa_plfa-part3-Compositional-19360" href="../Compositional/#plfa_plfa-part3-Compositional-19360" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19365" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19367" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-19369" href="../Compositional/#plfa_plfa-part3-Compositional-19369" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-19370" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-19372" href="../Compositional/#plfa_plfa-part3-Compositional-19372" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-19373" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-19375" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19377" href="../Compositional/#plfa_plfa-part3-Compositional-17931" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-19381" href="../Compositional/#plfa_plfa-part3-Compositional-19369" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19383" href="../Compositional/#plfa_plfa-part3-Compositional-19372" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-19385" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19387" href="../Compositional/#plfa_plfa-part3-Compositional-19369" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19389" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-19391" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-19393" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19395" href="../Compositional/#plfa_plfa-part3-Compositional-19372" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-19397" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-19399" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a>
<a id="plfa_plfa-part3-Compositional-19401" href="../Compositional/#plfa_plfa-part3-Compositional-19360" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19406" href="../Compositional/#plfa_plfa-part3-Compositional-17969" class="InductiveConstructor">ctx-hole</a> <a id="plfa_plfa-part3-Compositional-19415" href="../Compositional/#plfa_plfa-part3-Compositional-19415" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19417" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19419" href="../Compositional/#plfa_plfa-part3-Compositional-19415" class="Bound">M</a>
<a id="plfa_plfa-part3-Compositional-19421" href="../Compositional/#plfa_plfa-part3-Compositional-19360" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19426" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19427" href="../Compositional/#plfa_plfa-part3-Compositional-17997" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-19435" href="../Compositional/#plfa_plfa-part3-Compositional-19435" class="Bound">C</a><a id="plfa_plfa-part3-Compositional-19436" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19438" href="../Compositional/#plfa_plfa-part3-Compositional-19438" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-19440" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19442" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-19444" href="../Compositional/#plfa_plfa-part3-Compositional-19360" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19449" href="../Compositional/#plfa_plfa-part3-Compositional-19435" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19451" href="../Compositional/#plfa_plfa-part3-Compositional-19438" class="Bound">N</a>
<a id="plfa_plfa-part3-Compositional-19453" href="../Compositional/#plfa_plfa-part3-Compositional-19360" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19458" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19459" href="../Compositional/#plfa_plfa-part3-Compositional-18055" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-19469" href="../Compositional/#plfa_plfa-part3-Compositional-19469" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19471" href="../Compositional/#plfa_plfa-part3-Compositional-19471" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-19472" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19474" href="../Compositional/#plfa_plfa-part3-Compositional-19474" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-19476" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19478" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19479" href="../Compositional/#plfa_plfa-part3-Compositional-19360" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19484" href="../Compositional/#plfa_plfa-part3-Compositional-19469" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19486" href="../Compositional/#plfa_plfa-part3-Compositional-19474" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-19487" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19489" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-19491" href="../Compositional/#plfa_plfa-part3-Compositional-19471" class="Bound">N</a>
<a id="plfa_plfa-part3-Compositional-19493" href="../Compositional/#plfa_plfa-part3-Compositional-19360" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19498" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19499" href="../Compositional/#plfa_plfa-part3-Compositional-18104" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-19509" href="../Compositional/#plfa_plfa-part3-Compositional-19509" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-19511" href="../Compositional/#plfa_plfa-part3-Compositional-19511" class="Bound">C</a><a id="plfa_plfa-part3-Compositional-19512" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19514" href="../Compositional/#plfa_plfa-part3-Compositional-19514" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19516" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19518" href="../Compositional/#plfa_plfa-part3-Compositional-19509" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-19520" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-19522" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19523" href="../Compositional/#plfa_plfa-part3-Compositional-19360" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19528" href="../Compositional/#plfa_plfa-part3-Compositional-19511" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19530" href="../Compositional/#plfa_plfa-part3-Compositional-19514" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-19531" class="Symbol">)</a>
</pre><p>我们接下来陈述并证明组合性原则：给定两个项 <code>M</code> 和 <code>N</code>，若它们的指称相等， 那么将它们插入到任意语境 <code>C</code> 中都会产生两个指称相等的程序：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-compositionality"></a><a id="plfa_plfa-part3-Compositional-19858" href="../Compositional/#plfa_plfa-part3-Compositional-19858" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-19875" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19877" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-19879" href="../Compositional/#plfa_plfa-part3-Compositional-19879" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19881" href="../Compositional/#plfa_plfa-part3-Compositional-19881" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-19882" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-19884" href="../Compositional/#plfa_plfa-part3-Compositional-19884" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19886" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19888" href="../Compositional/#plfa_plfa-part3-Compositional-17931" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-19892" href="../Compositional/#plfa_plfa-part3-Compositional-19879" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19894" href="../Compositional/#plfa_plfa-part3-Compositional-19881" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-19895" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-19897" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-19898" href="../Compositional/#plfa_plfa-part3-Compositional-19898" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19900" href="../Compositional/#plfa_plfa-part3-Compositional-19900" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-19902" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19904" href="../Compositional/#plfa_plfa-part3-Compositional-19879" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19906" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-19908" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-19909" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-19913" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19915" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19917" href="../Compositional/#plfa_plfa-part3-Compositional-19898" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19919" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-19921" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19923" href="../Compositional/#plfa_plfa-part3-Compositional-19900" class="Bound">N</a>
    <a id="plfa_plfa-part3-Compositional-19929" class="Comment">---------------------------</a>
  <a id="plfa_plfa-part3-Compositional-19959" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19961" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19963" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19964" href="../Compositional/#plfa_plfa-part3-Compositional-19360" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19969" href="../Compositional/#plfa_plfa-part3-Compositional-19884" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19971" href="../Compositional/#plfa_plfa-part3-Compositional-19898" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-19972" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19974" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-19976" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19978" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19979" href="../Compositional/#plfa_plfa-part3-Compositional-19360" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19984" href="../Compositional/#plfa_plfa-part3-Compositional-19884" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19986" href="../Compositional/#plfa_plfa-part3-Compositional-19900" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-19987" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-19989" href="../Compositional/#plfa_plfa-part3-Compositional-19858" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20006" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20007" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20009" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20011" href="../Compositional/#plfa_plfa-part3-Compositional-17969" class="InductiveConstructor">ctx-hole</a><a id="plfa_plfa-part3-Compositional-20019" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20021" href="../Compositional/#plfa_plfa-part3-Compositional-20021" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-20025" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-20029" href="../Compositional/#plfa_plfa-part3-Compositional-20021" class="Bound">M≃N</a>
<a id="plfa_plfa-part3-Compositional-20033" href="../Compositional/#plfa_plfa-part3-Compositional-19858" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20050" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20051" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20053" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20055" href="../Compositional/#plfa_plfa-part3-Compositional-17997" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-20063" href="../Compositional/#plfa_plfa-part3-Compositional-20063" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20065" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20067" href="../Compositional/#plfa_plfa-part3-Compositional-20067" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-20071" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-20075" href="../Compositional/#plfa_plfa-part3-Compositional-15149" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-20084" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-20085" href="../Compositional/#plfa_plfa-part3-Compositional-19858" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20102" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20103" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20105" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20107" href="../Compositional/#plfa_plfa-part3-Compositional-20063" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20109" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20111" href="../Compositional/#plfa_plfa-part3-Compositional-20067" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-20114" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-20116" href="../Compositional/#plfa_plfa-part3-Compositional-19858" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20133" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20134" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20136" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20138" href="../Compositional/#plfa_plfa-part3-Compositional-18055" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-20148" href="../Compositional/#plfa_plfa-part3-Compositional-20148" class="Bound">C′</a> <a id="plfa_plfa-part3-Compositional-20151" href="../Compositional/#plfa_plfa-part3-Compositional-20151" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-20152" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20154" href="../Compositional/#plfa_plfa-part3-Compositional-20154" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-20158" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-20162" href="../Compositional/#plfa_plfa-part3-Compositional-16631" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-20171" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-20172" href="../Compositional/#plfa_plfa-part3-Compositional-19858" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20189" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20190" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20192" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20194" href="../Compositional/#plfa_plfa-part3-Compositional-20148" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20196" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20198" href="../Compositional/#plfa_plfa-part3-Compositional-20154" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-20201" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20203" class="Symbol">λ</a> <a id="plfa_plfa-part3-Compositional-20205" href="../Compositional/#plfa_plfa-part3-Compositional-20205" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-20207" href="../Compositional/#plfa_plfa-part3-Compositional-20207" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-20209" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20211" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-20213" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20216" href="../Compositional/#plfa_plfa-part3-Compositional-20216" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20218" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20220" href="../Compositional/#plfa_plfa-part3-Compositional-20216" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20221" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20223" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-20225" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20228" href="../Compositional/#plfa_plfa-part3-Compositional-20228" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20230" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20232" href="../Compositional/#plfa_plfa-part3-Compositional-20228" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20233" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20235" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-20237" href="../Compositional/#plfa_plfa-part3-Compositional-19858" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20254" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20255" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20257" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20259" href="../Compositional/#plfa_plfa-part3-Compositional-18104" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-20269" href="../Compositional/#plfa_plfa-part3-Compositional-20269" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-20271" href="../Compositional/#plfa_plfa-part3-Compositional-20271" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20273" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20275" href="../Compositional/#plfa_plfa-part3-Compositional-20275" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-20279" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-20283" href="../Compositional/#plfa_plfa-part3-Compositional-16631" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-20292" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20295" href="../Compositional/#plfa_plfa-part3-Compositional-20295" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-20297" href="../Compositional/#plfa_plfa-part3-Compositional-20297" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-20299" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20301" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-20303" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20306" href="../Compositional/#plfa_plfa-part3-Compositional-20306" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20308" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20310" href="../Compositional/#plfa_plfa-part3-Compositional-20306" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20311" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20313" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-20315" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20318" href="../Compositional/#plfa_plfa-part3-Compositional-20318" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20320" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20322" href="../Compositional/#plfa_plfa-part3-Compositional-20318" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20323" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20325" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-20326" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20328" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-20329" href="../Compositional/#plfa_plfa-part3-Compositional-19858" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20346" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20347" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20349" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20351" href="../Compositional/#plfa_plfa-part3-Compositional-20271" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20353" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20355" href="../Compositional/#plfa_plfa-part3-Compositional-20275" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-20358" class="Symbol">)</a>
</pre><p>它可以通过直接对语境 <code>C</code> 进行归纳，用我们之前建立的合同性质 <code>lam-cong</code> 和 <code>app-cong</code> 来证明。</p><h2 id="指称语义作为函数来定义">指称语义作为函数来定义</h2><p>建立了 <code>var-equiv</code>、<code>lam-equiv</code> 和 <code>app-equiv</code> 三个等式后， 我们就能将指称语义定义为一个在输入项 <code>M</code> 上递归的函数。其实， 我们可以定义以下函数 <code>⟦ M ⟧</code>，利用辅助的柯里化函数 <code>ℱ</code>， 并分别在 λ-抽象和应用的情况下应用 <code>●</code> 函数来将项映射到指称。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-⟦_⟧"></a><a id="plfa_plfa-part3-Compositional-21211" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟦_⟧</a> <a id="plfa_plfa-part3-Compositional-21215" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21217" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-21219" href="../Compositional/#plfa_plfa-part3-Compositional-21219" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21220" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21222" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-21224" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21225" href="../Compositional/#plfa_plfa-part3-Compositional-21225" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21227" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21229" href="../Compositional/#plfa_plfa-part3-Compositional-21219" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-21231" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-21233" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-21234" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-21236" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-21238" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-21249" href="../Compositional/#plfa_plfa-part3-Compositional-21219" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-21251" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21253" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-21255" href="../Compositional/#plfa_plfa-part3-Compositional-21255" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-21257" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21259" href="../Compositional/#plfa_plfa-part3-Compositional-21259" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-21261" href="../Compositional/#plfa_plfa-part3-Compositional-21261" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-21263" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21265" href="../Compositional/#plfa_plfa-part3-Compositional-21261" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-21267" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-21269" href="../Compositional/#plfa_plfa-part3-Compositional-21259" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-21271" href="../Compositional/#plfa_plfa-part3-Compositional-21255" class="Bound">x</a>
<a id="plfa_plfa-part3-Compositional-21273" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21275" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21277" href="../Compositional/#plfa_plfa-part3-Compositional-21277" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21279" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21281" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21283" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-21285" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21287" href="../Compositional/#plfa_plfa-part3-Compositional-21277" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21289" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟧</a>
<a id="plfa_plfa-part3-Compositional-21291" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21293" href="../Compositional/#plfa_plfa-part3-Compositional-21293" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21295" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21297" href="../Compositional/#plfa_plfa-part3-Compositional-21297" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21299" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21301" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21303" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21305" href="../Compositional/#plfa_plfa-part3-Compositional-21293" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21307" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21309" href="../Compositional/#plfa_plfa-part3-Compositional-6967" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-21311" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21313" href="../Compositional/#plfa_plfa-part3-Compositional-21297" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21315" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟧</a>
</pre><p><code>ℰ M</code> 和 <code>⟦ M ⟧</code> 指称相等的证明可通过 <code>var-equiv</code>、<code>lam-equiv</code> 和 <code>app-equiv</code> 三个等式以及 <code>ℱ</code> 和 <code>●</code> 的合同性引理直接归纳得出。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰ≃⟦⟧"></a><a id="plfa_plfa-part3-Compositional-21646" href="../Compositional/#plfa_plfa-part3-Compositional-21646" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21651" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21653" class="Symbol">∀</a> <a id="plfa_plfa-part3-Compositional-21655" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21656" href="../Compositional/#plfa_plfa-part3-Compositional-21656" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21657" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21659" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21660" href="../Compositional/#plfa_plfa-part3-Compositional-21660" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21662" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21664" href="../Compositional/#plfa_plfa-part3-Compositional-21656" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-21666" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-21668" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-21669" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21671" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-21673" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21675" href="../Compositional/#plfa_plfa-part3-Compositional-21660" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21677" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-21679" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21681" href="../Compositional/#plfa_plfa-part3-Compositional-21660" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21683" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟧</a>
<a id="plfa_plfa-part3-Compositional-21685" href="../Compositional/#plfa_plfa-part3-Compositional-21646" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21690" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21691" href="../Compositional/#plfa_plfa-part3-Compositional-21691" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21692" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21694" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21695" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-21697" href="../Compositional/#plfa_plfa-part3-Compositional-21697" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-21698" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21700" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21702" href="../Compositional/#plfa_plfa-part3-Compositional-13228" class="Function">var-equiv</a>
<a id="plfa_plfa-part3-Compositional-21712" href="../Compositional/#plfa_plfa-part3-Compositional-21646" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21717" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21718" href="../Compositional/#plfa_plfa-part3-Compositional-21718" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21719" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21721" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21722" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21724" href="../Compositional/#plfa_plfa-part3-Compositional-21724" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21725" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21727" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-21731" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-21735" href="../Compositional/#plfa_plfa-part3-Compositional-21735" class="Bound">ih</a> <a id="plfa_plfa-part3-Compositional-21738" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21740" href="../Compositional/#plfa_plfa-part3-Compositional-21646" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21745" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21746" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21748" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21750" href="../Compositional/#plfa_plfa-part3-Compositional-21724" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21751" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21753" class="Keyword">in</a>
    <a id="plfa_plfa-part3-Compositional-21760" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21762" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21763" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21765" href="../Compositional/#plfa_plfa-part3-Compositional-21724" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21766" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-21770" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21773" href="../Compositional/#plfa_plfa-part3-Compositional-5292" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-21783" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-21789" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-21791" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21792" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21794" href="../Compositional/#plfa_plfa-part3-Compositional-21724" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21795" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-21799" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21802" href="../Compositional/#plfa_plfa-part3-Compositional-14365" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-21809" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21810" href="../Compositional/#plfa_plfa-part3-Compositional-21646" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21815" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21816" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21818" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21820" href="../Compositional/#plfa_plfa-part3-Compositional-21724" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21821" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-21824" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-21830" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-21832" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21834" href="../Compositional/#plfa_plfa-part3-Compositional-21724" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21836" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-21840" href="../Denotational/#plfa_plfa-part3-Denotational-23784" class="Function Operator">≃⟨⟩</a>
    <a id="plfa_plfa-part3-Compositional-21848" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21850" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21852" href="../Compositional/#plfa_plfa-part3-Compositional-21724" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21854" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-21858" href="../Denotational/#plfa_plfa-part3-Denotational-23891" class="Function Operator">☐</a>
<a id="plfa_plfa-part3-Compositional-21860" href="../Compositional/#plfa_plfa-part3-Compositional-21646" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21865" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21866" href="../Compositional/#plfa_plfa-part3-Compositional-21866" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21867" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21869" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21870" href="../Compositional/#plfa_plfa-part3-Compositional-21870" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21872" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21874" href="../Compositional/#plfa_plfa-part3-Compositional-21874" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-21875" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21877" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Compositional-21882" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21884" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21885" href="../Compositional/#plfa_plfa-part3-Compositional-21870" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21887" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21889" href="../Compositional/#plfa_plfa-part3-Compositional-21874" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-21890" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-21894" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21897" href="../Compositional/#plfa_plfa-part3-Compositional-12550" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-21907" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
   <a id="plfa_plfa-part3-Compositional-21912" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21914" href="../Compositional/#plfa_plfa-part3-Compositional-21870" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21916" href="../Compositional/#plfa_plfa-part3-Compositional-6967" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-21918" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21920" href="../Compositional/#plfa_plfa-part3-Compositional-21874" class="Bound">M</a>
  <a id="plfa_plfa-part3-Compositional-21924" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21927" href="../Compositional/#plfa_plfa-part3-Compositional-15775" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-21934" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21935" href="../Compositional/#plfa_plfa-part3-Compositional-21646" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21940" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21941" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21943" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21945" href="../Compositional/#plfa_plfa-part3-Compositional-21870" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-21946" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-21949" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21950" href="../Compositional/#plfa_plfa-part3-Compositional-21646" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21955" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21956" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21958" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21960" href="../Compositional/#plfa_plfa-part3-Compositional-21874" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-21961" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-21964" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
   <a id="plfa_plfa-part3-Compositional-21969" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21971" href="../Compositional/#plfa_plfa-part3-Compositional-21870" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21973" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21975" href="../Compositional/#plfa_plfa-part3-Compositional-6967" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-21977" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21979" href="../Compositional/#plfa_plfa-part3-Compositional-21874" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21981" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-21985" href="../Denotational/#plfa_plfa-part3-Denotational-23784" class="Function Operator">≃⟨⟩</a>
    <a id="plfa_plfa-part3-Compositional-21993" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21995" href="../Compositional/#plfa_plfa-part3-Compositional-21870" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21997" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21999" href="../Compositional/#plfa_plfa-part3-Compositional-21874" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-22001" href="../Compositional/#plfa_plfa-part3-Compositional-21211" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-22005" href="../Denotational/#plfa_plfa-part3-Denotational-23891" class="Function Operator">☐</a>
</pre><h2 id="unicode">Unicode</h2><p>本章使用了以下 Unicode：</p><pre><code>ℱ  U+2131  SCRIPT CAPITAL F (\McF)
●  U+2131  BLACK CIRCLE (\cib)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Denotational/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Compositional.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Soundness/">下一章</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">编程语言基础：Agda 描述</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>