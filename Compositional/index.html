<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>编程语言基础：Agda 描述 – Compositional</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">编程语言基础：Agda 描述</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">主页</a> <a class="page-link" href="../Announcements/">公告</a> <a class="page-link" href="../GettingStarted/">使用说明</a> <a class="page-link" href="../Citing/">引用</a> <a class="page-link" href="https://plfa.github.io/">English</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Denotational/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Compositional.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Soundness/">下一章</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Compositional: 指称语义的可组合性</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part3-Compositional-116" class="Keyword">module</a> <a id="plfa_plfa-part3-Compositional-123" href="../Compositional/#" class="Module">plfa.part3.Compositional</a> <a id="plfa_plfa-part3-Compositional-148" class="Keyword">where</a>
</pre><h2 id="简介">简介</h2><p>本章我们会证明指称语义满足可组合性，即我们会填补以下方程中省略号的部分。</p><pre><code>ℰ (` x) ≃ ...
ℰ (ƛ M) ≃ ... ℰ M ...
ℰ (M · N) ≃ ... ℰ M ... ℰ N ...</code></pre><p>这些方程蕴含了指称语义也可以定义为一个递归函数。 我们会在本章的结尾给出它的定义，并证明它等价于 ℰ。</p><h2 id="导入">导入</h2><pre class="Agda"><a id="plfa_plfa-part3-Compositional-758" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-763" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-770" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html" class="Module">Data.Product</a> <a id="plfa_plfa-part3-Compositional-783" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-789" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-790" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">_×_</a><a id="plfa_plfa-part3-Compositional-793" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-795" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="plfa_plfa-part3-Compositional-796" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-798" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ-syntax</a><a id="plfa_plfa-part3-Compositional-806" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-808" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1369" class="Function">∃</a><a id="plfa_plfa-part3-Compositional-809" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-811" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1806" class="Function">∃-syntax</a><a id="plfa_plfa-part3-Compositional-819" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-821" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a><a id="plfa_plfa-part3-Compositional-826" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-828" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a><a id="plfa_plfa-part3-Compositional-833" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-837" class="Keyword">renaming</a> <a id="plfa_plfa-part3-Compositional-846" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-847" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part3-Compositional-851" class="Symbol">to</a> <a id="plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part3-Compositional-859" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-861" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-866" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-873" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.html" class="Module">Data.Sum</a> <a id="plfa_plfa-part3-Compositional-882" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-888" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-889" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#734" class="Datatype Operator">_⊎_</a><a id="plfa_plfa-part3-Compositional-892" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-894" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a><a id="plfa_plfa-part3-Compositional-898" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-900" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a><a id="plfa_plfa-part3-Compositional-904" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-906" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-911" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-918" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Unit.html" class="Module">Data.Unit</a> <a id="plfa_plfa-part3-Compositional-928" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-934" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-935" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#158" class="Record">⊤</a><a id="plfa_plfa-part3-Compositional-936" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-938" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a><a id="plfa_plfa-part3-Compositional-940" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-942" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-947" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-954" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
  <a id="plfa_plfa-part3-Compositional-975" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-981" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-982" href="../Untyped/#plfa_plfa-part2-Untyped-3830" class="Datatype">Context</a><a id="plfa_plfa-part3-Compositional-989" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-991" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part3-Compositional-994" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-996" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-997" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-999" href="../Untyped/#plfa_plfa-part2-Untyped-4355" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part3-Compositional-1002" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1004" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part3-Compositional-1007" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1009" href="../Untyped/#plfa_plfa-part2-Untyped-5434" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part3-Compositional-1011" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1013" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part3-Compositional-1015" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1017" href="../Untyped/#plfa_plfa-part2-Untyped-5546" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part3-Compositional-1020" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-1022" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-1027" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-1034" href="../Denotational/#" class="Module">plfa.part3.Denotational</a>
  <a id="plfa_plfa-part3-Compositional-1060" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-1066" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1067" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-1072" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1074" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">_↦_</a><a id="plfa_plfa-part3-Compositional-1077" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1079" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">_`,_</a><a id="plfa_plfa-part3-Compositional-1083" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1085" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">_⊔_</a><a id="plfa_plfa-part3-Compositional-1088" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1090" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-1091" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1093" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">_⊑_</a><a id="plfa_plfa-part3-Compositional-1096" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1098" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">_⊢_↓_</a><a id="plfa_plfa-part3-Compositional-1103" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1114" href="../Denotational/#plfa_plfa-part3-Denotational-5459" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-1119" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1121" href="../Denotational/#plfa_plfa-part3-Denotational-5785" class="InductiveConstructor">⊑-fun</a><a id="plfa_plfa-part3-Compositional-1126" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1128" href="../Denotational/#plfa_plfa-part3-Denotational-5484" class="InductiveConstructor">⊑-conj-L</a><a id="plfa_plfa-part3-Compositional-1136" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1138" href="../Denotational/#plfa_plfa-part3-Denotational-5568" class="InductiveConstructor">⊑-conj-R1</a><a id="plfa_plfa-part3-Compositional-1147" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1149" href="../Denotational/#plfa_plfa-part3-Denotational-5641" class="InductiveConstructor">⊑-conj-R2</a><a id="plfa_plfa-part3-Compositional-1158" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1169" href="../Denotational/#plfa_plfa-part3-Denotational-5888" class="InductiveConstructor">⊑-dist</a><a id="plfa_plfa-part3-Compositional-1175" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1177" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Compositional-1183" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1185" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a><a id="plfa_plfa-part3-Compositional-1192" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1194" href="../Denotational/#plfa_plfa-part3-Denotational-7600" class="Function">⊔↦⊔-dist</a><a id="plfa_plfa-part3-Compositional-1202" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1213" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Compositional-1216" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1218" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a><a id="plfa_plfa-part3-Compositional-1225" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1227" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Compositional-1233" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1235" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Compositional-1242" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1244" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a><a id="plfa_plfa-part3-Compositional-1251" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1253" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a><a id="plfa_plfa-part3-Compositional-1256" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1267" href="../Denotational/#plfa_plfa-part3-Denotational-32854" class="Function">up-env</a><a id="plfa_plfa-part3-Compositional-1273" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1275" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a><a id="plfa_plfa-part3-Compositional-1276" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1278" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">_≃_</a><a id="plfa_plfa-part3-Compositional-1281" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1283" href="../Denotational/#plfa_plfa-part3-Denotational-22793" class="Function">≃-sym</a><a id="plfa_plfa-part3-Compositional-1288" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1290" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a><a id="plfa_plfa-part3-Compositional-1300" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1302" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a><a id="plfa_plfa-part3-Compositional-1305" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-1307" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-1312" href="../Denotational/#plfa_plfa-part3-Denotational-23461" class="Module">plfa.part3.Denotational.≃-Reasoning</a>
</pre><h2 id="λ-抽象的方程">λ-抽象的方程</h2><p>考虑第一个方程</p><pre><code>ℰ (ƛ M) ≃ ... ℰ M ...</code></pre><p>我们需要定义一个函数，它将 <code>Denotation (Γ , ★)</code> 映射到 <code>Denotation Γ</code>， 我们将此函数命名为 <code>ℱ</code>。在应用到 λ-项时，它能够模拟语义中非递归的部分。 具体来说，我们需要考虑规则 <code>↦-intro</code>、<code>⊥-intro</code> 和 <code>⊔-intro</code>，因此 <code>ℱ</code> 有三个参数：子项 <code>M</code> 的指称 <code>D</code>、环境 <code>γ</code>，以及值 <code>v</code>。如果我们通过对值 <code>v</code> 进行递归来定义 <code>ℱ</code>，那么它正好匹配 <code>↦-intro</code>、<code>⊥-intro</code> 和 <code>⊔-intro</code> 这三条规则。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱ"></a><a id="plfa_plfa-part3-Compositional-2283" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2285" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-2287" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-2289" href="../Compositional/#plfa_plfa-part3-Compositional-2289" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-2290" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-2292" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2294" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-2305" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2306" href="../Compositional/#plfa_plfa-part3-Compositional-2289" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-2308" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-2310" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-2311" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2313" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2315" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-2326" href="../Compositional/#plfa_plfa-part3-Compositional-2289" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-2328" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2330" href="../Compositional/#plfa_plfa-part3-Compositional-2330" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2332" href="../Compositional/#plfa_plfa-part3-Compositional-2332" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2334" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2335" href="../Compositional/#plfa_plfa-part3-Compositional-2335" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-2337" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-2339" href="../Compositional/#plfa_plfa-part3-Compositional-2339" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-2340" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2342" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2344" href="../Compositional/#plfa_plfa-part3-Compositional-2330" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2346" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2347" href="../Compositional/#plfa_plfa-part3-Compositional-2332" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2349" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-2352" href="../Compositional/#plfa_plfa-part3-Compositional-2335" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-2353" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2355" href="../Compositional/#plfa_plfa-part3-Compositional-2339" class="Bound">w</a>
<a id="plfa_plfa-part3-Compositional-2357" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2359" href="../Compositional/#plfa_plfa-part3-Compositional-2359" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2361" href="../Compositional/#plfa_plfa-part3-Compositional-2361" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2363" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Compositional-2365" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2367" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#158" class="Record">⊤</a>
<a id="plfa_plfa-part3-Compositional-2369" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2371" href="../Compositional/#plfa_plfa-part3-Compositional-2371" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2373" href="../Compositional/#plfa_plfa-part3-Compositional-2373" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2375" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2376" href="../Compositional/#plfa_plfa-part3-Compositional-2376" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-2378" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-2380" href="../Compositional/#plfa_plfa-part3-Compositional-2380" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-2381" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2383" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2385" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2386" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2388" href="../Compositional/#plfa_plfa-part3-Compositional-2371" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2390" href="../Compositional/#plfa_plfa-part3-Compositional-2373" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2392" href="../Compositional/#plfa_plfa-part3-Compositional-2376" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-2393" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2395" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Compositional-2397" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2398" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2400" href="../Compositional/#plfa_plfa-part3-Compositional-2371" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2402" href="../Compositional/#plfa_plfa-part3-Compositional-2373" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2404" href="../Compositional/#plfa_plfa-part3-Compositional-2380" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-2405" class="Symbol">)</a>
</pre><p>如果你仔细观察，就会发现 <code>ℱ</code> 函数看起来像函数式程序员熟悉的 <code>curry</code> 化操作：它将一个以长度为 <code>n + 1</code> 的元组（即环境 <code>Γ , ★</code>）作为参数的函数， 转化为一个以长度为 <code>n</code> 的元组作为参数，并返回一个单参函数的函数。</p><p>我们希望通过 <code>ℱ</code> 函数证明</p><pre><code>ℰ (ƛ N) ≃ ℱ (ℰ N)</code></pre><p>当从一个更大的值 <code>v</code> 映射到一个更小的值 <code>u</code> 时，函数 <code>ℱ</code> 会保持成立。 它的证明就是在 <code>⊑-fun</code> 规则的情况中使用 <code>up-env</code> 引理，对 <code>u ⊑ v</code> 推导过程的直接归纳。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-sub-ℱ"></a><a id="plfa_plfa-part3-Compositional-3273" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3279" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3281" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-3283" href="../Compositional/#plfa_plfa-part3-Compositional-3283" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3284" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3286" href="../Compositional/#plfa_plfa-part3-Compositional-3286" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3288" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3290" href="../Compositional/#plfa_plfa-part3-Compositional-3283" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-3292" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3294" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-3296" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3298" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-3299" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3301" href="../Compositional/#plfa_plfa-part3-Compositional-3301" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3303" href="../Compositional/#plfa_plfa-part3-Compositional-3303" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-3305" href="../Compositional/#plfa_plfa-part3-Compositional-3305" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-3306" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-3310" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3312" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-3314" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3315" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-3317" href="../Compositional/#plfa_plfa-part3-Compositional-3286" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-3318" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3320" href="../Compositional/#plfa_plfa-part3-Compositional-3301" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3322" href="../Compositional/#plfa_plfa-part3-Compositional-3303" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-3326" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3328" href="../Compositional/#plfa_plfa-part3-Compositional-3305" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-3330" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-3332" href="../Compositional/#plfa_plfa-part3-Compositional-3303" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-3338" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-3353" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3355" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-3357" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3358" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-3360" href="../Compositional/#plfa_plfa-part3-Compositional-3286" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-3361" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3363" href="../Compositional/#plfa_plfa-part3-Compositional-3301" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3365" href="../Compositional/#plfa_plfa-part3-Compositional-3305" class="Bound">u</a>
<a id="plfa_plfa-part3-Compositional-3367" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3373" href="../Compositional/#plfa_plfa-part3-Compositional-3373" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3375" href="../Denotational/#plfa_plfa-part3-Denotational-5459" class="InductiveConstructor">⊑-bot</a> <a id="plfa_plfa-part3-Compositional-3381" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3383" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a>
<a id="plfa_plfa-part3-Compositional-3386" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3392" href="../Compositional/#plfa_plfa-part3-Compositional-3392" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3394" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3395" href="../Denotational/#plfa_plfa-part3-Denotational-5785" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-3401" href="../Compositional/#plfa_plfa-part3-Compositional-3401" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-3404" href="../Compositional/#plfa_plfa-part3-Compositional-3404" class="Bound">lt′</a><a id="plfa_plfa-part3-Compositional-3407" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3409" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3411" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-3415" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3416" href="../Denotational/#plfa_plfa-part3-Denotational-32854" class="Function">up-env</a> <a id="plfa_plfa-part3-Compositional-3423" href="../Compositional/#plfa_plfa-part3-Compositional-3392" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3425" href="../Compositional/#plfa_plfa-part3-Compositional-3401" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3427" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3429" href="../Compositional/#plfa_plfa-part3-Compositional-3404" class="Bound">lt′</a>
<a id="plfa_plfa-part3-Compositional-3433" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3439" href="../Compositional/#plfa_plfa-part3-Compositional-3439" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3441" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3442" href="../Denotational/#plfa_plfa-part3-Denotational-5484" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-3451" href="../Compositional/#plfa_plfa-part3-Compositional-3451" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-3454" href="../Compositional/#plfa_plfa-part3-Compositional-3454" class="Bound">lt₁</a><a id="plfa_plfa-part3-Compositional-3457" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3459" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3461" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-3463" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3469" href="../Compositional/#plfa_plfa-part3-Compositional-3439" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3471" href="../Compositional/#plfa_plfa-part3-Compositional-3451" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-3474" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3476" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3482" href="../Compositional/#plfa_plfa-part3-Compositional-3439" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3484" href="../Compositional/#plfa_plfa-part3-Compositional-3454" class="Bound">lt₁</a> <a id="plfa_plfa-part3-Compositional-3488" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-3490" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3496" href="../Compositional/#plfa_plfa-part3-Compositional-3496" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3498" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3499" href="../Denotational/#plfa_plfa-part3-Denotational-5568" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Compositional-3509" href="../Compositional/#plfa_plfa-part3-Compositional-3509" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3511" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3513" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3515" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3521" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3522" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-3528" href="../Compositional/#plfa_plfa-part3-Compositional-3496" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-3529" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3531" href="../Compositional/#plfa_plfa-part3-Compositional-3509" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-3534" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3540" href="../Compositional/#plfa_plfa-part3-Compositional-3540" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3542" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3543" href="../Denotational/#plfa_plfa-part3-Denotational-5641" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Compositional-3553" href="../Compositional/#plfa_plfa-part3-Compositional-3553" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3555" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3557" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3559" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3565" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3566" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="plfa_plfa-part3-Compositional-3572" href="../Compositional/#plfa_plfa-part3-Compositional-3540" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-3573" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3575" href="../Compositional/#plfa_plfa-part3-Compositional-3553" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-3578" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3584" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-3585" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-3587" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3589" href="../Compositional/#plfa_plfa-part3-Compositional-3589" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3592" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3594" href="../Compositional/#plfa_plfa-part3-Compositional-3594" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-3597" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-3599" href="../Compositional/#plfa_plfa-part3-Compositional-3589" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3602" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3604" href="../Compositional/#plfa_plfa-part3-Compositional-3604" class="Bound">v₃</a><a id="plfa_plfa-part3-Compositional-3606" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-3608" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-3609" href="../Compositional/#plfa_plfa-part3-Compositional-3589" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3612" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3614" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3615" href="../Compositional/#plfa_plfa-part3-Compositional-3594" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-3618" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-3620" href="../Compositional/#plfa_plfa-part3-Compositional-3604" class="Bound">v₃</a><a id="plfa_plfa-part3-Compositional-3622" class="Symbol">)}</a> <a id="plfa_plfa-part3-Compositional-3625" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-3627" href="../Compositional/#plfa_plfa-part3-Compositional-3627" class="Bound">N2</a> <a id="plfa_plfa-part3-Compositional-3630" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3632" href="../Compositional/#plfa_plfa-part3-Compositional-3632" class="Bound">N3</a> <a id="plfa_plfa-part3-Compositional-3635" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-3637" href="../Denotational/#plfa_plfa-part3-Denotational-5888" class="InductiveConstructor">⊑-dist</a> <a id="plfa_plfa-part3-Compositional-3644" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Compositional-3649" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-3657" href="../Compositional/#plfa_plfa-part3-Compositional-3627" class="Bound">N2</a> <a id="plfa_plfa-part3-Compositional-3660" href="../Compositional/#plfa_plfa-part3-Compositional-3632" class="Bound">N3</a>
<a id="plfa_plfa-part3-Compositional-3663" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3669" href="../Compositional/#plfa_plfa-part3-Compositional-3669" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3671" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3672" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-3680" href="../Compositional/#plfa_plfa-part3-Compositional-3680" class="Bound">x₁</a> <a id="plfa_plfa-part3-Compositional-3683" href="../Compositional/#plfa_plfa-part3-Compositional-3683" class="Bound">x₂</a><a id="plfa_plfa-part3-Compositional-3685" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3687" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3689" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3695" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3696" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3702" href="../Compositional/#plfa_plfa-part3-Compositional-3669" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3704" href="../Compositional/#plfa_plfa-part3-Compositional-3683" class="Bound">x₂</a><a id="plfa_plfa-part3-Compositional-3706" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3708" href="../Compositional/#plfa_plfa-part3-Compositional-3680" class="Bound">x₁</a>
</pre><p>有了这个小前提的性质，我们就可以证明 λ-方程语义向右的方向。 证明是通过在 <code>sub</code> 规则的情况下使用 <code>sub-ℱ</code>，对语义进行归纳得出的。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰƛ→ℱℰ"></a><a id="plfa_plfa-part3-Compositional-4012" href="../Compositional/#plfa_plfa-part3-Compositional-4012" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4018" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4020" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4022" href="../Compositional/#plfa_plfa-part3-Compositional-4022" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4023" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4025" href="../Compositional/#plfa_plfa-part3-Compositional-4025" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4027" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4029" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-4033" href="../Compositional/#plfa_plfa-part3-Compositional-4022" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4034" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4036" href="../Compositional/#plfa_plfa-part3-Compositional-4036" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4038" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4040" href="../Compositional/#plfa_plfa-part3-Compositional-4022" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4042" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4044" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4046" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4048" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4049" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4051" href="../Compositional/#plfa_plfa-part3-Compositional-4051" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-4053" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4055" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4060" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4064" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4066" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4068" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4069" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4071" href="../Compositional/#plfa_plfa-part3-Compositional-4036" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4072" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4074" href="../Compositional/#plfa_plfa-part3-Compositional-4025" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4076" href="../Compositional/#plfa_plfa-part3-Compositional-4051" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-4082" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-4097" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4099" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-4101" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4102" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4104" href="../Compositional/#plfa_plfa-part3-Compositional-4036" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4105" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4107" href="../Compositional/#plfa_plfa-part3-Compositional-4025" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4109" href="../Compositional/#plfa_plfa-part3-Compositional-4051" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-4111" href="../Compositional/#plfa_plfa-part3-Compositional-4012" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4117" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4118" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Compositional-4126" href="../Compositional/#plfa_plfa-part3-Compositional-4126" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-4127" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4129" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4131" href="../Compositional/#plfa_plfa-part3-Compositional-4126" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-4133" href="../Compositional/#plfa_plfa-part3-Compositional-4012" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4139" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-4147" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4149" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a>
<a id="plfa_plfa-part3-Compositional-4152" href="../Compositional/#plfa_plfa-part3-Compositional-4012" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4158" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4159" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-4167" href="../Compositional/#plfa_plfa-part3-Compositional-4167" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-4170" href="../Compositional/#plfa_plfa-part3-Compositional-4170" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-4172" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4174" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4176" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-4178" href="../Compositional/#plfa_plfa-part3-Compositional-4012" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4184" href="../Compositional/#plfa_plfa-part3-Compositional-4167" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-4187" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4189" href="../Compositional/#plfa_plfa-part3-Compositional-4012" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4195" href="../Compositional/#plfa_plfa-part3-Compositional-4170" class="Bound">d₂</a> <a id="plfa_plfa-part3-Compositional-4198" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-4200" href="../Compositional/#plfa_plfa-part3-Compositional-4012" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4206" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4207" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-4211" href="../Compositional/#plfa_plfa-part3-Compositional-4211" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4213" href="../Compositional/#plfa_plfa-part3-Compositional-4213" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-4215" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4217" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4219" href="../Compositional/#plfa_plfa-part3-Compositional-3273" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-4225" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4226" href="../Compositional/#plfa_plfa-part3-Compositional-4012" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4232" href="../Compositional/#plfa_plfa-part3-Compositional-4211" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-4233" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4235" href="../Compositional/#plfa_plfa-part3-Compositional-4213" class="Bound">lt</a>
</pre><p>λ-抽象的「反演引理」是上面定理的一种特例。反演引理在证明「归约会保持指称不变」时会很有用。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lambda-inversion"></a><a id="plfa_plfa-part3-Compositional-4472" href="../Compositional/#plfa_plfa-part3-Compositional-4472" class="Function">lambda-inversion</a> <a id="plfa_plfa-part3-Compositional-4489" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4491" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4493" href="../Compositional/#plfa_plfa-part3-Compositional-4493" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4494" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4496" href="../Compositional/#plfa_plfa-part3-Compositional-4496" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4498" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4500" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-4504" href="../Compositional/#plfa_plfa-part3-Compositional-4493" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4505" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4507" href="../Compositional/#plfa_plfa-part3-Compositional-4507" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4509" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4511" href="../Compositional/#plfa_plfa-part3-Compositional-4493" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4513" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4515" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4517" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4519" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4520" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4522" href="../Compositional/#plfa_plfa-part3-Compositional-4522" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4525" href="../Compositional/#plfa_plfa-part3-Compositional-4525" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-4528" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4530" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4535" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4539" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4541" href="../Compositional/#plfa_plfa-part3-Compositional-4496" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4543" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4545" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4547" href="../Compositional/#plfa_plfa-part3-Compositional-4507" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4549" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Compositional-4551" href="../Compositional/#plfa_plfa-part3-Compositional-4522" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4554" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-4556" href="../Compositional/#plfa_plfa-part3-Compositional-4525" class="Bound">v₂</a>
    <a id="plfa_plfa-part3-Compositional-4563" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Compositional-4583" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4585" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4586" href="../Compositional/#plfa_plfa-part3-Compositional-4496" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4588" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-4591" href="../Compositional/#plfa_plfa-part3-Compositional-4522" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-4593" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4595" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4597" href="../Compositional/#plfa_plfa-part3-Compositional-4507" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4599" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Compositional-4601" href="../Compositional/#plfa_plfa-part3-Compositional-4525" class="Bound">v₂</a>
<a id="plfa_plfa-part3-Compositional-4604" href="../Compositional/#plfa_plfa-part3-Compositional-4472" class="Function">lambda-inversion</a><a id="plfa_plfa-part3-Compositional-4620" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4621" class="Argument">v₁</a> <a id="plfa_plfa-part3-Compositional-4624" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4626" href="../Compositional/#plfa_plfa-part3-Compositional-4626" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-4628" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4630" class="Argument">v₂</a> <a id="plfa_plfa-part3-Compositional-4633" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4635" href="../Compositional/#plfa_plfa-part3-Compositional-4635" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4637" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4639" href="../Compositional/#plfa_plfa-part3-Compositional-4639" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4641" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4643" href="../Compositional/#plfa_plfa-part3-Compositional-4012" class="Function">ℰƛ→ℱℰ</a><a id="plfa_plfa-part3-Compositional-4648" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4649" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4651" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4653" href="../Compositional/#plfa_plfa-part3-Compositional-4626" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4656" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-4658" href="../Compositional/#plfa_plfa-part3-Compositional-4635" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4660" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4662" href="../Compositional/#plfa_plfa-part3-Compositional-4639" class="Bound">d</a>
</pre><p>λ-抽象的语义方程向左的方向甚至比向右的方向更容易证明，我们只需对值 <code>v</code> 进行归纳：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱℰ→ℰƛ"></a><a id="plfa_plfa-part3-Compositional-4884" href="../Compositional/#plfa_plfa-part3-Compositional-4884" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4890" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4892" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4894" href="../Compositional/#plfa_plfa-part3-Compositional-4894" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4895" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4897" href="../Compositional/#plfa_plfa-part3-Compositional-4897" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4899" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4901" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-4905" href="../Compositional/#plfa_plfa-part3-Compositional-4894" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4906" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4908" href="../Compositional/#plfa_plfa-part3-Compositional-4908" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4910" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4912" href="../Compositional/#plfa_plfa-part3-Compositional-4894" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4914" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4916" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4918" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4920" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4921" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4923" href="../Compositional/#plfa_plfa-part3-Compositional-4923" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-4925" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4927" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4932" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4936" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4938" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-4940" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4941" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4943" href="../Compositional/#plfa_plfa-part3-Compositional-4908" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4944" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4946" href="../Compositional/#plfa_plfa-part3-Compositional-4897" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4948" href="../Compositional/#plfa_plfa-part3-Compositional-4923" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-4954" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-4969" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4971" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4973" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4974" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4976" href="../Compositional/#plfa_plfa-part3-Compositional-4908" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4977" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4979" href="../Compositional/#plfa_plfa-part3-Compositional-4897" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4981" href="../Compositional/#plfa_plfa-part3-Compositional-4923" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-4983" href="../Compositional/#plfa_plfa-part3-Compositional-4884" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4989" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4990" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4992" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4994" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-4995" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4997" href="../Compositional/#plfa_plfa-part3-Compositional-4997" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4999" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5001" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Compositional-5009" href="../Compositional/#plfa_plfa-part3-Compositional-4884" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5015" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-5016" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-5018" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5020" href="../Compositional/#plfa_plfa-part3-Compositional-5020" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-5023" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-5025" href="../Compositional/#plfa_plfa-part3-Compositional-5025" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-5027" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-5029" href="../Compositional/#plfa_plfa-part3-Compositional-5029" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-5031" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5033" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Compositional-5041" href="../Compositional/#plfa_plfa-part3-Compositional-5029" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-5043" href="../Compositional/#plfa_plfa-part3-Compositional-4884" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5049" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-5050" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-5052" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5054" href="../Compositional/#plfa_plfa-part3-Compositional-5054" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-5057" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-5059" href="../Compositional/#plfa_plfa-part3-Compositional-5059" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-5061" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-5063" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-5065" href="../Compositional/#plfa_plfa-part3-Compositional-5065" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-5068" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-5070" href="../Compositional/#plfa_plfa-part3-Compositional-5070" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-5073" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-5075" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5077" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-5085" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5086" href="../Compositional/#plfa_plfa-part3-Compositional-4884" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5092" href="../Compositional/#plfa_plfa-part3-Compositional-5065" class="Bound">d1</a><a id="plfa_plfa-part3-Compositional-5094" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-5096" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5097" href="../Compositional/#plfa_plfa-part3-Compositional-4884" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5103" href="../Compositional/#plfa_plfa-part3-Compositional-5070" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-5105" class="Symbol">)</a>
</pre><p>因此，指称语义对 λ-抽象来说是可组合的，正如函数 <code>ℱ</code> 所证明的那样：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lam-equiv"></a><a id="plfa_plfa-part3-Compositional-5294" href="../Compositional/#plfa_plfa-part3-Compositional-5294" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-5304" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-5306" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-5308" href="../Compositional/#plfa_plfa-part3-Compositional-5308" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-5309" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-5311" href="../Compositional/#plfa_plfa-part3-Compositional-5311" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-5313" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-5315" href="../Compositional/#plfa_plfa-part3-Compositional-5308" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-5317" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-5319" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-5321" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-5323" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-5324" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-5328" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-5330" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-5332" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5333" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-5335" href="../Compositional/#plfa_plfa-part3-Compositional-5311" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-5336" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-5338" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-5340" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-5342" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5343" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-5345" href="../Compositional/#plfa_plfa-part3-Compositional-5311" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-5346" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-5348" href="../Compositional/#plfa_plfa-part3-Compositional-5294" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-5358" href="../Compositional/#plfa_plfa-part3-Compositional-5358" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-5360" href="../Compositional/#plfa_plfa-part3-Compositional-5360" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-5362" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5364" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-5366" href="../Compositional/#plfa_plfa-part3-Compositional-4012" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-5372" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-5374" href="../Compositional/#plfa_plfa-part3-Compositional-4884" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5380" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="函数应用的方程">函数应用的方程</h2><p>接下来我们填补关于函数应用的方程中的省略号。</p><pre><code>ℰ (M · N) ≃ ... ℰ M ... ℰ N ...</code></pre><p>为此我们需要定义一个函数，它接受语境 <code>Γ</code> 中的两个指称，并产生语境 <code>Γ</code> 中的另一个指称。我们将此函数命名为 <code>●</code>，以模拟应用语义 <code>L · M</code> 中非递归的部分。我们无法像处理 <code>ℱ</code> 那样简单地对值 <code>v</code> 进行递归来定义函数， 因为 <code>↦-elim</code> 这类的规则可应用于任何值。相反，我们将通过直接处理 <code>↦-elim</code> 和 <code>⊥-intro</code> 规则而忽略 <code>⊔-intro</code> 的方式来定义 <code>●</code>。这使得证明的向右方向变得更加困难， 而 <code>⊔-intro</code> 的情况说明了为什么 <code>⊑-dist</code> 规则很重要。</p><p>这样我们就定义了 <code>D₁</code> 应用于 <code>D₂</code>，记作 <code>D₁ ● D₂</code>，来包含 <code>⊥-intro</code> 规则中所有等价于 <code>⊥</code> 的值 <code>w</code>，以及对于 <code>↦-elim</code> 规则，在 <code>D₁</code> 中的条目 <code>v ↦ w</code> 的所有输出值 <code>w</code>，前提是它的输入值 <code>v</code> 在 <code>D₂</code> 中。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-6955" class="Keyword">infixl</a> <a id="plfa_plfa-part3-Compositional-6962" class="Number">7</a> <a id="plfa_plfa-part3-Compositional-6964" href="../Compositional/#plfa_plfa-part3-Compositional-6969" class="Function Operator">_●_</a>

<a id="plfa_plfa-part3-Compositional-_●_"></a><a id="plfa_plfa-part3-Compositional-6969" href="../Compositional/#plfa_plfa-part3-Compositional-6969" class="Function Operator">_●_</a> <a id="plfa_plfa-part3-Compositional-6973" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6975" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-6977" href="../Compositional/#plfa_plfa-part3-Compositional-6977" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-6978" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6980" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-6982" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-6993" href="../Compositional/#plfa_plfa-part3-Compositional-6977" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-6995" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-6997" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-7008" href="../Compositional/#plfa_plfa-part3-Compositional-6977" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-7010" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-7012" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-7023" href="../Compositional/#plfa_plfa-part3-Compositional-6977" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-7025" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7026" href="../Compositional/#plfa_plfa-part3-Compositional-7026" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-7029" href="../Compositional/#plfa_plfa-part3-Compositional-6969" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-7031" href="../Compositional/#plfa_plfa-part3-Compositional-7031" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-7033" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7035" href="../Compositional/#plfa_plfa-part3-Compositional-7035" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7037" href="../Compositional/#plfa_plfa-part3-Compositional-7037" class="Bound">w</a> <a id="plfa_plfa-part3-Compositional-7039" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7041" href="../Compositional/#plfa_plfa-part3-Compositional-7037" class="Bound">w</a> <a id="plfa_plfa-part3-Compositional-7043" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-7045" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Compositional-7047" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="plfa_plfa-part3-Compositional-7049" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Compositional-7052" href="../Compositional/#plfa_plfa-part3-Compositional-7052" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7054" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Compositional-7056" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a> <a id="plfa_plfa-part3-Compositional-7062" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a><a id="plfa_plfa-part3-Compositional-7063" class="Symbol">(</a> <a id="plfa_plfa-part3-Compositional-7065" href="../Compositional/#plfa_plfa-part3-Compositional-7026" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-7068" href="../Compositional/#plfa_plfa-part3-Compositional-7035" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7070" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7071" href="../Compositional/#plfa_plfa-part3-Compositional-7052" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7073" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-7075" href="../Compositional/#plfa_plfa-part3-Compositional-7037" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-7076" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7078" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Compositional-7080" href="../Compositional/#plfa_plfa-part3-Compositional-7031" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-7083" href="../Compositional/#plfa_plfa-part3-Compositional-7035" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7085" href="../Compositional/#plfa_plfa-part3-Compositional-7052" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7087" class="Symbol">)</a>
</pre><p>如果你仔细观察一下，就会发现 <code>_●_</code> 运算符看起来像函数式程序员熟悉的 <code>apply</code> 操作：它接受两个参数，并将第一个参数应用于第二个参数。</p><p>接下来我们考虑应用的反演引理，它同样是应用的语义方程的向右方向。 下面是它的证明：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰ·→●ℰ"></a><a id="plfa_plfa-part3-Compositional-7784" href="../Compositional/#plfa_plfa-part3-Compositional-7784" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7790" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7792" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-7794" href="../Compositional/#plfa_plfa-part3-Compositional-7794" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-7795" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7797" href="../Compositional/#plfa_plfa-part3-Compositional-7797" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7799" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7801" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-7805" href="../Compositional/#plfa_plfa-part3-Compositional-7794" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-7806" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7808" href="../Compositional/#plfa_plfa-part3-Compositional-7808" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-7810" href="../Compositional/#plfa_plfa-part3-Compositional-7810" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-7812" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7814" href="../Compositional/#plfa_plfa-part3-Compositional-7794" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-7816" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-7818" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-7819" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7821" href="../Compositional/#plfa_plfa-part3-Compositional-7821" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7823" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7825" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-7830" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-7834" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-7836" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-7838" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7839" href="../Compositional/#plfa_plfa-part3-Compositional-7808" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-7841" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-7843" href="../Compositional/#plfa_plfa-part3-Compositional-7810" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-7844" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7846" href="../Compositional/#plfa_plfa-part3-Compositional-7797" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7848" href="../Compositional/#plfa_plfa-part3-Compositional-7821" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-7854" class="Comment">----------------</a>
  <a id="plfa_plfa-part3-Compositional-7873" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-7875" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7876" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-7878" href="../Compositional/#plfa_plfa-part3-Compositional-7808" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-7880" href="../Compositional/#plfa_plfa-part3-Compositional-6969" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-7882" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-7884" href="../Compositional/#plfa_plfa-part3-Compositional-7810" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-7885" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7887" href="../Compositional/#plfa_plfa-part3-Compositional-7797" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7889" href="../Compositional/#plfa_plfa-part3-Compositional-7821" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-7891" href="../Compositional/#plfa_plfa-part3-Compositional-7784" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7897" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7898" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Compositional-7904" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-7905" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-7907" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7909" href="../Compositional/#plfa_plfa-part3-Compositional-7909" class="Bound">v′</a><a id="plfa_plfa-part3-Compositional-7911" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-7913" href="../Compositional/#plfa_plfa-part3-Compositional-7913" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-7916" href="../Compositional/#plfa_plfa-part3-Compositional-7916" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-7918" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7920" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7922" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-7927" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7929" href="../Compositional/#plfa_plfa-part3-Compositional-7909" class="Bound">v′</a> <a id="plfa_plfa-part3-Compositional-7932" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7934" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7936" href="../Compositional/#plfa_plfa-part3-Compositional-7913" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-7939" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7941" href="../Compositional/#plfa_plfa-part3-Compositional-7916" class="Bound">d₂</a> <a id="plfa_plfa-part3-Compositional-7944" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-7946" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-7948" href="../Compositional/#plfa_plfa-part3-Compositional-7784" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7954" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-7955" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-7957" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7959" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-7960" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-7962" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-7970" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7972" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-7977" href="../Denotational/#plfa_plfa-part3-Denotational-5459" class="InductiveConstructor">⊑-bot</a>
<a id="plfa_plfa-part3-Compositional-7983" href="../Compositional/#plfa_plfa-part3-Compositional-7784" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7989" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-7990" href="../Compositional/#plfa_plfa-part3-Compositional-7990" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-7991" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7993" href="../Compositional/#plfa_plfa-part3-Compositional-7993" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-7994" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7996" href="../Compositional/#plfa_plfa-part3-Compositional-7996" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-7997" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7999" href="../Compositional/#plfa_plfa-part3-Compositional-7999" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-8000" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8002" href="../Compositional/#plfa_plfa-part3-Compositional-8002" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-8003" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-8005" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8006" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Compositional-8013" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-8014" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-8016" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8018" href="../Compositional/#plfa_plfa-part3-Compositional-8018" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-8020" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8022" class="Argument">w</a> <a id="plfa_plfa-part3-Compositional-8024" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8026" href="../Compositional/#plfa_plfa-part3-Compositional-8026" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-8028" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-8030" href="../Compositional/#plfa_plfa-part3-Compositional-8030" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-8033" href="../Compositional/#plfa_plfa-part3-Compositional-8033" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-8035" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Compositional-8041" class="Keyword">with</a> <a id="plfa_plfa-part3-Compositional-8046" href="../Compositional/#plfa_plfa-part3-Compositional-7784" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8052" href="../Compositional/#plfa_plfa-part3-Compositional-8030" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-8055" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8057" href="../Compositional/#plfa_plfa-part3-Compositional-7784" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8063" href="../Compositional/#plfa_plfa-part3-Compositional-8033" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Compositional-8066" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8070" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8072" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8077" href="../Compositional/#plfa_plfa-part3-Compositional-8077" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8081" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8083" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8088" href="../Compositional/#plfa_plfa-part3-Compositional-8088" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8092" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8094" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8099" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8100" href="../Denotational/#plfa_plfa-part3-Denotational-5484" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-8109" href="../Compositional/#plfa_plfa-part3-Compositional-8077" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8113" href="../Compositional/#plfa_plfa-part3-Compositional-8088" class="Bound">lt2</a><a id="plfa_plfa-part3-Compositional-8116" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-8118" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8122" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8124" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8129" href="../Compositional/#plfa_plfa-part3-Compositional-8129" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8133" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8135" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8140" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8142" href="../Compositional/#plfa_plfa-part3-Compositional-8142" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8146" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8148" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8150" href="../Compositional/#plfa_plfa-part3-Compositional-8150" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8156" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8158" href="../Compositional/#plfa_plfa-part3-Compositional-8158" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8163" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8165" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8167" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8175" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8180" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8182" href="../Compositional/#plfa_plfa-part3-Compositional-8142" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8186" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8188" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8190" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8194" href="../Compositional/#plfa_plfa-part3-Compositional-8150" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8200" href="../Compositional/#plfa_plfa-part3-Compositional-8226" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8203" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8205" href="../Compositional/#plfa_plfa-part3-Compositional-8158" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8210" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8212" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part3-Compositional-8220" class="Keyword">where</a> <a id="plfa_plfa-part3-Compositional-8226" href="../Compositional/#plfa_plfa-part3-Compositional-8226" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8229" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-8231" href="../Compositional/#plfa_plfa-part3-Compositional-8142" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8235" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8237" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8238" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8241" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-8243" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-8245" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8247" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-8249" href="../Compositional/#plfa_plfa-part3-Compositional-8142" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8253" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8255" class="Bound">v₂</a>
            <a id="plfa_plfa-part3-Compositional-8270" href="../Compositional/#plfa_plfa-part3-Compositional-8226" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8273" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8275" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8276" href="../Denotational/#plfa_plfa-part3-Denotational-5785" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-8282" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8289" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8290" href="../Denotational/#plfa_plfa-part3-Denotational-5484" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-8299" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8300" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-8308" href="../Compositional/#plfa_plfa-part3-Compositional-8129" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8312" href="../Denotational/#plfa_plfa-part3-Denotational-5459" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-8317" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8319" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Compositional-8325" class="Symbol">))</a>
<a id="plfa_plfa-part3-Compositional-8328" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8332" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8334" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8339" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8341" href="../Compositional/#plfa_plfa-part3-Compositional-8341" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8345" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8347" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8349" href="../Compositional/#plfa_plfa-part3-Compositional-8349" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8355" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8357" href="../Compositional/#plfa_plfa-part3-Compositional-8357" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8362" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8364" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8366" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8368" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8373" href="../Compositional/#plfa_plfa-part3-Compositional-8373" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8377" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8385" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8390" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8392" href="../Compositional/#plfa_plfa-part3-Compositional-8341" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8396" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8398" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8400" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8404" href="../Compositional/#plfa_plfa-part3-Compositional-8349" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8410" href="../Compositional/#plfa_plfa-part3-Compositional-8436" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8413" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8415" href="../Compositional/#plfa_plfa-part3-Compositional-8357" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8420" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8422" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part3-Compositional-8430" class="Keyword">where</a> <a id="plfa_plfa-part3-Compositional-8436" href="../Compositional/#plfa_plfa-part3-Compositional-8436" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8439" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-8441" href="../Compositional/#plfa_plfa-part3-Compositional-8341" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8445" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8447" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8448" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8451" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-8453" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-8455" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8457" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-8459" href="../Compositional/#plfa_plfa-part3-Compositional-8341" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8463" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8465" class="Bound">v₁</a>
            <a id="plfa_plfa-part3-Compositional-8480" href="../Compositional/#plfa_plfa-part3-Compositional-8436" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8483" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8485" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8486" href="../Denotational/#plfa_plfa-part3-Denotational-5785" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-8492" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8499" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8500" href="../Denotational/#plfa_plfa-part3-Denotational-5484" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-8509" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8516" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8517" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-8525" href="../Compositional/#plfa_plfa-part3-Compositional-8373" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8529" href="../Denotational/#plfa_plfa-part3-Denotational-5459" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-8534" class="Symbol">)))</a>
<a id="plfa_plfa-part3-Compositional-8538" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8542" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8544" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8549" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8551" href="../Compositional/#plfa_plfa-part3-Compositional-8551" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8555" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8557" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8559" href="../Compositional/#plfa_plfa-part3-Compositional-8559" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8565" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8567" href="../Compositional/#plfa_plfa-part3-Compositional-8567" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8572" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8574" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8576" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8578" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8583" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8585" href="../Compositional/#plfa_plfa-part3-Compositional-8585" class="Bound">v₁′′</a> <a id="plfa_plfa-part3-Compositional-8590" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8592" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8594" href="../Compositional/#plfa_plfa-part3-Compositional-8594" class="Bound">L↓v12′</a> <a id="plfa_plfa-part3-Compositional-8601" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8603" href="../Compositional/#plfa_plfa-part3-Compositional-8603" class="Bound">M↓v3′</a> <a id="plfa_plfa-part3-Compositional-8609" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8611" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8613" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8621" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-8625" href="../Compositional/#plfa_plfa-part3-Compositional-8625" class="Bound">L↓⊔</a> <a id="plfa_plfa-part3-Compositional-8629" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8631" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-8639" href="../Compositional/#plfa_plfa-part3-Compositional-8559" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8645" href="../Compositional/#plfa_plfa-part3-Compositional-8594" class="Bound">L↓v12′</a> <a id="plfa_plfa-part3-Compositional-8652" class="Keyword">in</a>
      <a id="plfa_plfa-part3-Compositional-8661" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-8665" href="../Compositional/#plfa_plfa-part3-Compositional-8665" class="Bound">M↓⊔</a> <a id="plfa_plfa-part3-Compositional-8669" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8671" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-8679" href="../Compositional/#plfa_plfa-part3-Compositional-8567" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8684" href="../Compositional/#plfa_plfa-part3-Compositional-8603" class="Bound">M↓v3′</a> <a id="plfa_plfa-part3-Compositional-8690" class="Keyword">in</a>
      <a id="plfa_plfa-part3-Compositional-8699" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8704" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8706" href="../Compositional/#plfa_plfa-part3-Compositional-8551" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8710" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-8712" href="../Compositional/#plfa_plfa-part3-Compositional-8585" class="Bound">v₁′′</a> <a id="plfa_plfa-part3-Compositional-8717" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8719" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8721" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8725" href="../Compositional/#plfa_plfa-part3-Compositional-8625" class="Bound">L↓⊔</a> <a id="plfa_plfa-part3-Compositional-8729" href="../Denotational/#plfa_plfa-part3-Denotational-7600" class="Function">⊔↦⊔-dist</a> <a id="plfa_plfa-part3-Compositional-8738" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8740" href="../Compositional/#plfa_plfa-part3-Compositional-8665" class="Bound">M↓⊔</a> <a id="plfa_plfa-part3-Compositional-8744" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8746" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-8748" href="../Compositional/#plfa_plfa-part3-Compositional-7784" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8754" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-8755" href="../Compositional/#plfa_plfa-part3-Compositional-8755" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-8756" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8758" href="../Compositional/#plfa_plfa-part3-Compositional-8758" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-8759" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8761" href="../Compositional/#plfa_plfa-part3-Compositional-8761" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-8762" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8764" href="../Compositional/#plfa_plfa-part3-Compositional-8764" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-8765" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8767" href="../Compositional/#plfa_plfa-part3-Compositional-8767" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-8768" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-8770" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8771" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8775" href="../Compositional/#plfa_plfa-part3-Compositional-8775" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-8777" href="../Compositional/#plfa_plfa-part3-Compositional-8777" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-8779" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Compositional-8785" class="Keyword">with</a> <a id="plfa_plfa-part3-Compositional-8790" href="../Compositional/#plfa_plfa-part3-Compositional-7784" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8796" href="../Compositional/#plfa_plfa-part3-Compositional-8775" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-8798" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8802" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8804" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8809" href="../Compositional/#plfa_plfa-part3-Compositional-8809" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8813" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8815" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8820" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8821" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-8829" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-8832" href="../Compositional/#plfa_plfa-part3-Compositional-8809" class="Bound">lt2</a><a id="plfa_plfa-part3-Compositional-8835" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-8837" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8841" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8843" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8848" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8850" href="../Compositional/#plfa_plfa-part3-Compositional-8850" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8853" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8855" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8857" href="../Compositional/#plfa_plfa-part3-Compositional-8857" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8863" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8865" href="../Compositional/#plfa_plfa-part3-Compositional-8865" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8870" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8872" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8874" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8882" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8887" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8889" href="../Compositional/#plfa_plfa-part3-Compositional-8850" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8892" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8894" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8896" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8900" href="../Compositional/#plfa_plfa-part3-Compositional-8857" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8906" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8907" href="../Denotational/#plfa_plfa-part3-Denotational-5785" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-8913" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8920" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-8922" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8924" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8926" href="../Compositional/#plfa_plfa-part3-Compositional-8865" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8931" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8933" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
</pre><p>我们通过对语义进行归纳来证明：</p><ul><li><p>对于 <code>↦-elim</code> 的情况，我们有 <code>γ ⊢ L ↓ (v′ ↦ v)</code> 和 <code>γ ⊢ M ↓ v′</code>， 只需证明 <code>(ℰ L ● ℰ M) γ v</code> 即可。</p></li><li><p>对于 <code>⊥-intro</code> 的情况，我们有 <code>v = ⊥</code>，于是可推出 <code>v ⊑ ⊥</code>。</p></li></ul><ul><li><p>对于 <code>⊔-intro</code> 的情况，我们有 <code>ℰ (L · M) γ v₁</code> 和 <code>ℰ (L · M) γ v₂</code>， 且需要证明 <code>(ℰ L ● ℰ M) γ (v₁ ⊔ v₂)</code>。根据归纳假设，我们有 <code>(ℰ L ● ℰ M) γ v₁</code> 和 <code>(ℰ L ● ℰ M) γ v₂</code>，于是我们需要考虑四种子情况：</p><ul><li><p>假设 <code>v₁ ⊑ ⊥</code> 且 <code>v₂ ⊑ ⊥</code>，那么 <code>v₁ ⊔ v₂ ⊑ ⊥</code>。</p></li><li><p>假设 <code>v₁ ⊑ ⊥</code>，<code>γ ⊢ L ↓ v₁′ ↦ v₂</code> 且 <code>γ ⊢ M ↓ v₁′</code>， 根据 <code>sub</code> 规则我们有 <code>γ ⊢ L ↓ v₁′ ↦ (v₁ ⊔ v₂)</code>，因为 <code>v₁′ ↦ (v₁ ⊔ v₂) ⊑ v₁′ ↦ v₂</code>。</p></li><li><p>假设 <code>γ ⊢ L ↓ v₁′ ↦ v₁</code>，<code>γ ⊢ M ↓ v₁′</code> 且 <code>v₂ ⊑ ⊥</code>， 根据 <code>sub</code> 规则我们有 <code>γ ⊢ L ↓ v₁′ ↦ (v₁ ⊔ v₂)</code>，因为 <code>v₁′ ↦ (v₁ ⊔ v₂) ⊑ v₁′ ↦ v₁</code>。</p></li><li><p>假设 <code>γ ⊢ L ↓ v₁′′ ↦ v₁, γ ⊢ M ↓ v₁′′</code>， <code>γ ⊢ L ↓ v₁′ ↦ v₂</code> 且 <code>γ ⊢ M ↓ v₁′</code>， 这种情况是最有趣的部分。通过使用两次 <code>⊔-intro</code>，我们有 <code>γ ⊢ L ↓ (v₁′ ↦ v₂) ⊔ (v₁′′ ↦ v₁)</code> 且 <code>γ ⊢ M ↓ (v₁′ ⊔ v₁′′)</code>。但它对 <code>ℰ L ● ℰ M</code> 来说与我们的需要尚不匹配， 因为 <code>L</code> 的结果必须是一个输入条目为 <code>v₁′ ⊔ v₁′′</code> 的 <code>↦</code>。 因此我们需要使用 <code>sub</code> 规则来得到 <code>γ ⊢ L ↓ (v₁′ ⊔ v₁′′) ↦ (v₁ ⊔ v₂)</code>； 使用 <code>⊔↦⊔-dist</code> 引理（感谢 <code>⊑-dist</code> 规则）来证明：</p><pre><code>  (v₁′ ⊔ v₁′′) ↦ (v₁ ⊔ v₂) ⊑ (v₁′ ↦ v₂) ⊔ (v₁′′ ↦ v₁)</code></pre><p>这样我们就证明了该情况所有的子情况。</p></li></ul></li><li><p>对于情况 <code>sub</code>，我们有 <code>Γ ⊢ L · M ↓ v₁</code> 且 <code>v ⊑ v₁</code>。 根据归纳假设，我们有 <code>(ℰ L ● ℰ M) γ v₁</code>，于是我们需要考虑两种子情况：</p><ul><li>假设 <code>v₁ ⊑ ⊥</code>，我们可推出 <code>v ⊑ ⊥</code>。</li><li>假设 <code>Γ ⊢ L ↓ v′ → v₁</code> 且 <code>Γ ⊢ M ↓ v′</code>，我们可根据规则 <code>sub</code> 推出 <code>Γ ⊢ L ↓ v′ → v</code>，因为 <code>v′ → v ⊑ v′ → v₁</code>。</li></ul></li></ul><p>向左的方向可通过在前提 <code>(ℰ L ● ℰ M) γ v</code> 下进行情况分析来证明。 对于情况 <code>v ⊑ ⊥</code>，我们可通过规则 <code>⊥-intro</code> 得到 <code>Γ ⊢ L · M ↓ ⊥</code>。 否则，我们可直接通过规则 <code>↦-elim</code> 得出结论：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-●ℰ→ℰ·"></a><a id="plfa_plfa-part3-Compositional-12166" href="../Compositional/#plfa_plfa-part3-Compositional-12166" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12172" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12174" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12176" href="../Compositional/#plfa_plfa-part3-Compositional-12176" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12177" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12179" href="../Compositional/#plfa_plfa-part3-Compositional-12179" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12181" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12183" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-12187" href="../Compositional/#plfa_plfa-part3-Compositional-12176" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12188" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12190" href="../Compositional/#plfa_plfa-part3-Compositional-12190" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12192" href="../Compositional/#plfa_plfa-part3-Compositional-12192" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-12194" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12196" href="../Compositional/#plfa_plfa-part3-Compositional-12176" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-12198" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-12200" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-12201" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12203" href="../Compositional/#plfa_plfa-part3-Compositional-12203" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12204" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12208" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12210" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12211" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12213" href="../Compositional/#plfa_plfa-part3-Compositional-12190" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12215" href="../Compositional/#plfa_plfa-part3-Compositional-6969" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12217" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12219" href="../Compositional/#plfa_plfa-part3-Compositional-12192" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12220" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12222" href="../Compositional/#plfa_plfa-part3-Compositional-12179" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12224" href="../Compositional/#plfa_plfa-part3-Compositional-12203" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-12230" class="Comment">----------------</a>
  <a id="plfa_plfa-part3-Compositional-12249" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12251" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12253" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12254" href="../Compositional/#plfa_plfa-part3-Compositional-12190" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12256" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-12258" href="../Compositional/#plfa_plfa-part3-Compositional-12192" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12259" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12261" href="../Compositional/#plfa_plfa-part3-Compositional-12179" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12263" href="../Compositional/#plfa_plfa-part3-Compositional-12203" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-12265" href="../Compositional/#plfa_plfa-part3-Compositional-12166" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12271" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12272" href="../Compositional/#plfa_plfa-part3-Compositional-12272" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-12273" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12275" href="../Compositional/#plfa_plfa-part3-Compositional-12275" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12276" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12278" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12279" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-12284" href="../Compositional/#plfa_plfa-part3-Compositional-12284" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-12286" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12288" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12290" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-12294" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-12302" href="../Compositional/#plfa_plfa-part3-Compositional-12284" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-12305" href="../Compositional/#plfa_plfa-part3-Compositional-12166" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12311" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12312" href="../Compositional/#plfa_plfa-part3-Compositional-12312" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-12313" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12315" href="../Compositional/#plfa_plfa-part3-Compositional-12315" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12316" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12318" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12319" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-12324" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12326" href="../Compositional/#plfa_plfa-part3-Compositional-12326" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-12329" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12331" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12333" href="../Compositional/#plfa_plfa-part3-Compositional-12333" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-12336" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12338" href="../Compositional/#plfa_plfa-part3-Compositional-12338" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-12341" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-12343" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-12344" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12346" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12348" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Compositional-12355" href="../Compositional/#plfa_plfa-part3-Compositional-12333" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-12358" href="../Compositional/#plfa_plfa-part3-Compositional-12338" class="Bound">d2</a>
</pre><p>这样我们就通过 <code>●</code> 函数的相关定理，证明了对于函数应用来说，语义是可组合的。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-app-equiv"></a><a id="plfa_plfa-part3-Compositional-12552" href="../Compositional/#plfa_plfa-part3-Compositional-12552" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-12562" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12564" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12566" href="../Compositional/#plfa_plfa-part3-Compositional-12566" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12567" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12569" href="../Compositional/#plfa_plfa-part3-Compositional-12569" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12571" href="../Compositional/#plfa_plfa-part3-Compositional-12571" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-12573" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12575" href="../Compositional/#plfa_plfa-part3-Compositional-12566" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-12577" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-12579" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-12580" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12584" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12586" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12588" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12589" href="../Compositional/#plfa_plfa-part3-Compositional-12569" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12591" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-12593" href="../Compositional/#plfa_plfa-part3-Compositional-12571" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12594" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12596" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12598" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12599" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12601" href="../Compositional/#plfa_plfa-part3-Compositional-12569" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-12602" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12604" href="../Compositional/#plfa_plfa-part3-Compositional-6969" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12606" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12607" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12609" href="../Compositional/#plfa_plfa-part3-Compositional-12571" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12610" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-12612" href="../Compositional/#plfa_plfa-part3-Compositional-12552" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-12622" href="../Compositional/#plfa_plfa-part3-Compositional-12622" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12624" href="../Compositional/#plfa_plfa-part3-Compositional-12624" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12626" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12628" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12630" href="../Compositional/#plfa_plfa-part3-Compositional-7784" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-12636" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12638" href="../Compositional/#plfa_plfa-part3-Compositional-12166" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12644" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
</pre><p>我们还需要一个变量的反演引理：若 <code>Γ ⊢ x ↓ v</code>，则 <code>v ⊑ γ x</code>。 它的证明就是对语义的直接归纳：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-var-inv"></a><a id="plfa_plfa-part3-Compositional-12866" href="../Compositional/#plfa_plfa-part3-Compositional-12866" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12874" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12876" class="Symbol">∀</a> <a id="plfa_plfa-part3-Compositional-12878" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12879" href="../Compositional/#plfa_plfa-part3-Compositional-12879" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-12881" href="../Compositional/#plfa_plfa-part3-Compositional-12881" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12883" href="../Compositional/#plfa_plfa-part3-Compositional-12883" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-12884" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12886" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12887" href="../Compositional/#plfa_plfa-part3-Compositional-12887" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12889" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12891" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-12895" href="../Compositional/#plfa_plfa-part3-Compositional-12879" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12896" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12900" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12902" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12904" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12905" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-12907" href="../Compositional/#plfa_plfa-part3-Compositional-12883" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-12908" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12910" href="../Compositional/#plfa_plfa-part3-Compositional-12887" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12912" href="../Compositional/#plfa_plfa-part3-Compositional-12881" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-12918" class="Comment">-------------------</a>
  <a id="plfa_plfa-part3-Compositional-12940" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12942" href="../Compositional/#plfa_plfa-part3-Compositional-12881" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12944" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-12946" href="../Compositional/#plfa_plfa-part3-Compositional-12887" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12948" href="../Compositional/#plfa_plfa-part3-Compositional-12883" class="Bound">x</a>
<a id="plfa_plfa-part3-Compositional-12950" href="../Compositional/#plfa_plfa-part3-Compositional-12866" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12958" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12959" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Compositional-12962" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12964" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12966" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a>
<a id="plfa_plfa-part3-Compositional-12973" href="../Compositional/#plfa_plfa-part3-Compositional-12866" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12981" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12982" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-12990" href="../Compositional/#plfa_plfa-part3-Compositional-12990" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-12993" href="../Compositional/#plfa_plfa-part3-Compositional-12993" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-12995" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12997" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12999" href="../Denotational/#plfa_plfa-part3-Denotational-5484" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-13008" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13009" href="../Compositional/#plfa_plfa-part3-Compositional-12866" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13017" href="../Compositional/#plfa_plfa-part3-Compositional-12990" class="Bound">d₁</a><a id="plfa_plfa-part3-Compositional-13019" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13021" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13022" href="../Compositional/#plfa_plfa-part3-Compositional-12866" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13030" href="../Compositional/#plfa_plfa-part3-Compositional-12993" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-13032" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-13034" href="../Compositional/#plfa_plfa-part3-Compositional-12866" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13042" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13043" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-13047" href="../Compositional/#plfa_plfa-part3-Compositional-13047" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-13049" href="../Compositional/#plfa_plfa-part3-Compositional-13049" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-13051" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13053" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-13055" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-13063" href="../Compositional/#plfa_plfa-part3-Compositional-13049" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-13066" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13067" href="../Compositional/#plfa_plfa-part3-Compositional-12866" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13075" href="../Compositional/#plfa_plfa-part3-Compositional-13047" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-13076" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-13078" href="../Compositional/#plfa_plfa-part3-Compositional-12866" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13086" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-13094" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-13096" href="../Denotational/#plfa_plfa-part3-Denotational-5459" class="InductiveConstructor">⊑-bot</a>
</pre><p>为了完善语义方程，我们为变量建立以下方程：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-var-equiv"></a><a id="plfa_plfa-part3-Compositional-13231" href="../Compositional/#plfa_plfa-part3-Compositional-13231" class="Function">var-equiv</a> <a id="plfa_plfa-part3-Compositional-13241" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13243" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-13245" href="../Compositional/#plfa_plfa-part3-Compositional-13245" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-13246" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13248" href="../Compositional/#plfa_plfa-part3-Compositional-13248" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-13250" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13252" href="../Compositional/#plfa_plfa-part3-Compositional-13245" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13254" href="../Untyped/#plfa_plfa-part2-Untyped-4355" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Compositional-13256" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-13257" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13259" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13261" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13263" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13264" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-13266" href="../Compositional/#plfa_plfa-part3-Compositional-13248" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-13267" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13269" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-13271" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-13274" href="../Compositional/#plfa_plfa-part3-Compositional-13274" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-13276" href="../Compositional/#plfa_plfa-part3-Compositional-13276" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-13278" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13280" href="../Compositional/#plfa_plfa-part3-Compositional-13276" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-13282" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-13284" href="../Compositional/#plfa_plfa-part3-Compositional-13274" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-13286" href="../Compositional/#plfa_plfa-part3-Compositional-13248" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-13287" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-13289" href="../Compositional/#plfa_plfa-part3-Compositional-13231" class="Function">var-equiv</a> <a id="plfa_plfa-part3-Compositional-13299" href="../Compositional/#plfa_plfa-part3-Compositional-13299" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-13301" href="../Compositional/#plfa_plfa-part3-Compositional-13301" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-13303" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-13305" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-13307" href="../Compositional/#plfa_plfa-part3-Compositional-12866" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13315" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-13317" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-13320" href="../Compositional/#plfa_plfa-part3-Compositional-13320" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-13323" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13325" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-13329" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Compositional-13333" href="../Compositional/#plfa_plfa-part3-Compositional-13320" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-13335" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13337" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="合同性">合同性</h2><p>本章的主要工作已经完成：我们建立了语义方程来展示指称语义是如何组合的。 在本节和下一节中，我们将利用这些方程来证明一些推论：指称相等满足<strong>合同性（congruence）</strong>， 并证明指称具有<strong>可组合性（compositionality property）</strong>， 该性质指出在同一语境中，两个指称相等的项会产生两个指称相等的程序 。</p><p>我们首先证明指称相等对 λ-抽象满足合同性：<code>ℰ N ≃ ℰ N′</code> 蕴含 <code>ℰ (ƛ N) ≃ ℰ (ƛ N′)</code>。我们用 <code>lam-equiv</code> 方程将这个问题简化为 <code>ℱ</code> 是否满足合同性：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱ-cong"></a><a id="plfa_plfa-part3-Compositional-14368" href="../Compositional/#plfa_plfa-part3-Compositional-14368" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-14375" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14377" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-14379" href="../Compositional/#plfa_plfa-part3-Compositional-14379" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14380" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14382" href="../Compositional/#plfa_plfa-part3-Compositional-14382" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14384" href="../Compositional/#plfa_plfa-part3-Compositional-14384" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14387" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14389" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-14400" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14401" href="../Compositional/#plfa_plfa-part3-Compositional-14379" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14403" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14405" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-14406" class="Symbol">)}</a>
  <a id="plfa_plfa-part3-Compositional-14411" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14413" href="../Compositional/#plfa_plfa-part3-Compositional-14382" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14415" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-14417" href="../Compositional/#plfa_plfa-part3-Compositional-14384" class="Bound">D′</a>
    <a id="plfa_plfa-part3-Compositional-14424" class="Comment">-----------</a>
  <a id="plfa_plfa-part3-Compositional-14438" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14440" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14442" href="../Compositional/#plfa_plfa-part3-Compositional-14382" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14444" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-14446" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14448" href="../Compositional/#plfa_plfa-part3-Compositional-14384" class="Bound">D′</a>
<a id="plfa_plfa-part3-Compositional-14451" href="../Compositional/#plfa_plfa-part3-Compositional-14368" class="Function">ℱ-cong</a><a id="plfa_plfa-part3-Compositional-14457" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14458" href="../Compositional/#plfa_plfa-part3-Compositional-14458" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14459" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14461" href="../Compositional/#plfa_plfa-part3-Compositional-14461" class="Bound">D≃D′</a> <a id="plfa_plfa-part3-Compositional-14466" href="../Compositional/#plfa_plfa-part3-Compositional-14466" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14468" href="../Compositional/#plfa_plfa-part3-Compositional-14468" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-14470" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-14474" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-14476" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-14479" href="../Compositional/#plfa_plfa-part3-Compositional-14479" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14481" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14483" href="../Compositional/#plfa_plfa-part3-Compositional-14546" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14485" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14486" href="../Compositional/#plfa_plfa-part3-Compositional-14466" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14487" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14489" href="../Compositional/#plfa_plfa-part3-Compositional-14468" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14490" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14492" href="../Compositional/#plfa_plfa-part3-Compositional-14479" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14494" href="../Compositional/#plfa_plfa-part3-Compositional-14461" class="Bound">D≃D′</a><a id="plfa_plfa-part3-Compositional-14498" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14500" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14502" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-14505" href="../Compositional/#plfa_plfa-part3-Compositional-14505" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14507" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14509" href="../Compositional/#plfa_plfa-part3-Compositional-14546" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14511" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14512" href="../Compositional/#plfa_plfa-part3-Compositional-14466" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14513" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14515" href="../Compositional/#plfa_plfa-part3-Compositional-14468" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14516" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14518" href="../Compositional/#plfa_plfa-part3-Compositional-14505" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14520" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14521" href="../Denotational/#plfa_plfa-part3-Denotational-22793" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-14527" href="../Compositional/#plfa_plfa-part3-Compositional-14461" class="Bound">D≃D′</a><a id="plfa_plfa-part3-Compositional-14531" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-14534" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Compositional-14538" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-14546" href="../Compositional/#plfa_plfa-part3-Compositional-14546" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14549" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14551" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-14553" href="../Compositional/#plfa_plfa-part3-Compositional-14553" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14555" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14557" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-14561" href="../Compositional/#plfa_plfa-part3-Compositional-14458" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14562" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14564" href="../Compositional/#plfa_plfa-part3-Compositional-14564" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14565" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14567" href="../Compositional/#plfa_plfa-part3-Compositional-14567" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14569" href="../Compositional/#plfa_plfa-part3-Compositional-14569" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14572" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14574" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-14585" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14586" href="../Compositional/#plfa_plfa-part3-Compositional-14458" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14588" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14590" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-14591" class="Symbol">)}</a>
    <a id="plfa_plfa-part3-Compositional-14598" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14600" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14602" href="../Compositional/#plfa_plfa-part3-Compositional-14567" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14604" href="../Compositional/#plfa_plfa-part3-Compositional-14553" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14606" href="../Compositional/#plfa_plfa-part3-Compositional-14564" class="Bound">v</a>  <a id="plfa_plfa-part3-Compositional-14609" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-14612" href="../Compositional/#plfa_plfa-part3-Compositional-14567" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14614" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-14616" href="../Compositional/#plfa_plfa-part3-Compositional-14569" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14619" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14621" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14623" href="../Compositional/#plfa_plfa-part3-Compositional-14569" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14626" href="../Compositional/#plfa_plfa-part3-Compositional-14553" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14628" href="../Compositional/#plfa_plfa-part3-Compositional-14564" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-14632" href="../Compositional/#plfa_plfa-part3-Compositional-14546" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14635" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14636" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-14638" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14640" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-14641" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14643" href="../Compositional/#plfa_plfa-part3-Compositional-14643" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-14646" href="../Compositional/#plfa_plfa-part3-Compositional-14646" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14650" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14652" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a>
  <a id="plfa_plfa-part3-Compositional-14657" href="../Compositional/#plfa_plfa-part3-Compositional-14546" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14660" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14661" href="../Compositional/#plfa_plfa-part3-Compositional-14661" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14662" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14664" href="../Compositional/#plfa_plfa-part3-Compositional-14664" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-14666" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-14668" href="../Compositional/#plfa_plfa-part3-Compositional-14668" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14669" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14671" href="../Compositional/#plfa_plfa-part3-Compositional-14671" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-14674" href="../Compositional/#plfa_plfa-part3-Compositional-14674" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14678" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14680" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-14686" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14687" href="../Compositional/#plfa_plfa-part3-Compositional-14674" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14691" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14692" href="../Compositional/#plfa_plfa-part3-Compositional-14661" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14694" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-14697" href="../Compositional/#plfa_plfa-part3-Compositional-14664" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14698" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14700" href="../Compositional/#plfa_plfa-part3-Compositional-14668" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14701" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14703" href="../Compositional/#plfa_plfa-part3-Compositional-14671" class="Bound">fd</a>
  <a id="plfa_plfa-part3-Compositional-14708" href="../Compositional/#plfa_plfa-part3-Compositional-14546" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14711" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14712" href="../Compositional/#plfa_plfa-part3-Compositional-14712" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14713" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14715" href="../Compositional/#plfa_plfa-part3-Compositional-14715" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-14717" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-14719" href="../Compositional/#plfa_plfa-part3-Compositional-14719" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14720" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14722" href="../Compositional/#plfa_plfa-part3-Compositional-14722" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-14725" href="../Compositional/#plfa_plfa-part3-Compositional-14725" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14729" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14731" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-14733" href="../Compositional/#plfa_plfa-part3-Compositional-14546" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14735" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14736" href="../Compositional/#plfa_plfa-part3-Compositional-14712" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14737" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14739" href="../Compositional/#plfa_plfa-part3-Compositional-14715" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-14740" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14742" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14743" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-14749" href="../Compositional/#plfa_plfa-part3-Compositional-14722" class="Bound">fd</a><a id="plfa_plfa-part3-Compositional-14751" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14753" href="../Compositional/#plfa_plfa-part3-Compositional-14725" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14757" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14759" href="../Compositional/#plfa_plfa-part3-Compositional-14546" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14761" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14762" href="../Compositional/#plfa_plfa-part3-Compositional-14712" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14763" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14765" href="../Compositional/#plfa_plfa-part3-Compositional-14719" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14766" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14768" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14769" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="plfa_plfa-part3-Compositional-14775" href="../Compositional/#plfa_plfa-part3-Compositional-14722" class="Bound">fd</a><a id="plfa_plfa-part3-Compositional-14777" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14779" href="../Compositional/#plfa_plfa-part3-Compositional-14725" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14783" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
</pre><p><code>ℱ-cong</code> 的证明使用了 <code>ℱ≃</code> 来处理「当且仅当」的两个方向。 该引理直接通过对值 <code>v</code> 进行归纳得证。</p><p>现在我们通过直白的等式推理证明 λ-抽象满足合同性：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lam-cong"></a><a id="plfa_plfa-part3-Compositional-15152" href="../Compositional/#plfa_plfa-part3-Compositional-15152" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-15161" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15163" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-15165" href="../Compositional/#plfa_plfa-part3-Compositional-15165" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15166" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15168" href="../Compositional/#plfa_plfa-part3-Compositional-15168" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-15170" href="../Compositional/#plfa_plfa-part3-Compositional-15170" class="Bound">N′</a> <a id="plfa_plfa-part3-Compositional-15173" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15175" href="../Compositional/#plfa_plfa-part3-Compositional-15165" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-15177" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-15179" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-15181" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-15183" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-15184" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-15188" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15190" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15192" href="../Compositional/#plfa_plfa-part3-Compositional-15168" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-15194" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15196" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15198" href="../Compositional/#plfa_plfa-part3-Compositional-15170" class="Bound">N′</a>
    <a id="plfa_plfa-part3-Compositional-15205" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Compositional-15225" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15227" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15229" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15230" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15232" href="../Compositional/#plfa_plfa-part3-Compositional-15168" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15233" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15235" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15237" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15239" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15240" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15242" href="../Compositional/#plfa_plfa-part3-Compositional-15170" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15244" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-15246" href="../Compositional/#plfa_plfa-part3-Compositional-15152" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-15255" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15256" href="../Compositional/#plfa_plfa-part3-Compositional-15256" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15257" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15259" href="../Compositional/#plfa_plfa-part3-Compositional-15259" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15260" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15262" href="../Compositional/#plfa_plfa-part3-Compositional-15262" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15264" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15266" href="../Compositional/#plfa_plfa-part3-Compositional-15266" class="Bound">N≃N′</a> <a id="plfa_plfa-part3-Compositional-15271" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15275" href="../Denotational/#plfa_plfa-part3-Denotational-23553" class="Function Operator">start</a>
    <a id="plfa_plfa-part3-Compositional-15285" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15287" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15288" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15290" href="../Compositional/#plfa_plfa-part3-Compositional-15259" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15291" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15295" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-15298" href="../Compositional/#plfa_plfa-part3-Compositional-5294" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-15308" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-15314" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-15316" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15317" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15319" href="../Compositional/#plfa_plfa-part3-Compositional-15259" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15320" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15324" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-15327" href="../Compositional/#plfa_plfa-part3-Compositional-14368" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-15334" href="../Compositional/#plfa_plfa-part3-Compositional-15266" class="Bound">N≃N′</a> <a id="plfa_plfa-part3-Compositional-15339" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-15345" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-15347" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15348" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15350" href="../Compositional/#plfa_plfa-part3-Compositional-15262" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15352" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15356" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-15359" href="../Denotational/#plfa_plfa-part3-Denotational-22793" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-15365" href="../Compositional/#plfa_plfa-part3-Compositional-5294" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-15375" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-15381" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15383" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15384" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15386" href="../Compositional/#plfa_plfa-part3-Compositional-15262" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15388" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15392" href="../Denotational/#plfa_plfa-part3-Denotational-23891" class="Function Operator">☐</a>
</pre><p>接下来我们证明指称相等对于应用也满足合同性：<code>ℰ L ≃ ℰ L′</code> 和 <code>ℰ M ≃ ℰ M′</code> 蕴含 <code>ℰ (L · M) ≃ ℰ (L′ · M′)</code>。方程 <code>app-equiv</code> 将其归约为 <code>●</code> 运算符是否满足合同性的问题。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-●-cong"></a><a id="plfa_plfa-part3-Compositional-15778" href="../Compositional/#plfa_plfa-part3-Compositional-15778" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-15785" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15787" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-15789" href="../Compositional/#plfa_plfa-part3-Compositional-15789" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15790" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15792" href="../Compositional/#plfa_plfa-part3-Compositional-15792" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-15795" href="../Compositional/#plfa_plfa-part3-Compositional-15795" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-15799" href="../Compositional/#plfa_plfa-part3-Compositional-15799" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-15802" href="../Compositional/#plfa_plfa-part3-Compositional-15802" class="Bound">D₂′</a> <a id="plfa_plfa-part3-Compositional-15806" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15808" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-15819" href="../Compositional/#plfa_plfa-part3-Compositional-15789" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15820" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-15824" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15826" href="../Compositional/#plfa_plfa-part3-Compositional-15792" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-15829" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15831" href="../Compositional/#plfa_plfa-part3-Compositional-15795" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-15835" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15837" href="../Compositional/#plfa_plfa-part3-Compositional-15799" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-15840" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15842" href="../Compositional/#plfa_plfa-part3-Compositional-15802" class="Bound">D₂′</a>
  <a id="plfa_plfa-part3-Compositional-15848" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15850" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15851" href="../Compositional/#plfa_plfa-part3-Compositional-15792" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-15854" href="../Compositional/#plfa_plfa-part3-Compositional-6969" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-15856" href="../Compositional/#plfa_plfa-part3-Compositional-15799" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-15858" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15860" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15862" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15863" href="../Compositional/#plfa_plfa-part3-Compositional-15795" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-15867" href="../Compositional/#plfa_plfa-part3-Compositional-6969" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-15869" href="../Compositional/#plfa_plfa-part3-Compositional-15802" class="Bound">D₂′</a><a id="plfa_plfa-part3-Compositional-15872" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-15874" href="../Compositional/#plfa_plfa-part3-Compositional-15778" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-15881" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15882" href="../Compositional/#plfa_plfa-part3-Compositional-15882" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15883" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15885" href="../Compositional/#plfa_plfa-part3-Compositional-15885" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-15888" href="../Compositional/#plfa_plfa-part3-Compositional-15888" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-15891" href="../Compositional/#plfa_plfa-part3-Compositional-15891" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-15893" href="../Compositional/#plfa_plfa-part3-Compositional-15893" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-15895" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15897" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-15899" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15902" href="../Compositional/#plfa_plfa-part3-Compositional-15902" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15904" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15906" href="../Compositional/#plfa_plfa-part3-Compositional-15992" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-15909" href="../Compositional/#plfa_plfa-part3-Compositional-15902" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15911" href="../Compositional/#plfa_plfa-part3-Compositional-15885" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-15914" href="../Compositional/#plfa_plfa-part3-Compositional-15888" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-15916" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15918" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a>
                         <a id="plfa_plfa-part3-Compositional-15945" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15948" href="../Compositional/#plfa_plfa-part3-Compositional-15948" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15950" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15952" href="../Compositional/#plfa_plfa-part3-Compositional-15992" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-15955" href="../Compositional/#plfa_plfa-part3-Compositional-15948" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15957" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15958" href="../Denotational/#plfa_plfa-part3-Denotational-22793" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-15964" href="../Compositional/#plfa_plfa-part3-Compositional-15885" class="Bound">d1</a><a id="plfa_plfa-part3-Compositional-15966" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15968" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15969" href="../Denotational/#plfa_plfa-part3-Denotational-22793" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-15975" href="../Compositional/#plfa_plfa-part3-Compositional-15888" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-15977" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-15980" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Compositional-15984" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-15992" href="../Compositional/#plfa_plfa-part3-Compositional-15992" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-15995" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15997" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-15999" href="../Compositional/#plfa_plfa-part3-Compositional-15999" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16001" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16003" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-16007" href="../Compositional/#plfa_plfa-part3-Compositional-15882" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16008" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16010" href="../Compositional/#plfa_plfa-part3-Compositional-16010" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-16011" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16013" href="../Compositional/#plfa_plfa-part3-Compositional-16013" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-16016" href="../Compositional/#plfa_plfa-part3-Compositional-16016" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-16020" href="../Compositional/#plfa_plfa-part3-Compositional-16020" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-16023" href="../Compositional/#plfa_plfa-part3-Compositional-16023" class="Bound">D₂′</a> <a id="plfa_plfa-part3-Compositional-16027" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16029" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-16040" href="../Compositional/#plfa_plfa-part3-Compositional-15882" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16041" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Compositional-16047" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16049" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16050" href="../Compositional/#plfa_plfa-part3-Compositional-16013" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-16053" href="../Compositional/#plfa_plfa-part3-Compositional-6969" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16055" href="../Compositional/#plfa_plfa-part3-Compositional-16020" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-16057" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16059" href="../Compositional/#plfa_plfa-part3-Compositional-15999" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16061" href="../Compositional/#plfa_plfa-part3-Compositional-16010" class="Bound">v</a>  <a id="plfa_plfa-part3-Compositional-16064" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-16067" href="../Compositional/#plfa_plfa-part3-Compositional-16013" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-16070" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16072" href="../Compositional/#plfa_plfa-part3-Compositional-16016" class="Bound">D₁′</a>  <a id="plfa_plfa-part3-Compositional-16077" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-16080" href="../Compositional/#plfa_plfa-part3-Compositional-16020" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-16083" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16085" href="../Compositional/#plfa_plfa-part3-Compositional-16023" class="Bound">D₂′</a>
    <a id="plfa_plfa-part3-Compositional-16093" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16095" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16096" href="../Compositional/#plfa_plfa-part3-Compositional-16016" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-16100" href="../Compositional/#plfa_plfa-part3-Compositional-6969" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16102" href="../Compositional/#plfa_plfa-part3-Compositional-16023" class="Bound">D₂′</a><a id="plfa_plfa-part3-Compositional-16105" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16107" href="../Compositional/#plfa_plfa-part3-Compositional-15999" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16109" href="../Compositional/#plfa_plfa-part3-Compositional-16010" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-16113" href="../Compositional/#plfa_plfa-part3-Compositional-15992" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-16116" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16117" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-16122" href="../Compositional/#plfa_plfa-part3-Compositional-16122" class="Bound">v⊑⊥</a><a id="plfa_plfa-part3-Compositional-16125" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16127" href="../Compositional/#plfa_plfa-part3-Compositional-16127" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-16131" href="../Compositional/#plfa_plfa-part3-Compositional-16131" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-16135" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16137" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-16142" href="../Compositional/#plfa_plfa-part3-Compositional-16122" class="Bound">v⊑⊥</a>
  <a id="plfa_plfa-part3-Compositional-16148" href="../Compositional/#plfa_plfa-part3-Compositional-15992" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-16151" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16152" href="../Compositional/#plfa_plfa-part3-Compositional-16152" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-16153" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16155" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16156" href="../Compositional/#plfa_plfa-part3-Compositional-16156" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-16157" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16159" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16160" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-16165" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16167" href="../Compositional/#plfa_plfa-part3-Compositional-16167" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16169" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16171" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16173" href="../Compositional/#plfa_plfa-part3-Compositional-16173" class="Bound">Dv↦w</a> <a id="plfa_plfa-part3-Compositional-16178" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16180" href="../Compositional/#plfa_plfa-part3-Compositional-16180" class="Bound">Dv</a> <a id="plfa_plfa-part3-Compositional-16183" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-16185" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-16186" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16188" href="../Compositional/#plfa_plfa-part3-Compositional-16188" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-16192" href="../Compositional/#plfa_plfa-part3-Compositional-16192" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-16196" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Compositional-16202" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-16207" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16209" href="../Compositional/#plfa_plfa-part3-Compositional-16167" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16211" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16213" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16215" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-16221" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16222" href="../Compositional/#plfa_plfa-part3-Compositional-16188" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-16226" href="../Compositional/#plfa_plfa-part3-Compositional-16152" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16228" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16229" href="../Compositional/#plfa_plfa-part3-Compositional-16167" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16231" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-16233" href="../Compositional/#plfa_plfa-part3-Compositional-16156" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-16234" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-16237" href="../Compositional/#plfa_plfa-part3-Compositional-16173" class="Bound">Dv↦w</a> <a id="plfa_plfa-part3-Compositional-16242" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16244" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-16250" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16251" href="../Compositional/#plfa_plfa-part3-Compositional-16192" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-16255" href="../Compositional/#plfa_plfa-part3-Compositional-16152" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16257" href="../Compositional/#plfa_plfa-part3-Compositional-16167" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-16258" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16260" href="../Compositional/#plfa_plfa-part3-Compositional-16180" class="Bound">Dv</a> <a id="plfa_plfa-part3-Compositional-16263" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-16265" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
</pre><p>同样，「当且仅当」的两个方向需要通过一个引理来证明，而该引理则通过对 <code>(D₁ ● D₂) γ v</code> 进行情况分析来证明。</p><p>根据 <code>●</code> 的合同性，我们可以直接通过等式推理证明应用也满足合同性。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-app-cong"></a><a id="plfa_plfa-part3-Compositional-16634" href="../Compositional/#plfa_plfa-part3-Compositional-16634" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-16643" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16645" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-16647" href="../Compositional/#plfa_plfa-part3-Compositional-16647" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16648" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16650" href="../Compositional/#plfa_plfa-part3-Compositional-16650" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16652" href="../Compositional/#plfa_plfa-part3-Compositional-16652" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16655" href="../Compositional/#plfa_plfa-part3-Compositional-16655" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16657" href="../Compositional/#plfa_plfa-part3-Compositional-16657" class="Bound">M′</a> <a id="plfa_plfa-part3-Compositional-16660" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16662" href="../Compositional/#plfa_plfa-part3-Compositional-16647" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-16664" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-16666" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-16667" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-16671" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16673" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16675" href="../Compositional/#plfa_plfa-part3-Compositional-16650" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16677" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16679" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16681" href="../Compositional/#plfa_plfa-part3-Compositional-16652" class="Bound">L′</a>
  <a id="plfa_plfa-part3-Compositional-16686" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16688" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16690" href="../Compositional/#plfa_plfa-part3-Compositional-16655" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16692" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16694" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16696" href="../Compositional/#plfa_plfa-part3-Compositional-16657" class="Bound">M′</a>
    <a id="plfa_plfa-part3-Compositional-16703" class="Comment">-------------------------</a>
  <a id="plfa_plfa-part3-Compositional-16731" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16733" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16735" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16736" href="../Compositional/#plfa_plfa-part3-Compositional-16650" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16738" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16740" href="../Compositional/#plfa_plfa-part3-Compositional-16655" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16741" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16743" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16745" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16747" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16748" href="../Compositional/#plfa_plfa-part3-Compositional-16652" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16751" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16753" href="../Compositional/#plfa_plfa-part3-Compositional-16657" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-16755" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-16757" href="../Compositional/#plfa_plfa-part3-Compositional-16634" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-16766" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16767" href="../Compositional/#plfa_plfa-part3-Compositional-16767" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16768" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16770" href="../Compositional/#plfa_plfa-part3-Compositional-16770" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-16771" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16773" href="../Compositional/#plfa_plfa-part3-Compositional-16773" class="Bound">L′</a><a id="plfa_plfa-part3-Compositional-16775" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16777" href="../Compositional/#plfa_plfa-part3-Compositional-16777" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16778" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16780" href="../Compositional/#plfa_plfa-part3-Compositional-16780" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-16782" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16784" href="../Compositional/#plfa_plfa-part3-Compositional-16784" class="Bound">L≅L′</a> <a id="plfa_plfa-part3-Compositional-16789" href="../Compositional/#plfa_plfa-part3-Compositional-16789" class="Bound">M≅M′</a> <a id="plfa_plfa-part3-Compositional-16794" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-16798" href="../Denotational/#plfa_plfa-part3-Denotational-23553" class="Function Operator">start</a>
    <a id="plfa_plfa-part3-Compositional-16808" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16810" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16811" href="../Compositional/#plfa_plfa-part3-Compositional-16770" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16813" href="../Untyped/#plfa_plfa-part2-Untyped-5546" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16815" href="../Compositional/#plfa_plfa-part3-Compositional-16777" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16816" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16820" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16823" href="../Compositional/#plfa_plfa-part3-Compositional-12552" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-16833" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16839" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16841" href="../Compositional/#plfa_plfa-part3-Compositional-16770" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16843" href="../Compositional/#plfa_plfa-part3-Compositional-6969" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16845" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16847" href="../Compositional/#plfa_plfa-part3-Compositional-16777" class="Bound">M</a>
  <a id="plfa_plfa-part3-Compositional-16851" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16854" href="../Compositional/#plfa_plfa-part3-Compositional-15778" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-16861" href="../Compositional/#plfa_plfa-part3-Compositional-16784" class="Bound">L≅L′</a> <a id="plfa_plfa-part3-Compositional-16866" href="../Compositional/#plfa_plfa-part3-Compositional-16789" class="Bound">M≅M′</a> <a id="plfa_plfa-part3-Compositional-16871" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16877" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16879" href="../Compositional/#plfa_plfa-part3-Compositional-16773" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16882" href="../Compositional/#plfa_plfa-part3-Compositional-6969" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16884" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16886" href="../Compositional/#plfa_plfa-part3-Compositional-16780" class="Bound">M′</a>
  <a id="plfa_plfa-part3-Compositional-16891" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16894" href="../Denotational/#plfa_plfa-part3-Denotational-22793" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-16900" href="../Compositional/#plfa_plfa-part3-Compositional-12552" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-16910" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16916" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16918" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16919" href="../Compositional/#plfa_plfa-part3-Compositional-16773" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16922" href="../Untyped/#plfa_plfa-part2-Untyped-5546" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16924" href="../Compositional/#plfa_plfa-part3-Compositional-16780" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-16926" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16930" href="../Denotational/#plfa_plfa-part3-Denotational-23891" class="Function Operator">☐</a>
</pre><h2 id="可组合性">可组合性</h2><p><strong>可组合性（Compositionality Property）</strong>说明了在同一语境下， 两个指称相等的项会产生两个指称相等的程序。为准确起见，我们定义了 「语境」和「在语境下」的含义。</p><p><strong>语境（Context）</strong>是一个带洞的程序。以下数据定义 <code>Ctx</code> 将这个概念表示了出来。 我们使用两个变量语境来索引 <code>Ctx</code> 数据类型：一个表示洞，另一个表示填洞所产生的项。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-17929" class="Keyword">data</a> <a id="plfa_plfa-part3-Compositional-Ctx"></a><a id="plfa_plfa-part3-Compositional-17934" href="../Compositional/#plfa_plfa-part3-Compositional-17934" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-17938" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-17940" href="../Untyped/#plfa_plfa-part2-Untyped-3830" class="Datatype">Context</a> <a id="plfa_plfa-part3-Compositional-17948" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-17950" href="../Untyped/#plfa_plfa-part2-Untyped-3830" class="Datatype">Context</a> <a id="plfa_plfa-part3-Compositional-17958" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-17960" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part3-Compositional-17964" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-hole"></a><a id="plfa_plfa-part3-Compositional-17972" href="../Compositional/#plfa_plfa-part3-Compositional-17972" class="InductiveConstructor">ctx-hole</a> <a id="plfa_plfa-part3-Compositional-17981" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-17983" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-17985" href="../Compositional/#plfa_plfa-part3-Compositional-17985" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-17986" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-17988" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-17990" href="../Compositional/#plfa_plfa-part3-Compositional-17934" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-17994" href="../Compositional/#plfa_plfa-part3-Compositional-17985" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-17996" href="../Compositional/#plfa_plfa-part3-Compositional-17985" class="Bound">Γ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-lam"></a><a id="plfa_plfa-part3-Compositional-18000" href="../Compositional/#plfa_plfa-part3-Compositional-18000" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-18008" class="Symbol">:</a>  <a id="plfa_plfa-part3-Compositional-18011" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-18013" href="../Compositional/#plfa_plfa-part3-Compositional-18013" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18015" href="../Compositional/#plfa_plfa-part3-Compositional-18015" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-18016" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-18018" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18020" href="../Compositional/#plfa_plfa-part3-Compositional-17934" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18024" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-18025" href="../Compositional/#plfa_plfa-part3-Compositional-18013" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18027" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-18029" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-18030" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-18032" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-18033" href="../Compositional/#plfa_plfa-part3-Compositional-18015" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18035" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-18037" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-18038" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-18040" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18042" href="../Compositional/#plfa_plfa-part3-Compositional-17934" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18046" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-18047" href="../Compositional/#plfa_plfa-part3-Compositional-18013" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18049" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-18051" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-18052" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-18054" href="../Compositional/#plfa_plfa-part3-Compositional-18015" class="Bound">Δ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-app-L"></a><a id="plfa_plfa-part3-Compositional-18058" href="../Compositional/#plfa_plfa-part3-Compositional-18058" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-18068" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-18070" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-18072" href="../Compositional/#plfa_plfa-part3-Compositional-18072" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18074" href="../Compositional/#plfa_plfa-part3-Compositional-18074" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-18075" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-18077" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18079" href="../Compositional/#plfa_plfa-part3-Compositional-17934" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18083" href="../Compositional/#plfa_plfa-part3-Compositional-18072" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18085" href="../Compositional/#plfa_plfa-part3-Compositional-18074" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18087" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18089" href="../Compositional/#plfa_plfa-part3-Compositional-18074" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18091" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-18093" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-18095" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18097" href="../Compositional/#plfa_plfa-part3-Compositional-17934" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18101" href="../Compositional/#plfa_plfa-part3-Compositional-18072" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18103" href="../Compositional/#plfa_plfa-part3-Compositional-18074" class="Bound">Δ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-app-R"></a><a id="plfa_plfa-part3-Compositional-18107" href="../Compositional/#plfa_plfa-part3-Compositional-18107" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-18117" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-18119" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-18121" href="../Compositional/#plfa_plfa-part3-Compositional-18121" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18123" href="../Compositional/#plfa_plfa-part3-Compositional-18123" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-18124" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-18126" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18128" href="../Compositional/#plfa_plfa-part3-Compositional-18123" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18130" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-18132" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-18134" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18136" href="../Compositional/#plfa_plfa-part3-Compositional-17934" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18140" href="../Compositional/#plfa_plfa-part3-Compositional-18121" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18142" href="../Compositional/#plfa_plfa-part3-Compositional-18123" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18144" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18146" href="../Compositional/#plfa_plfa-part3-Compositional-17934" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18150" href="../Compositional/#plfa_plfa-part3-Compositional-18121" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18152" href="../Compositional/#plfa_plfa-part3-Compositional-18123" class="Bound">Δ</a>
</pre><ul><li>构造子 <code>ctx-hole</code> 表示洞，且在此情况中洞的变量语境 与填洞所产生的项的变量语境相同。</li></ul><ul><li>构造子 <code>ctx-lam</code> 接受一个 <code>Ctx</code> 并在顶部添加 λ-抽象来产生一个更大的 <code>Ctx</code>。 洞的变量语境保持不变，而我们从结果项的语境中删除一个变量，因为它被此 λ-抽象约束。</li></ul><ul><li>应用有两种构造，<code>ctx-app-L</code> 和 <code>ctx-app-R</code>。<code>ctx-app-L</code> 对应洞位于左侧项（运算符）内的情况，<code>ctx-app-R</code> 对应洞位于右侧项（运算数）内的情况。</li></ul><p>将项插入到某个语境下的操作由以下 <code>plug</code> 函数定义，它是通过对语境进行递归来定义的：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-plug"></a><a id="plfa_plfa-part3-Compositional-19363" href="../Compositional/#plfa_plfa-part3-Compositional-19363" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19368" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19370" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-19372" href="../Compositional/#plfa_plfa-part3-Compositional-19372" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-19373" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-19375" href="../Compositional/#plfa_plfa-part3-Compositional-19375" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-19376" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-19378" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19380" href="../Compositional/#plfa_plfa-part3-Compositional-17934" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-19384" href="../Compositional/#plfa_plfa-part3-Compositional-19372" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19386" href="../Compositional/#plfa_plfa-part3-Compositional-19375" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-19388" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19390" href="../Compositional/#plfa_plfa-part3-Compositional-19372" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19392" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-19394" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-19396" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19398" href="../Compositional/#plfa_plfa-part3-Compositional-19375" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-19400" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-19402" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a>
<a id="plfa_plfa-part3-Compositional-19404" href="../Compositional/#plfa_plfa-part3-Compositional-19363" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19409" href="../Compositional/#plfa_plfa-part3-Compositional-17972" class="InductiveConstructor">ctx-hole</a> <a id="plfa_plfa-part3-Compositional-19418" href="../Compositional/#plfa_plfa-part3-Compositional-19418" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19420" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19422" href="../Compositional/#plfa_plfa-part3-Compositional-19418" class="Bound">M</a>
<a id="plfa_plfa-part3-Compositional-19424" href="../Compositional/#plfa_plfa-part3-Compositional-19363" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19429" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19430" href="../Compositional/#plfa_plfa-part3-Compositional-18000" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-19438" href="../Compositional/#plfa_plfa-part3-Compositional-19438" class="Bound">C</a><a id="plfa_plfa-part3-Compositional-19439" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19441" href="../Compositional/#plfa_plfa-part3-Compositional-19441" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-19443" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19445" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-19447" href="../Compositional/#plfa_plfa-part3-Compositional-19363" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19452" href="../Compositional/#plfa_plfa-part3-Compositional-19438" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19454" href="../Compositional/#plfa_plfa-part3-Compositional-19441" class="Bound">N</a>
<a id="plfa_plfa-part3-Compositional-19456" href="../Compositional/#plfa_plfa-part3-Compositional-19363" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19461" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19462" href="../Compositional/#plfa_plfa-part3-Compositional-18058" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-19472" href="../Compositional/#plfa_plfa-part3-Compositional-19472" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19474" href="../Compositional/#plfa_plfa-part3-Compositional-19474" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-19475" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19477" href="../Compositional/#plfa_plfa-part3-Compositional-19477" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-19479" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19481" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19482" href="../Compositional/#plfa_plfa-part3-Compositional-19363" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19487" href="../Compositional/#plfa_plfa-part3-Compositional-19472" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19489" href="../Compositional/#plfa_plfa-part3-Compositional-19477" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-19490" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19492" href="../Untyped/#plfa_plfa-part2-Untyped-5546" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-19494" href="../Compositional/#plfa_plfa-part3-Compositional-19474" class="Bound">N</a>
<a id="plfa_plfa-part3-Compositional-19496" href="../Compositional/#plfa_plfa-part3-Compositional-19363" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19501" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19502" href="../Compositional/#plfa_plfa-part3-Compositional-18107" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-19512" href="../Compositional/#plfa_plfa-part3-Compositional-19512" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-19514" href="../Compositional/#plfa_plfa-part3-Compositional-19514" class="Bound">C</a><a id="plfa_plfa-part3-Compositional-19515" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19517" href="../Compositional/#plfa_plfa-part3-Compositional-19517" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19519" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19521" href="../Compositional/#plfa_plfa-part3-Compositional-19512" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-19523" href="../Untyped/#plfa_plfa-part2-Untyped-5546" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-19525" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19526" href="../Compositional/#plfa_plfa-part3-Compositional-19363" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19531" href="../Compositional/#plfa_plfa-part3-Compositional-19514" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19533" href="../Compositional/#plfa_plfa-part3-Compositional-19517" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-19534" class="Symbol">)</a>
</pre><p>我们接下来陈述并证明组合性原则：给定两个项 <code>M</code> 和 <code>N</code>，若它们的指称相等， 那么将它们插入到任意语境 <code>C</code> 中都会产生两个指称相等的程序：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-compositionality"></a><a id="plfa_plfa-part3-Compositional-19861" href="../Compositional/#plfa_plfa-part3-Compositional-19861" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-19878" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19880" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-19882" href="../Compositional/#plfa_plfa-part3-Compositional-19882" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19884" href="../Compositional/#plfa_plfa-part3-Compositional-19884" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-19885" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-19887" href="../Compositional/#plfa_plfa-part3-Compositional-19887" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19889" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19891" href="../Compositional/#plfa_plfa-part3-Compositional-17934" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-19895" href="../Compositional/#plfa_plfa-part3-Compositional-19882" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19897" href="../Compositional/#plfa_plfa-part3-Compositional-19884" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-19898" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-19900" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-19901" href="../Compositional/#plfa_plfa-part3-Compositional-19901" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19903" href="../Compositional/#plfa_plfa-part3-Compositional-19903" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-19905" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19907" href="../Compositional/#plfa_plfa-part3-Compositional-19882" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19909" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-19911" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-19912" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-19916" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19918" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19920" href="../Compositional/#plfa_plfa-part3-Compositional-19901" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19922" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-19924" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19926" href="../Compositional/#plfa_plfa-part3-Compositional-19903" class="Bound">N</a>
    <a id="plfa_plfa-part3-Compositional-19932" class="Comment">---------------------------</a>
  <a id="plfa_plfa-part3-Compositional-19962" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19964" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19966" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19967" href="../Compositional/#plfa_plfa-part3-Compositional-19363" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19972" href="../Compositional/#plfa_plfa-part3-Compositional-19887" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19974" href="../Compositional/#plfa_plfa-part3-Compositional-19901" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-19975" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19977" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-19979" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19981" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19982" href="../Compositional/#plfa_plfa-part3-Compositional-19363" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19987" href="../Compositional/#plfa_plfa-part3-Compositional-19887" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19989" href="../Compositional/#plfa_plfa-part3-Compositional-19903" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-19990" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-19992" href="../Compositional/#plfa_plfa-part3-Compositional-19861" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20009" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20010" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20012" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20014" href="../Compositional/#plfa_plfa-part3-Compositional-17972" class="InductiveConstructor">ctx-hole</a><a id="plfa_plfa-part3-Compositional-20022" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20024" href="../Compositional/#plfa_plfa-part3-Compositional-20024" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-20028" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-20032" href="../Compositional/#plfa_plfa-part3-Compositional-20024" class="Bound">M≃N</a>
<a id="plfa_plfa-part3-Compositional-20036" href="../Compositional/#plfa_plfa-part3-Compositional-19861" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20053" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20054" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20056" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20058" href="../Compositional/#plfa_plfa-part3-Compositional-18000" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-20066" href="../Compositional/#plfa_plfa-part3-Compositional-20066" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20068" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20070" href="../Compositional/#plfa_plfa-part3-Compositional-20070" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-20074" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-20078" href="../Compositional/#plfa_plfa-part3-Compositional-15152" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-20087" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-20088" href="../Compositional/#plfa_plfa-part3-Compositional-19861" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20105" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20106" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20108" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20110" href="../Compositional/#plfa_plfa-part3-Compositional-20066" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20112" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20114" href="../Compositional/#plfa_plfa-part3-Compositional-20070" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-20117" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-20119" href="../Compositional/#plfa_plfa-part3-Compositional-19861" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20136" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20137" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20139" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20141" href="../Compositional/#plfa_plfa-part3-Compositional-18058" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-20151" href="../Compositional/#plfa_plfa-part3-Compositional-20151" class="Bound">C′</a> <a id="plfa_plfa-part3-Compositional-20154" href="../Compositional/#plfa_plfa-part3-Compositional-20154" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-20155" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20157" href="../Compositional/#plfa_plfa-part3-Compositional-20157" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-20161" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-20165" href="../Compositional/#plfa_plfa-part3-Compositional-16634" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-20174" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-20175" href="../Compositional/#plfa_plfa-part3-Compositional-19861" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20192" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20193" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20195" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20197" href="../Compositional/#plfa_plfa-part3-Compositional-20151" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20199" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20201" href="../Compositional/#plfa_plfa-part3-Compositional-20157" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-20204" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20206" class="Symbol">λ</a> <a id="plfa_plfa-part3-Compositional-20208" href="../Compositional/#plfa_plfa-part3-Compositional-20208" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-20210" href="../Compositional/#plfa_plfa-part3-Compositional-20210" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-20212" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20214" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-20216" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20219" href="../Compositional/#plfa_plfa-part3-Compositional-20219" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20221" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20223" href="../Compositional/#plfa_plfa-part3-Compositional-20219" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20224" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20226" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-20228" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20231" href="../Compositional/#plfa_plfa-part3-Compositional-20231" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20233" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20235" href="../Compositional/#plfa_plfa-part3-Compositional-20231" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20236" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20238" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-20240" href="../Compositional/#plfa_plfa-part3-Compositional-19861" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20257" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20258" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20260" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20262" href="../Compositional/#plfa_plfa-part3-Compositional-18107" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-20272" href="../Compositional/#plfa_plfa-part3-Compositional-20272" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-20274" href="../Compositional/#plfa_plfa-part3-Compositional-20274" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20276" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20278" href="../Compositional/#plfa_plfa-part3-Compositional-20278" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-20282" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-20286" href="../Compositional/#plfa_plfa-part3-Compositional-16634" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-20295" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20298" href="../Compositional/#plfa_plfa-part3-Compositional-20298" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-20300" href="../Compositional/#plfa_plfa-part3-Compositional-20300" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-20302" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20304" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-20306" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20309" href="../Compositional/#plfa_plfa-part3-Compositional-20309" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20311" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20313" href="../Compositional/#plfa_plfa-part3-Compositional-20309" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20314" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20316" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-20318" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20321" href="../Compositional/#plfa_plfa-part3-Compositional-20321" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20323" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20325" href="../Compositional/#plfa_plfa-part3-Compositional-20321" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20326" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20328" href="../Compositional/#plfa_plfa-part3-Compositional-854" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-20329" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20331" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-20332" href="../Compositional/#plfa_plfa-part3-Compositional-19861" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20349" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20350" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20352" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20354" href="../Compositional/#plfa_plfa-part3-Compositional-20274" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20356" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20358" href="../Compositional/#plfa_plfa-part3-Compositional-20278" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-20361" class="Symbol">)</a>
</pre><p>它可以通过直接对语境 <code>C</code> 进行归纳，用我们之前建立的合同性质 <code>lam-cong</code> 和 <code>app-cong</code> 来证明。</p><h2 id="指称语义作为函数来定义">指称语义作为函数来定义</h2><p>建立了 <code>var-equiv</code>、<code>lam-equiv</code> 和 <code>app-equiv</code> 三个方程后， 我们就能将指称语义定义为一个在输入项 <code>M</code> 上递归的函数。其实， 我们可以定义以下函数 <code>⟦ M ⟧</code>，利用辅助的柯里化函数 <code>ℱ</code>， 并分别在 λ-抽象和应用的情况下应用 <code>●</code> 函数来将项映射到指称。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-⟦_⟧"></a><a id="plfa_plfa-part3-Compositional-21214" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟦_⟧</a> <a id="plfa_plfa-part3-Compositional-21218" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21220" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-21222" href="../Compositional/#plfa_plfa-part3-Compositional-21222" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21223" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21225" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-21227" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21228" href="../Compositional/#plfa_plfa-part3-Compositional-21228" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21230" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21232" href="../Compositional/#plfa_plfa-part3-Compositional-21222" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-21234" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-21236" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-21237" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-21239" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-21241" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-21252" href="../Compositional/#plfa_plfa-part3-Compositional-21222" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-21254" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21256" href="../Untyped/#plfa_plfa-part2-Untyped-5434" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-21258" href="../Compositional/#plfa_plfa-part3-Compositional-21258" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-21260" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21262" href="../Compositional/#plfa_plfa-part3-Compositional-21262" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-21264" href="../Compositional/#plfa_plfa-part3-Compositional-21264" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-21266" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21268" href="../Compositional/#plfa_plfa-part3-Compositional-21264" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-21270" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-21272" href="../Compositional/#plfa_plfa-part3-Compositional-21262" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-21274" href="../Compositional/#plfa_plfa-part3-Compositional-21258" class="Bound">x</a>
<a id="plfa_plfa-part3-Compositional-21276" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21278" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21280" href="../Compositional/#plfa_plfa-part3-Compositional-21280" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21282" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21284" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21286" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-21288" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21290" href="../Compositional/#plfa_plfa-part3-Compositional-21280" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21292" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟧</a>
<a id="plfa_plfa-part3-Compositional-21294" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21296" href="../Compositional/#plfa_plfa-part3-Compositional-21296" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21298" href="../Untyped/#plfa_plfa-part2-Untyped-5546" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21300" href="../Compositional/#plfa_plfa-part3-Compositional-21300" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21302" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21304" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21306" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21308" href="../Compositional/#plfa_plfa-part3-Compositional-21296" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21310" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21312" href="../Compositional/#plfa_plfa-part3-Compositional-6969" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-21314" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21316" href="../Compositional/#plfa_plfa-part3-Compositional-21300" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21318" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟧</a>
</pre><p><code>ℰ M</code> 和 <code>⟦ M ⟧</code> 指称相等的证明可通过 <code>var-equiv</code>、<code>lam-equiv</code> 和 <code>app-equiv</code> 三个方程以及 <code>ℱ</code> 和 <code>●</code> 的合同性引理直接归纳得出。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰ≃⟦⟧"></a><a id="plfa_plfa-part3-Compositional-21649" href="../Compositional/#plfa_plfa-part3-Compositional-21649" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21654" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21656" class="Symbol">∀</a> <a id="plfa_plfa-part3-Compositional-21658" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21659" href="../Compositional/#plfa_plfa-part3-Compositional-21659" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21660" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21662" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21663" href="../Compositional/#plfa_plfa-part3-Compositional-21663" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21665" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21667" href="../Compositional/#plfa_plfa-part3-Compositional-21659" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-21669" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-21671" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-21672" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21674" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-21676" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21678" href="../Compositional/#plfa_plfa-part3-Compositional-21663" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21680" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-21682" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21684" href="../Compositional/#plfa_plfa-part3-Compositional-21663" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21686" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟧</a>
<a id="plfa_plfa-part3-Compositional-21688" href="../Compositional/#plfa_plfa-part3-Compositional-21649" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21693" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21694" href="../Compositional/#plfa_plfa-part3-Compositional-21694" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21695" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21697" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21698" href="../Untyped/#plfa_plfa-part2-Untyped-5434" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-21700" href="../Compositional/#plfa_plfa-part3-Compositional-21700" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-21701" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21703" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21705" href="../Compositional/#plfa_plfa-part3-Compositional-13231" class="Function">var-equiv</a>
<a id="plfa_plfa-part3-Compositional-21715" href="../Compositional/#plfa_plfa-part3-Compositional-21649" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21720" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21721" href="../Compositional/#plfa_plfa-part3-Compositional-21721" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21722" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21724" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21725" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21727" href="../Compositional/#plfa_plfa-part3-Compositional-21727" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21728" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21730" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-21734" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-21738" href="../Compositional/#plfa_plfa-part3-Compositional-21738" class="Bound">ih</a> <a id="plfa_plfa-part3-Compositional-21741" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21743" href="../Compositional/#plfa_plfa-part3-Compositional-21649" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21748" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21749" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21751" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21753" href="../Compositional/#plfa_plfa-part3-Compositional-21727" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21754" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21756" class="Keyword">in</a>
    <a id="plfa_plfa-part3-Compositional-21763" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21765" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21766" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21768" href="../Compositional/#plfa_plfa-part3-Compositional-21727" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21769" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-21773" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21776" href="../Compositional/#plfa_plfa-part3-Compositional-5294" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-21786" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-21792" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-21794" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21795" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21797" href="../Compositional/#plfa_plfa-part3-Compositional-21727" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21798" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-21802" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21805" href="../Compositional/#plfa_plfa-part3-Compositional-14368" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-21812" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21813" href="../Compositional/#plfa_plfa-part3-Compositional-21649" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21818" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21819" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21821" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21823" href="../Compositional/#plfa_plfa-part3-Compositional-21727" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21824" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-21827" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-21833" href="../Compositional/#plfa_plfa-part3-Compositional-2283" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-21835" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21837" href="../Compositional/#plfa_plfa-part3-Compositional-21727" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21839" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-21843" href="../Denotational/#plfa_plfa-part3-Denotational-23784" class="Function Operator">≃⟨⟩</a>
    <a id="plfa_plfa-part3-Compositional-21851" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21853" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21855" href="../Compositional/#plfa_plfa-part3-Compositional-21727" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21857" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-21861" href="../Denotational/#plfa_plfa-part3-Denotational-23891" class="Function Operator">☐</a>
<a id="plfa_plfa-part3-Compositional-21863" href="../Compositional/#plfa_plfa-part3-Compositional-21649" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21868" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21869" href="../Compositional/#plfa_plfa-part3-Compositional-21869" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21870" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21872" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21873" href="../Compositional/#plfa_plfa-part3-Compositional-21873" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21875" href="../Untyped/#plfa_plfa-part2-Untyped-5546" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21877" href="../Compositional/#plfa_plfa-part3-Compositional-21877" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-21878" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21880" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Compositional-21885" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21887" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21888" href="../Compositional/#plfa_plfa-part3-Compositional-21873" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21890" href="../Untyped/#plfa_plfa-part2-Untyped-5546" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21892" href="../Compositional/#plfa_plfa-part3-Compositional-21877" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-21893" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-21897" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21900" href="../Compositional/#plfa_plfa-part3-Compositional-12552" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-21910" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
   <a id="plfa_plfa-part3-Compositional-21915" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21917" href="../Compositional/#plfa_plfa-part3-Compositional-21873" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21919" href="../Compositional/#plfa_plfa-part3-Compositional-6969" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-21921" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21923" href="../Compositional/#plfa_plfa-part3-Compositional-21877" class="Bound">M</a>
  <a id="plfa_plfa-part3-Compositional-21927" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21930" href="../Compositional/#plfa_plfa-part3-Compositional-15778" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-21937" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21938" href="../Compositional/#plfa_plfa-part3-Compositional-21649" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21943" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21944" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21946" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21948" href="../Compositional/#plfa_plfa-part3-Compositional-21873" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-21949" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-21952" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21953" href="../Compositional/#plfa_plfa-part3-Compositional-21649" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21958" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21959" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21961" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21963" href="../Compositional/#plfa_plfa-part3-Compositional-21877" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-21964" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-21967" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
   <a id="plfa_plfa-part3-Compositional-21972" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21974" href="../Compositional/#plfa_plfa-part3-Compositional-21873" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21976" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21978" href="../Compositional/#plfa_plfa-part3-Compositional-6969" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-21980" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21982" href="../Compositional/#plfa_plfa-part3-Compositional-21877" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21984" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-21988" href="../Denotational/#plfa_plfa-part3-Denotational-23784" class="Function Operator">≃⟨⟩</a>
    <a id="plfa_plfa-part3-Compositional-21996" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21998" href="../Compositional/#plfa_plfa-part3-Compositional-21873" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-22000" href="../Untyped/#plfa_plfa-part2-Untyped-5546" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-22002" href="../Compositional/#plfa_plfa-part3-Compositional-21877" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-22004" href="../Compositional/#plfa_plfa-part3-Compositional-21214" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-22008" href="../Denotational/#plfa_plfa-part3-Denotational-23891" class="Function Operator">☐</a>
</pre><h2 id="unicode">Unicode</h2><p>本章使用了以下 Unicode：</p><pre><code>ℱ  U+2131  SCRIPT CAPITAL F (\McF)
●  U+2131  BLACK CIRCLE (\cib)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Denotational/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Compositional.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Soundness/">下一章</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">编程语言基础：Agda 描述</h2>本章译者：OlingCat<div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>本书按照<a rel="license" href="https://creativecommons.org/licenses/by/4.0/">创作公用 署名 4.0 国际</a>许可协议授权</div></footer></body></html>