<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>编程语言基础：Agda 描述 – Compositional</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">编程语言基础：Agda 描述</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">主页</a> <a class="page-link" href="../Announcements/">公告</a> <a class="page-link" href="../GettingStarted/">使用说明</a> <a class="page-link" href="../Citing/">引用</a> <a class="page-link" href="https://plfa.github.io/">English</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Denotational/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Compositional.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Soundness/">下一章</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Compositional: 指称语义是可组合的</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part3-Compositional-116" class="Keyword">module</a> <a id="plfa_plfa-part3-Compositional-123" href="../Compositional/#" class="Module">plfa.part3.Compositional</a> <a id="plfa_plfa-part3-Compositional-148" class="Keyword">where</a>
</pre><h2 id="简介">简介</h2><p>本章我们会证明指称语义是可组合的，即我们会填补以下等式中省略号的部分。</p><pre><code>ℰ (` x) ≃ ...
ℰ (ƛ M) ≃ ... ℰ M ...
ℰ (M · N) ≃ ... ℰ M ... ℰ N ...</code></pre><p>这些等式蕴含了指称语义也可以定义为一个递归函数。 我们会在本章的结尾给出它的定义，并证明它等价于 ℰ。</p><h2 id="导入">导入</h2><pre class="Agda"><a id="plfa_plfa-part3-Compositional-757" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-762" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-769" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html" class="Module">Data.Product</a> <a id="plfa_plfa-part3-Compositional-782" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-788" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-789" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">_×_</a><a id="plfa_plfa-part3-Compositional-792" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-794" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="plfa_plfa-part3-Compositional-795" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-797" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ-syntax</a><a id="plfa_plfa-part3-Compositional-805" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-807" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1369" class="Function">∃</a><a id="plfa_plfa-part3-Compositional-808" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-810" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1806" class="Function">∃-syntax</a><a id="plfa_plfa-part3-Compositional-818" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-820" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a><a id="plfa_plfa-part3-Compositional-825" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-827" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a><a id="plfa_plfa-part3-Compositional-832" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-836" class="Keyword">renaming</a> <a id="plfa_plfa-part3-Compositional-845" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-846" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part3-Compositional-850" class="Symbol">to</a> <a id="plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part3-Compositional-858" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-860" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-865" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-872" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.html" class="Module">Data.Sum</a> <a id="plfa_plfa-part3-Compositional-881" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-887" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-888" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#734" class="Datatype Operator">_⊎_</a><a id="plfa_plfa-part3-Compositional-891" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-893" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a><a id="plfa_plfa-part3-Compositional-897" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-899" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a><a id="plfa_plfa-part3-Compositional-903" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-905" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-910" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-917" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Unit.html" class="Module">Data.Unit</a> <a id="plfa_plfa-part3-Compositional-927" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-933" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-934" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#158" class="Record">⊤</a><a id="plfa_plfa-part3-Compositional-935" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-937" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a><a id="plfa_plfa-part3-Compositional-939" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-941" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-946" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-953" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
  <a id="plfa_plfa-part3-Compositional-974" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-980" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-981" href="../Untyped/#plfa_plfa-part2-Untyped-3848" class="Datatype">Context</a><a id="plfa_plfa-part3-Compositional-988" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-990" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part3-Compositional-993" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-995" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-996" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-998" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part3-Compositional-1001" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1003" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part3-Compositional-1006" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1008" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part3-Compositional-1010" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1012" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part3-Compositional-1014" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1016" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part3-Compositional-1019" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-1021" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-1026" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-1033" href="../Denotational/#" class="Module">plfa.part3.Denotational</a>
  <a id="plfa_plfa-part3-Compositional-1059" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-1065" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1066" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-1071" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1073" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">_↦_</a><a id="plfa_plfa-part3-Compositional-1076" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1078" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">_`,_</a><a id="plfa_plfa-part3-Compositional-1082" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1084" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">_⊔_</a><a id="plfa_plfa-part3-Compositional-1087" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1089" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-1090" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1092" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">_⊑_</a><a id="plfa_plfa-part3-Compositional-1095" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1097" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">_⊢_↓_</a><a id="plfa_plfa-part3-Compositional-1102" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1113" href="../Denotational/#plfa_plfa-part3-Denotational-5459" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-1118" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1120" href="../Denotational/#plfa_plfa-part3-Denotational-5785" class="InductiveConstructor">⊑-fun</a><a id="plfa_plfa-part3-Compositional-1125" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1127" href="../Denotational/#plfa_plfa-part3-Denotational-5484" class="InductiveConstructor">⊑-conj-L</a><a id="plfa_plfa-part3-Compositional-1135" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1137" href="../Denotational/#plfa_plfa-part3-Denotational-5568" class="InductiveConstructor">⊑-conj-R1</a><a id="plfa_plfa-part3-Compositional-1146" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1148" href="../Denotational/#plfa_plfa-part3-Denotational-5641" class="InductiveConstructor">⊑-conj-R2</a><a id="plfa_plfa-part3-Compositional-1157" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1168" href="../Denotational/#plfa_plfa-part3-Denotational-5888" class="InductiveConstructor">⊑-dist</a><a id="plfa_plfa-part3-Compositional-1174" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1176" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Compositional-1182" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1184" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a><a id="plfa_plfa-part3-Compositional-1191" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1193" href="../Denotational/#plfa_plfa-part3-Denotational-7600" class="Function">⊔↦⊔-dist</a><a id="plfa_plfa-part3-Compositional-1201" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1212" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Compositional-1215" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1217" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a><a id="plfa_plfa-part3-Compositional-1224" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1226" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Compositional-1232" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1234" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Compositional-1241" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1243" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a><a id="plfa_plfa-part3-Compositional-1250" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1252" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a><a id="plfa_plfa-part3-Compositional-1255" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1266" href="../Denotational/#plfa_plfa-part3-Denotational-32854" class="Function">up-env</a><a id="plfa_plfa-part3-Compositional-1272" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1274" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a><a id="plfa_plfa-part3-Compositional-1275" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1277" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">_≃_</a><a id="plfa_plfa-part3-Compositional-1280" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1282" href="../Denotational/#plfa_plfa-part3-Denotational-22793" class="Function">≃-sym</a><a id="plfa_plfa-part3-Compositional-1287" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1289" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a><a id="plfa_plfa-part3-Compositional-1299" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1301" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a><a id="plfa_plfa-part3-Compositional-1304" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-1306" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-1311" href="../Denotational/#plfa_plfa-part3-Denotational-23461" class="Module">plfa.part3.Denotational.≃-Reasoning</a>
</pre><h2 id="λ-抽象的等式">λ-抽象的等式</h2><p>考虑第一个等式</p><pre><code>ℰ (ƛ M) ≃ ... ℰ M ...</code></pre><p>我们需要定义一个函数，它将 <code>Denotation (Γ , ★)</code> 映射到 <code>Denotation Γ</code>， 我们将此函数命名为 <code>ℱ</code>。在应用到 λ-项时，它能够模拟语义中非递归的部分。 具体来说，我们需要考虑规则 <code>↦-intro</code>、<code>⊥-intro</code> 和 <code>⊔-intro</code>，因此 <code>ℱ</code> 有三个参数：子项 <code>M</code> 的指称 <code>D</code>、环境 <code>γ</code>，以及值 <code>v</code>。如果我们通过对值 <code>v</code> 进行递归来定义 <code>ℱ</code>，那么它正好匹配 <code>↦-intro</code>、<code>⊥-intro</code> 和 <code>⊔-intro</code> 这三条规则。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱ"></a><a id="plfa_plfa-part3-Compositional-2282" href="../Compositional/#plfa_plfa-part3-Compositional-2282" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2284" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-2286" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-2288" href="../Compositional/#plfa_plfa-part3-Compositional-2288" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-2289" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-2291" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2293" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-2304" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2305" href="../Compositional/#plfa_plfa-part3-Compositional-2288" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-2307" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-2309" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-2310" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2312" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2314" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-2325" href="../Compositional/#plfa_plfa-part3-Compositional-2288" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-2327" href="../Compositional/#plfa_plfa-part3-Compositional-2282" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2329" href="../Compositional/#plfa_plfa-part3-Compositional-2329" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2331" href="../Compositional/#plfa_plfa-part3-Compositional-2331" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2333" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2334" href="../Compositional/#plfa_plfa-part3-Compositional-2334" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-2336" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-2338" href="../Compositional/#plfa_plfa-part3-Compositional-2338" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-2339" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2341" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2343" href="../Compositional/#plfa_plfa-part3-Compositional-2329" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2345" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2346" href="../Compositional/#plfa_plfa-part3-Compositional-2331" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2348" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-2351" href="../Compositional/#plfa_plfa-part3-Compositional-2334" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-2352" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2354" href="../Compositional/#plfa_plfa-part3-Compositional-2338" class="Bound">w</a>
<a id="plfa_plfa-part3-Compositional-2356" href="../Compositional/#plfa_plfa-part3-Compositional-2282" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2358" href="../Compositional/#plfa_plfa-part3-Compositional-2358" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2360" href="../Compositional/#plfa_plfa-part3-Compositional-2360" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2362" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Compositional-2364" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2366" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#158" class="Record">⊤</a>
<a id="plfa_plfa-part3-Compositional-2368" href="../Compositional/#plfa_plfa-part3-Compositional-2282" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2370" href="../Compositional/#plfa_plfa-part3-Compositional-2370" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2372" href="../Compositional/#plfa_plfa-part3-Compositional-2372" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2374" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2375" href="../Compositional/#plfa_plfa-part3-Compositional-2375" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-2377" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-2379" href="../Compositional/#plfa_plfa-part3-Compositional-2379" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-2380" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2382" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2384" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2385" href="../Compositional/#plfa_plfa-part3-Compositional-2282" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2387" href="../Compositional/#plfa_plfa-part3-Compositional-2370" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2389" href="../Compositional/#plfa_plfa-part3-Compositional-2372" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2391" href="../Compositional/#plfa_plfa-part3-Compositional-2375" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-2392" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2394" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Compositional-2396" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2397" href="../Compositional/#plfa_plfa-part3-Compositional-2282" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2399" href="../Compositional/#plfa_plfa-part3-Compositional-2370" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-2401" href="../Compositional/#plfa_plfa-part3-Compositional-2372" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2403" href="../Compositional/#plfa_plfa-part3-Compositional-2379" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-2404" class="Symbol">)</a>
</pre><p>如果你仔细观察，就会发现 <code>ℱ</code> 函数看起来像函数式程序员熟悉的 <code>curry</code> 化操作：它将一个以长度为 <code>n + 1</code> 的元组（即环境 <code>Γ , ★</code>）作为参数的函数， 转化为一个以长度为 <code>n</code> 的元组作为参数，并返回一个单参函数的函数。</p><p>我们希望通过 <code>ℱ</code> 函数证明</p><pre><code>ℰ (ƛ N) ≃ ℱ (ℰ N)</code></pre><p>当从一个更大的值 <code>v</code> 映射到一个更小的值 <code>u</code> 时，函数 <code>ℱ</code> 会保持成立。 它的证明就是在 <code>⊑-fun</code> 规则的情况中使用 <code>up-env</code> 引理，对 <code>u ⊑ v</code> 推导过程的直接归纳。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-sub-ℱ"></a><a id="plfa_plfa-part3-Compositional-3272" href="../Compositional/#plfa_plfa-part3-Compositional-3272" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3278" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3280" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-3282" href="../Compositional/#plfa_plfa-part3-Compositional-3282" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3283" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3285" href="../Compositional/#plfa_plfa-part3-Compositional-3285" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3287" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3289" href="../Compositional/#plfa_plfa-part3-Compositional-3282" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-3291" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3293" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-3295" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3297" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-3298" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3300" href="../Compositional/#plfa_plfa-part3-Compositional-3300" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3302" href="../Compositional/#plfa_plfa-part3-Compositional-3302" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-3304" href="../Compositional/#plfa_plfa-part3-Compositional-3304" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-3305" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-3309" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3311" href="../Compositional/#plfa_plfa-part3-Compositional-2282" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-3313" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3314" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-3316" href="../Compositional/#plfa_plfa-part3-Compositional-3285" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-3317" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3319" href="../Compositional/#plfa_plfa-part3-Compositional-3300" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3321" href="../Compositional/#plfa_plfa-part3-Compositional-3302" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-3325" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3327" href="../Compositional/#plfa_plfa-part3-Compositional-3304" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-3329" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-3331" href="../Compositional/#plfa_plfa-part3-Compositional-3302" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-3337" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-3352" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3354" href="../Compositional/#plfa_plfa-part3-Compositional-2282" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-3356" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3357" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-3359" href="../Compositional/#plfa_plfa-part3-Compositional-3285" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-3360" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3362" href="../Compositional/#plfa_plfa-part3-Compositional-3300" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3364" href="../Compositional/#plfa_plfa-part3-Compositional-3304" class="Bound">u</a>
<a id="plfa_plfa-part3-Compositional-3366" href="../Compositional/#plfa_plfa-part3-Compositional-3272" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3372" href="../Compositional/#plfa_plfa-part3-Compositional-3372" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3374" href="../Denotational/#plfa_plfa-part3-Denotational-5459" class="InductiveConstructor">⊑-bot</a> <a id="plfa_plfa-part3-Compositional-3380" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3382" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a>
<a id="plfa_plfa-part3-Compositional-3385" href="../Compositional/#plfa_plfa-part3-Compositional-3272" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3391" href="../Compositional/#plfa_plfa-part3-Compositional-3391" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3393" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3394" href="../Denotational/#plfa_plfa-part3-Denotational-5785" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-3400" href="../Compositional/#plfa_plfa-part3-Compositional-3400" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-3403" href="../Compositional/#plfa_plfa-part3-Compositional-3403" class="Bound">lt′</a><a id="plfa_plfa-part3-Compositional-3406" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3408" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3410" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-3414" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3415" href="../Denotational/#plfa_plfa-part3-Denotational-32854" class="Function">up-env</a> <a id="plfa_plfa-part3-Compositional-3422" href="../Compositional/#plfa_plfa-part3-Compositional-3391" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3424" href="../Compositional/#plfa_plfa-part3-Compositional-3400" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3426" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3428" href="../Compositional/#plfa_plfa-part3-Compositional-3403" class="Bound">lt′</a>
<a id="plfa_plfa-part3-Compositional-3432" href="../Compositional/#plfa_plfa-part3-Compositional-3272" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3438" href="../Compositional/#plfa_plfa-part3-Compositional-3438" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3440" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3441" href="../Denotational/#plfa_plfa-part3-Denotational-5484" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-3450" href="../Compositional/#plfa_plfa-part3-Compositional-3450" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-3453" href="../Compositional/#plfa_plfa-part3-Compositional-3453" class="Bound">lt₁</a><a id="plfa_plfa-part3-Compositional-3456" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3458" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3460" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-3462" href="../Compositional/#plfa_plfa-part3-Compositional-3272" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3468" href="../Compositional/#plfa_plfa-part3-Compositional-3438" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3470" href="../Compositional/#plfa_plfa-part3-Compositional-3450" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-3473" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3475" href="../Compositional/#plfa_plfa-part3-Compositional-3272" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3481" href="../Compositional/#plfa_plfa-part3-Compositional-3438" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3483" href="../Compositional/#plfa_plfa-part3-Compositional-3453" class="Bound">lt₁</a> <a id="plfa_plfa-part3-Compositional-3487" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-3489" href="../Compositional/#plfa_plfa-part3-Compositional-3272" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3495" href="../Compositional/#plfa_plfa-part3-Compositional-3495" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3497" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3498" href="../Denotational/#plfa_plfa-part3-Denotational-5568" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Compositional-3508" href="../Compositional/#plfa_plfa-part3-Compositional-3508" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3510" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3512" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3514" href="../Compositional/#plfa_plfa-part3-Compositional-3272" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3520" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3521" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-3527" href="../Compositional/#plfa_plfa-part3-Compositional-3495" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-3528" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3530" href="../Compositional/#plfa_plfa-part3-Compositional-3508" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-3533" href="../Compositional/#plfa_plfa-part3-Compositional-3272" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3539" href="../Compositional/#plfa_plfa-part3-Compositional-3539" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3541" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3542" href="../Denotational/#plfa_plfa-part3-Denotational-5641" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Compositional-3552" href="../Compositional/#plfa_plfa-part3-Compositional-3552" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3554" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3556" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3558" href="../Compositional/#plfa_plfa-part3-Compositional-3272" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3564" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3565" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="plfa_plfa-part3-Compositional-3571" href="../Compositional/#plfa_plfa-part3-Compositional-3539" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-3572" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3574" href="../Compositional/#plfa_plfa-part3-Compositional-3552" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-3577" href="../Compositional/#plfa_plfa-part3-Compositional-3272" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3583" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-3584" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-3586" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3588" href="../Compositional/#plfa_plfa-part3-Compositional-3588" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3591" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3593" href="../Compositional/#plfa_plfa-part3-Compositional-3593" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-3596" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-3598" href="../Compositional/#plfa_plfa-part3-Compositional-3588" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3601" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3603" href="../Compositional/#plfa_plfa-part3-Compositional-3603" class="Bound">v₃</a><a id="plfa_plfa-part3-Compositional-3605" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-3607" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-3608" href="../Compositional/#plfa_plfa-part3-Compositional-3588" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3611" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3613" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3614" href="../Compositional/#plfa_plfa-part3-Compositional-3593" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-3617" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-3619" href="../Compositional/#plfa_plfa-part3-Compositional-3603" class="Bound">v₃</a><a id="plfa_plfa-part3-Compositional-3621" class="Symbol">)}</a> <a id="plfa_plfa-part3-Compositional-3624" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-3626" href="../Compositional/#plfa_plfa-part3-Compositional-3626" class="Bound">N2</a> <a id="plfa_plfa-part3-Compositional-3629" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3631" href="../Compositional/#plfa_plfa-part3-Compositional-3631" class="Bound">N3</a> <a id="plfa_plfa-part3-Compositional-3634" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-3636" href="../Denotational/#plfa_plfa-part3-Denotational-5888" class="InductiveConstructor">⊑-dist</a> <a id="plfa_plfa-part3-Compositional-3643" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Compositional-3648" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-3656" href="../Compositional/#plfa_plfa-part3-Compositional-3626" class="Bound">N2</a> <a id="plfa_plfa-part3-Compositional-3659" href="../Compositional/#plfa_plfa-part3-Compositional-3631" class="Bound">N3</a>
<a id="plfa_plfa-part3-Compositional-3662" href="../Compositional/#plfa_plfa-part3-Compositional-3272" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3668" href="../Compositional/#plfa_plfa-part3-Compositional-3668" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3670" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3671" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-3679" href="../Compositional/#plfa_plfa-part3-Compositional-3679" class="Bound">x₁</a> <a id="plfa_plfa-part3-Compositional-3682" href="../Compositional/#plfa_plfa-part3-Compositional-3682" class="Bound">x₂</a><a id="plfa_plfa-part3-Compositional-3684" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3686" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3688" href="../Compositional/#plfa_plfa-part3-Compositional-3272" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3694" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3695" href="../Compositional/#plfa_plfa-part3-Compositional-3272" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3701" href="../Compositional/#plfa_plfa-part3-Compositional-3668" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3703" href="../Compositional/#plfa_plfa-part3-Compositional-3682" class="Bound">x₂</a><a id="plfa_plfa-part3-Compositional-3705" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3707" href="../Compositional/#plfa_plfa-part3-Compositional-3679" class="Bound">x₁</a>
</pre><p>有了这个小前提的性质，我们就可以证明 λ-等式语义前进的方向。 证明是通过在 <code>sub</code> 规则的情况下使用 <code>sub-ℱ</code>，对语义进行归纳得出的。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰƛ→ℱℰ"></a><a id="plfa_plfa-part3-Compositional-4011" href="../Compositional/#plfa_plfa-part3-Compositional-4011" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4017" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4019" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4021" href="../Compositional/#plfa_plfa-part3-Compositional-4021" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4022" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4024" href="../Compositional/#plfa_plfa-part3-Compositional-4024" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4026" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4028" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-4032" href="../Compositional/#plfa_plfa-part3-Compositional-4021" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4033" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4035" href="../Compositional/#plfa_plfa-part3-Compositional-4035" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4037" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4039" href="../Compositional/#plfa_plfa-part3-Compositional-4021" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4041" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4043" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4045" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4047" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4048" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4050" href="../Compositional/#plfa_plfa-part3-Compositional-4050" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-4052" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4054" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4059" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4063" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4065" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4067" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4068" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4070" href="../Compositional/#plfa_plfa-part3-Compositional-4035" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4071" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4073" href="../Compositional/#plfa_plfa-part3-Compositional-4024" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4075" href="../Compositional/#plfa_plfa-part3-Compositional-4050" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-4081" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-4096" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4098" href="../Compositional/#plfa_plfa-part3-Compositional-2282" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-4100" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4101" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4103" href="../Compositional/#plfa_plfa-part3-Compositional-4035" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4104" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4106" href="../Compositional/#plfa_plfa-part3-Compositional-4024" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4108" href="../Compositional/#plfa_plfa-part3-Compositional-4050" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-4110" href="../Compositional/#plfa_plfa-part3-Compositional-4011" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4116" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4117" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Compositional-4125" href="../Compositional/#plfa_plfa-part3-Compositional-4125" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-4126" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4128" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4130" href="../Compositional/#plfa_plfa-part3-Compositional-4125" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-4132" href="../Compositional/#plfa_plfa-part3-Compositional-4011" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4138" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-4146" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4148" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a>
<a id="plfa_plfa-part3-Compositional-4151" href="../Compositional/#plfa_plfa-part3-Compositional-4011" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4157" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4158" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-4166" href="../Compositional/#plfa_plfa-part3-Compositional-4166" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-4169" href="../Compositional/#plfa_plfa-part3-Compositional-4169" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-4171" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4173" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4175" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-4177" href="../Compositional/#plfa_plfa-part3-Compositional-4011" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4183" href="../Compositional/#plfa_plfa-part3-Compositional-4166" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-4186" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4188" href="../Compositional/#plfa_plfa-part3-Compositional-4011" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4194" href="../Compositional/#plfa_plfa-part3-Compositional-4169" class="Bound">d₂</a> <a id="plfa_plfa-part3-Compositional-4197" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-4199" href="../Compositional/#plfa_plfa-part3-Compositional-4011" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4205" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4206" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-4210" href="../Compositional/#plfa_plfa-part3-Compositional-4210" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4212" href="../Compositional/#plfa_plfa-part3-Compositional-4212" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-4214" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4216" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4218" href="../Compositional/#plfa_plfa-part3-Compositional-3272" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-4224" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4225" href="../Compositional/#plfa_plfa-part3-Compositional-4011" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4231" href="../Compositional/#plfa_plfa-part3-Compositional-4210" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-4232" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4234" href="../Compositional/#plfa_plfa-part3-Compositional-4212" class="Bound">lt</a>
</pre><p>λ-抽象的「反演引理」是上面定理的一种特例。反演引理在证明「归约会保持指称不变」时会很有用。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lambda-inversion"></a><a id="plfa_plfa-part3-Compositional-4471" href="../Compositional/#plfa_plfa-part3-Compositional-4471" class="Function">lambda-inversion</a> <a id="plfa_plfa-part3-Compositional-4488" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4490" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4492" href="../Compositional/#plfa_plfa-part3-Compositional-4492" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4493" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4495" href="../Compositional/#plfa_plfa-part3-Compositional-4495" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4497" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4499" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-4503" href="../Compositional/#plfa_plfa-part3-Compositional-4492" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4504" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4506" href="../Compositional/#plfa_plfa-part3-Compositional-4506" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4508" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4510" href="../Compositional/#plfa_plfa-part3-Compositional-4492" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4512" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4514" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4516" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4518" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4519" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4521" href="../Compositional/#plfa_plfa-part3-Compositional-4521" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4524" href="../Compositional/#plfa_plfa-part3-Compositional-4524" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-4527" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4529" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4534" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4538" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4540" href="../Compositional/#plfa_plfa-part3-Compositional-4495" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4542" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4544" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4546" href="../Compositional/#plfa_plfa-part3-Compositional-4506" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4548" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Compositional-4550" href="../Compositional/#plfa_plfa-part3-Compositional-4521" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4553" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-4555" href="../Compositional/#plfa_plfa-part3-Compositional-4524" class="Bound">v₂</a>
    <a id="plfa_plfa-part3-Compositional-4562" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Compositional-4582" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4584" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4585" href="../Compositional/#plfa_plfa-part3-Compositional-4495" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4587" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-4590" href="../Compositional/#plfa_plfa-part3-Compositional-4521" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-4592" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4594" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4596" href="../Compositional/#plfa_plfa-part3-Compositional-4506" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4598" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Compositional-4600" href="../Compositional/#plfa_plfa-part3-Compositional-4524" class="Bound">v₂</a>
<a id="plfa_plfa-part3-Compositional-4603" href="../Compositional/#plfa_plfa-part3-Compositional-4471" class="Function">lambda-inversion</a><a id="plfa_plfa-part3-Compositional-4619" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4620" class="Argument">v₁</a> <a id="plfa_plfa-part3-Compositional-4623" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4625" href="../Compositional/#plfa_plfa-part3-Compositional-4625" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-4627" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4629" class="Argument">v₂</a> <a id="plfa_plfa-part3-Compositional-4632" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4634" href="../Compositional/#plfa_plfa-part3-Compositional-4634" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4636" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4638" href="../Compositional/#plfa_plfa-part3-Compositional-4638" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4640" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4642" href="../Compositional/#plfa_plfa-part3-Compositional-4011" class="Function">ℰƛ→ℱℰ</a><a id="plfa_plfa-part3-Compositional-4647" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4648" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4650" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4652" href="../Compositional/#plfa_plfa-part3-Compositional-4625" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4655" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-4657" href="../Compositional/#plfa_plfa-part3-Compositional-4634" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4659" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4661" href="../Compositional/#plfa_plfa-part3-Compositional-4638" class="Bound">d</a>
</pre><p>λ-等式的语义后退的方向甚至比前进的方向更容易证明，我们只需对值 <code>v</code> 进行归纳：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱℰ→ℰƛ"></a><a id="plfa_plfa-part3-Compositional-4881" href="../Compositional/#plfa_plfa-part3-Compositional-4881" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4887" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4889" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4891" href="../Compositional/#plfa_plfa-part3-Compositional-4891" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4892" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4894" href="../Compositional/#plfa_plfa-part3-Compositional-4894" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4896" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4898" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-4902" href="../Compositional/#plfa_plfa-part3-Compositional-4891" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4903" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4905" href="../Compositional/#plfa_plfa-part3-Compositional-4905" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4907" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4909" href="../Compositional/#plfa_plfa-part3-Compositional-4891" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4911" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4913" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4915" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4917" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4918" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4920" href="../Compositional/#plfa_plfa-part3-Compositional-4920" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-4922" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4924" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4929" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4933" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4935" href="../Compositional/#plfa_plfa-part3-Compositional-2282" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-4937" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4938" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4940" href="../Compositional/#plfa_plfa-part3-Compositional-4905" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4941" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4943" href="../Compositional/#plfa_plfa-part3-Compositional-4894" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4945" href="../Compositional/#plfa_plfa-part3-Compositional-4920" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-4951" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-4966" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4968" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4970" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4971" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4973" href="../Compositional/#plfa_plfa-part3-Compositional-4905" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4974" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4976" href="../Compositional/#plfa_plfa-part3-Compositional-4894" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4978" href="../Compositional/#plfa_plfa-part3-Compositional-4920" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-4980" href="../Compositional/#plfa_plfa-part3-Compositional-4881" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4986" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4987" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4989" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4991" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-4992" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4994" href="../Compositional/#plfa_plfa-part3-Compositional-4994" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4996" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4998" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Compositional-5006" href="../Compositional/#plfa_plfa-part3-Compositional-4881" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5012" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-5013" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-5015" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5017" href="../Compositional/#plfa_plfa-part3-Compositional-5017" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-5020" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-5022" href="../Compositional/#plfa_plfa-part3-Compositional-5022" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-5024" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-5026" href="../Compositional/#plfa_plfa-part3-Compositional-5026" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-5028" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5030" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Compositional-5038" href="../Compositional/#plfa_plfa-part3-Compositional-5026" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-5040" href="../Compositional/#plfa_plfa-part3-Compositional-4881" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5046" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-5047" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-5049" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5051" href="../Compositional/#plfa_plfa-part3-Compositional-5051" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-5054" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-5056" href="../Compositional/#plfa_plfa-part3-Compositional-5056" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-5058" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-5060" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-5062" href="../Compositional/#plfa_plfa-part3-Compositional-5062" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-5065" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-5067" href="../Compositional/#plfa_plfa-part3-Compositional-5067" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-5070" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-5072" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5074" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-5082" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5083" href="../Compositional/#plfa_plfa-part3-Compositional-4881" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5089" href="../Compositional/#plfa_plfa-part3-Compositional-5062" class="Bound">d1</a><a id="plfa_plfa-part3-Compositional-5091" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-5093" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5094" href="../Compositional/#plfa_plfa-part3-Compositional-4881" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5100" href="../Compositional/#plfa_plfa-part3-Compositional-5067" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-5102" class="Symbol">)</a>
</pre><p>因此，指称语义对 λ-抽象来说是可组合的，正如函数 <code>ℱ</code> 所证明的那样：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lam-equiv"></a><a id="plfa_plfa-part3-Compositional-5291" href="../Compositional/#plfa_plfa-part3-Compositional-5291" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-5301" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-5303" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-5305" href="../Compositional/#plfa_plfa-part3-Compositional-5305" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-5306" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-5308" href="../Compositional/#plfa_plfa-part3-Compositional-5308" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-5310" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-5312" href="../Compositional/#plfa_plfa-part3-Compositional-5305" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-5314" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-5316" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-5318" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-5320" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-5321" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-5325" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-5327" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-5329" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5330" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-5332" href="../Compositional/#plfa_plfa-part3-Compositional-5308" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-5333" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-5335" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-5337" href="../Compositional/#plfa_plfa-part3-Compositional-2282" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-5339" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5340" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-5342" href="../Compositional/#plfa_plfa-part3-Compositional-5308" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-5343" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-5345" href="../Compositional/#plfa_plfa-part3-Compositional-5291" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-5355" href="../Compositional/#plfa_plfa-part3-Compositional-5355" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-5357" href="../Compositional/#plfa_plfa-part3-Compositional-5357" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-5359" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5361" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-5363" href="../Compositional/#plfa_plfa-part3-Compositional-4011" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-5369" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-5371" href="../Compositional/#plfa_plfa-part3-Compositional-4881" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-5377" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="函数应用的等式">函数应用的等式</h2><p>接下来我们填补关于函数应用的等式中的省略号。</p><pre><code>ℰ (M · N) ≃ ... ℰ M ... ℰ N ...</code></pre><p>为此我们需要定义一个函数，它接受语境 <code>Γ</code> 中的两个指称，并产生语境 <code>Γ</code> 中的另一个指称。我们将此函数命名为 <code>●</code>，以模拟应用语义 <code>L · M</code> 中非递归的部分。我们无法像处理 <code>ℱ</code> 那样简单地对值 <code>v</code> 进行递归来定义函数， 因为 <code>↦-elim</code> 这类的规则可应用于任何值。相反，我们将通过直接处理 <code>↦-elim</code> 和 <code>⊥-intro</code> 规则而忽略 <code>⊔-intro</code> 的方式来定义 <code>●</code>。这使得证明的前进方向变得更加困难， 而 <code>⊔-intro</code> 的情况说明了为什么 <code>⊑-dist</code> 规则很重要。</p><p>这样我们就定义了 <code>D₁</code> 应用于 <code>D₂</code>，记作 <code>D₁ ● D₂</code>，来包含 <code>⊥-intro</code> 规则中所有等价于 <code>⊥</code> 的值 <code>w</code>，以及对于 <code>↦-elim</code> 规则，在 <code>D₁</code> 中的条目 <code>v ↦ w</code> 的所有输出值 <code>w</code>，前提是它的输入值 <code>v</code> 在 <code>D₂</code> 中。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-6952" class="Keyword">infixl</a> <a id="plfa_plfa-part3-Compositional-6959" class="Number">7</a> <a id="plfa_plfa-part3-Compositional-6961" href="../Compositional/#plfa_plfa-part3-Compositional-6966" class="Function Operator">_●_</a>

<a id="plfa_plfa-part3-Compositional-_●_"></a><a id="plfa_plfa-part3-Compositional-6966" href="../Compositional/#plfa_plfa-part3-Compositional-6966" class="Function Operator">_●_</a> <a id="plfa_plfa-part3-Compositional-6970" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6972" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-6974" href="../Compositional/#plfa_plfa-part3-Compositional-6974" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-6975" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6977" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-6979" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-6990" href="../Compositional/#plfa_plfa-part3-Compositional-6974" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-6992" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-6994" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-7005" href="../Compositional/#plfa_plfa-part3-Compositional-6974" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-7007" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-7009" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-7020" href="../Compositional/#plfa_plfa-part3-Compositional-6974" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-7022" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7023" href="../Compositional/#plfa_plfa-part3-Compositional-7023" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-7026" href="../Compositional/#plfa_plfa-part3-Compositional-6966" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-7028" href="../Compositional/#plfa_plfa-part3-Compositional-7028" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-7030" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7032" href="../Compositional/#plfa_plfa-part3-Compositional-7032" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7034" href="../Compositional/#plfa_plfa-part3-Compositional-7034" class="Bound">w</a> <a id="plfa_plfa-part3-Compositional-7036" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7038" href="../Compositional/#plfa_plfa-part3-Compositional-7034" class="Bound">w</a> <a id="plfa_plfa-part3-Compositional-7040" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-7042" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Compositional-7044" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="plfa_plfa-part3-Compositional-7046" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Compositional-7049" href="../Compositional/#plfa_plfa-part3-Compositional-7049" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7051" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Compositional-7053" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a> <a id="plfa_plfa-part3-Compositional-7059" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a><a id="plfa_plfa-part3-Compositional-7060" class="Symbol">(</a> <a id="plfa_plfa-part3-Compositional-7062" href="../Compositional/#plfa_plfa-part3-Compositional-7023" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-7065" href="../Compositional/#plfa_plfa-part3-Compositional-7032" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7067" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7068" href="../Compositional/#plfa_plfa-part3-Compositional-7049" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7070" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-7072" href="../Compositional/#plfa_plfa-part3-Compositional-7034" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-7073" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7075" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Compositional-7077" href="../Compositional/#plfa_plfa-part3-Compositional-7028" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-7080" href="../Compositional/#plfa_plfa-part3-Compositional-7032" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7082" href="../Compositional/#plfa_plfa-part3-Compositional-7049" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7084" class="Symbol">)</a>
</pre><p>如果你仔细观察一下，就会发现 <code>_●_</code> 运算符看起来像函数式程序员熟悉的 <code>apply</code> 操作：它接受两个参数，并将第一个参数应用于第二个参数。</p><p>接下来我们考虑应用的反演引理，它同样是应用的语义等式的前进方向。 下面是它的证明：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰ·→●ℰ"></a><a id="plfa_plfa-part3-Compositional-7781" href="../Compositional/#plfa_plfa-part3-Compositional-7781" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7787" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7789" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-7791" href="../Compositional/#plfa_plfa-part3-Compositional-7791" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-7792" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7794" href="../Compositional/#plfa_plfa-part3-Compositional-7794" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7796" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7798" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-7802" href="../Compositional/#plfa_plfa-part3-Compositional-7791" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-7803" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7805" href="../Compositional/#plfa_plfa-part3-Compositional-7805" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-7807" href="../Compositional/#plfa_plfa-part3-Compositional-7807" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-7809" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7811" href="../Compositional/#plfa_plfa-part3-Compositional-7791" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-7813" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-7815" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-7816" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7818" href="../Compositional/#plfa_plfa-part3-Compositional-7818" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-7820" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-7822" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-7827" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-7831" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-7833" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-7835" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7836" href="../Compositional/#plfa_plfa-part3-Compositional-7805" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-7838" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-7840" href="../Compositional/#plfa_plfa-part3-Compositional-7807" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-7841" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7843" href="../Compositional/#plfa_plfa-part3-Compositional-7794" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7845" href="../Compositional/#plfa_plfa-part3-Compositional-7818" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-7851" class="Comment">----------------</a>
  <a id="plfa_plfa-part3-Compositional-7870" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-7872" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7873" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-7875" href="../Compositional/#plfa_plfa-part3-Compositional-7805" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-7877" href="../Compositional/#plfa_plfa-part3-Compositional-6966" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-7879" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-7881" href="../Compositional/#plfa_plfa-part3-Compositional-7807" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-7882" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7884" href="../Compositional/#plfa_plfa-part3-Compositional-7794" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-7886" href="../Compositional/#plfa_plfa-part3-Compositional-7818" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-7888" href="../Compositional/#plfa_plfa-part3-Compositional-7781" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7894" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7895" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Compositional-7901" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-7902" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-7904" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7906" href="../Compositional/#plfa_plfa-part3-Compositional-7906" class="Bound">v′</a><a id="plfa_plfa-part3-Compositional-7908" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-7910" href="../Compositional/#plfa_plfa-part3-Compositional-7910" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-7913" href="../Compositional/#plfa_plfa-part3-Compositional-7913" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-7915" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7917" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7919" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-7924" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7926" href="../Compositional/#plfa_plfa-part3-Compositional-7906" class="Bound">v′</a> <a id="plfa_plfa-part3-Compositional-7929" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7931" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7933" href="../Compositional/#plfa_plfa-part3-Compositional-7910" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-7936" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7938" href="../Compositional/#plfa_plfa-part3-Compositional-7913" class="Bound">d₂</a> <a id="plfa_plfa-part3-Compositional-7941" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-7943" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-7945" href="../Compositional/#plfa_plfa-part3-Compositional-7781" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7951" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-7952" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-7954" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7956" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-7957" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-7959" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-7967" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7969" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-7974" href="../Denotational/#plfa_plfa-part3-Denotational-5459" class="InductiveConstructor">⊑-bot</a>
<a id="plfa_plfa-part3-Compositional-7980" href="../Compositional/#plfa_plfa-part3-Compositional-7781" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7986" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-7987" href="../Compositional/#plfa_plfa-part3-Compositional-7987" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-7988" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7990" href="../Compositional/#plfa_plfa-part3-Compositional-7990" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-7991" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7993" href="../Compositional/#plfa_plfa-part3-Compositional-7993" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-7994" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7996" href="../Compositional/#plfa_plfa-part3-Compositional-7996" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-7997" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7999" href="../Compositional/#plfa_plfa-part3-Compositional-7999" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-8000" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-8002" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8003" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Compositional-8010" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-8011" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-8013" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8015" href="../Compositional/#plfa_plfa-part3-Compositional-8015" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-8017" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8019" class="Argument">w</a> <a id="plfa_plfa-part3-Compositional-8021" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8023" href="../Compositional/#plfa_plfa-part3-Compositional-8023" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-8025" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-8027" href="../Compositional/#plfa_plfa-part3-Compositional-8027" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-8030" href="../Compositional/#plfa_plfa-part3-Compositional-8030" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-8032" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Compositional-8038" class="Keyword">with</a> <a id="plfa_plfa-part3-Compositional-8043" href="../Compositional/#plfa_plfa-part3-Compositional-7781" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8049" href="../Compositional/#plfa_plfa-part3-Compositional-8027" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-8052" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8054" href="../Compositional/#plfa_plfa-part3-Compositional-7781" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8060" href="../Compositional/#plfa_plfa-part3-Compositional-8030" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Compositional-8063" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8067" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8069" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8074" href="../Compositional/#plfa_plfa-part3-Compositional-8074" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8078" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8080" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8085" href="../Compositional/#plfa_plfa-part3-Compositional-8085" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8089" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8091" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8096" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8097" href="../Denotational/#plfa_plfa-part3-Denotational-5484" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-8106" href="../Compositional/#plfa_plfa-part3-Compositional-8074" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8110" href="../Compositional/#plfa_plfa-part3-Compositional-8085" class="Bound">lt2</a><a id="plfa_plfa-part3-Compositional-8113" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-8115" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8119" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8121" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8126" href="../Compositional/#plfa_plfa-part3-Compositional-8126" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8130" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8132" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8137" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8139" href="../Compositional/#plfa_plfa-part3-Compositional-8139" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8143" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8145" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8147" href="../Compositional/#plfa_plfa-part3-Compositional-8147" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8153" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8155" href="../Compositional/#plfa_plfa-part3-Compositional-8155" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8160" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8162" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8164" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8172" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8177" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8179" href="../Compositional/#plfa_plfa-part3-Compositional-8139" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8183" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8185" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8187" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8191" href="../Compositional/#plfa_plfa-part3-Compositional-8147" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8197" href="../Compositional/#plfa_plfa-part3-Compositional-8223" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8200" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8202" href="../Compositional/#plfa_plfa-part3-Compositional-8155" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8207" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8209" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part3-Compositional-8217" class="Keyword">where</a> <a id="plfa_plfa-part3-Compositional-8223" href="../Compositional/#plfa_plfa-part3-Compositional-8223" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8226" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-8228" href="../Compositional/#plfa_plfa-part3-Compositional-8139" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8232" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8234" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8235" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8238" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-8240" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-8242" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8244" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-8246" href="../Compositional/#plfa_plfa-part3-Compositional-8139" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8250" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8252" class="Bound">v₂</a>
            <a id="plfa_plfa-part3-Compositional-8267" href="../Compositional/#plfa_plfa-part3-Compositional-8223" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8270" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8272" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8273" href="../Denotational/#plfa_plfa-part3-Denotational-5785" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-8279" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8286" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8287" href="../Denotational/#plfa_plfa-part3-Denotational-5484" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-8296" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8297" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-8305" href="../Compositional/#plfa_plfa-part3-Compositional-8126" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-8309" href="../Denotational/#plfa_plfa-part3-Denotational-5459" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-8314" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8316" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Compositional-8322" class="Symbol">))</a>
<a id="plfa_plfa-part3-Compositional-8325" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8329" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8331" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8336" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8338" href="../Compositional/#plfa_plfa-part3-Compositional-8338" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8342" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8344" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8346" href="../Compositional/#plfa_plfa-part3-Compositional-8346" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8352" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8354" href="../Compositional/#plfa_plfa-part3-Compositional-8354" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8359" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8361" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8363" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8365" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8370" href="../Compositional/#plfa_plfa-part3-Compositional-8370" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8374" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8382" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8387" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8389" href="../Compositional/#plfa_plfa-part3-Compositional-8338" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8393" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8395" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8397" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8401" href="../Compositional/#plfa_plfa-part3-Compositional-8346" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8407" href="../Compositional/#plfa_plfa-part3-Compositional-8433" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8410" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8412" href="../Compositional/#plfa_plfa-part3-Compositional-8354" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8417" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8419" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part3-Compositional-8427" class="Keyword">where</a> <a id="plfa_plfa-part3-Compositional-8433" href="../Compositional/#plfa_plfa-part3-Compositional-8433" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8436" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-8438" href="../Compositional/#plfa_plfa-part3-Compositional-8338" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8442" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8444" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8445" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8448" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-8450" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-8452" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8454" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-8456" href="../Compositional/#plfa_plfa-part3-Compositional-8338" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8460" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-8462" class="Bound">v₁</a>
            <a id="plfa_plfa-part3-Compositional-8477" href="../Compositional/#plfa_plfa-part3-Compositional-8433" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-8480" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8482" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8483" href="../Denotational/#plfa_plfa-part3-Denotational-5785" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-8489" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8496" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8497" href="../Denotational/#plfa_plfa-part3-Denotational-5484" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-8506" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8513" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8514" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-8522" href="../Compositional/#plfa_plfa-part3-Compositional-8370" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8526" href="../Denotational/#plfa_plfa-part3-Denotational-5459" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-8531" class="Symbol">)))</a>
<a id="plfa_plfa-part3-Compositional-8535" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8539" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8541" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8546" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8548" href="../Compositional/#plfa_plfa-part3-Compositional-8548" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8552" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8554" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8556" href="../Compositional/#plfa_plfa-part3-Compositional-8556" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8562" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8564" href="../Compositional/#plfa_plfa-part3-Compositional-8564" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8569" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8571" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8573" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8575" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8580" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8582" href="../Compositional/#plfa_plfa-part3-Compositional-8582" class="Bound">v₁′′</a> <a id="plfa_plfa-part3-Compositional-8587" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8589" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8591" href="../Compositional/#plfa_plfa-part3-Compositional-8591" class="Bound">L↓v12′</a> <a id="plfa_plfa-part3-Compositional-8598" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8600" href="../Compositional/#plfa_plfa-part3-Compositional-8600" class="Bound">M↓v3′</a> <a id="plfa_plfa-part3-Compositional-8606" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8608" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8610" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8618" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-8622" href="../Compositional/#plfa_plfa-part3-Compositional-8622" class="Bound">L↓⊔</a> <a id="plfa_plfa-part3-Compositional-8626" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8628" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-8636" href="../Compositional/#plfa_plfa-part3-Compositional-8556" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8642" href="../Compositional/#plfa_plfa-part3-Compositional-8591" class="Bound">L↓v12′</a> <a id="plfa_plfa-part3-Compositional-8649" class="Keyword">in</a>
      <a id="plfa_plfa-part3-Compositional-8658" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-8662" href="../Compositional/#plfa_plfa-part3-Compositional-8662" class="Bound">M↓⊔</a> <a id="plfa_plfa-part3-Compositional-8666" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8668" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-8676" href="../Compositional/#plfa_plfa-part3-Compositional-8564" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8681" href="../Compositional/#plfa_plfa-part3-Compositional-8600" class="Bound">M↓v3′</a> <a id="plfa_plfa-part3-Compositional-8687" class="Keyword">in</a>
      <a id="plfa_plfa-part3-Compositional-8696" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8701" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8703" href="../Compositional/#plfa_plfa-part3-Compositional-8548" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-8707" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-8709" href="../Compositional/#plfa_plfa-part3-Compositional-8582" class="Bound">v₁′′</a> <a id="plfa_plfa-part3-Compositional-8714" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8716" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8718" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8722" href="../Compositional/#plfa_plfa-part3-Compositional-8622" class="Bound">L↓⊔</a> <a id="plfa_plfa-part3-Compositional-8726" href="../Denotational/#plfa_plfa-part3-Denotational-7600" class="Function">⊔↦⊔-dist</a> <a id="plfa_plfa-part3-Compositional-8735" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8737" href="../Compositional/#plfa_plfa-part3-Compositional-8662" class="Bound">M↓⊔</a> <a id="plfa_plfa-part3-Compositional-8741" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8743" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-8745" href="../Compositional/#plfa_plfa-part3-Compositional-7781" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8751" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-8752" href="../Compositional/#plfa_plfa-part3-Compositional-8752" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-8753" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8755" href="../Compositional/#plfa_plfa-part3-Compositional-8755" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-8756" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8758" href="../Compositional/#plfa_plfa-part3-Compositional-8758" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-8759" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8761" href="../Compositional/#plfa_plfa-part3-Compositional-8761" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-8762" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-8764" href="../Compositional/#plfa_plfa-part3-Compositional-8764" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-8765" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-8767" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8768" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8772" href="../Compositional/#plfa_plfa-part3-Compositional-8772" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-8774" href="../Compositional/#plfa_plfa-part3-Compositional-8774" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-8776" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Compositional-8782" class="Keyword">with</a> <a id="plfa_plfa-part3-Compositional-8787" href="../Compositional/#plfa_plfa-part3-Compositional-7781" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-8793" href="../Compositional/#plfa_plfa-part3-Compositional-8772" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-8795" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8799" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8801" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8806" href="../Compositional/#plfa_plfa-part3-Compositional-8806" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-8810" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-8812" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-8817" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8818" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-8826" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-8829" href="../Compositional/#plfa_plfa-part3-Compositional-8806" class="Bound">lt2</a><a id="plfa_plfa-part3-Compositional-8832" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-8834" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-8838" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-8840" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8845" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8847" href="../Compositional/#plfa_plfa-part3-Compositional-8847" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8850" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8852" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8854" href="../Compositional/#plfa_plfa-part3-Compositional-8854" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8860" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8862" href="../Compositional/#plfa_plfa-part3-Compositional-8862" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8867" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8869" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8871" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-8879" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-8884" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8886" href="../Compositional/#plfa_plfa-part3-Compositional-8847" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-8889" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8891" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-8893" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-8897" href="../Compositional/#plfa_plfa-part3-Compositional-8854" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-8903" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-8904" href="../Denotational/#plfa_plfa-part3-Denotational-5785" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-8910" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-8917" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-8919" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-8921" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-8923" href="../Compositional/#plfa_plfa-part3-Compositional-8862" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-8928" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-8930" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a>
</pre><p>我们通过对语义进行归纳来证明：</p><ul><li><p>对于 <code>↦-elim</code> 的情况，我们有 <code>γ ⊢ L ↓ (v′ ↦ v)</code> 和 <code>γ ⊢ M ↓ v′</code>， 只需证明 <code>(ℰ L ● ℰ M) γ v</code> 即可。</p></li><li><p>对于 <code>⊥-intro</code> 的情况，我们有 <code>v = ⊥</code>，于是可推出 <code>v ⊑ ⊥</code>。</p></li></ul><ul><li><p>对于 <code>⊔-intro</code> 的情况，我们有 <code>ℰ (L · M) γ v₁</code> 和 <code>ℰ (L · M) γ v₂</code>， 且需要证明 <code>(ℰ L ● ℰ M) γ (v₁ ⊔ v₂)</code>。根据归纳假设，我们有 <code>(ℰ L ● ℰ M) γ v₁</code> 和 <code>(ℰ L ● ℰ M) γ v₂</code>，于是我们需要考虑四种子情况：</p><ul><li><p>假设 <code>v₁ ⊑ ⊥</code> 且 <code>v₂ ⊑ ⊥</code>，那么 <code>v₁ ⊔ v₂ ⊑ ⊥</code>。</p></li><li><p>假设 <code>v₁ ⊑ ⊥</code>，<code>γ ⊢ L ↓ v₁′ ↦ v₂</code> 且 <code>γ ⊢ M ↓ v₁′</code>， 根据 <code>sub</code> 规则我们有 <code>γ ⊢ L ↓ v₁′ ↦ (v₁ ⊔ v₂)</code>，因为 <code>v₁′ ↦ (v₁ ⊔ v₂) ⊑ v₁′ ↦ v₂</code>。</p></li><li><p>假设 <code>γ ⊢ L ↓ v₁′ ↦ v₁</code>，<code>γ ⊢ M ↓ v₁′</code> 且 <code>v₂ ⊑ ⊥</code>， 根据 <code>sub</code> 规则我们有 <code>γ ⊢ L ↓ v₁′ ↦ (v₁ ⊔ v₂)</code>，因为 <code>v₁′ ↦ (v₁ ⊔ v₂) ⊑ v₁′ ↦ v₁</code>。</p></li><li><p>假设 <code>γ ⊢ L ↓ v₁′′ ↦ v₁, γ ⊢ M ↓ v₁′′</code>， <code>γ ⊢ L ↓ v₁′ ↦ v₂</code> 且 <code>γ ⊢ M ↓ v₁′</code>， 这种情况是最有趣的部分。通过使用两次 <code>⊔-intro</code>，我们有 <code>γ ⊢ L ↓ (v₁′ ↦ v₂) ⊔ (v₁′′ ↦ v₁)</code> 且 <code>γ ⊢ M ↓ (v₁′ ⊔ v₁′′)</code>。但它对 <code>ℰ L ● ℰ M</code> 来说与我们的需要尚不匹配， 因为 <code>L</code> 的结果必须是一个输入条目为 <code>v₁′ ⊔ v₁′′</code> 的 <code>↦</code>。 因此我们需要使用 <code>sub</code> 规则来得到 <code>γ ⊢ L ↓ (v₁′ ⊔ v₁′′) ↦ (v₁ ⊔ v₂)</code>； 使用 <code>⊔↦⊔-dist</code> 引理（感谢 <code>⊑-dist</code> 规则）来证明：</p><pre><code>  (v₁′ ⊔ v₁′′) ↦ (v₁ ⊔ v₂) ⊑ (v₁′ ↦ v₂) ⊔ (v₁′′ ↦ v₁)</code></pre><p>这样我们就证明了该情况所有的子情况。</p></li></ul></li><li><p>对于情况 <code>sub</code>，我们有 <code>Γ ⊢ L · M ↓ v₁</code> 且 <code>v ⊑ v₁</code>。 根据归纳假设，我们有 <code>(ℰ L ● ℰ M) γ v₁</code>，于是我们需要考虑两种子情况：</p><ul><li>假设 <code>v₁ ⊑ ⊥</code>，我们可推出 <code>v ⊑ ⊥</code>。</li><li>假设 <code>Γ ⊢ L ↓ v′ → v₁</code> 且 <code>Γ ⊢ M ↓ v′</code>，我们可根据规则 <code>sub</code> 推出 <code>Γ ⊢ L ↓ v′ → v</code>，因为 <code>v′ → v ⊑ v′ → v₁</code>。</li></ul></li></ul><p>后退的方向可通过在前提 <code>(ℰ L ● ℰ M) γ v</code> 下进行情况分析来证明。 对于情况 <code>v ⊑ ⊥</code>，我们可通过规则 <code>⊥-intro</code> 得到 <code>Γ ⊢ L · M ↓ ⊥</code>。 否则，我们可直接通过规则 <code>↦-elim</code> 得出结论：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-●ℰ→ℰ·"></a><a id="plfa_plfa-part3-Compositional-12163" href="../Compositional/#plfa_plfa-part3-Compositional-12163" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12169" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12171" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12173" href="../Compositional/#plfa_plfa-part3-Compositional-12173" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12174" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12176" href="../Compositional/#plfa_plfa-part3-Compositional-12176" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12178" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12180" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-12184" href="../Compositional/#plfa_plfa-part3-Compositional-12173" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12185" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12187" href="../Compositional/#plfa_plfa-part3-Compositional-12187" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12189" href="../Compositional/#plfa_plfa-part3-Compositional-12189" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-12191" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12193" href="../Compositional/#plfa_plfa-part3-Compositional-12173" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-12195" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-12197" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-12198" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12200" href="../Compositional/#plfa_plfa-part3-Compositional-12200" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12201" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12205" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12207" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12208" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12210" href="../Compositional/#plfa_plfa-part3-Compositional-12187" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12212" href="../Compositional/#plfa_plfa-part3-Compositional-6966" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12214" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12216" href="../Compositional/#plfa_plfa-part3-Compositional-12189" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12217" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12219" href="../Compositional/#plfa_plfa-part3-Compositional-12176" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12221" href="../Compositional/#plfa_plfa-part3-Compositional-12200" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-12227" class="Comment">----------------</a>
  <a id="plfa_plfa-part3-Compositional-12246" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12248" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12250" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12251" href="../Compositional/#plfa_plfa-part3-Compositional-12187" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12253" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-12255" href="../Compositional/#plfa_plfa-part3-Compositional-12189" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12256" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12258" href="../Compositional/#plfa_plfa-part3-Compositional-12176" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12260" href="../Compositional/#plfa_plfa-part3-Compositional-12200" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-12262" href="../Compositional/#plfa_plfa-part3-Compositional-12163" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12268" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12269" href="../Compositional/#plfa_plfa-part3-Compositional-12269" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-12270" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12272" href="../Compositional/#plfa_plfa-part3-Compositional-12272" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12273" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12275" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12276" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-12281" href="../Compositional/#plfa_plfa-part3-Compositional-12281" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-12283" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12285" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12287" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-12291" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-12299" href="../Compositional/#plfa_plfa-part3-Compositional-12281" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-12302" href="../Compositional/#plfa_plfa-part3-Compositional-12163" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12308" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12309" href="../Compositional/#plfa_plfa-part3-Compositional-12309" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-12310" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12312" href="../Compositional/#plfa_plfa-part3-Compositional-12312" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12313" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12315" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12316" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-12321" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12323" href="../Compositional/#plfa_plfa-part3-Compositional-12323" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-12326" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12328" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12330" href="../Compositional/#plfa_plfa-part3-Compositional-12330" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-12333" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12335" href="../Compositional/#plfa_plfa-part3-Compositional-12335" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-12338" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-12340" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-12341" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12343" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12345" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Compositional-12352" href="../Compositional/#plfa_plfa-part3-Compositional-12330" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-12355" href="../Compositional/#plfa_plfa-part3-Compositional-12335" class="Bound">d2</a>
</pre><p>这样我们就通过 <code>●</code> 函数的相关定理，证明了对于函数应用来说，语义是可组合的。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-app-equiv"></a><a id="plfa_plfa-part3-Compositional-12549" href="../Compositional/#plfa_plfa-part3-Compositional-12549" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-12559" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12561" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12563" href="../Compositional/#plfa_plfa-part3-Compositional-12563" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12564" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12566" href="../Compositional/#plfa_plfa-part3-Compositional-12566" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12568" href="../Compositional/#plfa_plfa-part3-Compositional-12568" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-12570" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12572" href="../Compositional/#plfa_plfa-part3-Compositional-12563" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-12574" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-12576" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-12577" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12581" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12583" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12585" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12586" href="../Compositional/#plfa_plfa-part3-Compositional-12566" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12588" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-12590" href="../Compositional/#plfa_plfa-part3-Compositional-12568" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12591" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12593" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12595" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12596" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12598" href="../Compositional/#plfa_plfa-part3-Compositional-12566" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-12599" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12601" href="../Compositional/#plfa_plfa-part3-Compositional-6966" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12603" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12604" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12606" href="../Compositional/#plfa_plfa-part3-Compositional-12568" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-12607" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-12609" href="../Compositional/#plfa_plfa-part3-Compositional-12549" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-12619" href="../Compositional/#plfa_plfa-part3-Compositional-12619" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12621" href="../Compositional/#plfa_plfa-part3-Compositional-12621" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12623" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12625" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12627" href="../Compositional/#plfa_plfa-part3-Compositional-7781" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-12633" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12635" href="../Compositional/#plfa_plfa-part3-Compositional-12163" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-12641" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a>
</pre><p>我们还需要一个变量的反演引理：若 <code>Γ ⊢ x ↓ v</code>，则 <code>v ⊑ γ x</code>。 它的证明就是对语义的直接归纳：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-var-inv"></a><a id="plfa_plfa-part3-Compositional-12863" href="../Compositional/#plfa_plfa-part3-Compositional-12863" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12871" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12873" class="Symbol">∀</a> <a id="plfa_plfa-part3-Compositional-12875" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12876" href="../Compositional/#plfa_plfa-part3-Compositional-12876" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-12878" href="../Compositional/#plfa_plfa-part3-Compositional-12878" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12880" href="../Compositional/#plfa_plfa-part3-Compositional-12880" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-12881" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12883" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12884" href="../Compositional/#plfa_plfa-part3-Compositional-12884" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12886" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12888" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-12892" href="../Compositional/#plfa_plfa-part3-Compositional-12876" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12893" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12897" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12899" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12901" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12902" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-12904" href="../Compositional/#plfa_plfa-part3-Compositional-12880" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-12905" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12907" href="../Compositional/#plfa_plfa-part3-Compositional-12884" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12909" href="../Compositional/#plfa_plfa-part3-Compositional-12878" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-12915" class="Comment">-------------------</a>
  <a id="plfa_plfa-part3-Compositional-12937" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12939" href="../Compositional/#plfa_plfa-part3-Compositional-12878" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12941" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-12943" href="../Compositional/#plfa_plfa-part3-Compositional-12884" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12945" href="../Compositional/#plfa_plfa-part3-Compositional-12880" class="Bound">x</a>
<a id="plfa_plfa-part3-Compositional-12947" href="../Compositional/#plfa_plfa-part3-Compositional-12863" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12955" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12956" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Compositional-12959" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12961" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12963" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a>
<a id="plfa_plfa-part3-Compositional-12970" href="../Compositional/#plfa_plfa-part3-Compositional-12863" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-12978" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12979" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-12987" href="../Compositional/#plfa_plfa-part3-Compositional-12987" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-12990" href="../Compositional/#plfa_plfa-part3-Compositional-12990" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-12992" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12994" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12996" href="../Denotational/#plfa_plfa-part3-Denotational-5484" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-13005" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13006" href="../Compositional/#plfa_plfa-part3-Compositional-12863" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13014" href="../Compositional/#plfa_plfa-part3-Compositional-12987" class="Bound">d₁</a><a id="plfa_plfa-part3-Compositional-13016" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13018" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13019" href="../Compositional/#plfa_plfa-part3-Compositional-12863" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13027" href="../Compositional/#plfa_plfa-part3-Compositional-12990" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-13029" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-13031" href="../Compositional/#plfa_plfa-part3-Compositional-12863" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13039" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13040" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-13044" href="../Compositional/#plfa_plfa-part3-Compositional-13044" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-13046" href="../Compositional/#plfa_plfa-part3-Compositional-13046" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-13048" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13050" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-13052" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-13060" href="../Compositional/#plfa_plfa-part3-Compositional-13046" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-13063" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13064" href="../Compositional/#plfa_plfa-part3-Compositional-12863" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13072" href="../Compositional/#plfa_plfa-part3-Compositional-13044" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-13073" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-13075" href="../Compositional/#plfa_plfa-part3-Compositional-12863" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13083" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-13091" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-13093" href="../Denotational/#plfa_plfa-part3-Denotational-5459" class="InductiveConstructor">⊑-bot</a>
</pre><p>为了完善语义等式，我们建立以下变量等式：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-var-equiv"></a><a id="plfa_plfa-part3-Compositional-13227" href="../Compositional/#plfa_plfa-part3-Compositional-13227" class="Function">var-equiv</a> <a id="plfa_plfa-part3-Compositional-13237" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13239" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-13241" href="../Compositional/#plfa_plfa-part3-Compositional-13241" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-13242" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13244" href="../Compositional/#plfa_plfa-part3-Compositional-13244" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-13246" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13248" href="../Compositional/#plfa_plfa-part3-Compositional-13241" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13250" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Compositional-13252" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-13253" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13255" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13257" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13259" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13260" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-13262" href="../Compositional/#plfa_plfa-part3-Compositional-13244" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-13263" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13265" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-13267" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-13270" href="../Compositional/#plfa_plfa-part3-Compositional-13270" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-13272" href="../Compositional/#plfa_plfa-part3-Compositional-13272" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-13274" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13276" href="../Compositional/#plfa_plfa-part3-Compositional-13272" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-13278" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-13280" href="../Compositional/#plfa_plfa-part3-Compositional-13270" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-13282" href="../Compositional/#plfa_plfa-part3-Compositional-13244" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-13283" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-13285" href="../Compositional/#plfa_plfa-part3-Compositional-13227" class="Function">var-equiv</a> <a id="plfa_plfa-part3-Compositional-13295" href="../Compositional/#plfa_plfa-part3-Compositional-13295" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-13297" href="../Compositional/#plfa_plfa-part3-Compositional-13297" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-13299" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-13301" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-13303" href="../Compositional/#plfa_plfa-part3-Compositional-12863" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-13311" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-13313" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-13316" href="../Compositional/#plfa_plfa-part3-Compositional-13316" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-13319" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13321" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-13325" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Compositional-13329" href="../Compositional/#plfa_plfa-part3-Compositional-13316" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-13331" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13333" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="合同性">合同性</h2><p>本章的主要工作已经完成：我们建立了语义等式来展示指称语义是如何组合的。 在本节和下一节中，我们将利用这些等式来证明一些推论：指称相等满足<strong>合同性（congruence）</strong>， 并证明指称具有<strong>可组合性（compositionality property）</strong>， 该性质指出在同一语境中，两个指称相等的项会产生两个指称相等的程序 。</p><p>我们首先证明指称相等对 λ-抽象满足合同性：<code>ℰ N ≃ ℰ N′</code> 蕴含 <code>ℰ (ƛ N) ≃ ℰ (ƛ N′)</code>。我们用 <code>lam-equiv</code> 等式将这个问题简化为 <code>ℱ</code> 是否满足合同性：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱ-cong"></a><a id="plfa_plfa-part3-Compositional-14364" href="../Compositional/#plfa_plfa-part3-Compositional-14364" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-14371" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14373" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-14375" href="../Compositional/#plfa_plfa-part3-Compositional-14375" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14376" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14378" href="../Compositional/#plfa_plfa-part3-Compositional-14378" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14380" href="../Compositional/#plfa_plfa-part3-Compositional-14380" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14383" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14385" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-14396" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14397" href="../Compositional/#plfa_plfa-part3-Compositional-14375" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14399" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14401" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-14402" class="Symbol">)}</a>
  <a id="plfa_plfa-part3-Compositional-14407" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14409" href="../Compositional/#plfa_plfa-part3-Compositional-14378" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14411" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-14413" href="../Compositional/#plfa_plfa-part3-Compositional-14380" class="Bound">D′</a>
    <a id="plfa_plfa-part3-Compositional-14420" class="Comment">-----------</a>
  <a id="plfa_plfa-part3-Compositional-14434" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14436" href="../Compositional/#plfa_plfa-part3-Compositional-2282" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14438" href="../Compositional/#plfa_plfa-part3-Compositional-14378" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14440" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-14442" href="../Compositional/#plfa_plfa-part3-Compositional-2282" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14444" href="../Compositional/#plfa_plfa-part3-Compositional-14380" class="Bound">D′</a>
<a id="plfa_plfa-part3-Compositional-14447" href="../Compositional/#plfa_plfa-part3-Compositional-14364" class="Function">ℱ-cong</a><a id="plfa_plfa-part3-Compositional-14453" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14454" href="../Compositional/#plfa_plfa-part3-Compositional-14454" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14455" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14457" href="../Compositional/#plfa_plfa-part3-Compositional-14457" class="Bound">D≃D′</a> <a id="plfa_plfa-part3-Compositional-14462" href="../Compositional/#plfa_plfa-part3-Compositional-14462" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14464" href="../Compositional/#plfa_plfa-part3-Compositional-14464" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-14466" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-14470" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-14472" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-14475" href="../Compositional/#plfa_plfa-part3-Compositional-14475" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14477" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14479" href="../Compositional/#plfa_plfa-part3-Compositional-14542" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14481" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14482" href="../Compositional/#plfa_plfa-part3-Compositional-14462" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14483" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14485" href="../Compositional/#plfa_plfa-part3-Compositional-14464" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14486" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14488" href="../Compositional/#plfa_plfa-part3-Compositional-14475" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14490" href="../Compositional/#plfa_plfa-part3-Compositional-14457" class="Bound">D≃D′</a><a id="plfa_plfa-part3-Compositional-14494" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14496" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14498" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-14501" href="../Compositional/#plfa_plfa-part3-Compositional-14501" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14503" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14505" href="../Compositional/#plfa_plfa-part3-Compositional-14542" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14507" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14508" href="../Compositional/#plfa_plfa-part3-Compositional-14462" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14509" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14511" href="../Compositional/#plfa_plfa-part3-Compositional-14464" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14512" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14514" href="../Compositional/#plfa_plfa-part3-Compositional-14501" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-14516" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14517" href="../Denotational/#plfa_plfa-part3-Denotational-22793" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-14523" href="../Compositional/#plfa_plfa-part3-Compositional-14457" class="Bound">D≃D′</a><a id="plfa_plfa-part3-Compositional-14527" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-14530" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Compositional-14534" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-14542" href="../Compositional/#plfa_plfa-part3-Compositional-14542" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14545" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14547" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-14549" href="../Compositional/#plfa_plfa-part3-Compositional-14549" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14551" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14553" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-14557" href="../Compositional/#plfa_plfa-part3-Compositional-14454" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14558" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14560" href="../Compositional/#plfa_plfa-part3-Compositional-14560" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14561" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14563" href="../Compositional/#plfa_plfa-part3-Compositional-14563" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14565" href="../Compositional/#plfa_plfa-part3-Compositional-14565" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14568" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14570" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-14581" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14582" href="../Compositional/#plfa_plfa-part3-Compositional-14454" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14584" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14586" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-14587" class="Symbol">)}</a>
    <a id="plfa_plfa-part3-Compositional-14594" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14596" href="../Compositional/#plfa_plfa-part3-Compositional-2282" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14598" href="../Compositional/#plfa_plfa-part3-Compositional-14563" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14600" href="../Compositional/#plfa_plfa-part3-Compositional-14549" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14602" href="../Compositional/#plfa_plfa-part3-Compositional-14560" class="Bound">v</a>  <a id="plfa_plfa-part3-Compositional-14605" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-14608" href="../Compositional/#plfa_plfa-part3-Compositional-14563" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-14610" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-14612" href="../Compositional/#plfa_plfa-part3-Compositional-14565" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14615" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14617" href="../Compositional/#plfa_plfa-part3-Compositional-2282" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-14619" href="../Compositional/#plfa_plfa-part3-Compositional-14565" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-14622" href="../Compositional/#plfa_plfa-part3-Compositional-14549" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14624" href="../Compositional/#plfa_plfa-part3-Compositional-14560" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-14628" href="../Compositional/#plfa_plfa-part3-Compositional-14542" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14631" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14632" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-14634" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14636" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-14637" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14639" href="../Compositional/#plfa_plfa-part3-Compositional-14639" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-14642" href="../Compositional/#plfa_plfa-part3-Compositional-14642" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14646" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14648" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a>
  <a id="plfa_plfa-part3-Compositional-14653" href="../Compositional/#plfa_plfa-part3-Compositional-14542" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14656" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14657" href="../Compositional/#plfa_plfa-part3-Compositional-14657" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14658" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14660" href="../Compositional/#plfa_plfa-part3-Compositional-14660" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-14662" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-14664" href="../Compositional/#plfa_plfa-part3-Compositional-14664" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14665" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14667" href="../Compositional/#plfa_plfa-part3-Compositional-14667" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-14670" href="../Compositional/#plfa_plfa-part3-Compositional-14670" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14674" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14676" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-14682" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14683" href="../Compositional/#plfa_plfa-part3-Compositional-14670" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14687" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14688" href="../Compositional/#plfa_plfa-part3-Compositional-14657" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-14690" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-14693" href="../Compositional/#plfa_plfa-part3-Compositional-14660" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-14694" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14696" href="../Compositional/#plfa_plfa-part3-Compositional-14664" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14697" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14699" href="../Compositional/#plfa_plfa-part3-Compositional-14667" class="Bound">fd</a>
  <a id="plfa_plfa-part3-Compositional-14704" href="../Compositional/#plfa_plfa-part3-Compositional-14542" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-14707" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14708" href="../Compositional/#plfa_plfa-part3-Compositional-14708" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14709" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14711" href="../Compositional/#plfa_plfa-part3-Compositional-14711" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-14713" href="../Denotational/#plfa_plfa-part3-Denotational-5019" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-14715" href="../Compositional/#plfa_plfa-part3-Compositional-14715" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14716" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14718" href="../Compositional/#plfa_plfa-part3-Compositional-14718" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-14721" href="../Compositional/#plfa_plfa-part3-Compositional-14721" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14725" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14727" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-14729" href="../Compositional/#plfa_plfa-part3-Compositional-14542" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14731" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14732" href="../Compositional/#plfa_plfa-part3-Compositional-14708" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14733" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14735" href="../Compositional/#plfa_plfa-part3-Compositional-14711" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-14736" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14738" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14739" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-14745" href="../Compositional/#plfa_plfa-part3-Compositional-14718" class="Bound">fd</a><a id="plfa_plfa-part3-Compositional-14747" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14749" href="../Compositional/#plfa_plfa-part3-Compositional-14721" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14753" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14755" href="../Compositional/#plfa_plfa-part3-Compositional-14542" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-14757" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-14758" href="../Compositional/#plfa_plfa-part3-Compositional-14708" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-14759" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14761" href="../Compositional/#plfa_plfa-part3-Compositional-14715" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-14762" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14764" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14765" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="plfa_plfa-part3-Compositional-14771" href="../Compositional/#plfa_plfa-part3-Compositional-14718" class="Bound">fd</a><a id="plfa_plfa-part3-Compositional-14773" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14775" href="../Compositional/#plfa_plfa-part3-Compositional-14721" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-14779" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a>
</pre><p><code>ℱ-cong</code> 的证明使用了 <code>ℱ≃</code> 来处理「当且仅当」的两个方向。 该引理直接通过对值 <code>v</code> 进行归纳得证。</p><p>现在我们通过直白的等式推理证明 λ-抽象满足合同性：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lam-cong"></a><a id="plfa_plfa-part3-Compositional-15148" href="../Compositional/#plfa_plfa-part3-Compositional-15148" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-15157" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15159" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-15161" href="../Compositional/#plfa_plfa-part3-Compositional-15161" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15162" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15164" href="../Compositional/#plfa_plfa-part3-Compositional-15164" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-15166" href="../Compositional/#plfa_plfa-part3-Compositional-15166" class="Bound">N′</a> <a id="plfa_plfa-part3-Compositional-15169" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15171" href="../Compositional/#plfa_plfa-part3-Compositional-15161" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-15173" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-15175" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-15177" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-15179" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-15180" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-15184" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15186" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15188" href="../Compositional/#plfa_plfa-part3-Compositional-15164" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-15190" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15192" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15194" href="../Compositional/#plfa_plfa-part3-Compositional-15166" class="Bound">N′</a>
    <a id="plfa_plfa-part3-Compositional-15201" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Compositional-15221" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15223" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15225" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15226" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15228" href="../Compositional/#plfa_plfa-part3-Compositional-15164" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15229" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15231" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15233" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15235" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15236" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15238" href="../Compositional/#plfa_plfa-part3-Compositional-15166" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15240" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-15242" href="../Compositional/#plfa_plfa-part3-Compositional-15148" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-15251" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15252" href="../Compositional/#plfa_plfa-part3-Compositional-15252" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15253" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15255" href="../Compositional/#plfa_plfa-part3-Compositional-15255" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15256" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15258" href="../Compositional/#plfa_plfa-part3-Compositional-15258" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15260" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15262" href="../Compositional/#plfa_plfa-part3-Compositional-15262" class="Bound">N≃N′</a> <a id="plfa_plfa-part3-Compositional-15267" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15271" href="../Denotational/#plfa_plfa-part3-Denotational-23553" class="Function Operator">start</a>
    <a id="plfa_plfa-part3-Compositional-15281" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15283" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15284" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15286" href="../Compositional/#plfa_plfa-part3-Compositional-15255" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15287" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15291" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-15294" href="../Compositional/#plfa_plfa-part3-Compositional-5291" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-15304" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-15310" href="../Compositional/#plfa_plfa-part3-Compositional-2282" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-15312" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15313" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15315" href="../Compositional/#plfa_plfa-part3-Compositional-15255" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15316" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15320" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-15323" href="../Compositional/#plfa_plfa-part3-Compositional-14364" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-15330" href="../Compositional/#plfa_plfa-part3-Compositional-15262" class="Bound">N≃N′</a> <a id="plfa_plfa-part3-Compositional-15335" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-15341" href="../Compositional/#plfa_plfa-part3-Compositional-2282" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-15343" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15344" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15346" href="../Compositional/#plfa_plfa-part3-Compositional-15258" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15348" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15352" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-15355" href="../Denotational/#plfa_plfa-part3-Denotational-22793" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-15361" href="../Compositional/#plfa_plfa-part3-Compositional-5291" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-15371" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-15377" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15379" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15380" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15382" href="../Compositional/#plfa_plfa-part3-Compositional-15258" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-15384" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-15388" href="../Denotational/#plfa_plfa-part3-Denotational-23891" class="Function Operator">☐</a>
</pre><p>接下来我们证明指称相等对于应用也满足合同性：<code>ℰ L ≃ ℰ L′</code> 和 <code>ℰ M ≃ ℰ M′</code> 蕴含 <code>ℰ (L · M) ≃ ℰ (L′ · M′)</code>。等式 <code>app-equiv</code> 将其归约为 <code>●</code> 运算符是否满足合同性的问题。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-●-cong"></a><a id="plfa_plfa-part3-Compositional-15774" href="../Compositional/#plfa_plfa-part3-Compositional-15774" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-15781" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15783" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-15785" href="../Compositional/#plfa_plfa-part3-Compositional-15785" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15786" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15788" href="../Compositional/#plfa_plfa-part3-Compositional-15788" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-15791" href="../Compositional/#plfa_plfa-part3-Compositional-15791" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-15795" href="../Compositional/#plfa_plfa-part3-Compositional-15795" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-15798" href="../Compositional/#plfa_plfa-part3-Compositional-15798" class="Bound">D₂′</a> <a id="plfa_plfa-part3-Compositional-15802" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15804" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-15815" href="../Compositional/#plfa_plfa-part3-Compositional-15785" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15816" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-15820" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15822" href="../Compositional/#plfa_plfa-part3-Compositional-15788" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-15825" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15827" href="../Compositional/#plfa_plfa-part3-Compositional-15791" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-15831" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15833" href="../Compositional/#plfa_plfa-part3-Compositional-15795" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-15836" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15838" href="../Compositional/#plfa_plfa-part3-Compositional-15798" class="Bound">D₂′</a>
  <a id="plfa_plfa-part3-Compositional-15844" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15846" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15847" href="../Compositional/#plfa_plfa-part3-Compositional-15788" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-15850" href="../Compositional/#plfa_plfa-part3-Compositional-6966" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-15852" href="../Compositional/#plfa_plfa-part3-Compositional-15795" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-15854" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15856" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15858" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15859" href="../Compositional/#plfa_plfa-part3-Compositional-15791" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-15863" href="../Compositional/#plfa_plfa-part3-Compositional-6966" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-15865" href="../Compositional/#plfa_plfa-part3-Compositional-15798" class="Bound">D₂′</a><a id="plfa_plfa-part3-Compositional-15868" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-15870" href="../Compositional/#plfa_plfa-part3-Compositional-15774" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-15877" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15878" href="../Compositional/#plfa_plfa-part3-Compositional-15878" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-15879" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15881" href="../Compositional/#plfa_plfa-part3-Compositional-15881" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-15884" href="../Compositional/#plfa_plfa-part3-Compositional-15884" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-15887" href="../Compositional/#plfa_plfa-part3-Compositional-15887" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-15889" href="../Compositional/#plfa_plfa-part3-Compositional-15889" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-15891" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15893" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-15895" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15898" href="../Compositional/#plfa_plfa-part3-Compositional-15898" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15900" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15902" href="../Compositional/#plfa_plfa-part3-Compositional-15988" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-15905" href="../Compositional/#plfa_plfa-part3-Compositional-15898" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15907" href="../Compositional/#plfa_plfa-part3-Compositional-15881" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-15910" href="../Compositional/#plfa_plfa-part3-Compositional-15884" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-15912" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15914" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a>
                         <a id="plfa_plfa-part3-Compositional-15941" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15944" href="../Compositional/#plfa_plfa-part3-Compositional-15944" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15946" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15948" href="../Compositional/#plfa_plfa-part3-Compositional-15988" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-15951" href="../Compositional/#plfa_plfa-part3-Compositional-15944" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15953" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15954" href="../Denotational/#plfa_plfa-part3-Denotational-22793" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-15960" href="../Compositional/#plfa_plfa-part3-Compositional-15881" class="Bound">d1</a><a id="plfa_plfa-part3-Compositional-15962" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15964" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15965" href="../Denotational/#plfa_plfa-part3-Denotational-22793" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-15971" href="../Compositional/#plfa_plfa-part3-Compositional-15884" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-15973" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-15976" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Compositional-15980" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-15988" href="../Compositional/#plfa_plfa-part3-Compositional-15988" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-15991" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15993" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-15995" href="../Compositional/#plfa_plfa-part3-Compositional-15995" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-15997" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15999" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-16003" href="../Compositional/#plfa_plfa-part3-Compositional-15878" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16004" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16006" href="../Compositional/#plfa_plfa-part3-Compositional-16006" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-16007" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16009" href="../Compositional/#plfa_plfa-part3-Compositional-16009" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-16012" href="../Compositional/#plfa_plfa-part3-Compositional-16012" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-16016" href="../Compositional/#plfa_plfa-part3-Compositional-16016" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-16019" href="../Compositional/#plfa_plfa-part3-Compositional-16019" class="Bound">D₂′</a> <a id="plfa_plfa-part3-Compositional-16023" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16025" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-16036" href="../Compositional/#plfa_plfa-part3-Compositional-15878" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16037" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Compositional-16043" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16045" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16046" href="../Compositional/#plfa_plfa-part3-Compositional-16009" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-16049" href="../Compositional/#plfa_plfa-part3-Compositional-6966" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16051" href="../Compositional/#plfa_plfa-part3-Compositional-16016" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-16053" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16055" href="../Compositional/#plfa_plfa-part3-Compositional-15995" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16057" href="../Compositional/#plfa_plfa-part3-Compositional-16006" class="Bound">v</a>  <a id="plfa_plfa-part3-Compositional-16060" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-16063" href="../Compositional/#plfa_plfa-part3-Compositional-16009" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-16066" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16068" href="../Compositional/#plfa_plfa-part3-Compositional-16012" class="Bound">D₁′</a>  <a id="plfa_plfa-part3-Compositional-16073" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-16076" href="../Compositional/#plfa_plfa-part3-Compositional-16016" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-16079" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16081" href="../Compositional/#plfa_plfa-part3-Compositional-16019" class="Bound">D₂′</a>
    <a id="plfa_plfa-part3-Compositional-16089" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16091" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16092" href="../Compositional/#plfa_plfa-part3-Compositional-16012" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-16096" href="../Compositional/#plfa_plfa-part3-Compositional-6966" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16098" href="../Compositional/#plfa_plfa-part3-Compositional-16019" class="Bound">D₂′</a><a id="plfa_plfa-part3-Compositional-16101" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16103" href="../Compositional/#plfa_plfa-part3-Compositional-15995" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16105" href="../Compositional/#plfa_plfa-part3-Compositional-16006" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-16109" href="../Compositional/#plfa_plfa-part3-Compositional-15988" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-16112" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16113" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-16118" href="../Compositional/#plfa_plfa-part3-Compositional-16118" class="Bound">v⊑⊥</a><a id="plfa_plfa-part3-Compositional-16121" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16123" href="../Compositional/#plfa_plfa-part3-Compositional-16123" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-16127" href="../Compositional/#plfa_plfa-part3-Compositional-16127" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-16131" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16133" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-16138" href="../Compositional/#plfa_plfa-part3-Compositional-16118" class="Bound">v⊑⊥</a>
  <a id="plfa_plfa-part3-Compositional-16144" href="../Compositional/#plfa_plfa-part3-Compositional-15988" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-16147" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16148" href="../Compositional/#plfa_plfa-part3-Compositional-16148" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-16149" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16151" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16152" href="../Compositional/#plfa_plfa-part3-Compositional-16152" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-16153" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16155" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16156" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-16161" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16163" href="../Compositional/#plfa_plfa-part3-Compositional-16163" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16165" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16167" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16169" href="../Compositional/#plfa_plfa-part3-Compositional-16169" class="Bound">Dv↦w</a> <a id="plfa_plfa-part3-Compositional-16174" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16176" href="../Compositional/#plfa_plfa-part3-Compositional-16176" class="Bound">Dv</a> <a id="plfa_plfa-part3-Compositional-16179" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-16181" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-16182" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16184" href="../Compositional/#plfa_plfa-part3-Compositional-16184" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-16188" href="../Compositional/#plfa_plfa-part3-Compositional-16188" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-16192" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Compositional-16198" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-16203" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16205" href="../Compositional/#plfa_plfa-part3-Compositional-16163" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16207" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16209" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-16211" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-16217" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16218" href="../Compositional/#plfa_plfa-part3-Compositional-16184" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-16222" href="../Compositional/#plfa_plfa-part3-Compositional-16148" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16224" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16225" href="../Compositional/#plfa_plfa-part3-Compositional-16163" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16227" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-16229" href="../Compositional/#plfa_plfa-part3-Compositional-16152" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-16230" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-16233" href="../Compositional/#plfa_plfa-part3-Compositional-16169" class="Bound">Dv↦w</a> <a id="plfa_plfa-part3-Compositional-16238" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-16240" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-16246" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16247" href="../Compositional/#plfa_plfa-part3-Compositional-16188" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-16251" href="../Compositional/#plfa_plfa-part3-Compositional-16148" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16253" href="../Compositional/#plfa_plfa-part3-Compositional-16163" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-16254" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16256" href="../Compositional/#plfa_plfa-part3-Compositional-16176" class="Bound">Dv</a> <a id="plfa_plfa-part3-Compositional-16259" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-16261" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a>
</pre><p>同样，「当且仅当」的两个方向需要通过一个引理来证明，而该引理则通过对 <code>(D₁ ● D₂) γ v</code> 进行情况分析来证明。</p><p>根据 <code>●</code> 的合同性，我们可以直接通过等式推理证明应用也满足合同性。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-app-cong"></a><a id="plfa_plfa-part3-Compositional-16630" href="../Compositional/#plfa_plfa-part3-Compositional-16630" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-16639" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16641" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-16643" href="../Compositional/#plfa_plfa-part3-Compositional-16643" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16644" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16646" href="../Compositional/#plfa_plfa-part3-Compositional-16646" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16648" href="../Compositional/#plfa_plfa-part3-Compositional-16648" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16651" href="../Compositional/#plfa_plfa-part3-Compositional-16651" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16653" href="../Compositional/#plfa_plfa-part3-Compositional-16653" class="Bound">M′</a> <a id="plfa_plfa-part3-Compositional-16656" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16658" href="../Compositional/#plfa_plfa-part3-Compositional-16643" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-16660" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-16662" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-16663" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-16667" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16669" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16671" href="../Compositional/#plfa_plfa-part3-Compositional-16646" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16673" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16675" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16677" href="../Compositional/#plfa_plfa-part3-Compositional-16648" class="Bound">L′</a>
  <a id="plfa_plfa-part3-Compositional-16682" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16684" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16686" href="../Compositional/#plfa_plfa-part3-Compositional-16651" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16688" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16690" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16692" href="../Compositional/#plfa_plfa-part3-Compositional-16653" class="Bound">M′</a>
    <a id="plfa_plfa-part3-Compositional-16699" class="Comment">-------------------------</a>
  <a id="plfa_plfa-part3-Compositional-16727" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16729" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16731" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16732" href="../Compositional/#plfa_plfa-part3-Compositional-16646" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16734" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16736" href="../Compositional/#plfa_plfa-part3-Compositional-16651" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16737" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16739" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16741" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16743" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16744" href="../Compositional/#plfa_plfa-part3-Compositional-16648" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16747" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16749" href="../Compositional/#plfa_plfa-part3-Compositional-16653" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-16751" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-16753" href="../Compositional/#plfa_plfa-part3-Compositional-16630" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-16762" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16763" href="../Compositional/#plfa_plfa-part3-Compositional-16763" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16764" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16766" href="../Compositional/#plfa_plfa-part3-Compositional-16766" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-16767" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16769" href="../Compositional/#plfa_plfa-part3-Compositional-16769" class="Bound">L′</a><a id="plfa_plfa-part3-Compositional-16771" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16773" href="../Compositional/#plfa_plfa-part3-Compositional-16773" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16774" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-16776" href="../Compositional/#plfa_plfa-part3-Compositional-16776" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-16778" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16780" href="../Compositional/#plfa_plfa-part3-Compositional-16780" class="Bound">L≅L′</a> <a id="plfa_plfa-part3-Compositional-16785" href="../Compositional/#plfa_plfa-part3-Compositional-16785" class="Bound">M≅M′</a> <a id="plfa_plfa-part3-Compositional-16790" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-16794" href="../Denotational/#plfa_plfa-part3-Denotational-23553" class="Function Operator">start</a>
    <a id="plfa_plfa-part3-Compositional-16804" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16806" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16807" href="../Compositional/#plfa_plfa-part3-Compositional-16766" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16809" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16811" href="../Compositional/#plfa_plfa-part3-Compositional-16773" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16812" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16816" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16819" href="../Compositional/#plfa_plfa-part3-Compositional-12549" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-16829" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16835" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16837" href="../Compositional/#plfa_plfa-part3-Compositional-16766" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16839" href="../Compositional/#plfa_plfa-part3-Compositional-6966" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16841" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16843" href="../Compositional/#plfa_plfa-part3-Compositional-16773" class="Bound">M</a>
  <a id="plfa_plfa-part3-Compositional-16847" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16850" href="../Compositional/#plfa_plfa-part3-Compositional-15774" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-16857" href="../Compositional/#plfa_plfa-part3-Compositional-16780" class="Bound">L≅L′</a> <a id="plfa_plfa-part3-Compositional-16862" href="../Compositional/#plfa_plfa-part3-Compositional-16785" class="Bound">M≅M′</a> <a id="plfa_plfa-part3-Compositional-16867" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16873" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16875" href="../Compositional/#plfa_plfa-part3-Compositional-16769" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16878" href="../Compositional/#plfa_plfa-part3-Compositional-6966" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16880" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16882" href="../Compositional/#plfa_plfa-part3-Compositional-16776" class="Bound">M′</a>
  <a id="plfa_plfa-part3-Compositional-16887" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16890" href="../Denotational/#plfa_plfa-part3-Denotational-22793" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-16896" href="../Compositional/#plfa_plfa-part3-Compositional-12549" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-16906" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16912" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16914" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16915" href="../Compositional/#plfa_plfa-part3-Compositional-16769" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-16918" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16920" href="../Compositional/#plfa_plfa-part3-Compositional-16776" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-16922" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16926" href="../Denotational/#plfa_plfa-part3-Denotational-23891" class="Function Operator">☐</a>
</pre><h2 id="可组合性">可组合性</h2><p><strong>可组合性（Compositionality Property）</strong>说明了在同一语境下， 两个指称相等的项会产生两个指称相等的程序。为准确起见，我们定义了 「语境」和「在语境下」的含义。</p><p><strong>语境（Context）</strong>是一个带洞的程序。以下数据定义 <code>Ctx</code> 将这个概念表示了出来。 我们使用两个变量语境来索引 <code>Ctx</code> 数据类型：一个表示洞，另一个表示填洞所产生的项。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-17925" class="Keyword">data</a> <a id="plfa_plfa-part3-Compositional-Ctx"></a><a id="plfa_plfa-part3-Compositional-17930" href="../Compositional/#plfa_plfa-part3-Compositional-17930" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-17934" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-17936" href="../Untyped/#plfa_plfa-part2-Untyped-3848" class="Datatype">Context</a> <a id="plfa_plfa-part3-Compositional-17944" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-17946" href="../Untyped/#plfa_plfa-part2-Untyped-3848" class="Datatype">Context</a> <a id="plfa_plfa-part3-Compositional-17954" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-17956" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part3-Compositional-17960" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-hole"></a><a id="plfa_plfa-part3-Compositional-17968" href="../Compositional/#plfa_plfa-part3-Compositional-17968" class="InductiveConstructor">ctx-hole</a> <a id="plfa_plfa-part3-Compositional-17977" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-17979" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-17981" href="../Compositional/#plfa_plfa-part3-Compositional-17981" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-17982" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-17984" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-17986" href="../Compositional/#plfa_plfa-part3-Compositional-17930" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-17990" href="../Compositional/#plfa_plfa-part3-Compositional-17981" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-17992" href="../Compositional/#plfa_plfa-part3-Compositional-17981" class="Bound">Γ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-lam"></a><a id="plfa_plfa-part3-Compositional-17996" href="../Compositional/#plfa_plfa-part3-Compositional-17996" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-18004" class="Symbol">:</a>  <a id="plfa_plfa-part3-Compositional-18007" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-18009" href="../Compositional/#plfa_plfa-part3-Compositional-18009" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18011" href="../Compositional/#plfa_plfa-part3-Compositional-18011" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-18012" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-18014" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18016" href="../Compositional/#plfa_plfa-part3-Compositional-17930" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18020" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-18021" href="../Compositional/#plfa_plfa-part3-Compositional-18009" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18023" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-18025" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-18026" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-18028" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-18029" href="../Compositional/#plfa_plfa-part3-Compositional-18011" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18031" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-18033" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-18034" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-18036" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18038" href="../Compositional/#plfa_plfa-part3-Compositional-17930" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18042" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-18043" href="../Compositional/#plfa_plfa-part3-Compositional-18009" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18045" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-18047" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-18048" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-18050" href="../Compositional/#plfa_plfa-part3-Compositional-18011" class="Bound">Δ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-app-L"></a><a id="plfa_plfa-part3-Compositional-18054" href="../Compositional/#plfa_plfa-part3-Compositional-18054" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-18064" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-18066" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-18068" href="../Compositional/#plfa_plfa-part3-Compositional-18068" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18070" href="../Compositional/#plfa_plfa-part3-Compositional-18070" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-18071" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-18073" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18075" href="../Compositional/#plfa_plfa-part3-Compositional-17930" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18079" href="../Compositional/#plfa_plfa-part3-Compositional-18068" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18081" href="../Compositional/#plfa_plfa-part3-Compositional-18070" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18083" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18085" href="../Compositional/#plfa_plfa-part3-Compositional-18070" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18087" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-18089" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-18091" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18093" href="../Compositional/#plfa_plfa-part3-Compositional-17930" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18097" href="../Compositional/#plfa_plfa-part3-Compositional-18068" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18099" href="../Compositional/#plfa_plfa-part3-Compositional-18070" class="Bound">Δ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-app-R"></a><a id="plfa_plfa-part3-Compositional-18103" href="../Compositional/#plfa_plfa-part3-Compositional-18103" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-18113" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-18115" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-18117" href="../Compositional/#plfa_plfa-part3-Compositional-18117" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18119" href="../Compositional/#plfa_plfa-part3-Compositional-18119" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-18120" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-18122" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18124" href="../Compositional/#plfa_plfa-part3-Compositional-18119" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18126" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-18128" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-18130" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18132" href="../Compositional/#plfa_plfa-part3-Compositional-17930" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18136" href="../Compositional/#plfa_plfa-part3-Compositional-18117" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18138" href="../Compositional/#plfa_plfa-part3-Compositional-18119" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-18140" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-18142" href="../Compositional/#plfa_plfa-part3-Compositional-17930" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-18146" href="../Compositional/#plfa_plfa-part3-Compositional-18117" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-18148" href="../Compositional/#plfa_plfa-part3-Compositional-18119" class="Bound">Δ</a>
</pre><ul><li>构造子 <code>ctx-hole</code> 表示洞，且在此情况中洞的变量语境 与填洞所产生的项的变量语境相同。</li></ul><ul><li>构造子 <code>ctx-lam</code> 接受一个 <code>Ctx</code> 并在顶部添加 λ-抽象来产生一个更大的 <code>Ctx</code>。 洞的变量语境保持不变，而我们从结果项的语境中删除一个变量，因为它被此 λ-抽象约束。</li></ul><ul><li>应用有两种构造，<code>ctx-app-L</code> 和 <code>ctx-app-R</code>。<code>ctx-app-L</code> 对应洞位于左侧项（运算符）内的情况，<code>ctx-app-R</code> 对应洞位于右侧项（运算数）内的情况。</li></ul><p>将项插入到某个语境下的操作由以下 <code>plug</code> 函数定义，它是通过对语境进行递归来定义的：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-plug"></a><a id="plfa_plfa-part3-Compositional-19359" href="../Compositional/#plfa_plfa-part3-Compositional-19359" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19364" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19366" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-19368" href="../Compositional/#plfa_plfa-part3-Compositional-19368" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-19369" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-19371" href="../Compositional/#plfa_plfa-part3-Compositional-19371" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-19372" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-19374" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19376" href="../Compositional/#plfa_plfa-part3-Compositional-17930" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-19380" href="../Compositional/#plfa_plfa-part3-Compositional-19368" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19382" href="../Compositional/#plfa_plfa-part3-Compositional-19371" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-19384" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19386" href="../Compositional/#plfa_plfa-part3-Compositional-19368" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19388" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-19390" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-19392" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19394" href="../Compositional/#plfa_plfa-part3-Compositional-19371" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-19396" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-19398" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a>
<a id="plfa_plfa-part3-Compositional-19400" href="../Compositional/#plfa_plfa-part3-Compositional-19359" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19405" href="../Compositional/#plfa_plfa-part3-Compositional-17968" class="InductiveConstructor">ctx-hole</a> <a id="plfa_plfa-part3-Compositional-19414" href="../Compositional/#plfa_plfa-part3-Compositional-19414" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19416" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19418" href="../Compositional/#plfa_plfa-part3-Compositional-19414" class="Bound">M</a>
<a id="plfa_plfa-part3-Compositional-19420" href="../Compositional/#plfa_plfa-part3-Compositional-19359" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19425" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19426" href="../Compositional/#plfa_plfa-part3-Compositional-17996" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-19434" href="../Compositional/#plfa_plfa-part3-Compositional-19434" class="Bound">C</a><a id="plfa_plfa-part3-Compositional-19435" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19437" href="../Compositional/#plfa_plfa-part3-Compositional-19437" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-19439" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19441" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-19443" href="../Compositional/#plfa_plfa-part3-Compositional-19359" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19448" href="../Compositional/#plfa_plfa-part3-Compositional-19434" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19450" href="../Compositional/#plfa_plfa-part3-Compositional-19437" class="Bound">N</a>
<a id="plfa_plfa-part3-Compositional-19452" href="../Compositional/#plfa_plfa-part3-Compositional-19359" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19457" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19458" href="../Compositional/#plfa_plfa-part3-Compositional-18054" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-19468" href="../Compositional/#plfa_plfa-part3-Compositional-19468" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19470" href="../Compositional/#plfa_plfa-part3-Compositional-19470" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-19471" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19473" href="../Compositional/#plfa_plfa-part3-Compositional-19473" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-19475" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19477" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19478" href="../Compositional/#plfa_plfa-part3-Compositional-19359" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19483" href="../Compositional/#plfa_plfa-part3-Compositional-19468" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19485" href="../Compositional/#plfa_plfa-part3-Compositional-19473" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-19486" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19488" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-19490" href="../Compositional/#plfa_plfa-part3-Compositional-19470" class="Bound">N</a>
<a id="plfa_plfa-part3-Compositional-19492" href="../Compositional/#plfa_plfa-part3-Compositional-19359" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19497" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19498" href="../Compositional/#plfa_plfa-part3-Compositional-18103" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-19508" href="../Compositional/#plfa_plfa-part3-Compositional-19508" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-19510" href="../Compositional/#plfa_plfa-part3-Compositional-19510" class="Bound">C</a><a id="plfa_plfa-part3-Compositional-19511" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19513" href="../Compositional/#plfa_plfa-part3-Compositional-19513" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19515" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-19517" href="../Compositional/#plfa_plfa-part3-Compositional-19508" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-19519" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-19521" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19522" href="../Compositional/#plfa_plfa-part3-Compositional-19359" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19527" href="../Compositional/#plfa_plfa-part3-Compositional-19510" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19529" href="../Compositional/#plfa_plfa-part3-Compositional-19513" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-19530" class="Symbol">)</a>
</pre><p>我们接下来陈述并证明组合性原则：给定两个项 <code>M</code> 和 <code>N</code>，若它们的指称相等， 那么将它们插入到任意语境 <code>C</code> 中都会产生两个指称相等的程序：</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-compositionality"></a><a id="plfa_plfa-part3-Compositional-19857" href="../Compositional/#plfa_plfa-part3-Compositional-19857" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-19874" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19876" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-19878" href="../Compositional/#plfa_plfa-part3-Compositional-19878" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19880" href="../Compositional/#plfa_plfa-part3-Compositional-19880" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-19881" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-19883" href="../Compositional/#plfa_plfa-part3-Compositional-19883" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19885" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19887" href="../Compositional/#plfa_plfa-part3-Compositional-17930" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-19891" href="../Compositional/#plfa_plfa-part3-Compositional-19878" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19893" href="../Compositional/#plfa_plfa-part3-Compositional-19880" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-19894" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-19896" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-19897" href="../Compositional/#plfa_plfa-part3-Compositional-19897" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19899" href="../Compositional/#plfa_plfa-part3-Compositional-19899" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-19901" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-19903" href="../Compositional/#plfa_plfa-part3-Compositional-19878" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-19905" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-19907" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-19908" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-19912" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19914" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19916" href="../Compositional/#plfa_plfa-part3-Compositional-19897" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-19918" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-19920" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19922" href="../Compositional/#plfa_plfa-part3-Compositional-19899" class="Bound">N</a>
    <a id="plfa_plfa-part3-Compositional-19928" class="Comment">---------------------------</a>
  <a id="plfa_plfa-part3-Compositional-19958" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-19960" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19962" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19963" href="../Compositional/#plfa_plfa-part3-Compositional-19359" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19968" href="../Compositional/#plfa_plfa-part3-Compositional-19883" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19970" href="../Compositional/#plfa_plfa-part3-Compositional-19897" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-19971" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-19973" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-19975" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-19977" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-19978" href="../Compositional/#plfa_plfa-part3-Compositional-19359" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-19983" href="../Compositional/#plfa_plfa-part3-Compositional-19883" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-19985" href="../Compositional/#plfa_plfa-part3-Compositional-19899" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-19986" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-19988" href="../Compositional/#plfa_plfa-part3-Compositional-19857" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20005" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20006" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20008" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20010" href="../Compositional/#plfa_plfa-part3-Compositional-17968" class="InductiveConstructor">ctx-hole</a><a id="plfa_plfa-part3-Compositional-20018" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20020" href="../Compositional/#plfa_plfa-part3-Compositional-20020" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-20024" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-20028" href="../Compositional/#plfa_plfa-part3-Compositional-20020" class="Bound">M≃N</a>
<a id="plfa_plfa-part3-Compositional-20032" href="../Compositional/#plfa_plfa-part3-Compositional-19857" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20049" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20050" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20052" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20054" href="../Compositional/#plfa_plfa-part3-Compositional-17996" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-20062" href="../Compositional/#plfa_plfa-part3-Compositional-20062" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20064" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20066" href="../Compositional/#plfa_plfa-part3-Compositional-20066" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-20070" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-20074" href="../Compositional/#plfa_plfa-part3-Compositional-15148" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-20083" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-20084" href="../Compositional/#plfa_plfa-part3-Compositional-19857" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20101" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20102" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20104" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20106" href="../Compositional/#plfa_plfa-part3-Compositional-20062" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20108" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20110" href="../Compositional/#plfa_plfa-part3-Compositional-20066" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-20113" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-20115" href="../Compositional/#plfa_plfa-part3-Compositional-19857" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20132" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20133" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20135" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20137" href="../Compositional/#plfa_plfa-part3-Compositional-18054" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-20147" href="../Compositional/#plfa_plfa-part3-Compositional-20147" class="Bound">C′</a> <a id="plfa_plfa-part3-Compositional-20150" href="../Compositional/#plfa_plfa-part3-Compositional-20150" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-20151" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20153" href="../Compositional/#plfa_plfa-part3-Compositional-20153" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-20157" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-20161" href="../Compositional/#plfa_plfa-part3-Compositional-16630" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-20170" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-20171" href="../Compositional/#plfa_plfa-part3-Compositional-19857" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20188" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20189" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20191" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20193" href="../Compositional/#plfa_plfa-part3-Compositional-20147" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20195" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20197" href="../Compositional/#plfa_plfa-part3-Compositional-20153" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-20200" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20202" class="Symbol">λ</a> <a id="plfa_plfa-part3-Compositional-20204" href="../Compositional/#plfa_plfa-part3-Compositional-20204" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-20206" href="../Compositional/#plfa_plfa-part3-Compositional-20206" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-20208" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20210" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-20212" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20215" href="../Compositional/#plfa_plfa-part3-Compositional-20215" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20217" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20219" href="../Compositional/#plfa_plfa-part3-Compositional-20215" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20220" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20222" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-20224" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20227" href="../Compositional/#plfa_plfa-part3-Compositional-20227" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20229" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20231" href="../Compositional/#plfa_plfa-part3-Compositional-20227" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20232" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20234" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-20236" href="../Compositional/#plfa_plfa-part3-Compositional-19857" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20253" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20254" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20256" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20258" href="../Compositional/#plfa_plfa-part3-Compositional-18103" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-20268" href="../Compositional/#plfa_plfa-part3-Compositional-20268" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-20270" href="../Compositional/#plfa_plfa-part3-Compositional-20270" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20272" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20274" href="../Compositional/#plfa_plfa-part3-Compositional-20274" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-20278" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-20282" href="../Compositional/#plfa_plfa-part3-Compositional-16630" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-20291" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20294" href="../Compositional/#plfa_plfa-part3-Compositional-20294" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-20296" href="../Compositional/#plfa_plfa-part3-Compositional-20296" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-20298" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20300" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-20302" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20305" href="../Compositional/#plfa_plfa-part3-Compositional-20305" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20307" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20309" href="../Compositional/#plfa_plfa-part3-Compositional-20305" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20310" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20312" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-20314" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-20317" href="../Compositional/#plfa_plfa-part3-Compositional-20317" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-20319" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-20321" href="../Compositional/#plfa_plfa-part3-Compositional-20317" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-20322" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20324" href="../Compositional/#plfa_plfa-part3-Compositional-853" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-20325" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-20327" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-20328" href="../Compositional/#plfa_plfa-part3-Compositional-19857" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-20345" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-20346" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-20348" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-20350" href="../Compositional/#plfa_plfa-part3-Compositional-20270" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-20352" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-20354" href="../Compositional/#plfa_plfa-part3-Compositional-20274" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-20357" class="Symbol">)</a>
</pre><p>它可以通过直接对语境 <code>C</code> 进行归纳，用我们之前建立的合同性质 <code>lam-cong</code> 和 <code>app-cong</code> 来证明。</p><h2 id="指称语义作为函数来定义">指称语义作为函数来定义</h2><p>建立了 <code>var-equiv</code>、<code>lam-equiv</code> 和 <code>app-equiv</code> 三个等式后， 我们就能将指称语义定义为一个在输入项 <code>M</code> 上递归的函数。其实， 我们可以定义以下函数 <code>⟦ M ⟧</code>，利用辅助的柯里化函数 <code>ℱ</code>， 并分别在 λ-抽象和应用的情况下应用 <code>●</code> 函数来将项映射到指称。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-⟦_⟧"></a><a id="plfa_plfa-part3-Compositional-21210" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟦_⟧</a> <a id="plfa_plfa-part3-Compositional-21214" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21216" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-21218" href="../Compositional/#plfa_plfa-part3-Compositional-21218" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21219" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21221" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-21223" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21224" href="../Compositional/#plfa_plfa-part3-Compositional-21224" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21226" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21228" href="../Compositional/#plfa_plfa-part3-Compositional-21218" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-21230" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-21232" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-21233" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-21235" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-21237" href="../Denotational/#plfa_plfa-part3-Denotational-22000" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-21248" href="../Compositional/#plfa_plfa-part3-Compositional-21218" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-21250" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21252" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-21254" href="../Compositional/#plfa_plfa-part3-Compositional-21254" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-21256" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21258" href="../Compositional/#plfa_plfa-part3-Compositional-21258" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-21260" href="../Compositional/#plfa_plfa-part3-Compositional-21260" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-21262" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21264" href="../Compositional/#plfa_plfa-part3-Compositional-21260" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-21266" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-21268" href="../Compositional/#plfa_plfa-part3-Compositional-21258" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-21270" href="../Compositional/#plfa_plfa-part3-Compositional-21254" class="Bound">x</a>
<a id="plfa_plfa-part3-Compositional-21272" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21274" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21276" href="../Compositional/#plfa_plfa-part3-Compositional-21276" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21278" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21280" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21282" href="../Compositional/#plfa_plfa-part3-Compositional-2282" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-21284" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21286" href="../Compositional/#plfa_plfa-part3-Compositional-21276" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21288" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟧</a>
<a id="plfa_plfa-part3-Compositional-21290" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21292" href="../Compositional/#plfa_plfa-part3-Compositional-21292" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21294" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21296" href="../Compositional/#plfa_plfa-part3-Compositional-21296" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21298" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21300" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21302" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21304" href="../Compositional/#plfa_plfa-part3-Compositional-21292" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21306" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21308" href="../Compositional/#plfa_plfa-part3-Compositional-6966" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-21310" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21312" href="../Compositional/#plfa_plfa-part3-Compositional-21296" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21314" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟧</a>
</pre><p><code>ℰ M</code> 和 <code>⟦ M ⟧</code> 指称相等的证明可通过 <code>var-equiv</code>、<code>lam-equiv</code> 和 <code>app-equiv</code> 三个等式以及 <code>ℱ</code> 和 <code>●</code> 的合同性引理直接归纳得出。</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰ≃⟦⟧"></a><a id="plfa_plfa-part3-Compositional-21645" href="../Compositional/#plfa_plfa-part3-Compositional-21645" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21650" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21652" class="Symbol">∀</a> <a id="plfa_plfa-part3-Compositional-21654" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21655" href="../Compositional/#plfa_plfa-part3-Compositional-21655" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21656" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21658" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21659" href="../Compositional/#plfa_plfa-part3-Compositional-21659" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21661" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-21663" href="../Compositional/#plfa_plfa-part3-Compositional-21655" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-21665" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-21667" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-21668" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21670" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-21672" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21674" href="../Compositional/#plfa_plfa-part3-Compositional-21659" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21676" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-21678" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21680" href="../Compositional/#plfa_plfa-part3-Compositional-21659" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21682" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟧</a>
<a id="plfa_plfa-part3-Compositional-21684" href="../Compositional/#plfa_plfa-part3-Compositional-21645" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21689" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21690" href="../Compositional/#plfa_plfa-part3-Compositional-21690" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21691" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21693" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21694" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-21696" href="../Compositional/#plfa_plfa-part3-Compositional-21696" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-21697" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21699" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21701" href="../Compositional/#plfa_plfa-part3-Compositional-13227" class="Function">var-equiv</a>
<a id="plfa_plfa-part3-Compositional-21711" href="../Compositional/#plfa_plfa-part3-Compositional-21645" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21716" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21717" href="../Compositional/#plfa_plfa-part3-Compositional-21717" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21718" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21720" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21721" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21723" href="../Compositional/#plfa_plfa-part3-Compositional-21723" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21724" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21726" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-21730" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-21734" href="../Compositional/#plfa_plfa-part3-Compositional-21734" class="Bound">ih</a> <a id="plfa_plfa-part3-Compositional-21737" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21739" href="../Compositional/#plfa_plfa-part3-Compositional-21645" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21744" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21745" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21747" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21749" href="../Compositional/#plfa_plfa-part3-Compositional-21723" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21750" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21752" class="Keyword">in</a>
    <a id="plfa_plfa-part3-Compositional-21759" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21761" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21762" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21764" href="../Compositional/#plfa_plfa-part3-Compositional-21723" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21765" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-21769" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21772" href="../Compositional/#plfa_plfa-part3-Compositional-5291" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-21782" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-21788" href="../Compositional/#plfa_plfa-part3-Compositional-2282" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-21790" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21791" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21793" href="../Compositional/#plfa_plfa-part3-Compositional-21723" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21794" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-21798" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21801" href="../Compositional/#plfa_plfa-part3-Compositional-14364" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-21808" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21809" href="../Compositional/#plfa_plfa-part3-Compositional-21645" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21814" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21815" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21817" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21819" href="../Compositional/#plfa_plfa-part3-Compositional-21723" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-21820" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-21823" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-21829" href="../Compositional/#plfa_plfa-part3-Compositional-2282" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-21831" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21833" href="../Compositional/#plfa_plfa-part3-Compositional-21723" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21835" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-21839" href="../Denotational/#plfa_plfa-part3-Denotational-23784" class="Function Operator">≃⟨⟩</a>
    <a id="plfa_plfa-part3-Compositional-21847" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21849" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-21851" href="../Compositional/#plfa_plfa-part3-Compositional-21723" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-21853" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-21857" href="../Denotational/#plfa_plfa-part3-Denotational-23891" class="Function Operator">☐</a>
<a id="plfa_plfa-part3-Compositional-21859" href="../Compositional/#plfa_plfa-part3-Compositional-21645" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21864" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21865" href="../Compositional/#plfa_plfa-part3-Compositional-21865" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-21866" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21868" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21869" href="../Compositional/#plfa_plfa-part3-Compositional-21869" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21871" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21873" href="../Compositional/#plfa_plfa-part3-Compositional-21873" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-21874" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-21876" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Compositional-21881" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21883" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21884" href="../Compositional/#plfa_plfa-part3-Compositional-21869" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21886" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21888" href="../Compositional/#plfa_plfa-part3-Compositional-21873" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-21889" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-21893" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21896" href="../Compositional/#plfa_plfa-part3-Compositional-12549" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-21906" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
   <a id="plfa_plfa-part3-Compositional-21911" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21913" href="../Compositional/#plfa_plfa-part3-Compositional-21869" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21915" href="../Compositional/#plfa_plfa-part3-Compositional-6966" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-21917" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-21919" href="../Compositional/#plfa_plfa-part3-Compositional-21873" class="Bound">M</a>
  <a id="plfa_plfa-part3-Compositional-21923" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-21926" href="../Compositional/#plfa_plfa-part3-Compositional-15774" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-21933" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21934" href="../Compositional/#plfa_plfa-part3-Compositional-21645" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21939" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21940" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21942" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21944" href="../Compositional/#plfa_plfa-part3-Compositional-21869" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-21945" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-21948" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-21949" href="../Compositional/#plfa_plfa-part3-Compositional-21645" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-21954" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-21955" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-21957" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-21959" href="../Compositional/#plfa_plfa-part3-Compositional-21873" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-21960" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-21963" href="../Denotational/#plfa_plfa-part3-Denotational-23644" class="Function Operator">⟩</a>
   <a id="plfa_plfa-part3-Compositional-21968" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21970" href="../Compositional/#plfa_plfa-part3-Compositional-21869" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21972" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-21974" href="../Compositional/#plfa_plfa-part3-Compositional-6966" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-21976" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21978" href="../Compositional/#plfa_plfa-part3-Compositional-21873" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-21980" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-21984" href="../Denotational/#plfa_plfa-part3-Denotational-23784" class="Function Operator">≃⟨⟩</a>
    <a id="plfa_plfa-part3-Compositional-21992" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-21994" href="../Compositional/#plfa_plfa-part3-Compositional-21869" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-21996" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-21998" href="../Compositional/#plfa_plfa-part3-Compositional-21873" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-22000" href="../Compositional/#plfa_plfa-part3-Compositional-21210" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-22004" href="../Denotational/#plfa_plfa-part3-Denotational-23891" class="Function Operator">☐</a>
</pre><h2 id="unicode">Unicode</h2><p>本章使用了以下 Unicode：</p><pre><code>ℱ  U+2131  SCRIPT CAPITAL F (\McF)
●  U+2131  BLACK CIRCLE (\cib)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Denotational/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Compositional.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Soundness/">下一章</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">编程语言基础：Agda 描述</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>