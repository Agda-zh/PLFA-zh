<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>编程语言基础：Agda 描述 – Compositional</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">编程语言基础：Agda 描述</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">主页</a> <a class="page-link" href="../Announcements/">公告</a> <a class="page-link" href="../GettingStarted/">使用说明</a> <a class="page-link" href="../Citing/">引用</a> <a class="page-link" href="https://plfa.github.io/">English</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Denotational/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Compositional.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Soundness/">下一章</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Compositional: The denotational semantics is compositional</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part3-Compositional-119" class="Keyword">module</a> <a id="plfa_plfa-part3-Compositional-126" href="../Compositional/#" class="Module">plfa.part3.Compositional</a> <a id="plfa_plfa-part3-Compositional-151" class="Keyword">where</a>
</pre><h2 id="introduction">Introduction</h2><p>In this chapter we prove that the denotational semantics is compositional, which means we fill in the ellipses in the following equations.</p><pre><code>ℰ (` x) ≃ ...
ℰ (ƛ M) ≃ ... ℰ M ...
ℰ (M · N) ≃ ... ℰ M ... ℰ N ...</code></pre><p>Such equations would imply that the denotational semantics could be instead defined as a recursive function. Indeed, we end this chapter with such a definition and prove that it is equivalent to ℰ.</p><h2 id="imports">Imports</h2><pre class="Agda"><a id="plfa_plfa-part3-Compositional-620" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-625" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-632" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html" class="Module">Data.Product</a> <a id="plfa_plfa-part3-Compositional-645" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-651" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-652" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">_×_</a><a id="plfa_plfa-part3-Compositional-655" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-657" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="plfa_plfa-part3-Compositional-658" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-660" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ-syntax</a><a id="plfa_plfa-part3-Compositional-668" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-670" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1369" class="Function">∃</a><a id="plfa_plfa-part3-Compositional-671" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-673" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1806" class="Function">∃-syntax</a><a id="plfa_plfa-part3-Compositional-681" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-683" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a><a id="plfa_plfa-part3-Compositional-688" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-690" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a><a id="plfa_plfa-part3-Compositional-695" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-699" class="Keyword">renaming</a> <a id="plfa_plfa-part3-Compositional-708" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-709" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part3-Compositional-713" class="Symbol">to</a> <a id="plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part3-Compositional-721" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-723" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-728" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-735" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.html" class="Module">Data.Sum</a> <a id="plfa_plfa-part3-Compositional-744" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-750" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-751" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#734" class="Datatype Operator">_⊎_</a><a id="plfa_plfa-part3-Compositional-754" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-756" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a><a id="plfa_plfa-part3-Compositional-760" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-762" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a><a id="plfa_plfa-part3-Compositional-766" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-768" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-773" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-780" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Unit.html" class="Module">Data.Unit</a> <a id="plfa_plfa-part3-Compositional-790" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-796" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-797" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#158" class="Record">⊤</a><a id="plfa_plfa-part3-Compositional-798" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-800" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a><a id="plfa_plfa-part3-Compositional-802" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-804" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-809" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-816" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
  <a id="plfa_plfa-part3-Compositional-837" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-843" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-844" href="../Untyped/#plfa_plfa-part2-Untyped-3848" class="Datatype">Context</a><a id="plfa_plfa-part3-Compositional-851" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-853" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part3-Compositional-856" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-858" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-859" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-861" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part3-Compositional-864" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-866" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part3-Compositional-869" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-871" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part3-Compositional-873" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-875" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part3-Compositional-877" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-879" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part3-Compositional-882" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-884" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-889" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-896" href="../Denotational/#" class="Module">plfa.part3.Denotational</a>
  <a id="plfa_plfa-part3-Compositional-922" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-928" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-929" href="../Denotational/#plfa_plfa-part3-Denotational-4969" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-934" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-936" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">_↦_</a><a id="plfa_plfa-part3-Compositional-939" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-941" href="../Denotational/#plfa_plfa-part3-Denotational-8930" class="Function Operator">_`,_</a><a id="plfa_plfa-part3-Compositional-945" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-947" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">_⊔_</a><a id="plfa_plfa-part3-Compositional-950" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-952" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-953" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-955" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">_⊑_</a><a id="plfa_plfa-part3-Compositional-958" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-960" href="../Denotational/#plfa_plfa-part3-Denotational-11466" class="Datatype Operator">_⊢_↓_</a><a id="plfa_plfa-part3-Compositional-965" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-976" href="../Denotational/#plfa_plfa-part3-Denotational-5471" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-981" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-983" href="../Denotational/#plfa_plfa-part3-Denotational-5797" class="InductiveConstructor">⊑-fun</a><a id="plfa_plfa-part3-Compositional-988" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-990" href="../Denotational/#plfa_plfa-part3-Denotational-5496" class="InductiveConstructor">⊑-conj-L</a><a id="plfa_plfa-part3-Compositional-998" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1000" href="../Denotational/#plfa_plfa-part3-Denotational-5580" class="InductiveConstructor">⊑-conj-R1</a><a id="plfa_plfa-part3-Compositional-1009" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1011" href="../Denotational/#plfa_plfa-part3-Denotational-5653" class="InductiveConstructor">⊑-conj-R2</a><a id="plfa_plfa-part3-Compositional-1020" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1031" href="../Denotational/#plfa_plfa-part3-Denotational-5900" class="InductiveConstructor">⊑-dist</a><a id="plfa_plfa-part3-Compositional-1037" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1039" href="../Denotational/#plfa_plfa-part3-Denotational-6832" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Compositional-1045" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1047" href="../Denotational/#plfa_plfa-part3-Denotational-5726" class="InductiveConstructor">⊑-trans</a><a id="plfa_plfa-part3-Compositional-1054" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1056" href="../Denotational/#plfa_plfa-part3-Denotational-7612" class="Function">⊔↦⊔-dist</a><a id="plfa_plfa-part3-Compositional-1064" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1075" href="../Denotational/#plfa_plfa-part3-Denotational-11520" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Compositional-1078" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1080" href="../Denotational/#plfa_plfa-part3-Denotational-11717" class="InductiveConstructor">↦-intro</a><a id="plfa_plfa-part3-Compositional-1087" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1089" href="../Denotational/#plfa_plfa-part3-Denotational-11595" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Compositional-1095" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1097" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Compositional-1104" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1106" href="../Denotational/#plfa_plfa-part3-Denotational-11829" class="InductiveConstructor">⊥-intro</a><a id="plfa_plfa-part3-Compositional-1113" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1115" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a><a id="plfa_plfa-part3-Compositional-1118" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1129" href="../Denotational/#plfa_plfa-part3-Denotational-32866" class="Function">up-env</a><a id="plfa_plfa-part3-Compositional-1135" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1137" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a><a id="plfa_plfa-part3-Compositional-1138" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1140" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">_≃_</a><a id="plfa_plfa-part3-Compositional-1143" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1145" href="../Denotational/#plfa_plfa-part3-Denotational-22805" class="Function">≃-sym</a><a id="plfa_plfa-part3-Compositional-1150" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1152" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a><a id="plfa_plfa-part3-Compositional-1162" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1164" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a><a id="plfa_plfa-part3-Compositional-1167" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-1169" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-1174" href="../Denotational/#plfa_plfa-part3-Denotational-23473" class="Module">plfa.part3.Denotational.≃-Reasoning</a>
</pre><h2 id="equation-for-lambda-abstraction">Equation for lambda abstraction</h2><p>Regarding the first equation</p><pre><code>ℰ (ƛ M) ≃ ... ℰ M ...</code></pre><p>we need to define a function that maps a <code>Denotation (Γ , ★)</code> to a <code>Denotation Γ</code>. This function, let us name it <code>ℱ</code>, should mimic the non-recursive part of the semantics when applied to a lambda term. In particular, we need to consider the rules <code>↦-intro</code>, <code>⊥-intro</code>, and <code>⊔-intro</code>. So <code>ℱ</code> has three parameters, the denotation <code>D</code> of the subterm <code>M</code>, an environment <code>γ</code>, and a value <code>v</code>. If we define <code>ℱ</code> by recursion on the value <code>v</code>, then it matches up nicely with the three rules <code>↦-intro</code>, <code>⊥-intro</code>, and <code>⊔-intro</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱ"></a><a id="plfa_plfa-part3-Compositional-1840" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1842" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-1844" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-1846" href="../Compositional/#plfa_plfa-part3-Compositional-1846" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-1847" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-1849" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-1851" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-1862" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1863" href="../Compositional/#plfa_plfa-part3-Compositional-1846" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-1865" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-1867" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-1868" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-1870" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-1872" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-1883" href="../Compositional/#plfa_plfa-part3-Compositional-1846" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-1885" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1887" href="../Compositional/#plfa_plfa-part3-Compositional-1887" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1889" href="../Compositional/#plfa_plfa-part3-Compositional-1889" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1891" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1892" href="../Compositional/#plfa_plfa-part3-Compositional-1892" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-1894" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-1896" href="../Compositional/#plfa_plfa-part3-Compositional-1896" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-1897" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-1899" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-1901" href="../Compositional/#plfa_plfa-part3-Compositional-1887" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1903" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1904" href="../Compositional/#plfa_plfa-part3-Compositional-1889" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1906" href="../Denotational/#plfa_plfa-part3-Denotational-8930" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-1909" href="../Compositional/#plfa_plfa-part3-Compositional-1892" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-1910" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-1912" href="../Compositional/#plfa_plfa-part3-Compositional-1896" class="Bound">w</a>
<a id="plfa_plfa-part3-Compositional-1914" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1916" href="../Compositional/#plfa_plfa-part3-Compositional-1916" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1918" href="../Compositional/#plfa_plfa-part3-Compositional-1918" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1920" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Compositional-1922" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-1924" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#158" class="Record">⊤</a>
<a id="plfa_plfa-part3-Compositional-1926" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1928" href="../Compositional/#plfa_plfa-part3-Compositional-1928" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1930" href="../Compositional/#plfa_plfa-part3-Compositional-1930" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1932" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1933" href="../Compositional/#plfa_plfa-part3-Compositional-1933" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-1935" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-1937" href="../Compositional/#plfa_plfa-part3-Compositional-1937" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-1938" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-1940" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-1942" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1943" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1945" href="../Compositional/#plfa_plfa-part3-Compositional-1928" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1947" href="../Compositional/#plfa_plfa-part3-Compositional-1930" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1949" href="../Compositional/#plfa_plfa-part3-Compositional-1933" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-1950" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-1952" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Compositional-1954" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1955" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1957" href="../Compositional/#plfa_plfa-part3-Compositional-1928" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1959" href="../Compositional/#plfa_plfa-part3-Compositional-1930" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1961" href="../Compositional/#plfa_plfa-part3-Compositional-1937" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-1962" class="Symbol">)</a>
</pre><p>If one squints hard enough, the <code>ℱ</code> function starts to look like the <code>curry</code> operation familiar to functional programmers. It turns a function that expects a tuple of length <code>n + 1</code> (the environment <code>Γ , ★</code>) into a function that expects a tuple of length <code>n</code> and returns a function of one parameter.</p><p>Using this <code>ℱ</code>, we hope to prove that</p><pre><code>ℰ (ƛ N) ≃ ℱ (ℰ N)</code></pre><p>The function <code>ℱ</code> is preserved when going from a larger value <code>v</code> to a smaller value <code>u</code>. The proof is a straightforward induction on the derivation of <code>u ⊑ v</code>, using the <code>up-env</code> lemma in the case for the <code>⊑-fun</code> rule.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-sub-ℱ"></a><a id="plfa_plfa-part3-Compositional-2560" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2566" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-2568" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-2570" href="../Compositional/#plfa_plfa-part3-Compositional-2570" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-2571" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-2573" href="../Compositional/#plfa_plfa-part3-Compositional-2573" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-2575" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-2577" href="../Compositional/#plfa_plfa-part3-Compositional-2570" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-2579" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-2581" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-2583" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-2585" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-2586" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-2588" href="../Compositional/#plfa_plfa-part3-Compositional-2588" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2590" href="../Compositional/#plfa_plfa-part3-Compositional-2590" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-2592" href="../Compositional/#plfa_plfa-part3-Compositional-2592" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-2593" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-2597" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2599" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2601" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2602" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-2604" href="../Compositional/#plfa_plfa-part3-Compositional-2573" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-2605" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2607" href="../Compositional/#plfa_plfa-part3-Compositional-2588" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2609" href="../Compositional/#plfa_plfa-part3-Compositional-2590" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-2613" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2615" href="../Compositional/#plfa_plfa-part3-Compositional-2592" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-2617" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-2619" href="../Compositional/#plfa_plfa-part3-Compositional-2590" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-2625" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-2640" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2642" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2644" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2645" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-2647" href="../Compositional/#plfa_plfa-part3-Compositional-2573" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-2648" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2650" href="../Compositional/#plfa_plfa-part3-Compositional-2588" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2652" href="../Compositional/#plfa_plfa-part3-Compositional-2592" class="Bound">u</a>
<a id="plfa_plfa-part3-Compositional-2654" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2660" href="../Compositional/#plfa_plfa-part3-Compositional-2660" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2662" href="../Denotational/#plfa_plfa-part3-Denotational-5471" class="InductiveConstructor">⊑-bot</a> <a id="plfa_plfa-part3-Compositional-2668" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2670" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a>
<a id="plfa_plfa-part3-Compositional-2673" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2679" href="../Compositional/#plfa_plfa-part3-Compositional-2679" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2681" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2682" href="../Denotational/#plfa_plfa-part3-Denotational-5797" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-2688" href="../Compositional/#plfa_plfa-part3-Compositional-2688" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-2691" href="../Compositional/#plfa_plfa-part3-Compositional-2691" class="Bound">lt′</a><a id="plfa_plfa-part3-Compositional-2694" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2696" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2698" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-2702" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2703" href="../Denotational/#plfa_plfa-part3-Denotational-32866" class="Function">up-env</a> <a id="plfa_plfa-part3-Compositional-2710" href="../Compositional/#plfa_plfa-part3-Compositional-2679" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2712" href="../Compositional/#plfa_plfa-part3-Compositional-2688" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-2714" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2716" href="../Compositional/#plfa_plfa-part3-Compositional-2691" class="Bound">lt′</a>
<a id="plfa_plfa-part3-Compositional-2720" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2726" href="../Compositional/#plfa_plfa-part3-Compositional-2726" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2728" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2729" href="../Denotational/#plfa_plfa-part3-Denotational-5496" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-2738" href="../Compositional/#plfa_plfa-part3-Compositional-2738" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-2741" href="../Compositional/#plfa_plfa-part3-Compositional-2741" class="Bound">lt₁</a><a id="plfa_plfa-part3-Compositional-2744" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2746" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2748" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-2750" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2756" href="../Compositional/#plfa_plfa-part3-Compositional-2726" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2758" href="../Compositional/#plfa_plfa-part3-Compositional-2738" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-2761" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-2763" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2769" href="../Compositional/#plfa_plfa-part3-Compositional-2726" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2771" href="../Compositional/#plfa_plfa-part3-Compositional-2741" class="Bound">lt₁</a> <a id="plfa_plfa-part3-Compositional-2775" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-2777" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2783" href="../Compositional/#plfa_plfa-part3-Compositional-2783" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2785" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2786" href="../Denotational/#plfa_plfa-part3-Denotational-5580" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Compositional-2796" href="../Compositional/#plfa_plfa-part3-Compositional-2796" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-2798" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2800" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2802" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2808" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2809" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-2815" href="../Compositional/#plfa_plfa-part3-Compositional-2783" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-2816" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2818" href="../Compositional/#plfa_plfa-part3-Compositional-2796" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-2821" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2827" href="../Compositional/#plfa_plfa-part3-Compositional-2827" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2829" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2830" href="../Denotational/#plfa_plfa-part3-Denotational-5653" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Compositional-2840" href="../Compositional/#plfa_plfa-part3-Compositional-2840" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-2842" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2844" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2846" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2852" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2853" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="plfa_plfa-part3-Compositional-2859" href="../Compositional/#plfa_plfa-part3-Compositional-2827" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-2860" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2862" href="../Compositional/#plfa_plfa-part3-Compositional-2840" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-2865" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2871" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-2872" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-2874" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2876" href="../Compositional/#plfa_plfa-part3-Compositional-2876" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-2879" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-2881" href="../Compositional/#plfa_plfa-part3-Compositional-2881" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-2884" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-2886" href="../Compositional/#plfa_plfa-part3-Compositional-2876" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-2889" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-2891" href="../Compositional/#plfa_plfa-part3-Compositional-2891" class="Bound">v₃</a><a id="plfa_plfa-part3-Compositional-2893" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-2895" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-2896" href="../Compositional/#plfa_plfa-part3-Compositional-2876" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-2899" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-2901" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2902" href="../Compositional/#plfa_plfa-part3-Compositional-2881" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-2905" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-2907" href="../Compositional/#plfa_plfa-part3-Compositional-2891" class="Bound">v₃</a><a id="plfa_plfa-part3-Compositional-2909" class="Symbol">)}</a> <a id="plfa_plfa-part3-Compositional-2912" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-2914" href="../Compositional/#plfa_plfa-part3-Compositional-2914" class="Bound">N2</a> <a id="plfa_plfa-part3-Compositional-2917" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-2919" href="../Compositional/#plfa_plfa-part3-Compositional-2919" class="Bound">N3</a> <a id="plfa_plfa-part3-Compositional-2922" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-2924" href="../Denotational/#plfa_plfa-part3-Denotational-5900" class="InductiveConstructor">⊑-dist</a> <a id="plfa_plfa-part3-Compositional-2931" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Compositional-2936" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-2944" href="../Compositional/#plfa_plfa-part3-Compositional-2914" class="Bound">N2</a> <a id="plfa_plfa-part3-Compositional-2947" href="../Compositional/#plfa_plfa-part3-Compositional-2919" class="Bound">N3</a>
<a id="plfa_plfa-part3-Compositional-2950" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2956" href="../Compositional/#plfa_plfa-part3-Compositional-2956" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2958" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2959" href="../Denotational/#plfa_plfa-part3-Denotational-5726" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-2967" href="../Compositional/#plfa_plfa-part3-Compositional-2967" class="Bound">x₁</a> <a id="plfa_plfa-part3-Compositional-2970" href="../Compositional/#plfa_plfa-part3-Compositional-2970" class="Bound">x₂</a><a id="plfa_plfa-part3-Compositional-2972" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2974" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2976" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2982" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2983" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2989" href="../Compositional/#plfa_plfa-part3-Compositional-2956" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2991" href="../Compositional/#plfa_plfa-part3-Compositional-2970" class="Bound">x₂</a><a id="plfa_plfa-part3-Compositional-2993" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2995" href="../Compositional/#plfa_plfa-part3-Compositional-2967" class="Bound">x₁</a>
</pre><p>With this subsumption property in hand, we can prove the forward direction of the semantic equation for lambda. The proof is by induction on the semantics, using <code>sub-ℱ</code> in the case for the <code>sub</code> rule.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰƛ→ℱℰ"></a><a id="plfa_plfa-part3-Compositional-3215" href="../Compositional/#plfa_plfa-part3-Compositional-3215" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3221" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3223" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-3225" href="../Compositional/#plfa_plfa-part3-Compositional-3225" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3226" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3228" href="../Compositional/#plfa_plfa-part3-Compositional-3228" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3230" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3232" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-3236" href="../Compositional/#plfa_plfa-part3-Compositional-3225" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3237" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3239" href="../Compositional/#plfa_plfa-part3-Compositional-3239" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3241" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3243" href="../Compositional/#plfa_plfa-part3-Compositional-3225" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-3245" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3247" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-3249" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3251" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-3252" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3254" href="../Compositional/#plfa_plfa-part3-Compositional-3254" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-3256" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3258" href="../Denotational/#plfa_plfa-part3-Denotational-4969" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-3263" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-3267" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3269" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-3271" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3272" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-3274" href="../Compositional/#plfa_plfa-part3-Compositional-3239" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-3275" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3277" href="../Compositional/#plfa_plfa-part3-Compositional-3228" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3279" href="../Compositional/#plfa_plfa-part3-Compositional-3254" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-3285" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-3300" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3302" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-3304" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3305" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-3307" href="../Compositional/#plfa_plfa-part3-Compositional-3239" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-3308" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3310" href="../Compositional/#plfa_plfa-part3-Compositional-3228" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3312" href="../Compositional/#plfa_plfa-part3-Compositional-3254" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-3314" href="../Compositional/#plfa_plfa-part3-Compositional-3215" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3320" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3321" href="../Denotational/#plfa_plfa-part3-Denotational-11717" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Compositional-3329" href="../Compositional/#plfa_plfa-part3-Compositional-3329" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-3330" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3332" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3334" href="../Compositional/#plfa_plfa-part3-Compositional-3329" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-3336" href="../Compositional/#plfa_plfa-part3-Compositional-3215" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3342" href="../Denotational/#plfa_plfa-part3-Denotational-11829" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-3350" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3352" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a>
<a id="plfa_plfa-part3-Compositional-3355" href="../Compositional/#plfa_plfa-part3-Compositional-3215" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3361" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3362" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-3370" href="../Compositional/#plfa_plfa-part3-Compositional-3370" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-3373" href="../Compositional/#plfa_plfa-part3-Compositional-3373" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-3375" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3377" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3379" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-3381" href="../Compositional/#plfa_plfa-part3-Compositional-3215" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3387" href="../Compositional/#plfa_plfa-part3-Compositional-3370" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-3390" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3392" href="../Compositional/#plfa_plfa-part3-Compositional-3215" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3398" href="../Compositional/#plfa_plfa-part3-Compositional-3373" class="Bound">d₂</a> <a id="plfa_plfa-part3-Compositional-3401" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-3403" href="../Compositional/#plfa_plfa-part3-Compositional-3215" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3409" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3410" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-3414" href="../Compositional/#plfa_plfa-part3-Compositional-3414" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3416" href="../Compositional/#plfa_plfa-part3-Compositional-3416" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3418" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3420" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3422" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3428" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3429" href="../Compositional/#plfa_plfa-part3-Compositional-3215" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3435" href="../Compositional/#plfa_plfa-part3-Compositional-3414" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-3436" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3438" href="../Compositional/#plfa_plfa-part3-Compositional-3416" class="Bound">lt</a>
</pre><p>The “inversion lemma” for lambda abstraction is a special case of the above. The inversion lemma is useful in proving that denotations are preserved by reduction.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lambda-inversion"></a><a id="plfa_plfa-part3-Compositional-3618" href="../Compositional/#plfa_plfa-part3-Compositional-3618" class="Function">lambda-inversion</a> <a id="plfa_plfa-part3-Compositional-3635" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3637" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-3639" href="../Compositional/#plfa_plfa-part3-Compositional-3639" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3640" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3642" href="../Compositional/#plfa_plfa-part3-Compositional-3642" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3644" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3646" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-3650" href="../Compositional/#plfa_plfa-part3-Compositional-3639" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3651" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3653" href="../Compositional/#plfa_plfa-part3-Compositional-3653" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3655" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3657" href="../Compositional/#plfa_plfa-part3-Compositional-3639" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-3659" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3661" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-3663" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3665" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-3666" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3668" href="../Compositional/#plfa_plfa-part3-Compositional-3668" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3671" href="../Compositional/#plfa_plfa-part3-Compositional-3671" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-3674" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3676" href="../Denotational/#plfa_plfa-part3-Denotational-4969" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-3681" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-3685" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3687" href="../Compositional/#plfa_plfa-part3-Compositional-3642" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3689" href="../Denotational/#plfa_plfa-part3-Denotational-11466" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3691" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-3693" href="../Compositional/#plfa_plfa-part3-Compositional-3653" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3695" href="../Denotational/#plfa_plfa-part3-Denotational-11466" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Compositional-3697" href="../Compositional/#plfa_plfa-part3-Compositional-3668" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3700" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3702" href="../Compositional/#plfa_plfa-part3-Compositional-3671" class="Bound">v₂</a>
    <a id="plfa_plfa-part3-Compositional-3709" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Compositional-3729" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3731" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3732" href="../Compositional/#plfa_plfa-part3-Compositional-3642" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3734" href="../Denotational/#plfa_plfa-part3-Denotational-8930" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-3737" href="../Compositional/#plfa_plfa-part3-Compositional-3668" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-3739" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3741" href="../Denotational/#plfa_plfa-part3-Denotational-11466" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3743" href="../Compositional/#plfa_plfa-part3-Compositional-3653" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3745" href="../Denotational/#plfa_plfa-part3-Denotational-11466" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Compositional-3747" href="../Compositional/#plfa_plfa-part3-Compositional-3671" class="Bound">v₂</a>
<a id="plfa_plfa-part3-Compositional-3750" href="../Compositional/#plfa_plfa-part3-Compositional-3618" class="Function">lambda-inversion</a><a id="plfa_plfa-part3-Compositional-3766" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-3767" class="Argument">v₁</a> <a id="plfa_plfa-part3-Compositional-3770" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3772" href="../Compositional/#plfa_plfa-part3-Compositional-3772" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-3774" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3776" class="Argument">v₂</a> <a id="plfa_plfa-part3-Compositional-3779" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3781" href="../Compositional/#plfa_plfa-part3-Compositional-3781" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-3783" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-3785" href="../Compositional/#plfa_plfa-part3-Compositional-3785" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3787" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3789" href="../Compositional/#plfa_plfa-part3-Compositional-3215" class="Function">ℰƛ→ℱℰ</a><a id="plfa_plfa-part3-Compositional-3794" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-3795" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-3797" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3799" href="../Compositional/#plfa_plfa-part3-Compositional-3772" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3802" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3804" href="../Compositional/#plfa_plfa-part3-Compositional-3781" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-3806" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-3808" href="../Compositional/#plfa_plfa-part3-Compositional-3785" class="Bound">d</a>
</pre><p>The backward direction of the semantic equation for lambda is even easier to prove than the forward direction. We proceed by induction on the value v.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱℰ→ℰƛ"></a><a id="plfa_plfa-part3-Compositional-3975" href="../Compositional/#plfa_plfa-part3-Compositional-3975" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-3981" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3983" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-3985" href="../Compositional/#plfa_plfa-part3-Compositional-3985" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3986" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3988" href="../Compositional/#plfa_plfa-part3-Compositional-3988" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3990" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3992" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-3996" href="../Compositional/#plfa_plfa-part3-Compositional-3985" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3997" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3999" href="../Compositional/#plfa_plfa-part3-Compositional-3999" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4001" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4003" href="../Compositional/#plfa_plfa-part3-Compositional-3985" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4005" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4007" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4009" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4011" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4012" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4014" href="../Compositional/#plfa_plfa-part3-Compositional-4014" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-4016" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4018" href="../Denotational/#plfa_plfa-part3-Denotational-4969" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4023" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4027" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4029" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-4031" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4032" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4034" href="../Compositional/#plfa_plfa-part3-Compositional-3999" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4035" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4037" href="../Compositional/#plfa_plfa-part3-Compositional-3988" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4039" href="../Compositional/#plfa_plfa-part3-Compositional-4014" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-4045" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-4060" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4062" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4064" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4065" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4067" href="../Compositional/#plfa_plfa-part3-Compositional-3999" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4068" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4070" href="../Compositional/#plfa_plfa-part3-Compositional-3988" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4072" href="../Compositional/#plfa_plfa-part3-Compositional-4014" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-4074" href="../Compositional/#plfa_plfa-part3-Compositional-3975" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4080" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4081" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4083" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4085" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-4086" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4088" href="../Compositional/#plfa_plfa-part3-Compositional-4088" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4090" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4092" href="../Denotational/#plfa_plfa-part3-Denotational-11829" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Compositional-4100" href="../Compositional/#plfa_plfa-part3-Compositional-3975" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4106" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4107" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4109" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4111" href="../Compositional/#plfa_plfa-part3-Compositional-4111" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4114" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-4116" href="../Compositional/#plfa_plfa-part3-Compositional-4116" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4118" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4120" href="../Compositional/#plfa_plfa-part3-Compositional-4120" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4122" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4124" href="../Denotational/#plfa_plfa-part3-Denotational-11717" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Compositional-4132" href="../Compositional/#plfa_plfa-part3-Compositional-4120" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-4134" href="../Compositional/#plfa_plfa-part3-Compositional-3975" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4140" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4141" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4143" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4145" href="../Compositional/#plfa_plfa-part3-Compositional-4145" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4148" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-4150" href="../Compositional/#plfa_plfa-part3-Compositional-4150" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4152" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4154" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-4156" href="../Compositional/#plfa_plfa-part3-Compositional-4156" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-4159" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4161" href="../Compositional/#plfa_plfa-part3-Compositional-4161" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-4164" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-4166" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4168" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-4176" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4177" href="../Compositional/#plfa_plfa-part3-Compositional-3975" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4183" href="../Compositional/#plfa_plfa-part3-Compositional-4156" class="Bound">d1</a><a id="plfa_plfa-part3-Compositional-4185" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4187" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4188" href="../Compositional/#plfa_plfa-part3-Compositional-3975" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4194" href="../Compositional/#plfa_plfa-part3-Compositional-4161" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-4196" class="Symbol">)</a>
</pre><p>So indeed, the denotational semantics is compositional with respect to lambda abstraction, as witnessed by the function <code>ℱ</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lam-equiv"></a><a id="plfa_plfa-part3-Compositional-4337" href="../Compositional/#plfa_plfa-part3-Compositional-4337" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-4347" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4349" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4351" href="../Compositional/#plfa_plfa-part3-Compositional-4351" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4352" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4354" href="../Compositional/#plfa_plfa-part3-Compositional-4354" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4356" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4358" href="../Compositional/#plfa_plfa-part3-Compositional-4351" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4360" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4362" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4364" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4366" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4367" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4371" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4373" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4375" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4376" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4378" href="../Compositional/#plfa_plfa-part3-Compositional-4354" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4379" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4381" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-4383" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-4385" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4386" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4388" href="../Compositional/#plfa_plfa-part3-Compositional-4354" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4389" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-4391" href="../Compositional/#plfa_plfa-part3-Compositional-4337" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-4401" href="../Compositional/#plfa_plfa-part3-Compositional-4401" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4403" href="../Compositional/#plfa_plfa-part3-Compositional-4403" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-4405" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4407" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-4409" href="../Compositional/#plfa_plfa-part3-Compositional-3215" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4415" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4417" href="../Compositional/#plfa_plfa-part3-Compositional-3975" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4423" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="equation-for-function-application">Equation for function application</h2><p>Next we fill in the ellipses for the equation concerning function application.</p><pre><code>ℰ (M · N) ≃ ... ℰ M ... ℰ N ...</code></pre><p>For this we need to define a function that takes two denotations, both in context <code>Γ</code>, and produces another one in context <code>Γ</code>. This function, let us name it <code>●</code>, needs to mimic the non-recursive aspects of the semantics of an application <code>L · M</code>. We cannot proceed as easily as for <code>ℱ</code> and define the function by recursion on value <code>v</code> because, for example, the rule <code>↦-elim</code> applies to any value. Instead we shall define <code>●</code> in a way that directly deals with the <code>↦-elim</code> and <code>⊥-intro</code> rules but ignores <code>⊔-intro</code>. This makes the forward direction of the proof more difficult, and the case for <code>⊔-intro</code> demonstrates why the <code>⊑-dist</code> rule is important.</p><p>So we define the application of <code>D₁</code> to <code>D₂</code>, written <code>D₁ ● D₂</code>, to include any value <code>w</code> equivalent to <code>⊥</code>, for the <code>⊥-intro</code> rule, and to include any value <code>w</code> that is the output of an entry <code>v ↦ w</code> in <code>D₁</code>, provided the input <code>v</code> is in <code>D₂</code>, for the <code>↦-elim</code> rule.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-5520" class="Keyword">infixl</a> <a id="plfa_plfa-part3-Compositional-5527" class="Number">7</a> <a id="plfa_plfa-part3-Compositional-5529" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">_●_</a>

<a id="plfa_plfa-part3-Compositional-_●_"></a><a id="plfa_plfa-part3-Compositional-5534" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">_●_</a> <a id="plfa_plfa-part3-Compositional-5538" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-5540" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-5542" href="../Compositional/#plfa_plfa-part3-Compositional-5542" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-5543" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-5545" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-5547" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-5558" href="../Compositional/#plfa_plfa-part3-Compositional-5542" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-5560" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-5562" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-5573" href="../Compositional/#plfa_plfa-part3-Compositional-5542" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-5575" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-5577" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-5588" href="../Compositional/#plfa_plfa-part3-Compositional-5542" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-5590" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5591" href="../Compositional/#plfa_plfa-part3-Compositional-5591" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-5594" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-5596" href="../Compositional/#plfa_plfa-part3-Compositional-5596" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-5598" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-5600" href="../Compositional/#plfa_plfa-part3-Compositional-5600" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-5602" href="../Compositional/#plfa_plfa-part3-Compositional-5602" class="Bound">w</a> <a id="plfa_plfa-part3-Compositional-5604" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5606" href="../Compositional/#plfa_plfa-part3-Compositional-5602" class="Bound">w</a> <a id="plfa_plfa-part3-Compositional-5608" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-5610" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Compositional-5612" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="plfa_plfa-part3-Compositional-5614" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Compositional-5617" href="../Compositional/#plfa_plfa-part3-Compositional-5617" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-5619" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Compositional-5621" href="../Denotational/#plfa_plfa-part3-Denotational-4969" class="Datatype">Value</a> <a id="plfa_plfa-part3-Compositional-5627" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a><a id="plfa_plfa-part3-Compositional-5628" class="Symbol">(</a> <a id="plfa_plfa-part3-Compositional-5630" href="../Compositional/#plfa_plfa-part3-Compositional-5591" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-5633" href="../Compositional/#plfa_plfa-part3-Compositional-5600" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-5635" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5636" href="../Compositional/#plfa_plfa-part3-Compositional-5617" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-5638" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-5640" href="../Compositional/#plfa_plfa-part3-Compositional-5602" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-5641" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-5643" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Compositional-5645" href="../Compositional/#plfa_plfa-part3-Compositional-5596" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-5648" href="../Compositional/#plfa_plfa-part3-Compositional-5600" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-5650" href="../Compositional/#plfa_plfa-part3-Compositional-5617" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-5652" class="Symbol">)</a>
</pre><p>If one squints hard enough, the <code>_●_</code> operator starts to look like the <code>apply</code> operation familiar to functional programmers. It takes two parameters and applies the first to the second.</p><p>Next we consider the inversion lemma for application, which is also the forward direction of the semantic equation for application. We describe the proof below.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰ·→●ℰ"></a><a id="plfa_plfa-part3-Compositional-6017" href="../Compositional/#plfa_plfa-part3-Compositional-6017" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6023" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6025" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-6027" href="../Compositional/#plfa_plfa-part3-Compositional-6027" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-6028" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6030" href="../Compositional/#plfa_plfa-part3-Compositional-6030" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-6032" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6034" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-6038" href="../Compositional/#plfa_plfa-part3-Compositional-6027" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-6039" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6041" href="../Compositional/#plfa_plfa-part3-Compositional-6041" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-6043" href="../Compositional/#plfa_plfa-part3-Compositional-6043" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-6045" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6047" href="../Compositional/#plfa_plfa-part3-Compositional-6027" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-6049" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-6051" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-6052" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6054" href="../Compositional/#plfa_plfa-part3-Compositional-6054" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-6056" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6058" href="../Denotational/#plfa_plfa-part3-Denotational-4969" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-6063" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-6067" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-6069" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-6071" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6072" href="../Compositional/#plfa_plfa-part3-Compositional-6041" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-6074" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-6076" href="../Compositional/#plfa_plfa-part3-Compositional-6043" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-6077" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6079" href="../Compositional/#plfa_plfa-part3-Compositional-6030" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-6081" href="../Compositional/#plfa_plfa-part3-Compositional-6054" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-6087" class="Comment">----------------</a>
  <a id="plfa_plfa-part3-Compositional-6106" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-6108" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6109" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-6111" href="../Compositional/#plfa_plfa-part3-Compositional-6041" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-6113" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-6115" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-6117" href="../Compositional/#plfa_plfa-part3-Compositional-6043" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-6118" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6120" href="../Compositional/#plfa_plfa-part3-Compositional-6030" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-6122" href="../Compositional/#plfa_plfa-part3-Compositional-6054" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-6124" href="../Compositional/#plfa_plfa-part3-Compositional-6017" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6130" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6131" href="../Denotational/#plfa_plfa-part3-Denotational-11595" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Compositional-6137" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-6138" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-6140" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6142" href="../Compositional/#plfa_plfa-part3-Compositional-6142" class="Bound">v′</a><a id="plfa_plfa-part3-Compositional-6144" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6146" href="../Compositional/#plfa_plfa-part3-Compositional-6146" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-6149" href="../Compositional/#plfa_plfa-part3-Compositional-6149" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-6151" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6153" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6155" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6160" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6162" href="../Compositional/#plfa_plfa-part3-Compositional-6142" class="Bound">v′</a> <a id="plfa_plfa-part3-Compositional-6165" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6167" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6169" href="../Compositional/#plfa_plfa-part3-Compositional-6146" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-6172" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6174" href="../Compositional/#plfa_plfa-part3-Compositional-6149" class="Bound">d₂</a> <a id="plfa_plfa-part3-Compositional-6177" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6179" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-6181" href="../Compositional/#plfa_plfa-part3-Compositional-6017" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6187" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-6188" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-6190" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6192" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-6193" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6195" href="../Denotational/#plfa_plfa-part3-Denotational-11829" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-6203" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6205" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6210" href="../Denotational/#plfa_plfa-part3-Denotational-5471" class="InductiveConstructor">⊑-bot</a>
<a id="plfa_plfa-part3-Compositional-6216" href="../Compositional/#plfa_plfa-part3-Compositional-6017" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6222" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-6223" href="../Compositional/#plfa_plfa-part3-Compositional-6223" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-6224" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6226" href="../Compositional/#plfa_plfa-part3-Compositional-6226" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-6227" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6229" href="../Compositional/#plfa_plfa-part3-Compositional-6229" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-6230" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6232" href="../Compositional/#plfa_plfa-part3-Compositional-6232" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-6233" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6235" href="../Compositional/#plfa_plfa-part3-Compositional-6235" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-6236" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6238" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6239" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Compositional-6246" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-6247" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-6249" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6251" href="../Compositional/#plfa_plfa-part3-Compositional-6251" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-6253" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6255" class="Argument">w</a> <a id="plfa_plfa-part3-Compositional-6257" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6259" href="../Compositional/#plfa_plfa-part3-Compositional-6259" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-6261" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6263" href="../Compositional/#plfa_plfa-part3-Compositional-6263" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-6266" href="../Compositional/#plfa_plfa-part3-Compositional-6266" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-6268" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Compositional-6274" class="Keyword">with</a> <a id="plfa_plfa-part3-Compositional-6279" href="../Compositional/#plfa_plfa-part3-Compositional-6017" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6285" href="../Compositional/#plfa_plfa-part3-Compositional-6263" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-6288" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6290" href="../Compositional/#plfa_plfa-part3-Compositional-6017" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6296" href="../Compositional/#plfa_plfa-part3-Compositional-6266" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Compositional-6299" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-6303" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6305" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6310" href="../Compositional/#plfa_plfa-part3-Compositional-6310" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-6314" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6316" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6321" href="../Compositional/#plfa_plfa-part3-Compositional-6321" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-6325" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6327" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6332" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6333" href="../Denotational/#plfa_plfa-part3-Denotational-5496" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-6342" href="../Compositional/#plfa_plfa-part3-Compositional-6310" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-6346" href="../Compositional/#plfa_plfa-part3-Compositional-6321" class="Bound">lt2</a><a id="plfa_plfa-part3-Compositional-6349" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-6351" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-6355" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6357" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6362" href="../Compositional/#plfa_plfa-part3-Compositional-6362" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-6366" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6368" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6373" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6375" href="../Compositional/#plfa_plfa-part3-Compositional-6375" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6379" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6381" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6383" href="../Compositional/#plfa_plfa-part3-Compositional-6383" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6389" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6391" href="../Compositional/#plfa_plfa-part3-Compositional-6391" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6396" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6398" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6400" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-6408" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6413" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6415" href="../Compositional/#plfa_plfa-part3-Compositional-6375" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6419" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6421" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6423" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-6427" href="../Compositional/#plfa_plfa-part3-Compositional-6383" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6433" href="../Compositional/#plfa_plfa-part3-Compositional-6459" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6436" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6438" href="../Compositional/#plfa_plfa-part3-Compositional-6391" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6443" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6445" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part3-Compositional-6453" class="Keyword">where</a> <a id="plfa_plfa-part3-Compositional-6459" href="../Compositional/#plfa_plfa-part3-Compositional-6459" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6462" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6464" href="../Compositional/#plfa_plfa-part3-Compositional-6375" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6468" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-6470" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6471" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-6474" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-6476" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-6478" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6480" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-6482" href="../Compositional/#plfa_plfa-part3-Compositional-6375" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6486" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-6488" class="Bound">v₂</a>
            <a id="plfa_plfa-part3-Compositional-6503" href="../Compositional/#plfa_plfa-part3-Compositional-6459" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6506" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6508" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6509" href="../Denotational/#plfa_plfa-part3-Denotational-5797" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-6515" href="../Denotational/#plfa_plfa-part3-Denotational-6832" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-6522" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6523" href="../Denotational/#plfa_plfa-part3-Denotational-5496" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-6532" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6533" href="../Denotational/#plfa_plfa-part3-Denotational-5726" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-6541" href="../Compositional/#plfa_plfa-part3-Compositional-6362" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-6545" href="../Denotational/#plfa_plfa-part3-Denotational-5471" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-6550" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6552" href="../Denotational/#plfa_plfa-part3-Denotational-6832" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Compositional-6558" class="Symbol">))</a>
<a id="plfa_plfa-part3-Compositional-6561" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-6565" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6567" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6572" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6574" href="../Compositional/#plfa_plfa-part3-Compositional-6574" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6578" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6580" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6582" href="../Compositional/#plfa_plfa-part3-Compositional-6582" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6588" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6590" href="../Compositional/#plfa_plfa-part3-Compositional-6590" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6595" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6597" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6599" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6601" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6606" href="../Compositional/#plfa_plfa-part3-Compositional-6606" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-6610" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-6618" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6623" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6625" href="../Compositional/#plfa_plfa-part3-Compositional-6574" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6629" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6631" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6633" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-6637" href="../Compositional/#plfa_plfa-part3-Compositional-6582" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6643" href="../Compositional/#plfa_plfa-part3-Compositional-6669" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6646" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6648" href="../Compositional/#plfa_plfa-part3-Compositional-6590" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6653" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6655" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part3-Compositional-6663" class="Keyword">where</a> <a id="plfa_plfa-part3-Compositional-6669" href="../Compositional/#plfa_plfa-part3-Compositional-6669" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6672" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6674" href="../Compositional/#plfa_plfa-part3-Compositional-6574" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6678" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-6680" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6681" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-6684" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-6686" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-6688" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6690" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-6692" href="../Compositional/#plfa_plfa-part3-Compositional-6574" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6696" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-6698" class="Bound">v₁</a>
            <a id="plfa_plfa-part3-Compositional-6713" href="../Compositional/#plfa_plfa-part3-Compositional-6669" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6716" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6718" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6719" href="../Denotational/#plfa_plfa-part3-Denotational-5797" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-6725" href="../Denotational/#plfa_plfa-part3-Denotational-6832" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-6732" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6733" href="../Denotational/#plfa_plfa-part3-Denotational-5496" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-6742" href="../Denotational/#plfa_plfa-part3-Denotational-6832" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-6749" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6750" href="../Denotational/#plfa_plfa-part3-Denotational-5726" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-6758" href="../Compositional/#plfa_plfa-part3-Compositional-6606" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-6762" href="../Denotational/#plfa_plfa-part3-Denotational-5471" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-6767" class="Symbol">)))</a>
<a id="plfa_plfa-part3-Compositional-6771" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-6775" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6777" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6782" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6784" href="../Compositional/#plfa_plfa-part3-Compositional-6784" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6788" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6790" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6792" href="../Compositional/#plfa_plfa-part3-Compositional-6792" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6798" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6800" href="../Compositional/#plfa_plfa-part3-Compositional-6800" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6805" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6807" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6809" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6811" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6816" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6818" href="../Compositional/#plfa_plfa-part3-Compositional-6818" class="Bound">v₁′′</a> <a id="plfa_plfa-part3-Compositional-6823" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6825" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6827" href="../Compositional/#plfa_plfa-part3-Compositional-6827" class="Bound">L↓v12′</a> <a id="plfa_plfa-part3-Compositional-6834" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6836" href="../Compositional/#plfa_plfa-part3-Compositional-6836" class="Bound">M↓v3′</a> <a id="plfa_plfa-part3-Compositional-6842" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6844" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6846" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-6854" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-6858" href="../Compositional/#plfa_plfa-part3-Compositional-6858" class="Bound">L↓⊔</a> <a id="plfa_plfa-part3-Compositional-6862" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6864" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-6872" href="../Compositional/#plfa_plfa-part3-Compositional-6792" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6878" href="../Compositional/#plfa_plfa-part3-Compositional-6827" class="Bound">L↓v12′</a> <a id="plfa_plfa-part3-Compositional-6885" class="Keyword">in</a>
      <a id="plfa_plfa-part3-Compositional-6894" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-6898" href="../Compositional/#plfa_plfa-part3-Compositional-6898" class="Bound">M↓⊔</a> <a id="plfa_plfa-part3-Compositional-6902" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6904" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-6912" href="../Compositional/#plfa_plfa-part3-Compositional-6800" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6917" href="../Compositional/#plfa_plfa-part3-Compositional-6836" class="Bound">M↓v3′</a> <a id="plfa_plfa-part3-Compositional-6923" class="Keyword">in</a>
      <a id="plfa_plfa-part3-Compositional-6932" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6937" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6939" href="../Compositional/#plfa_plfa-part3-Compositional-6784" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6943" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-6945" href="../Compositional/#plfa_plfa-part3-Compositional-6818" class="Bound">v₁′′</a> <a id="plfa_plfa-part3-Compositional-6950" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6952" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6954" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-6958" href="../Compositional/#plfa_plfa-part3-Compositional-6858" class="Bound">L↓⊔</a> <a id="plfa_plfa-part3-Compositional-6962" href="../Denotational/#plfa_plfa-part3-Denotational-7612" class="Function">⊔↦⊔-dist</a> <a id="plfa_plfa-part3-Compositional-6971" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6973" href="../Compositional/#plfa_plfa-part3-Compositional-6898" class="Bound">M↓⊔</a> <a id="plfa_plfa-part3-Compositional-6977" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6979" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-6981" href="../Compositional/#plfa_plfa-part3-Compositional-6017" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6987" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-6988" href="../Compositional/#plfa_plfa-part3-Compositional-6988" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-6989" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6991" href="../Compositional/#plfa_plfa-part3-Compositional-6991" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-6992" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6994" href="../Compositional/#plfa_plfa-part3-Compositional-6994" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-6995" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6997" href="../Compositional/#plfa_plfa-part3-Compositional-6997" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-6998" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7000" href="../Compositional/#plfa_plfa-part3-Compositional-7000" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-7001" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-7003" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7004" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-7008" href="../Compositional/#plfa_plfa-part3-Compositional-7008" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-7010" href="../Compositional/#plfa_plfa-part3-Compositional-7010" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-7012" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Compositional-7018" class="Keyword">with</a> <a id="plfa_plfa-part3-Compositional-7023" href="../Compositional/#plfa_plfa-part3-Compositional-6017" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7029" href="../Compositional/#plfa_plfa-part3-Compositional-7008" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-7031" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-7035" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-7037" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-7042" href="../Compositional/#plfa_plfa-part3-Compositional-7042" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-7046" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7048" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-7053" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7054" href="../Denotational/#plfa_plfa-part3-Denotational-5726" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-7062" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-7065" href="../Compositional/#plfa_plfa-part3-Compositional-7042" class="Bound">lt2</a><a id="plfa_plfa-part3-Compositional-7068" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-7070" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-7074" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-7076" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-7081" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7083" href="../Compositional/#plfa_plfa-part3-Compositional-7083" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-7086" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7088" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7090" href="../Compositional/#plfa_plfa-part3-Compositional-7090" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-7096" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7098" href="../Compositional/#plfa_plfa-part3-Compositional-7098" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-7103" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-7105" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-7107" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-7115" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-7120" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7122" href="../Compositional/#plfa_plfa-part3-Compositional-7083" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-7125" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7127" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7129" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-7133" href="../Compositional/#plfa_plfa-part3-Compositional-7090" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-7139" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7140" href="../Denotational/#plfa_plfa-part3-Denotational-5797" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-7146" href="../Denotational/#plfa_plfa-part3-Denotational-6832" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-7153" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-7155" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7157" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7159" href="../Compositional/#plfa_plfa-part3-Compositional-7098" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-7164" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-7166" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
</pre><p>We proceed by induction on the semantics.</p><ul><li><p>In case <code>↦-elim</code> we have <code>γ ⊢ L ↓ (v′ ↦ v)</code> and <code>γ ⊢ M ↓ v′</code>, which is all we need to show <code>(ℰ L ● ℰ M) γ v</code>.</p></li><li><p>In case <code>⊥-intro</code> we have <code>v = ⊥</code>. We conclude that <code>v ⊑ ⊥</code>.</p></li><li><p>In case <code>⊔-intro</code> we have <code>ℰ (L · M) γ v₁</code> and <code>ℰ (L · M) γ v₂</code> and need to show <code>(ℰ L ● ℰ M) γ (v₁ ⊔ v₂)</code>. By the induction hypothesis, we have <code>(ℰ L ● ℰ M) γ v₁</code> and <code>(ℰ L ● ℰ M) γ v₂</code>. We have four subcases to consider.</p><ul><li><p>Suppose <code>v₁ ⊑ ⊥</code> and <code>v₂ ⊑ ⊥</code>. Then <code>v₁ ⊔ v₂ ⊑ ⊥</code>.</p></li><li><p>Suppose <code>v₁ ⊑ ⊥</code>, <code>γ ⊢ L ↓ v₁′ ↦ v₂</code>, and <code>γ ⊢ M ↓ v₁′</code>. We have <code>γ ⊢ L ↓ v₁′ ↦ (v₁ ⊔ v₂)</code> by rule <code>sub</code> because <code>v₁′ ↦ (v₁ ⊔ v₂) ⊑ v₁′ ↦ v₂</code>.</p></li><li><p>Suppose <code>γ ⊢ L ↓ v₁′ ↦ v₁</code>, <code>γ ⊢ M ↓ v₁′</code>, and <code>v₂ ⊑ ⊥</code>. We have <code>γ ⊢ L ↓ v₁′ ↦ (v₁ ⊔ v₂)</code> by rule <code>sub</code> because <code>v₁′ ↦ (v₁ ⊔ v₂) ⊑ v₁′ ↦ v₁</code>.</p></li><li><p>Suppose <code>γ ⊢ L ↓ v₁′′ ↦ v₁, γ ⊢ M ↓ v₁′′</code>, <code>γ ⊢ L ↓ v₁′ ↦ v₂</code>, and <code>γ ⊢ M ↓ v₁′</code>. This case is the most interesting. By two uses of the rule <code>⊔-intro</code> we have <code>γ ⊢ L ↓ (v₁′ ↦ v₂) ⊔ (v₁′′ ↦ v₁)</code> and <code>γ ⊢ M ↓ (v₁′ ⊔ v₁′′)</code>. But this does not yet match what we need for <code>ℰ L ● ℰ M</code> because the result of <code>L</code> must be an <code>↦</code> whose input entry is <code>v₁′ ⊔ v₁′′</code>. So we use the <code>sub</code> rule to obtain <code>γ ⊢ L ↓ (v₁′ ⊔ v₁′′) ↦ (v₁ ⊔ v₂)</code>, using the <code>⊔↦⊔-dist</code> lemma (thanks to the <code>⊑-dist</code> rule) to show that</p><pre><code>  (v₁′ ⊔ v₁′′) ↦ (v₁ ⊔ v₂) ⊑ (v₁′ ↦ v₂) ⊔ (v₁′′ ↦ v₁)</code></pre><p>So we have proved what is needed for this case.</p></li></ul></li><li><p>In case <code>sub</code> we have <code>Γ ⊢ L · M ↓ v₁</code> and <code>v ⊑ v₁</code>. By the induction hypothesis, we have <code>(ℰ L ● ℰ M) γ v₁</code>. We have two subcases to consider.</p><ul><li>Suppose <code>v₁ ⊑ ⊥</code>. We conclude that <code>v ⊑ ⊥</code>.</li><li>Suppose <code>Γ ⊢ L ↓ v′ → v₁</code> and <code>Γ ⊢ M ↓ v′</code>. We conclude with <code>Γ ⊢ L ↓ v′ → v</code> by rule <code>sub</code>, because <code>v′ → v ⊑ v′ → v₁</code>.</li></ul></li></ul><p>The backward direction is proved by cases on the premise <code>(ℰ L ● ℰ M) γ v</code>. In case <code>v ⊑ ⊥</code>, we obtain <code>Γ ⊢ L · M ↓ ⊥</code> by rule <code>⊥-intro</code>. Otherwise, we conclude immediately by rule <code>↦-elim</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-●ℰ→ℰ·"></a><a id="plfa_plfa-part3-Compositional-9237" href="../Compositional/#plfa_plfa-part3-Compositional-9237" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-9243" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9245" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-9247" href="../Compositional/#plfa_plfa-part3-Compositional-9247" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-9248" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9250" href="../Compositional/#plfa_plfa-part3-Compositional-9250" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9252" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9254" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-9258" href="../Compositional/#plfa_plfa-part3-Compositional-9247" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-9259" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9261" href="../Compositional/#plfa_plfa-part3-Compositional-9261" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-9263" href="../Compositional/#plfa_plfa-part3-Compositional-9263" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-9265" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9267" href="../Compositional/#plfa_plfa-part3-Compositional-9247" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-9269" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-9271" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-9272" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9274" href="../Compositional/#plfa_plfa-part3-Compositional-9274" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-9275" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-9279" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-9281" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9282" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9284" href="../Compositional/#plfa_plfa-part3-Compositional-9261" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-9286" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-9288" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9290" href="../Compositional/#plfa_plfa-part3-Compositional-9263" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-9291" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9293" href="../Compositional/#plfa_plfa-part3-Compositional-9250" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9295" href="../Compositional/#plfa_plfa-part3-Compositional-9274" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-9301" class="Comment">----------------</a>
  <a id="plfa_plfa-part3-Compositional-9320" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-9322" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9324" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9325" href="../Compositional/#plfa_plfa-part3-Compositional-9261" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-9327" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-9329" href="../Compositional/#plfa_plfa-part3-Compositional-9263" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-9330" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9332" href="../Compositional/#plfa_plfa-part3-Compositional-9250" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9334" href="../Compositional/#plfa_plfa-part3-Compositional-9274" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-9336" href="../Compositional/#plfa_plfa-part3-Compositional-9237" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-9342" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-9343" href="../Compositional/#plfa_plfa-part3-Compositional-9343" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-9344" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9346" href="../Compositional/#plfa_plfa-part3-Compositional-9346" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-9347" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-9349" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9350" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-9355" href="../Compositional/#plfa_plfa-part3-Compositional-9355" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-9357" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9359" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-9361" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-9365" href="../Denotational/#plfa_plfa-part3-Denotational-11829" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-9373" href="../Compositional/#plfa_plfa-part3-Compositional-9355" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-9376" href="../Compositional/#plfa_plfa-part3-Compositional-9237" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-9382" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-9383" href="../Compositional/#plfa_plfa-part3-Compositional-9383" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-9384" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9386" href="../Compositional/#plfa_plfa-part3-Compositional-9386" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-9387" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-9389" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9390" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-9395" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-9397" href="../Compositional/#plfa_plfa-part3-Compositional-9397" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-9400" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-9402" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-9404" href="../Compositional/#plfa_plfa-part3-Compositional-9404" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-9407" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-9409" href="../Compositional/#plfa_plfa-part3-Compositional-9409" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-9412" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-9414" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-9415" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9417" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-9419" href="../Denotational/#plfa_plfa-part3-Denotational-11595" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Compositional-9426" href="../Compositional/#plfa_plfa-part3-Compositional-9404" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-9429" href="../Compositional/#plfa_plfa-part3-Compositional-9409" class="Bound">d2</a>
</pre><p>So we have proved that the semantics is compositional with respect to function application, as witnessed by the <code>●</code> function.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-app-equiv"></a><a id="plfa_plfa-part3-Compositional-9572" href="../Compositional/#plfa_plfa-part3-Compositional-9572" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-9582" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9584" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-9586" href="../Compositional/#plfa_plfa-part3-Compositional-9586" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-9587" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9589" href="../Compositional/#plfa_plfa-part3-Compositional-9589" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-9591" href="../Compositional/#plfa_plfa-part3-Compositional-9591" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-9593" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9595" href="../Compositional/#plfa_plfa-part3-Compositional-9586" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-9597" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-9599" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-9600" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-9604" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-9606" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9608" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9609" href="../Compositional/#plfa_plfa-part3-Compositional-9589" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-9611" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-9613" href="../Compositional/#plfa_plfa-part3-Compositional-9591" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-9614" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9616" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-9618" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9619" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9621" href="../Compositional/#plfa_plfa-part3-Compositional-9589" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-9622" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9624" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-9626" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9627" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9629" href="../Compositional/#plfa_plfa-part3-Compositional-9591" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-9630" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-9632" href="../Compositional/#plfa_plfa-part3-Compositional-9572" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-9642" href="../Compositional/#plfa_plfa-part3-Compositional-9642" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9644" href="../Compositional/#plfa_plfa-part3-Compositional-9644" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-9646" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-9648" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-9650" href="../Compositional/#plfa_plfa-part3-Compositional-6017" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-9656" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-9658" href="../Compositional/#plfa_plfa-part3-Compositional-9237" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-9664" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
</pre><p>We also need an inversion lemma for variables. If <code>Γ ⊢ x ↓ v</code>, then <code>v ⊑ γ x</code>. The proof is a straightforward induction on the semantics.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-var-inv"></a><a id="plfa_plfa-part3-Compositional-9818" href="../Compositional/#plfa_plfa-part3-Compositional-9818" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-9826" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9828" class="Symbol">∀</a> <a id="plfa_plfa-part3-Compositional-9830" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-9831" href="../Compositional/#plfa_plfa-part3-Compositional-9831" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-9833" href="../Compositional/#plfa_plfa-part3-Compositional-9833" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-9835" href="../Compositional/#plfa_plfa-part3-Compositional-9835" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-9836" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-9838" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-9839" href="../Compositional/#plfa_plfa-part3-Compositional-9839" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9841" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9843" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-9847" href="../Compositional/#plfa_plfa-part3-Compositional-9831" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-9848" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-9852" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-9854" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9856" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9857" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-9859" href="../Compositional/#plfa_plfa-part3-Compositional-9835" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-9860" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9862" href="../Compositional/#plfa_plfa-part3-Compositional-9839" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9864" href="../Compositional/#plfa_plfa-part3-Compositional-9833" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-9870" class="Comment">-------------------</a>
  <a id="plfa_plfa-part3-Compositional-9892" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-9894" href="../Compositional/#plfa_plfa-part3-Compositional-9833" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-9896" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-9898" href="../Compositional/#plfa_plfa-part3-Compositional-9839" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9900" href="../Compositional/#plfa_plfa-part3-Compositional-9835" class="Bound">x</a>
<a id="plfa_plfa-part3-Compositional-9902" href="../Compositional/#plfa_plfa-part3-Compositional-9818" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-9910" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9911" href="../Denotational/#plfa_plfa-part3-Denotational-11520" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Compositional-9914" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9916" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-9918" href="../Denotational/#plfa_plfa-part3-Denotational-6832" class="Function">⊑-refl</a>
<a id="plfa_plfa-part3-Compositional-9925" href="../Compositional/#plfa_plfa-part3-Compositional-9818" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-9933" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9934" href="../Denotational/#plfa_plfa-part3-Denotational-11896" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-9942" href="../Compositional/#plfa_plfa-part3-Compositional-9942" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-9945" href="../Compositional/#plfa_plfa-part3-Compositional-9945" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-9947" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9949" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-9951" href="../Denotational/#plfa_plfa-part3-Denotational-5496" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-9960" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9961" href="../Compositional/#plfa_plfa-part3-Compositional-9818" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-9969" href="../Compositional/#plfa_plfa-part3-Compositional-9942" class="Bound">d₁</a><a id="plfa_plfa-part3-Compositional-9971" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9973" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9974" href="../Compositional/#plfa_plfa-part3-Compositional-9818" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-9982" href="../Compositional/#plfa_plfa-part3-Compositional-9945" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-9984" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-9986" href="../Compositional/#plfa_plfa-part3-Compositional-9818" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-9994" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9995" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-9999" href="../Compositional/#plfa_plfa-part3-Compositional-9999" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-10001" href="../Compositional/#plfa_plfa-part3-Compositional-10001" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-10003" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-10005" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-10007" href="../Denotational/#plfa_plfa-part3-Denotational-5726" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-10015" href="../Compositional/#plfa_plfa-part3-Compositional-10001" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-10018" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-10019" href="../Compositional/#plfa_plfa-part3-Compositional-9818" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-10027" href="../Compositional/#plfa_plfa-part3-Compositional-9999" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-10028" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-10030" href="../Compositional/#plfa_plfa-part3-Compositional-9818" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-10038" href="../Denotational/#plfa_plfa-part3-Denotational-11829" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-10046" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-10048" href="../Denotational/#plfa_plfa-part3-Denotational-5471" class="InductiveConstructor">⊑-bot</a>
</pre><p>To round-out the semantic equations, we establish the following one for variables.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-var-equiv"></a><a id="plfa_plfa-part3-Compositional-10151" href="../Compositional/#plfa_plfa-part3-Compositional-10151" class="Function">var-equiv</a> <a id="plfa_plfa-part3-Compositional-10161" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-10163" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-10165" href="../Compositional/#plfa_plfa-part3-Compositional-10165" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-10166" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-10168" href="../Compositional/#plfa_plfa-part3-Compositional-10168" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-10170" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-10172" href="../Compositional/#plfa_plfa-part3-Compositional-10165" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-10174" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Compositional-10176" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-10177" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-10179" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-10181" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-10183" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-10184" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-10186" href="../Compositional/#plfa_plfa-part3-Compositional-10168" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-10187" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-10189" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-10191" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-10194" href="../Compositional/#plfa_plfa-part3-Compositional-10194" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-10196" href="../Compositional/#plfa_plfa-part3-Compositional-10196" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-10198" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-10200" href="../Compositional/#plfa_plfa-part3-Compositional-10196" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-10202" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-10204" href="../Compositional/#plfa_plfa-part3-Compositional-10194" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-10206" href="../Compositional/#plfa_plfa-part3-Compositional-10168" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-10207" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-10209" href="../Compositional/#plfa_plfa-part3-Compositional-10151" class="Function">var-equiv</a> <a id="plfa_plfa-part3-Compositional-10219" href="../Compositional/#plfa_plfa-part3-Compositional-10219" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-10221" href="../Compositional/#plfa_plfa-part3-Compositional-10221" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-10223" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-10225" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-10227" href="../Compositional/#plfa_plfa-part3-Compositional-9818" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-10235" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-10237" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-10240" href="../Compositional/#plfa_plfa-part3-Compositional-10240" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-10243" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-10245" href="../Denotational/#plfa_plfa-part3-Denotational-12011" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-10249" href="../Denotational/#plfa_plfa-part3-Denotational-11520" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Compositional-10253" href="../Compositional/#plfa_plfa-part3-Compositional-10240" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-10255" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-10257" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="congruence">Congruence</h2><p>The main work of this chapter is complete: we have established semantic equations that show how the denotational semantics is compositional. In this section and the next we make use of these equations to prove some corollaries: that denotational equality is a <em>congruence</em> and to prove the <em>compositionality property</em>, which states that surrounding two denotationally-equal terms in the same context produces two programs that are denotationally equal.</p><p>We begin by showing that denotational equality is a congruence with respect to lambda abstraction: that <code>ℰ N ≃ ℰ N′</code> implies <code>ℰ (ƛ N) ≃ ℰ (ƛ N′)</code>. We shall use the <code>lam-equiv</code> equation to reduce this question to whether <code>ℱ</code> is a congruence.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱ-cong"></a><a id="plfa_plfa-part3-Compositional-10985" href="../Compositional/#plfa_plfa-part3-Compositional-10985" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-10992" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-10994" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-10996" href="../Compositional/#plfa_plfa-part3-Compositional-10996" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-10997" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-10999" href="../Compositional/#plfa_plfa-part3-Compositional-10999" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11001" href="../Compositional/#plfa_plfa-part3-Compositional-11001" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-11004" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11006" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-11017" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11018" href="../Compositional/#plfa_plfa-part3-Compositional-10996" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-11020" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-11022" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-11023" class="Symbol">)}</a>
  <a id="plfa_plfa-part3-Compositional-11028" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11030" href="../Compositional/#plfa_plfa-part3-Compositional-10999" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11032" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-11034" href="../Compositional/#plfa_plfa-part3-Compositional-11001" class="Bound">D′</a>
    <a id="plfa_plfa-part3-Compositional-11041" class="Comment">-----------</a>
  <a id="plfa_plfa-part3-Compositional-11055" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11057" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11059" href="../Compositional/#plfa_plfa-part3-Compositional-10999" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11061" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-11063" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11065" href="../Compositional/#plfa_plfa-part3-Compositional-11001" class="Bound">D′</a>
<a id="plfa_plfa-part3-Compositional-11068" href="../Compositional/#plfa_plfa-part3-Compositional-10985" class="Function">ℱ-cong</a><a id="plfa_plfa-part3-Compositional-11074" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11075" href="../Compositional/#plfa_plfa-part3-Compositional-11075" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-11076" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11078" href="../Compositional/#plfa_plfa-part3-Compositional-11078" class="Bound">D≃D′</a> <a id="plfa_plfa-part3-Compositional-11083" href="../Compositional/#plfa_plfa-part3-Compositional-11083" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-11085" href="../Compositional/#plfa_plfa-part3-Compositional-11085" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-11087" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-11091" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-11093" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-11096" href="../Compositional/#plfa_plfa-part3-Compositional-11096" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-11098" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11100" href="../Compositional/#plfa_plfa-part3-Compositional-11163" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-11102" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11103" href="../Compositional/#plfa_plfa-part3-Compositional-11083" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11104" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11106" href="../Compositional/#plfa_plfa-part3-Compositional-11085" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-11107" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11109" href="../Compositional/#plfa_plfa-part3-Compositional-11096" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-11111" href="../Compositional/#plfa_plfa-part3-Compositional-11078" class="Bound">D≃D′</a><a id="plfa_plfa-part3-Compositional-11115" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11117" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-11119" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-11122" href="../Compositional/#plfa_plfa-part3-Compositional-11122" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-11124" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11126" href="../Compositional/#plfa_plfa-part3-Compositional-11163" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-11128" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11129" href="../Compositional/#plfa_plfa-part3-Compositional-11083" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11130" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11132" href="../Compositional/#plfa_plfa-part3-Compositional-11085" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-11133" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11135" href="../Compositional/#plfa_plfa-part3-Compositional-11122" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-11137" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11138" href="../Denotational/#plfa_plfa-part3-Denotational-22805" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-11144" href="../Compositional/#plfa_plfa-part3-Compositional-11078" class="Bound">D≃D′</a><a id="plfa_plfa-part3-Compositional-11148" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-11151" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Compositional-11155" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-11163" href="../Compositional/#plfa_plfa-part3-Compositional-11163" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-11166" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11168" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-11170" href="../Compositional/#plfa_plfa-part3-Compositional-11170" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-11172" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11174" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-11178" href="../Compositional/#plfa_plfa-part3-Compositional-11075" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-11179" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11181" href="../Compositional/#plfa_plfa-part3-Compositional-11181" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-11182" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11184" href="../Compositional/#plfa_plfa-part3-Compositional-11184" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11186" href="../Compositional/#plfa_plfa-part3-Compositional-11186" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-11189" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11191" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-11202" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11203" href="../Compositional/#plfa_plfa-part3-Compositional-11075" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-11205" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-11207" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-11208" class="Symbol">)}</a>
    <a id="plfa_plfa-part3-Compositional-11215" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11217" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11219" href="../Compositional/#plfa_plfa-part3-Compositional-11184" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11221" href="../Compositional/#plfa_plfa-part3-Compositional-11170" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-11223" href="../Compositional/#plfa_plfa-part3-Compositional-11181" class="Bound">v</a>  <a id="plfa_plfa-part3-Compositional-11226" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-11229" href="../Compositional/#plfa_plfa-part3-Compositional-11184" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11231" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-11233" href="../Compositional/#plfa_plfa-part3-Compositional-11186" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-11236" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11238" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11240" href="../Compositional/#plfa_plfa-part3-Compositional-11186" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-11243" href="../Compositional/#plfa_plfa-part3-Compositional-11170" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-11245" href="../Compositional/#plfa_plfa-part3-Compositional-11181" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-11249" href="../Compositional/#plfa_plfa-part3-Compositional-11163" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-11252" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11253" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-11255" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-11257" href="../Denotational/#plfa_plfa-part3-Denotational-4989" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-11258" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11260" href="../Compositional/#plfa_plfa-part3-Compositional-11260" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-11263" href="../Compositional/#plfa_plfa-part3-Compositional-11263" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11267" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-11269" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Unit.html#195" class="InductiveConstructor">tt</a>
  <a id="plfa_plfa-part3-Compositional-11274" href="../Compositional/#plfa_plfa-part3-Compositional-11163" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-11277" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11278" href="../Compositional/#plfa_plfa-part3-Compositional-11278" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11279" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11281" href="../Compositional/#plfa_plfa-part3-Compositional-11281" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-11283" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-11285" href="../Compositional/#plfa_plfa-part3-Compositional-11285" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-11286" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11288" href="../Compositional/#plfa_plfa-part3-Compositional-11288" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-11291" href="../Compositional/#plfa_plfa-part3-Compositional-11291" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11295" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-11297" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-11303" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11304" href="../Compositional/#plfa_plfa-part3-Compositional-11291" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11308" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11309" href="../Compositional/#plfa_plfa-part3-Compositional-11278" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-11311" href="../Denotational/#plfa_plfa-part3-Denotational-8930" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-11314" href="../Compositional/#plfa_plfa-part3-Compositional-11281" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-11315" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11317" href="../Compositional/#plfa_plfa-part3-Compositional-11285" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-11318" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11320" href="../Compositional/#plfa_plfa-part3-Compositional-11288" class="Bound">fd</a>
  <a id="plfa_plfa-part3-Compositional-11325" href="../Compositional/#plfa_plfa-part3-Compositional-11163" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-11328" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11329" href="../Compositional/#plfa_plfa-part3-Compositional-11329" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11330" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11332" href="../Compositional/#plfa_plfa-part3-Compositional-11332" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-11334" href="../Denotational/#plfa_plfa-part3-Denotational-5031" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-11336" href="../Compositional/#plfa_plfa-part3-Compositional-11336" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-11337" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11339" href="../Compositional/#plfa_plfa-part3-Compositional-11339" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-11342" href="../Compositional/#plfa_plfa-part3-Compositional-11342" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11346" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-11348" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-11350" href="../Compositional/#plfa_plfa-part3-Compositional-11163" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-11352" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11353" href="../Compositional/#plfa_plfa-part3-Compositional-11329" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11354" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11356" href="../Compositional/#plfa_plfa-part3-Compositional-11332" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-11357" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11359" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11360" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-11366" href="../Compositional/#plfa_plfa-part3-Compositional-11339" class="Bound">fd</a><a id="plfa_plfa-part3-Compositional-11368" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11370" href="../Compositional/#plfa_plfa-part3-Compositional-11342" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11374" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-11376" href="../Compositional/#plfa_plfa-part3-Compositional-11163" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-11378" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11379" href="../Compositional/#plfa_plfa-part3-Compositional-11329" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11380" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11382" href="../Compositional/#plfa_plfa-part3-Compositional-11336" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-11383" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11385" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11386" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="plfa_plfa-part3-Compositional-11392" href="../Compositional/#plfa_plfa-part3-Compositional-11339" class="Bound">fd</a><a id="plfa_plfa-part3-Compositional-11394" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11396" href="../Compositional/#plfa_plfa-part3-Compositional-11342" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11400" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
</pre><p>The proof of <code>ℱ-cong</code> uses the lemma <code>ℱ≃</code> to handle both directions of the if-and-only-if. That lemma is proved by a straightforward induction on the value <code>v</code>.</p><p>We now prove that lambda abstraction is a congruence by direct equational reasoning.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lam-cong"></a><a id="plfa_plfa-part3-Compositional-11663" href="../Compositional/#plfa_plfa-part3-Compositional-11663" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-11672" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11674" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-11676" href="../Compositional/#plfa_plfa-part3-Compositional-11676" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-11677" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11679" href="../Compositional/#plfa_plfa-part3-Compositional-11679" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-11681" href="../Compositional/#plfa_plfa-part3-Compositional-11681" class="Bound">N′</a> <a id="plfa_plfa-part3-Compositional-11684" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11686" href="../Compositional/#plfa_plfa-part3-Compositional-11676" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-11688" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-11690" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-11692" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-11694" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-11695" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-11699" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11701" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11703" href="../Compositional/#plfa_plfa-part3-Compositional-11679" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-11705" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-11707" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11709" href="../Compositional/#plfa_plfa-part3-Compositional-11681" class="Bound">N′</a>
    <a id="plfa_plfa-part3-Compositional-11716" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Compositional-11736" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11738" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11740" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11741" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-11743" href="../Compositional/#plfa_plfa-part3-Compositional-11679" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-11744" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11746" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-11748" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11750" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11751" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-11753" href="../Compositional/#plfa_plfa-part3-Compositional-11681" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-11755" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-11757" href="../Compositional/#plfa_plfa-part3-Compositional-11663" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-11766" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11767" href="../Compositional/#plfa_plfa-part3-Compositional-11767" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-11768" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11770" href="../Compositional/#plfa_plfa-part3-Compositional-11770" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-11771" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11773" href="../Compositional/#plfa_plfa-part3-Compositional-11773" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-11775" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11777" href="../Compositional/#plfa_plfa-part3-Compositional-11777" class="Bound">N≃N′</a> <a id="plfa_plfa-part3-Compositional-11782" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-11786" href="../Denotational/#plfa_plfa-part3-Denotational-23565" class="Function Operator">start</a>
    <a id="plfa_plfa-part3-Compositional-11796" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11798" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11799" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-11801" href="../Compositional/#plfa_plfa-part3-Compositional-11770" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-11802" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-11806" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-11809" href="../Compositional/#plfa_plfa-part3-Compositional-4337" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-11819" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-11825" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11827" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11828" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11830" href="../Compositional/#plfa_plfa-part3-Compositional-11770" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-11831" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-11835" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-11838" href="../Compositional/#plfa_plfa-part3-Compositional-10985" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-11845" href="../Compositional/#plfa_plfa-part3-Compositional-11777" class="Bound">N≃N′</a> <a id="plfa_plfa-part3-Compositional-11850" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-11856" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11858" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11859" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11861" href="../Compositional/#plfa_plfa-part3-Compositional-11773" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-11863" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-11867" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-11870" href="../Denotational/#plfa_plfa-part3-Denotational-22805" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-11876" href="../Compositional/#plfa_plfa-part3-Compositional-4337" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-11886" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-11892" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11894" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11895" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-11897" href="../Compositional/#plfa_plfa-part3-Compositional-11773" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-11899" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-11903" href="../Denotational/#plfa_plfa-part3-Denotational-23903" class="Function Operator">☐</a>
</pre><p>Next we prove that denotational equality is a congruence for application: that <code>ℰ L ≃ ℰ L′</code> and <code>ℰ M ≃ ℰ M′</code> imply <code>ℰ (L · M) ≃ ℰ (L′ · M′)</code>. The <code>app-equiv</code> equation reduces this to the question of whether the <code>●</code> operator is a congruence.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-●-cong"></a><a id="plfa_plfa-part3-Compositional-12160" href="../Compositional/#plfa_plfa-part3-Compositional-12160" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-12167" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12169" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12171" href="../Compositional/#plfa_plfa-part3-Compositional-12171" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12172" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12174" href="../Compositional/#plfa_plfa-part3-Compositional-12174" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12177" href="../Compositional/#plfa_plfa-part3-Compositional-12177" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-12181" href="../Compositional/#plfa_plfa-part3-Compositional-12181" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-12184" href="../Compositional/#plfa_plfa-part3-Compositional-12184" class="Bound">D₂′</a> <a id="plfa_plfa-part3-Compositional-12188" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12190" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-12201" href="../Compositional/#plfa_plfa-part3-Compositional-12171" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12202" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12206" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12208" href="../Compositional/#plfa_plfa-part3-Compositional-12174" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12211" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12213" href="../Compositional/#plfa_plfa-part3-Compositional-12177" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-12217" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12219" href="../Compositional/#plfa_plfa-part3-Compositional-12181" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-12222" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12224" href="../Compositional/#plfa_plfa-part3-Compositional-12184" class="Bound">D₂′</a>
  <a id="plfa_plfa-part3-Compositional-12230" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12232" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12233" href="../Compositional/#plfa_plfa-part3-Compositional-12174" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12236" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12238" href="../Compositional/#plfa_plfa-part3-Compositional-12181" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-12240" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12242" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12244" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12245" href="../Compositional/#plfa_plfa-part3-Compositional-12177" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-12249" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12251" href="../Compositional/#plfa_plfa-part3-Compositional-12184" class="Bound">D₂′</a><a id="plfa_plfa-part3-Compositional-12254" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-12256" href="../Compositional/#plfa_plfa-part3-Compositional-12160" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-12263" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12264" href="../Compositional/#plfa_plfa-part3-Compositional-12264" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12265" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12267" href="../Compositional/#plfa_plfa-part3-Compositional-12267" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-12270" href="../Compositional/#plfa_plfa-part3-Compositional-12270" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-12273" href="../Compositional/#plfa_plfa-part3-Compositional-12273" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12275" href="../Compositional/#plfa_plfa-part3-Compositional-12275" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12277" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12279" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12281" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-12284" href="../Compositional/#plfa_plfa-part3-Compositional-12284" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-12286" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12288" href="../Compositional/#plfa_plfa-part3-Compositional-12374" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-12291" href="../Compositional/#plfa_plfa-part3-Compositional-12284" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-12293" href="../Compositional/#plfa_plfa-part3-Compositional-12267" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-12296" href="../Compositional/#plfa_plfa-part3-Compositional-12270" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-12298" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12300" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a>
                         <a id="plfa_plfa-part3-Compositional-12327" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-12330" href="../Compositional/#plfa_plfa-part3-Compositional-12330" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-12332" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12334" href="../Compositional/#plfa_plfa-part3-Compositional-12374" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-12337" href="../Compositional/#plfa_plfa-part3-Compositional-12330" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-12339" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12340" href="../Denotational/#plfa_plfa-part3-Denotational-22805" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-12346" href="../Compositional/#plfa_plfa-part3-Compositional-12267" class="Bound">d1</a><a id="plfa_plfa-part3-Compositional-12348" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12350" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12351" href="../Denotational/#plfa_plfa-part3-Denotational-22805" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-12357" href="../Compositional/#plfa_plfa-part3-Compositional-12270" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-12359" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-12362" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Compositional-12366" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-12374" href="../Compositional/#plfa_plfa-part3-Compositional-12374" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-12377" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12379" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12381" href="../Compositional/#plfa_plfa-part3-Compositional-12381" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12383" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12385" href="../Denotational/#plfa_plfa-part3-Denotational-8742" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-12389" href="../Compositional/#plfa_plfa-part3-Compositional-12264" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12390" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12392" href="../Compositional/#plfa_plfa-part3-Compositional-12392" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12393" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12395" href="../Compositional/#plfa_plfa-part3-Compositional-12395" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12398" href="../Compositional/#plfa_plfa-part3-Compositional-12398" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-12402" href="../Compositional/#plfa_plfa-part3-Compositional-12402" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-12405" href="../Compositional/#plfa_plfa-part3-Compositional-12405" class="Bound">D₂′</a> <a id="plfa_plfa-part3-Compositional-12409" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12411" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-12422" href="../Compositional/#plfa_plfa-part3-Compositional-12264" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12423" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Compositional-12429" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12431" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12432" href="../Compositional/#plfa_plfa-part3-Compositional-12395" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12435" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12437" href="../Compositional/#plfa_plfa-part3-Compositional-12402" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-12439" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12441" href="../Compositional/#plfa_plfa-part3-Compositional-12381" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12443" href="../Compositional/#plfa_plfa-part3-Compositional-12392" class="Bound">v</a>  <a id="plfa_plfa-part3-Compositional-12446" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-12449" href="../Compositional/#plfa_plfa-part3-Compositional-12395" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12452" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12454" href="../Compositional/#plfa_plfa-part3-Compositional-12398" class="Bound">D₁′</a>  <a id="plfa_plfa-part3-Compositional-12459" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-12462" href="../Compositional/#plfa_plfa-part3-Compositional-12402" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-12465" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12467" href="../Compositional/#plfa_plfa-part3-Compositional-12405" class="Bound">D₂′</a>
    <a id="plfa_plfa-part3-Compositional-12475" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12477" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12478" href="../Compositional/#plfa_plfa-part3-Compositional-12398" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-12482" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12484" href="../Compositional/#plfa_plfa-part3-Compositional-12405" class="Bound">D₂′</a><a id="plfa_plfa-part3-Compositional-12487" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12489" href="../Compositional/#plfa_plfa-part3-Compositional-12381" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12491" href="../Compositional/#plfa_plfa-part3-Compositional-12392" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-12495" href="../Compositional/#plfa_plfa-part3-Compositional-12374" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-12498" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12499" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-12504" href="../Compositional/#plfa_plfa-part3-Compositional-12504" class="Bound">v⊑⊥</a><a id="plfa_plfa-part3-Compositional-12507" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12509" href="../Compositional/#plfa_plfa-part3-Compositional-12509" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-12513" href="../Compositional/#plfa_plfa-part3-Compositional-12513" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-12517" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12519" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-12524" href="../Compositional/#plfa_plfa-part3-Compositional-12504" class="Bound">v⊑⊥</a>
  <a id="plfa_plfa-part3-Compositional-12530" href="../Compositional/#plfa_plfa-part3-Compositional-12374" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-12533" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12534" href="../Compositional/#plfa_plfa-part3-Compositional-12534" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-12535" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12537" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12538" href="../Compositional/#plfa_plfa-part3-Compositional-12538" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-12539" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12541" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12542" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-12547" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12549" href="../Compositional/#plfa_plfa-part3-Compositional-12549" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12551" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12553" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12555" href="../Compositional/#plfa_plfa-part3-Compositional-12555" class="Bound">Dv↦w</a> <a id="plfa_plfa-part3-Compositional-12560" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12562" href="../Compositional/#plfa_plfa-part3-Compositional-12562" class="Bound">Dv</a> <a id="plfa_plfa-part3-Compositional-12565" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-12567" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-12568" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12570" href="../Compositional/#plfa_plfa-part3-Compositional-12570" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-12574" href="../Compositional/#plfa_plfa-part3-Compositional-12574" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-12578" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Compositional-12584" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-12589" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12591" href="../Compositional/#plfa_plfa-part3-Compositional-12549" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12593" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12595" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12597" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-12603" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12604" href="../Compositional/#plfa_plfa-part3-Compositional-12570" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-12608" href="../Compositional/#plfa_plfa-part3-Compositional-12534" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12610" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12611" href="../Compositional/#plfa_plfa-part3-Compositional-12549" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12613" href="../Denotational/#plfa_plfa-part3-Denotational-5001" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-12615" href="../Compositional/#plfa_plfa-part3-Compositional-12538" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-12616" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-12619" href="../Compositional/#plfa_plfa-part3-Compositional-12555" class="Bound">Dv↦w</a> <a id="plfa_plfa-part3-Compositional-12624" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12626" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-12632" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12633" href="../Compositional/#plfa_plfa-part3-Compositional-12574" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-12637" href="../Compositional/#plfa_plfa-part3-Compositional-12534" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12639" href="../Compositional/#plfa_plfa-part3-Compositional-12549" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12640" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12642" href="../Compositional/#plfa_plfa-part3-Compositional-12562" class="Bound">Dv</a> <a id="plfa_plfa-part3-Compositional-12645" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-12647" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
</pre><p>Again, both directions of the if-and-only-if are proved via a lemma. This time the lemma is proved by cases on <code>(D₁ ● D₂) γ v</code>.</p><p>With the congruence of <code>●</code>, we can prove that application is a congruence by direct equational reasoning.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-app-cong"></a><a id="plfa_plfa-part3-Compositional-12898" href="../Compositional/#plfa_plfa-part3-Compositional-12898" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-12907" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12909" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12911" href="../Compositional/#plfa_plfa-part3-Compositional-12911" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12912" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12914" href="../Compositional/#plfa_plfa-part3-Compositional-12914" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12916" href="../Compositional/#plfa_plfa-part3-Compositional-12916" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-12919" href="../Compositional/#plfa_plfa-part3-Compositional-12919" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-12921" href="../Compositional/#plfa_plfa-part3-Compositional-12921" class="Bound">M′</a> <a id="plfa_plfa-part3-Compositional-12924" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12926" href="../Compositional/#plfa_plfa-part3-Compositional-12911" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-12928" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-12930" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-12931" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12935" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12937" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12939" href="../Compositional/#plfa_plfa-part3-Compositional-12914" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12941" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12943" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12945" href="../Compositional/#plfa_plfa-part3-Compositional-12916" class="Bound">L′</a>
  <a id="plfa_plfa-part3-Compositional-12950" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12952" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12954" href="../Compositional/#plfa_plfa-part3-Compositional-12919" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-12956" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12958" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12960" href="../Compositional/#plfa_plfa-part3-Compositional-12921" class="Bound">M′</a>
    <a id="plfa_plfa-part3-Compositional-12967" class="Comment">-------------------------</a>
  <a id="plfa_plfa-part3-Compositional-12995" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12997" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12999" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13000" href="../Compositional/#plfa_plfa-part3-Compositional-12914" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-13002" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-13004" href="../Compositional/#plfa_plfa-part3-Compositional-12919" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-13005" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13007" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-13009" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13011" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13012" href="../Compositional/#plfa_plfa-part3-Compositional-12916" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-13015" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-13017" href="../Compositional/#plfa_plfa-part3-Compositional-12921" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-13019" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-13021" href="../Compositional/#plfa_plfa-part3-Compositional-12898" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-13030" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-13031" href="../Compositional/#plfa_plfa-part3-Compositional-13031" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-13032" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13034" href="../Compositional/#plfa_plfa-part3-Compositional-13034" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-13035" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13037" href="../Compositional/#plfa_plfa-part3-Compositional-13037" class="Bound">L′</a><a id="plfa_plfa-part3-Compositional-13039" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13041" href="../Compositional/#plfa_plfa-part3-Compositional-13041" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-13042" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13044" href="../Compositional/#plfa_plfa-part3-Compositional-13044" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-13046" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13048" href="../Compositional/#plfa_plfa-part3-Compositional-13048" class="Bound">L≅L′</a> <a id="plfa_plfa-part3-Compositional-13053" href="../Compositional/#plfa_plfa-part3-Compositional-13053" class="Bound">M≅M′</a> <a id="plfa_plfa-part3-Compositional-13058" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-13062" href="../Denotational/#plfa_plfa-part3-Denotational-23565" class="Function Operator">start</a>
    <a id="plfa_plfa-part3-Compositional-13072" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13074" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13075" href="../Compositional/#plfa_plfa-part3-Compositional-13034" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-13077" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-13079" href="../Compositional/#plfa_plfa-part3-Compositional-13041" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-13080" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-13084" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-13087" href="../Compositional/#plfa_plfa-part3-Compositional-9572" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-13097" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-13103" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13105" href="../Compositional/#plfa_plfa-part3-Compositional-13034" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-13107" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-13109" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13111" href="../Compositional/#plfa_plfa-part3-Compositional-13041" class="Bound">M</a>
  <a id="plfa_plfa-part3-Compositional-13115" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-13118" href="../Compositional/#plfa_plfa-part3-Compositional-12160" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-13125" href="../Compositional/#plfa_plfa-part3-Compositional-13048" class="Bound">L≅L′</a> <a id="plfa_plfa-part3-Compositional-13130" href="../Compositional/#plfa_plfa-part3-Compositional-13053" class="Bound">M≅M′</a> <a id="plfa_plfa-part3-Compositional-13135" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-13141" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13143" href="../Compositional/#plfa_plfa-part3-Compositional-13037" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-13146" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-13148" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13150" href="../Compositional/#plfa_plfa-part3-Compositional-13044" class="Bound">M′</a>
  <a id="plfa_plfa-part3-Compositional-13155" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-13158" href="../Denotational/#plfa_plfa-part3-Denotational-22805" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-13164" href="../Compositional/#plfa_plfa-part3-Compositional-9572" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-13174" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-13180" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13182" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13183" href="../Compositional/#plfa_plfa-part3-Compositional-13037" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-13186" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-13188" href="../Compositional/#plfa_plfa-part3-Compositional-13044" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-13190" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-13194" href="../Denotational/#plfa_plfa-part3-Denotational-23903" class="Function Operator">☐</a>
</pre><h2 id="compositionality">Compositionality</h2><p>The <em>compositionality property</em> states that surrounding two terms that are denotationally equal in the same context produces two programs that are denotationally equal. To make this precise, we define what we mean by “context” and “surround”.</p><p>A <em>context</em> is a program with one hole in it. The following data definition <code>Ctx</code> makes this idea explicit. We index the <code>Ctx</code> data type with two contexts for variables: one for the hole and one for terms that result from filling the hole.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-13716" class="Keyword">data</a> <a id="plfa_plfa-part3-Compositional-Ctx"></a><a id="plfa_plfa-part3-Compositional-13721" href="../Compositional/#plfa_plfa-part3-Compositional-13721" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13725" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13727" href="../Untyped/#plfa_plfa-part2-Untyped-3848" class="Datatype">Context</a> <a id="plfa_plfa-part3-Compositional-13735" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13737" href="../Untyped/#plfa_plfa-part2-Untyped-3848" class="Datatype">Context</a> <a id="plfa_plfa-part3-Compositional-13745" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13747" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part3-Compositional-13751" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-hole"></a><a id="plfa_plfa-part3-Compositional-13759" href="../Compositional/#plfa_plfa-part3-Compositional-13759" class="InductiveConstructor">ctx-hole</a> <a id="plfa_plfa-part3-Compositional-13768" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13770" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-13772" href="../Compositional/#plfa_plfa-part3-Compositional-13772" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-13773" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13775" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13777" href="../Compositional/#plfa_plfa-part3-Compositional-13721" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13781" href="../Compositional/#plfa_plfa-part3-Compositional-13772" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13783" href="../Compositional/#plfa_plfa-part3-Compositional-13772" class="Bound">Γ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-lam"></a><a id="plfa_plfa-part3-Compositional-13787" href="../Compositional/#plfa_plfa-part3-Compositional-13787" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-13795" class="Symbol">:</a>  <a id="plfa_plfa-part3-Compositional-13798" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-13800" href="../Compositional/#plfa_plfa-part3-Compositional-13800" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13802" href="../Compositional/#plfa_plfa-part3-Compositional-13802" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-13803" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13805" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13807" href="../Compositional/#plfa_plfa-part3-Compositional-13721" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13811" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13812" href="../Compositional/#plfa_plfa-part3-Compositional-13800" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13814" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-13816" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-13817" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13819" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13820" href="../Compositional/#plfa_plfa-part3-Compositional-13802" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-13822" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-13824" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-13825" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13827" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13829" href="../Compositional/#plfa_plfa-part3-Compositional-13721" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13833" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13834" href="../Compositional/#plfa_plfa-part3-Compositional-13800" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13836" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-13838" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-13839" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13841" href="../Compositional/#plfa_plfa-part3-Compositional-13802" class="Bound">Δ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-app-L"></a><a id="plfa_plfa-part3-Compositional-13845" href="../Compositional/#plfa_plfa-part3-Compositional-13845" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-13855" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13857" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-13859" href="../Compositional/#plfa_plfa-part3-Compositional-13859" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13861" href="../Compositional/#plfa_plfa-part3-Compositional-13861" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-13862" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13864" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13866" href="../Compositional/#plfa_plfa-part3-Compositional-13721" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13870" href="../Compositional/#plfa_plfa-part3-Compositional-13859" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13872" href="../Compositional/#plfa_plfa-part3-Compositional-13861" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-13874" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13876" href="../Compositional/#plfa_plfa-part3-Compositional-13861" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-13878" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-13880" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-13882" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13884" href="../Compositional/#plfa_plfa-part3-Compositional-13721" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13888" href="../Compositional/#plfa_plfa-part3-Compositional-13859" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13890" href="../Compositional/#plfa_plfa-part3-Compositional-13861" class="Bound">Δ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-app-R"></a><a id="plfa_plfa-part3-Compositional-13894" href="../Compositional/#plfa_plfa-part3-Compositional-13894" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-13904" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13906" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-13908" href="../Compositional/#plfa_plfa-part3-Compositional-13908" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13910" href="../Compositional/#plfa_plfa-part3-Compositional-13910" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-13911" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13913" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13915" href="../Compositional/#plfa_plfa-part3-Compositional-13910" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-13917" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-13919" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-13921" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13923" href="../Compositional/#plfa_plfa-part3-Compositional-13721" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13927" href="../Compositional/#plfa_plfa-part3-Compositional-13908" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13929" href="../Compositional/#plfa_plfa-part3-Compositional-13910" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-13931" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13933" href="../Compositional/#plfa_plfa-part3-Compositional-13721" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13937" href="../Compositional/#plfa_plfa-part3-Compositional-13908" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13939" href="../Compositional/#plfa_plfa-part3-Compositional-13910" class="Bound">Δ</a>
</pre><ul><li><p>The constructor <code>ctx-hole</code> represents the hole, and in this case the variable context for the hole is the same as the variable context for the term that results from filling the hole.</p></li><li><p>The constructor <code>ctx-lam</code> takes a <code>Ctx</code> and produces a larger one that adds a lambda abstraction at the top. The variable context of the hole stays the same, whereas we remove one variable from the context of the resulting term because it is bound by this lambda abstraction.</p></li><li><p>There are two constructions for application, <code>ctx-app-L</code> and <code>ctx-app-R</code>. The <code>ctx-app-L</code> is for when the hole is inside the left-hand term (the operator) and the later is when the hole is inside the right-hand term (the operand).</p></li></ul><p>The action of surrounding a term with a context is defined by the following <code>plug</code> function. It is defined by recursion on the context.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-plug"></a><a id="plfa_plfa-part3-Compositional-14809" href="../Compositional/#plfa_plfa-part3-Compositional-14809" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14814" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14816" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-14818" href="../Compositional/#plfa_plfa-part3-Compositional-14818" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14819" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14821" href="../Compositional/#plfa_plfa-part3-Compositional-14821" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-14822" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14824" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14826" href="../Compositional/#plfa_plfa-part3-Compositional-13721" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-14830" href="../Compositional/#plfa_plfa-part3-Compositional-14818" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14832" href="../Compositional/#plfa_plfa-part3-Compositional-14821" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-14834" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14836" href="../Compositional/#plfa_plfa-part3-Compositional-14818" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14838" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-14840" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-14842" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14844" href="../Compositional/#plfa_plfa-part3-Compositional-14821" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-14846" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-14848" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a>
<a id="plfa_plfa-part3-Compositional-14850" href="../Compositional/#plfa_plfa-part3-Compositional-14809" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14855" href="../Compositional/#plfa_plfa-part3-Compositional-13759" class="InductiveConstructor">ctx-hole</a> <a id="plfa_plfa-part3-Compositional-14864" href="../Compositional/#plfa_plfa-part3-Compositional-14864" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-14866" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14868" href="../Compositional/#plfa_plfa-part3-Compositional-14864" class="Bound">M</a>
<a id="plfa_plfa-part3-Compositional-14870" href="../Compositional/#plfa_plfa-part3-Compositional-14809" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14875" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14876" href="../Compositional/#plfa_plfa-part3-Compositional-13787" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-14884" href="../Compositional/#plfa_plfa-part3-Compositional-14884" class="Bound">C</a><a id="plfa_plfa-part3-Compositional-14885" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14887" href="../Compositional/#plfa_plfa-part3-Compositional-14887" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-14889" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14891" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-14893" href="../Compositional/#plfa_plfa-part3-Compositional-14809" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14898" href="../Compositional/#plfa_plfa-part3-Compositional-14884" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-14900" href="../Compositional/#plfa_plfa-part3-Compositional-14887" class="Bound">N</a>
<a id="plfa_plfa-part3-Compositional-14902" href="../Compositional/#plfa_plfa-part3-Compositional-14809" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14907" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14908" href="../Compositional/#plfa_plfa-part3-Compositional-13845" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-14918" href="../Compositional/#plfa_plfa-part3-Compositional-14918" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-14920" href="../Compositional/#plfa_plfa-part3-Compositional-14920" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-14921" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14923" href="../Compositional/#plfa_plfa-part3-Compositional-14923" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-14925" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14927" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14928" href="../Compositional/#plfa_plfa-part3-Compositional-14809" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14933" href="../Compositional/#plfa_plfa-part3-Compositional-14918" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-14935" href="../Compositional/#plfa_plfa-part3-Compositional-14923" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-14936" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14938" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-14940" href="../Compositional/#plfa_plfa-part3-Compositional-14920" class="Bound">N</a>
<a id="plfa_plfa-part3-Compositional-14942" href="../Compositional/#plfa_plfa-part3-Compositional-14809" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14947" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14948" href="../Compositional/#plfa_plfa-part3-Compositional-13894" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-14958" href="../Compositional/#plfa_plfa-part3-Compositional-14958" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-14960" href="../Compositional/#plfa_plfa-part3-Compositional-14960" class="Bound">C</a><a id="plfa_plfa-part3-Compositional-14961" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14963" href="../Compositional/#plfa_plfa-part3-Compositional-14963" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-14965" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14967" href="../Compositional/#plfa_plfa-part3-Compositional-14958" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-14969" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-14971" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14972" href="../Compositional/#plfa_plfa-part3-Compositional-14809" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14977" href="../Compositional/#plfa_plfa-part3-Compositional-14960" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-14979" href="../Compositional/#plfa_plfa-part3-Compositional-14963" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-14980" class="Symbol">)</a>
</pre><p>We are ready to state and prove the compositionality principle. Given two terms <code>M</code> and <code>N</code> that are denotationally equal, plugging them both into an arbitrary context <code>C</code> produces two programs that are denotationally equal.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-compositionality"></a><a id="plfa_plfa-part3-Compositional-15222" href="../Compositional/#plfa_plfa-part3-Compositional-15222" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15239" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15241" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-15243" href="../Compositional/#plfa_plfa-part3-Compositional-15243" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-15245" href="../Compositional/#plfa_plfa-part3-Compositional-15245" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-15246" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15248" href="../Compositional/#plfa_plfa-part3-Compositional-15248" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-15250" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15252" href="../Compositional/#plfa_plfa-part3-Compositional-13721" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-15256" href="../Compositional/#plfa_plfa-part3-Compositional-15243" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-15258" href="../Compositional/#plfa_plfa-part3-Compositional-15245" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-15259" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15261" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15262" href="../Compositional/#plfa_plfa-part3-Compositional-15262" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-15264" href="../Compositional/#plfa_plfa-part3-Compositional-15264" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-15266" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15268" href="../Compositional/#plfa_plfa-part3-Compositional-15243" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-15270" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-15272" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-15273" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-15277" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15279" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15281" href="../Compositional/#plfa_plfa-part3-Compositional-15262" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-15283" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15285" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15287" href="../Compositional/#plfa_plfa-part3-Compositional-15264" class="Bound">N</a>
    <a id="plfa_plfa-part3-Compositional-15293" class="Comment">---------------------------</a>
  <a id="plfa_plfa-part3-Compositional-15323" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15325" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15327" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15328" href="../Compositional/#plfa_plfa-part3-Compositional-14809" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-15333" href="../Compositional/#plfa_plfa-part3-Compositional-15248" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-15335" href="../Compositional/#plfa_plfa-part3-Compositional-15262" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-15336" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15338" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15340" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15342" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15343" href="../Compositional/#plfa_plfa-part3-Compositional-14809" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-15348" href="../Compositional/#plfa_plfa-part3-Compositional-15248" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-15350" href="../Compositional/#plfa_plfa-part3-Compositional-15264" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15351" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-15353" href="../Compositional/#plfa_plfa-part3-Compositional-15222" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15370" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15371" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15373" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15375" href="../Compositional/#plfa_plfa-part3-Compositional-13759" class="InductiveConstructor">ctx-hole</a><a id="plfa_plfa-part3-Compositional-15383" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15385" href="../Compositional/#plfa_plfa-part3-Compositional-15385" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-15389" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15393" href="../Compositional/#plfa_plfa-part3-Compositional-15385" class="Bound">M≃N</a>
<a id="plfa_plfa-part3-Compositional-15397" href="../Compositional/#plfa_plfa-part3-Compositional-15222" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15414" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15415" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15417" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15419" href="../Compositional/#plfa_plfa-part3-Compositional-13787" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-15427" href="../Compositional/#plfa_plfa-part3-Compositional-15427" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-15429" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15431" href="../Compositional/#plfa_plfa-part3-Compositional-15431" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-15435" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15439" href="../Compositional/#plfa_plfa-part3-Compositional-11663" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-15448" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15449" href="../Compositional/#plfa_plfa-part3-Compositional-15222" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15466" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15467" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15469" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15471" href="../Compositional/#plfa_plfa-part3-Compositional-15427" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-15473" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15475" href="../Compositional/#plfa_plfa-part3-Compositional-15431" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-15478" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-15480" href="../Compositional/#plfa_plfa-part3-Compositional-15222" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15497" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15498" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15500" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15502" href="../Compositional/#plfa_plfa-part3-Compositional-13845" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-15512" href="../Compositional/#plfa_plfa-part3-Compositional-15512" class="Bound">C′</a> <a id="plfa_plfa-part3-Compositional-15515" href="../Compositional/#plfa_plfa-part3-Compositional-15515" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-15516" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15518" href="../Compositional/#plfa_plfa-part3-Compositional-15518" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-15522" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15526" href="../Compositional/#plfa_plfa-part3-Compositional-12898" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-15535" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15536" href="../Compositional/#plfa_plfa-part3-Compositional-15222" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15553" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15554" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15556" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15558" href="../Compositional/#plfa_plfa-part3-Compositional-15512" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-15560" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15562" href="../Compositional/#plfa_plfa-part3-Compositional-15518" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-15565" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15567" class="Symbol">λ</a> <a id="plfa_plfa-part3-Compositional-15569" href="../Compositional/#plfa_plfa-part3-Compositional-15569" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-15571" href="../Compositional/#plfa_plfa-part3-Compositional-15571" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-15573" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15575" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-15577" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15580" href="../Compositional/#plfa_plfa-part3-Compositional-15580" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15582" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15584" href="../Compositional/#plfa_plfa-part3-Compositional-15580" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-15585" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15587" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-15589" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15592" href="../Compositional/#plfa_plfa-part3-Compositional-15592" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15594" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15596" href="../Compositional/#plfa_plfa-part3-Compositional-15592" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-15597" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15599" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-15601" href="../Compositional/#plfa_plfa-part3-Compositional-15222" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15618" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15619" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15621" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15623" href="../Compositional/#plfa_plfa-part3-Compositional-13894" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-15633" href="../Compositional/#plfa_plfa-part3-Compositional-15633" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-15635" href="../Compositional/#plfa_plfa-part3-Compositional-15635" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-15637" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15639" href="../Compositional/#plfa_plfa-part3-Compositional-15639" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-15643" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15647" href="../Compositional/#plfa_plfa-part3-Compositional-12898" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-15656" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15659" href="../Compositional/#plfa_plfa-part3-Compositional-15659" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-15661" href="../Compositional/#plfa_plfa-part3-Compositional-15661" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-15663" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15665" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-15667" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15670" href="../Compositional/#plfa_plfa-part3-Compositional-15670" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15672" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15674" href="../Compositional/#plfa_plfa-part3-Compositional-15670" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-15675" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15677" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-15679" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15682" href="../Compositional/#plfa_plfa-part3-Compositional-15682" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15684" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15686" href="../Compositional/#plfa_plfa-part3-Compositional-15682" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-15687" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15689" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-15690" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15692" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15693" href="../Compositional/#plfa_plfa-part3-Compositional-15222" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15710" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15711" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15713" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15715" href="../Compositional/#plfa_plfa-part3-Compositional-15635" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-15717" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15719" href="../Compositional/#plfa_plfa-part3-Compositional-15639" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-15722" class="Symbol">)</a>
</pre><p>The proof is a straightforward induction on the context <code>C</code>, using the congruence properties <code>lam-cong</code> and <code>app-cong</code> that we established above.</p><h2 id="the-denotational-semantics-defined-as-a-function">The denotational semantics defined as a function</h2><p>Having established the three equations <code>var-equiv</code>, <code>lam-equiv</code>, and <code>app-equiv</code>, one should be able to define the denotational semantics as a recursive function over the input term <code>M</code>. Indeed, we define the following function <code>⟦ M ⟧</code> that maps terms to denotations, using the auxiliary curry <code>ℱ</code> and apply <code>●</code> functions in the cases for lambda and application, respectively.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-⟦_⟧"></a><a id="plfa_plfa-part3-Compositional-16315" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟦_⟧</a> <a id="plfa_plfa-part3-Compositional-16319" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16321" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-16323" href="../Compositional/#plfa_plfa-part3-Compositional-16323" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16324" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16326" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16328" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16329" href="../Compositional/#plfa_plfa-part3-Compositional-16329" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16331" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16333" href="../Compositional/#plfa_plfa-part3-Compositional-16323" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-16335" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-16337" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-16338" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16340" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16342" href="../Denotational/#plfa_plfa-part3-Denotational-22012" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-16353" href="../Compositional/#plfa_plfa-part3-Compositional-16323" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-16355" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16357" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-16359" href="../Compositional/#plfa_plfa-part3-Compositional-16359" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-16361" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-16363" href="../Compositional/#plfa_plfa-part3-Compositional-16363" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16365" href="../Compositional/#plfa_plfa-part3-Compositional-16365" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16367" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16369" href="../Compositional/#plfa_plfa-part3-Compositional-16365" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16371" href="../Denotational/#plfa_plfa-part3-Denotational-5436" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-16373" href="../Compositional/#plfa_plfa-part3-Compositional-16363" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16375" href="../Compositional/#plfa_plfa-part3-Compositional-16359" class="Bound">x</a>
<a id="plfa_plfa-part3-Compositional-16377" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16379" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-16381" href="../Compositional/#plfa_plfa-part3-Compositional-16381" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-16383" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-16385" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16387" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-16389" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16391" href="../Compositional/#plfa_plfa-part3-Compositional-16381" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-16393" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟧</a>
<a id="plfa_plfa-part3-Compositional-16395" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16397" href="../Compositional/#plfa_plfa-part3-Compositional-16397" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16399" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16401" href="../Compositional/#plfa_plfa-part3-Compositional-16401" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16403" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-16405" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16407" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16409" href="../Compositional/#plfa_plfa-part3-Compositional-16397" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16411" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-16413" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16415" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16417" href="../Compositional/#plfa_plfa-part3-Compositional-16401" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16419" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟧</a>
</pre><p>The proof that <code>ℰ M</code> is denotationally equal to <code>⟦ M ⟧</code> is a straightforward induction, using the three equations <code>var-equiv</code>, <code>lam-equiv</code>, and <code>app-equiv</code> together with the congruence lemmas for <code>ℱ</code> and <code>●</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰ≃⟦⟧"></a><a id="plfa_plfa-part3-Compositional-16644" href="../Compositional/#plfa_plfa-part3-Compositional-16644" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16649" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16651" class="Symbol">∀</a> <a id="plfa_plfa-part3-Compositional-16653" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16654" href="../Compositional/#plfa_plfa-part3-Compositional-16654" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16655" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16657" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16658" href="../Compositional/#plfa_plfa-part3-Compositional-16658" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16660" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16662" href="../Compositional/#plfa_plfa-part3-Compositional-16654" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-16664" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-16666" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-16667" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16669" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16671" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16673" href="../Compositional/#plfa_plfa-part3-Compositional-16658" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16675" href="../Denotational/#plfa_plfa-part3-Denotational-22506" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16677" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16679" href="../Compositional/#plfa_plfa-part3-Compositional-16658" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16681" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟧</a>
<a id="plfa_plfa-part3-Compositional-16683" href="../Compositional/#plfa_plfa-part3-Compositional-16644" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16688" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16689" href="../Compositional/#plfa_plfa-part3-Compositional-16689" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16690" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16692" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16693" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-16695" href="../Compositional/#plfa_plfa-part3-Compositional-16695" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-16696" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16698" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16700" href="../Compositional/#plfa_plfa-part3-Compositional-10151" class="Function">var-equiv</a>
<a id="plfa_plfa-part3-Compositional-16710" href="../Compositional/#plfa_plfa-part3-Compositional-16644" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16715" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16716" href="../Compositional/#plfa_plfa-part3-Compositional-16716" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16717" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16719" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16720" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-16722" href="../Compositional/#plfa_plfa-part3-Compositional-16722" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-16723" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16725" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-16729" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-16733" href="../Compositional/#plfa_plfa-part3-Compositional-16733" class="Bound">ih</a> <a id="plfa_plfa-part3-Compositional-16736" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16738" href="../Compositional/#plfa_plfa-part3-Compositional-16644" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16743" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16744" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-16746" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16748" href="../Compositional/#plfa_plfa-part3-Compositional-16722" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-16749" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16751" class="Keyword">in</a>
    <a id="plfa_plfa-part3-Compositional-16758" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16760" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16761" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-16763" href="../Compositional/#plfa_plfa-part3-Compositional-16722" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-16764" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16768" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16771" href="../Compositional/#plfa_plfa-part3-Compositional-4337" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-16781" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16787" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-16789" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16790" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16792" href="../Compositional/#plfa_plfa-part3-Compositional-16722" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-16793" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16797" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16800" href="../Compositional/#plfa_plfa-part3-Compositional-10985" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-16807" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16808" href="../Compositional/#plfa_plfa-part3-Compositional-16644" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16813" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16814" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-16816" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16818" href="../Compositional/#plfa_plfa-part3-Compositional-16722" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-16819" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-16822" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16828" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-16830" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16832" href="../Compositional/#plfa_plfa-part3-Compositional-16722" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-16834" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-16838" href="../Denotational/#plfa_plfa-part3-Denotational-23796" class="Function Operator">≃⟨⟩</a>
    <a id="plfa_plfa-part3-Compositional-16846" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16848" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-16850" href="../Compositional/#plfa_plfa-part3-Compositional-16722" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-16852" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-16856" href="../Denotational/#plfa_plfa-part3-Denotational-23903" class="Function Operator">☐</a>
<a id="plfa_plfa-part3-Compositional-16858" href="../Compositional/#plfa_plfa-part3-Compositional-16644" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16863" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16864" href="../Compositional/#plfa_plfa-part3-Compositional-16864" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16865" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16867" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16868" href="../Compositional/#plfa_plfa-part3-Compositional-16868" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16870" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16872" href="../Compositional/#plfa_plfa-part3-Compositional-16872" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16873" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16875" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Compositional-16880" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16882" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16883" href="../Compositional/#plfa_plfa-part3-Compositional-16868" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16885" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16887" href="../Compositional/#plfa_plfa-part3-Compositional-16872" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16888" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16892" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16895" href="../Compositional/#plfa_plfa-part3-Compositional-9572" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-16905" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
   <a id="plfa_plfa-part3-Compositional-16910" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16912" href="../Compositional/#plfa_plfa-part3-Compositional-16868" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16914" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16916" href="../Denotational/#plfa_plfa-part3-Denotational-22274" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16918" href="../Compositional/#plfa_plfa-part3-Compositional-16872" class="Bound">M</a>
  <a id="plfa_plfa-part3-Compositional-16922" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16925" href="../Compositional/#plfa_plfa-part3-Compositional-12160" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-16932" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16933" href="../Compositional/#plfa_plfa-part3-Compositional-16644" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16938" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16939" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-16941" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16943" href="../Compositional/#plfa_plfa-part3-Compositional-16868" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-16944" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-16947" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16948" href="../Compositional/#plfa_plfa-part3-Compositional-16644" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16953" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16954" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-16956" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16958" href="../Compositional/#plfa_plfa-part3-Compositional-16872" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16959" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-16962" href="../Denotational/#plfa_plfa-part3-Denotational-23656" class="Function Operator">⟩</a>
   <a id="plfa_plfa-part3-Compositional-16967" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16969" href="../Compositional/#plfa_plfa-part3-Compositional-16868" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16971" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-16973" href="../Compositional/#plfa_plfa-part3-Compositional-5534" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16975" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16977" href="../Compositional/#plfa_plfa-part3-Compositional-16872" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16979" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-16983" href="../Denotational/#plfa_plfa-part3-Denotational-23796" class="Function Operator">≃⟨⟩</a>
    <a id="plfa_plfa-part3-Compositional-16991" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16993" href="../Compositional/#plfa_plfa-part3-Compositional-16868" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16995" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16997" href="../Compositional/#plfa_plfa-part3-Compositional-16872" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16999" href="../Compositional/#plfa_plfa-part3-Compositional-16315" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-17003" href="../Denotational/#plfa_plfa-part3-Denotational-23903" class="Function Operator">☐</a>
</pre><h2 id="unicode">Unicode</h2><p>This chapter uses the following unicode:</p><pre><code>ℱ  U+2131  SCRIPT CAPITAL F (\McF)
●  U+2131  BLACK CIRCLE (\cib)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Denotational/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Compositional.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Soundness/">下一章</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">编程语言基础：Agda 描述</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>