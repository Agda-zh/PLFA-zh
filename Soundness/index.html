<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>编程语言基础：Agda 描述 – Soundness</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">编程语言基础：Agda 描述</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">主页</a> <a class="page-link" href="../Announcements/">公告</a> <a class="page-link" href="../GettingStarted/">使用说明</a> <a class="page-link" href="../Citing/">引用</a> <a class="page-link" href="https://plfa.github.io/">English</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Compositional/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Soundness.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Adequacy/">下一章</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Soundness: 指称语义归约的可靠性</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part3-Soundness-109" class="Keyword">module</a> <a id="plfa_plfa-part3-Soundness-116" href="../Soundness/#" class="Module">plfa.part3.Soundness</a> <a id="plfa_plfa-part3-Soundness-137" class="Keyword">where</a>
</pre><h2 id="简介">简介</h2><p>本章中我们会证明指称语义的归约语义是<strong>可靠（Sound）</strong>的，即对于任意项 <code>L</code>：</p><pre><code>L —↠ ƛ N  蕴含  ℰ L ≃ ℰ (ƛ N)</code></pre><p>证明可通过对归约序列进行归纳得出，因此主引理涉及单个归约步骤。 我们需要证明，如果任何项 <code>M</code> 步进到项 <code>N</code>，则 <code>M</code> 和 <code>M</code> 的指称相等。 我们将分别证明「当且仅当」的两个方向，一个方向类似于<strong>保型性（type preservation）</strong>的证明， 另一个方向类似于反向归约（即展开）的保型性证明。回想一下， 保型性有时称为<strong>主体归约（subject reduction）</strong>。 反向的保型性是一个众所周知的属性，称为<strong>主体展开（subject expansion）</strong>。 众所周知，大多数类型化 λ-演算都不满足主体展开！ （译注：一个 subject 是形如 <code>(1*2+3) : Int</code> 这样已经确定类型的项。 大多数类型化 λ-演算会失去保型性的原因参见<a href="https://www.bananaspace.org/wiki/%E7%B1%BB%E5%9E%8B%E4%B8%8D%E5%8F%98%E6%80%A7">类型不变性</a>。）</p><h2 id="导入">导入</h2><pre class="Agda"><a id="plfa_plfa-part3-Soundness-1530" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1535" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1542" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
  <a id="plfa_plfa-part3-Soundness-1582" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1588" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1589" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="plfa_plfa-part3-Soundness-1592" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1594" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#830" class="Function Operator">_≢_</a><a id="plfa_plfa-part3-Soundness-1597" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1599" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-1603" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1605" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a><a id="plfa_plfa-part3-Soundness-1608" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1610" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a><a id="plfa_plfa-part3-Soundness-1614" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1616" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1367" class="Function">cong₂</a><a id="plfa_plfa-part3-Soundness-1621" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1623" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1461" class="Function">cong-app</a><a id="plfa_plfa-part3-Soundness-1631" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1633" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1638" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1645" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html" class="Module">Data.Product</a> <a id="plfa_plfa-part3-Soundness-1658" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1664" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1665" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">_×_</a><a id="plfa_plfa-part3-Soundness-1668" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1670" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="plfa_plfa-part3-Soundness-1671" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1673" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ-syntax</a><a id="plfa_plfa-part3-Soundness-1681" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1683" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1369" class="Function">∃</a><a id="plfa_plfa-part3-Soundness-1684" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1686" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1806" class="Function">∃-syntax</a><a id="plfa_plfa-part3-Soundness-1694" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1696" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a><a id="plfa_plfa-part3-Soundness-1701" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1703" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a><a id="plfa_plfa-part3-Soundness-1708" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-1712" class="Keyword">renaming</a> <a id="plfa_plfa-part3-Soundness-1721" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1722" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part3-Soundness-1726" class="Symbol">to</a> <a id="plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part3-Soundness-1734" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1736" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1741" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1748" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html" class="Module">Agda.Primitive</a> <a id="plfa_plfa-part3-Soundness-1763" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1769" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1770" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#758" class="Primitive">lzero</a><a id="plfa_plfa-part3-Soundness-1775" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1777" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1782" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1789" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="plfa_plfa-part3-Soundness-1806" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1812" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1813" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#656" class="Function Operator">¬_</a><a id="plfa_plfa-part3-Soundness-1815" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1817" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1822" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1829" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Negation.html" class="Module">Relation.Nullary.Negation</a> <a id="plfa_plfa-part3-Soundness-1855" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1861" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1862" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Negation.Core.html#778" class="Function">contradiction</a><a id="plfa_plfa-part3-Soundness-1875" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1877" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1882" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1889" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html" class="Module">Data.Empty</a> <a id="plfa_plfa-part3-Soundness-1900" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1906" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1907" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html#628" class="Function">⊥-elim</a><a id="plfa_plfa-part3-Soundness-1913" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1915" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1920" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1927" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="plfa_plfa-part3-Soundness-1944" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1950" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1951" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1511" class="Record">Dec</a><a id="plfa_plfa-part3-Soundness-1954" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1956" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a><a id="plfa_plfa-part3-Soundness-1959" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1961" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a><a id="plfa_plfa-part3-Soundness-1963" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1965" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1970" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1977" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.html" class="Module">Function</a> <a id="plfa_plfa-part3-Soundness-1986" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1992" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1993" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">_∘_</a><a id="plfa_plfa-part3-Soundness-1996" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1998" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-2003" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-2010" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
     <a id="plfa_plfa-part3-Soundness-2034" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-2040" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-2041" href="../Untyped/#plfa_plfa-part2-Untyped-3830" class="Datatype">Context</a><a id="plfa_plfa-part3-Soundness-2048" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2050" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part3-Soundness-2053" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2055" href="../Untyped/#plfa_plfa-part2-Untyped-4355" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part3-Soundness-2058" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2060" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part3-Soundness-2063" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2065" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-2066" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2068" href="../Untyped/#plfa_plfa-part2-Untyped-4391" class="InductiveConstructor">Z</a><a id="plfa_plfa-part3-Soundness-2069" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2071" href="../Untyped/#plfa_plfa-part2-Untyped-4436" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part3-Soundness-2073" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2075" href="../Untyped/#plfa_plfa-part2-Untyped-5434" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part3-Soundness-2077" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2079" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part3-Soundness-2081" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2083" href="../Untyped/#plfa_plfa-part2-Untyped-5546" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part3-Soundness-2086" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2100" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a><a id="plfa_plfa-part3-Soundness-2105" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2107" href="../Untyped/#plfa_plfa-part2-Untyped-9555" class="Function Operator">_[_]</a><a id="plfa_plfa-part3-Soundness-2111" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2113" href="../Untyped/#plfa_plfa-part2-Untyped-9439" class="Function">subst-zero</a><a id="plfa_plfa-part3-Soundness-2123" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2125" href="../Untyped/#plfa_plfa-part2-Untyped-7663" class="Function">ext</a><a id="plfa_plfa-part3-Soundness-2128" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2130" href="../Untyped/#plfa_plfa-part2-Untyped-8055" class="Function">rename</a><a id="plfa_plfa-part3-Soundness-2136" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2138" href="../Untyped/#plfa_plfa-part2-Untyped-8582" class="Function">exts</a><a id="plfa_plfa-part3-Soundness-2142" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2156" href="../Untyped/#plfa_plfa-part2-Untyped-12855" class="Datatype Operator">_—→_</a><a id="plfa_plfa-part3-Soundness-2160" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2162" href="../Untyped/#plfa_plfa-part2-Untyped-12905" class="InductiveConstructor">ξ₁</a><a id="plfa_plfa-part3-Soundness-2164" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2166" href="../Untyped/#plfa_plfa-part2-Untyped-12995" class="InductiveConstructor">ξ₂</a><a id="plfa_plfa-part3-Soundness-2168" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2170" href="../Untyped/#plfa_plfa-part2-Untyped-13085" class="InductiveConstructor">β</a><a id="plfa_plfa-part3-Soundness-2171" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2173" href="../Untyped/#plfa_plfa-part2-Untyped-13193" class="InductiveConstructor">ζ</a><a id="plfa_plfa-part3-Soundness-2174" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2176" href="../Untyped/#plfa_plfa-part2-Untyped-14249" class="Datatype Operator">_—↠_</a><a id="plfa_plfa-part3-Soundness-2180" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2182" href="../Untyped/#plfa_plfa-part2-Untyped-14437" class="InductiveConstructor Operator">_—→⟨_⟩_</a><a id="plfa_plfa-part3-Soundness-2189" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2191" href="../Untyped/#plfa_plfa-part2-Untyped-14295" class="InductiveConstructor Operator">_∎</a><a id="plfa_plfa-part3-Soundness-2193" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-2195" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-2200" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-2207" href="../Substitution/#" class="Module">plfa.part2.Substitution</a> <a id="plfa_plfa-part3-Soundness-2231" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-2237" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-2238" href="../Substitution/#plfa_plfa-part2-Substitution-2603" class="Function">Rename</a><a id="plfa_plfa-part3-Soundness-2244" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2246" href="../Substitution/#plfa_plfa-part2-Substitution-2882" class="Function">Subst</a><a id="plfa_plfa-part3-Soundness-2251" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2253" href="../Substitution/#plfa_plfa-part2-Substitution-3762" class="Function">ids</a><a id="plfa_plfa-part3-Soundness-2256" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-2258" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-2263" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-2270" href="../Denotational/#" class="Module">plfa.part3.Denotational</a>
     <a id="plfa_plfa-part3-Soundness-2299" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-2305" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-2306" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a><a id="plfa_plfa-part3-Soundness-2311" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2313" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Soundness-2314" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2316" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a><a id="plfa_plfa-part3-Soundness-2319" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2321" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">_⊢_↓_</a><a id="plfa_plfa-part3-Soundness-2326" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2328" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">_`,_</a><a id="plfa_plfa-part3-Soundness-2332" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2334" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">_⊑_</a><a id="plfa_plfa-part3-Soundness-2337" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2339" href="../Denotational/#plfa_plfa-part3-Denotational-9696" class="Function Operator">_`⊑_</a><a id="plfa_plfa-part3-Soundness-2343" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2345" href="../Denotational/#plfa_plfa-part3-Denotational-9950" class="Function">`⊥</a><a id="plfa_plfa-part3-Soundness-2347" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2349" href="../Denotational/#plfa_plfa-part3-Denotational-9979" class="Function Operator">_`⊔_</a><a id="plfa_plfa-part3-Soundness-2353" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2355" href="../Denotational/#plfa_plfa-part3-Denotational-9222" class="Function">init</a><a id="plfa_plfa-part3-Soundness-2359" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2361" href="../Denotational/#plfa_plfa-part3-Denotational-9277" class="Function">last</a><a id="plfa_plfa-part3-Soundness-2365" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2367" href="../Denotational/#plfa_plfa-part3-Denotational-9326" class="Function">init-last</a><a id="plfa_plfa-part3-Soundness-2376" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2390" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Soundness-2396" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2398" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a><a id="plfa_plfa-part3-Soundness-2405" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2407" href="../Denotational/#plfa_plfa-part3-Denotational-10539" class="Function">`⊑-refl</a><a id="plfa_plfa-part3-Soundness-2414" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2416" href="../Denotational/#plfa_plfa-part3-Denotational-32332" class="Function">⊑-env</a><a id="plfa_plfa-part3-Soundness-2421" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2423" href="../Denotational/#plfa_plfa-part3-Denotational-10610" class="Function">⊑-env-conj-R1</a><a id="plfa_plfa-part3-Soundness-2436" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2438" href="../Denotational/#plfa_plfa-part3-Denotational-10716" class="Function">⊑-env-conj-R2</a><a id="plfa_plfa-part3-Soundness-2451" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2453" href="../Denotational/#plfa_plfa-part3-Denotational-32854" class="Function">up-env</a><a id="plfa_plfa-part3-Soundness-2459" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2473" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-2476" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2478" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Soundness-2484" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2486" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a><a id="plfa_plfa-part3-Soundness-2493" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2495" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a><a id="plfa_plfa-part3-Soundness-2502" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2504" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Soundness-2511" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2513" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a><a id="plfa_plfa-part3-Soundness-2516" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2530" href="../Denotational/#plfa_plfa-part3-Denotational-30331" class="Function">rename-pres</a><a id="plfa_plfa-part3-Soundness-2541" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2543" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a><a id="plfa_plfa-part3-Soundness-2544" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2546" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">_≃_</a><a id="plfa_plfa-part3-Soundness-2549" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2551" href="../Denotational/#plfa_plfa-part3-Denotational-22926" class="Function">≃-trans</a><a id="plfa_plfa-part3-Soundness-2558" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-2560" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-2565" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-2572" href="../Compositional/#" class="Module">plfa.part3.Compositional</a> <a id="plfa_plfa-part3-Soundness-2597" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-2603" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-2604" href="../Compositional/#plfa_plfa-part3-Compositional-4472" class="Function">lambda-inversion</a><a id="plfa_plfa-part3-Soundness-2620" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2622" href="../Compositional/#plfa_plfa-part3-Compositional-12866" class="Function">var-inv</a><a id="plfa_plfa-part3-Soundness-2629" class="Symbol">)</a>
</pre><h2 id="向前归约保持指称不变">向前归约保持指称不变</h2><p>本节中对指称不变性的证明使用了前一章中的技术。和 STLC 的不变性证明一样，我们保留了独立于语法定义的关系，这与内在类型项相反。 另一方面，我们对变量使用了 de Bruijn 索引。</p><p>证明的大纲保持不变，因为我们必须证明归约关系中使用的所有辅助函数的引理： 代换、重命名和扩展。</p><h3 id="同时代换保持指称不变">同时代换保持指称不变</h3><p>我们接下来的目标是证明同时代换变量和环境会保持含义不变。也就是说，若 <code>M</code> 在环境 <code>γ</code> 中的结果是 <code>v</code>，那么代换 <code>σ</code> 应用到 <code>M</code> 所得的程序，其结果仍然是 <code>v</code>， 但环境转移到了 <code>δ</code> 中。该环境中对于每一个变量 <code>x</code>，<code>σ x</code> 产生的结果值与原始环境 <code>γ</code> 中的 <code>x</code> 的值相同。我们将这种情况写作 <code>δ `⊢ σ ↓ γ</code>。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-4041" class="Keyword">infix</a> <a id="plfa_plfa-part3-Soundness-4047" class="Number">3</a> <a id="plfa_plfa-part3-Soundness-4049" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">_`⊢_↓_</a>
<a id="plfa_plfa-part3-Soundness-_`⊢_↓_"></a><a id="plfa_plfa-part3-Soundness-4056" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">_`⊢_↓_</a> <a id="plfa_plfa-part3-Soundness-4063" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4065" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-4067" href="../Soundness/#plfa_plfa-part3-Soundness-4067" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-4069" href="../Soundness/#plfa_plfa-part3-Soundness-4069" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-4070" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4072" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4074" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4078" href="../Soundness/#plfa_plfa-part3-Soundness-4067" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-4080" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4082" href="../Substitution/#plfa_plfa-part2-Substitution-2882" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-4088" href="../Soundness/#plfa_plfa-part3-Soundness-4069" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4090" href="../Soundness/#plfa_plfa-part3-Soundness-4067" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-4092" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4094" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4098" href="../Soundness/#plfa_plfa-part3-Soundness-4069" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4100" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4102" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a>
<a id="plfa_plfa-part3-Soundness-4106" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">_`⊢_↓_</a> <a id="plfa_plfa-part3-Soundness-4113" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4114" href="../Soundness/#plfa_plfa-part3-Soundness-4114" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-4115" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-4117" href="../Soundness/#plfa_plfa-part3-Soundness-4117" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-4118" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4120" href="../Soundness/#plfa_plfa-part3-Soundness-4120" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4122" href="../Soundness/#plfa_plfa-part3-Soundness-4122" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4124" href="../Soundness/#plfa_plfa-part3-Soundness-4124" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4126" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4128" class="Symbol">(∀</a> <a id="plfa_plfa-part3-Soundness-4131" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4132" href="../Soundness/#plfa_plfa-part3-Soundness-4132" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-4134" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4136" href="../Soundness/#plfa_plfa-part3-Soundness-4117" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4138" href="../Untyped/#plfa_plfa-part2-Untyped-4355" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-4140" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-4141" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4143" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4145" href="../Soundness/#plfa_plfa-part3-Soundness-4120" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4147" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-4149" href="../Soundness/#plfa_plfa-part3-Soundness-4122" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4151" href="../Soundness/#plfa_plfa-part3-Soundness-4132" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-4153" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4155" href="../Soundness/#plfa_plfa-part3-Soundness-4124" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4157" href="../Soundness/#plfa_plfa-part3-Soundness-4132" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-4158" class="Symbol">)</a>
</pre><p>和之前一样，为了证明 λ-抽象，我们需要证明一个扩展引理， 该引理说明了将 <code>exts</code> 函数应用于代换会产生一个新的代换，该代换将变量映射到项， 使得当对 <code>δ , v</code> 求值时会产生 <code>γ , v</code> 中的值。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-ext"></a><a id="plfa_plfa-part3-Soundness-4544" href="../Soundness/#plfa_plfa-part3-Soundness-4544" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-4554" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4556" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-4558" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4559" href="../Soundness/#plfa_plfa-part3-Soundness-4559" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4561" href="../Soundness/#plfa_plfa-part3-Soundness-4561" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-4563" href="../Soundness/#plfa_plfa-part3-Soundness-4563" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-4564" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4566" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4567" href="../Soundness/#plfa_plfa-part3-Soundness-4567" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4569" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4571" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4575" href="../Soundness/#plfa_plfa-part3-Soundness-4559" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-4576" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4578" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4579" href="../Soundness/#plfa_plfa-part3-Soundness-4579" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4581" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4583" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4587" href="../Soundness/#plfa_plfa-part3-Soundness-4561" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-4588" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-4592" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4594" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4595" href="../Soundness/#plfa_plfa-part3-Soundness-4595" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4597" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4599" href="../Substitution/#plfa_plfa-part2-Substitution-2882" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-4605" href="../Soundness/#plfa_plfa-part3-Soundness-4559" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4607" href="../Soundness/#plfa_plfa-part3-Soundness-4561" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-4608" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-4612" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4614" href="../Soundness/#plfa_plfa-part3-Soundness-4579" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4616" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-4619" href="../Soundness/#plfa_plfa-part3-Soundness-4595" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4621" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4623" href="../Soundness/#plfa_plfa-part3-Soundness-4567" class="Bound">γ</a>
   <a id="plfa_plfa-part3-Soundness-4628" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part3-Soundness-4657" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4659" href="../Soundness/#plfa_plfa-part3-Soundness-4579" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4661" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-4664" href="../Soundness/#plfa_plfa-part3-Soundness-4563" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-4666" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-4669" href="../Untyped/#plfa_plfa-part2-Untyped-8582" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-4674" href="../Soundness/#plfa_plfa-part3-Soundness-4595" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4676" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4678" href="../Soundness/#plfa_plfa-part3-Soundness-4567" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4680" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-4683" href="../Soundness/#plfa_plfa-part3-Soundness-4563" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-4685" href="../Soundness/#plfa_plfa-part3-Soundness-4544" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-4695" href="../Soundness/#plfa_plfa-part3-Soundness-4695" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4697" href="../Soundness/#plfa_plfa-part3-Soundness-4697" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-4699" href="../Untyped/#plfa_plfa-part2-Untyped-4391" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-4701" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4703" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a>
<a id="plfa_plfa-part3-Soundness-4707" href="../Soundness/#plfa_plfa-part3-Soundness-4544" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-4717" href="../Soundness/#plfa_plfa-part3-Soundness-4717" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4719" href="../Soundness/#plfa_plfa-part3-Soundness-4719" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-4721" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4722" href="../Untyped/#plfa_plfa-part2-Untyped-4436" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-4724" href="../Soundness/#plfa_plfa-part3-Soundness-4724" class="Bound">x′</a><a id="plfa_plfa-part3-Soundness-4726" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4728" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4730" href="../Denotational/#plfa_plfa-part3-Denotational-30331" class="Function">rename-pres</a> <a id="plfa_plfa-part3-Soundness-4742" href="../Untyped/#plfa_plfa-part2-Untyped-4436" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part3-Soundness-4745" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-4748" href="../Soundness/#plfa_plfa-part3-Soundness-4748" class="Bound">_</a> <a id="plfa_plfa-part3-Soundness-4750" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4752" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Soundness-4758" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4760" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4761" href="../Soundness/#plfa_plfa-part3-Soundness-4719" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-4763" href="../Soundness/#plfa_plfa-part3-Soundness-4724" class="Bound">x′</a><a id="plfa_plfa-part3-Soundness-4765" class="Symbol">)</a>
</pre><p>该证明通过对 de Bruijn 索引 <code>x</code> 进行情况分析来论证：</p><ul><li><p>若索引为 <code>Z</code>，那么我们需要证明 <code>δ , v ⊢ # 0 ↓ v</code>， 它可通过规则 <code>var</code> 得证。</p></li><li><p>若索引为 <code>S x′</code> 那么我们需要证明 <code>δ , v ⊢ rename S_ (σ x′) ↓ γ x′</code>， 它可通过 <code>rename-pres</code> 引理证明。</p></li></ul><p>有了这个扩展引理，同时代换会保持含义不变的证明就很直白了，我们继续深入：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-pres"></a><a id="plfa_plfa-part3-Soundness-5421" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5432" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5434" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-5436" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5437" href="../Soundness/#plfa_plfa-part3-Soundness-5437" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-5439" href="../Soundness/#plfa_plfa-part3-Soundness-5439" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-5441" href="../Soundness/#plfa_plfa-part3-Soundness-5441" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-5442" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5444" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5445" href="../Soundness/#plfa_plfa-part3-Soundness-5445" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5447" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5449" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-5453" href="../Soundness/#plfa_plfa-part3-Soundness-5437" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-5454" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5456" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5457" href="../Soundness/#plfa_plfa-part3-Soundness-5457" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-5459" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5461" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-5465" href="../Soundness/#plfa_plfa-part3-Soundness-5439" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-5466" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5468" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5469" href="../Soundness/#plfa_plfa-part3-Soundness-5469" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5471" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5473" href="../Soundness/#plfa_plfa-part3-Soundness-5437" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-5475" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5477" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-5478" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-5482" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5484" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5485" href="../Soundness/#plfa_plfa-part3-Soundness-5485" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5487" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5489" href="../Substitution/#plfa_plfa-part2-Substitution-2882" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-5495" href="../Soundness/#plfa_plfa-part3-Soundness-5437" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-5497" href="../Soundness/#plfa_plfa-part3-Soundness-5439" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-5498" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-5502" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5504" href="../Soundness/#plfa_plfa-part3-Soundness-5457" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-5506" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-5509" href="../Soundness/#plfa_plfa-part3-Soundness-5485" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5511" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5513" href="../Soundness/#plfa_plfa-part3-Soundness-5445" class="Bound">γ</a>
  <a id="plfa_plfa-part3-Soundness-5517" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5519" href="../Soundness/#plfa_plfa-part3-Soundness-5445" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5521" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5523" href="../Soundness/#plfa_plfa-part3-Soundness-5469" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5525" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5527" href="../Soundness/#plfa_plfa-part3-Soundness-5441" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-5533" class="Comment">------------------</a>
  <a id="plfa_plfa-part3-Soundness-5554" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5556" href="../Soundness/#plfa_plfa-part3-Soundness-5457" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-5558" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5560" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a> <a id="plfa_plfa-part3-Soundness-5566" href="../Soundness/#plfa_plfa-part3-Soundness-5485" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5568" href="../Soundness/#plfa_plfa-part3-Soundness-5469" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5570" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5572" href="../Soundness/#plfa_plfa-part3-Soundness-5441" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-5574" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5585" href="../Soundness/#plfa_plfa-part3-Soundness-5585" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5587" href="../Soundness/#plfa_plfa-part3-Soundness-5587" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5589" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5590" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-5594" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5595" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-5597" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5599" href="../Soundness/#plfa_plfa-part3-Soundness-5599" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-5600" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-5603" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5605" href="../Soundness/#plfa_plfa-part3-Soundness-5587" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5607" href="../Soundness/#plfa_plfa-part3-Soundness-5599" class="Bound">x</a>
<a id="plfa_plfa-part3-Soundness-5609" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5620" href="../Soundness/#plfa_plfa-part3-Soundness-5620" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5622" href="../Soundness/#plfa_plfa-part3-Soundness-5622" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5624" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5625" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-5632" href="../Soundness/#plfa_plfa-part3-Soundness-5632" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-5635" href="../Soundness/#plfa_plfa-part3-Soundness-5635" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-5637" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5639" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-5643" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-5650" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5651" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5662" href="../Soundness/#plfa_plfa-part3-Soundness-5620" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5664" href="../Soundness/#plfa_plfa-part3-Soundness-5622" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5666" href="../Soundness/#plfa_plfa-part3-Soundness-5632" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-5668" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5670" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5671" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5682" href="../Soundness/#plfa_plfa-part3-Soundness-5620" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5684" href="../Soundness/#plfa_plfa-part3-Soundness-5622" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5686" href="../Soundness/#plfa_plfa-part3-Soundness-5635" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-5688" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-5690" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5701" href="../Soundness/#plfa_plfa-part3-Soundness-5701" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5703" href="../Soundness/#plfa_plfa-part3-Soundness-5703" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5705" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5706" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-5714" href="../Soundness/#plfa_plfa-part3-Soundness-5714" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-5715" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5717" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-5721" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-5729" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5730" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5741" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-5744" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5745" href="../Soundness/#plfa_plfa-part3-Soundness-5745" class="Bound">A</a><a id="plfa_plfa-part3-Soundness-5746" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5748" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5750" href="../Untyped/#plfa_plfa-part2-Untyped-8582" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-5755" href="../Soundness/#plfa_plfa-part3-Soundness-5701" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-5756" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5758" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5759" href="../Soundness/#plfa_plfa-part3-Soundness-4544" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-5769" href="../Soundness/#plfa_plfa-part3-Soundness-5701" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5771" href="../Soundness/#plfa_plfa-part3-Soundness-5703" class="Bound">s</a><a id="plfa_plfa-part3-Soundness-5772" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5774" href="../Soundness/#plfa_plfa-part3-Soundness-5714" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-5775" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-5777" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5788" href="../Soundness/#plfa_plfa-part3-Soundness-5788" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5790" href="../Soundness/#plfa_plfa-part3-Soundness-5790" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5792" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-5800" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5802" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-5810" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5821" href="../Soundness/#plfa_plfa-part3-Soundness-5821" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5823" href="../Soundness/#plfa_plfa-part3-Soundness-5823" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5825" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5826" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-5834" href="../Soundness/#plfa_plfa-part3-Soundness-5834" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-5837" href="../Soundness/#plfa_plfa-part3-Soundness-5837" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-5839" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5841" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-5845" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-5853" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5854" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5865" href="../Soundness/#plfa_plfa-part3-Soundness-5821" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5867" href="../Soundness/#plfa_plfa-part3-Soundness-5823" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5869" href="../Soundness/#plfa_plfa-part3-Soundness-5834" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-5871" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5873" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5874" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5885" href="../Soundness/#plfa_plfa-part3-Soundness-5821" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5887" href="../Soundness/#plfa_plfa-part3-Soundness-5823" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5889" href="../Soundness/#plfa_plfa-part3-Soundness-5837" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-5891" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-5893" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5904" href="../Soundness/#plfa_plfa-part3-Soundness-5904" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5906" href="../Soundness/#plfa_plfa-part3-Soundness-5906" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5908" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5909" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-5913" href="../Soundness/#plfa_plfa-part3-Soundness-5913" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-5915" href="../Soundness/#plfa_plfa-part3-Soundness-5915" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-5917" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5919" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5921" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-5925" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5926" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5937" href="../Soundness/#plfa_plfa-part3-Soundness-5904" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5939" href="../Soundness/#plfa_plfa-part3-Soundness-5906" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5941" href="../Soundness/#plfa_plfa-part3-Soundness-5913" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-5942" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5944" href="../Soundness/#plfa_plfa-part3-Soundness-5915" class="Bound">lt</a>
</pre><p>我们通过对 <code>M</code> 的语义进行归纳来证明。两个有趣的情况分别对应于变量和 λ-抽象：</p><ul><li><p>对于变量 <code>x</code>，我们有 <code>v = γ x</code>，于是需要证明 <code>δ ⊢ σ x ↓ v</code>。 将前提应用到 <code>x</code>，我们有 <code>δ ⊢ σ x ↓ γ x</code>，即 <code>δ ⊢ σ x ↓ v</code>.</p></li><li><p>对于 λ-抽象，我们必须为归纳假设扩展代换。应用 <code>subst-ext</code> 引理可证明扩展的代换会将变量映射到产生对应值的项。</p></li></ul><h3 id="单一代换保持指称不变">单一代换保持指称不变</h3><p>对于 β-规约 <code>(ƛ N) · M —→ N [ M ]</code>，我们需要证明当用 <code>M</code> 代换项 <code>N</code> 中的 de Bruijn 索引 0 时，语义保持不变。通过对规则 <code>↦-elim</code> 和 <code>↦-intro</code> 进行反演，我们可得到 <code>γ , v ⊢ M ↓ w</code> 和 <code>γ ⊢ N ↓ v</code>。因此，我们需要证明 <code>γ ⊢ M [ N ] ↓ w</code>，或等价地证明 <code>γ ⊢ subst (subst-zero N) M ↓ w</code>。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-substitution"></a><a id="plfa_plfa-part3-Soundness-7342" href="../Soundness/#plfa_plfa-part3-Soundness-7342" class="Function">substitution</a> <a id="plfa_plfa-part3-Soundness-7355" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-7357" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-7359" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-7360" href="../Soundness/#plfa_plfa-part3-Soundness-7360" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-7361" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-7363" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-7364" href="../Soundness/#plfa_plfa-part3-Soundness-7364" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7366" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-7368" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-7372" href="../Soundness/#plfa_plfa-part3-Soundness-7360" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-7373" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-7375" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-7376" href="../Soundness/#plfa_plfa-part3-Soundness-7376" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-7378" href="../Soundness/#plfa_plfa-part3-Soundness-7378" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-7380" href="../Soundness/#plfa_plfa-part3-Soundness-7380" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-7382" href="../Soundness/#plfa_plfa-part3-Soundness-7382" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-7383" class="Symbol">}</a>
   <a id="plfa_plfa-part3-Soundness-7388" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-7390" href="../Soundness/#plfa_plfa-part3-Soundness-7364" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7392" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-7395" href="../Soundness/#plfa_plfa-part3-Soundness-7380" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-7397" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-7399" href="../Soundness/#plfa_plfa-part3-Soundness-7376" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-7401" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-7403" href="../Soundness/#plfa_plfa-part3-Soundness-7382" class="Bound">w</a>
   <a id="plfa_plfa-part3-Soundness-7408" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-7410" href="../Soundness/#plfa_plfa-part3-Soundness-7364" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7412" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-7414" href="../Soundness/#plfa_plfa-part3-Soundness-7378" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-7416" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-7418" href="../Soundness/#plfa_plfa-part3-Soundness-7380" class="Bound">v</a>
     <a id="plfa_plfa-part3-Soundness-7425" class="Comment">---------------</a>
   <a id="plfa_plfa-part3-Soundness-7444" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-7446" href="../Soundness/#plfa_plfa-part3-Soundness-7364" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7448" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-7450" href="../Soundness/#plfa_plfa-part3-Soundness-7376" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-7452" href="../Untyped/#plfa_plfa-part2-Untyped-9555" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-7454" href="../Soundness/#plfa_plfa-part3-Soundness-7378" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-7456" href="../Untyped/#plfa_plfa-part2-Untyped-9555" class="Function Operator">]</a> <a id="plfa_plfa-part3-Soundness-7458" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-7460" href="../Soundness/#plfa_plfa-part3-Soundness-7382" class="Bound">w</a>
<a id="plfa_plfa-part3-Soundness-7462" href="../Soundness/#plfa_plfa-part3-Soundness-7342" class="Function">substitution</a><a id="plfa_plfa-part3-Soundness-7474" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-7475" href="../Soundness/#plfa_plfa-part3-Soundness-7475" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-7476" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-7478" href="../Soundness/#plfa_plfa-part3-Soundness-7478" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-7479" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-7481" href="../Soundness/#plfa_plfa-part3-Soundness-7481" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-7482" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-7484" href="../Soundness/#plfa_plfa-part3-Soundness-7484" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-7485" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-7487" href="../Soundness/#plfa_plfa-part3-Soundness-7487" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-7488" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-7490" href="../Soundness/#plfa_plfa-part3-Soundness-7490" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-7491" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-7493" href="../Soundness/#plfa_plfa-part3-Soundness-7493" class="Bound">dn</a> <a id="plfa_plfa-part3-Soundness-7496" href="../Soundness/#plfa_plfa-part3-Soundness-7496" class="Bound">dm</a> <a id="plfa_plfa-part3-Soundness-7499" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-7503" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-7514" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-7515" href="../Untyped/#plfa_plfa-part2-Untyped-9439" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-7526" href="../Soundness/#plfa_plfa-part3-Soundness-7484" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-7527" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-7529" href="../Soundness/#plfa_plfa-part3-Soundness-7551" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-7538" href="../Soundness/#plfa_plfa-part3-Soundness-7493" class="Bound">dn</a>
  <a id="plfa_plfa-part3-Soundness-7543" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-7551" href="../Soundness/#plfa_plfa-part3-Soundness-7551" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-7560" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-7562" href="../Soundness/#plfa_plfa-part3-Soundness-7478" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7564" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-7567" href="../Untyped/#plfa_plfa-part2-Untyped-9439" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-7578" href="../Soundness/#plfa_plfa-part3-Soundness-7484" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-7580" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-7582" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-7583" href="../Soundness/#plfa_plfa-part3-Soundness-7478" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7585" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-7588" href="../Soundness/#plfa_plfa-part3-Soundness-7487" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-7589" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-7593" href="../Soundness/#plfa_plfa-part3-Soundness-7551" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-7602" href="../Untyped/#plfa_plfa-part2-Untyped-4391" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-7604" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-7606" href="../Soundness/#plfa_plfa-part3-Soundness-7496" class="Bound">dm</a>
  <a id="plfa_plfa-part3-Soundness-7611" href="../Soundness/#plfa_plfa-part3-Soundness-7551" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-7620" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-7621" href="../Untyped/#plfa_plfa-part2-Untyped-4436" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-7623" href="../Soundness/#plfa_plfa-part3-Soundness-7623" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-7624" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-7626" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-7628" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a>
</pre><p>这个结果是同时代换引理的推论。要使用该引理，我们只需要证明 <code>subst-zero M</code> 会将变量映射到某个项，该项产生的值与 <code>γ , v</code> 中产生的值相同。令 <code>y</code> 为任意变量（即 de Bruijn 索引）：</p><ul><li><p>若索引为 <code>Z</code>，则 <code>(subst-zero M) y = M</code> 且 <code>(γ , v) y = v</code>， 根据前提可得 <code>γ ⊢ M ↓ v</code>。</p></li><li><p>若索引为 <code>S x</code>，则 <code>(subst-zero M) (S x) = x</code> 且 <code>(γ , v) (S x) = γ x</code>， 根据规则 <code>var</code> 可得 <code>γ ⊢ x ↓ γ x</code>。</p></li></ul><h3 id="归约保持指称不变">归约保持指称不变</h3><p>有了代换引理，就能直接证明归约保持指称不变：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-preserve"></a><a id="plfa_plfa-part3-Soundness-8645" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8654" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8656" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-8658" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8659" href="../Soundness/#plfa_plfa-part3-Soundness-8659" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-8660" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-8662" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8663" href="../Soundness/#plfa_plfa-part3-Soundness-8663" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-8665" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8667" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-8671" href="../Soundness/#plfa_plfa-part3-Soundness-8659" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-8672" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-8674" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8675" href="../Soundness/#plfa_plfa-part3-Soundness-8675" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-8677" href="../Soundness/#plfa_plfa-part3-Soundness-8677" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-8679" href="../Soundness/#plfa_plfa-part3-Soundness-8679" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-8680" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-8684" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8686" href="../Soundness/#plfa_plfa-part3-Soundness-8663" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-8688" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-8690" href="../Soundness/#plfa_plfa-part3-Soundness-8675" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-8692" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-8694" href="../Soundness/#plfa_plfa-part3-Soundness-8679" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-8698" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8700" href="../Soundness/#plfa_plfa-part3-Soundness-8675" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-8702" href="../Untyped/#plfa_plfa-part2-Untyped-12855" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-8705" href="../Soundness/#plfa_plfa-part3-Soundness-8677" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-8711" class="Comment">----------</a>
  <a id="plfa_plfa-part3-Soundness-8724" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8726" href="../Soundness/#plfa_plfa-part3-Soundness-8663" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-8728" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-8730" href="../Soundness/#plfa_plfa-part3-Soundness-8677" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-8732" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-8734" href="../Soundness/#plfa_plfa-part3-Soundness-8679" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-8736" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8745" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8746" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-8749" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8751" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-8754" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8763" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8764" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-8771" href="../Soundness/#plfa_plfa-part3-Soundness-8771" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-8774" href="../Soundness/#plfa_plfa-part3-Soundness-8774" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-8776" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8778" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8779" href="../Untyped/#plfa_plfa-part2-Untyped-12905" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-8782" href="../Soundness/#plfa_plfa-part3-Soundness-8782" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8783" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8785" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8787" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-8794" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8795" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8804" href="../Soundness/#plfa_plfa-part3-Soundness-8771" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-8807" href="../Soundness/#plfa_plfa-part3-Soundness-8782" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8808" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8810" href="../Soundness/#plfa_plfa-part3-Soundness-8774" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-8813" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8822" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8823" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-8830" href="../Soundness/#plfa_plfa-part3-Soundness-8830" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-8833" href="../Soundness/#plfa_plfa-part3-Soundness-8833" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-8835" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8837" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8838" href="../Untyped/#plfa_plfa-part2-Untyped-12995" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-8841" href="../Soundness/#plfa_plfa-part3-Soundness-8841" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8842" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8844" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8846" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-8853" href="../Soundness/#plfa_plfa-part3-Soundness-8830" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-8856" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8857" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8866" href="../Soundness/#plfa_plfa-part3-Soundness-8833" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-8869" href="../Soundness/#plfa_plfa-part3-Soundness-8841" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8870" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-8872" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8881" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8882" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-8889" href="../Soundness/#plfa_plfa-part3-Soundness-8889" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-8892" href="../Soundness/#plfa_plfa-part3-Soundness-8892" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-8894" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8896" href="../Untyped/#plfa_plfa-part2-Untyped-13085" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-8898" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8900" href="../Soundness/#plfa_plfa-part3-Soundness-7342" class="Function">substitution</a> <a id="plfa_plfa-part3-Soundness-8913" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8914" href="../Compositional/#plfa_plfa-part3-Compositional-4472" class="Function">lambda-inversion</a> <a id="plfa_plfa-part3-Soundness-8931" href="../Soundness/#plfa_plfa-part3-Soundness-8889" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-8933" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8935" href="../Soundness/#plfa_plfa-part3-Soundness-8892" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-8938" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8947" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8948" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-8956" href="../Soundness/#plfa_plfa-part3-Soundness-8956" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-8957" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8959" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8960" href="../Untyped/#plfa_plfa-part2-Untyped-13193" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-8962" href="../Soundness/#plfa_plfa-part3-Soundness-8962" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8963" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8965" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8967" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-8975" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8976" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8985" href="../Soundness/#plfa_plfa-part3-Soundness-8956" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-8987" href="../Soundness/#plfa_plfa-part3-Soundness-8962" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8988" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-8990" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8999" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-9007" href="../Soundness/#plfa_plfa-part3-Soundness-9007" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-9009" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9011" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-9019" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-9028" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9029" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9037" href="../Soundness/#plfa_plfa-part3-Soundness-9037" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-9039" href="../Soundness/#plfa_plfa-part3-Soundness-9039" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9041" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9043" href="../Soundness/#plfa_plfa-part3-Soundness-9043" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-9045" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9047" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9055" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9056" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-9065" href="../Soundness/#plfa_plfa-part3-Soundness-9037" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-9067" href="../Soundness/#plfa_plfa-part3-Soundness-9043" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-9068" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9070" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9071" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-9080" href="../Soundness/#plfa_plfa-part3-Soundness-9039" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9083" href="../Soundness/#plfa_plfa-part3-Soundness-9043" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-9084" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-9086" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-9095" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9096" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9100" href="../Soundness/#plfa_plfa-part3-Soundness-9100" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-9102" href="../Soundness/#plfa_plfa-part3-Soundness-9102" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-9104" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9106" href="../Soundness/#plfa_plfa-part3-Soundness-9106" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-9108" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9110" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9114" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9115" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-9124" href="../Soundness/#plfa_plfa-part3-Soundness-9100" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-9126" href="../Soundness/#plfa_plfa-part3-Soundness-9106" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-9127" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9129" href="../Soundness/#plfa_plfa-part3-Soundness-9102" class="Bound">lt</a>
</pre><p>我们通过对 <code>M</code> 的语义进行归纳，并对归约进行情况分析来证明：</p><ul><li><p>若 <code>M</code> 为变量，则无需归约。</p></li><li><p>若 <code>M</code> 为应用，则归约要么满足合同性（ξ₁ 或 ξ₂），要么是 β-归约。 对于每一种合同性，我们使用归纳假设。对于 β-归约，我们使用代换引理和 <code>sub</code> 规则。</p></li><li><p>其余的情况都很直白。</p></li></ul><h2 id="归约反映了指称不变">归约反映了指称不变</h2><p>本节中将证明归约反映了项的指称不变，换言之，若 <code>N</code> 的结果是 <code>v</code>，且若 <code>M</code> 可归约为 <code>N</code>，则 <code>M</code> 的结果也是 <code>v</code>。虽然此证明和前面的语义保持不变的证明 之间存在一些广泛的相似之处，但我们仍需更多的技术引理才能得到这个结果。</p><p>最主要挑战是处理 β-归约中的代换：</p><pre><code>(ƛ N) · M —→ N [ M ]</code></pre><p>我们有 <code>γ ⊢ N [ M ] ↓ v</code> 且需要证明 <code>γ ⊢ (ƛ N) · M ↓ v</code>。现在考虑 <code>γ ⊢ N [ M ] ↓ v</code> 的推导过程。项 <code>M</code> 在 <code>N [ M ]</code> 中可能会出现 0、1 或多次。 对于它可能出现的任意次数，<code>M</code> 都可能产生不同的值。不过为了构建出 <code>(ƛ N) · M</code> 的推导过程，我们需要单个的 <code>M</code> 值。若 <code>M</code> 出现了超过 1 次，那么我们就能将不同的值用 <code>⊔</code> 连接到一起。若 <code>M</code> 出现了 0 次，那么我们就无需任何关于 <code>M</code> 的信息， 并直接使用 <code>⊥</code> 作为 <code>M</code> 的值。</p><h3 id="重命名反映了含义不变">重命名反映了含义不变</h3><p>首先，我们需要一个前面给出的引理的变体：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-ext-`⊑"></a><a id="plfa_plfa-part3-Soundness-11639" href="../Soundness/#plfa_plfa-part3-Soundness-11639" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-11646" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11648" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-11650" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11651" href="../Soundness/#plfa_plfa-part3-Soundness-11651" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11653" href="../Soundness/#plfa_plfa-part3-Soundness-11653" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-11655" href="../Soundness/#plfa_plfa-part3-Soundness-11655" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-11656" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11658" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11659" href="../Soundness/#plfa_plfa-part3-Soundness-11659" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11661" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11663" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-11667" href="../Soundness/#plfa_plfa-part3-Soundness-11651" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-11668" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11670" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11671" href="../Soundness/#plfa_plfa-part3-Soundness-11671" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11673" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11675" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-11679" href="../Soundness/#plfa_plfa-part3-Soundness-11653" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-11680" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-11684" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11686" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11687" href="../Soundness/#plfa_plfa-part3-Soundness-11687" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-11689" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11691" href="../Substitution/#plfa_plfa-part2-Substitution-2603" class="Function">Rename</a> <a id="plfa_plfa-part3-Soundness-11698" href="../Soundness/#plfa_plfa-part3-Soundness-11651" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11700" href="../Soundness/#plfa_plfa-part3-Soundness-11653" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-11701" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-11705" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11707" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11708" href="../Soundness/#plfa_plfa-part3-Soundness-11671" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11710" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-11712" href="../Soundness/#plfa_plfa-part3-Soundness-11687" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-11713" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11715" href="../Denotational/#plfa_plfa-part3-Denotational-9696" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-11718" href="../Soundness/#plfa_plfa-part3-Soundness-11659" class="Bound">γ</a>
    <a id="plfa_plfa-part3-Soundness-11724" class="Comment">------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-11757" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11759" class="Symbol">((</a><a id="plfa_plfa-part3-Soundness-11761" href="../Soundness/#plfa_plfa-part3-Soundness-11671" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11763" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-11766" href="../Soundness/#plfa_plfa-part3-Soundness-11655" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-11767" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11769" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-11771" href="../Untyped/#plfa_plfa-part2-Untyped-7663" class="Function">ext</a> <a id="plfa_plfa-part3-Soundness-11775" href="../Soundness/#plfa_plfa-part3-Soundness-11687" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-11776" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11778" href="../Denotational/#plfa_plfa-part3-Denotational-9696" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-11781" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11782" href="../Soundness/#plfa_plfa-part3-Soundness-11659" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11784" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-11787" href="../Soundness/#plfa_plfa-part3-Soundness-11655" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-11788" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-11790" href="../Soundness/#plfa_plfa-part3-Soundness-11639" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-11797" href="../Soundness/#plfa_plfa-part3-Soundness-11797" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-11799" href="../Soundness/#plfa_plfa-part3-Soundness-11799" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-11802" href="../Untyped/#plfa_plfa-part2-Untyped-4391" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-11804" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-11806" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a>
<a id="plfa_plfa-part3-Soundness-11813" href="../Soundness/#plfa_plfa-part3-Soundness-11639" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-11820" href="../Soundness/#plfa_plfa-part3-Soundness-11820" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-11822" href="../Soundness/#plfa_plfa-part3-Soundness-11822" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-11825" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11826" href="../Untyped/#plfa_plfa-part2-Untyped-4436" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-11828" href="../Soundness/#plfa_plfa-part3-Soundness-11828" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-11829" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11831" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-11833" href="../Soundness/#plfa_plfa-part3-Soundness-11822" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-11836" href="../Soundness/#plfa_plfa-part3-Soundness-11828" class="Bound">x</a>
</pre><p>然后证明如下：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-rename-reflect"></a><a id="plfa_plfa-part3-Soundness-11900" href="../Soundness/#plfa_plfa-part3-Soundness-11900" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-11915" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11917" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-11919" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11920" href="../Soundness/#plfa_plfa-part3-Soundness-11920" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11922" href="../Soundness/#plfa_plfa-part3-Soundness-11922" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-11924" href="../Soundness/#plfa_plfa-part3-Soundness-11924" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-11925" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11927" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11928" href="../Soundness/#plfa_plfa-part3-Soundness-11928" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11930" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11932" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-11936" href="../Soundness/#plfa_plfa-part3-Soundness-11920" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-11937" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11939" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11940" href="../Soundness/#plfa_plfa-part3-Soundness-11940" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11942" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11944" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-11948" href="../Soundness/#plfa_plfa-part3-Soundness-11922" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-11949" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11951" class="Symbol">{</a> <a id="plfa_plfa-part3-Soundness-11953" href="../Soundness/#plfa_plfa-part3-Soundness-11953" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-11955" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11957" href="../Soundness/#plfa_plfa-part3-Soundness-11920" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11959" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-11961" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-11962" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-11966" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11968" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11969" href="../Soundness/#plfa_plfa-part3-Soundness-11969" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-11971" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11973" href="../Substitution/#plfa_plfa-part2-Substitution-2603" class="Function">Rename</a> <a id="plfa_plfa-part3-Soundness-11980" href="../Soundness/#plfa_plfa-part3-Soundness-11920" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11982" href="../Soundness/#plfa_plfa-part3-Soundness-11922" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-11983" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-11987" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11989" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11990" href="../Soundness/#plfa_plfa-part3-Soundness-11940" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11992" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-11994" href="../Soundness/#plfa_plfa-part3-Soundness-11969" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-11995" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11997" href="../Denotational/#plfa_plfa-part3-Denotational-9696" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-12000" href="../Soundness/#plfa_plfa-part3-Soundness-11928" class="Bound">γ</a>
  <a id="plfa_plfa-part3-Soundness-12004" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12006" href="../Soundness/#plfa_plfa-part3-Soundness-11940" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-12008" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-12010" href="../Untyped/#plfa_plfa-part2-Untyped-8055" class="Function">rename</a> <a id="plfa_plfa-part3-Soundness-12017" href="../Soundness/#plfa_plfa-part3-Soundness-11969" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-12019" href="../Soundness/#plfa_plfa-part3-Soundness-11953" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-12021" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-12023" href="../Soundness/#plfa_plfa-part3-Soundness-11924" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-12029" class="Comment">------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-12068" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12070" href="../Soundness/#plfa_plfa-part3-Soundness-11928" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-12072" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-12074" href="../Soundness/#plfa_plfa-part3-Soundness-11953" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-12076" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-12078" href="../Soundness/#plfa_plfa-part3-Soundness-11924" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-12080" href="../Soundness/#plfa_plfa-part3-Soundness-11900" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12095" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12096" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12098" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12100" href="../Untyped/#plfa_plfa-part2-Untyped-5434" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-12102" href="../Soundness/#plfa_plfa-part3-Soundness-12102" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12103" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12105" href="../Soundness/#plfa_plfa-part3-Soundness-12105" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12111" href="../Soundness/#plfa_plfa-part3-Soundness-12111" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-12113" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-12118" href="../Compositional/#plfa_plfa-part3-Compositional-12866" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-12126" href="../Soundness/#plfa_plfa-part3-Soundness-12111" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-12128" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-12132" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-12134" href="../Soundness/#plfa_plfa-part3-Soundness-12134" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-12137" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12140" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-12144" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-12148" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12149" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Soundness-12157" href="../Soundness/#plfa_plfa-part3-Soundness-12134" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-12160" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12161" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12167" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12168" class="Symbol">))</a>
<a id="plfa_plfa-part3-Soundness-12171" href="../Soundness/#plfa_plfa-part3-Soundness-11900" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12186" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12187" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12189" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12191" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-12193" href="../Soundness/#plfa_plfa-part3-Soundness-12193" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-12194" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-12196" class="Argument">ρ</a> <a id="plfa_plfa-part3-Soundness-12198" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12200" href="../Soundness/#plfa_plfa-part3-Soundness-12200" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-12201" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12203" href="../Soundness/#plfa_plfa-part3-Soundness-12203" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12209" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12210" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-12218" href="../Soundness/#plfa_plfa-part3-Soundness-12218" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-12219" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12221" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12226" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-12234" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12235" href="../Soundness/#plfa_plfa-part3-Soundness-11900" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12250" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12251" href="../Soundness/#plfa_plfa-part3-Soundness-11639" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-12258" href="../Soundness/#plfa_plfa-part3-Soundness-12200" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-12260" href="../Soundness/#plfa_plfa-part3-Soundness-12203" class="Bound">all-n</a><a id="plfa_plfa-part3-Soundness-12265" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12267" href="../Soundness/#plfa_plfa-part3-Soundness-12218" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-12268" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-12270" href="../Soundness/#plfa_plfa-part3-Soundness-11900" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12285" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12286" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12288" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12290" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-12292" href="../Soundness/#plfa_plfa-part3-Soundness-12292" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-12293" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12295" href="../Soundness/#plfa_plfa-part3-Soundness-12295" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12301" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-12309" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12311" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-12319" href="../Soundness/#plfa_plfa-part3-Soundness-11900" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12334" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12335" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12337" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12339" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-12341" href="../Soundness/#plfa_plfa-part3-Soundness-12341" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-12342" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12344" href="../Soundness/#plfa_plfa-part3-Soundness-12344" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12350" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12351" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-12359" href="../Soundness/#plfa_plfa-part3-Soundness-12359" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-12362" href="../Soundness/#plfa_plfa-part3-Soundness-12362" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12364" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12366" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12371" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-12379" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12380" href="../Soundness/#plfa_plfa-part3-Soundness-11900" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12395" href="../Soundness/#plfa_plfa-part3-Soundness-12344" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12401" href="../Soundness/#plfa_plfa-part3-Soundness-12359" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-12403" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12405" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12406" href="../Soundness/#plfa_plfa-part3-Soundness-11900" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12421" href="../Soundness/#plfa_plfa-part3-Soundness-12344" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12427" href="../Soundness/#plfa_plfa-part3-Soundness-12362" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12429" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-12431" href="../Soundness/#plfa_plfa-part3-Soundness-11900" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12446" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12447" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12449" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12451" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-12453" href="../Soundness/#plfa_plfa-part3-Soundness-12453" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-12454" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12456" href="../Soundness/#plfa_plfa-part3-Soundness-12456" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12462" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12463" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-12467" href="../Soundness/#plfa_plfa-part3-Soundness-12467" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-12470" href="../Soundness/#plfa_plfa-part3-Soundness-12470" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-12472" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12474" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12479" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-12483" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12484" href="../Soundness/#plfa_plfa-part3-Soundness-11900" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12499" href="../Soundness/#plfa_plfa-part3-Soundness-12456" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12505" href="../Soundness/#plfa_plfa-part3-Soundness-12467" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-12507" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12509" href="../Soundness/#plfa_plfa-part3-Soundness-12470" class="Bound">lt</a>
<a id="plfa_plfa-part3-Soundness-12512" href="../Soundness/#plfa_plfa-part3-Soundness-11900" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12527" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12528" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12530" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12532" href="../Soundness/#plfa_plfa-part3-Soundness-12532" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-12534" href="../Untyped/#plfa_plfa-part2-Untyped-5546" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-12536" href="../Soundness/#plfa_plfa-part3-Soundness-12536" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-12537" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12539" href="../Soundness/#plfa_plfa-part3-Soundness-12539" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12545" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12546" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-12553" href="../Soundness/#plfa_plfa-part3-Soundness-12553" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-12556" href="../Soundness/#plfa_plfa-part3-Soundness-12556" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12558" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12560" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12565" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-12572" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12573" href="../Soundness/#plfa_plfa-part3-Soundness-11900" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12588" href="../Soundness/#plfa_plfa-part3-Soundness-12539" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12594" href="../Soundness/#plfa_plfa-part3-Soundness-12553" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-12596" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12598" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12599" href="../Soundness/#plfa_plfa-part3-Soundness-11900" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12614" href="../Soundness/#plfa_plfa-part3-Soundness-12539" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12620" href="../Soundness/#plfa_plfa-part3-Soundness-12556" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12622" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-12624" href="../Soundness/#plfa_plfa-part3-Soundness-11900" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12639" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12640" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12642" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12644" href="../Soundness/#plfa_plfa-part3-Soundness-12644" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-12646" href="../Untyped/#plfa_plfa-part2-Untyped-5546" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-12648" href="../Soundness/#plfa_plfa-part3-Soundness-12648" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-12649" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12651" href="../Soundness/#plfa_plfa-part3-Soundness-12651" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12657" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-12665" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12667" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-12675" href="../Soundness/#plfa_plfa-part3-Soundness-11900" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12690" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12691" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12693" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12695" href="../Soundness/#plfa_plfa-part3-Soundness-12695" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-12697" href="../Untyped/#plfa_plfa-part2-Untyped-5546" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-12699" href="../Soundness/#plfa_plfa-part3-Soundness-12699" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-12700" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12702" href="../Soundness/#plfa_plfa-part3-Soundness-12702" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12708" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12709" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-12717" href="../Soundness/#plfa_plfa-part3-Soundness-12717" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-12720" href="../Soundness/#plfa_plfa-part3-Soundness-12720" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12722" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12724" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12729" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-12737" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12738" href="../Soundness/#plfa_plfa-part3-Soundness-11900" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12753" href="../Soundness/#plfa_plfa-part3-Soundness-12702" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12759" href="../Soundness/#plfa_plfa-part3-Soundness-12717" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-12761" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12763" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12764" href="../Soundness/#plfa_plfa-part3-Soundness-11900" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12779" href="../Soundness/#plfa_plfa-part3-Soundness-12702" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12785" href="../Soundness/#plfa_plfa-part3-Soundness-12720" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12787" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-12789" href="../Soundness/#plfa_plfa-part3-Soundness-11900" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12804" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12805" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12807" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12809" href="../Soundness/#plfa_plfa-part3-Soundness-12809" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-12811" href="../Untyped/#plfa_plfa-part2-Untyped-5546" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-12813" href="../Soundness/#plfa_plfa-part3-Soundness-12813" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-12814" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12816" href="../Soundness/#plfa_plfa-part3-Soundness-12816" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12822" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12823" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-12827" href="../Soundness/#plfa_plfa-part3-Soundness-12827" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-12830" href="../Soundness/#plfa_plfa-part3-Soundness-12830" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-12832" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12834" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12839" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-12843" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12844" href="../Soundness/#plfa_plfa-part3-Soundness-11900" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12859" href="../Soundness/#plfa_plfa-part3-Soundness-12816" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12865" href="../Soundness/#plfa_plfa-part3-Soundness-12827" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-12867" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12869" href="../Soundness/#plfa_plfa-part3-Soundness-12830" class="Bound">lt</a>
</pre><p>我们无法通过对 <code>δ ⊢ rename ρ M ↓ v</code> 的推导过程进行归纳来证明此引理， 所以我们转而通过对 <code>M</code> 进行归纳来证明：</p><ul><li><p>若它是一个变量，我们可通过对它应用反演引理得到 <code>v ⊑ δ (ρ x)</code>。 将前提实例化为 <code>x</code>，我们有 <code>δ (ρ x) ⊑ γ x</code>，于是我们可通过 <code>var</code> 规则证明。</p></li><li><p>若它是一个 λ-抽象 <code>ƛ N</code>，我们有重命名 <code>ρ (ƛ N) = ƛ (rename (ext ρ) N)</code>。 可通过对 <code>δ ⊢ ƛ (rename (ext ρ) N) ↓ v</code> 进行情况分析来论证：</p><ul><li><p>规则 <code>↦-intro</code>：为了满足归纳假设的前提，我们证明了重命名可扩展为从 <code>γ , v</code> 到 <code>δ , v</code> 的映射。</p></li><li><p>规则 <code>⊥-intro</code>：直接应用 <code>⊥-intro</code>。</p></li><li><p>规则 <code>⊔-intro</code>：应用归纳假设和 <code>⊔-intro</code>。</p></li><li><p>规则 <code>sub</code>：应用归纳假设和 <code>sub</code>。</p></li></ul></li><li><p>若它是一个应用 <code>L · M</code>，我们有 <code>rename ρ (L · M) = (rename ρ L) · (rename ρ M)</code>， 于是可通过对 <code>δ ⊢ (rename ρ L) · (rename ρ M) ↓ v</code> 进行情况分析来论证， 而所有的情况都很直白。</p></li></ul><p>在以后使用 <code>rename-reflect</code> 的情况中，重命名始终都是增量函数， 于是我们先在这里为这些特殊情况证明以下推论：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-rename-inc-reflect"></a><a id="plfa_plfa-part3-Soundness-14701" href="../Soundness/#plfa_plfa-part3-Soundness-14701" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-14720" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14722" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-14724" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14725" href="../Soundness/#plfa_plfa-part3-Soundness-14725" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14727" href="../Soundness/#plfa_plfa-part3-Soundness-14727" class="Bound">v′</a> <a id="plfa_plfa-part3-Soundness-14730" href="../Soundness/#plfa_plfa-part3-Soundness-14730" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-14731" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14733" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14734" href="../Soundness/#plfa_plfa-part3-Soundness-14734" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14736" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14738" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-14742" href="../Soundness/#plfa_plfa-part3-Soundness-14725" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-14743" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14745" class="Symbol">{</a> <a id="plfa_plfa-part3-Soundness-14747" href="../Soundness/#plfa_plfa-part3-Soundness-14747" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-14749" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14751" href="../Soundness/#plfa_plfa-part3-Soundness-14725" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14753" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-14755" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-14756" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-14760" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14762" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14763" href="../Soundness/#plfa_plfa-part3-Soundness-14734" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14765" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-14768" href="../Soundness/#plfa_plfa-part3-Soundness-14727" class="Bound">v′</a><a id="plfa_plfa-part3-Soundness-14770" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-14772" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-14774" href="../Untyped/#plfa_plfa-part2-Untyped-8055" class="Function">rename</a> <a id="plfa_plfa-part3-Soundness-14781" href="../Untyped/#plfa_plfa-part2-Untyped-4436" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part3-Soundness-14784" href="../Soundness/#plfa_plfa-part3-Soundness-14747" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-14786" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14788" href="../Soundness/#plfa_plfa-part3-Soundness-14730" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-14794" class="Comment">----------------------------</a>
  <a id="plfa_plfa-part3-Soundness-14825" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14827" href="../Soundness/#plfa_plfa-part3-Soundness-14734" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14829" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-14831" href="../Soundness/#plfa_plfa-part3-Soundness-14747" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-14833" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14835" href="../Soundness/#plfa_plfa-part3-Soundness-14730" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-14837" href="../Soundness/#plfa_plfa-part3-Soundness-14701" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-14856" href="../Soundness/#plfa_plfa-part3-Soundness-14856" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-14858" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14860" href="../Soundness/#plfa_plfa-part3-Soundness-11900" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-14875" href="../Denotational/#plfa_plfa-part3-Denotational-10539" class="Function">`⊑-refl</a> <a id="plfa_plfa-part3-Soundness-14883" href="../Soundness/#plfa_plfa-part3-Soundness-14856" class="Bound">d</a>
</pre><h3 id="代换反映了指称不变变量的情况">代换反映了指称不变：变量的情况</h3><p>我们基本上准备好证明同时代换反映指称不变了，也就是说，若 <code>γ ⊢ (subst σ M) ↓ v</code>，则对于任意 <code>k</code> 和某些 <code>δ</code>，有 <code>γ ⊢ σ k ↓ δ k</code> 且 <code>δ ⊢ M ↓ v</code>。我们首先从 <code>M</code> 是一个变量 <code>x</code> 的情况开始， 已知前提是 <code>γ ⊢ σ x ↓ v</code>，我们需要证明对于某个 <code>δ</code>，有 <code>δ ⊢ ` x ↓ v</code>。 我们选择的环境 <code>δ</code> 应当将 <code>x</code> 映射到 <code>v</code>，将任何其他变量映射到 <code>⊥</code>。</p><p>接下来我们定义将 <code>x</code> 映射到 <code>v</code>，将其他变量映射到 <code>⊥</code> 的环境，即 <code>const-env x v</code>。为了区分变量，我们定义以下函数来确定变量的相等性：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-_var≟_"></a><a id="plfa_plfa-part3-Soundness-15971" href="../Soundness/#plfa_plfa-part3-Soundness-15971" class="Function Operator">_var≟_</a> <a id="plfa_plfa-part3-Soundness-15978" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15980" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-15982" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15983" href="../Soundness/#plfa_plfa-part3-Soundness-15983" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-15984" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15986" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15988" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15989" href="../Soundness/#plfa_plfa-part3-Soundness-15989" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-15991" href="../Soundness/#plfa_plfa-part3-Soundness-15991" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-15993" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15995" href="../Soundness/#plfa_plfa-part3-Soundness-15983" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15997" href="../Untyped/#plfa_plfa-part2-Untyped-4355" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-15999" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-16000" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16002" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16004" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1511" class="Record">Dec</a> <a id="plfa_plfa-part3-Soundness-16008" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16009" href="../Soundness/#plfa_plfa-part3-Soundness-15989" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16011" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-16013" href="../Soundness/#plfa_plfa-part3-Soundness-15991" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-16014" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-16016" href="../Untyped/#plfa_plfa-part2-Untyped-4391" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-16018" href="../Soundness/#plfa_plfa-part3-Soundness-15971" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16023" href="../Untyped/#plfa_plfa-part2-Untyped-4391" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-16026" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-16029" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-16033" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-16038" href="../Untyped/#plfa_plfa-part2-Untyped-4391" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-16040" href="../Soundness/#plfa_plfa-part3-Soundness-15971" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16045" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16046" href="../Untyped/#plfa_plfa-part2-Untyped-4436" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-16048" class="Symbol">_)</a>  <a id="plfa_plfa-part3-Soundness-16052" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-16055" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-16058" class="Symbol">λ()</a>
<a id="plfa_plfa-part3-Soundness-16062" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16063" href="../Untyped/#plfa_plfa-part2-Untyped-4436" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-16065" class="Symbol">_)</a> <a id="plfa_plfa-part3-Soundness-16068" href="../Soundness/#plfa_plfa-part3-Soundness-15971" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16073" href="../Untyped/#plfa_plfa-part2-Untyped-4391" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-16076" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-16079" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-16082" class="Symbol">λ()</a>
<a id="plfa_plfa-part3-Soundness-16086" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16087" href="../Untyped/#plfa_plfa-part2-Untyped-4436" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-16089" href="../Soundness/#plfa_plfa-part3-Soundness-16089" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-16090" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16092" href="../Soundness/#plfa_plfa-part3-Soundness-15971" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16097" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16098" href="../Untyped/#plfa_plfa-part2-Untyped-4436" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-16100" href="../Soundness/#plfa_plfa-part3-Soundness-16100" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-16101" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16103" class="Keyword">with</a>  <a id="plfa_plfa-part3-Soundness-16109" href="../Soundness/#plfa_plfa-part3-Soundness-16089" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16111" href="../Soundness/#plfa_plfa-part3-Soundness-15971" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16116" href="../Soundness/#plfa_plfa-part3-Soundness-16100" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-16118" class="Symbol">...</a>                 <a id="plfa_plfa-part3-Soundness-16138" class="Symbol">|</a>  <a id="plfa_plfa-part3-Soundness-16141" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-16145" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-16150" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-16153" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-16157" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-16162" class="Symbol">...</a>                 <a id="plfa_plfa-part3-Soundness-16182" class="Symbol">|</a>  <a id="plfa_plfa-part3-Soundness-16185" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-16188" href="../Soundness/#plfa_plfa-part3-Soundness-16188" class="Bound">neq</a>   <a id="plfa_plfa-part3-Soundness-16194" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-16197" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-16200" class="Symbol">λ{</a><a id="plfa_plfa-part3-Soundness-16202" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-16207" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16209" href="../Soundness/#plfa_plfa-part3-Soundness-16188" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-16213" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-16217" class="Symbol">}</a>

<a id="plfa_plfa-part3-Soundness-var≟-refl"></a><a id="plfa_plfa-part3-Soundness-16220" href="../Soundness/#plfa_plfa-part3-Soundness-16220" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-16230" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16232" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-16234" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16235" href="../Soundness/#plfa_plfa-part3-Soundness-16235" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-16236" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16238" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16239" href="../Soundness/#plfa_plfa-part3-Soundness-16239" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16241" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16243" href="../Soundness/#plfa_plfa-part3-Soundness-16235" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-16245" href="../Untyped/#plfa_plfa-part2-Untyped-4355" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-16247" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-16248" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16250" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16252" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16253" href="../Soundness/#plfa_plfa-part3-Soundness-16239" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16255" href="../Soundness/#plfa_plfa-part3-Soundness-15971" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16260" href="../Soundness/#plfa_plfa-part3-Soundness-16239" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-16261" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16263" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-16265" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-16269" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-16274" href="../Soundness/#plfa_plfa-part3-Soundness-16220" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-16284" href="../Untyped/#plfa_plfa-part2-Untyped-4391" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-16286" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16288" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-16293" href="../Soundness/#plfa_plfa-part3-Soundness-16220" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-16303" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16304" href="../Untyped/#plfa_plfa-part2-Untyped-4436" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-16306" href="../Soundness/#plfa_plfa-part3-Soundness-16306" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-16307" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16309" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-16317" href="../Soundness/#plfa_plfa-part3-Soundness-16220" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-16327" href="../Soundness/#plfa_plfa-part3-Soundness-16306" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16329" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16331" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><p>接着我们用 <code>var≟</code> 来定义 <code>const-env</code>：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-const-env"></a><a id="plfa_plfa-part3-Soundness-16431" href="../Soundness/#plfa_plfa-part3-Soundness-16431" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-16441" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16443" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-16445" href="../Soundness/#plfa_plfa-part3-Soundness-16445" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-16446" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16448" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16450" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16451" href="../Soundness/#plfa_plfa-part3-Soundness-16451" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16453" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16455" href="../Soundness/#plfa_plfa-part3-Soundness-16445" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-16457" href="../Untyped/#plfa_plfa-part2-Untyped-4355" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-16459" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-16460" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16462" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16464" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-16470" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16472" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-16476" href="../Soundness/#plfa_plfa-part3-Soundness-16445" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Soundness-16478" href="../Soundness/#plfa_plfa-part3-Soundness-16431" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-16488" href="../Soundness/#plfa_plfa-part3-Soundness-16488" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16490" href="../Soundness/#plfa_plfa-part3-Soundness-16490" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-16492" href="../Soundness/#plfa_plfa-part3-Soundness-16492" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-16494" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16499" href="../Soundness/#plfa_plfa-part3-Soundness-16488" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16501" href="../Soundness/#plfa_plfa-part3-Soundness-15971" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16506" href="../Soundness/#plfa_plfa-part3-Soundness-16492" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-16508" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-16524" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16526" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-16530" class="Symbol">_</a>       <a id="plfa_plfa-part3-Soundness-16538" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16540" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-16542" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-16558" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16560" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-16563" class="Symbol">_</a>        <a id="plfa_plfa-part3-Soundness-16572" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16574" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a>
</pre><p>当然，<code>const-env x v</code> 将 <code>x</code> 映射到值 <code>v</code>：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-same-const-env"></a><a id="plfa_plfa-part3-Soundness-16683" href="../Soundness/#plfa_plfa-part3-Soundness-16683" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-16698" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16700" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-16702" href="../Soundness/#plfa_plfa-part3-Soundness-16702" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-16703" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16705" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16706" href="../Soundness/#plfa_plfa-part3-Soundness-16706" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16708" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16710" href="../Soundness/#plfa_plfa-part3-Soundness-16702" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-16712" href="../Untyped/#plfa_plfa-part2-Untyped-4355" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-16714" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-16715" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16717" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16718" href="../Soundness/#plfa_plfa-part3-Soundness-16718" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-16719" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16721" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16723" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16724" href="../Soundness/#plfa_plfa-part3-Soundness-16431" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-16734" href="../Soundness/#plfa_plfa-part3-Soundness-16706" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16736" href="../Soundness/#plfa_plfa-part3-Soundness-16718" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-16737" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16739" href="../Soundness/#plfa_plfa-part3-Soundness-16706" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16741" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-16743" href="../Soundness/#plfa_plfa-part3-Soundness-16718" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-16745" href="../Soundness/#plfa_plfa-part3-Soundness-16683" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-16760" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16761" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-16763" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16765" href="../Soundness/#plfa_plfa-part3-Soundness-16765" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-16766" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16768" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-16776" href="../Soundness/#plfa_plfa-part3-Soundness-16220" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-16786" href="../Soundness/#plfa_plfa-part3-Soundness-16765" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16788" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16790" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><p>以及 <code>const-env x v</code> 将 <code>y</code> 映射到 <code>⊥</code>，且 <code>x ≢ y</code>。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-diff-const-env"></a><a id="plfa_plfa-part3-Soundness-16920" href="../Soundness/#plfa_plfa-part3-Soundness-16920" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-16935" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16937" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-16939" href="../Soundness/#plfa_plfa-part3-Soundness-16939" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-16940" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16942" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16943" href="../Soundness/#plfa_plfa-part3-Soundness-16943" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16945" href="../Soundness/#plfa_plfa-part3-Soundness-16945" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-16947" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16949" href="../Soundness/#plfa_plfa-part3-Soundness-16939" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-16951" href="../Untyped/#plfa_plfa-part2-Untyped-4355" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-16953" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-16954" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16956" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16957" href="../Soundness/#plfa_plfa-part3-Soundness-16957" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-16958" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-16962" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16964" href="../Soundness/#plfa_plfa-part3-Soundness-16943" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16966" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#830" class="Function Operator">≢</a> <a id="plfa_plfa-part3-Soundness-16968" href="../Soundness/#plfa_plfa-part3-Soundness-16945" class="Bound">y</a>
    <a id="plfa_plfa-part3-Soundness-16974" class="Comment">-------------------</a>
  <a id="plfa_plfa-part3-Soundness-16996" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16998" href="../Soundness/#plfa_plfa-part3-Soundness-16431" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-17008" href="../Soundness/#plfa_plfa-part3-Soundness-16943" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-17010" href="../Soundness/#plfa_plfa-part3-Soundness-16957" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-17012" href="../Soundness/#plfa_plfa-part3-Soundness-16945" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-17014" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-17016" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a>
<a id="plfa_plfa-part3-Soundness-17018" href="../Soundness/#plfa_plfa-part3-Soundness-16920" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-17033" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17034" href="../Soundness/#plfa_plfa-part3-Soundness-17034" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-17035" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17037" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17038" href="../Soundness/#plfa_plfa-part3-Soundness-17038" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-17039" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17041" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17042" href="../Soundness/#plfa_plfa-part3-Soundness-17042" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-17043" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17045" href="../Soundness/#plfa_plfa-part3-Soundness-17045" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-17049" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-17054" href="../Soundness/#plfa_plfa-part3-Soundness-17038" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-17056" href="../Soundness/#plfa_plfa-part3-Soundness-15971" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-17061" href="../Soundness/#plfa_plfa-part3-Soundness-17042" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-17063" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-17068" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17070" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-17074" href="../Soundness/#plfa_plfa-part3-Soundness-17074" class="Bound">eq</a>  <a id="plfa_plfa-part3-Soundness-17078" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-17081" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html#628" class="Function">⊥-elim</a> <a id="plfa_plfa-part3-Soundness-17088" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17089" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-17093" href="../Soundness/#plfa_plfa-part3-Soundness-17074" class="Bound">eq</a><a id="plfa_plfa-part3-Soundness-17095" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-17097" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-17102" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17104" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-17107" class="Symbol">_</a>    <a id="plfa_plfa-part3-Soundness-17112" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-17115" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><p>于是我们为 <code>δ</code> 选择 <code>const-env x v</code> 并通过 <code>var</code> 规则得到了 <code>δ ⊢ ` x ↓ v</code>。</p><p>剩下的就是证明 <code>γ `⊢ σ ↓ δ</code>，以及对于任意 <code>k</code> 有 <code>δ ⊢ M ↓ v</code>，据此我们 就能为 <code>δ</code> 选择 <code>const-env x v</code>。我们有两种情况需要考虑：<code>x ≡ y</code> 或 <code>x ≢ y</code>。</p><p>现在完成该证明的两种情况：</p><ul><li>对于 <code>x ≡ y</code> 的情况，我们需要证明 <code>γ ⊢ σ y ↓ v</code>，不过这就是我们的前提。</li><li>对于 <code>x ≢ y,</code> 的情况， we need to show that <code>γ ⊢ σ y ↓ ⊥</code>, which we do via rule <code>⊥-intro</code>.</li></ul><p>这样，我们就完成了同时代换反映指称不变的证明中变量的情况。 以下是正式的证明：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-reflect-var"></a><a id="plfa_plfa-part3-Soundness-18197" href="../Soundness/#plfa_plfa-part3-Soundness-18197" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-18215" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18217" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-18219" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18220" href="../Soundness/#plfa_plfa-part3-Soundness-18220" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18222" href="../Soundness/#plfa_plfa-part3-Soundness-18222" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18223" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18225" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18226" href="../Soundness/#plfa_plfa-part3-Soundness-18226" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18228" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18230" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-18234" href="../Soundness/#plfa_plfa-part3-Soundness-18222" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18235" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18237" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18238" href="../Soundness/#plfa_plfa-part3-Soundness-18238" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18240" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18242" href="../Soundness/#plfa_plfa-part3-Soundness-18220" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18244" href="../Untyped/#plfa_plfa-part2-Untyped-4355" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-18246" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-18247" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18249" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18250" href="../Soundness/#plfa_plfa-part3-Soundness-18250" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-18251" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18253" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18254" href="../Soundness/#plfa_plfa-part3-Soundness-18254" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18256" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18258" href="../Substitution/#plfa_plfa-part2-Substitution-2882" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-18264" href="../Soundness/#plfa_plfa-part3-Soundness-18220" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18266" href="../Soundness/#plfa_plfa-part3-Soundness-18222" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18267" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-18271" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-18273" href="../Soundness/#plfa_plfa-part3-Soundness-18226" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18275" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-18277" href="../Soundness/#plfa_plfa-part3-Soundness-18254" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18279" href="../Soundness/#plfa_plfa-part3-Soundness-18238" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18281" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-18283" href="../Soundness/#plfa_plfa-part3-Soundness-18250" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-18289" class="Comment">-----------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-18333" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-18335" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-18338" href="../Soundness/#plfa_plfa-part3-Soundness-18338" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-18340" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-18342" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-18346" href="../Soundness/#plfa_plfa-part3-Soundness-18220" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18348" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-18350" href="../Soundness/#plfa_plfa-part3-Soundness-18226" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18352" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-18355" href="../Soundness/#plfa_plfa-part3-Soundness-18254" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18357" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-18359" href="../Soundness/#plfa_plfa-part3-Soundness-18338" class="Bound">δ</a>  <a id="plfa_plfa-part3-Soundness-18362" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-18365" href="../Soundness/#plfa_plfa-part3-Soundness-18338" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-18367" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-18369" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-18371" href="../Soundness/#plfa_plfa-part3-Soundness-18238" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18373" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-18375" href="../Soundness/#plfa_plfa-part3-Soundness-18250" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-18377" href="../Soundness/#plfa_plfa-part3-Soundness-18197" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-18395" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18396" href="../Soundness/#plfa_plfa-part3-Soundness-18396" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-18397" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18399" href="../Soundness/#plfa_plfa-part3-Soundness-18399" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18400" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18402" href="../Soundness/#plfa_plfa-part3-Soundness-18402" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-18403" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18405" href="../Soundness/#plfa_plfa-part3-Soundness-18405" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-18406" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18408" href="../Soundness/#plfa_plfa-part3-Soundness-18408" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-18409" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18411" href="../Soundness/#plfa_plfa-part3-Soundness-18411" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-18412" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18414" href="../Soundness/#plfa_plfa-part3-Soundness-18414" class="Bound">xv</a>
  <a id="plfa_plfa-part3-Soundness-18419" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-18427" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-18431" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-18432" href="../Soundness/#plfa_plfa-part3-Soundness-16683" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-18447" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18448" href="../Soundness/#plfa_plfa-part3-Soundness-18396" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-18449" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18451" href="../Soundness/#plfa_plfa-part3-Soundness-18405" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-18452" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18454" href="../Soundness/#plfa_plfa-part3-Soundness-18408" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-18455" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-18458" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-18464" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-18466" href="../Soundness/#plfa_plfa-part3-Soundness-16431" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-18476" href="../Soundness/#plfa_plfa-part3-Soundness-18405" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18478" href="../Soundness/#plfa_plfa-part3-Soundness-18408" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-18480" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-18482" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-18484" href="../Soundness/#plfa_plfa-part3-Soundness-18517" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-18497" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-18499" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-18503" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-18505" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Soundness-18509" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-18517" href="../Soundness/#plfa_plfa-part3-Soundness-18517" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-18530" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18532" href="../Soundness/#plfa_plfa-part3-Soundness-18402" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18534" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-18537" href="../Soundness/#plfa_plfa-part3-Soundness-18411" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18539" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-18541" href="../Soundness/#plfa_plfa-part3-Soundness-16431" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-18551" href="../Soundness/#plfa_plfa-part3-Soundness-18405" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18553" href="../Soundness/#plfa_plfa-part3-Soundness-18408" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-18557" href="../Soundness/#plfa_plfa-part3-Soundness-18517" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-18570" href="../Soundness/#plfa_plfa-part3-Soundness-18570" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-18572" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-18577" href="../Soundness/#plfa_plfa-part3-Soundness-18405" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18579" href="../Soundness/#plfa_plfa-part3-Soundness-15971" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-18584" href="../Soundness/#plfa_plfa-part3-Soundness-18570" class="Bound">y</a>
  <a id="plfa_plfa-part3-Soundness-18588" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-18592" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-18594" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-18598" href="../Soundness/#plfa_plfa-part3-Soundness-18598" class="Bound">x≡y</a> <a id="plfa_plfa-part3-Soundness-18602" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-18610" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-18614" href="../Soundness/#plfa_plfa-part3-Soundness-18598" class="Bound">x≡y</a> <a id="plfa_plfa-part3-Soundness-18618" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-18620" href="../Soundness/#plfa_plfa-part3-Soundness-16683" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-18635" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18636" href="../Soundness/#plfa_plfa-part3-Soundness-18396" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-18637" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18639" href="../Soundness/#plfa_plfa-part3-Soundness-18405" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-18640" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18642" href="../Soundness/#plfa_plfa-part3-Soundness-18408" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-18643" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18645" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-18647" href="../Soundness/#plfa_plfa-part3-Soundness-18414" class="Bound">xv</a>
  <a id="plfa_plfa-part3-Soundness-18652" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-18656" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-18658" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-18661" href="../Soundness/#plfa_plfa-part3-Soundness-18661" class="Bound">x≢y</a> <a id="plfa_plfa-part3-Soundness-18665" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-18673" href="../Soundness/#plfa_plfa-part3-Soundness-16920" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-18688" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18689" href="../Soundness/#plfa_plfa-part3-Soundness-18396" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-18690" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18692" href="../Soundness/#plfa_plfa-part3-Soundness-18405" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-18693" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18695" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-18696" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18698" href="../Soundness/#plfa_plfa-part3-Soundness-18408" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-18699" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18701" href="../Soundness/#plfa_plfa-part3-Soundness-18661" class="Bound">x≢y</a> <a id="plfa_plfa-part3-Soundness-18705" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-18707" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
</pre><h3 id="代换与环境的构造">代换与环境的构造</h3><p>每一个代换都能产生可求值为 <code>⊥</code> 的项。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-⊥"></a><a id="plfa_plfa-part3-Soundness-18893" href="../Soundness/#plfa_plfa-part3-Soundness-18893" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-18901" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18903" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-18905" href="../Soundness/#plfa_plfa-part3-Soundness-18905" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18907" href="../Soundness/#plfa_plfa-part3-Soundness-18907" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18908" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18910" href="../Soundness/#plfa_plfa-part3-Soundness-18910" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18912" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18914" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-18918" href="../Soundness/#plfa_plfa-part3-Soundness-18907" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18919" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18921" href="../Soundness/#plfa_plfa-part3-Soundness-18921" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18923" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18925" href="../Substitution/#plfa_plfa-part2-Substitution-2882" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-18931" href="../Soundness/#plfa_plfa-part3-Soundness-18905" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18933" href="../Soundness/#plfa_plfa-part3-Soundness-18907" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18934" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Soundness-18940" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Soundness-18960" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-18962" href="../Soundness/#plfa_plfa-part3-Soundness-18910" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18964" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-18967" href="../Soundness/#plfa_plfa-part3-Soundness-18921" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18969" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-18971" href="../Denotational/#plfa_plfa-part3-Denotational-9950" class="Function">`⊥</a>
<a id="plfa_plfa-part3-Soundness-18974" href="../Soundness/#plfa_plfa-part3-Soundness-18893" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-18982" href="../Soundness/#plfa_plfa-part3-Soundness-18982" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18984" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-18986" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
</pre><p>若代换产生的项的求值结果为 <code>γ₁</code> 或 <code>γ₂</code> 中的值，那么这些项的求值结果也是 <code>γ₁ ⊔ γ₂</code> 中的值。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-⊔"></a><a id="plfa_plfa-part3-Soundness-19219" href="../Soundness/#plfa_plfa-part3-Soundness-19219" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-19227" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19229" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-19231" href="../Soundness/#plfa_plfa-part3-Soundness-19231" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-19233" href="../Soundness/#plfa_plfa-part3-Soundness-19233" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-19234" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-19236" href="../Soundness/#plfa_plfa-part3-Soundness-19236" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-19238" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19240" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-19244" href="../Soundness/#plfa_plfa-part3-Soundness-19233" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-19245" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-19247" href="../Soundness/#plfa_plfa-part3-Soundness-19247" class="Bound">γ₁</a> <a id="plfa_plfa-part3-Soundness-19250" href="../Soundness/#plfa_plfa-part3-Soundness-19250" class="Bound">γ₂</a> <a id="plfa_plfa-part3-Soundness-19253" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19255" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-19259" href="../Soundness/#plfa_plfa-part3-Soundness-19231" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-19260" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-19262" href="../Soundness/#plfa_plfa-part3-Soundness-19262" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-19264" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19266" href="../Substitution/#plfa_plfa-part2-Substitution-2882" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-19272" href="../Soundness/#plfa_plfa-part3-Soundness-19231" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-19274" href="../Soundness/#plfa_plfa-part3-Soundness-19233" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-19275" class="Symbol">}</a>
           <a id="plfa_plfa-part3-Soundness-19288" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-19290" href="../Soundness/#plfa_plfa-part3-Soundness-19236" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-19292" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-19295" href="../Soundness/#plfa_plfa-part3-Soundness-19262" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-19297" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-19299" href="../Soundness/#plfa_plfa-part3-Soundness-19247" class="Bound">γ₁</a>
           <a id="plfa_plfa-part3-Soundness-19313" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-19315" href="../Soundness/#plfa_plfa-part3-Soundness-19236" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-19317" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-19320" href="../Soundness/#plfa_plfa-part3-Soundness-19262" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-19322" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-19324" href="../Soundness/#plfa_plfa-part3-Soundness-19250" class="Bound">γ₂</a>
             <a id="plfa_plfa-part3-Soundness-19340" class="Comment">-------------------------</a>
           <a id="plfa_plfa-part3-Soundness-19377" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-19379" href="../Soundness/#plfa_plfa-part3-Soundness-19236" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-19381" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-19384" href="../Soundness/#plfa_plfa-part3-Soundness-19262" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-19386" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-19388" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-19389" href="../Soundness/#plfa_plfa-part3-Soundness-19247" class="Bound">γ₁</a> <a id="plfa_plfa-part3-Soundness-19392" href="../Denotational/#plfa_plfa-part3-Denotational-9979" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-19395" href="../Soundness/#plfa_plfa-part3-Soundness-19250" class="Bound">γ₂</a><a id="plfa_plfa-part3-Soundness-19397" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-19399" href="../Soundness/#plfa_plfa-part3-Soundness-19219" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-19407" href="../Soundness/#plfa_plfa-part3-Soundness-19407" class="Bound">γ₁-ok</a> <a id="plfa_plfa-part3-Soundness-19413" href="../Soundness/#plfa_plfa-part3-Soundness-19413" class="Bound">γ₂-ok</a> <a id="plfa_plfa-part3-Soundness-19419" href="../Soundness/#plfa_plfa-part3-Soundness-19419" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-19421" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-19423" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-19431" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-19432" href="../Soundness/#plfa_plfa-part3-Soundness-19407" class="Bound">γ₁-ok</a> <a id="plfa_plfa-part3-Soundness-19438" href="../Soundness/#plfa_plfa-part3-Soundness-19419" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-19439" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-19441" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-19442" href="../Soundness/#plfa_plfa-part3-Soundness-19413" class="Bound">γ₂-ok</a> <a id="plfa_plfa-part3-Soundness-19448" href="../Soundness/#plfa_plfa-part3-Soundness-19419" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-19449" class="Symbol">)</a>
</pre><h3 id="λ-构造子是单射的">λ 构造子是单射的</h3><pre class="Agda"><a id="plfa_plfa-part3-Soundness-lambda-inj"></a><a id="plfa_plfa-part3-Soundness-19529" href="../Soundness/#plfa_plfa-part3-Soundness-19529" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-19540" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19542" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-19544" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-19545" href="../Soundness/#plfa_plfa-part3-Soundness-19545" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-19546" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-19548" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-19549" href="../Soundness/#plfa_plfa-part3-Soundness-19549" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-19551" href="../Soundness/#plfa_plfa-part3-Soundness-19551" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-19553" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19555" href="../Soundness/#plfa_plfa-part3-Soundness-19545" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-19557" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-19559" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-19561" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-19563" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-19565" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-19569" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-19571" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a> <a id="plfa_plfa-part3-Soundness-19575" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-19576" class="Argument">A</a> <a id="plfa_plfa-part3-Soundness-19578" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-19580" href="../Soundness/#plfa_plfa-part3-Soundness-19545" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-19582" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-19584" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-19585" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-19587" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-19588" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-19590" href="../Soundness/#plfa_plfa-part3-Soundness-19549" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-19591" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-19593" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-19594" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-19596" href="../Soundness/#plfa_plfa-part3-Soundness-19551" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-19597" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Soundness-19603" class="Comment">---------------------------</a>
  <a id="plfa_plfa-part3-Soundness-19633" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-19635" href="../Soundness/#plfa_plfa-part3-Soundness-19549" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-19637" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-19639" href="../Soundness/#plfa_plfa-part3-Soundness-19551" class="Bound">N</a>
<a id="plfa_plfa-part3-Soundness-19641" href="../Soundness/#plfa_plfa-part3-Soundness-19529" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-19652" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-19657" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-19659" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><h3 id="同时代换反映了指称相等">同时代换反映了指称相等</h3><p>本节中我们要证明一个核心引理，即代换反映了指称不变。也就是说，若 <code>γ ⊢ subst σ M ↓ v</code>，则 <code>δ ⊢ M ↓ v</code> 且对于某个 <code>δ</code> 有 <code>γ `⊢ σ ↓ δ</code>。 我们通过对 <code>γ ⊢ subst σ M ↓ v</code> 的推导过程进行归纳来证明， 为此需要稍微重述一下该引理，将前提更改为 <code>γ ⊢ L ↓ v</code> 和 <code>L ≡ subst σ M</code>。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-split"></a><a id="plfa_plfa-part3-Soundness-20299" href="../Soundness/#plfa_plfa-part3-Soundness-20299" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-20305" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20307" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-20309" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20310" href="../Soundness/#plfa_plfa-part3-Soundness-20310" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-20311" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20313" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20314" href="../Soundness/#plfa_plfa-part3-Soundness-20314" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20316" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20318" href="../Soundness/#plfa_plfa-part3-Soundness-20310" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20320" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20322" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-20324" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20326" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20327" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20329" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20330" href="../Soundness/#plfa_plfa-part3-Soundness-20330" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20332" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20334" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20338" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20339" href="../Soundness/#plfa_plfa-part3-Soundness-20310" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20341" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20343" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20344" class="Symbol">)}</a> <a id="plfa_plfa-part3-Soundness-20347" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20348" href="../Soundness/#plfa_plfa-part3-Soundness-20348" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-20349" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-20353" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20355" href="../Soundness/#plfa_plfa-part3-Soundness-20330" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20357" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20359" href="../Soundness/#plfa_plfa-part3-Soundness-20314" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20361" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20363" href="../Soundness/#plfa_plfa-part3-Soundness-20348" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-20369" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part3-Soundness-20398" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20400" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20401" href="../Denotational/#plfa_plfa-part3-Denotational-9222" class="Function">init</a> <a id="plfa_plfa-part3-Soundness-20406" href="../Soundness/#plfa_plfa-part3-Soundness-20330" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20408" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-20411" href="../Denotational/#plfa_plfa-part3-Denotational-9277" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-20416" href="../Soundness/#plfa_plfa-part3-Soundness-20330" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-20417" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-20419" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20421" href="../Soundness/#plfa_plfa-part3-Soundness-20314" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20423" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20425" href="../Soundness/#plfa_plfa-part3-Soundness-20348" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-20427" href="../Soundness/#plfa_plfa-part3-Soundness-20299" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-20433" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20434" class="Argument">δ</a> <a id="plfa_plfa-part3-Soundness-20436" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20438" href="../Soundness/#plfa_plfa-part3-Soundness-20438" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-20439" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20441" href="../Soundness/#plfa_plfa-part3-Soundness-20441" class="Bound">δMv</a> <a id="plfa_plfa-part3-Soundness-20445" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-20453" href="../Denotational/#plfa_plfa-part3-Denotational-9326" class="Function">init-last</a> <a id="plfa_plfa-part3-Soundness-20463" href="../Soundness/#plfa_plfa-part3-Soundness-20438" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20465" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20467" href="../Soundness/#plfa_plfa-part3-Soundness-20441" class="Bound">δMv</a>

<a id="plfa_plfa-part3-Soundness-subst-reflect"></a><a id="plfa_plfa-part3-Soundness-20472" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-20486" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20488" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-20490" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20491" href="../Soundness/#plfa_plfa-part3-Soundness-20491" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20493" href="../Soundness/#plfa_plfa-part3-Soundness-20493" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20494" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20496" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20497" href="../Soundness/#plfa_plfa-part3-Soundness-20497" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20499" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20501" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20505" href="../Soundness/#plfa_plfa-part3-Soundness-20493" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20506" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20508" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20509" href="../Soundness/#plfa_plfa-part3-Soundness-20509" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20511" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20513" href="../Soundness/#plfa_plfa-part3-Soundness-20491" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20515" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20517" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20518" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20520" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20521" href="../Soundness/#plfa_plfa-part3-Soundness-20521" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-20522" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20524" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20525" href="../Soundness/#plfa_plfa-part3-Soundness-20525" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-20527" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20529" href="../Soundness/#plfa_plfa-part3-Soundness-20493" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-20531" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20533" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20534" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20536" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20537" href="../Soundness/#plfa_plfa-part3-Soundness-20537" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-20539" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20541" href="../Substitution/#plfa_plfa-part2-Substitution-2882" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-20547" href="../Soundness/#plfa_plfa-part3-Soundness-20491" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20549" href="../Soundness/#plfa_plfa-part3-Soundness-20493" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20550" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-20554" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20556" href="../Soundness/#plfa_plfa-part3-Soundness-20497" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20558" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20560" href="../Soundness/#plfa_plfa-part3-Soundness-20525" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-20562" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20564" href="../Soundness/#plfa_plfa-part3-Soundness-20521" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-20568" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20570" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a> <a id="plfa_plfa-part3-Soundness-20576" href="../Soundness/#plfa_plfa-part3-Soundness-20537" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-20578" href="../Soundness/#plfa_plfa-part3-Soundness-20509" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20580" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-20582" href="../Soundness/#plfa_plfa-part3-Soundness-20525" class="Bound">L</a>
    <a id="plfa_plfa-part3-Soundness-20588" class="Comment">---------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-20630" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20632" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-20635" href="../Soundness/#plfa_plfa-part3-Soundness-20635" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20637" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-20639" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20643" href="../Soundness/#plfa_plfa-part3-Soundness-20491" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20645" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-20647" href="../Soundness/#plfa_plfa-part3-Soundness-20497" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20649" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-20652" href="../Soundness/#plfa_plfa-part3-Soundness-20537" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-20654" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20656" href="../Soundness/#plfa_plfa-part3-Soundness-20635" class="Bound">γ</a>  <a id="plfa_plfa-part3-Soundness-20659" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-20662" href="../Soundness/#plfa_plfa-part3-Soundness-20635" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20664" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20666" href="../Soundness/#plfa_plfa-part3-Soundness-20509" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20668" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20670" href="../Soundness/#plfa_plfa-part3-Soundness-20521" class="Bound">v</a>

<a id="plfa_plfa-part3-Soundness-20673" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-20687" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20688" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-20690" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20692" href="../Soundness/#plfa_plfa-part3-Soundness-20692" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-20693" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-20695" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-20697" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20699" href="../Soundness/#plfa_plfa-part3-Soundness-20699" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-20700" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20702" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20703" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-20707" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20708" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-20710" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20712" href="../Soundness/#plfa_plfa-part3-Soundness-20712" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-20713" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-20716" href="../Soundness/#plfa_plfa-part3-Soundness-20716" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-20720" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-20725" href="../Soundness/#plfa_plfa-part3-Soundness-20692" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-20727" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-20731" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20733" href="../Untyped/#plfa_plfa-part2-Untyped-5434" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-20735" href="../Soundness/#plfa_plfa-part3-Soundness-20735" class="Bound">x</a>  <a id="plfa_plfa-part3-Soundness-20738" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-20743" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-20747" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20748" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-20750" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20752" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-20753" class="Symbol">}</a>
<a id="plfa_plfa-part3-Soundness-20755" class="Symbol">...</a>           <a id="plfa_plfa-part3-Soundness-20769" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20771" href="../Soundness/#plfa_plfa-part3-Soundness-20771" class="Bound">yv</a>  <a id="plfa_plfa-part3-Soundness-20775" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-20783" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-20787" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-20791" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20793" href="../Soundness/#plfa_plfa-part3-Soundness-18197" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-20811" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20812" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-20814" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20816" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-20817" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20819" href="../Soundness/#plfa_plfa-part3-Soundness-20771" class="Bound">yv</a>
<a id="plfa_plfa-part3-Soundness-20822" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-20836" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20837" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-20839" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20841" href="../Soundness/#plfa_plfa-part3-Soundness-20841" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-20842" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20844" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20845" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-20849" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20850" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-20852" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20854" href="../Soundness/#plfa_plfa-part3-Soundness-20854" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-20855" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-20858" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-20861" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20863" href="../Soundness/#plfa_plfa-part3-Soundness-20863" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-20866" href="../Untyped/#plfa_plfa-part2-Untyped-5546" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-20868" href="../Soundness/#plfa_plfa-part3-Soundness-20868" class="Bound">M₂</a>
<a id="plfa_plfa-part3-Soundness-20871" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-20885" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20886" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-20888" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20890" href="../Soundness/#plfa_plfa-part3-Soundness-20890" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-20891" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20893" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20894" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-20898" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20899" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-20901" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20903" href="../Soundness/#plfa_plfa-part3-Soundness-20903" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-20904" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-20907" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-20910" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20912" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-20914" href="../Soundness/#plfa_plfa-part3-Soundness-20914" class="Bound">M′</a>

<a id="plfa_plfa-part3-Soundness-20918" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-20932" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20933" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-20935" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20937" href="../Soundness/#plfa_plfa-part3-Soundness-20937" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-20938" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-20940" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-20942" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20944" href="../Soundness/#plfa_plfa-part3-Soundness-20944" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-20945" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20947" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20948" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-20955" href="../Soundness/#plfa_plfa-part3-Soundness-20955" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-20958" href="../Soundness/#plfa_plfa-part3-Soundness-20958" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-20960" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-20962" href="../Soundness/#plfa_plfa-part3-Soundness-20962" class="Bound">eqL</a>
         <a id="plfa_plfa-part3-Soundness-20975" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-20980" href="../Soundness/#plfa_plfa-part3-Soundness-20937" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-20982" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-20989" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20991" href="../Untyped/#plfa_plfa-part2-Untyped-5434" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-20993" href="../Soundness/#plfa_plfa-part3-Soundness-20993" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-20995" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21000" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-21007" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-21010" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-21013" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-21020" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21022" href="../Soundness/#plfa_plfa-part3-Soundness-21022" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-21025" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-21033" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-21037" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-21041" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21043" href="../Soundness/#plfa_plfa-part3-Soundness-18197" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-21061" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21062" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21064" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21066" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21067" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21069" href="../Soundness/#plfa_plfa-part3-Soundness-21022" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-21072" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21086" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21087" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-21094" href="../Soundness/#plfa_plfa-part3-Soundness-21094" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-21097" href="../Soundness/#plfa_plfa-part3-Soundness-21097" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-21099" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21101" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-21104" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21106" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-21108" href="../Soundness/#plfa_plfa-part3-Soundness-21108" class="Bound">M′</a>
<a id="plfa_plfa-part3-Soundness-21111" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Function">subst-reflect</a><a id="plfa_plfa-part3-Soundness-21124" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21125" href="../Soundness/#plfa_plfa-part3-Soundness-21125" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-21126" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21128" href="../Soundness/#plfa_plfa-part3-Soundness-21128" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-21129" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21131" href="../Soundness/#plfa_plfa-part3-Soundness-21131" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-21132" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21134" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21136" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21138" href="../Soundness/#plfa_plfa-part3-Soundness-21138" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21139" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21141" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21142" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-21149" href="../Soundness/#plfa_plfa-part3-Soundness-21149" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-21152" href="../Soundness/#plfa_plfa-part3-Soundness-21152" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-21154" class="Symbol">)</a>
   <a id="plfa_plfa-part3-Soundness-21159" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-21164" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21166" href="../Soundness/#plfa_plfa-part3-Soundness-21166" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-21169" href="../Untyped/#plfa_plfa-part2-Untyped-5546" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-21171" href="../Soundness/#plfa_plfa-part3-Soundness-21171" class="Bound">M₂</a>
     <a id="plfa_plfa-part3-Soundness-21179" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21184" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21198" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21199" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-21201" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21203" href="../Soundness/#plfa_plfa-part3-Soundness-21166" class="Bound">M₁</a><a id="plfa_plfa-part3-Soundness-21205" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21207" href="../Soundness/#plfa_plfa-part3-Soundness-21149" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-21210" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-21215" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21217" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21231" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21232" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-21234" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21236" href="../Soundness/#plfa_plfa-part3-Soundness-21171" class="Bound">M₂</a><a id="plfa_plfa-part3-Soundness-21238" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21240" href="../Soundness/#plfa_plfa-part3-Soundness-21152" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-21243" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-21248" class="Symbol">...</a>     <a id="plfa_plfa-part3-Soundness-21256" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21258" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21260" href="../Soundness/#plfa_plfa-part3-Soundness-21260" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-21263" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21265" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21267" href="../Soundness/#plfa_plfa-part3-Soundness-21267" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-21276" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21278" href="../Soundness/#plfa_plfa-part3-Soundness-21278" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-21281" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21283" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21285" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21287" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21289" href="../Soundness/#plfa_plfa-part3-Soundness-21289" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-21292" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21294" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21296" href="../Soundness/#plfa_plfa-part3-Soundness-21296" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-21305" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21307" href="../Soundness/#plfa_plfa-part3-Soundness-21307" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-21310" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21312" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21314" class="Symbol">=</a>
     <a id="plfa_plfa-part3-Soundness-21321" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21323" href="../Soundness/#plfa_plfa-part3-Soundness-21260" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-21326" href="../Denotational/#plfa_plfa-part3-Denotational-9979" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-21329" href="../Soundness/#plfa_plfa-part3-Soundness-21289" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-21332" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21334" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21336" href="../Soundness/#plfa_plfa-part3-Soundness-19219" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-21344" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21345" class="Argument">γ₁</a> <a id="plfa_plfa-part3-Soundness-21348" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21350" href="../Soundness/#plfa_plfa-part3-Soundness-21260" class="Bound">δ₁</a><a id="plfa_plfa-part3-Soundness-21352" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21354" class="Argument">γ₂</a> <a id="plfa_plfa-part3-Soundness-21357" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21359" href="../Soundness/#plfa_plfa-part3-Soundness-21289" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-21361" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21363" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21365" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21367" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21368" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21370" href="../Soundness/#plfa_plfa-part3-Soundness-21267" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-21379" href="../Soundness/#plfa_plfa-part3-Soundness-21296" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-21388" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a>
                    <a id="plfa_plfa-part3-Soundness-21410" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-21417" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21418" href="../Denotational/#plfa_plfa-part3-Denotational-32332" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-21424" href="../Soundness/#plfa_plfa-part3-Soundness-21278" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-21427" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21428" href="../Denotational/#plfa_plfa-part3-Denotational-10610" class="Function">⊑-env-conj-R1</a> <a id="plfa_plfa-part3-Soundness-21442" href="../Soundness/#plfa_plfa-part3-Soundness-21260" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-21445" href="../Soundness/#plfa_plfa-part3-Soundness-21289" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-21447" class="Symbol">))</a>
                           <a id="plfa_plfa-part3-Soundness-21477" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21478" href="../Denotational/#plfa_plfa-part3-Denotational-32332" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-21484" href="../Soundness/#plfa_plfa-part3-Soundness-21307" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-21487" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21488" href="../Denotational/#plfa_plfa-part3-Denotational-10716" class="Function">⊑-env-conj-R2</a> <a id="plfa_plfa-part3-Soundness-21502" href="../Soundness/#plfa_plfa-part3-Soundness-21260" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-21505" href="../Soundness/#plfa_plfa-part3-Soundness-21289" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-21507" class="Symbol">))</a> <a id="plfa_plfa-part3-Soundness-21510" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21512" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a>

<a id="plfa_plfa-part3-Soundness-21515" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21529" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21530" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-21532" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21534" href="../Soundness/#plfa_plfa-part3-Soundness-21534" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-21535" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21537" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21539" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21541" href="../Soundness/#plfa_plfa-part3-Soundness-21541" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21542" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21544" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21545" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21553" href="../Soundness/#plfa_plfa-part3-Soundness-21553" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-21554" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21556" href="../Soundness/#plfa_plfa-part3-Soundness-21556" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-21560" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21565" href="../Soundness/#plfa_plfa-part3-Soundness-21534" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-21567" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-21574" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21576" href="../Untyped/#plfa_plfa-part2-Untyped-5434" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-21578" href="../Soundness/#plfa_plfa-part3-Soundness-21578" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-21580" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21585" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21586" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21594" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-21595" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-21597" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-21613" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21615" href="../Soundness/#plfa_plfa-part3-Soundness-21615" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-21618" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-21626" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-21630" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-21634" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21636" href="../Soundness/#plfa_plfa-part3-Soundness-18197" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-21654" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21655" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21657" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21659" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21660" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21662" href="../Soundness/#plfa_plfa-part3-Soundness-21615" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-21665" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21679" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21680" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21682" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21684" href="../Soundness/#plfa_plfa-part3-Soundness-21684" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21685" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21687" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21688" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21696" href="../Soundness/#plfa_plfa-part3-Soundness-21696" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-21697" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21699" href="../Soundness/#plfa_plfa-part3-Soundness-21699" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-21702" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21704" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-21706" href="../Soundness/#plfa_plfa-part3-Soundness-21706" class="Bound">M′</a>
      <a id="plfa_plfa-part3-Soundness-21715" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21720" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21734" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21735" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21737" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21739" href="../Untyped/#plfa_plfa-part2-Untyped-8582" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-21744" href="../Soundness/#plfa_plfa-part3-Soundness-21684" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21745" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21747" href="../Soundness/#plfa_plfa-part3-Soundness-21696" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-21749" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21750" href="../Soundness/#plfa_plfa-part3-Soundness-19529" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-21761" href="../Soundness/#plfa_plfa-part3-Soundness-21699" class="Bound">eq</a><a id="plfa_plfa-part3-Soundness-21763" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-21765" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-21769" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21771" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21773" href="../Soundness/#plfa_plfa-part3-Soundness-21773" class="Bound">δ′</a> <a id="plfa_plfa-part3-Soundness-21776" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21778" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21780" href="../Soundness/#plfa_plfa-part3-Soundness-21780" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-21790" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21792" href="../Soundness/#plfa_plfa-part3-Soundness-21792" class="Bound">m′</a> <a id="plfa_plfa-part3-Soundness-21795" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21797" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21799" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-21805" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21807" href="../Denotational/#plfa_plfa-part3-Denotational-9222" class="Function">init</a> <a id="plfa_plfa-part3-Soundness-21812" href="../Soundness/#plfa_plfa-part3-Soundness-21773" class="Bound">δ′</a> <a id="plfa_plfa-part3-Soundness-21815" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21817" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21819" class="Symbol">((λ</a> <a id="plfa_plfa-part3-Soundness-21823" href="../Soundness/#plfa_plfa-part3-Soundness-21823" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-21825" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-21827" href="../Soundness/#plfa_plfa-part3-Soundness-14701" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-21846" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21847" href="../Soundness/#plfa_plfa-part3-Soundness-21780" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-21857" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21858" href="../Untyped/#plfa_plfa-part2-Untyped-4436" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-21860" href="../Soundness/#plfa_plfa-part3-Soundness-21823" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-21861" class="Symbol">))))</a> <a id="plfa_plfa-part3-Soundness-21866" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a>
             <a id="plfa_plfa-part3-Soundness-21881" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21889" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21890" href="../Denotational/#plfa_plfa-part3-Denotational-32854" class="Function">up-env</a> <a id="plfa_plfa-part3-Soundness-21897" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21898" href="../Soundness/#plfa_plfa-part3-Soundness-20299" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-21904" href="../Soundness/#plfa_plfa-part3-Soundness-21792" class="Bound">m′</a><a id="plfa_plfa-part3-Soundness-21906" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21908" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21909" href="../Compositional/#plfa_plfa-part3-Compositional-12866" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-21917" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21918" href="../Soundness/#plfa_plfa-part3-Soundness-21780" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-21928" href="../Untyped/#plfa_plfa-part2-Untyped-4391" class="InductiveConstructor">Z</a><a id="plfa_plfa-part3-Soundness-21929" class="Symbol">)))</a> <a id="plfa_plfa-part3-Soundness-21933" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21935" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-21937" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21951" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21952" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21960" href="../Soundness/#plfa_plfa-part3-Soundness-21960" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-21961" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21963" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-21966" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21968" href="../Soundness/#plfa_plfa-part3-Soundness-21968" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-21971" href="../Untyped/#plfa_plfa-part2-Untyped-5546" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-21973" href="../Soundness/#plfa_plfa-part3-Soundness-21973" class="Bound">M₂</a>

<a id="plfa_plfa-part3-Soundness-21977" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21991" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21992" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21994" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21996" href="../Soundness/#plfa_plfa-part3-Soundness-21996" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21997" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21999" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-22007" href="../Soundness/#plfa_plfa-part3-Soundness-22007" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-22010" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-22016" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22018" href="../Denotational/#plfa_plfa-part3-Denotational-9950" class="Function">`⊥</a> <a id="plfa_plfa-part3-Soundness-22021" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22023" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22025" href="../Soundness/#plfa_plfa-part3-Soundness-18893" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-22033" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22034" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-22036" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22038" href="../Soundness/#plfa_plfa-part3-Soundness-21996" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-22039" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22041" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22043" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-22051" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22053" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a>

<a id="plfa_plfa-part3-Soundness-22056" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-22070" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22071" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-22073" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22075" href="../Soundness/#plfa_plfa-part3-Soundness-22075" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-22076" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22078" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22079" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-22087" href="../Soundness/#plfa_plfa-part3-Soundness-22087" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22090" href="../Soundness/#plfa_plfa-part3-Soundness-22090" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22092" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22094" href="../Soundness/#plfa_plfa-part3-Soundness-22094" class="Bound">eq</a>
  <a id="plfa_plfa-part3-Soundness-22099" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-22104" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-22118" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22119" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-22121" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22123" href="../Soundness/#plfa_plfa-part3-Soundness-22075" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-22124" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22126" href="../Soundness/#plfa_plfa-part3-Soundness-22087" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22129" href="../Soundness/#plfa_plfa-part3-Soundness-22094" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-22132" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22134" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-22148" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22149" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-22151" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22153" href="../Soundness/#plfa_plfa-part3-Soundness-22075" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-22154" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22156" href="../Soundness/#plfa_plfa-part3-Soundness-22090" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-22159" href="../Soundness/#plfa_plfa-part3-Soundness-22094" class="Bound">eq</a>
<a id="plfa_plfa-part3-Soundness-22162" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-22166" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22168" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22170" href="../Soundness/#plfa_plfa-part3-Soundness-22170" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-22173" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22175" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22177" href="../Soundness/#plfa_plfa-part3-Soundness-22177" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-22186" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22188" href="../Soundness/#plfa_plfa-part3-Soundness-22188" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-22191" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22193" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22195" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22197" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22199" href="../Soundness/#plfa_plfa-part3-Soundness-22199" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-22202" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22204" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22206" href="../Soundness/#plfa_plfa-part3-Soundness-22206" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-22215" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22217" href="../Soundness/#plfa_plfa-part3-Soundness-22217" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-22220" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22222" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22224" class="Symbol">=</a>
     <a id="plfa_plfa-part3-Soundness-22231" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22233" href="../Soundness/#plfa_plfa-part3-Soundness-22170" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-22236" href="../Denotational/#plfa_plfa-part3-Denotational-9979" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-22239" href="../Soundness/#plfa_plfa-part3-Soundness-22199" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-22242" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22244" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22246" href="../Soundness/#plfa_plfa-part3-Soundness-19219" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-22254" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22255" class="Argument">γ₁</a> <a id="plfa_plfa-part3-Soundness-22258" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22260" href="../Soundness/#plfa_plfa-part3-Soundness-22170" class="Bound">δ₁</a><a id="plfa_plfa-part3-Soundness-22262" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-22264" class="Argument">γ₂</a> <a id="plfa_plfa-part3-Soundness-22267" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22269" href="../Soundness/#plfa_plfa-part3-Soundness-22199" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-22271" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-22273" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-22275" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22277" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-22278" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22280" href="../Soundness/#plfa_plfa-part3-Soundness-22177" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-22289" href="../Soundness/#plfa_plfa-part3-Soundness-22206" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-22298" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a>
                    <a id="plfa_plfa-part3-Soundness-22320" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-22328" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22329" href="../Denotational/#plfa_plfa-part3-Denotational-32332" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-22335" href="../Soundness/#plfa_plfa-part3-Soundness-22188" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-22338" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22339" href="../Denotational/#plfa_plfa-part3-Denotational-10610" class="Function">⊑-env-conj-R1</a> <a id="plfa_plfa-part3-Soundness-22353" href="../Soundness/#plfa_plfa-part3-Soundness-22170" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-22356" href="../Soundness/#plfa_plfa-part3-Soundness-22199" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-22358" class="Symbol">))</a>
                            <a id="plfa_plfa-part3-Soundness-22389" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22390" href="../Denotational/#plfa_plfa-part3-Denotational-32332" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-22396" href="../Soundness/#plfa_plfa-part3-Soundness-22217" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-22399" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22400" href="../Denotational/#plfa_plfa-part3-Denotational-10716" class="Function">⊑-env-conj-R2</a> <a id="plfa_plfa-part3-Soundness-22414" href="../Soundness/#plfa_plfa-part3-Soundness-22170" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-22417" href="../Soundness/#plfa_plfa-part3-Soundness-22199" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-22419" class="Symbol">))</a> <a id="plfa_plfa-part3-Soundness-22422" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22424" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-22426" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-22440" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22441" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-22445" href="../Soundness/#plfa_plfa-part3-Soundness-22445" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-22447" href="../Soundness/#plfa_plfa-part3-Soundness-22447" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-22449" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22451" href="../Soundness/#plfa_plfa-part3-Soundness-22451" class="Bound">eq</a>
    <a id="plfa_plfa-part3-Soundness-22458" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-22463" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-22477" href="../Soundness/#plfa_plfa-part3-Soundness-22445" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-22479" href="../Soundness/#plfa_plfa-part3-Soundness-22451" class="Bound">eq</a>
<a id="plfa_plfa-part3-Soundness-22482" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-22486" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22488" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22490" href="../Soundness/#plfa_plfa-part3-Soundness-22490" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-22492" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22494" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22496" href="../Soundness/#plfa_plfa-part3-Soundness-22496" class="Bound">subst-δ</a> <a id="plfa_plfa-part3-Soundness-22504" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22506" href="../Soundness/#plfa_plfa-part3-Soundness-22506" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-22508" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22510" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22512" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22514" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22516" href="../Soundness/#plfa_plfa-part3-Soundness-22490" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-22518" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22520" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22522" href="../Soundness/#plfa_plfa-part3-Soundness-22496" class="Bound">subst-δ</a> <a id="plfa_plfa-part3-Soundness-22530" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22532" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-22536" href="../Soundness/#plfa_plfa-part3-Soundness-22506" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-22538" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-22541" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22543" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a>
</pre><ul><li>情况 <code>var</code>：我们有 <code>subst σ M ≡ y</code>，因此 <code>M</code> 也必须是一个变量，称为 <code>x</code>。 我们应用引理 <code>subst-reflect-var</code> 得出结论。</li></ul><ul><li>情况 <code>↦-elim</code>：我们有 <code>subst σ M ≡ L₁ · L₂</code>，需要对 <code>M</code> 进行情况分析：<ul><li><p>情况 <code>M ≡ ` x</code>：我们再次应用 <code>subst-reflect-var</code> 得出结论。</p></li><li><p>情况 <code>M ≡ M₁ · M₂</code>：根据归纳假设，我们有某个 <code>δ₁</code> 和 <code>δ₂</code> 使得 <code>δ₁ ⊢ M₁ ↓ v₁ ↦ v₃</code> 和 <code>γ `⊢ σ ↓ δ₁</code>，以及 <code>δ₂ ⊢ M₂ ↓ v₁</code> 和 <code>γ `⊢ σ ↓ δ₂</code>。 根据 <code>⊑-env</code> 我们有 <code>δ₁ ⊔ δ₂ ⊢ M₁ ↓ v₁ ↦ v₃</code> 和 <code>δ₁ ⊔ δ₂ ⊢ M₂ ↓ v₁</code> （使用 <code>⊑-env-conj-R1</code> 和 <code>⊑-env-conj-R2</code> 得出），因此 <code>δ₁ ⊔ δ₂ ⊢ M₁ · M₂ ↓ v₃</code>。 我们通过 <code>subst-⊔</code> 引理得出 <code>γ `⊢ σ ↓ δ₁ ⊔ δ₂</code> 从而证明此情况。</p></li></ul></li></ul><ul><li>情况 <code>↦-intro</code>：我们有 <code>subst σ M ≡ ƛ L′</code>，需要对 <code>M</code> 进行情况分析：<ul><li><p>情况 <code>M ≡ x</code>：我们应用 <code>subst-reflect-var</code> 引理。</p></li><li><p>情况 <code>M ≡ ƛ M′</code>：根据归纳假设，我们有 <code>(δ′ , v′) ⊢ M′ ↓ v₂</code> 和 <code>(δ , v₁) ⊢ exts σ ↓ (δ′ , v′)</code>。根据后者可得 <code>(δ , v₁) ⊢ # 0 ↓ v′</code>。 根据引理 <code>var-inv</code> 我们有 <code>v′ ⊑ v₁</code>，于是根据 <code>up-env</code> 引理我们有 <code>(δ′ , v₁) ⊢ M′ ↓ v₂</code>，因此 <code>δ′ ⊢ ƛ M′ ↓ v₁ → v₂</code>。我们还需要证明 <code>δ ⊢ σ ↓ δ′</code>。固定 <code>k</code>，我们有 <code>(δ , v₁) ⊢ rename S_ σ k ↓ δ k′</code>， 接着应用引理 <code>rename-inc-reflect</code> 可得 <code>δ ⊢ σ k ↓ δ k′</code>，于是此情况证明完毕。</p></li></ul></li></ul><ul><li>情况 <code>⊥-intro</code>：我们为 <code>δ</code> 选择<code>⊥</code>。 根据 <code>⊥-intro</code> 我们有 <code>⊥ ⊢ M ↓ ⊥</code>。 根据 <code>subst-⊥</code> 引理有 <code>δ `⊢ σ ↓ `⊥</code>。</li></ul><ul><li>情况 <code>⊔-intro</code>：根据归纳假设我们有 <code>δ₁ ⊢ M ↓ v₁</code>、<code>δ₂ ⊢ M ↓ v₂</code>、 <code>δ `⊢ σ ↓ δ₁</code> 和 <code>δ `⊢ σ ↓ δ₂</code>。 根据 <code>⊑-env</code>、<code>⊑-env-conj-R1</code> 和 <code>⊑-env-conj-R2</code> 我们有 <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₁</code> 和 <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₂</code>，因此根据 <code>⊔-intro</code> 可得 <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₁ ⊔ v₂</code>。 根据 <code>subst-⊔</code> 可得 <code>δ `⊢ σ ↓ δ₁ ⊔ δ₂</code>。</li></ul><h3 id="单一代换反映了指称不变">单一代换反映了指称不变</h3><p>现在大部分工作已经完成，我们已经证明了同时代换反映了指称不变。当然，β-归约使用单一代换， 因此我们需要一个推论来证明单一代换反映了指称不变。也就是说，给定项 <code>N : (Γ , ★ ⊢ ★)</code> 和 <code>M : (Γ ⊢ ★)</code>，若 <code>γ ⊢ N [ M ] ↓ w</code>，则对于某个值 <code>v</code> 有 <code>γ ⊢ M ↓ v</code> 且 <code>( γ , v) ⊢ N ↓ w</code> 。于是我们有 <code>N [ M ] = subst (subst-zero M) N</code>。</p><p>我们首先证明一个关于 <code>subst-zero</code> 的引理，即若 <code>δ ⊢ subst-zero M ↓ γ</code>，则对某个值 <code>w</code>，有 <code>γ `⊑ (δ , w) × δ ⊢ M ↓ w</code>。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-zero-reflect"></a><a id="plfa_plfa-part3-Soundness-26799" href="../Soundness/#plfa_plfa-part3-Soundness-26799" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-26818" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-26820" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-26822" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-26823" href="../Soundness/#plfa_plfa-part3-Soundness-26823" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-26824" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-26826" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-26827" href="../Soundness/#plfa_plfa-part3-Soundness-26827" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-26829" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-26831" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-26835" href="../Soundness/#plfa_plfa-part3-Soundness-26823" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-26836" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-26838" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-26839" href="../Soundness/#plfa_plfa-part3-Soundness-26839" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-26841" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-26843" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-26847" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-26848" href="../Soundness/#plfa_plfa-part3-Soundness-26823" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-26850" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-26852" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-26853" class="Symbol">)}</a> <a id="plfa_plfa-part3-Soundness-26856" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-26857" href="../Soundness/#plfa_plfa-part3-Soundness-26857" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-26859" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-26861" href="../Soundness/#plfa_plfa-part3-Soundness-26823" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-26863" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-26865" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-26866" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-26870" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-26872" href="../Soundness/#plfa_plfa-part3-Soundness-26827" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-26874" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-26877" href="../Untyped/#plfa_plfa-part2-Untyped-9439" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-26888" href="../Soundness/#plfa_plfa-part3-Soundness-26857" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-26890" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-26892" href="../Soundness/#plfa_plfa-part3-Soundness-26839" class="Bound">γ</a>
    <a id="plfa_plfa-part3-Soundness-26898" class="Comment">----------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-26941" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-26943" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-26946" href="../Soundness/#plfa_plfa-part3-Soundness-26946" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-26948" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-26950" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-26956" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-26958" href="../Soundness/#plfa_plfa-part3-Soundness-26839" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-26960" href="../Denotational/#plfa_plfa-part3-Denotational-9696" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-26963" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-26964" href="../Soundness/#plfa_plfa-part3-Soundness-26827" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-26966" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-26969" href="../Soundness/#plfa_plfa-part3-Soundness-26946" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-26970" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-26972" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Soundness-26974" href="../Soundness/#plfa_plfa-part3-Soundness-26827" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-26976" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-26978" href="../Soundness/#plfa_plfa-part3-Soundness-26857" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-26980" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-26982" href="../Soundness/#plfa_plfa-part3-Soundness-26946" class="Bound">w</a>
<a id="plfa_plfa-part3-Soundness-26984" href="../Soundness/#plfa_plfa-part3-Soundness-26799" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-27003" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27004" class="Argument">δ</a> <a id="plfa_plfa-part3-Soundness-27006" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-27008" href="../Soundness/#plfa_plfa-part3-Soundness-27008" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-27009" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-27011" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27012" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-27014" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-27016" href="../Soundness/#plfa_plfa-part3-Soundness-27016" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-27017" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-27019" href="../Soundness/#plfa_plfa-part3-Soundness-27019" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-27023" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-27025" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-27027" href="../Denotational/#plfa_plfa-part3-Denotational-9277" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-27032" href="../Soundness/#plfa_plfa-part3-Soundness-27016" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-27034" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-27036" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-27038" href="../Soundness/#plfa_plfa-part3-Soundness-27066" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-27044" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-27046" href="../Soundness/#plfa_plfa-part3-Soundness-27019" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-27050" href="../Untyped/#plfa_plfa-part2-Untyped-4391" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-27052" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-27054" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Soundness-27058" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-27066" href="../Soundness/#plfa_plfa-part3-Soundness-27066" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-27072" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-27074" href="../Soundness/#plfa_plfa-part3-Soundness-27016" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-27076" href="../Denotational/#plfa_plfa-part3-Denotational-9696" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-27079" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-27080" href="../Soundness/#plfa_plfa-part3-Soundness-27008" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-27082" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-27085" href="../Denotational/#plfa_plfa-part3-Denotational-9277" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-27090" href="../Soundness/#plfa_plfa-part3-Soundness-27016" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-27091" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-27095" href="../Soundness/#plfa_plfa-part3-Soundness-27066" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-27101" href="../Untyped/#plfa_plfa-part2-Untyped-4391" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-27104" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-27107" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a>
  <a id="plfa_plfa-part3-Soundness-27116" href="../Soundness/#plfa_plfa-part3-Soundness-27066" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-27122" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-27123" href="../Untyped/#plfa_plfa-part2-Untyped-4436" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-27125" href="../Soundness/#plfa_plfa-part3-Soundness-27125" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-27126" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-27128" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-27130" href="../Compositional/#plfa_plfa-part3-Compositional-12866" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-27138" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-27139" href="../Soundness/#plfa_plfa-part3-Soundness-27019" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-27143" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-27144" href="../Untyped/#plfa_plfa-part2-Untyped-4436" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-27146" href="../Soundness/#plfa_plfa-part3-Soundness-27125" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-27147" class="Symbol">))</a>
</pre><p>我们选择 <code>w</code> 作为 <code>γ</code> 中的最后一个值，通过将前提应用到 <code>Z</code> 可得 <code>δ ⊢ M ↓ w</code>。 最后，要证明 <code>γ `⊑ (δ , w)</code>，我们需要在输入项中通过归纳来证明一个引理。 由于我们选择了 <code>w</code>，因此基本的情况是平凡的。在归纳的情况中 <code>S x</code> 中， 前提 <code>δ ⊢ subst-zero M ↓ γ</code> 给出了 <code>δ ⊢ x ↓ γ (S x)</code>，接着使用 <code>var-inv</code> 可得 <code>γ (S x) ⊑ (δ `, w) (S x)</code>。</p><p>现在证明代换反映了指称不变：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-substitution-reflect"></a><a id="plfa_plfa-part3-Soundness-27914" href="../Soundness/#plfa_plfa-part3-Soundness-27914" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-27935" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-27937" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-27939" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27940" href="../Soundness/#plfa_plfa-part3-Soundness-27940" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-27941" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-27943" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27944" href="../Soundness/#plfa_plfa-part3-Soundness-27944" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-27946" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-27948" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-27952" href="../Soundness/#plfa_plfa-part3-Soundness-27940" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-27953" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-27955" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27956" href="../Soundness/#plfa_plfa-part3-Soundness-27956" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-27958" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-27960" href="../Soundness/#plfa_plfa-part3-Soundness-27940" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-27962" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-27964" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-27966" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-27968" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-27969" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-27971" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27972" href="../Soundness/#plfa_plfa-part3-Soundness-27972" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-27974" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-27976" href="../Soundness/#plfa_plfa-part3-Soundness-27940" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-27978" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-27980" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-27981" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-27983" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27984" href="../Soundness/#plfa_plfa-part3-Soundness-27984" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-27985" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-27989" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-27991" href="../Soundness/#plfa_plfa-part3-Soundness-27944" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-27993" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-27995" href="../Soundness/#plfa_plfa-part3-Soundness-27956" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-27997" href="../Untyped/#plfa_plfa-part2-Untyped-9555" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-27999" href="../Soundness/#plfa_plfa-part3-Soundness-27972" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-28001" href="../Untyped/#plfa_plfa-part2-Untyped-9555" class="Function Operator">]</a> <a id="plfa_plfa-part3-Soundness-28003" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-28005" href="../Soundness/#plfa_plfa-part3-Soundness-27984" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-28011" class="Comment">------------------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-28062" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-28064" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-28067" href="../Soundness/#plfa_plfa-part3-Soundness-28067" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-28069" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-28071" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-28077" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-28079" href="../Soundness/#plfa_plfa-part3-Soundness-27944" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-28081" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-28083" href="../Soundness/#plfa_plfa-part3-Soundness-27972" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-28085" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-28087" href="../Soundness/#plfa_plfa-part3-Soundness-28067" class="Bound">w</a>  <a id="plfa_plfa-part3-Soundness-28090" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-28093" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-28094" href="../Soundness/#plfa_plfa-part3-Soundness-27944" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-28096" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-28099" href="../Soundness/#plfa_plfa-part3-Soundness-28067" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-28100" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-28102" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-28104" href="../Soundness/#plfa_plfa-part3-Soundness-27956" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-28106" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-28108" href="../Soundness/#plfa_plfa-part3-Soundness-27984" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-28110" href="../Soundness/#plfa_plfa-part3-Soundness-27914" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-28131" href="../Soundness/#plfa_plfa-part3-Soundness-28131" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-28133" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-28138" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-28152" href="../Soundness/#plfa_plfa-part3-Soundness-28131" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-28154" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-28159" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-28164" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-28166" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28168" href="../Soundness/#plfa_plfa-part3-Soundness-28168" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-28170" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28172" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28174" href="../Soundness/#plfa_plfa-part3-Soundness-28174" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-28178" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28180" href="../Soundness/#plfa_plfa-part3-Soundness-28180" class="Bound">γNv</a> <a id="plfa_plfa-part3-Soundness-28184" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-28186" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-28188" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-28193" href="../Soundness/#plfa_plfa-part3-Soundness-26799" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-28212" href="../Soundness/#plfa_plfa-part3-Soundness-28174" class="Bound">δσγ</a>
<a id="plfa_plfa-part3-Soundness-28216" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-28223" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-28225" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28227" href="../Soundness/#plfa_plfa-part3-Soundness-28227" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-28229" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28231" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28233" href="../Soundness/#plfa_plfa-part3-Soundness-28233" class="Bound">ineq</a> <a id="plfa_plfa-part3-Soundness-28238" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28240" href="../Soundness/#plfa_plfa-part3-Soundness-28240" class="Bound">δMw</a> <a id="plfa_plfa-part3-Soundness-28244" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-28246" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-28248" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-28250" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28252" href="../Soundness/#plfa_plfa-part3-Soundness-28227" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-28254" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28256" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28258" href="../Soundness/#plfa_plfa-part3-Soundness-28240" class="Bound">δMw</a> <a id="plfa_plfa-part3-Soundness-28262" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28264" href="../Denotational/#plfa_plfa-part3-Denotational-32332" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-28270" class="Bound">γNv</a> <a id="plfa_plfa-part3-Soundness-28274" href="../Soundness/#plfa_plfa-part3-Soundness-28233" class="Bound">ineq</a> <a id="plfa_plfa-part3-Soundness-28279" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-28281" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a>
</pre><p>我们应用 <code>subst-reflect</code> 引理可得对于某个 <code>γ</code> 有 <code>δ ⊢ subst-zero M ↓ γ</code> 和 <code>γ ⊢ N ↓ v</code>。通过使用前者，<code>subst-zero-reflect</code> 给出了 <code>γ `⊑ (δ , w)</code> 和 <code>δ ⊢ M ↓ w</code>。我们通过应用 <code>⊑-env</code> 引理，使用 <code>γ ⊢ N ↓ v</code> 和 <code>γ `⊑ (δ , w)</code> 可得 <code>δ , w ⊢ N ↓ v</code>。</p><h3 id="归约反映了指称不变-1">归约反映了指称不变</h3><p>现在我们已经证明了代换反映了指称不变，可以很容易地证明归约也拥有此性质：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-reflect-beta"></a><a id="plfa_plfa-part3-Soundness-29035" href="../Soundness/#plfa_plfa-part3-Soundness-29035" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-29048" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-29050" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-29052" href="../Soundness/#plfa_plfa-part3-Soundness-29052" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-29053" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-29055" href="../Soundness/#plfa_plfa-part3-Soundness-29055" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-29057" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-29059" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-29063" href="../Soundness/#plfa_plfa-part3-Soundness-29052" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-29064" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-29066" href="../Soundness/#plfa_plfa-part3-Soundness-29066" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29068" href="../Soundness/#plfa_plfa-part3-Soundness-29068" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-29069" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-29071" href="../Soundness/#plfa_plfa-part3-Soundness-29071" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-29072" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Soundness-29078" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-29080" href="../Soundness/#plfa_plfa-part3-Soundness-29055" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-29082" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-29084" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29085" href="../Soundness/#plfa_plfa-part3-Soundness-29068" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-29087" href="../Untyped/#plfa_plfa-part2-Untyped-9555" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-29089" href="../Soundness/#plfa_plfa-part3-Soundness-29066" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29091" href="../Untyped/#plfa_plfa-part2-Untyped-9555" class="Function Operator">]</a><a id="plfa_plfa-part3-Soundness-29092" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29094" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-29096" href="../Soundness/#plfa_plfa-part3-Soundness-29071" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-29102" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-29104" href="../Soundness/#plfa_plfa-part3-Soundness-29055" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-29106" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-29108" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29109" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-29111" href="../Soundness/#plfa_plfa-part3-Soundness-29068" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-29112" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29114" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-29116" href="../Soundness/#plfa_plfa-part3-Soundness-29066" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29118" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-29120" href="../Soundness/#plfa_plfa-part3-Soundness-29071" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-29122" href="../Soundness/#plfa_plfa-part3-Soundness-29035" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-29135" href="../Soundness/#plfa_plfa-part3-Soundness-29135" class="Bound">d</a>
    <a id="plfa_plfa-part3-Soundness-29141" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-29146" href="../Soundness/#plfa_plfa-part3-Soundness-27914" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-29167" href="../Soundness/#plfa_plfa-part3-Soundness-29135" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-29169" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-29173" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-29175" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-29177" href="../Soundness/#plfa_plfa-part3-Soundness-29177" class="Bound">v₂′</a> <a id="plfa_plfa-part3-Soundness-29181" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-29183" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-29185" href="../Soundness/#plfa_plfa-part3-Soundness-29185" class="Bound">d₁′</a> <a id="plfa_plfa-part3-Soundness-29189" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-29191" href="../Soundness/#plfa_plfa-part3-Soundness-29191" class="Bound">d₂′</a> <a id="plfa_plfa-part3-Soundness-29195" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-29197" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-29199" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29201" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29208" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29209" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29217" href="../Soundness/#plfa_plfa-part3-Soundness-29191" class="Bound">d₂′</a><a id="plfa_plfa-part3-Soundness-29220" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29222" href="../Soundness/#plfa_plfa-part3-Soundness-29185" class="Bound">d₁′</a>


<a id="plfa_plfa-part3-Soundness-reflect"></a><a id="plfa_plfa-part3-Soundness-29228" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29236" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-29238" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-29240" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29241" href="../Soundness/#plfa_plfa-part3-Soundness-29241" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-29242" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-29244" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29245" href="../Soundness/#plfa_plfa-part3-Soundness-29245" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-29247" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-29249" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-29253" href="../Soundness/#plfa_plfa-part3-Soundness-29241" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-29254" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-29256" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29257" href="../Soundness/#plfa_plfa-part3-Soundness-29257" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29259" href="../Soundness/#plfa_plfa-part3-Soundness-29259" class="Bound">M′</a> <a id="plfa_plfa-part3-Soundness-29262" href="../Soundness/#plfa_plfa-part3-Soundness-29262" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-29264" href="../Soundness/#plfa_plfa-part3-Soundness-29264" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-29265" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-29269" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-29271" href="../Soundness/#plfa_plfa-part3-Soundness-29245" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-29273" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-29275" href="../Soundness/#plfa_plfa-part3-Soundness-29262" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-29277" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-29279" href="../Soundness/#plfa_plfa-part3-Soundness-29264" class="Bound">v</a>  <a id="plfa_plfa-part3-Soundness-29282" class="Symbol">→</a>  <a id="plfa_plfa-part3-Soundness-29285" href="../Soundness/#plfa_plfa-part3-Soundness-29257" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29287" href="../Untyped/#plfa_plfa-part2-Untyped-12855" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-29290" href="../Soundness/#plfa_plfa-part3-Soundness-29259" class="Bound">M′</a>  <a id="plfa_plfa-part3-Soundness-29294" class="Symbol">→</a>   <a id="plfa_plfa-part3-Soundness-29298" href="../Soundness/#plfa_plfa-part3-Soundness-29259" class="Bound">M′</a> <a id="plfa_plfa-part3-Soundness-29301" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-29303" href="../Soundness/#plfa_plfa-part3-Soundness-29262" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-29309" class="Comment">---------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-29345" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-29347" href="../Soundness/#plfa_plfa-part3-Soundness-29245" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-29349" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-29351" href="../Soundness/#plfa_plfa-part3-Soundness-29257" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29353" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-29355" href="../Soundness/#plfa_plfa-part3-Soundness-29264" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-29357" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29365" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-29369" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29370" href="../Untyped/#plfa_plfa-part2-Untyped-12905" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-29373" href="../Soundness/#plfa_plfa-part3-Soundness-29373" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29374" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29376" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29379" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29387" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-29391" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29392" href="../Untyped/#plfa_plfa-part2-Untyped-12995" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-29395" href="../Soundness/#plfa_plfa-part3-Soundness-29395" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29396" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29398" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29401" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a><a id="plfa_plfa-part3-Soundness-29408" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29409" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-29411" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29413" href="../Soundness/#plfa_plfa-part3-Soundness-29413" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-29414" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-29416" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29417" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-29420" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29421" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-29423" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29425" href="../Soundness/#plfa_plfa-part3-Soundness-29425" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-29426" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-29429" href="../Untyped/#plfa_plfa-part2-Untyped-13085" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-29431" href="../Soundness/#plfa_plfa-part3-Soundness-29431" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-29438" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-29443" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-29446" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29447" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-29449" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29451" href="../Soundness/#plfa_plfa-part3-Soundness-29413" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-29452" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-29454" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-29456" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29458" href="../Soundness/#plfa_plfa-part3-Soundness-29425" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-29459" class="Symbol">}</a>
<a id="plfa_plfa-part3-Soundness-29461" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-29465" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-29467" href="../Soundness/#plfa_plfa-part3-Soundness-29467" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-29470" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-29478" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-29482" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-29485" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29487" href="../Soundness/#plfa_plfa-part3-Soundness-29035" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-29500" href="../Soundness/#plfa_plfa-part3-Soundness-29467" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-29503" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29511" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-29515" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29516" href="../Untyped/#plfa_plfa-part2-Untyped-13193" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-29518" href="../Soundness/#plfa_plfa-part3-Soundness-29518" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29519" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29521" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29524" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29532" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29533" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29540" href="../Soundness/#plfa_plfa-part3-Soundness-29540" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29543" href="../Soundness/#plfa_plfa-part3-Soundness-29543" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-29545" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29547" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29548" href="../Untyped/#plfa_plfa-part2-Untyped-12905" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-29551" href="../Soundness/#plfa_plfa-part3-Soundness-29551" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29552" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29554" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-29559" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29561" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29568" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29569" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29577" href="../Soundness/#plfa_plfa-part3-Soundness-29540" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29580" href="../Soundness/#plfa_plfa-part3-Soundness-29551" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-29582" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-29586" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29588" href="../Soundness/#plfa_plfa-part3-Soundness-29543" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-29591" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29599" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29600" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29607" href="../Soundness/#plfa_plfa-part3-Soundness-29607" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29610" href="../Soundness/#plfa_plfa-part3-Soundness-29610" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-29612" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29614" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29615" href="../Untyped/#plfa_plfa-part2-Untyped-12995" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-29618" href="../Soundness/#plfa_plfa-part3-Soundness-29618" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29619" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29621" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-29626" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29628" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29635" href="../Soundness/#plfa_plfa-part3-Soundness-29607" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29638" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29639" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29647" href="../Soundness/#plfa_plfa-part3-Soundness-29610" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-29650" href="../Soundness/#plfa_plfa-part3-Soundness-29618" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-29652" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-29656" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-29658" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29666" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29667" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29674" href="../Soundness/#plfa_plfa-part3-Soundness-29674" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29677" href="../Soundness/#plfa_plfa-part3-Soundness-29677" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-29679" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29681" href="../Untyped/#plfa_plfa-part2-Untyped-13085" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-29683" href="../Soundness/#plfa_plfa-part3-Soundness-29683" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-29690" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-29695" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29702" href="../Soundness/#plfa_plfa-part3-Soundness-29674" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29705" href="../Soundness/#plfa_plfa-part3-Soundness-29677" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-29708" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-29712" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-29714" href="../Soundness/#plfa_plfa-part3-Soundness-29714" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-29717" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-29725" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-29729" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-29732" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29734" href="../Soundness/#plfa_plfa-part3-Soundness-29035" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-29747" href="../Soundness/#plfa_plfa-part3-Soundness-29714" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-29750" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29758" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29759" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29766" href="../Soundness/#plfa_plfa-part3-Soundness-29766" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29769" href="../Soundness/#plfa_plfa-part3-Soundness-29769" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-29771" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29773" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29774" href="../Untyped/#plfa_plfa-part2-Untyped-13193" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-29776" href="../Soundness/#plfa_plfa-part3-Soundness-29776" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29777" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29779" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29782" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29790" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29791" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29799" href="../Soundness/#plfa_plfa-part3-Soundness-29799" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-29800" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29802" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29803" href="../Untyped/#plfa_plfa-part2-Untyped-12905" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-29806" href="../Soundness/#plfa_plfa-part3-Soundness-29806" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29807" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29809" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29812" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29820" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29821" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29829" href="../Soundness/#plfa_plfa-part3-Soundness-29829" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-29830" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29832" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29833" href="../Untyped/#plfa_plfa-part2-Untyped-12995" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-29836" href="../Soundness/#plfa_plfa-part3-Soundness-29836" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29837" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29839" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29842" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29850" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29851" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29859" href="../Soundness/#plfa_plfa-part3-Soundness-29859" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-29860" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29862" href="../Untyped/#plfa_plfa-part2-Untyped-13085" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-29864" href="../Soundness/#plfa_plfa-part3-Soundness-29864" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-29871" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-29876" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29884" href="../Soundness/#plfa_plfa-part3-Soundness-29859" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-29886" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-29890" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-29892" href="../Soundness/#plfa_plfa-part3-Soundness-29892" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-29895" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-29903" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-29907" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-29910" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29912" href="../Soundness/#plfa_plfa-part3-Soundness-29035" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-29925" href="../Soundness/#plfa_plfa-part3-Soundness-29892" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-29928" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29936" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29937" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29945" href="../Soundness/#plfa_plfa-part3-Soundness-29945" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-29946" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29948" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29949" href="../Untyped/#plfa_plfa-part2-Untyped-13193" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-29951" href="../Soundness/#plfa_plfa-part3-Soundness-29951" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29952" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29954" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-29959" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29961" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29969" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29970" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29978" href="../Soundness/#plfa_plfa-part3-Soundness-29945" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-29980" href="../Soundness/#plfa_plfa-part3-Soundness-29951" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-29982" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-29986" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-29988" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29996" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-30004" href="../Soundness/#plfa_plfa-part3-Soundness-30004" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30006" href="../Soundness/#plfa_plfa-part3-Soundness-30006" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-30009" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-30011" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-30019" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-30027" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30028" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-30036" href="../Soundness/#plfa_plfa-part3-Soundness-30036" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-30039" href="../Soundness/#plfa_plfa-part3-Soundness-30039" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-30041" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30043" href="../Soundness/#plfa_plfa-part3-Soundness-30043" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30045" href="../Soundness/#plfa_plfa-part3-Soundness-30045" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-30048" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-30056" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-30060" href="../Soundness/#plfa_plfa-part3-Soundness-30045" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-30063" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-30068" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-30076" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30077" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-30085" href="../Soundness/#plfa_plfa-part3-Soundness-30036" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-30088" href="../Soundness/#plfa_plfa-part3-Soundness-30043" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30090" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-30094" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30096" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30097" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-30105" href="../Soundness/#plfa_plfa-part3-Soundness-30039" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-30108" href="../Soundness/#plfa_plfa-part3-Soundness-30043" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30110" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-30114" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-30116" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-30124" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30125" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-30129" href="../Soundness/#plfa_plfa-part3-Soundness-30129" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-30131" href="../Soundness/#plfa_plfa-part3-Soundness-30131" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-30133" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30135" href="../Soundness/#plfa_plfa-part3-Soundness-30135" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30137" href="../Soundness/#plfa_plfa-part3-Soundness-30137" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-30140" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-30142" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-30146" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30147" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-30155" href="../Soundness/#plfa_plfa-part3-Soundness-30129" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-30157" href="../Soundness/#plfa_plfa-part3-Soundness-30135" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30159" href="../Soundness/#plfa_plfa-part3-Soundness-30137" class="Bound">mn</a><a id="plfa_plfa-part3-Soundness-30161" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30163" href="../Soundness/#plfa_plfa-part3-Soundness-30131" class="Bound">lt</a>
</pre><h2 id="归约蕴含指称等价">归约蕴含指称等价</h2><p>我们已经证明了归约保持并反映了指称不变，因此归约蕴含指称等价：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-reduce-equal"></a><a id="plfa_plfa-part3-Soundness-30406" href="../Soundness/#plfa_plfa-part3-Soundness-30406" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-30419" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30421" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-30423" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30424" href="../Soundness/#plfa_plfa-part3-Soundness-30424" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-30425" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30427" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30428" href="../Soundness/#plfa_plfa-part3-Soundness-30428" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30430" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30432" href="../Soundness/#plfa_plfa-part3-Soundness-30424" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-30434" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-30436" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-30437" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30439" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30440" href="../Soundness/#plfa_plfa-part3-Soundness-30440" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-30442" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30444" href="../Soundness/#plfa_plfa-part3-Soundness-30424" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-30446" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-30448" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-30449" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-30453" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30455" href="../Soundness/#plfa_plfa-part3-Soundness-30428" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30457" href="../Untyped/#plfa_plfa-part2-Untyped-12855" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-30460" href="../Soundness/#plfa_plfa-part3-Soundness-30440" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-30466" class="Comment">---------</a>
  <a id="plfa_plfa-part3-Soundness-30478" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30480" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-30482" href="../Soundness/#plfa_plfa-part3-Soundness-30428" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30484" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Soundness-30486" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-30488" href="../Soundness/#plfa_plfa-part3-Soundness-30440" class="Bound">N</a>
<a id="plfa_plfa-part3-Soundness-30490" href="../Soundness/#plfa_plfa-part3-Soundness-30406" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-30503" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30504" href="../Soundness/#plfa_plfa-part3-Soundness-30504" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-30505" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-30507" href="../Soundness/#plfa_plfa-part3-Soundness-30507" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-30508" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-30510" href="../Soundness/#plfa_plfa-part3-Soundness-30510" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-30511" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30513" href="../Soundness/#plfa_plfa-part3-Soundness-30513" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30515" href="../Soundness/#plfa_plfa-part3-Soundness-30515" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-30517" href="../Soundness/#plfa_plfa-part3-Soundness-30517" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-30519" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-30525" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-30527" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-30530" href="../Soundness/#plfa_plfa-part3-Soundness-30530" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-30532" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30534" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-30543" href="../Soundness/#plfa_plfa-part3-Soundness-30530" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-30545" href="../Soundness/#plfa_plfa-part3-Soundness-30513" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-30546" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30548" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-30550" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-30553" href="../Soundness/#plfa_plfa-part3-Soundness-30553" class="Bound">n</a> <a id="plfa_plfa-part3-Soundness-30555" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30557" href="../Soundness/#plfa_plfa-part3-Soundness-29228" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-30565" href="../Soundness/#plfa_plfa-part3-Soundness-30553" class="Bound">n</a> <a id="plfa_plfa-part3-Soundness-30567" href="../Soundness/#plfa_plfa-part3-Soundness-30513" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30569" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-30573" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30575" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a>
</pre><p>最终我们就得到了<strong>可靠性（Soundness Property）</strong>，即多步归约到一个 λ-抽象，蕴含指称等价于该 λ-抽象。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-soundness"></a><a id="plfa_plfa-part3-Soundness-30819" href="../Soundness/#plfa_plfa-part3-Soundness-30819" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-30829" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30831" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-30833" href="../Soundness/#plfa_plfa-part3-Soundness-30833" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-30834" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30836" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30837" href="../Soundness/#plfa_plfa-part3-Soundness-30837" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30839" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30841" href="../Soundness/#plfa_plfa-part3-Soundness-30833" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-30843" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-30845" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-30846" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30848" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30849" href="../Soundness/#plfa_plfa-part3-Soundness-30849" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-30851" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30853" href="../Soundness/#plfa_plfa-part3-Soundness-30833" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-30855" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-30857" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-30859" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-30861" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-30862" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-30866" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30868" href="../Soundness/#plfa_plfa-part3-Soundness-30837" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30870" href="../Untyped/#plfa_plfa-part2-Untyped-14249" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part3-Soundness-30873" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-30875" href="../Soundness/#plfa_plfa-part3-Soundness-30849" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-30881" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Soundness-30901" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30903" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-30905" href="../Soundness/#plfa_plfa-part3-Soundness-30837" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30907" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Soundness-30909" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-30911" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30912" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-30914" href="../Soundness/#plfa_plfa-part3-Soundness-30849" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-30915" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-30917" href="../Soundness/#plfa_plfa-part3-Soundness-30819" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-30927" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30928" class="DottedPattern Symbol">.(</a><a id="plfa_plfa-part3-Soundness-30930" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="DottedPattern InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-30932" class="DottedPattern Symbol">_)</a> <a id="plfa_plfa-part3-Soundness-30935" href="../Untyped/#plfa_plfa-part2-Untyped-14295" class="InductiveConstructor Operator">∎</a><a id="plfa_plfa-part3-Soundness-30936" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30938" href="../Soundness/#plfa_plfa-part3-Soundness-30938" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-30940" href="../Soundness/#plfa_plfa-part3-Soundness-30940" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-30942" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-30944" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-30946" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-30949" href="../Soundness/#plfa_plfa-part3-Soundness-30949" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-30951" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30953" href="../Soundness/#plfa_plfa-part3-Soundness-30949" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-30954" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30956" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-30958" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-30961" href="../Soundness/#plfa_plfa-part3-Soundness-30961" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-30963" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30965" href="../Soundness/#plfa_plfa-part3-Soundness-30961" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-30966" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30968" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-30970" href="../Soundness/#plfa_plfa-part3-Soundness-30819" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-30980" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30981" href="../Soundness/#plfa_plfa-part3-Soundness-30981" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-30982" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30984" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30985" href="../Soundness/#plfa_plfa-part3-Soundness-30985" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-30987" href="../Untyped/#plfa_plfa-part2-Untyped-14437" class="InductiveConstructor Operator">—→⟨</a> <a id="plfa_plfa-part3-Soundness-30991" href="../Soundness/#plfa_plfa-part3-Soundness-30991" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30993" href="../Untyped/#plfa_plfa-part2-Untyped-14437" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-30995" href="../Soundness/#plfa_plfa-part3-Soundness-30995" class="Bound">M—↠N</a><a id="plfa_plfa-part3-Soundness-30999" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-31001" href="../Soundness/#plfa_plfa-part3-Soundness-31001" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-31003" href="../Soundness/#plfa_plfa-part3-Soundness-31003" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-31005" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-31010" class="Keyword">let</a> <a id="plfa_plfa-part3-Soundness-31014" href="../Soundness/#plfa_plfa-part3-Soundness-31014" class="Bound">ih</a> <a id="plfa_plfa-part3-Soundness-31017" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-31019" href="../Soundness/#plfa_plfa-part3-Soundness-30819" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-31029" href="../Soundness/#plfa_plfa-part3-Soundness-30995" class="Bound">M—↠N</a> <a id="plfa_plfa-part3-Soundness-31034" class="Keyword">in</a>
   <a id="plfa_plfa-part3-Soundness-31040" class="Keyword">let</a> <a id="plfa_plfa-part3-Soundness-31044" href="../Soundness/#plfa_plfa-part3-Soundness-31044" class="Bound">e</a> <a id="plfa_plfa-part3-Soundness-31046" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-31048" href="../Soundness/#plfa_plfa-part3-Soundness-30406" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-31061" href="../Soundness/#plfa_plfa-part3-Soundness-30991" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-31063" class="Keyword">in</a>
   <a id="plfa_plfa-part3-Soundness-31069" href="../Denotational/#plfa_plfa-part3-Denotational-22926" class="Function">≃-trans</a> <a id="plfa_plfa-part3-Soundness-31077" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-31078" href="../Soundness/#plfa_plfa-part3-Soundness-30981" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-31079" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-31081" href="../Soundness/#plfa_plfa-part3-Soundness-31044" class="Bound">e</a> <a id="plfa_plfa-part3-Soundness-31083" href="../Soundness/#plfa_plfa-part3-Soundness-31014" class="Bound">ih</a> <a id="plfa_plfa-part3-Soundness-31086" href="../Soundness/#plfa_plfa-part3-Soundness-31001" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-31088" href="../Soundness/#plfa_plfa-part3-Soundness-31003" class="Bound">v</a>
</pre><h2 id="unicode">Unicode</h2><p>本章使用了以下 Unicode：</p><pre><code>≟  U+225F  QUESTIONED EQUAL TO (\?=)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Compositional/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Soundness.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Adequacy/">下一章</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">编程语言基础：Agda 描述</h2>本章译者：OlingCat<div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>本书按照<a rel="license" href="https://creativecommons.org/licenses/by/4.0/">创作公用 署名 4.0 国际</a>许可协议授权</div></footer></body></html>