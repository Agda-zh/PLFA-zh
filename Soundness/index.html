<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>编程语言基础：Agda 描述 – Soundness</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">编程语言基础：Agda 描述</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">主页</a> <a class="page-link" href="../Announcements/">公告</a> <a class="page-link" href="../GettingStarted/">使用说明</a> <a class="page-link" href="../Citing/">引用</a> <a class="page-link" href="https://plfa.github.io/">English</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Compositional/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Soundness.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Adequacy/">下一章</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Soundness: 指称语义归约的可靠性</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part3-Soundness-109" class="Keyword">module</a> <a id="plfa_plfa-part3-Soundness-116" href="../Soundness/#" class="Module">plfa.part3.Soundness</a> <a id="plfa_plfa-part3-Soundness-137" class="Keyword">where</a>
</pre><h2 id="简介">简介</h2><p>本章中我们会证明指称语义的归约语义是<strong>可靠（Sound）</strong>的，即对于任意项 <code>L</code>：</p><pre><code>L —↠ ƛ N  蕴含  ℰ L ≃ ℰ (ƛ N)</code></pre><p>证明可通过对归约序列进行归纳得出，因此主引理涉及单个归约步骤。 我们需要证明，如果任何项 <code>M</code> 步进到项 <code>N</code>，则 <code>M</code> 和 <code>M</code> 的指称相等。 我们将分别证明「当且仅当」的两个方向，一个方向类似于<strong>保型性（type preservation）</strong>的证明， 另一个方向类似于反向归约（即展开）的保型性证明。回想一下， 保型性有时称为<strong>主体归约（subject reduction）</strong>。 反向的保型性是一个众所周知的属性，称为<strong>主体展开（subject expansion）</strong>。 众所周知，大多数类型化 λ-演算都不满足主体展开！ （译注：一个 subject 是形如 <code>(1*2+3) : Int</code> 这样已经确定类型的项。 大多数类型化 λ-演算会失去保型性的原因参见<a href="https://www.bananaspace.org/wiki/%E7%B1%BB%E5%9E%8B%E4%B8%8D%E5%8F%98%E6%80%A7">类型不变性</a>。）</p><h2 id="导入">导入</h2><pre class="Agda"><a id="plfa_plfa-part3-Soundness-1530" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1535" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1542" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
  <a id="plfa_plfa-part3-Soundness-1582" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1588" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1589" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="plfa_plfa-part3-Soundness-1592" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1594" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#830" class="Function Operator">_≢_</a><a id="plfa_plfa-part3-Soundness-1597" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1599" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-1603" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1605" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a><a id="plfa_plfa-part3-Soundness-1608" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1610" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a><a id="plfa_plfa-part3-Soundness-1614" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1616" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1367" class="Function">cong₂</a><a id="plfa_plfa-part3-Soundness-1621" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1623" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1461" class="Function">cong-app</a><a id="plfa_plfa-part3-Soundness-1631" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1633" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1638" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1645" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html" class="Module">Data.Product</a> <a id="plfa_plfa-part3-Soundness-1658" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1664" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1665" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">_×_</a><a id="plfa_plfa-part3-Soundness-1668" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1670" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="plfa_plfa-part3-Soundness-1671" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1673" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ-syntax</a><a id="plfa_plfa-part3-Soundness-1681" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1683" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1369" class="Function">∃</a><a id="plfa_plfa-part3-Soundness-1684" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1686" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1806" class="Function">∃-syntax</a><a id="plfa_plfa-part3-Soundness-1694" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1696" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a><a id="plfa_plfa-part3-Soundness-1701" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1703" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a><a id="plfa_plfa-part3-Soundness-1708" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-1712" class="Keyword">renaming</a> <a id="plfa_plfa-part3-Soundness-1721" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1722" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part3-Soundness-1726" class="Symbol">to</a> <a id="plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part3-Soundness-1734" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1736" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1741" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1748" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html" class="Module">Agda.Primitive</a> <a id="plfa_plfa-part3-Soundness-1763" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1769" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1770" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#758" class="Primitive">lzero</a><a id="plfa_plfa-part3-Soundness-1775" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1777" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1782" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1789" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="plfa_plfa-part3-Soundness-1806" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1812" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1813" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#656" class="Function Operator">¬_</a><a id="plfa_plfa-part3-Soundness-1815" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1817" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1822" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1829" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Negation.html" class="Module">Relation.Nullary.Negation</a> <a id="plfa_plfa-part3-Soundness-1855" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1861" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1862" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Negation.Core.html#778" class="Function">contradiction</a><a id="plfa_plfa-part3-Soundness-1875" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1877" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1882" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1889" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html" class="Module">Data.Empty</a> <a id="plfa_plfa-part3-Soundness-1900" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1906" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1907" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html#628" class="Function">⊥-elim</a><a id="plfa_plfa-part3-Soundness-1913" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1915" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1920" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1927" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="plfa_plfa-part3-Soundness-1944" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1950" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1951" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1511" class="Record">Dec</a><a id="plfa_plfa-part3-Soundness-1954" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1956" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a><a id="plfa_plfa-part3-Soundness-1959" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1961" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a><a id="plfa_plfa-part3-Soundness-1963" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1965" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1970" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1977" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.html" class="Module">Function</a> <a id="plfa_plfa-part3-Soundness-1986" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1992" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1993" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">_∘_</a><a id="plfa_plfa-part3-Soundness-1996" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1998" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-2003" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-2010" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
     <a id="plfa_plfa-part3-Soundness-2034" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-2040" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-2041" href="../Untyped/#plfa_plfa-part2-Untyped-3848" class="Datatype">Context</a><a id="plfa_plfa-part3-Soundness-2048" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2050" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part3-Soundness-2053" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2055" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part3-Soundness-2058" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2060" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part3-Soundness-2063" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2065" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-2066" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2068" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a><a id="plfa_plfa-part3-Soundness-2069" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2071" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part3-Soundness-2073" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2075" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part3-Soundness-2077" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2079" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part3-Soundness-2081" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2083" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part3-Soundness-2086" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2100" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a><a id="plfa_plfa-part3-Soundness-2105" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2107" href="../Untyped/#plfa_plfa-part2-Untyped-9574" class="Function Operator">_[_]</a><a id="plfa_plfa-part3-Soundness-2111" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2113" href="../Untyped/#plfa_plfa-part2-Untyped-9458" class="Function">subst-zero</a><a id="plfa_plfa-part3-Soundness-2123" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2125" href="../Untyped/#plfa_plfa-part2-Untyped-7682" class="Function">ext</a><a id="plfa_plfa-part3-Soundness-2128" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2130" href="../Untyped/#plfa_plfa-part2-Untyped-8074" class="Function">rename</a><a id="plfa_plfa-part3-Soundness-2136" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2138" href="../Untyped/#plfa_plfa-part2-Untyped-8601" class="Function">exts</a><a id="plfa_plfa-part3-Soundness-2142" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2156" href="../Untyped/#plfa_plfa-part2-Untyped-12874" class="Datatype Operator">_—→_</a><a id="plfa_plfa-part3-Soundness-2160" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2162" href="../Untyped/#plfa_plfa-part2-Untyped-12924" class="InductiveConstructor">ξ₁</a><a id="plfa_plfa-part3-Soundness-2164" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2166" href="../Untyped/#plfa_plfa-part2-Untyped-13014" class="InductiveConstructor">ξ₂</a><a id="plfa_plfa-part3-Soundness-2168" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2170" href="../Untyped/#plfa_plfa-part2-Untyped-13104" class="InductiveConstructor">β</a><a id="plfa_plfa-part3-Soundness-2171" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2173" href="../Untyped/#plfa_plfa-part2-Untyped-13212" class="InductiveConstructor">ζ</a><a id="plfa_plfa-part3-Soundness-2174" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2176" href="../Untyped/#plfa_plfa-part2-Untyped-14270" class="Datatype Operator">_—↠_</a><a id="plfa_plfa-part3-Soundness-2180" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2182" href="../Untyped/#plfa_plfa-part2-Untyped-14458" class="InductiveConstructor Operator">_—→⟨_⟩_</a><a id="plfa_plfa-part3-Soundness-2189" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2191" href="../Untyped/#plfa_plfa-part2-Untyped-14316" class="InductiveConstructor Operator">_∎</a><a id="plfa_plfa-part3-Soundness-2193" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-2195" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-2200" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-2207" href="../Substitution/#" class="Module">plfa.part2.Substitution</a> <a id="plfa_plfa-part3-Soundness-2231" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-2237" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-2238" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a><a id="plfa_plfa-part3-Soundness-2244" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2246" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a><a id="plfa_plfa-part3-Soundness-2251" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2253" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part3-Soundness-2256" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-2258" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-2263" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-2270" href="../Denotational/#" class="Module">plfa.part3.Denotational</a>
     <a id="plfa_plfa-part3-Soundness-2299" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-2305" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-2306" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a><a id="plfa_plfa-part3-Soundness-2311" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2313" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Soundness-2314" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2316" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a><a id="plfa_plfa-part3-Soundness-2319" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2321" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">_⊢_↓_</a><a id="plfa_plfa-part3-Soundness-2326" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2328" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">_`,_</a><a id="plfa_plfa-part3-Soundness-2332" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2334" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">_⊑_</a><a id="plfa_plfa-part3-Soundness-2337" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2339" href="../Denotational/#plfa_plfa-part3-Denotational-9696" class="Function Operator">_`⊑_</a><a id="plfa_plfa-part3-Soundness-2343" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2345" href="../Denotational/#plfa_plfa-part3-Denotational-9950" class="Function">`⊥</a><a id="plfa_plfa-part3-Soundness-2347" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2349" href="../Denotational/#plfa_plfa-part3-Denotational-9979" class="Function Operator">_`⊔_</a><a id="plfa_plfa-part3-Soundness-2353" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2355" href="../Denotational/#plfa_plfa-part3-Denotational-9222" class="Function">init</a><a id="plfa_plfa-part3-Soundness-2359" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2361" href="../Denotational/#plfa_plfa-part3-Denotational-9277" class="Function">last</a><a id="plfa_plfa-part3-Soundness-2365" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2367" href="../Denotational/#plfa_plfa-part3-Denotational-9326" class="Function">init-last</a><a id="plfa_plfa-part3-Soundness-2376" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2390" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Soundness-2396" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2398" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a><a id="plfa_plfa-part3-Soundness-2405" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2407" href="../Denotational/#plfa_plfa-part3-Denotational-10539" class="Function">`⊑-refl</a><a id="plfa_plfa-part3-Soundness-2414" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2416" href="../Denotational/#plfa_plfa-part3-Denotational-32332" class="Function">⊑-env</a><a id="plfa_plfa-part3-Soundness-2421" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2423" href="../Denotational/#plfa_plfa-part3-Denotational-10610" class="Function">⊑-env-conj-R1</a><a id="plfa_plfa-part3-Soundness-2436" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2438" href="../Denotational/#plfa_plfa-part3-Denotational-10716" class="Function">⊑-env-conj-R2</a><a id="plfa_plfa-part3-Soundness-2451" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2453" href="../Denotational/#plfa_plfa-part3-Denotational-32854" class="Function">up-env</a><a id="plfa_plfa-part3-Soundness-2459" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2473" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-2476" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2478" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Soundness-2484" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2486" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a><a id="plfa_plfa-part3-Soundness-2493" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2495" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a><a id="plfa_plfa-part3-Soundness-2502" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2504" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Soundness-2511" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2513" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a><a id="plfa_plfa-part3-Soundness-2516" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2530" href="../Denotational/#plfa_plfa-part3-Denotational-30331" class="Function">rename-pres</a><a id="plfa_plfa-part3-Soundness-2541" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2543" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a><a id="plfa_plfa-part3-Soundness-2544" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2546" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">_≃_</a><a id="plfa_plfa-part3-Soundness-2549" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2551" href="../Denotational/#plfa_plfa-part3-Denotational-22926" class="Function">≃-trans</a><a id="plfa_plfa-part3-Soundness-2558" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-2560" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-2565" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-2572" href="../Compositional/#" class="Module">plfa.part3.Compositional</a> <a id="plfa_plfa-part3-Soundness-2597" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-2603" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-2604" href="../Compositional/#plfa_plfa-part3-Compositional-4471" class="Function">lambda-inversion</a><a id="plfa_plfa-part3-Soundness-2620" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2622" href="../Compositional/#plfa_plfa-part3-Compositional-12863" class="Function">var-inv</a><a id="plfa_plfa-part3-Soundness-2629" class="Symbol">)</a>
</pre><h2 id="向前归约保持指称不变">向前归约保持指称不变</h2><p>本节中对指称不变性的证明使用了前一章中的技术。和 STLC 的不变性证明一样，我们保留了独立于语法定义的关系，这与内在类型项相反。 另一方面，我们对变量使用了 de Bruijn 索引。</p><p>证明的大纲保持不变，因为我们必须证明归约关系中使用的所有辅助函数的引理： 代换、重命名和扩展。</p><h3 id="同时代换保持指称不变">同时代换保持指称不变</h3><p>我们接下来的目标是证明同时代换变量和环境会保持含义不变。也就是说，若 <code>M</code> 在环境 <code>γ</code> 中的结果是 <code>v</code>，那么代换 <code>σ</code> 应用到 <code>M</code> 所得的程序，其结果仍然是 <code>v</code>， 但环境转移到了 <code>δ</code> 中。该环境中对于每一个变量 <code>x</code>，<code>σ x</code> 产生的结果值与原始环境 <code>γ</code> 中的 <code>x</code> 的值相同。我们将这种情况写作 <code>δ `⊢ σ ↓ γ</code>。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-4041" class="Keyword">infix</a> <a id="plfa_plfa-part3-Soundness-4047" class="Number">3</a> <a id="plfa_plfa-part3-Soundness-4049" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">_`⊢_↓_</a>
<a id="plfa_plfa-part3-Soundness-_`⊢_↓_"></a><a id="plfa_plfa-part3-Soundness-4056" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">_`⊢_↓_</a> <a id="plfa_plfa-part3-Soundness-4063" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4065" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-4067" href="../Soundness/#plfa_plfa-part3-Soundness-4067" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-4069" href="../Soundness/#plfa_plfa-part3-Soundness-4069" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-4070" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4072" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4074" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4078" href="../Soundness/#plfa_plfa-part3-Soundness-4067" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-4080" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4082" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-4088" href="../Soundness/#plfa_plfa-part3-Soundness-4069" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4090" href="../Soundness/#plfa_plfa-part3-Soundness-4067" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-4092" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4094" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4098" href="../Soundness/#plfa_plfa-part3-Soundness-4069" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4100" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4102" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a>
<a id="plfa_plfa-part3-Soundness-4106" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">_`⊢_↓_</a> <a id="plfa_plfa-part3-Soundness-4113" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4114" href="../Soundness/#plfa_plfa-part3-Soundness-4114" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-4115" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-4117" href="../Soundness/#plfa_plfa-part3-Soundness-4117" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-4118" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4120" href="../Soundness/#plfa_plfa-part3-Soundness-4120" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4122" href="../Soundness/#plfa_plfa-part3-Soundness-4122" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4124" href="../Soundness/#plfa_plfa-part3-Soundness-4124" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4126" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4128" class="Symbol">(∀</a> <a id="plfa_plfa-part3-Soundness-4131" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4132" href="../Soundness/#plfa_plfa-part3-Soundness-4132" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-4134" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4136" href="../Soundness/#plfa_plfa-part3-Soundness-4117" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4138" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-4140" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-4141" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4143" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4145" href="../Soundness/#plfa_plfa-part3-Soundness-4120" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4147" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-4149" href="../Soundness/#plfa_plfa-part3-Soundness-4122" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4151" href="../Soundness/#plfa_plfa-part3-Soundness-4132" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-4153" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4155" href="../Soundness/#plfa_plfa-part3-Soundness-4124" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4157" href="../Soundness/#plfa_plfa-part3-Soundness-4132" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-4158" class="Symbol">)</a>
</pre><p>和之前一样，为了证明 λ-抽象，我们需要证明一个扩展引理， 该引理说明了将 <code>exts</code> 函数应用于代换会产生一个新的代换，该代换将变量映射到项， 使得当对 <code>δ , v</code> 求值时会产生 <code>γ , v</code> 中的值。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-ext"></a><a id="plfa_plfa-part3-Soundness-4544" href="../Soundness/#plfa_plfa-part3-Soundness-4544" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-4554" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4556" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-4558" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4559" href="../Soundness/#plfa_plfa-part3-Soundness-4559" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4561" href="../Soundness/#plfa_plfa-part3-Soundness-4561" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-4563" href="../Soundness/#plfa_plfa-part3-Soundness-4563" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-4564" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4566" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4567" href="../Soundness/#plfa_plfa-part3-Soundness-4567" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4569" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4571" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4575" href="../Soundness/#plfa_plfa-part3-Soundness-4559" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-4576" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4578" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4579" href="../Soundness/#plfa_plfa-part3-Soundness-4579" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4581" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4583" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4587" href="../Soundness/#plfa_plfa-part3-Soundness-4561" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-4588" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-4592" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4594" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4595" href="../Soundness/#plfa_plfa-part3-Soundness-4595" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4597" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4599" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-4605" href="../Soundness/#plfa_plfa-part3-Soundness-4559" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4607" href="../Soundness/#plfa_plfa-part3-Soundness-4561" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-4608" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-4612" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4614" href="../Soundness/#plfa_plfa-part3-Soundness-4579" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4616" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-4619" href="../Soundness/#plfa_plfa-part3-Soundness-4595" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4621" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4623" href="../Soundness/#plfa_plfa-part3-Soundness-4567" class="Bound">γ</a>
   <a id="plfa_plfa-part3-Soundness-4628" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part3-Soundness-4657" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4659" href="../Soundness/#plfa_plfa-part3-Soundness-4579" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4661" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-4664" href="../Soundness/#plfa_plfa-part3-Soundness-4563" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-4666" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-4669" href="../Untyped/#plfa_plfa-part2-Untyped-8601" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-4674" href="../Soundness/#plfa_plfa-part3-Soundness-4595" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4676" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4678" href="../Soundness/#plfa_plfa-part3-Soundness-4567" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4680" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-4683" href="../Soundness/#plfa_plfa-part3-Soundness-4563" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-4685" href="../Soundness/#plfa_plfa-part3-Soundness-4544" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-4695" href="../Soundness/#plfa_plfa-part3-Soundness-4695" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4697" href="../Soundness/#plfa_plfa-part3-Soundness-4697" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-4699" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-4701" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4703" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a>
<a id="plfa_plfa-part3-Soundness-4707" href="../Soundness/#plfa_plfa-part3-Soundness-4544" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-4717" href="../Soundness/#plfa_plfa-part3-Soundness-4717" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4719" href="../Soundness/#plfa_plfa-part3-Soundness-4719" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-4721" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4722" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-4724" href="../Soundness/#plfa_plfa-part3-Soundness-4724" class="Bound">x′</a><a id="plfa_plfa-part3-Soundness-4726" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4728" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4730" href="../Denotational/#plfa_plfa-part3-Denotational-30331" class="Function">rename-pres</a> <a id="plfa_plfa-part3-Soundness-4742" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part3-Soundness-4745" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-4748" href="../Soundness/#plfa_plfa-part3-Soundness-4748" class="Bound">_</a> <a id="plfa_plfa-part3-Soundness-4750" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4752" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Soundness-4758" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4760" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4761" href="../Soundness/#plfa_plfa-part3-Soundness-4719" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-4763" href="../Soundness/#plfa_plfa-part3-Soundness-4724" class="Bound">x′</a><a id="plfa_plfa-part3-Soundness-4765" class="Symbol">)</a>
</pre><p>该证明通过对 de Bruijn 索引 <code>x</code> 进行情况分析来论证：</p><ul><li><p>若索引为 <code>Z</code>，那么我们需要证明 <code>δ , v ⊢ # 0 ↓ v</code>， 它可通过规则 <code>var</code> 得证。</p></li><li><p>若索引为 <code>S x′</code> 那么我们需要证明 <code>δ , v ⊢ rename S_ (σ x′) ↓ γ x′</code>， 它可通过 <code>rename-pres</code> 引理证明。</p></li></ul><p>有了这个扩展引理，同时代换会保持含义不变的证明就很直白了，我们继续深入：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-pres"></a><a id="plfa_plfa-part3-Soundness-5421" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5432" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5434" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-5436" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5437" href="../Soundness/#plfa_plfa-part3-Soundness-5437" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-5439" href="../Soundness/#plfa_plfa-part3-Soundness-5439" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-5441" href="../Soundness/#plfa_plfa-part3-Soundness-5441" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-5442" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5444" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5445" href="../Soundness/#plfa_plfa-part3-Soundness-5445" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5447" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5449" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-5453" href="../Soundness/#plfa_plfa-part3-Soundness-5437" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-5454" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5456" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5457" href="../Soundness/#plfa_plfa-part3-Soundness-5457" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-5459" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5461" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-5465" href="../Soundness/#plfa_plfa-part3-Soundness-5439" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-5466" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5468" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5469" href="../Soundness/#plfa_plfa-part3-Soundness-5469" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5471" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5473" href="../Soundness/#plfa_plfa-part3-Soundness-5437" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-5475" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5477" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-5478" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-5482" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5484" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5485" href="../Soundness/#plfa_plfa-part3-Soundness-5485" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5487" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5489" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-5495" href="../Soundness/#plfa_plfa-part3-Soundness-5437" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-5497" href="../Soundness/#plfa_plfa-part3-Soundness-5439" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-5498" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-5502" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5504" href="../Soundness/#plfa_plfa-part3-Soundness-5457" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-5506" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-5509" href="../Soundness/#plfa_plfa-part3-Soundness-5485" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5511" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5513" href="../Soundness/#plfa_plfa-part3-Soundness-5445" class="Bound">γ</a>
  <a id="plfa_plfa-part3-Soundness-5517" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5519" href="../Soundness/#plfa_plfa-part3-Soundness-5445" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5521" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5523" href="../Soundness/#plfa_plfa-part3-Soundness-5469" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5525" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5527" href="../Soundness/#plfa_plfa-part3-Soundness-5441" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-5533" class="Comment">------------------</a>
  <a id="plfa_plfa-part3-Soundness-5554" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5556" href="../Soundness/#plfa_plfa-part3-Soundness-5457" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-5558" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5560" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part3-Soundness-5566" href="../Soundness/#plfa_plfa-part3-Soundness-5485" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5568" href="../Soundness/#plfa_plfa-part3-Soundness-5469" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5570" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5572" href="../Soundness/#plfa_plfa-part3-Soundness-5441" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-5574" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5585" href="../Soundness/#plfa_plfa-part3-Soundness-5585" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5587" href="../Soundness/#plfa_plfa-part3-Soundness-5587" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5589" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5590" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-5594" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5595" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-5597" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5599" href="../Soundness/#plfa_plfa-part3-Soundness-5599" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-5600" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-5603" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5605" href="../Soundness/#plfa_plfa-part3-Soundness-5587" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5607" href="../Soundness/#plfa_plfa-part3-Soundness-5599" class="Bound">x</a>
<a id="plfa_plfa-part3-Soundness-5609" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5620" href="../Soundness/#plfa_plfa-part3-Soundness-5620" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5622" href="../Soundness/#plfa_plfa-part3-Soundness-5622" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5624" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5625" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-5632" href="../Soundness/#plfa_plfa-part3-Soundness-5632" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-5635" href="../Soundness/#plfa_plfa-part3-Soundness-5635" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-5637" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5639" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-5643" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-5650" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5651" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5662" href="../Soundness/#plfa_plfa-part3-Soundness-5620" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5664" href="../Soundness/#plfa_plfa-part3-Soundness-5622" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5666" href="../Soundness/#plfa_plfa-part3-Soundness-5632" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-5668" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5670" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5671" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5682" href="../Soundness/#plfa_plfa-part3-Soundness-5620" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5684" href="../Soundness/#plfa_plfa-part3-Soundness-5622" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5686" href="../Soundness/#plfa_plfa-part3-Soundness-5635" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-5688" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-5690" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5701" href="../Soundness/#plfa_plfa-part3-Soundness-5701" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5703" href="../Soundness/#plfa_plfa-part3-Soundness-5703" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5705" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5706" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-5714" href="../Soundness/#plfa_plfa-part3-Soundness-5714" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-5715" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5717" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-5721" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-5729" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5730" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5741" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-5744" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5745" href="../Soundness/#plfa_plfa-part3-Soundness-5745" class="Bound">A</a><a id="plfa_plfa-part3-Soundness-5746" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5748" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5750" href="../Untyped/#plfa_plfa-part2-Untyped-8601" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-5755" href="../Soundness/#plfa_plfa-part3-Soundness-5701" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-5756" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5758" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5759" href="../Soundness/#plfa_plfa-part3-Soundness-4544" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-5769" href="../Soundness/#plfa_plfa-part3-Soundness-5701" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5771" href="../Soundness/#plfa_plfa-part3-Soundness-5703" class="Bound">s</a><a id="plfa_plfa-part3-Soundness-5772" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5774" href="../Soundness/#plfa_plfa-part3-Soundness-5714" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-5775" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-5777" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5788" href="../Soundness/#plfa_plfa-part3-Soundness-5788" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5790" href="../Soundness/#plfa_plfa-part3-Soundness-5790" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5792" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-5800" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5802" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-5810" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5821" href="../Soundness/#plfa_plfa-part3-Soundness-5821" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5823" href="../Soundness/#plfa_plfa-part3-Soundness-5823" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5825" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5826" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-5834" href="../Soundness/#plfa_plfa-part3-Soundness-5834" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-5837" href="../Soundness/#plfa_plfa-part3-Soundness-5837" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-5839" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5841" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-5845" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-5853" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5854" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5865" href="../Soundness/#plfa_plfa-part3-Soundness-5821" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5867" href="../Soundness/#plfa_plfa-part3-Soundness-5823" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5869" href="../Soundness/#plfa_plfa-part3-Soundness-5834" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-5871" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5873" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5874" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5885" href="../Soundness/#plfa_plfa-part3-Soundness-5821" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5887" href="../Soundness/#plfa_plfa-part3-Soundness-5823" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5889" href="../Soundness/#plfa_plfa-part3-Soundness-5837" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-5891" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-5893" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5904" href="../Soundness/#plfa_plfa-part3-Soundness-5904" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5906" href="../Soundness/#plfa_plfa-part3-Soundness-5906" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5908" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5909" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-5913" href="../Soundness/#plfa_plfa-part3-Soundness-5913" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-5915" href="../Soundness/#plfa_plfa-part3-Soundness-5915" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-5917" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5919" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5921" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-5925" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5926" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5937" href="../Soundness/#plfa_plfa-part3-Soundness-5904" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5939" href="../Soundness/#plfa_plfa-part3-Soundness-5906" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5941" href="../Soundness/#plfa_plfa-part3-Soundness-5913" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-5942" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5944" href="../Soundness/#plfa_plfa-part3-Soundness-5915" class="Bound">lt</a>
</pre><p>我们通过对 <code>M</code> 的语义进行归纳来证明。两个有趣的情况分别对应于变量和 λ-抽象：</p><ul><li><p>对于变量 <code>x</code>，我们有 <code>v = γ x</code>，于是需要证明 <code>δ ⊢ σ x ↓ v</code>。 将前提应用到 <code>x</code>，我们有 <code>δ ⊢ σ x ↓ γ x</code>，即 <code>δ ⊢ σ x ↓ v</code>.</p></li><li><p>对于 λ-抽象，我们必须为归纳假设扩展代换。应用 <code>subst-ext</code> 引理可证明扩展的代换会将变量映射到产生对应值的项。</p></li></ul><h3 id="单一代换保持指称不变">单一代换保持指称不变</h3><p>对于 β-规约 <code>(ƛ N) · M —→ N [ M ]</code>，我们需要证明当用 <code>M</code> 代换项 <code>N</code> 中的 de Bruijn 索引 0 时，语义保持不变。通过对规则 <code>↦-elim</code> 和 <code>↦-intro</code> 进行反演，我们可得到 <code>γ , v ⊢ M ↓ w</code> 和 <code>γ ⊢ N ↓ v</code>。因此，我们需要证明 <code>γ ⊢ M [ N ] ↓ w</code>，或等价地证明 <code>γ ⊢ subst (subst-zero N) M ↓ w</code>。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-substitution"></a><a id="plfa_plfa-part3-Soundness-7342" href="../Soundness/#plfa_plfa-part3-Soundness-7342" class="Function">substitution</a> <a id="plfa_plfa-part3-Soundness-7355" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-7357" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-7359" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-7360" href="../Soundness/#plfa_plfa-part3-Soundness-7360" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-7361" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-7363" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-7364" href="../Soundness/#plfa_plfa-part3-Soundness-7364" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7366" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-7368" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-7372" href="../Soundness/#plfa_plfa-part3-Soundness-7360" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-7373" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-7375" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-7376" href="../Soundness/#plfa_plfa-part3-Soundness-7376" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-7378" href="../Soundness/#plfa_plfa-part3-Soundness-7378" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-7380" href="../Soundness/#plfa_plfa-part3-Soundness-7380" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-7382" href="../Soundness/#plfa_plfa-part3-Soundness-7382" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-7383" class="Symbol">}</a>
   <a id="plfa_plfa-part3-Soundness-7388" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-7390" href="../Soundness/#plfa_plfa-part3-Soundness-7364" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7392" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-7395" href="../Soundness/#plfa_plfa-part3-Soundness-7380" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-7397" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-7399" href="../Soundness/#plfa_plfa-part3-Soundness-7376" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-7401" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-7403" href="../Soundness/#plfa_plfa-part3-Soundness-7382" class="Bound">w</a>
   <a id="plfa_plfa-part3-Soundness-7408" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-7410" href="../Soundness/#plfa_plfa-part3-Soundness-7364" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7412" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-7414" href="../Soundness/#plfa_plfa-part3-Soundness-7378" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-7416" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-7418" href="../Soundness/#plfa_plfa-part3-Soundness-7380" class="Bound">v</a>
     <a id="plfa_plfa-part3-Soundness-7425" class="Comment">---------------</a>
   <a id="plfa_plfa-part3-Soundness-7444" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-7446" href="../Soundness/#plfa_plfa-part3-Soundness-7364" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7448" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-7450" href="../Soundness/#plfa_plfa-part3-Soundness-7376" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-7452" href="../Untyped/#plfa_plfa-part2-Untyped-9574" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-7454" href="../Soundness/#plfa_plfa-part3-Soundness-7378" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-7456" href="../Untyped/#plfa_plfa-part2-Untyped-9574" class="Function Operator">]</a> <a id="plfa_plfa-part3-Soundness-7458" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-7460" href="../Soundness/#plfa_plfa-part3-Soundness-7382" class="Bound">w</a>
<a id="plfa_plfa-part3-Soundness-7462" href="../Soundness/#plfa_plfa-part3-Soundness-7342" class="Function">substitution</a><a id="plfa_plfa-part3-Soundness-7474" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-7475" href="../Soundness/#plfa_plfa-part3-Soundness-7475" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-7476" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-7478" href="../Soundness/#plfa_plfa-part3-Soundness-7478" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-7479" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-7481" href="../Soundness/#plfa_plfa-part3-Soundness-7481" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-7482" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-7484" href="../Soundness/#plfa_plfa-part3-Soundness-7484" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-7485" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-7487" href="../Soundness/#plfa_plfa-part3-Soundness-7487" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-7488" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-7490" href="../Soundness/#plfa_plfa-part3-Soundness-7490" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-7491" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-7493" href="../Soundness/#plfa_plfa-part3-Soundness-7493" class="Bound">dn</a> <a id="plfa_plfa-part3-Soundness-7496" href="../Soundness/#plfa_plfa-part3-Soundness-7496" class="Bound">dm</a> <a id="plfa_plfa-part3-Soundness-7499" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-7503" href="../Soundness/#plfa_plfa-part3-Soundness-5421" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-7514" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-7515" href="../Untyped/#plfa_plfa-part2-Untyped-9458" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-7526" href="../Soundness/#plfa_plfa-part3-Soundness-7484" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-7527" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-7529" href="../Soundness/#plfa_plfa-part3-Soundness-7551" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-7538" href="../Soundness/#plfa_plfa-part3-Soundness-7493" class="Bound">dn</a>
  <a id="plfa_plfa-part3-Soundness-7543" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-7551" href="../Soundness/#plfa_plfa-part3-Soundness-7551" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-7560" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-7562" href="../Soundness/#plfa_plfa-part3-Soundness-7478" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7564" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-7567" href="../Untyped/#plfa_plfa-part2-Untyped-9458" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-7578" href="../Soundness/#plfa_plfa-part3-Soundness-7484" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-7580" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-7582" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-7583" href="../Soundness/#plfa_plfa-part3-Soundness-7478" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7585" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-7588" href="../Soundness/#plfa_plfa-part3-Soundness-7487" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-7589" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-7593" href="../Soundness/#plfa_plfa-part3-Soundness-7551" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-7602" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-7604" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-7606" href="../Soundness/#plfa_plfa-part3-Soundness-7496" class="Bound">dm</a>
  <a id="plfa_plfa-part3-Soundness-7611" href="../Soundness/#plfa_plfa-part3-Soundness-7551" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-7620" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-7621" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-7623" href="../Soundness/#plfa_plfa-part3-Soundness-7623" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-7624" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-7626" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-7628" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a>
</pre><p>这个结果是同时代换引理的推论。要使用该引理，我们只需要证明 <code>subst-zero M</code> 会将变量映射到某个项，该项产生的值与 <code>γ , v</code> 中产生的值相同。令 <code>y</code> 为任意变量（即 de Bruijn 索引）：</p><ul><li><p>若索引为 <code>Z</code>，则 <code>(subst-zero M) y = M</code> 且 <code>(γ , v) y = v</code>， 根据前提可得 <code>γ ⊢ M ↓ v</code>。</p></li><li><p>若索引为 <code>S x</code>，则 <code>(subst-zero M) (S x) = x</code> 且 <code>(γ , v) (S x) = γ x</code>， 根据规则 <code>var</code> 可得 <code>γ ⊢ x ↓ γ x</code>。</p></li></ul><h3 id="归约保持指称不变">归约保持指称不变</h3><p>有了代换引理，就能直接证明归约保持指称不变：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-preserve"></a><a id="plfa_plfa-part3-Soundness-8645" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8654" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8656" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-8658" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8659" href="../Soundness/#plfa_plfa-part3-Soundness-8659" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-8660" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-8662" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8663" href="../Soundness/#plfa_plfa-part3-Soundness-8663" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-8665" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8667" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-8671" href="../Soundness/#plfa_plfa-part3-Soundness-8659" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-8672" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-8674" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8675" href="../Soundness/#plfa_plfa-part3-Soundness-8675" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-8677" href="../Soundness/#plfa_plfa-part3-Soundness-8677" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-8679" href="../Soundness/#plfa_plfa-part3-Soundness-8679" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-8680" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-8684" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8686" href="../Soundness/#plfa_plfa-part3-Soundness-8663" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-8688" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-8690" href="../Soundness/#plfa_plfa-part3-Soundness-8675" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-8692" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-8694" href="../Soundness/#plfa_plfa-part3-Soundness-8679" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-8698" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8700" href="../Soundness/#plfa_plfa-part3-Soundness-8675" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-8702" href="../Untyped/#plfa_plfa-part2-Untyped-12874" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-8705" href="../Soundness/#plfa_plfa-part3-Soundness-8677" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-8711" class="Comment">----------</a>
  <a id="plfa_plfa-part3-Soundness-8724" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8726" href="../Soundness/#plfa_plfa-part3-Soundness-8663" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-8728" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-8730" href="../Soundness/#plfa_plfa-part3-Soundness-8677" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-8732" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-8734" href="../Soundness/#plfa_plfa-part3-Soundness-8679" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-8736" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8745" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8746" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-8749" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8751" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-8754" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8763" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8764" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-8771" href="../Soundness/#plfa_plfa-part3-Soundness-8771" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-8774" href="../Soundness/#plfa_plfa-part3-Soundness-8774" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-8776" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8778" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8779" href="../Untyped/#plfa_plfa-part2-Untyped-12924" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-8782" href="../Soundness/#plfa_plfa-part3-Soundness-8782" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8783" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8785" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8787" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-8794" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8795" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8804" href="../Soundness/#plfa_plfa-part3-Soundness-8771" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-8807" href="../Soundness/#plfa_plfa-part3-Soundness-8782" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8808" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8810" href="../Soundness/#plfa_plfa-part3-Soundness-8774" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-8813" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8822" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8823" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-8830" href="../Soundness/#plfa_plfa-part3-Soundness-8830" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-8833" href="../Soundness/#plfa_plfa-part3-Soundness-8833" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-8835" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8837" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8838" href="../Untyped/#plfa_plfa-part2-Untyped-13014" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-8841" href="../Soundness/#plfa_plfa-part3-Soundness-8841" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8842" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8844" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8846" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-8853" href="../Soundness/#plfa_plfa-part3-Soundness-8830" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-8856" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8857" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8866" href="../Soundness/#plfa_plfa-part3-Soundness-8833" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-8869" href="../Soundness/#plfa_plfa-part3-Soundness-8841" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8870" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-8872" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8881" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8882" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-8889" href="../Soundness/#plfa_plfa-part3-Soundness-8889" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-8892" href="../Soundness/#plfa_plfa-part3-Soundness-8892" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-8894" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8896" href="../Untyped/#plfa_plfa-part2-Untyped-13104" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-8898" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8900" href="../Soundness/#plfa_plfa-part3-Soundness-7342" class="Function">substitution</a> <a id="plfa_plfa-part3-Soundness-8913" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8914" href="../Compositional/#plfa_plfa-part3-Compositional-4471" class="Function">lambda-inversion</a> <a id="plfa_plfa-part3-Soundness-8931" href="../Soundness/#plfa_plfa-part3-Soundness-8889" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-8933" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8935" href="../Soundness/#plfa_plfa-part3-Soundness-8892" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-8938" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8947" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8948" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-8956" href="../Soundness/#plfa_plfa-part3-Soundness-8956" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-8957" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8959" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8960" href="../Untyped/#plfa_plfa-part2-Untyped-13212" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-8962" href="../Soundness/#plfa_plfa-part3-Soundness-8962" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8963" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8965" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8967" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-8975" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8976" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8985" href="../Soundness/#plfa_plfa-part3-Soundness-8956" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-8987" href="../Soundness/#plfa_plfa-part3-Soundness-8962" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8988" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-8990" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8999" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-9007" href="../Soundness/#plfa_plfa-part3-Soundness-9007" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-9009" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9011" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-9019" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-9028" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9029" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9037" href="../Soundness/#plfa_plfa-part3-Soundness-9037" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-9039" href="../Soundness/#plfa_plfa-part3-Soundness-9039" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9041" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9043" href="../Soundness/#plfa_plfa-part3-Soundness-9043" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-9045" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9047" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9055" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9056" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-9065" href="../Soundness/#plfa_plfa-part3-Soundness-9037" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-9067" href="../Soundness/#plfa_plfa-part3-Soundness-9043" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-9068" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9070" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9071" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-9080" href="../Soundness/#plfa_plfa-part3-Soundness-9039" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9083" href="../Soundness/#plfa_plfa-part3-Soundness-9043" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-9084" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-9086" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-9095" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9096" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9100" href="../Soundness/#plfa_plfa-part3-Soundness-9100" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-9102" href="../Soundness/#plfa_plfa-part3-Soundness-9102" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-9104" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9106" href="../Soundness/#plfa_plfa-part3-Soundness-9106" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-9108" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9110" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9114" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9115" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-9124" href="../Soundness/#plfa_plfa-part3-Soundness-9100" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-9126" href="../Soundness/#plfa_plfa-part3-Soundness-9106" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-9127" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9129" href="../Soundness/#plfa_plfa-part3-Soundness-9102" class="Bound">lt</a>
</pre><p>我们通过对 <code>M</code> 的语义进行归纳，并对归约进行情况分析来证明：</p><ul><li><p>若 <code>M</code> 为变量，则无需归约。</p></li><li><p>若 <code>M</code> 为应用，则归约要么满足合同性（ξ₁ 或 ξ₂），要么是 β-归约。 对于每一种合同性，我们使用归纳假设。对于 β-归约，我们使用代换引理和 <code>sub</code> 规则。</p></li><li><p>其余的情况都很直白。</p></li></ul><h2 id="归约反映了指称不变">归约反映了指称不变</h2><p>本节中将证明归约反映了项的指称不变，换言之，若 <code>N</code> 的结果是 <code>v</code>，且若 <code>M</code> 可归约为 <code>N</code>，则 <code>M</code> 的结果也是 <code>v</code>。虽然此证明和前面的语义保持不变的证明 之间存在一些广泛的相似之处，但我们仍需更多的技术引理才能得到这个结果。</p><p>最主要挑战是处理 β-归约中的代换：</p><pre><code>(ƛ N) · M —→ N [ M ]</code></pre><p>我们有 <code>γ ⊢ N [ M ] ↓ v</code> 且需要证明 <code>γ ⊢ (ƛ N) · M ↓ v</code>。现在考虑 <code>γ ⊢ N [ M ] ↓ v</code> 的推导过程。项 <code>M</code> 在 <code>N [ M ]</code> 中可能会出现 0、1 或多次。 对于它可能出现的任意次数，<code>M</code> 都可能产生不同的值。不过为了构建出 <code>(ƛ N) · M</code> 的推导过程，我们需要单个的 <code>M</code> 值。若 <code>M</code> 出现了超过 1 次，那么我们就能将不同的值用 <code>⊔</code> 连接到一起。若 <code>M</code> 出现了 0 次，那么我们就无需任何关于 <code>M</code> 的信息， 并直接使用 <code>⊥</code> 作为 <code>M</code> 的值。</p><h3 id="重命名反映了含义不变">重命名反映了含义不变</h3><p>前面我们证明了重命名变量会保持含义不变。现在我们证明它的反面，即重命名反映了含义不变。 也就是说，若 <code>δ ⊢ rename ρ M ↓ v</code> 则 <code>γ ⊢ M ↓ v</code>，其中 <code>(δ ∘ ρ) `⊑ γ</code>.</p><p>首先，我们需要一个前面给出的引理的变体：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-ext-`⊑"></a><a id="plfa_plfa-part3-Soundness-11637" href="../Soundness/#plfa_plfa-part3-Soundness-11637" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-11644" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11646" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-11648" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11649" href="../Soundness/#plfa_plfa-part3-Soundness-11649" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11651" href="../Soundness/#plfa_plfa-part3-Soundness-11651" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-11653" href="../Soundness/#plfa_plfa-part3-Soundness-11653" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-11654" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11656" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11657" href="../Soundness/#plfa_plfa-part3-Soundness-11657" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11659" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11661" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-11665" href="../Soundness/#plfa_plfa-part3-Soundness-11649" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-11666" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11668" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11669" href="../Soundness/#plfa_plfa-part3-Soundness-11669" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11671" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11673" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-11677" href="../Soundness/#plfa_plfa-part3-Soundness-11651" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-11678" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-11682" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11684" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11685" href="../Soundness/#plfa_plfa-part3-Soundness-11685" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-11687" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11689" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part3-Soundness-11696" href="../Soundness/#plfa_plfa-part3-Soundness-11649" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11698" href="../Soundness/#plfa_plfa-part3-Soundness-11651" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-11699" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-11703" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11705" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11706" href="../Soundness/#plfa_plfa-part3-Soundness-11669" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11708" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-11710" href="../Soundness/#plfa_plfa-part3-Soundness-11685" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-11711" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11713" href="../Denotational/#plfa_plfa-part3-Denotational-9696" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-11716" href="../Soundness/#plfa_plfa-part3-Soundness-11657" class="Bound">γ</a>
    <a id="plfa_plfa-part3-Soundness-11722" class="Comment">------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-11755" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11757" class="Symbol">((</a><a id="plfa_plfa-part3-Soundness-11759" href="../Soundness/#plfa_plfa-part3-Soundness-11669" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11761" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-11764" href="../Soundness/#plfa_plfa-part3-Soundness-11653" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-11765" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11767" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-11769" href="../Untyped/#plfa_plfa-part2-Untyped-7682" class="Function">ext</a> <a id="plfa_plfa-part3-Soundness-11773" href="../Soundness/#plfa_plfa-part3-Soundness-11685" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-11774" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11776" href="../Denotational/#plfa_plfa-part3-Denotational-9696" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-11779" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11780" href="../Soundness/#plfa_plfa-part3-Soundness-11657" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11782" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-11785" href="../Soundness/#plfa_plfa-part3-Soundness-11653" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-11786" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-11788" href="../Soundness/#plfa_plfa-part3-Soundness-11637" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-11795" href="../Soundness/#plfa_plfa-part3-Soundness-11795" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-11797" href="../Soundness/#plfa_plfa-part3-Soundness-11797" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-11800" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-11802" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-11804" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a>
<a id="plfa_plfa-part3-Soundness-11811" href="../Soundness/#plfa_plfa-part3-Soundness-11637" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-11818" href="../Soundness/#plfa_plfa-part3-Soundness-11818" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-11820" href="../Soundness/#plfa_plfa-part3-Soundness-11820" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-11823" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11824" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-11826" href="../Soundness/#plfa_plfa-part3-Soundness-11826" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-11827" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11829" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-11831" href="../Soundness/#plfa_plfa-part3-Soundness-11820" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-11834" href="../Soundness/#plfa_plfa-part3-Soundness-11826" class="Bound">x</a>
</pre><p>然后证明如下：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-rename-reflect"></a><a id="plfa_plfa-part3-Soundness-11898" href="../Soundness/#plfa_plfa-part3-Soundness-11898" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-11913" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11915" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-11917" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11918" href="../Soundness/#plfa_plfa-part3-Soundness-11918" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11920" href="../Soundness/#plfa_plfa-part3-Soundness-11920" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-11922" href="../Soundness/#plfa_plfa-part3-Soundness-11922" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-11923" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11925" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11926" href="../Soundness/#plfa_plfa-part3-Soundness-11926" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11928" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11930" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-11934" href="../Soundness/#plfa_plfa-part3-Soundness-11918" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-11935" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11937" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11938" href="../Soundness/#plfa_plfa-part3-Soundness-11938" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11940" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11942" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-11946" href="../Soundness/#plfa_plfa-part3-Soundness-11920" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-11947" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11949" class="Symbol">{</a> <a id="plfa_plfa-part3-Soundness-11951" href="../Soundness/#plfa_plfa-part3-Soundness-11951" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-11953" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11955" href="../Soundness/#plfa_plfa-part3-Soundness-11918" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11957" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-11959" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-11960" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-11964" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11966" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11967" href="../Soundness/#plfa_plfa-part3-Soundness-11967" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-11969" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11971" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part3-Soundness-11978" href="../Soundness/#plfa_plfa-part3-Soundness-11918" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11980" href="../Soundness/#plfa_plfa-part3-Soundness-11920" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-11981" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-11985" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11987" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11988" href="../Soundness/#plfa_plfa-part3-Soundness-11938" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11990" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-11992" href="../Soundness/#plfa_plfa-part3-Soundness-11967" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-11993" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11995" href="../Denotational/#plfa_plfa-part3-Denotational-9696" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-11998" href="../Soundness/#plfa_plfa-part3-Soundness-11926" class="Bound">γ</a>
  <a id="plfa_plfa-part3-Soundness-12002" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12004" href="../Soundness/#plfa_plfa-part3-Soundness-11938" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-12006" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-12008" href="../Untyped/#plfa_plfa-part2-Untyped-8074" class="Function">rename</a> <a id="plfa_plfa-part3-Soundness-12015" href="../Soundness/#plfa_plfa-part3-Soundness-11967" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-12017" href="../Soundness/#plfa_plfa-part3-Soundness-11951" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-12019" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-12021" href="../Soundness/#plfa_plfa-part3-Soundness-11922" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-12027" class="Comment">------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-12066" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12068" href="../Soundness/#plfa_plfa-part3-Soundness-11926" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-12070" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-12072" href="../Soundness/#plfa_plfa-part3-Soundness-11951" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-12074" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-12076" href="../Soundness/#plfa_plfa-part3-Soundness-11922" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-12078" href="../Soundness/#plfa_plfa-part3-Soundness-11898" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12093" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12094" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12096" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12098" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-12100" href="../Soundness/#plfa_plfa-part3-Soundness-12100" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12101" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12103" href="../Soundness/#plfa_plfa-part3-Soundness-12103" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12109" href="../Soundness/#plfa_plfa-part3-Soundness-12109" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-12111" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-12116" href="../Compositional/#plfa_plfa-part3-Compositional-12863" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-12124" href="../Soundness/#plfa_plfa-part3-Soundness-12109" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-12126" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-12130" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-12132" href="../Soundness/#plfa_plfa-part3-Soundness-12132" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-12135" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12138" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-12142" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-12146" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12147" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Soundness-12155" href="../Soundness/#plfa_plfa-part3-Soundness-12132" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-12158" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12159" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12165" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12166" class="Symbol">))</a>
<a id="plfa_plfa-part3-Soundness-12169" href="../Soundness/#plfa_plfa-part3-Soundness-11898" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12184" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12185" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12187" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12189" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-12191" href="../Soundness/#plfa_plfa-part3-Soundness-12191" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-12192" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-12194" class="Argument">ρ</a> <a id="plfa_plfa-part3-Soundness-12196" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12198" href="../Soundness/#plfa_plfa-part3-Soundness-12198" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-12199" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12201" href="../Soundness/#plfa_plfa-part3-Soundness-12201" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12207" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12208" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-12216" href="../Soundness/#plfa_plfa-part3-Soundness-12216" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-12217" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12219" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12224" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-12232" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12233" href="../Soundness/#plfa_plfa-part3-Soundness-11898" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12248" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12249" href="../Soundness/#plfa_plfa-part3-Soundness-11637" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-12256" href="../Soundness/#plfa_plfa-part3-Soundness-12198" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-12258" href="../Soundness/#plfa_plfa-part3-Soundness-12201" class="Bound">all-n</a><a id="plfa_plfa-part3-Soundness-12263" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12265" href="../Soundness/#plfa_plfa-part3-Soundness-12216" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-12266" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-12268" href="../Soundness/#plfa_plfa-part3-Soundness-11898" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12283" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12284" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12286" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12288" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-12290" href="../Soundness/#plfa_plfa-part3-Soundness-12290" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-12291" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12293" href="../Soundness/#plfa_plfa-part3-Soundness-12293" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12299" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-12307" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12309" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-12317" href="../Soundness/#plfa_plfa-part3-Soundness-11898" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12332" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12333" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12335" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12337" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-12339" href="../Soundness/#plfa_plfa-part3-Soundness-12339" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-12340" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12342" href="../Soundness/#plfa_plfa-part3-Soundness-12342" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12348" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12349" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-12357" href="../Soundness/#plfa_plfa-part3-Soundness-12357" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-12360" href="../Soundness/#plfa_plfa-part3-Soundness-12360" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12362" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12364" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12369" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-12377" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12378" href="../Soundness/#plfa_plfa-part3-Soundness-11898" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12393" href="../Soundness/#plfa_plfa-part3-Soundness-12342" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12399" href="../Soundness/#plfa_plfa-part3-Soundness-12357" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-12401" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12403" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12404" href="../Soundness/#plfa_plfa-part3-Soundness-11898" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12419" href="../Soundness/#plfa_plfa-part3-Soundness-12342" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12425" href="../Soundness/#plfa_plfa-part3-Soundness-12360" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12427" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-12429" href="../Soundness/#plfa_plfa-part3-Soundness-11898" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12444" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12445" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12447" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12449" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-12451" href="../Soundness/#plfa_plfa-part3-Soundness-12451" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-12452" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12454" href="../Soundness/#plfa_plfa-part3-Soundness-12454" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12460" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12461" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-12465" href="../Soundness/#plfa_plfa-part3-Soundness-12465" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-12468" href="../Soundness/#plfa_plfa-part3-Soundness-12468" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-12470" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12472" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12477" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-12481" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12482" href="../Soundness/#plfa_plfa-part3-Soundness-11898" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12497" href="../Soundness/#plfa_plfa-part3-Soundness-12454" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12503" href="../Soundness/#plfa_plfa-part3-Soundness-12465" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-12505" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12507" href="../Soundness/#plfa_plfa-part3-Soundness-12468" class="Bound">lt</a>
<a id="plfa_plfa-part3-Soundness-12510" href="../Soundness/#plfa_plfa-part3-Soundness-11898" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12525" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12526" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12528" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12530" href="../Soundness/#plfa_plfa-part3-Soundness-12530" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-12532" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-12534" href="../Soundness/#plfa_plfa-part3-Soundness-12534" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-12535" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12537" href="../Soundness/#plfa_plfa-part3-Soundness-12537" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12543" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12544" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-12551" href="../Soundness/#plfa_plfa-part3-Soundness-12551" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-12554" href="../Soundness/#plfa_plfa-part3-Soundness-12554" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12556" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12558" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12563" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-12570" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12571" href="../Soundness/#plfa_plfa-part3-Soundness-11898" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12586" href="../Soundness/#plfa_plfa-part3-Soundness-12537" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12592" href="../Soundness/#plfa_plfa-part3-Soundness-12551" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-12594" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12596" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12597" href="../Soundness/#plfa_plfa-part3-Soundness-11898" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12612" href="../Soundness/#plfa_plfa-part3-Soundness-12537" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12618" href="../Soundness/#plfa_plfa-part3-Soundness-12554" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12620" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-12622" href="../Soundness/#plfa_plfa-part3-Soundness-11898" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12637" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12638" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12640" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12642" href="../Soundness/#plfa_plfa-part3-Soundness-12642" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-12644" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-12646" href="../Soundness/#plfa_plfa-part3-Soundness-12646" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-12647" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12649" href="../Soundness/#plfa_plfa-part3-Soundness-12649" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12655" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-12663" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12665" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-12673" href="../Soundness/#plfa_plfa-part3-Soundness-11898" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12688" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12689" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12691" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12693" href="../Soundness/#plfa_plfa-part3-Soundness-12693" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-12695" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-12697" href="../Soundness/#plfa_plfa-part3-Soundness-12697" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-12698" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12700" href="../Soundness/#plfa_plfa-part3-Soundness-12700" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12706" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12707" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-12715" href="../Soundness/#plfa_plfa-part3-Soundness-12715" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-12718" href="../Soundness/#plfa_plfa-part3-Soundness-12718" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12720" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12722" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12727" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-12735" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12736" href="../Soundness/#plfa_plfa-part3-Soundness-11898" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12751" href="../Soundness/#plfa_plfa-part3-Soundness-12700" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12757" href="../Soundness/#plfa_plfa-part3-Soundness-12715" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-12759" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12761" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12762" href="../Soundness/#plfa_plfa-part3-Soundness-11898" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12777" href="../Soundness/#plfa_plfa-part3-Soundness-12700" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12783" href="../Soundness/#plfa_plfa-part3-Soundness-12718" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12785" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-12787" href="../Soundness/#plfa_plfa-part3-Soundness-11898" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12802" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12803" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12805" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12807" href="../Soundness/#plfa_plfa-part3-Soundness-12807" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-12809" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-12811" href="../Soundness/#plfa_plfa-part3-Soundness-12811" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-12812" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12814" href="../Soundness/#plfa_plfa-part3-Soundness-12814" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12820" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12821" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-12825" href="../Soundness/#plfa_plfa-part3-Soundness-12825" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-12828" href="../Soundness/#plfa_plfa-part3-Soundness-12828" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-12830" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12832" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12837" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-12841" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12842" href="../Soundness/#plfa_plfa-part3-Soundness-11898" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12857" href="../Soundness/#plfa_plfa-part3-Soundness-12814" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12863" href="../Soundness/#plfa_plfa-part3-Soundness-12825" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-12865" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12867" href="../Soundness/#plfa_plfa-part3-Soundness-12828" class="Bound">lt</a>
</pre><p>我们无法通过对 <code>δ ⊢ rename ρ M ↓ v</code> 的推导过程进行归纳来证明此引理， 所以我们转而通过对 <code>M</code> 进行归纳来证明：</p><ul><li><p>若它是一个变量，我们可通过对它应用反演引理得到 <code>v ⊑ δ (ρ x)</code>。 将前提实例化为 <code>x</code>，我们有 <code>δ (ρ x) ⊑ γ x</code>，于是我们可通过 <code>var</code> 规则证明。</p></li><li><p>若它是一个 λ-抽象 <code>ƛ N</code>，我们有重命名 <code>ρ (ƛ N) = ƛ (rename (ext ρ) N)</code>。 可通过对 <code>δ ⊢ ƛ (rename (ext ρ) N) ↓ v</code> 进行情况分析来论证：</p><ul><li><p>规则 <code>↦-intro</code>：为了满足归纳假设的前提，我们证明了重命名可扩展为从 <code>γ , v</code> 到 <code>δ , v</code> 的映射。</p></li><li><p>规则 <code>⊥-intro</code>：直接应用 <code>⊥-intro</code>。</p></li><li><p>规则 <code>⊔-intro</code>：应用归纳假设和 <code>⊔-intro</code>。</p></li><li><p>规则 <code>sub</code>：应用归纳假设和 <code>sub</code>。</p></li></ul></li><li><p>若它是一个应用 <code>L · M</code>，我们有 <code>rename ρ (L · M) = (rename ρ L) · (rename ρ M)</code>， 于是可通过对 <code>δ ⊢ (rename ρ L) · (rename ρ M) ↓ v</code> 进行情况分析来论证， 而所有的情况都很直白。</p></li></ul><p>在以后使用 <code>rename-reflect</code> 的情况中，重命名始终都是增量函数， 于是我们先在这里为这些特殊情况证明以下推论：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-rename-inc-reflect"></a><a id="plfa_plfa-part3-Soundness-14699" href="../Soundness/#plfa_plfa-part3-Soundness-14699" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-14718" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14720" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-14722" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14723" href="../Soundness/#plfa_plfa-part3-Soundness-14723" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14725" href="../Soundness/#plfa_plfa-part3-Soundness-14725" class="Bound">v′</a> <a id="plfa_plfa-part3-Soundness-14728" href="../Soundness/#plfa_plfa-part3-Soundness-14728" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-14729" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14731" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14732" href="../Soundness/#plfa_plfa-part3-Soundness-14732" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14734" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14736" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-14740" href="../Soundness/#plfa_plfa-part3-Soundness-14723" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-14741" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14743" class="Symbol">{</a> <a id="plfa_plfa-part3-Soundness-14745" href="../Soundness/#plfa_plfa-part3-Soundness-14745" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-14747" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14749" href="../Soundness/#plfa_plfa-part3-Soundness-14723" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14751" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-14753" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-14754" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-14758" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14760" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14761" href="../Soundness/#plfa_plfa-part3-Soundness-14732" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14763" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-14766" href="../Soundness/#plfa_plfa-part3-Soundness-14725" class="Bound">v′</a><a id="plfa_plfa-part3-Soundness-14768" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-14770" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-14772" href="../Untyped/#plfa_plfa-part2-Untyped-8074" class="Function">rename</a> <a id="plfa_plfa-part3-Soundness-14779" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part3-Soundness-14782" href="../Soundness/#plfa_plfa-part3-Soundness-14745" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-14784" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14786" href="../Soundness/#plfa_plfa-part3-Soundness-14728" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-14792" class="Comment">----------------------------</a>
  <a id="plfa_plfa-part3-Soundness-14823" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14825" href="../Soundness/#plfa_plfa-part3-Soundness-14732" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14827" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-14829" href="../Soundness/#plfa_plfa-part3-Soundness-14745" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-14831" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14833" href="../Soundness/#plfa_plfa-part3-Soundness-14728" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-14835" href="../Soundness/#plfa_plfa-part3-Soundness-14699" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-14854" href="../Soundness/#plfa_plfa-part3-Soundness-14854" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-14856" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14858" href="../Soundness/#plfa_plfa-part3-Soundness-11898" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-14873" href="../Denotational/#plfa_plfa-part3-Denotational-10539" class="Function">`⊑-refl</a> <a id="plfa_plfa-part3-Soundness-14881" href="../Soundness/#plfa_plfa-part3-Soundness-14854" class="Bound">d</a>
</pre><h3 id="代换反映了指称不变变量的情况">代换反映了指称不变：变量的情况</h3><p>我们基本上准备好证明同时代换反映指称不变了，也就是说，若 <code>γ ⊢ (subst σ M) ↓ v</code>，则对于任意 <code>k</code> 和某些 <code>δ</code>，有 <code>γ ⊢ σ k ↓ δ k</code> 且 <code>δ ⊢ M ↓ v</code>。我们首先从 <code>M</code> 是一个变量 <code>x</code> 的情况开始， 已知前提是 <code>γ ⊢ σ x ↓ v</code>，我们需要证明对于某个 <code>δ</code>，有 <code>δ ⊢ ` x ↓ v</code>。 我们选择的环境 <code>δ</code> 应当将 <code>x</code> 映射到 <code>v</code>，将任何其他变量映射到 <code>⊥</code>。</p><p>接下来我们定义将 <code>x</code> 映射到 <code>v</code>，将其他变量映射到 <code>⊥</code> 的环境，即 <code>const-env x v</code>。为了区分变量，我们定义以下函数来确定变量的相等性：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-_var≟_"></a><a id="plfa_plfa-part3-Soundness-15969" href="../Soundness/#plfa_plfa-part3-Soundness-15969" class="Function Operator">_var≟_</a> <a id="plfa_plfa-part3-Soundness-15976" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15978" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-15980" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15981" href="../Soundness/#plfa_plfa-part3-Soundness-15981" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-15982" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15984" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15986" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15987" href="../Soundness/#plfa_plfa-part3-Soundness-15987" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-15989" href="../Soundness/#plfa_plfa-part3-Soundness-15989" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-15991" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15993" href="../Soundness/#plfa_plfa-part3-Soundness-15981" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15995" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-15997" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-15998" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16000" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16002" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1511" class="Record">Dec</a> <a id="plfa_plfa-part3-Soundness-16006" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16007" href="../Soundness/#plfa_plfa-part3-Soundness-15987" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16009" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-16011" href="../Soundness/#plfa_plfa-part3-Soundness-15989" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-16012" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-16014" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-16016" href="../Soundness/#plfa_plfa-part3-Soundness-15969" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16021" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-16024" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-16027" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-16031" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-16036" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-16038" href="../Soundness/#plfa_plfa-part3-Soundness-15969" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16043" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16044" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-16046" class="Symbol">_)</a>  <a id="plfa_plfa-part3-Soundness-16050" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-16053" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-16056" class="Symbol">λ()</a>
<a id="plfa_plfa-part3-Soundness-16060" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16061" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-16063" class="Symbol">_)</a> <a id="plfa_plfa-part3-Soundness-16066" href="../Soundness/#plfa_plfa-part3-Soundness-15969" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16071" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-16074" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-16077" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-16080" class="Symbol">λ()</a>
<a id="plfa_plfa-part3-Soundness-16084" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16085" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-16087" href="../Soundness/#plfa_plfa-part3-Soundness-16087" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-16088" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16090" href="../Soundness/#plfa_plfa-part3-Soundness-15969" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16095" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16096" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-16098" href="../Soundness/#plfa_plfa-part3-Soundness-16098" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-16099" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16101" class="Keyword">with</a>  <a id="plfa_plfa-part3-Soundness-16107" href="../Soundness/#plfa_plfa-part3-Soundness-16087" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16109" href="../Soundness/#plfa_plfa-part3-Soundness-15969" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16114" href="../Soundness/#plfa_plfa-part3-Soundness-16098" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-16116" class="Symbol">...</a>                 <a id="plfa_plfa-part3-Soundness-16136" class="Symbol">|</a>  <a id="plfa_plfa-part3-Soundness-16139" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-16143" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-16148" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-16151" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-16155" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-16160" class="Symbol">...</a>                 <a id="plfa_plfa-part3-Soundness-16180" class="Symbol">|</a>  <a id="plfa_plfa-part3-Soundness-16183" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-16186" href="../Soundness/#plfa_plfa-part3-Soundness-16186" class="Bound">neq</a>   <a id="plfa_plfa-part3-Soundness-16192" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-16195" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-16198" class="Symbol">λ{</a><a id="plfa_plfa-part3-Soundness-16200" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-16205" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16207" href="../Soundness/#plfa_plfa-part3-Soundness-16186" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-16211" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-16215" class="Symbol">}</a>

<a id="plfa_plfa-part3-Soundness-var≟-refl"></a><a id="plfa_plfa-part3-Soundness-16218" href="../Soundness/#plfa_plfa-part3-Soundness-16218" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-16228" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16230" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-16232" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16233" href="../Soundness/#plfa_plfa-part3-Soundness-16233" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-16234" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16236" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16237" href="../Soundness/#plfa_plfa-part3-Soundness-16237" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16239" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16241" href="../Soundness/#plfa_plfa-part3-Soundness-16233" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-16243" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-16245" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-16246" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16248" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16250" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16251" href="../Soundness/#plfa_plfa-part3-Soundness-16237" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16253" href="../Soundness/#plfa_plfa-part3-Soundness-15969" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16258" href="../Soundness/#plfa_plfa-part3-Soundness-16237" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-16259" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16261" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-16263" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-16267" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-16272" href="../Soundness/#plfa_plfa-part3-Soundness-16218" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-16282" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-16284" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16286" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-16291" href="../Soundness/#plfa_plfa-part3-Soundness-16218" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-16301" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16302" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-16304" href="../Soundness/#plfa_plfa-part3-Soundness-16304" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-16305" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16307" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-16315" href="../Soundness/#plfa_plfa-part3-Soundness-16218" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-16325" href="../Soundness/#plfa_plfa-part3-Soundness-16304" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16327" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16329" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><p>接着我们用 <code>var≟</code> 来定义 <code>const-env</code>：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-const-env"></a><a id="plfa_plfa-part3-Soundness-16429" href="../Soundness/#plfa_plfa-part3-Soundness-16429" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-16439" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16441" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-16443" href="../Soundness/#plfa_plfa-part3-Soundness-16443" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-16444" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16446" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16448" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16449" href="../Soundness/#plfa_plfa-part3-Soundness-16449" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16451" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16453" href="../Soundness/#plfa_plfa-part3-Soundness-16443" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-16455" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-16457" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-16458" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16460" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16462" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-16468" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16470" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-16474" href="../Soundness/#plfa_plfa-part3-Soundness-16443" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Soundness-16476" href="../Soundness/#plfa_plfa-part3-Soundness-16429" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-16486" href="../Soundness/#plfa_plfa-part3-Soundness-16486" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16488" href="../Soundness/#plfa_plfa-part3-Soundness-16488" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-16490" href="../Soundness/#plfa_plfa-part3-Soundness-16490" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-16492" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16497" href="../Soundness/#plfa_plfa-part3-Soundness-16486" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16499" href="../Soundness/#plfa_plfa-part3-Soundness-15969" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16504" href="../Soundness/#plfa_plfa-part3-Soundness-16490" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-16506" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-16522" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16524" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-16528" class="Symbol">_</a>       <a id="plfa_plfa-part3-Soundness-16536" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16538" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-16540" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-16556" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16558" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-16561" class="Symbol">_</a>        <a id="plfa_plfa-part3-Soundness-16570" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16572" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a>
</pre><p>当然，<code>const-env x v</code> 将 <code>x</code> 映射到值 <code>v</code>：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-same-const-env"></a><a id="plfa_plfa-part3-Soundness-16681" href="../Soundness/#plfa_plfa-part3-Soundness-16681" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-16696" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16698" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-16700" href="../Soundness/#plfa_plfa-part3-Soundness-16700" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-16701" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16703" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16704" href="../Soundness/#plfa_plfa-part3-Soundness-16704" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16706" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16708" href="../Soundness/#plfa_plfa-part3-Soundness-16700" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-16710" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-16712" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-16713" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16715" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16716" href="../Soundness/#plfa_plfa-part3-Soundness-16716" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-16717" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16719" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16721" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16722" href="../Soundness/#plfa_plfa-part3-Soundness-16429" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-16732" href="../Soundness/#plfa_plfa-part3-Soundness-16704" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16734" href="../Soundness/#plfa_plfa-part3-Soundness-16716" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-16735" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16737" href="../Soundness/#plfa_plfa-part3-Soundness-16704" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16739" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-16741" href="../Soundness/#plfa_plfa-part3-Soundness-16716" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-16743" href="../Soundness/#plfa_plfa-part3-Soundness-16681" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-16758" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16759" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-16761" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16763" href="../Soundness/#plfa_plfa-part3-Soundness-16763" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-16764" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16766" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-16774" href="../Soundness/#plfa_plfa-part3-Soundness-16218" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-16784" href="../Soundness/#plfa_plfa-part3-Soundness-16763" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16786" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16788" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><p>以及 <code>const-env x v</code> 将 <code>y</code> 映射到 <code>⊥</code>，且 <code>x ≢ y</code>。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-diff-const-env"></a><a id="plfa_plfa-part3-Soundness-16917" href="../Soundness/#plfa_plfa-part3-Soundness-16917" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-16932" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16934" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-16936" href="../Soundness/#plfa_plfa-part3-Soundness-16936" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-16937" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16939" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16940" href="../Soundness/#plfa_plfa-part3-Soundness-16940" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16942" href="../Soundness/#plfa_plfa-part3-Soundness-16942" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-16944" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16946" href="../Soundness/#plfa_plfa-part3-Soundness-16936" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-16948" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-16950" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-16951" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16953" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16954" href="../Soundness/#plfa_plfa-part3-Soundness-16954" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-16955" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-16959" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16961" href="../Soundness/#plfa_plfa-part3-Soundness-16940" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16963" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#830" class="Function Operator">≢</a> <a id="plfa_plfa-part3-Soundness-16965" href="../Soundness/#plfa_plfa-part3-Soundness-16942" class="Bound">y</a>
    <a id="plfa_plfa-part3-Soundness-16971" class="Comment">-------------------</a>
  <a id="plfa_plfa-part3-Soundness-16993" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16995" href="../Soundness/#plfa_plfa-part3-Soundness-16429" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-17005" href="../Soundness/#plfa_plfa-part3-Soundness-16940" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-17007" href="../Soundness/#plfa_plfa-part3-Soundness-16954" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-17009" href="../Soundness/#plfa_plfa-part3-Soundness-16942" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-17011" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-17013" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a>
<a id="plfa_plfa-part3-Soundness-17015" href="../Soundness/#plfa_plfa-part3-Soundness-16917" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-17030" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17031" href="../Soundness/#plfa_plfa-part3-Soundness-17031" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-17032" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17034" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17035" href="../Soundness/#plfa_plfa-part3-Soundness-17035" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-17036" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17038" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17039" href="../Soundness/#plfa_plfa-part3-Soundness-17039" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-17040" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17042" href="../Soundness/#plfa_plfa-part3-Soundness-17042" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-17046" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-17051" href="../Soundness/#plfa_plfa-part3-Soundness-17035" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-17053" href="../Soundness/#plfa_plfa-part3-Soundness-15969" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-17058" href="../Soundness/#plfa_plfa-part3-Soundness-17039" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-17060" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-17065" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17067" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-17071" href="../Soundness/#plfa_plfa-part3-Soundness-17071" class="Bound">eq</a>  <a id="plfa_plfa-part3-Soundness-17075" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-17078" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html#628" class="Function">⊥-elim</a> <a id="plfa_plfa-part3-Soundness-17085" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17086" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-17090" href="../Soundness/#plfa_plfa-part3-Soundness-17071" class="Bound">eq</a><a id="plfa_plfa-part3-Soundness-17092" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-17094" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-17099" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17101" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-17104" class="Symbol">_</a>    <a id="plfa_plfa-part3-Soundness-17109" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-17112" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><p>于是我们为 <code>δ</code> 选择 <code>const-env x v</code> 并通过 <code>var</code> 规则得到了 <code>δ ⊢ ` x ↓ v</code>。</p><p>剩下的就是证明 <code>γ `⊢ σ ↓ δ</code>，以及对于任意 <code>k</code> 有 <code>δ ⊢ M ↓ v</code>，据此我们 就能为 <code>δ</code> 选择 <code>const-env x v</code>。我们有两种情况需要考虑：<code>x ≡ y</code> 或 <code>x ≢ y</code>。</p><p>现在完成该证明的两种情况：</p><ul><li>对于 <code>x ≡ y</code> 的情况，我们需要证明 <code>γ ⊢ σ y ↓ v</code>，不过这就是我们的前提。</li><li>对于 <code>x ≢ y,</code> 的情况， we need to show that <code>γ ⊢ σ y ↓ ⊥</code>, which we do via rule <code>⊥-intro</code>.</li></ul><p>这样，我们就完成了同时代换反映指称不变的证明中变量的情况。 以下是正式的证明：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-reflect-var"></a><a id="plfa_plfa-part3-Soundness-18194" href="../Soundness/#plfa_plfa-part3-Soundness-18194" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-18212" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18214" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-18216" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18217" href="../Soundness/#plfa_plfa-part3-Soundness-18217" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18219" href="../Soundness/#plfa_plfa-part3-Soundness-18219" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18220" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18222" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18223" href="../Soundness/#plfa_plfa-part3-Soundness-18223" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18225" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18227" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-18231" href="../Soundness/#plfa_plfa-part3-Soundness-18219" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18232" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18234" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18235" href="../Soundness/#plfa_plfa-part3-Soundness-18235" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18237" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18239" href="../Soundness/#plfa_plfa-part3-Soundness-18217" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18241" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-18243" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-18244" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18246" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18247" href="../Soundness/#plfa_plfa-part3-Soundness-18247" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-18248" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18250" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18251" href="../Soundness/#plfa_plfa-part3-Soundness-18251" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18253" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18255" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-18261" href="../Soundness/#plfa_plfa-part3-Soundness-18217" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18263" href="../Soundness/#plfa_plfa-part3-Soundness-18219" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18264" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-18268" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-18270" href="../Soundness/#plfa_plfa-part3-Soundness-18223" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18272" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-18274" href="../Soundness/#plfa_plfa-part3-Soundness-18251" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18276" href="../Soundness/#plfa_plfa-part3-Soundness-18235" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18278" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-18280" href="../Soundness/#plfa_plfa-part3-Soundness-18247" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-18286" class="Comment">-----------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-18330" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-18332" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-18335" href="../Soundness/#plfa_plfa-part3-Soundness-18335" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-18337" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-18339" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-18343" href="../Soundness/#plfa_plfa-part3-Soundness-18217" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18345" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-18347" href="../Soundness/#plfa_plfa-part3-Soundness-18223" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18349" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-18352" href="../Soundness/#plfa_plfa-part3-Soundness-18251" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18354" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-18356" href="../Soundness/#plfa_plfa-part3-Soundness-18335" class="Bound">δ</a>  <a id="plfa_plfa-part3-Soundness-18359" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-18362" href="../Soundness/#plfa_plfa-part3-Soundness-18335" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-18364" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-18366" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-18368" href="../Soundness/#plfa_plfa-part3-Soundness-18235" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18370" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-18372" href="../Soundness/#plfa_plfa-part3-Soundness-18247" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-18374" href="../Soundness/#plfa_plfa-part3-Soundness-18194" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-18392" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18393" href="../Soundness/#plfa_plfa-part3-Soundness-18393" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-18394" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18396" href="../Soundness/#plfa_plfa-part3-Soundness-18396" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18397" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18399" href="../Soundness/#plfa_plfa-part3-Soundness-18399" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-18400" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18402" href="../Soundness/#plfa_plfa-part3-Soundness-18402" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-18403" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18405" href="../Soundness/#plfa_plfa-part3-Soundness-18405" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-18406" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18408" href="../Soundness/#plfa_plfa-part3-Soundness-18408" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-18409" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18411" href="../Soundness/#plfa_plfa-part3-Soundness-18411" class="Bound">xv</a>
  <a id="plfa_plfa-part3-Soundness-18416" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-18424" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-18428" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-18429" href="../Soundness/#plfa_plfa-part3-Soundness-16681" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-18444" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18445" href="../Soundness/#plfa_plfa-part3-Soundness-18393" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-18446" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18448" href="../Soundness/#plfa_plfa-part3-Soundness-18402" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-18449" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18451" href="../Soundness/#plfa_plfa-part3-Soundness-18405" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-18452" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-18455" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-18461" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-18463" href="../Soundness/#plfa_plfa-part3-Soundness-16429" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-18473" href="../Soundness/#plfa_plfa-part3-Soundness-18402" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18475" href="../Soundness/#plfa_plfa-part3-Soundness-18405" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-18477" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-18479" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-18481" href="../Soundness/#plfa_plfa-part3-Soundness-18514" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-18494" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-18496" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-18500" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-18502" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Soundness-18506" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-18514" href="../Soundness/#plfa_plfa-part3-Soundness-18514" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-18527" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18529" href="../Soundness/#plfa_plfa-part3-Soundness-18399" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18531" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-18534" href="../Soundness/#plfa_plfa-part3-Soundness-18408" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18536" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-18538" href="../Soundness/#plfa_plfa-part3-Soundness-16429" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-18548" href="../Soundness/#plfa_plfa-part3-Soundness-18402" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18550" href="../Soundness/#plfa_plfa-part3-Soundness-18405" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-18554" href="../Soundness/#plfa_plfa-part3-Soundness-18514" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-18567" href="../Soundness/#plfa_plfa-part3-Soundness-18567" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-18569" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-18574" href="../Soundness/#plfa_plfa-part3-Soundness-18402" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18576" href="../Soundness/#plfa_plfa-part3-Soundness-15969" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-18581" href="../Soundness/#plfa_plfa-part3-Soundness-18567" class="Bound">y</a>
  <a id="plfa_plfa-part3-Soundness-18585" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-18589" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-18591" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-18595" href="../Soundness/#plfa_plfa-part3-Soundness-18595" class="Bound">x≡y</a> <a id="plfa_plfa-part3-Soundness-18599" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-18607" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-18611" href="../Soundness/#plfa_plfa-part3-Soundness-18595" class="Bound">x≡y</a> <a id="plfa_plfa-part3-Soundness-18615" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-18617" href="../Soundness/#plfa_plfa-part3-Soundness-16681" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-18632" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18633" href="../Soundness/#plfa_plfa-part3-Soundness-18393" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-18634" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18636" href="../Soundness/#plfa_plfa-part3-Soundness-18402" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-18637" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18639" href="../Soundness/#plfa_plfa-part3-Soundness-18405" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-18640" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18642" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-18644" href="../Soundness/#plfa_plfa-part3-Soundness-18411" class="Bound">xv</a>
  <a id="plfa_plfa-part3-Soundness-18649" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-18653" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-18655" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-18658" href="../Soundness/#plfa_plfa-part3-Soundness-18658" class="Bound">x≢y</a> <a id="plfa_plfa-part3-Soundness-18662" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-18670" href="../Soundness/#plfa_plfa-part3-Soundness-16917" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-18685" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18686" href="../Soundness/#plfa_plfa-part3-Soundness-18393" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-18687" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18689" href="../Soundness/#plfa_plfa-part3-Soundness-18402" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-18690" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18692" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-18693" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18695" href="../Soundness/#plfa_plfa-part3-Soundness-18405" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-18696" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18698" href="../Soundness/#plfa_plfa-part3-Soundness-18658" class="Bound">x≢y</a> <a id="plfa_plfa-part3-Soundness-18702" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-18704" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
</pre><h3 id="代换与环境的构造">代换与环境的构造</h3><p>每一个代换都能产生可求值为 <code>⊥</code> 的项。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-⊥"></a><a id="plfa_plfa-part3-Soundness-18890" href="../Soundness/#plfa_plfa-part3-Soundness-18890" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-18898" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18900" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-18902" href="../Soundness/#plfa_plfa-part3-Soundness-18902" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18904" href="../Soundness/#plfa_plfa-part3-Soundness-18904" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18905" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18907" href="../Soundness/#plfa_plfa-part3-Soundness-18907" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18909" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18911" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-18915" href="../Soundness/#plfa_plfa-part3-Soundness-18904" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18916" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18918" href="../Soundness/#plfa_plfa-part3-Soundness-18918" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18920" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18922" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-18928" href="../Soundness/#plfa_plfa-part3-Soundness-18902" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18930" href="../Soundness/#plfa_plfa-part3-Soundness-18904" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18931" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Soundness-18937" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Soundness-18957" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-18959" href="../Soundness/#plfa_plfa-part3-Soundness-18907" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18961" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-18964" href="../Soundness/#plfa_plfa-part3-Soundness-18918" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18966" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-18968" href="../Denotational/#plfa_plfa-part3-Denotational-9950" class="Function">`⊥</a>
<a id="plfa_plfa-part3-Soundness-18971" href="../Soundness/#plfa_plfa-part3-Soundness-18890" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-18979" href="../Soundness/#plfa_plfa-part3-Soundness-18979" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18981" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-18983" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
</pre><p>若代换产生的项的求值结果为 <code>γ₁</code> 或 <code>γ₂</code> 中的值，那么这些项的求值结果也是 <code>γ₁ ⊔ γ₂</code> 中的值。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-⊔"></a><a id="plfa_plfa-part3-Soundness-19216" href="../Soundness/#plfa_plfa-part3-Soundness-19216" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-19224" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19226" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-19228" href="../Soundness/#plfa_plfa-part3-Soundness-19228" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-19230" href="../Soundness/#plfa_plfa-part3-Soundness-19230" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-19231" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-19233" href="../Soundness/#plfa_plfa-part3-Soundness-19233" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-19235" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19237" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-19241" href="../Soundness/#plfa_plfa-part3-Soundness-19230" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-19242" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-19244" href="../Soundness/#plfa_plfa-part3-Soundness-19244" class="Bound">γ₁</a> <a id="plfa_plfa-part3-Soundness-19247" href="../Soundness/#plfa_plfa-part3-Soundness-19247" class="Bound">γ₂</a> <a id="plfa_plfa-part3-Soundness-19250" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19252" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-19256" href="../Soundness/#plfa_plfa-part3-Soundness-19228" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-19257" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-19259" href="../Soundness/#plfa_plfa-part3-Soundness-19259" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-19261" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19263" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-19269" href="../Soundness/#plfa_plfa-part3-Soundness-19228" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-19271" href="../Soundness/#plfa_plfa-part3-Soundness-19230" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-19272" class="Symbol">}</a>
           <a id="plfa_plfa-part3-Soundness-19285" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-19287" href="../Soundness/#plfa_plfa-part3-Soundness-19233" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-19289" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-19292" href="../Soundness/#plfa_plfa-part3-Soundness-19259" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-19294" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-19296" href="../Soundness/#plfa_plfa-part3-Soundness-19244" class="Bound">γ₁</a>
           <a id="plfa_plfa-part3-Soundness-19310" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-19312" href="../Soundness/#plfa_plfa-part3-Soundness-19233" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-19314" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-19317" href="../Soundness/#plfa_plfa-part3-Soundness-19259" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-19319" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-19321" href="../Soundness/#plfa_plfa-part3-Soundness-19247" class="Bound">γ₂</a>
             <a id="plfa_plfa-part3-Soundness-19337" class="Comment">-------------------------</a>
           <a id="plfa_plfa-part3-Soundness-19374" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-19376" href="../Soundness/#plfa_plfa-part3-Soundness-19233" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-19378" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-19381" href="../Soundness/#plfa_plfa-part3-Soundness-19259" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-19383" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-19385" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-19386" href="../Soundness/#plfa_plfa-part3-Soundness-19244" class="Bound">γ₁</a> <a id="plfa_plfa-part3-Soundness-19389" href="../Denotational/#plfa_plfa-part3-Denotational-9979" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-19392" href="../Soundness/#plfa_plfa-part3-Soundness-19247" class="Bound">γ₂</a><a id="plfa_plfa-part3-Soundness-19394" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-19396" href="../Soundness/#plfa_plfa-part3-Soundness-19216" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-19404" href="../Soundness/#plfa_plfa-part3-Soundness-19404" class="Bound">γ₁-ok</a> <a id="plfa_plfa-part3-Soundness-19410" href="../Soundness/#plfa_plfa-part3-Soundness-19410" class="Bound">γ₂-ok</a> <a id="plfa_plfa-part3-Soundness-19416" href="../Soundness/#plfa_plfa-part3-Soundness-19416" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-19418" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-19420" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-19428" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-19429" href="../Soundness/#plfa_plfa-part3-Soundness-19404" class="Bound">γ₁-ok</a> <a id="plfa_plfa-part3-Soundness-19435" href="../Soundness/#plfa_plfa-part3-Soundness-19416" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-19436" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-19438" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-19439" href="../Soundness/#plfa_plfa-part3-Soundness-19410" class="Bound">γ₂-ok</a> <a id="plfa_plfa-part3-Soundness-19445" href="../Soundness/#plfa_plfa-part3-Soundness-19416" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-19446" class="Symbol">)</a>
</pre><h3 id="λ-构造子是单射的">λ 构造子是单射的</h3><pre class="Agda"><a id="plfa_plfa-part3-Soundness-lambda-inj"></a><a id="plfa_plfa-part3-Soundness-19526" href="../Soundness/#plfa_plfa-part3-Soundness-19526" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-19537" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19539" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-19541" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-19542" href="../Soundness/#plfa_plfa-part3-Soundness-19542" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-19543" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-19545" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-19546" href="../Soundness/#plfa_plfa-part3-Soundness-19546" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-19548" href="../Soundness/#plfa_plfa-part3-Soundness-19548" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-19550" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19552" href="../Soundness/#plfa_plfa-part3-Soundness-19542" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-19554" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-19556" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-19558" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-19560" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-19562" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-19566" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-19568" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a> <a id="plfa_plfa-part3-Soundness-19572" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-19573" class="Argument">A</a> <a id="plfa_plfa-part3-Soundness-19575" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-19577" href="../Soundness/#plfa_plfa-part3-Soundness-19542" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-19579" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-19581" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-19582" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-19584" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-19585" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-19587" href="../Soundness/#plfa_plfa-part3-Soundness-19546" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-19588" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-19590" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-19591" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-19593" href="../Soundness/#plfa_plfa-part3-Soundness-19548" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-19594" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Soundness-19600" class="Comment">---------------------------</a>
  <a id="plfa_plfa-part3-Soundness-19630" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-19632" href="../Soundness/#plfa_plfa-part3-Soundness-19546" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-19634" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-19636" href="../Soundness/#plfa_plfa-part3-Soundness-19548" class="Bound">N</a>
<a id="plfa_plfa-part3-Soundness-19638" href="../Soundness/#plfa_plfa-part3-Soundness-19526" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-19649" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-19654" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-19656" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><h3 id="同时代换反映了指称相等">同时代换反映了指称相等</h3><p>本节中我们要证明一个核心引理，即代换反映了指称不变。也就是说，若 <code>γ ⊢ subst σ M ↓ v</code>，则 <code>δ ⊢ M ↓ v</code> 且对于某个 <code>δ</code> 有 <code>γ `⊢ σ ↓ δ</code>。 我们通过对 <code>γ ⊢ subst σ M ↓ v</code> 的推导过程进行归纳来证明， 为此需要稍微重述一下该引理，将前提更改为 <code>γ ⊢ L ↓ v</code> 和 <code>L ≡ subst σ M</code>。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-split"></a><a id="plfa_plfa-part3-Soundness-20296" href="../Soundness/#plfa_plfa-part3-Soundness-20296" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-20302" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20304" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-20306" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20307" href="../Soundness/#plfa_plfa-part3-Soundness-20307" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-20308" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20310" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20311" href="../Soundness/#plfa_plfa-part3-Soundness-20311" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20313" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20315" href="../Soundness/#plfa_plfa-part3-Soundness-20307" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20317" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20319" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-20321" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20323" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20324" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20326" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20327" href="../Soundness/#plfa_plfa-part3-Soundness-20327" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20329" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20331" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20335" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20336" href="../Soundness/#plfa_plfa-part3-Soundness-20307" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20338" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20340" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20341" class="Symbol">)}</a> <a id="plfa_plfa-part3-Soundness-20344" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20345" href="../Soundness/#plfa_plfa-part3-Soundness-20345" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-20346" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-20350" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20352" href="../Soundness/#plfa_plfa-part3-Soundness-20327" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20354" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20356" href="../Soundness/#plfa_plfa-part3-Soundness-20311" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20358" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20360" href="../Soundness/#plfa_plfa-part3-Soundness-20345" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-20366" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part3-Soundness-20395" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20397" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20398" href="../Denotational/#plfa_plfa-part3-Denotational-9222" class="Function">init</a> <a id="plfa_plfa-part3-Soundness-20403" href="../Soundness/#plfa_plfa-part3-Soundness-20327" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20405" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-20408" href="../Denotational/#plfa_plfa-part3-Denotational-9277" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-20413" href="../Soundness/#plfa_plfa-part3-Soundness-20327" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-20414" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-20416" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20418" href="../Soundness/#plfa_plfa-part3-Soundness-20311" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20420" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20422" href="../Soundness/#plfa_plfa-part3-Soundness-20345" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-20424" href="../Soundness/#plfa_plfa-part3-Soundness-20296" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-20430" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20431" class="Argument">δ</a> <a id="plfa_plfa-part3-Soundness-20433" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20435" href="../Soundness/#plfa_plfa-part3-Soundness-20435" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-20436" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20438" href="../Soundness/#plfa_plfa-part3-Soundness-20438" class="Bound">δMv</a> <a id="plfa_plfa-part3-Soundness-20442" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-20450" href="../Denotational/#plfa_plfa-part3-Denotational-9326" class="Function">init-last</a> <a id="plfa_plfa-part3-Soundness-20460" href="../Soundness/#plfa_plfa-part3-Soundness-20435" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20462" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20464" href="../Soundness/#plfa_plfa-part3-Soundness-20438" class="Bound">δMv</a>

<a id="plfa_plfa-part3-Soundness-subst-reflect"></a><a id="plfa_plfa-part3-Soundness-20469" href="../Soundness/#plfa_plfa-part3-Soundness-20469" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-20483" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20485" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-20487" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20488" href="../Soundness/#plfa_plfa-part3-Soundness-20488" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20490" href="../Soundness/#plfa_plfa-part3-Soundness-20490" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20491" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20493" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20494" href="../Soundness/#plfa_plfa-part3-Soundness-20494" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20496" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20498" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20502" href="../Soundness/#plfa_plfa-part3-Soundness-20490" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20503" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20505" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20506" href="../Soundness/#plfa_plfa-part3-Soundness-20506" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20508" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20510" href="../Soundness/#plfa_plfa-part3-Soundness-20488" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20512" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20514" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20515" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20517" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20518" href="../Soundness/#plfa_plfa-part3-Soundness-20518" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-20519" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20521" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20522" href="../Soundness/#plfa_plfa-part3-Soundness-20522" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-20524" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20526" href="../Soundness/#plfa_plfa-part3-Soundness-20490" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-20528" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20530" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20531" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20533" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20534" href="../Soundness/#plfa_plfa-part3-Soundness-20534" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-20536" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20538" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-20544" href="../Soundness/#plfa_plfa-part3-Soundness-20488" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20546" href="../Soundness/#plfa_plfa-part3-Soundness-20490" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20547" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-20551" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20553" href="../Soundness/#plfa_plfa-part3-Soundness-20494" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20555" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20557" href="../Soundness/#plfa_plfa-part3-Soundness-20522" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-20559" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20561" href="../Soundness/#plfa_plfa-part3-Soundness-20518" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-20565" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20567" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part3-Soundness-20573" href="../Soundness/#plfa_plfa-part3-Soundness-20534" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-20575" href="../Soundness/#plfa_plfa-part3-Soundness-20506" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20577" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-20579" href="../Soundness/#plfa_plfa-part3-Soundness-20522" class="Bound">L</a>
    <a id="plfa_plfa-part3-Soundness-20585" class="Comment">---------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-20627" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20629" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-20632" href="../Soundness/#plfa_plfa-part3-Soundness-20632" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20634" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-20636" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20640" href="../Soundness/#plfa_plfa-part3-Soundness-20488" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20642" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-20644" href="../Soundness/#plfa_plfa-part3-Soundness-20494" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20646" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-20649" href="../Soundness/#plfa_plfa-part3-Soundness-20534" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-20651" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20653" href="../Soundness/#plfa_plfa-part3-Soundness-20632" class="Bound">γ</a>  <a id="plfa_plfa-part3-Soundness-20656" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-20659" href="../Soundness/#plfa_plfa-part3-Soundness-20632" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20661" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20663" href="../Soundness/#plfa_plfa-part3-Soundness-20506" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20665" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20667" href="../Soundness/#plfa_plfa-part3-Soundness-20518" class="Bound">v</a>

<a id="plfa_plfa-part3-Soundness-20670" href="../Soundness/#plfa_plfa-part3-Soundness-20469" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-20684" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20685" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-20687" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20689" href="../Soundness/#plfa_plfa-part3-Soundness-20689" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-20690" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-20692" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-20694" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20696" href="../Soundness/#plfa_plfa-part3-Soundness-20696" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-20697" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20699" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20700" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-20704" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20705" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-20707" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20709" href="../Soundness/#plfa_plfa-part3-Soundness-20709" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-20710" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-20713" href="../Soundness/#plfa_plfa-part3-Soundness-20713" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-20717" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-20722" href="../Soundness/#plfa_plfa-part3-Soundness-20689" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-20724" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-20728" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20730" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-20732" href="../Soundness/#plfa_plfa-part3-Soundness-20732" class="Bound">x</a>  <a id="plfa_plfa-part3-Soundness-20735" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-20740" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-20744" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20745" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-20747" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20749" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-20750" class="Symbol">}</a>
<a id="plfa_plfa-part3-Soundness-20752" class="Symbol">...</a>           <a id="plfa_plfa-part3-Soundness-20766" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20768" href="../Soundness/#plfa_plfa-part3-Soundness-20768" class="Bound">yv</a>  <a id="plfa_plfa-part3-Soundness-20772" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-20780" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-20784" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-20788" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20790" href="../Soundness/#plfa_plfa-part3-Soundness-18194" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-20808" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20809" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-20811" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20813" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-20814" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20816" href="../Soundness/#plfa_plfa-part3-Soundness-20768" class="Bound">yv</a>
<a id="plfa_plfa-part3-Soundness-20819" href="../Soundness/#plfa_plfa-part3-Soundness-20469" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-20833" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20834" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-20836" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20838" href="../Soundness/#plfa_plfa-part3-Soundness-20838" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-20839" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20841" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20842" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-20846" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20847" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-20849" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20851" href="../Soundness/#plfa_plfa-part3-Soundness-20851" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-20852" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-20855" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-20858" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20860" href="../Soundness/#plfa_plfa-part3-Soundness-20860" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-20863" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-20865" href="../Soundness/#plfa_plfa-part3-Soundness-20865" class="Bound">M₂</a>
<a id="plfa_plfa-part3-Soundness-20868" href="../Soundness/#plfa_plfa-part3-Soundness-20469" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-20882" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20883" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-20885" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20887" href="../Soundness/#plfa_plfa-part3-Soundness-20887" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-20888" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20890" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20891" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-20895" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20896" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-20898" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20900" href="../Soundness/#plfa_plfa-part3-Soundness-20900" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-20901" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-20904" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-20907" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20909" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-20911" href="../Soundness/#plfa_plfa-part3-Soundness-20911" class="Bound">M′</a>

<a id="plfa_plfa-part3-Soundness-20915" href="../Soundness/#plfa_plfa-part3-Soundness-20469" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-20929" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20930" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-20932" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20934" href="../Soundness/#plfa_plfa-part3-Soundness-20934" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-20935" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-20937" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-20939" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20941" href="../Soundness/#plfa_plfa-part3-Soundness-20941" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-20942" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20944" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20945" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-20952" href="../Soundness/#plfa_plfa-part3-Soundness-20952" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-20955" href="../Soundness/#plfa_plfa-part3-Soundness-20955" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-20957" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-20959" href="../Soundness/#plfa_plfa-part3-Soundness-20959" class="Bound">eqL</a>
         <a id="plfa_plfa-part3-Soundness-20972" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-20977" href="../Soundness/#plfa_plfa-part3-Soundness-20934" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-20979" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-20986" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20988" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-20990" href="../Soundness/#plfa_plfa-part3-Soundness-20990" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-20992" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-20997" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-21004" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-21007" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-21010" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-21017" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21019" href="../Soundness/#plfa_plfa-part3-Soundness-21019" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-21022" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-21030" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-21034" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-21038" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21040" href="../Soundness/#plfa_plfa-part3-Soundness-18194" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-21058" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21059" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21061" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21063" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21064" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21066" href="../Soundness/#plfa_plfa-part3-Soundness-21019" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-21069" href="../Soundness/#plfa_plfa-part3-Soundness-20469" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21083" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21084" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-21091" href="../Soundness/#plfa_plfa-part3-Soundness-21091" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-21094" href="../Soundness/#plfa_plfa-part3-Soundness-21094" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-21096" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21098" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-21101" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21103" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-21105" href="../Soundness/#plfa_plfa-part3-Soundness-21105" class="Bound">M′</a>
<a id="plfa_plfa-part3-Soundness-21108" href="../Soundness/#plfa_plfa-part3-Soundness-20469" class="Function">subst-reflect</a><a id="plfa_plfa-part3-Soundness-21121" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21122" href="../Soundness/#plfa_plfa-part3-Soundness-21122" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-21123" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21125" href="../Soundness/#plfa_plfa-part3-Soundness-21125" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-21126" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21128" href="../Soundness/#plfa_plfa-part3-Soundness-21128" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-21129" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21131" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21133" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21135" href="../Soundness/#plfa_plfa-part3-Soundness-21135" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21136" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21138" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21139" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-21146" href="../Soundness/#plfa_plfa-part3-Soundness-21146" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-21149" href="../Soundness/#plfa_plfa-part3-Soundness-21149" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-21151" class="Symbol">)</a>
   <a id="plfa_plfa-part3-Soundness-21156" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-21161" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21163" href="../Soundness/#plfa_plfa-part3-Soundness-21163" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-21166" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-21168" href="../Soundness/#plfa_plfa-part3-Soundness-21168" class="Bound">M₂</a>
     <a id="plfa_plfa-part3-Soundness-21176" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21181" href="../Soundness/#plfa_plfa-part3-Soundness-20469" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21195" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21196" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-21198" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21200" href="../Soundness/#plfa_plfa-part3-Soundness-21163" class="Bound">M₁</a><a id="plfa_plfa-part3-Soundness-21202" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21204" href="../Soundness/#plfa_plfa-part3-Soundness-21146" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-21207" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-21212" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21214" href="../Soundness/#plfa_plfa-part3-Soundness-20469" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21228" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21229" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-21231" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21233" href="../Soundness/#plfa_plfa-part3-Soundness-21168" class="Bound">M₂</a><a id="plfa_plfa-part3-Soundness-21235" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21237" href="../Soundness/#plfa_plfa-part3-Soundness-21149" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-21240" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-21245" class="Symbol">...</a>     <a id="plfa_plfa-part3-Soundness-21253" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21255" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21257" href="../Soundness/#plfa_plfa-part3-Soundness-21257" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-21260" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21262" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21264" href="../Soundness/#plfa_plfa-part3-Soundness-21264" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-21273" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21275" href="../Soundness/#plfa_plfa-part3-Soundness-21275" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-21278" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21280" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21282" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21284" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21286" href="../Soundness/#plfa_plfa-part3-Soundness-21286" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-21289" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21291" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21293" href="../Soundness/#plfa_plfa-part3-Soundness-21293" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-21302" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21304" href="../Soundness/#plfa_plfa-part3-Soundness-21304" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-21307" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21309" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21311" class="Symbol">=</a>
     <a id="plfa_plfa-part3-Soundness-21318" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21320" href="../Soundness/#plfa_plfa-part3-Soundness-21257" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-21323" href="../Denotational/#plfa_plfa-part3-Denotational-9979" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-21326" href="../Soundness/#plfa_plfa-part3-Soundness-21286" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-21329" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21331" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21333" href="../Soundness/#plfa_plfa-part3-Soundness-19216" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-21341" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21342" class="Argument">γ₁</a> <a id="plfa_plfa-part3-Soundness-21345" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21347" href="../Soundness/#plfa_plfa-part3-Soundness-21257" class="Bound">δ₁</a><a id="plfa_plfa-part3-Soundness-21349" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21351" class="Argument">γ₂</a> <a id="plfa_plfa-part3-Soundness-21354" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21356" href="../Soundness/#plfa_plfa-part3-Soundness-21286" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-21358" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21360" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21362" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21364" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21365" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21367" href="../Soundness/#plfa_plfa-part3-Soundness-21264" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-21376" href="../Soundness/#plfa_plfa-part3-Soundness-21293" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-21385" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a>
                    <a id="plfa_plfa-part3-Soundness-21407" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-21414" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21415" href="../Denotational/#plfa_plfa-part3-Denotational-32332" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-21421" href="../Soundness/#plfa_plfa-part3-Soundness-21275" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-21424" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21425" href="../Denotational/#plfa_plfa-part3-Denotational-10610" class="Function">⊑-env-conj-R1</a> <a id="plfa_plfa-part3-Soundness-21439" href="../Soundness/#plfa_plfa-part3-Soundness-21257" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-21442" href="../Soundness/#plfa_plfa-part3-Soundness-21286" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-21444" class="Symbol">))</a>
                           <a id="plfa_plfa-part3-Soundness-21474" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21475" href="../Denotational/#plfa_plfa-part3-Denotational-32332" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-21481" href="../Soundness/#plfa_plfa-part3-Soundness-21304" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-21484" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21485" href="../Denotational/#plfa_plfa-part3-Denotational-10716" class="Function">⊑-env-conj-R2</a> <a id="plfa_plfa-part3-Soundness-21499" href="../Soundness/#plfa_plfa-part3-Soundness-21257" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-21502" href="../Soundness/#plfa_plfa-part3-Soundness-21286" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-21504" class="Symbol">))</a> <a id="plfa_plfa-part3-Soundness-21507" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21509" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a>

<a id="plfa_plfa-part3-Soundness-21512" href="../Soundness/#plfa_plfa-part3-Soundness-20469" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21526" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21527" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-21529" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21531" href="../Soundness/#plfa_plfa-part3-Soundness-21531" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-21532" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21534" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21536" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21538" href="../Soundness/#plfa_plfa-part3-Soundness-21538" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21539" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21541" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21542" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21550" href="../Soundness/#plfa_plfa-part3-Soundness-21550" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-21551" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21553" href="../Soundness/#plfa_plfa-part3-Soundness-21553" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-21557" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21562" href="../Soundness/#plfa_plfa-part3-Soundness-21531" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-21564" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-21571" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21573" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-21575" href="../Soundness/#plfa_plfa-part3-Soundness-21575" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-21577" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21582" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21583" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21591" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-21592" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-21594" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-21610" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21612" href="../Soundness/#plfa_plfa-part3-Soundness-21612" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-21615" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-21623" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-21627" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-21631" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21633" href="../Soundness/#plfa_plfa-part3-Soundness-18194" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-21651" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21652" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21654" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21656" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21657" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21659" href="../Soundness/#plfa_plfa-part3-Soundness-21612" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-21662" href="../Soundness/#plfa_plfa-part3-Soundness-20469" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21676" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21677" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21679" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21681" href="../Soundness/#plfa_plfa-part3-Soundness-21681" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21682" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21684" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21685" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21693" href="../Soundness/#plfa_plfa-part3-Soundness-21693" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-21694" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21696" href="../Soundness/#plfa_plfa-part3-Soundness-21696" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-21699" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21701" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-21703" href="../Soundness/#plfa_plfa-part3-Soundness-21703" class="Bound">M′</a>
      <a id="plfa_plfa-part3-Soundness-21712" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21717" href="../Soundness/#plfa_plfa-part3-Soundness-20469" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21731" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21732" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21734" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21736" href="../Untyped/#plfa_plfa-part2-Untyped-8601" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-21741" href="../Soundness/#plfa_plfa-part3-Soundness-21681" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21742" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21744" href="../Soundness/#plfa_plfa-part3-Soundness-21693" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-21746" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21747" href="../Soundness/#plfa_plfa-part3-Soundness-19526" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-21758" href="../Soundness/#plfa_plfa-part3-Soundness-21696" class="Bound">eq</a><a id="plfa_plfa-part3-Soundness-21760" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-21762" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-21766" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21768" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21770" href="../Soundness/#plfa_plfa-part3-Soundness-21770" class="Bound">δ′</a> <a id="plfa_plfa-part3-Soundness-21773" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21775" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21777" href="../Soundness/#plfa_plfa-part3-Soundness-21777" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-21787" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21789" href="../Soundness/#plfa_plfa-part3-Soundness-21789" class="Bound">m′</a> <a id="plfa_plfa-part3-Soundness-21792" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21794" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21796" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-21802" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21804" href="../Denotational/#plfa_plfa-part3-Denotational-9222" class="Function">init</a> <a id="plfa_plfa-part3-Soundness-21809" href="../Soundness/#plfa_plfa-part3-Soundness-21770" class="Bound">δ′</a> <a id="plfa_plfa-part3-Soundness-21812" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21814" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21816" class="Symbol">((λ</a> <a id="plfa_plfa-part3-Soundness-21820" href="../Soundness/#plfa_plfa-part3-Soundness-21820" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-21822" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-21824" href="../Soundness/#plfa_plfa-part3-Soundness-14699" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-21843" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21844" href="../Soundness/#plfa_plfa-part3-Soundness-21777" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-21854" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21855" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-21857" href="../Soundness/#plfa_plfa-part3-Soundness-21820" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-21858" class="Symbol">))))</a> <a id="plfa_plfa-part3-Soundness-21863" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a>
             <a id="plfa_plfa-part3-Soundness-21878" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21886" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21887" href="../Denotational/#plfa_plfa-part3-Denotational-32854" class="Function">up-env</a> <a id="plfa_plfa-part3-Soundness-21894" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21895" href="../Soundness/#plfa_plfa-part3-Soundness-20296" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-21901" href="../Soundness/#plfa_plfa-part3-Soundness-21789" class="Bound">m′</a><a id="plfa_plfa-part3-Soundness-21903" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21905" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21906" href="../Compositional/#plfa_plfa-part3-Compositional-12863" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-21914" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21915" href="../Soundness/#plfa_plfa-part3-Soundness-21777" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-21925" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a><a id="plfa_plfa-part3-Soundness-21926" class="Symbol">)))</a> <a id="plfa_plfa-part3-Soundness-21930" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21932" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-21934" href="../Soundness/#plfa_plfa-part3-Soundness-20469" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21948" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21949" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21957" href="../Soundness/#plfa_plfa-part3-Soundness-21957" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-21958" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21960" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-21963" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21965" href="../Soundness/#plfa_plfa-part3-Soundness-21965" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-21968" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-21970" href="../Soundness/#plfa_plfa-part3-Soundness-21970" class="Bound">M₂</a>

<a id="plfa_plfa-part3-Soundness-21974" href="../Soundness/#plfa_plfa-part3-Soundness-20469" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21988" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21989" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21991" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21993" href="../Soundness/#plfa_plfa-part3-Soundness-21993" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21994" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21996" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-22004" href="../Soundness/#plfa_plfa-part3-Soundness-22004" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-22007" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-22013" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22015" href="../Denotational/#plfa_plfa-part3-Denotational-9950" class="Function">`⊥</a> <a id="plfa_plfa-part3-Soundness-22018" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22020" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22022" href="../Soundness/#plfa_plfa-part3-Soundness-18890" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-22030" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22031" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-22033" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22035" href="../Soundness/#plfa_plfa-part3-Soundness-21993" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-22036" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22038" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22040" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-22048" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22050" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a>

<a id="plfa_plfa-part3-Soundness-22053" href="../Soundness/#plfa_plfa-part3-Soundness-20469" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-22067" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22068" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-22070" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22072" href="../Soundness/#plfa_plfa-part3-Soundness-22072" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-22073" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22075" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22076" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-22084" href="../Soundness/#plfa_plfa-part3-Soundness-22084" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22087" href="../Soundness/#plfa_plfa-part3-Soundness-22087" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22089" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22091" href="../Soundness/#plfa_plfa-part3-Soundness-22091" class="Bound">eq</a>
  <a id="plfa_plfa-part3-Soundness-22096" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-22101" href="../Soundness/#plfa_plfa-part3-Soundness-20469" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-22115" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22116" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-22118" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22120" href="../Soundness/#plfa_plfa-part3-Soundness-22072" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-22121" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22123" href="../Soundness/#plfa_plfa-part3-Soundness-22084" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22126" href="../Soundness/#plfa_plfa-part3-Soundness-22091" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-22129" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22131" href="../Soundness/#plfa_plfa-part3-Soundness-20469" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-22145" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22146" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-22148" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22150" href="../Soundness/#plfa_plfa-part3-Soundness-22072" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-22151" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22153" href="../Soundness/#plfa_plfa-part3-Soundness-22087" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-22156" href="../Soundness/#plfa_plfa-part3-Soundness-22091" class="Bound">eq</a>
<a id="plfa_plfa-part3-Soundness-22159" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-22163" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22165" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22167" href="../Soundness/#plfa_plfa-part3-Soundness-22167" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-22170" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22172" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22174" href="../Soundness/#plfa_plfa-part3-Soundness-22174" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-22183" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22185" href="../Soundness/#plfa_plfa-part3-Soundness-22185" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-22188" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22190" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22192" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22194" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22196" href="../Soundness/#plfa_plfa-part3-Soundness-22196" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-22199" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22201" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22203" href="../Soundness/#plfa_plfa-part3-Soundness-22203" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-22212" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22214" href="../Soundness/#plfa_plfa-part3-Soundness-22214" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-22217" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22219" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22221" class="Symbol">=</a>
     <a id="plfa_plfa-part3-Soundness-22228" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22230" href="../Soundness/#plfa_plfa-part3-Soundness-22167" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-22233" href="../Denotational/#plfa_plfa-part3-Denotational-9979" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-22236" href="../Soundness/#plfa_plfa-part3-Soundness-22196" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-22239" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22241" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22243" href="../Soundness/#plfa_plfa-part3-Soundness-19216" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-22251" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22252" class="Argument">γ₁</a> <a id="plfa_plfa-part3-Soundness-22255" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22257" href="../Soundness/#plfa_plfa-part3-Soundness-22167" class="Bound">δ₁</a><a id="plfa_plfa-part3-Soundness-22259" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-22261" class="Argument">γ₂</a> <a id="plfa_plfa-part3-Soundness-22264" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22266" href="../Soundness/#plfa_plfa-part3-Soundness-22196" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-22268" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-22270" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-22272" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22274" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-22275" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22277" href="../Soundness/#plfa_plfa-part3-Soundness-22174" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-22286" href="../Soundness/#plfa_plfa-part3-Soundness-22203" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-22295" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a>
                    <a id="plfa_plfa-part3-Soundness-22317" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-22325" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22326" href="../Denotational/#plfa_plfa-part3-Denotational-32332" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-22332" href="../Soundness/#plfa_plfa-part3-Soundness-22185" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-22335" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22336" href="../Denotational/#plfa_plfa-part3-Denotational-10610" class="Function">⊑-env-conj-R1</a> <a id="plfa_plfa-part3-Soundness-22350" href="../Soundness/#plfa_plfa-part3-Soundness-22167" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-22353" href="../Soundness/#plfa_plfa-part3-Soundness-22196" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-22355" class="Symbol">))</a>
                            <a id="plfa_plfa-part3-Soundness-22386" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22387" href="../Denotational/#plfa_plfa-part3-Denotational-32332" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-22393" href="../Soundness/#plfa_plfa-part3-Soundness-22214" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-22396" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22397" href="../Denotational/#plfa_plfa-part3-Denotational-10716" class="Function">⊑-env-conj-R2</a> <a id="plfa_plfa-part3-Soundness-22411" href="../Soundness/#plfa_plfa-part3-Soundness-22167" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-22414" href="../Soundness/#plfa_plfa-part3-Soundness-22196" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-22416" class="Symbol">))</a> <a id="plfa_plfa-part3-Soundness-22419" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22421" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-22423" href="../Soundness/#plfa_plfa-part3-Soundness-20469" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-22437" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22438" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-22442" href="../Soundness/#plfa_plfa-part3-Soundness-22442" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-22444" href="../Soundness/#plfa_plfa-part3-Soundness-22444" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-22446" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22448" href="../Soundness/#plfa_plfa-part3-Soundness-22448" class="Bound">eq</a>
    <a id="plfa_plfa-part3-Soundness-22455" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-22460" href="../Soundness/#plfa_plfa-part3-Soundness-20469" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-22474" href="../Soundness/#plfa_plfa-part3-Soundness-22442" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-22476" href="../Soundness/#plfa_plfa-part3-Soundness-22448" class="Bound">eq</a>
<a id="plfa_plfa-part3-Soundness-22479" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-22483" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22485" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22487" href="../Soundness/#plfa_plfa-part3-Soundness-22487" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-22489" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22491" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22493" href="../Soundness/#plfa_plfa-part3-Soundness-22493" class="Bound">subst-δ</a> <a id="plfa_plfa-part3-Soundness-22501" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22503" href="../Soundness/#plfa_plfa-part3-Soundness-22503" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-22505" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22507" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22509" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22511" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22513" href="../Soundness/#plfa_plfa-part3-Soundness-22487" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-22515" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22517" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22519" href="../Soundness/#plfa_plfa-part3-Soundness-22493" class="Bound">subst-δ</a> <a id="plfa_plfa-part3-Soundness-22527" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22529" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-22533" href="../Soundness/#plfa_plfa-part3-Soundness-22503" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-22535" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-22538" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22540" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a>
</pre><ul><li>情况 <code>var</code>：我们有 <code>subst σ M ≡ y</code>，因此 <code>M</code> 也必须是一个变量，称为 <code>x</code>。 我们应用引理 <code>subst-reflect-var</code> 得出结论。</li></ul><ul><li>情况 <code>↦-elim</code>：我们有 <code>subst σ M ≡ L₁ · L₂</code>，需要对 <code>M</code> 进行情况分析：<ul><li><p>情况 <code>M ≡ ` x</code>：我们再次应用 <code>subst-reflect-var</code> 得出结论。</p></li><li><p>情况 <code>M ≡ M₁ · M₂</code>：根据归纳假设，我们有某个 <code>δ₁</code> 和 <code>δ₂</code> 使得 <code>δ₁ ⊢ M₁ ↓ v₁ ↦ v₃</code> 和 <code>γ `⊢ σ ↓ δ₁</code>，以及 <code>δ₂ ⊢ M₂ ↓ v₁</code> 和 <code>γ `⊢ σ ↓ δ₂</code>。 根据 <code>⊑-env</code> 我们有 <code>δ₁ ⊔ δ₂ ⊢ M₁ ↓ v₁ ↦ v₃</code> 和 <code>δ₁ ⊔ δ₂ ⊢ M₂ ↓ v₁</code> （使用 <code>⊑-env-conj-R1</code> 和 <code>⊑-env-conj-R2</code> 得出），因此 <code>δ₁ ⊔ δ₂ ⊢ M₁ · M₂ ↓ v₃</code>。 我们通过 <code>subst-⊔</code> 引理得出 <code>γ `⊢ σ ↓ δ₁ ⊔ δ₂</code> 从而证明此情况。</p></li></ul></li></ul><ul><li>情况 <code>↦-intro</code>：我们有 <code>subst σ M ≡ ƛ L′</code>，需要对 <code>M</code> 进行情况分析：<ul><li><p>情况 <code>M ≡ x</code>：我们应用 <code>subst-reflect-var</code> 引理。</p></li><li><p>情况 <code>M ≡ ƛ M′</code>：根据归纳假设，我们有 <code>(δ′ , v′) ⊢ M′ ↓ v₂</code> 和 <code>(δ , v₁) ⊢ exts σ ↓ (δ′ , v′)</code>。根据后者可得 <code>(δ , v₁) ⊢ # 0 ↓ v′</code>。 根据引理 <code>var-inv</code> 我们有 <code>v′ ⊑ v₁</code>，于是根据 <code>up-env</code> 引理我们有 <code>(δ′ , v₁) ⊢ M′ ↓ v₂</code>，因此 <code>δ′ ⊢ ƛ M′ ↓ v₁ → v₂</code>。我们还需要证明 <code>δ ⊢ σ ↓ δ′</code>。固定 <code>k</code>，我们有 <code>(δ , v₁) ⊢ rename S_ σ k ↓ δ k′</code>， 接着应用引理 <code>rename-inc-reflect</code> 可得 <code>δ ⊢ σ k ↓ δ k′</code>，于是此情况证明完毕。</p></li></ul></li></ul><ul><li>情况 <code>⊥-intro</code>：我们为 <code>δ</code> 选择<code>⊥</code>。 根据 <code>⊥-intro</code> 我们有 <code>⊥ ⊢ M ↓ ⊥</code>。 根据 <code>subst-⊥</code> 引理有 <code>δ `⊢ σ ↓ `⊥</code>。</li></ul><ul><li>情况 <code>⊔-intro</code>：根据归纳假设我们有 <code>δ₁ ⊢ M ↓ v₁</code>、<code>δ₂ ⊢ M ↓ v₂</code>、 <code>δ `⊢ σ ↓ δ₁</code> 和 <code>δ `⊢ σ ↓ δ₂</code>。 根据 <code>⊑-env</code>、<code>⊑-env-conj-R1</code> 和 <code>⊑-env-conj-R2</code> 我们有 <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₁</code> 和 <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₂</code>，因此根据 <code>⊔-intro</code> 可得 <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₁ ⊔ v₂</code>。 根据 <code>subst-⊔</code> 可得 <code>δ `⊢ σ ↓ δ₁ ⊔ δ₂</code>。</li></ul><h3 id="单一代换反映了指称不变">单一代换反映了指称不变</h3><p>现在大部分工作已经完成，我们已经证明了同时代换反映了指称不变。当然，β-归约使用单一代换， 因此我们需要一个推论来证明单一代换反映了指称不变。也就是说，给定项 <code>N : (Γ , ★ ⊢ ★)</code> 和 <code>M : (Γ ⊢ ★)</code>，若 <code>γ ⊢ N [ M ] ↓ w</code>，则对于某个值 <code>v</code> 有 <code>γ ⊢ M ↓ v</code> 且 <code>( γ , v) ⊢ N ↓ w</code> 。于是我们有 <code>N [ M ] = subst (subst-zero M) N</code>。</p><p>我们首先证明一个关于 <code>subst-zero</code> 的引理，即若 <code>δ ⊢ subst-zero M ↓ γ</code>，则对某个值 <code>w</code>，有 <code>γ `⊑ (δ , w) × δ ⊢ M ↓ w</code>。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-zero-reflect"></a><a id="plfa_plfa-part3-Soundness-26796" href="../Soundness/#plfa_plfa-part3-Soundness-26796" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-26815" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-26817" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-26819" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-26820" href="../Soundness/#plfa_plfa-part3-Soundness-26820" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-26821" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-26823" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-26824" href="../Soundness/#plfa_plfa-part3-Soundness-26824" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-26826" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-26828" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-26832" href="../Soundness/#plfa_plfa-part3-Soundness-26820" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-26833" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-26835" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-26836" href="../Soundness/#plfa_plfa-part3-Soundness-26836" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-26838" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-26840" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-26844" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-26845" href="../Soundness/#plfa_plfa-part3-Soundness-26820" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-26847" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-26849" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-26850" class="Symbol">)}</a> <a id="plfa_plfa-part3-Soundness-26853" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-26854" href="../Soundness/#plfa_plfa-part3-Soundness-26854" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-26856" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-26858" href="../Soundness/#plfa_plfa-part3-Soundness-26820" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-26860" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-26862" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-26863" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-26867" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-26869" href="../Soundness/#plfa_plfa-part3-Soundness-26824" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-26871" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-26874" href="../Untyped/#plfa_plfa-part2-Untyped-9458" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-26885" href="../Soundness/#plfa_plfa-part3-Soundness-26854" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-26887" href="../Soundness/#plfa_plfa-part3-Soundness-4056" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-26889" href="../Soundness/#plfa_plfa-part3-Soundness-26836" class="Bound">γ</a>
    <a id="plfa_plfa-part3-Soundness-26895" class="Comment">----------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-26938" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-26940" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-26943" href="../Soundness/#plfa_plfa-part3-Soundness-26943" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-26945" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-26947" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-26953" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-26955" href="../Soundness/#plfa_plfa-part3-Soundness-26836" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-26957" href="../Denotational/#plfa_plfa-part3-Denotational-9696" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-26960" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-26961" href="../Soundness/#plfa_plfa-part3-Soundness-26824" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-26963" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-26966" href="../Soundness/#plfa_plfa-part3-Soundness-26943" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-26967" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-26969" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Soundness-26971" href="../Soundness/#plfa_plfa-part3-Soundness-26824" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-26973" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-26975" href="../Soundness/#plfa_plfa-part3-Soundness-26854" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-26977" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-26979" href="../Soundness/#plfa_plfa-part3-Soundness-26943" class="Bound">w</a>
<a id="plfa_plfa-part3-Soundness-26981" href="../Soundness/#plfa_plfa-part3-Soundness-26796" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-27000" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27001" class="Argument">δ</a> <a id="plfa_plfa-part3-Soundness-27003" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-27005" href="../Soundness/#plfa_plfa-part3-Soundness-27005" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-27006" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-27008" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27009" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-27011" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-27013" href="../Soundness/#plfa_plfa-part3-Soundness-27013" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-27014" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-27016" href="../Soundness/#plfa_plfa-part3-Soundness-27016" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-27020" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-27022" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-27024" href="../Denotational/#plfa_plfa-part3-Denotational-9277" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-27029" href="../Soundness/#plfa_plfa-part3-Soundness-27013" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-27031" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-27033" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-27035" href="../Soundness/#plfa_plfa-part3-Soundness-27063" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-27041" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-27043" href="../Soundness/#plfa_plfa-part3-Soundness-27016" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-27047" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-27049" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-27051" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Soundness-27055" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-27063" href="../Soundness/#plfa_plfa-part3-Soundness-27063" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-27069" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-27071" href="../Soundness/#plfa_plfa-part3-Soundness-27013" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-27073" href="../Denotational/#plfa_plfa-part3-Denotational-9696" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-27076" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-27077" href="../Soundness/#plfa_plfa-part3-Soundness-27005" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-27079" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-27082" href="../Denotational/#plfa_plfa-part3-Denotational-9277" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-27087" href="../Soundness/#plfa_plfa-part3-Soundness-27013" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-27088" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-27092" href="../Soundness/#plfa_plfa-part3-Soundness-27063" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-27098" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-27101" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-27104" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a>
  <a id="plfa_plfa-part3-Soundness-27113" href="../Soundness/#plfa_plfa-part3-Soundness-27063" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-27119" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-27120" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-27122" href="../Soundness/#plfa_plfa-part3-Soundness-27122" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-27123" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-27125" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-27127" href="../Compositional/#plfa_plfa-part3-Compositional-12863" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-27135" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-27136" href="../Soundness/#plfa_plfa-part3-Soundness-27016" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-27140" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-27141" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-27143" href="../Soundness/#plfa_plfa-part3-Soundness-27122" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-27144" class="Symbol">))</a>
</pre><p>我们选择 <code>w</code> 作为 <code>γ</code> 中的最后一个值，通过将前提应用到 <code>Z</code> 可得 <code>δ ⊢ M ↓ w</code>。 最后，要证明 <code>γ `⊑ (δ , w)</code>，我们需要在输入项中通过归纳来证明一个引理。 由于我们选择了 <code>w</code>，因此基本的情况是平凡的。在归纳的情况中 <code>S x</code> 中， 前提 <code>δ ⊢ subst-zero M ↓ γ</code> 给出了 <code>δ ⊢ x ↓ γ (S x)</code>，接着使用 <code>var-inv</code> 可得 <code>γ (S x) ⊑ (δ `, w) (S x)</code>。</p><p>现在证明代换反映了指称不变：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-substitution-reflect"></a><a id="plfa_plfa-part3-Soundness-27911" href="../Soundness/#plfa_plfa-part3-Soundness-27911" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-27932" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-27934" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-27936" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27937" href="../Soundness/#plfa_plfa-part3-Soundness-27937" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-27938" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-27940" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27941" href="../Soundness/#plfa_plfa-part3-Soundness-27941" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-27943" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-27945" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-27949" href="../Soundness/#plfa_plfa-part3-Soundness-27937" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-27950" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-27952" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27953" href="../Soundness/#plfa_plfa-part3-Soundness-27953" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-27955" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-27957" href="../Soundness/#plfa_plfa-part3-Soundness-27937" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-27959" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-27961" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-27963" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-27965" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-27966" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-27968" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27969" href="../Soundness/#plfa_plfa-part3-Soundness-27969" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-27971" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-27973" href="../Soundness/#plfa_plfa-part3-Soundness-27937" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-27975" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-27977" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-27978" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-27980" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27981" href="../Soundness/#plfa_plfa-part3-Soundness-27981" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-27982" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-27986" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-27988" href="../Soundness/#plfa_plfa-part3-Soundness-27941" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-27990" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-27992" href="../Soundness/#plfa_plfa-part3-Soundness-27953" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-27994" href="../Untyped/#plfa_plfa-part2-Untyped-9574" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-27996" href="../Soundness/#plfa_plfa-part3-Soundness-27969" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-27998" href="../Untyped/#plfa_plfa-part2-Untyped-9574" class="Function Operator">]</a> <a id="plfa_plfa-part3-Soundness-28000" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-28002" href="../Soundness/#plfa_plfa-part3-Soundness-27981" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-28008" class="Comment">------------------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-28059" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-28061" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-28064" href="../Soundness/#plfa_plfa-part3-Soundness-28064" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-28066" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-28068" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-28074" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-28076" href="../Soundness/#plfa_plfa-part3-Soundness-27941" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-28078" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-28080" href="../Soundness/#plfa_plfa-part3-Soundness-27969" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-28082" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-28084" href="../Soundness/#plfa_plfa-part3-Soundness-28064" class="Bound">w</a>  <a id="plfa_plfa-part3-Soundness-28087" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-28090" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-28091" href="../Soundness/#plfa_plfa-part3-Soundness-27941" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-28093" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-28096" href="../Soundness/#plfa_plfa-part3-Soundness-28064" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-28097" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-28099" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-28101" href="../Soundness/#plfa_plfa-part3-Soundness-27953" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-28103" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-28105" href="../Soundness/#plfa_plfa-part3-Soundness-27981" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-28107" href="../Soundness/#plfa_plfa-part3-Soundness-27911" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-28128" href="../Soundness/#plfa_plfa-part3-Soundness-28128" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-28130" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-28135" href="../Soundness/#plfa_plfa-part3-Soundness-20469" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-28149" href="../Soundness/#plfa_plfa-part3-Soundness-28128" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-28151" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-28156" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-28161" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-28163" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28165" href="../Soundness/#plfa_plfa-part3-Soundness-28165" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-28167" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28169" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28171" href="../Soundness/#plfa_plfa-part3-Soundness-28171" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-28175" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28177" href="../Soundness/#plfa_plfa-part3-Soundness-28177" class="Bound">γNv</a> <a id="plfa_plfa-part3-Soundness-28181" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-28183" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-28185" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-28190" href="../Soundness/#plfa_plfa-part3-Soundness-26796" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-28209" href="../Soundness/#plfa_plfa-part3-Soundness-28171" class="Bound">δσγ</a>
<a id="plfa_plfa-part3-Soundness-28213" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-28220" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-28222" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28224" href="../Soundness/#plfa_plfa-part3-Soundness-28224" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-28226" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28228" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28230" href="../Soundness/#plfa_plfa-part3-Soundness-28230" class="Bound">ineq</a> <a id="plfa_plfa-part3-Soundness-28235" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28237" href="../Soundness/#plfa_plfa-part3-Soundness-28237" class="Bound">δMw</a> <a id="plfa_plfa-part3-Soundness-28241" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-28243" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-28245" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-28247" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28249" href="../Soundness/#plfa_plfa-part3-Soundness-28224" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-28251" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28253" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28255" href="../Soundness/#plfa_plfa-part3-Soundness-28237" class="Bound">δMw</a> <a id="plfa_plfa-part3-Soundness-28259" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28261" href="../Denotational/#plfa_plfa-part3-Denotational-32332" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-28267" class="Bound">γNv</a> <a id="plfa_plfa-part3-Soundness-28271" href="../Soundness/#plfa_plfa-part3-Soundness-28230" class="Bound">ineq</a> <a id="plfa_plfa-part3-Soundness-28276" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-28278" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a>
</pre><p>我们应用 <code>subst-reflect</code> 引理可得对于某个 <code>γ</code> 有 <code>δ ⊢ subst-zero M ↓ γ</code> 和 <code>γ ⊢ N ↓ v</code>。通过使用前者，<code>subst-zero-reflect</code> 给出了 <code>γ `⊑ (δ , w)</code> 和 <code>δ ⊢ M ↓ w</code>。我们通过应用 <code>⊑-env</code> 引理，使用 <code>γ ⊢ N ↓ v</code> 和 <code>γ `⊑ (δ , w)</code> 可得 <code>δ , w ⊢ N ↓ v</code>。</p><h3 id="归约反映了指称不变-1">归约反映了指称不变</h3><p>现在我们已经证明了代换反映了指称不变，可以很容易地证明归约也拥有此性质：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-reflect-beta"></a><a id="plfa_plfa-part3-Soundness-29032" href="../Soundness/#plfa_plfa-part3-Soundness-29032" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-29045" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-29047" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-29049" href="../Soundness/#plfa_plfa-part3-Soundness-29049" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-29050" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-29052" href="../Soundness/#plfa_plfa-part3-Soundness-29052" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-29054" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-29056" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-29060" href="../Soundness/#plfa_plfa-part3-Soundness-29049" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-29061" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-29063" href="../Soundness/#plfa_plfa-part3-Soundness-29063" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29065" href="../Soundness/#plfa_plfa-part3-Soundness-29065" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-29066" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-29068" href="../Soundness/#plfa_plfa-part3-Soundness-29068" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-29069" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Soundness-29075" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-29077" href="../Soundness/#plfa_plfa-part3-Soundness-29052" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-29079" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-29081" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29082" href="../Soundness/#plfa_plfa-part3-Soundness-29065" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-29084" href="../Untyped/#plfa_plfa-part2-Untyped-9574" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-29086" href="../Soundness/#plfa_plfa-part3-Soundness-29063" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29088" href="../Untyped/#plfa_plfa-part2-Untyped-9574" class="Function Operator">]</a><a id="plfa_plfa-part3-Soundness-29089" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29091" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-29093" href="../Soundness/#plfa_plfa-part3-Soundness-29068" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-29099" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-29101" href="../Soundness/#plfa_plfa-part3-Soundness-29052" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-29103" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-29105" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29106" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-29108" href="../Soundness/#plfa_plfa-part3-Soundness-29065" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-29109" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29111" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-29113" href="../Soundness/#plfa_plfa-part3-Soundness-29063" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29115" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-29117" href="../Soundness/#plfa_plfa-part3-Soundness-29068" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-29119" href="../Soundness/#plfa_plfa-part3-Soundness-29032" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-29132" href="../Soundness/#plfa_plfa-part3-Soundness-29132" class="Bound">d</a>
    <a id="plfa_plfa-part3-Soundness-29138" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-29143" href="../Soundness/#plfa_plfa-part3-Soundness-27911" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-29164" href="../Soundness/#plfa_plfa-part3-Soundness-29132" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-29166" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-29170" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-29172" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-29174" href="../Soundness/#plfa_plfa-part3-Soundness-29174" class="Bound">v₂′</a> <a id="plfa_plfa-part3-Soundness-29178" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-29180" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-29182" href="../Soundness/#plfa_plfa-part3-Soundness-29182" class="Bound">d₁′</a> <a id="plfa_plfa-part3-Soundness-29186" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-29188" href="../Soundness/#plfa_plfa-part3-Soundness-29188" class="Bound">d₂′</a> <a id="plfa_plfa-part3-Soundness-29192" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-29194" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-29196" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29198" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29205" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29206" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29214" href="../Soundness/#plfa_plfa-part3-Soundness-29188" class="Bound">d₂′</a><a id="plfa_plfa-part3-Soundness-29217" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29219" href="../Soundness/#plfa_plfa-part3-Soundness-29182" class="Bound">d₁′</a>


<a id="plfa_plfa-part3-Soundness-reflect"></a><a id="plfa_plfa-part3-Soundness-29225" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29233" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-29235" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-29237" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29238" href="../Soundness/#plfa_plfa-part3-Soundness-29238" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-29239" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-29241" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29242" href="../Soundness/#plfa_plfa-part3-Soundness-29242" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-29244" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-29246" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-29250" href="../Soundness/#plfa_plfa-part3-Soundness-29238" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-29251" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-29253" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29254" href="../Soundness/#plfa_plfa-part3-Soundness-29254" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29256" href="../Soundness/#plfa_plfa-part3-Soundness-29256" class="Bound">M′</a> <a id="plfa_plfa-part3-Soundness-29259" href="../Soundness/#plfa_plfa-part3-Soundness-29259" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-29261" href="../Soundness/#plfa_plfa-part3-Soundness-29261" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-29262" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-29266" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-29268" href="../Soundness/#plfa_plfa-part3-Soundness-29242" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-29270" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-29272" href="../Soundness/#plfa_plfa-part3-Soundness-29259" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-29274" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-29276" href="../Soundness/#plfa_plfa-part3-Soundness-29261" class="Bound">v</a>  <a id="plfa_plfa-part3-Soundness-29279" class="Symbol">→</a>  <a id="plfa_plfa-part3-Soundness-29282" href="../Soundness/#plfa_plfa-part3-Soundness-29254" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29284" href="../Untyped/#plfa_plfa-part2-Untyped-12874" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-29287" href="../Soundness/#plfa_plfa-part3-Soundness-29256" class="Bound">M′</a>  <a id="plfa_plfa-part3-Soundness-29291" class="Symbol">→</a>   <a id="plfa_plfa-part3-Soundness-29295" href="../Soundness/#plfa_plfa-part3-Soundness-29256" class="Bound">M′</a> <a id="plfa_plfa-part3-Soundness-29298" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-29300" href="../Soundness/#plfa_plfa-part3-Soundness-29259" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-29306" class="Comment">---------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-29342" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-29344" href="../Soundness/#plfa_plfa-part3-Soundness-29242" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-29346" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-29348" href="../Soundness/#plfa_plfa-part3-Soundness-29254" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29350" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-29352" href="../Soundness/#plfa_plfa-part3-Soundness-29261" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-29354" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29362" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-29366" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29367" href="../Untyped/#plfa_plfa-part2-Untyped-12924" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-29370" href="../Soundness/#plfa_plfa-part3-Soundness-29370" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29371" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29373" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29376" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29384" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-29388" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29389" href="../Untyped/#plfa_plfa-part2-Untyped-13014" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-29392" href="../Soundness/#plfa_plfa-part3-Soundness-29392" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29393" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29395" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29398" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a><a id="plfa_plfa-part3-Soundness-29405" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29406" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-29408" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29410" href="../Soundness/#plfa_plfa-part3-Soundness-29410" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-29411" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-29413" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29414" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-29417" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29418" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-29420" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29422" href="../Soundness/#plfa_plfa-part3-Soundness-29422" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-29423" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-29426" href="../Untyped/#plfa_plfa-part2-Untyped-13104" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-29428" href="../Soundness/#plfa_plfa-part3-Soundness-29428" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-29435" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-29440" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-29443" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29444" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-29446" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29448" href="../Soundness/#plfa_plfa-part3-Soundness-29410" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-29449" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-29451" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-29453" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29455" href="../Soundness/#plfa_plfa-part3-Soundness-29422" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-29456" class="Symbol">}</a>
<a id="plfa_plfa-part3-Soundness-29458" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-29462" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-29464" href="../Soundness/#plfa_plfa-part3-Soundness-29464" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-29467" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-29475" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-29479" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-29482" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29484" href="../Soundness/#plfa_plfa-part3-Soundness-29032" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-29497" href="../Soundness/#plfa_plfa-part3-Soundness-29464" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-29500" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29508" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-29512" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29513" href="../Untyped/#plfa_plfa-part2-Untyped-13212" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-29515" href="../Soundness/#plfa_plfa-part3-Soundness-29515" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29516" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29518" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29521" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29529" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29530" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29537" href="../Soundness/#plfa_plfa-part3-Soundness-29537" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29540" href="../Soundness/#plfa_plfa-part3-Soundness-29540" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-29542" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29544" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29545" href="../Untyped/#plfa_plfa-part2-Untyped-12924" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-29548" href="../Soundness/#plfa_plfa-part3-Soundness-29548" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29549" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29551" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-29556" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29558" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29565" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29566" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29574" href="../Soundness/#plfa_plfa-part3-Soundness-29537" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29577" href="../Soundness/#plfa_plfa-part3-Soundness-29548" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-29579" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-29583" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29585" href="../Soundness/#plfa_plfa-part3-Soundness-29540" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-29588" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29596" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29597" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29604" href="../Soundness/#plfa_plfa-part3-Soundness-29604" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29607" href="../Soundness/#plfa_plfa-part3-Soundness-29607" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-29609" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29611" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29612" href="../Untyped/#plfa_plfa-part2-Untyped-13014" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-29615" href="../Soundness/#plfa_plfa-part3-Soundness-29615" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29616" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29618" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-29623" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29625" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29632" href="../Soundness/#plfa_plfa-part3-Soundness-29604" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29635" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29636" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29644" href="../Soundness/#plfa_plfa-part3-Soundness-29607" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-29647" href="../Soundness/#plfa_plfa-part3-Soundness-29615" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-29649" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-29653" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-29655" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29663" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29664" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29671" href="../Soundness/#plfa_plfa-part3-Soundness-29671" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29674" href="../Soundness/#plfa_plfa-part3-Soundness-29674" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-29676" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29678" href="../Untyped/#plfa_plfa-part2-Untyped-13104" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-29680" href="../Soundness/#plfa_plfa-part3-Soundness-29680" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-29687" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-29692" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29699" href="../Soundness/#plfa_plfa-part3-Soundness-29671" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29702" href="../Soundness/#plfa_plfa-part3-Soundness-29674" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-29705" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-29709" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-29711" href="../Soundness/#plfa_plfa-part3-Soundness-29711" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-29714" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-29722" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-29726" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-29729" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29731" href="../Soundness/#plfa_plfa-part3-Soundness-29032" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-29744" href="../Soundness/#plfa_plfa-part3-Soundness-29711" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-29747" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29755" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29756" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29763" href="../Soundness/#plfa_plfa-part3-Soundness-29763" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29766" href="../Soundness/#plfa_plfa-part3-Soundness-29766" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-29768" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29770" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29771" href="../Untyped/#plfa_plfa-part2-Untyped-13212" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-29773" href="../Soundness/#plfa_plfa-part3-Soundness-29773" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29774" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29776" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29779" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29787" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29788" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29796" href="../Soundness/#plfa_plfa-part3-Soundness-29796" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-29797" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29799" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29800" href="../Untyped/#plfa_plfa-part2-Untyped-12924" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-29803" href="../Soundness/#plfa_plfa-part3-Soundness-29803" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29804" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29806" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29809" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29817" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29818" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29826" href="../Soundness/#plfa_plfa-part3-Soundness-29826" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-29827" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29829" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29830" href="../Untyped/#plfa_plfa-part2-Untyped-13014" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-29833" href="../Soundness/#plfa_plfa-part3-Soundness-29833" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29834" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29836" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29839" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29847" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29848" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29856" href="../Soundness/#plfa_plfa-part3-Soundness-29856" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-29857" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29859" href="../Untyped/#plfa_plfa-part2-Untyped-13104" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-29861" href="../Soundness/#plfa_plfa-part3-Soundness-29861" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-29868" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-29873" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29881" href="../Soundness/#plfa_plfa-part3-Soundness-29856" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-29883" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-29887" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-29889" href="../Soundness/#plfa_plfa-part3-Soundness-29889" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-29892" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-29900" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-29904" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-29907" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29909" href="../Soundness/#plfa_plfa-part3-Soundness-29032" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-29922" href="../Soundness/#plfa_plfa-part3-Soundness-29889" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-29925" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29933" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29934" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29942" href="../Soundness/#plfa_plfa-part3-Soundness-29942" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-29943" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29945" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29946" href="../Untyped/#plfa_plfa-part2-Untyped-13212" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-29948" href="../Soundness/#plfa_plfa-part3-Soundness-29948" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29949" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29951" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-29956" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29958" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29966" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29967" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29975" href="../Soundness/#plfa_plfa-part3-Soundness-29942" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-29977" href="../Soundness/#plfa_plfa-part3-Soundness-29948" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-29979" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-29983" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-29985" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29993" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-30001" href="../Soundness/#plfa_plfa-part3-Soundness-30001" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30003" href="../Soundness/#plfa_plfa-part3-Soundness-30003" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-30006" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-30008" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-30016" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-30024" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30025" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-30033" href="../Soundness/#plfa_plfa-part3-Soundness-30033" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-30036" href="../Soundness/#plfa_plfa-part3-Soundness-30036" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-30038" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30040" href="../Soundness/#plfa_plfa-part3-Soundness-30040" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30042" href="../Soundness/#plfa_plfa-part3-Soundness-30042" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-30045" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-30053" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-30057" href="../Soundness/#plfa_plfa-part3-Soundness-30042" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-30060" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-30065" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-30073" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30074" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-30082" href="../Soundness/#plfa_plfa-part3-Soundness-30033" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-30085" href="../Soundness/#plfa_plfa-part3-Soundness-30040" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30087" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-30091" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30093" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30094" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-30102" href="../Soundness/#plfa_plfa-part3-Soundness-30036" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-30105" href="../Soundness/#plfa_plfa-part3-Soundness-30040" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30107" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-30111" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-30113" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-30121" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30122" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-30126" href="../Soundness/#plfa_plfa-part3-Soundness-30126" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-30128" href="../Soundness/#plfa_plfa-part3-Soundness-30128" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-30130" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30132" href="../Soundness/#plfa_plfa-part3-Soundness-30132" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30134" href="../Soundness/#plfa_plfa-part3-Soundness-30134" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-30137" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-30139" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-30143" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30144" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-30152" href="../Soundness/#plfa_plfa-part3-Soundness-30126" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-30154" href="../Soundness/#plfa_plfa-part3-Soundness-30132" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30156" href="../Soundness/#plfa_plfa-part3-Soundness-30134" class="Bound">mn</a><a id="plfa_plfa-part3-Soundness-30158" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30160" href="../Soundness/#plfa_plfa-part3-Soundness-30128" class="Bound">lt</a>
</pre><h2 id="归约蕴含指称等价">归约蕴含指称等价</h2><p>我们已经证明了归约保持并反映了指称不变，因此归约蕴含指称等价：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-reduce-equal"></a><a id="plfa_plfa-part3-Soundness-30403" href="../Soundness/#plfa_plfa-part3-Soundness-30403" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-30416" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30418" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-30420" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30421" href="../Soundness/#plfa_plfa-part3-Soundness-30421" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-30422" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30424" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30425" href="../Soundness/#plfa_plfa-part3-Soundness-30425" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30427" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30429" href="../Soundness/#plfa_plfa-part3-Soundness-30421" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-30431" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-30433" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-30434" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30436" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30437" href="../Soundness/#plfa_plfa-part3-Soundness-30437" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-30439" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30441" href="../Soundness/#plfa_plfa-part3-Soundness-30421" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-30443" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-30445" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-30446" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-30450" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30452" href="../Soundness/#plfa_plfa-part3-Soundness-30425" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30454" href="../Untyped/#plfa_plfa-part2-Untyped-12874" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-30457" href="../Soundness/#plfa_plfa-part3-Soundness-30437" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-30463" class="Comment">---------</a>
  <a id="plfa_plfa-part3-Soundness-30475" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30477" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-30479" href="../Soundness/#plfa_plfa-part3-Soundness-30425" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30481" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Soundness-30483" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-30485" href="../Soundness/#plfa_plfa-part3-Soundness-30437" class="Bound">N</a>
<a id="plfa_plfa-part3-Soundness-30487" href="../Soundness/#plfa_plfa-part3-Soundness-30403" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-30500" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30501" href="../Soundness/#plfa_plfa-part3-Soundness-30501" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-30502" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-30504" href="../Soundness/#plfa_plfa-part3-Soundness-30504" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-30505" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-30507" href="../Soundness/#plfa_plfa-part3-Soundness-30507" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-30508" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30510" href="../Soundness/#plfa_plfa-part3-Soundness-30510" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30512" href="../Soundness/#plfa_plfa-part3-Soundness-30512" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-30514" href="../Soundness/#plfa_plfa-part3-Soundness-30514" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-30516" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-30522" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-30524" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-30527" href="../Soundness/#plfa_plfa-part3-Soundness-30527" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-30529" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30531" href="../Soundness/#plfa_plfa-part3-Soundness-8645" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-30540" href="../Soundness/#plfa_plfa-part3-Soundness-30527" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-30542" href="../Soundness/#plfa_plfa-part3-Soundness-30510" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-30543" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30545" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-30547" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-30550" href="../Soundness/#plfa_plfa-part3-Soundness-30550" class="Bound">n</a> <a id="plfa_plfa-part3-Soundness-30552" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30554" href="../Soundness/#plfa_plfa-part3-Soundness-29225" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-30562" href="../Soundness/#plfa_plfa-part3-Soundness-30550" class="Bound">n</a> <a id="plfa_plfa-part3-Soundness-30564" href="../Soundness/#plfa_plfa-part3-Soundness-30510" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30566" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-30570" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30572" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a>
</pre><p>最终我们就得到了<strong>可靠性（Soundness Property）</strong>，即多步归约到一个 λ-抽象，蕴含指称等价于该 λ-抽象。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-soundness"></a><a id="plfa_plfa-part3-Soundness-30816" href="../Soundness/#plfa_plfa-part3-Soundness-30816" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-30826" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30828" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-30830" href="../Soundness/#plfa_plfa-part3-Soundness-30830" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-30831" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30833" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30834" href="../Soundness/#plfa_plfa-part3-Soundness-30834" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30836" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30838" href="../Soundness/#plfa_plfa-part3-Soundness-30830" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-30840" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-30842" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-30843" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30845" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30846" href="../Soundness/#plfa_plfa-part3-Soundness-30846" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-30848" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30850" href="../Soundness/#plfa_plfa-part3-Soundness-30830" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-30852" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-30854" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-30856" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-30858" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-30859" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-30863" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30865" href="../Soundness/#plfa_plfa-part3-Soundness-30834" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30867" href="../Untyped/#plfa_plfa-part2-Untyped-14270" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part3-Soundness-30870" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-30872" href="../Soundness/#plfa_plfa-part3-Soundness-30846" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-30878" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Soundness-30898" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30900" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-30902" href="../Soundness/#plfa_plfa-part3-Soundness-30834" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30904" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Soundness-30906" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-30908" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30909" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-30911" href="../Soundness/#plfa_plfa-part3-Soundness-30846" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-30912" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-30914" href="../Soundness/#plfa_plfa-part3-Soundness-30816" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-30924" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30925" class="DottedPattern Symbol">.(</a><a id="plfa_plfa-part3-Soundness-30927" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="DottedPattern InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-30929" class="DottedPattern Symbol">_)</a> <a id="plfa_plfa-part3-Soundness-30932" href="../Untyped/#plfa_plfa-part2-Untyped-14316" class="InductiveConstructor Operator">∎</a><a id="plfa_plfa-part3-Soundness-30933" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30935" href="../Soundness/#plfa_plfa-part3-Soundness-30935" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-30937" href="../Soundness/#plfa_plfa-part3-Soundness-30937" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-30939" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-30941" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-30943" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-30946" href="../Soundness/#plfa_plfa-part3-Soundness-30946" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-30948" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30950" href="../Soundness/#plfa_plfa-part3-Soundness-30946" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-30951" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30953" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-30955" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-30958" href="../Soundness/#plfa_plfa-part3-Soundness-30958" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-30960" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30962" href="../Soundness/#plfa_plfa-part3-Soundness-30958" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-30963" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30965" href="../Soundness/#plfa_plfa-part3-Soundness-1729" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-30967" href="../Soundness/#plfa_plfa-part3-Soundness-30816" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-30977" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30978" href="../Soundness/#plfa_plfa-part3-Soundness-30978" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-30979" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30981" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30982" href="../Soundness/#plfa_plfa-part3-Soundness-30982" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-30984" href="../Untyped/#plfa_plfa-part2-Untyped-14458" class="InductiveConstructor Operator">—→⟨</a> <a id="plfa_plfa-part3-Soundness-30988" href="../Soundness/#plfa_plfa-part3-Soundness-30988" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30990" href="../Untyped/#plfa_plfa-part2-Untyped-14458" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-30992" href="../Soundness/#plfa_plfa-part3-Soundness-30992" class="Bound">M—↠N</a><a id="plfa_plfa-part3-Soundness-30996" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30998" href="../Soundness/#plfa_plfa-part3-Soundness-30998" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-31000" href="../Soundness/#plfa_plfa-part3-Soundness-31000" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-31002" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-31007" class="Keyword">let</a> <a id="plfa_plfa-part3-Soundness-31011" href="../Soundness/#plfa_plfa-part3-Soundness-31011" class="Bound">ih</a> <a id="plfa_plfa-part3-Soundness-31014" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-31016" href="../Soundness/#plfa_plfa-part3-Soundness-30816" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-31026" href="../Soundness/#plfa_plfa-part3-Soundness-30992" class="Bound">M—↠N</a> <a id="plfa_plfa-part3-Soundness-31031" class="Keyword">in</a>
   <a id="plfa_plfa-part3-Soundness-31037" class="Keyword">let</a> <a id="plfa_plfa-part3-Soundness-31041" href="../Soundness/#plfa_plfa-part3-Soundness-31041" class="Bound">e</a> <a id="plfa_plfa-part3-Soundness-31043" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-31045" href="../Soundness/#plfa_plfa-part3-Soundness-30403" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-31058" href="../Soundness/#plfa_plfa-part3-Soundness-30988" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-31060" class="Keyword">in</a>
   <a id="plfa_plfa-part3-Soundness-31066" href="../Denotational/#plfa_plfa-part3-Denotational-22926" class="Function">≃-trans</a> <a id="plfa_plfa-part3-Soundness-31074" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-31075" href="../Soundness/#plfa_plfa-part3-Soundness-30978" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-31076" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-31078" href="../Soundness/#plfa_plfa-part3-Soundness-31041" class="Bound">e</a> <a id="plfa_plfa-part3-Soundness-31080" href="../Soundness/#plfa_plfa-part3-Soundness-31011" class="Bound">ih</a> <a id="plfa_plfa-part3-Soundness-31083" href="../Soundness/#plfa_plfa-part3-Soundness-30998" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-31085" href="../Soundness/#plfa_plfa-part3-Soundness-31000" class="Bound">v</a>
</pre><h2 id="unicode">Unicode</h2><p>本章使用了以下 Unicode：</p><pre><code>≟  U+225F  QUESTIONED EQUAL TO (\?=)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Compositional/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Soundness.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Adequacy/">下一章</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">编程语言基础：Agda 描述</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>