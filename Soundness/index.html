<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>编程语言基础：Agda 描述 – Soundness</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">编程语言基础：Agda 描述</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">主页</a> <a class="page-link" href="../Announcements/">公告</a> <a class="page-link" href="../GettingStarted/">使用说明</a> <a class="page-link" href="../Citing/">引用</a> <a class="page-link" href="https://plfa.github.io/">English</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Compositional/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Soundness.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Adequacy/">下一章</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Soundness: 指称语义归约的可靠性</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part3-Soundness-109" class="Keyword">module</a> <a id="plfa_plfa-part3-Soundness-116" href="../Soundness/#" class="Module">plfa.part3.Soundness</a> <a id="plfa_plfa-part3-Soundness-137" class="Keyword">where</a>
</pre><h2 id="简介">简介</h2><p>本章中我们会证明指称语义的归约语义是可靠（Sound）的，即对于任意项 <code>L</code>：</p><pre><code>L —↠ ƛ N  蕴含  ℰ L ≃ ℰ (ƛ N)</code></pre><p>证明可通过对归约序列进行归纳得出，因此主引理涉及单个归约步骤。 我们需要证明，如果任何项 <code>M</code> 步进到项 <code>N</code>，则 <code>M</code> 和 <code>M</code> 的指称相等。 我们将分别证明「当且仅当」的两个方向，一个方向类似于保型性（type preservation）的证明， 另一个方向类似于反向归约（即展开）的保型性证明。回想一下， 保型性有时称为主体归约（subject reduction）。 反向的保型性是一个众所周知的属性，称为 <strong>主体展开（subject expansion）</strong>。 众所周知，大多数类型化 λ-演算都不满足主体展开！ （译注：一个 subject 是形如 <code>(1*2+3) : Int</code> 这样已经确定类型的项。 大多数类型化 λ-演算会失去保型性的原因参见 https://www.bananaspace.org/wiki/%E7%B1%BB%E5%9E%8B%E4%B8%8D%E5%8F%98%E6%80%A7）</p><h2 id="导入">导入</h2><pre class="Agda"><a id="plfa_plfa-part3-Soundness-1510" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1515" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1522" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
  <a id="plfa_plfa-part3-Soundness-1562" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1568" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1569" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="plfa_plfa-part3-Soundness-1572" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1574" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#830" class="Function Operator">_≢_</a><a id="plfa_plfa-part3-Soundness-1577" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1579" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-1583" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1585" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a><a id="plfa_plfa-part3-Soundness-1588" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1590" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a><a id="plfa_plfa-part3-Soundness-1594" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1596" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1367" class="Function">cong₂</a><a id="plfa_plfa-part3-Soundness-1601" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1603" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1461" class="Function">cong-app</a><a id="plfa_plfa-part3-Soundness-1611" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1613" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1618" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1625" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html" class="Module">Data.Product</a> <a id="plfa_plfa-part3-Soundness-1638" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1644" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1645" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">_×_</a><a id="plfa_plfa-part3-Soundness-1648" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1650" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="plfa_plfa-part3-Soundness-1651" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1653" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ-syntax</a><a id="plfa_plfa-part3-Soundness-1661" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1663" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1369" class="Function">∃</a><a id="plfa_plfa-part3-Soundness-1664" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1666" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1806" class="Function">∃-syntax</a><a id="plfa_plfa-part3-Soundness-1674" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1676" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a><a id="plfa_plfa-part3-Soundness-1681" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1683" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a><a id="plfa_plfa-part3-Soundness-1688" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-1692" class="Keyword">renaming</a> <a id="plfa_plfa-part3-Soundness-1701" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1702" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part3-Soundness-1706" class="Symbol">to</a> <a id="plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part3-Soundness-1714" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1716" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1721" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1728" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html" class="Module">Agda.Primitive</a> <a id="plfa_plfa-part3-Soundness-1743" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1749" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1750" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#758" class="Primitive">lzero</a><a id="plfa_plfa-part3-Soundness-1755" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1757" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1762" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1769" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="plfa_plfa-part3-Soundness-1786" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1792" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1793" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#656" class="Function Operator">¬_</a><a id="plfa_plfa-part3-Soundness-1795" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1797" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1802" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1809" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Negation.html" class="Module">Relation.Nullary.Negation</a> <a id="plfa_plfa-part3-Soundness-1835" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1841" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1842" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Negation.Core.html#778" class="Function">contradiction</a><a id="plfa_plfa-part3-Soundness-1855" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1857" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1862" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1869" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html" class="Module">Data.Empty</a> <a id="plfa_plfa-part3-Soundness-1880" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1886" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1887" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html#628" class="Function">⊥-elim</a><a id="plfa_plfa-part3-Soundness-1893" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1895" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1900" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1907" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="plfa_plfa-part3-Soundness-1924" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1930" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1931" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1511" class="Record">Dec</a><a id="plfa_plfa-part3-Soundness-1934" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1936" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a><a id="plfa_plfa-part3-Soundness-1939" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1941" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a><a id="plfa_plfa-part3-Soundness-1943" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1945" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1950" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1957" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.html" class="Module">Function</a> <a id="plfa_plfa-part3-Soundness-1966" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1972" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1973" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">_∘_</a><a id="plfa_plfa-part3-Soundness-1976" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1978" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1983" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1990" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
     <a id="plfa_plfa-part3-Soundness-2014" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-2020" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-2021" href="../Untyped/#plfa_plfa-part2-Untyped-3848" class="Datatype">Context</a><a id="plfa_plfa-part3-Soundness-2028" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2030" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part3-Soundness-2033" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2035" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part3-Soundness-2038" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2040" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part3-Soundness-2043" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2045" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-2046" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2048" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a><a id="plfa_plfa-part3-Soundness-2049" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2051" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part3-Soundness-2053" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2055" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part3-Soundness-2057" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2059" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part3-Soundness-2061" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2063" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part3-Soundness-2066" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2080" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a><a id="plfa_plfa-part3-Soundness-2085" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2087" href="../Untyped/#plfa_plfa-part2-Untyped-9574" class="Function Operator">_[_]</a><a id="plfa_plfa-part3-Soundness-2091" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2093" href="../Untyped/#plfa_plfa-part2-Untyped-9458" class="Function">subst-zero</a><a id="plfa_plfa-part3-Soundness-2103" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2105" href="../Untyped/#plfa_plfa-part2-Untyped-7682" class="Function">ext</a><a id="plfa_plfa-part3-Soundness-2108" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2110" href="../Untyped/#plfa_plfa-part2-Untyped-8074" class="Function">rename</a><a id="plfa_plfa-part3-Soundness-2116" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2118" href="../Untyped/#plfa_plfa-part2-Untyped-8601" class="Function">exts</a><a id="plfa_plfa-part3-Soundness-2122" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2136" href="../Untyped/#plfa_plfa-part2-Untyped-12874" class="Datatype Operator">_—→_</a><a id="plfa_plfa-part3-Soundness-2140" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2142" href="../Untyped/#plfa_plfa-part2-Untyped-12924" class="InductiveConstructor">ξ₁</a><a id="plfa_plfa-part3-Soundness-2144" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2146" href="../Untyped/#plfa_plfa-part2-Untyped-13014" class="InductiveConstructor">ξ₂</a><a id="plfa_plfa-part3-Soundness-2148" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2150" href="../Untyped/#plfa_plfa-part2-Untyped-13104" class="InductiveConstructor">β</a><a id="plfa_plfa-part3-Soundness-2151" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2153" href="../Untyped/#plfa_plfa-part2-Untyped-13212" class="InductiveConstructor">ζ</a><a id="plfa_plfa-part3-Soundness-2154" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2156" href="../Untyped/#plfa_plfa-part2-Untyped-14270" class="Datatype Operator">_—↠_</a><a id="plfa_plfa-part3-Soundness-2160" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2162" href="../Untyped/#plfa_plfa-part2-Untyped-14458" class="InductiveConstructor Operator">_—→⟨_⟩_</a><a id="plfa_plfa-part3-Soundness-2169" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2171" href="../Untyped/#plfa_plfa-part2-Untyped-14316" class="InductiveConstructor Operator">_∎</a><a id="plfa_plfa-part3-Soundness-2173" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-2175" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-2180" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-2187" href="../Substitution/#" class="Module">plfa.part2.Substitution</a> <a id="plfa_plfa-part3-Soundness-2211" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-2217" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-2218" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a><a id="plfa_plfa-part3-Soundness-2224" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2226" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a><a id="plfa_plfa-part3-Soundness-2231" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2233" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part3-Soundness-2236" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-2238" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-2243" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-2250" href="../Denotational/#" class="Module">plfa.part3.Denotational</a>
     <a id="plfa_plfa-part3-Soundness-2279" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-2285" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-2286" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a><a id="plfa_plfa-part3-Soundness-2291" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2293" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Soundness-2294" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2296" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a><a id="plfa_plfa-part3-Soundness-2299" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2301" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">_⊢_↓_</a><a id="plfa_plfa-part3-Soundness-2306" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2308" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">_`,_</a><a id="plfa_plfa-part3-Soundness-2312" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2314" href="../Denotational/#plfa_plfa-part3-Denotational-5424" class="Datatype Operator">_⊑_</a><a id="plfa_plfa-part3-Soundness-2317" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2319" href="../Denotational/#plfa_plfa-part3-Denotational-9696" class="Function Operator">_`⊑_</a><a id="plfa_plfa-part3-Soundness-2323" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2325" href="../Denotational/#plfa_plfa-part3-Denotational-9950" class="Function">`⊥</a><a id="plfa_plfa-part3-Soundness-2327" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2329" href="../Denotational/#plfa_plfa-part3-Denotational-9979" class="Function Operator">_`⊔_</a><a id="plfa_plfa-part3-Soundness-2333" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2335" href="../Denotational/#plfa_plfa-part3-Denotational-9222" class="Function">init</a><a id="plfa_plfa-part3-Soundness-2339" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2341" href="../Denotational/#plfa_plfa-part3-Denotational-9277" class="Function">last</a><a id="plfa_plfa-part3-Soundness-2345" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2347" href="../Denotational/#plfa_plfa-part3-Denotational-9326" class="Function">init-last</a><a id="plfa_plfa-part3-Soundness-2356" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2370" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Soundness-2376" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2378" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a><a id="plfa_plfa-part3-Soundness-2385" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2387" href="../Denotational/#plfa_plfa-part3-Denotational-10539" class="Function">`⊑-refl</a><a id="plfa_plfa-part3-Soundness-2394" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2396" href="../Denotational/#plfa_plfa-part3-Denotational-32332" class="Function">⊑-env</a><a id="plfa_plfa-part3-Soundness-2401" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2403" href="../Denotational/#plfa_plfa-part3-Denotational-10610" class="Function">⊑-env-conj-R1</a><a id="plfa_plfa-part3-Soundness-2416" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2418" href="../Denotational/#plfa_plfa-part3-Denotational-10716" class="Function">⊑-env-conj-R2</a><a id="plfa_plfa-part3-Soundness-2431" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2433" href="../Denotational/#plfa_plfa-part3-Denotational-32854" class="Function">up-env</a><a id="plfa_plfa-part3-Soundness-2439" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2453" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-2456" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2458" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Soundness-2464" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2466" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a><a id="plfa_plfa-part3-Soundness-2473" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2475" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a><a id="plfa_plfa-part3-Soundness-2482" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2484" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Soundness-2491" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2493" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a><a id="plfa_plfa-part3-Soundness-2496" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2510" href="../Denotational/#plfa_plfa-part3-Denotational-30331" class="Function">rename-pres</a><a id="plfa_plfa-part3-Soundness-2521" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2523" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a><a id="plfa_plfa-part3-Soundness-2524" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2526" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">_≃_</a><a id="plfa_plfa-part3-Soundness-2529" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2531" href="../Denotational/#plfa_plfa-part3-Denotational-22926" class="Function">≃-trans</a><a id="plfa_plfa-part3-Soundness-2538" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-2540" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-2545" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-2552" href="../Compositional/#" class="Module">plfa.part3.Compositional</a> <a id="plfa_plfa-part3-Soundness-2577" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-2583" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-2584" href="../Compositional/#plfa_plfa-part3-Compositional-4471" class="Function">lambda-inversion</a><a id="plfa_plfa-part3-Soundness-2600" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2602" href="../Compositional/#plfa_plfa-part3-Compositional-12863" class="Function">var-inv</a><a id="plfa_plfa-part3-Soundness-2609" class="Symbol">)</a>
</pre><h2 id="向前归约保持指称不变">向前归约保持指称不变</h2><p>本节中对指称不变性的证明使用了前一章中的技术。和 STLC 的不变性证明一样，我们保留了独立于语法定义的关系，这与内在类型项相反。 另一方面，我们对变量使用了 de Bruijn 索引。</p><p>证明的大纲保持不变，因为我们必须证明归约关系中使用的所有辅助函数的引理： 代换、重命名和扩展。</p><h3 id="同时代换保持指称不变">同时代换保持指称不变</h3><p>我们接下来的目标是证明同时代换变量和环境会保持含义不变。也就是说，若 <code>M</code> 在环境 <code>γ</code> 中的结果是 <code>v</code>，那么代换 <code>σ</code> 应用到 <code>M</code> 所得的程序，其结果仍然是 <code>v</code>， 但环境转移到了 <code>δ</code> 中。该环境中对于每一个变量 <code>x</code>，<code>σ x</code> 产生的结果值与原始环境 <code>γ</code> 中的 <code>x</code> 的值相同。我们将这种情况写作 <code>δ `⊢ σ ↓ γ</code>。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-4021" class="Keyword">infix</a> <a id="plfa_plfa-part3-Soundness-4027" class="Number">3</a> <a id="plfa_plfa-part3-Soundness-4029" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">_`⊢_↓_</a>
<a id="plfa_plfa-part3-Soundness-_`⊢_↓_"></a><a id="plfa_plfa-part3-Soundness-4036" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">_`⊢_↓_</a> <a id="plfa_plfa-part3-Soundness-4043" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4045" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-4047" href="../Soundness/#plfa_plfa-part3-Soundness-4047" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-4049" href="../Soundness/#plfa_plfa-part3-Soundness-4049" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-4050" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4052" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4054" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4058" href="../Soundness/#plfa_plfa-part3-Soundness-4047" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-4060" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4062" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-4068" href="../Soundness/#plfa_plfa-part3-Soundness-4049" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4070" href="../Soundness/#plfa_plfa-part3-Soundness-4047" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-4072" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4074" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4078" href="../Soundness/#plfa_plfa-part3-Soundness-4049" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4080" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4082" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a>
<a id="plfa_plfa-part3-Soundness-4086" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">_`⊢_↓_</a> <a id="plfa_plfa-part3-Soundness-4093" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4094" href="../Soundness/#plfa_plfa-part3-Soundness-4094" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-4095" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-4097" href="../Soundness/#plfa_plfa-part3-Soundness-4097" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-4098" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4100" href="../Soundness/#plfa_plfa-part3-Soundness-4100" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4102" href="../Soundness/#plfa_plfa-part3-Soundness-4102" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4104" href="../Soundness/#plfa_plfa-part3-Soundness-4104" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4106" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4108" class="Symbol">(∀</a> <a id="plfa_plfa-part3-Soundness-4111" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4112" href="../Soundness/#plfa_plfa-part3-Soundness-4112" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-4114" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4116" href="../Soundness/#plfa_plfa-part3-Soundness-4097" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4118" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-4120" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-4121" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4123" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4125" href="../Soundness/#plfa_plfa-part3-Soundness-4100" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4127" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-4129" href="../Soundness/#plfa_plfa-part3-Soundness-4102" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4131" href="../Soundness/#plfa_plfa-part3-Soundness-4112" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-4133" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4135" href="../Soundness/#plfa_plfa-part3-Soundness-4104" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4137" href="../Soundness/#plfa_plfa-part3-Soundness-4112" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-4138" class="Symbol">)</a>
</pre><p>和之前一样，为了证明 λ-抽象，我们需要证明一个扩展引理， 该引理说明了将 <code>exts</code> 函数应用于代换会产生一个新的代换，该代换将变量映射到项， 使得当对 <code>δ , v</code> 求值时会产生 <code>γ , v</code> 中的值。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-ext"></a><a id="plfa_plfa-part3-Soundness-4524" href="../Soundness/#plfa_plfa-part3-Soundness-4524" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-4534" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4536" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-4538" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4539" href="../Soundness/#plfa_plfa-part3-Soundness-4539" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4541" href="../Soundness/#plfa_plfa-part3-Soundness-4541" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-4543" href="../Soundness/#plfa_plfa-part3-Soundness-4543" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-4544" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4546" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4547" href="../Soundness/#plfa_plfa-part3-Soundness-4547" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4549" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4551" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4555" href="../Soundness/#plfa_plfa-part3-Soundness-4539" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-4556" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4558" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4559" href="../Soundness/#plfa_plfa-part3-Soundness-4559" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4561" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4563" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4567" href="../Soundness/#plfa_plfa-part3-Soundness-4541" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-4568" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-4572" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4574" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4575" href="../Soundness/#plfa_plfa-part3-Soundness-4575" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4577" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4579" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-4585" href="../Soundness/#plfa_plfa-part3-Soundness-4539" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4587" href="../Soundness/#plfa_plfa-part3-Soundness-4541" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-4588" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-4592" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4594" href="../Soundness/#plfa_plfa-part3-Soundness-4559" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4596" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-4599" href="../Soundness/#plfa_plfa-part3-Soundness-4575" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4601" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4603" href="../Soundness/#plfa_plfa-part3-Soundness-4547" class="Bound">γ</a>
   <a id="plfa_plfa-part3-Soundness-4608" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part3-Soundness-4637" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4639" href="../Soundness/#plfa_plfa-part3-Soundness-4559" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4641" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-4644" href="../Soundness/#plfa_plfa-part3-Soundness-4543" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-4646" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-4649" href="../Untyped/#plfa_plfa-part2-Untyped-8601" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-4654" href="../Soundness/#plfa_plfa-part3-Soundness-4575" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4656" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4658" href="../Soundness/#plfa_plfa-part3-Soundness-4547" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4660" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-4663" href="../Soundness/#plfa_plfa-part3-Soundness-4543" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-4665" href="../Soundness/#plfa_plfa-part3-Soundness-4524" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-4675" href="../Soundness/#plfa_plfa-part3-Soundness-4675" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4677" href="../Soundness/#plfa_plfa-part3-Soundness-4677" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-4679" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-4681" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4683" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a>
<a id="plfa_plfa-part3-Soundness-4687" href="../Soundness/#plfa_plfa-part3-Soundness-4524" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-4697" href="../Soundness/#plfa_plfa-part3-Soundness-4697" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4699" href="../Soundness/#plfa_plfa-part3-Soundness-4699" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-4701" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4702" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-4704" href="../Soundness/#plfa_plfa-part3-Soundness-4704" class="Bound">x′</a><a id="plfa_plfa-part3-Soundness-4706" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4708" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4710" href="../Denotational/#plfa_plfa-part3-Denotational-30331" class="Function">rename-pres</a> <a id="plfa_plfa-part3-Soundness-4722" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part3-Soundness-4725" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-4728" href="../Soundness/#plfa_plfa-part3-Soundness-4728" class="Bound">_</a> <a id="plfa_plfa-part3-Soundness-4730" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4732" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Soundness-4738" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4740" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4741" href="../Soundness/#plfa_plfa-part3-Soundness-4699" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-4743" href="../Soundness/#plfa_plfa-part3-Soundness-4704" class="Bound">x′</a><a id="plfa_plfa-part3-Soundness-4745" class="Symbol">)</a>
</pre><p>该证明通过对 de Bruijn 索引 <code>x</code> 进行情况分析来论证：</p><ul><li><p>若索引为 <code>Z</code>，那么我们需要证明 <code>δ , v ⊢ # 0 ↓ v</code>， 它可通过规则 <code>var</code> 得证。</p></li><li><p>若索引为 <code>S x′</code> 那么我们需要证明 <code>δ , v ⊢ rename S_ (σ x′) ↓ γ x′</code>， 它可通过 <code>rename-pres</code> 引理证明。</p></li></ul><p>有了这个扩展引理，同时代换会保留含义的证明就很直白了，我们继续深入：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-pres"></a><a id="plfa_plfa-part3-Soundness-5399" href="../Soundness/#plfa_plfa-part3-Soundness-5399" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5410" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5412" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-5414" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5415" href="../Soundness/#plfa_plfa-part3-Soundness-5415" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-5417" href="../Soundness/#plfa_plfa-part3-Soundness-5417" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-5419" href="../Soundness/#plfa_plfa-part3-Soundness-5419" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-5420" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5422" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5423" href="../Soundness/#plfa_plfa-part3-Soundness-5423" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5425" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5427" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-5431" href="../Soundness/#plfa_plfa-part3-Soundness-5415" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-5432" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5434" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5435" href="../Soundness/#plfa_plfa-part3-Soundness-5435" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-5437" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5439" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-5443" href="../Soundness/#plfa_plfa-part3-Soundness-5417" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-5444" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5446" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5447" href="../Soundness/#plfa_plfa-part3-Soundness-5447" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5449" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5451" href="../Soundness/#plfa_plfa-part3-Soundness-5415" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-5453" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5455" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-5456" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-5460" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5462" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5463" href="../Soundness/#plfa_plfa-part3-Soundness-5463" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5465" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5467" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-5473" href="../Soundness/#plfa_plfa-part3-Soundness-5415" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-5475" href="../Soundness/#plfa_plfa-part3-Soundness-5417" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-5476" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-5480" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5482" href="../Soundness/#plfa_plfa-part3-Soundness-5435" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-5484" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-5487" href="../Soundness/#plfa_plfa-part3-Soundness-5463" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5489" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5491" href="../Soundness/#plfa_plfa-part3-Soundness-5423" class="Bound">γ</a>
  <a id="plfa_plfa-part3-Soundness-5495" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5497" href="../Soundness/#plfa_plfa-part3-Soundness-5423" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5499" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5501" href="../Soundness/#plfa_plfa-part3-Soundness-5447" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5503" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5505" href="../Soundness/#plfa_plfa-part3-Soundness-5419" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-5511" class="Comment">------------------</a>
  <a id="plfa_plfa-part3-Soundness-5532" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5534" href="../Soundness/#plfa_plfa-part3-Soundness-5435" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-5536" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5538" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part3-Soundness-5544" href="../Soundness/#plfa_plfa-part3-Soundness-5463" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5546" href="../Soundness/#plfa_plfa-part3-Soundness-5447" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5548" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5550" href="../Soundness/#plfa_plfa-part3-Soundness-5419" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-5552" href="../Soundness/#plfa_plfa-part3-Soundness-5399" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5563" href="../Soundness/#plfa_plfa-part3-Soundness-5563" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5565" href="../Soundness/#plfa_plfa-part3-Soundness-5565" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5567" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5568" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-5572" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5573" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-5575" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5577" href="../Soundness/#plfa_plfa-part3-Soundness-5577" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-5578" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-5581" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5583" href="../Soundness/#plfa_plfa-part3-Soundness-5565" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5585" href="../Soundness/#plfa_plfa-part3-Soundness-5577" class="Bound">x</a>
<a id="plfa_plfa-part3-Soundness-5587" href="../Soundness/#plfa_plfa-part3-Soundness-5399" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5598" href="../Soundness/#plfa_plfa-part3-Soundness-5598" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5600" href="../Soundness/#plfa_plfa-part3-Soundness-5600" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5602" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5603" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-5610" href="../Soundness/#plfa_plfa-part3-Soundness-5610" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-5613" href="../Soundness/#plfa_plfa-part3-Soundness-5613" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-5615" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5617" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-5621" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-5628" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5629" href="../Soundness/#plfa_plfa-part3-Soundness-5399" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5640" href="../Soundness/#plfa_plfa-part3-Soundness-5598" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5642" href="../Soundness/#plfa_plfa-part3-Soundness-5600" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5644" href="../Soundness/#plfa_plfa-part3-Soundness-5610" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-5646" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5648" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5649" href="../Soundness/#plfa_plfa-part3-Soundness-5399" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5660" href="../Soundness/#plfa_plfa-part3-Soundness-5598" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5662" href="../Soundness/#plfa_plfa-part3-Soundness-5600" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5664" href="../Soundness/#plfa_plfa-part3-Soundness-5613" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-5666" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-5668" href="../Soundness/#plfa_plfa-part3-Soundness-5399" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5679" href="../Soundness/#plfa_plfa-part3-Soundness-5679" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5681" href="../Soundness/#plfa_plfa-part3-Soundness-5681" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5683" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5684" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-5692" href="../Soundness/#plfa_plfa-part3-Soundness-5692" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-5693" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5695" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-5699" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-5707" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5708" href="../Soundness/#plfa_plfa-part3-Soundness-5399" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5719" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-5722" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5723" href="../Soundness/#plfa_plfa-part3-Soundness-5723" class="Bound">A</a><a id="plfa_plfa-part3-Soundness-5724" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5726" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5728" href="../Untyped/#plfa_plfa-part2-Untyped-8601" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-5733" href="../Soundness/#plfa_plfa-part3-Soundness-5679" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-5734" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5736" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5737" href="../Soundness/#plfa_plfa-part3-Soundness-4524" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-5747" href="../Soundness/#plfa_plfa-part3-Soundness-5679" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5749" href="../Soundness/#plfa_plfa-part3-Soundness-5681" class="Bound">s</a><a id="plfa_plfa-part3-Soundness-5750" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5752" href="../Soundness/#plfa_plfa-part3-Soundness-5692" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-5753" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-5755" href="../Soundness/#plfa_plfa-part3-Soundness-5399" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5766" href="../Soundness/#plfa_plfa-part3-Soundness-5766" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5768" href="../Soundness/#plfa_plfa-part3-Soundness-5768" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5770" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-5778" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5780" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-5788" href="../Soundness/#plfa_plfa-part3-Soundness-5399" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5799" href="../Soundness/#plfa_plfa-part3-Soundness-5799" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5801" href="../Soundness/#plfa_plfa-part3-Soundness-5801" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5803" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5804" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-5812" href="../Soundness/#plfa_plfa-part3-Soundness-5812" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-5815" href="../Soundness/#plfa_plfa-part3-Soundness-5815" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-5817" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5819" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-5823" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-5831" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5832" href="../Soundness/#plfa_plfa-part3-Soundness-5399" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5843" href="../Soundness/#plfa_plfa-part3-Soundness-5799" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5845" href="../Soundness/#plfa_plfa-part3-Soundness-5801" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5847" href="../Soundness/#plfa_plfa-part3-Soundness-5812" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-5849" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5851" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5852" href="../Soundness/#plfa_plfa-part3-Soundness-5399" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5863" href="../Soundness/#plfa_plfa-part3-Soundness-5799" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5865" href="../Soundness/#plfa_plfa-part3-Soundness-5801" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5867" href="../Soundness/#plfa_plfa-part3-Soundness-5815" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-5869" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-5871" href="../Soundness/#plfa_plfa-part3-Soundness-5399" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5882" href="../Soundness/#plfa_plfa-part3-Soundness-5882" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5884" href="../Soundness/#plfa_plfa-part3-Soundness-5884" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5886" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5887" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-5891" href="../Soundness/#plfa_plfa-part3-Soundness-5891" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-5893" href="../Soundness/#plfa_plfa-part3-Soundness-5893" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-5895" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5897" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5899" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-5903" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5904" href="../Soundness/#plfa_plfa-part3-Soundness-5399" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5915" href="../Soundness/#plfa_plfa-part3-Soundness-5882" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5917" href="../Soundness/#plfa_plfa-part3-Soundness-5884" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5919" href="../Soundness/#plfa_plfa-part3-Soundness-5891" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-5920" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5922" href="../Soundness/#plfa_plfa-part3-Soundness-5893" class="Bound">lt</a>
</pre><p>我们通过对 <code>M</code> 的语义进行归纳来证明。两个有趣的情况分别对应于变量和 λ-抽象：</p><ul><li><p>对于变量 <code>x</code>，我们有 <code>v = γ x</code>，于是需要证明 <code>δ ⊢ σ x ↓ v</code>。 将前提应用到 <code>x</code>，我们有 <code>δ ⊢ σ x ↓ γ x</code>，即 <code>δ ⊢ σ x ↓ v</code>.</p></li><li><p>对于 λ-抽象，我们必须为归纳假设扩展代换。应用 <code>subst-ext</code> 引理可证明 扩展的代换会将变量映射到产生对应值的项。</p></li></ul><h3 id="单一代换保持指称不变">单一代换保持指称不变</h3><p>对于 β-规约 <code>(ƛ N) · M —→ N [ M ]</code>，我们需要证明当用 <code>M</code> 代换项 <code>N</code> 中的 de Bruijn 索引 0 时，语义保持不变。通过对规则 <code>↦-elim</code> 和 <code>↦-intro</code> 进行反演，我们可得到 <code>γ , v ⊢ M ↓ w</code> 和 <code>γ ⊢ N ↓ v</code>。因此，我们需要证明 <code>γ ⊢ M [ N ] ↓ w</code>，或等价地证明 <code>γ ⊢ subst (subst-zero N) M ↓ w</code>。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-substitution"></a><a id="plfa_plfa-part3-Soundness-7323" href="../Soundness/#plfa_plfa-part3-Soundness-7323" class="Function">substitution</a> <a id="plfa_plfa-part3-Soundness-7336" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-7338" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-7340" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-7341" href="../Soundness/#plfa_plfa-part3-Soundness-7341" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-7342" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-7344" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-7345" href="../Soundness/#plfa_plfa-part3-Soundness-7345" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7347" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-7349" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-7353" href="../Soundness/#plfa_plfa-part3-Soundness-7341" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-7354" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-7356" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-7357" href="../Soundness/#plfa_plfa-part3-Soundness-7357" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-7359" href="../Soundness/#plfa_plfa-part3-Soundness-7359" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-7361" href="../Soundness/#plfa_plfa-part3-Soundness-7361" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-7363" href="../Soundness/#plfa_plfa-part3-Soundness-7363" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-7364" class="Symbol">}</a>
   <a id="plfa_plfa-part3-Soundness-7369" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-7371" href="../Soundness/#plfa_plfa-part3-Soundness-7345" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7373" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-7376" href="../Soundness/#plfa_plfa-part3-Soundness-7361" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-7378" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-7380" href="../Soundness/#plfa_plfa-part3-Soundness-7357" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-7382" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-7384" href="../Soundness/#plfa_plfa-part3-Soundness-7363" class="Bound">w</a>
   <a id="plfa_plfa-part3-Soundness-7389" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-7391" href="../Soundness/#plfa_plfa-part3-Soundness-7345" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7393" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-7395" href="../Soundness/#plfa_plfa-part3-Soundness-7359" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-7397" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-7399" href="../Soundness/#plfa_plfa-part3-Soundness-7361" class="Bound">v</a>
     <a id="plfa_plfa-part3-Soundness-7406" class="Comment">---------------</a>
   <a id="plfa_plfa-part3-Soundness-7425" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-7427" href="../Soundness/#plfa_plfa-part3-Soundness-7345" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7429" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-7431" href="../Soundness/#plfa_plfa-part3-Soundness-7357" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-7433" href="../Untyped/#plfa_plfa-part2-Untyped-9574" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-7435" href="../Soundness/#plfa_plfa-part3-Soundness-7359" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-7437" href="../Untyped/#plfa_plfa-part2-Untyped-9574" class="Function Operator">]</a> <a id="plfa_plfa-part3-Soundness-7439" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-7441" href="../Soundness/#plfa_plfa-part3-Soundness-7363" class="Bound">w</a>
<a id="plfa_plfa-part3-Soundness-7443" href="../Soundness/#plfa_plfa-part3-Soundness-7323" class="Function">substitution</a><a id="plfa_plfa-part3-Soundness-7455" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-7456" href="../Soundness/#plfa_plfa-part3-Soundness-7456" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-7457" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-7459" href="../Soundness/#plfa_plfa-part3-Soundness-7459" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-7460" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-7462" href="../Soundness/#plfa_plfa-part3-Soundness-7462" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-7463" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-7465" href="../Soundness/#plfa_plfa-part3-Soundness-7465" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-7466" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-7468" href="../Soundness/#plfa_plfa-part3-Soundness-7468" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-7469" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-7471" href="../Soundness/#plfa_plfa-part3-Soundness-7471" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-7472" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-7474" href="../Soundness/#plfa_plfa-part3-Soundness-7474" class="Bound">dn</a> <a id="plfa_plfa-part3-Soundness-7477" href="../Soundness/#plfa_plfa-part3-Soundness-7477" class="Bound">dm</a> <a id="plfa_plfa-part3-Soundness-7480" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-7484" href="../Soundness/#plfa_plfa-part3-Soundness-5399" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-7495" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-7496" href="../Untyped/#plfa_plfa-part2-Untyped-9458" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-7507" href="../Soundness/#plfa_plfa-part3-Soundness-7465" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-7508" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-7510" href="../Soundness/#plfa_plfa-part3-Soundness-7532" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-7519" href="../Soundness/#plfa_plfa-part3-Soundness-7474" class="Bound">dn</a>
  <a id="plfa_plfa-part3-Soundness-7524" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-7532" href="../Soundness/#plfa_plfa-part3-Soundness-7532" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-7541" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-7543" href="../Soundness/#plfa_plfa-part3-Soundness-7459" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7545" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-7548" href="../Untyped/#plfa_plfa-part2-Untyped-9458" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-7559" href="../Soundness/#plfa_plfa-part3-Soundness-7465" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-7561" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-7563" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-7564" href="../Soundness/#plfa_plfa-part3-Soundness-7459" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7566" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-7569" href="../Soundness/#plfa_plfa-part3-Soundness-7468" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-7570" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-7574" href="../Soundness/#plfa_plfa-part3-Soundness-7532" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-7583" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-7585" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-7587" href="../Soundness/#plfa_plfa-part3-Soundness-7477" class="Bound">dm</a>
  <a id="plfa_plfa-part3-Soundness-7592" href="../Soundness/#plfa_plfa-part3-Soundness-7532" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-7601" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-7602" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-7604" href="../Soundness/#plfa_plfa-part3-Soundness-7604" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-7605" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-7607" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-7609" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a>
</pre><p>这个结果是同时代换引理的推论。要使用该引理，我们只需要证明 <code>subst-zero M</code> 会将变量映射到某个项，该项产生的值与 <code>γ , v</code> 中产生的值相同。令 <code>y</code> 为任意变量（即 de Bruijn 索引）：</p><ul><li><p>若索引为 <code>Z</code>，则 <code>(subst-zero M) y = M</code> 且 <code>(γ , v) y = v</code>， 根据前提可得 <code>γ ⊢ M ↓ v</code>。</p></li><li><p>若索引为 <code>S x</code>，则 <code>(subst-zero M) (S x) = x</code> 且 <code>(γ , v) (S x) = γ x</code>， 根据规则 <code>var</code> 可得 <code>γ ⊢ x ↓ γ x</code>。</p></li></ul><h3 id="归约保持指称不变">归约保持指称不变</h3><p>有了代换引理，就能直接证明归约保持指称不变：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-preserve"></a><a id="plfa_plfa-part3-Soundness-8626" href="../Soundness/#plfa_plfa-part3-Soundness-8626" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8635" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8637" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-8639" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8640" href="../Soundness/#plfa_plfa-part3-Soundness-8640" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-8641" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-8643" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8644" href="../Soundness/#plfa_plfa-part3-Soundness-8644" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-8646" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8648" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-8652" href="../Soundness/#plfa_plfa-part3-Soundness-8640" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-8653" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-8655" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8656" href="../Soundness/#plfa_plfa-part3-Soundness-8656" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-8658" href="../Soundness/#plfa_plfa-part3-Soundness-8658" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-8660" href="../Soundness/#plfa_plfa-part3-Soundness-8660" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-8661" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-8665" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8667" href="../Soundness/#plfa_plfa-part3-Soundness-8644" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-8669" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-8671" href="../Soundness/#plfa_plfa-part3-Soundness-8656" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-8673" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-8675" href="../Soundness/#plfa_plfa-part3-Soundness-8660" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-8679" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8681" href="../Soundness/#plfa_plfa-part3-Soundness-8656" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-8683" href="../Untyped/#plfa_plfa-part2-Untyped-12874" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-8686" href="../Soundness/#plfa_plfa-part3-Soundness-8658" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-8692" class="Comment">----------</a>
  <a id="plfa_plfa-part3-Soundness-8705" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8707" href="../Soundness/#plfa_plfa-part3-Soundness-8644" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-8709" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-8711" href="../Soundness/#plfa_plfa-part3-Soundness-8658" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-8713" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-8715" href="../Soundness/#plfa_plfa-part3-Soundness-8660" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-8717" href="../Soundness/#plfa_plfa-part3-Soundness-8626" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8726" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8727" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-8730" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8732" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-8735" href="../Soundness/#plfa_plfa-part3-Soundness-8626" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8744" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8745" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-8752" href="../Soundness/#plfa_plfa-part3-Soundness-8752" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-8755" href="../Soundness/#plfa_plfa-part3-Soundness-8755" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-8757" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8759" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8760" href="../Untyped/#plfa_plfa-part2-Untyped-12924" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-8763" href="../Soundness/#plfa_plfa-part3-Soundness-8763" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8764" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8766" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8768" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-8775" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8776" href="../Soundness/#plfa_plfa-part3-Soundness-8626" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8785" href="../Soundness/#plfa_plfa-part3-Soundness-8752" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-8788" href="../Soundness/#plfa_plfa-part3-Soundness-8763" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8789" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8791" href="../Soundness/#plfa_plfa-part3-Soundness-8755" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-8794" href="../Soundness/#plfa_plfa-part3-Soundness-8626" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8803" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8804" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-8811" href="../Soundness/#plfa_plfa-part3-Soundness-8811" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-8814" href="../Soundness/#plfa_plfa-part3-Soundness-8814" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-8816" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8818" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8819" href="../Untyped/#plfa_plfa-part2-Untyped-13014" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-8822" href="../Soundness/#plfa_plfa-part3-Soundness-8822" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8823" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8825" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8827" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-8834" href="../Soundness/#plfa_plfa-part3-Soundness-8811" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-8837" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8838" href="../Soundness/#plfa_plfa-part3-Soundness-8626" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8847" href="../Soundness/#plfa_plfa-part3-Soundness-8814" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-8850" href="../Soundness/#plfa_plfa-part3-Soundness-8822" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8851" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-8853" href="../Soundness/#plfa_plfa-part3-Soundness-8626" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8862" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8863" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-8870" href="../Soundness/#plfa_plfa-part3-Soundness-8870" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-8873" href="../Soundness/#plfa_plfa-part3-Soundness-8873" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-8875" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8877" href="../Untyped/#plfa_plfa-part2-Untyped-13104" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-8879" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8881" href="../Soundness/#plfa_plfa-part3-Soundness-7323" class="Function">substitution</a> <a id="plfa_plfa-part3-Soundness-8894" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8895" href="../Compositional/#plfa_plfa-part3-Compositional-4471" class="Function">lambda-inversion</a> <a id="plfa_plfa-part3-Soundness-8912" href="../Soundness/#plfa_plfa-part3-Soundness-8870" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-8914" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8916" href="../Soundness/#plfa_plfa-part3-Soundness-8873" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-8919" href="../Soundness/#plfa_plfa-part3-Soundness-8626" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8928" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8929" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-8937" href="../Soundness/#plfa_plfa-part3-Soundness-8937" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-8938" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8940" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8941" href="../Untyped/#plfa_plfa-part2-Untyped-13212" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-8943" href="../Soundness/#plfa_plfa-part3-Soundness-8943" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8944" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8946" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8948" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-8956" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8957" href="../Soundness/#plfa_plfa-part3-Soundness-8626" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8966" href="../Soundness/#plfa_plfa-part3-Soundness-8937" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-8968" href="../Soundness/#plfa_plfa-part3-Soundness-8943" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8969" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-8971" href="../Soundness/#plfa_plfa-part3-Soundness-8626" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8980" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-8988" href="../Soundness/#plfa_plfa-part3-Soundness-8988" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-8990" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8992" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-9000" href="../Soundness/#plfa_plfa-part3-Soundness-8626" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-9009" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9010" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9018" href="../Soundness/#plfa_plfa-part3-Soundness-9018" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-9020" href="../Soundness/#plfa_plfa-part3-Soundness-9020" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9022" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9024" href="../Soundness/#plfa_plfa-part3-Soundness-9024" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-9026" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9028" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9036" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9037" href="../Soundness/#plfa_plfa-part3-Soundness-8626" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-9046" href="../Soundness/#plfa_plfa-part3-Soundness-9018" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-9048" href="../Soundness/#plfa_plfa-part3-Soundness-9024" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-9049" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9051" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9052" href="../Soundness/#plfa_plfa-part3-Soundness-8626" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-9061" href="../Soundness/#plfa_plfa-part3-Soundness-9020" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9064" href="../Soundness/#plfa_plfa-part3-Soundness-9024" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-9065" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-9067" href="../Soundness/#plfa_plfa-part3-Soundness-8626" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-9076" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9077" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9081" href="../Soundness/#plfa_plfa-part3-Soundness-9081" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-9083" href="../Soundness/#plfa_plfa-part3-Soundness-9083" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-9085" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9087" href="../Soundness/#plfa_plfa-part3-Soundness-9087" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-9089" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9091" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9095" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9096" href="../Soundness/#plfa_plfa-part3-Soundness-8626" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-9105" href="../Soundness/#plfa_plfa-part3-Soundness-9081" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-9107" href="../Soundness/#plfa_plfa-part3-Soundness-9087" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-9108" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9110" href="../Soundness/#plfa_plfa-part3-Soundness-9083" class="Bound">lt</a>
</pre><p>我们通过对 <code>M</code> 的语义进行归纳，并对归约进行情况分析来证明：</p><ul><li><p>若 <code>M</code> 为变量，则无需归约。</p></li><li><p>若 <code>M</code> 为应用，则归约要么满足合同性（ξ₁ 或 ξ₂），要么是 β-归约。 对于每一种合同性，我们使用归纳假设。对于 β-归约，我们使用代换引理和 <code>sub</code> 规则。</p></li><li><p>其余的情况都很直接。</p></li></ul><h2 id="归约反映了指称不变">归约反映了指称不变</h2><p>本节中将证明归约反映了项的指称不变，换言之，若 <code>N</code> 的结果是 <code>v</code>，且若 <code>M</code> 可归约为 <code>N</code>，则 <code>M</code> 的结果也是 <code>v</code>。虽然此证明和前面的语义保持不变的证明 之间存在一些广泛的相似之处，但我们仍需更多的技术引理才能得到这个结果。</p><p>最主要挑战是处理 β-归约中的代换：</p><pre><code>(ƛ N) · M —→ N [ M ]</code></pre><p>我们有 <code>γ ⊢ N [ M ] ↓ v</code> 且需要证明 <code>γ ⊢ (ƛ N) · M ↓ v</code>。现在考虑 <code>γ ⊢ N [ M ] ↓ v</code> 的推导过程。项 <code>M</code> 在 <code>N [ M ]</code> 中可能会出现 0、1 或多次。 对于它可能出现的任意次数，<code>M</code> 都可能产生不同的值。不过为了构建出 <code>(ƛ N) · M</code> 的推导过程，我们需要单个的 <code>M</code> 值。若 <code>M</code> 出现了超过 1 次，那么我们就能将不同的值用 <code>⊔</code> 连接到一起。若 <code>M</code> 出现了 0 次，那么我们就无需任何关于 <code>M</code> 的信息， 并直接使用 <code>⊥</code> 作为 <code>M</code> 的值。</p><h3 id="重命名反映了含义不变">重命名反映了含义不变</h3><p>前面我们证明了重命名变量会保持含义不变。现在我们证明它的反面，即重命名反映了含义不变。 也就是说，若 <code>δ ⊢ rename ρ M ↓ v</code> 则 <code>γ ⊢ M ↓ v</code>，其中 <code>(δ ∘ ρ) `⊑ γ</code>.</p><p>首先，我们需要一个前面给出的引理的变体：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-ext-`⊑"></a><a id="plfa_plfa-part3-Soundness-11618" href="../Soundness/#plfa_plfa-part3-Soundness-11618" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-11625" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11627" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-11629" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11630" href="../Soundness/#plfa_plfa-part3-Soundness-11630" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11632" href="../Soundness/#plfa_plfa-part3-Soundness-11632" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-11634" href="../Soundness/#plfa_plfa-part3-Soundness-11634" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-11635" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11637" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11638" href="../Soundness/#plfa_plfa-part3-Soundness-11638" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11640" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11642" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-11646" href="../Soundness/#plfa_plfa-part3-Soundness-11630" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-11647" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11649" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11650" href="../Soundness/#plfa_plfa-part3-Soundness-11650" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11652" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11654" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-11658" href="../Soundness/#plfa_plfa-part3-Soundness-11632" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-11659" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-11663" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11665" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11666" href="../Soundness/#plfa_plfa-part3-Soundness-11666" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-11668" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11670" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part3-Soundness-11677" href="../Soundness/#plfa_plfa-part3-Soundness-11630" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11679" href="../Soundness/#plfa_plfa-part3-Soundness-11632" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-11680" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-11684" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11686" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11687" href="../Soundness/#plfa_plfa-part3-Soundness-11650" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11689" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-11691" href="../Soundness/#plfa_plfa-part3-Soundness-11666" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-11692" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11694" href="../Denotational/#plfa_plfa-part3-Denotational-9696" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-11697" href="../Soundness/#plfa_plfa-part3-Soundness-11638" class="Bound">γ</a>
    <a id="plfa_plfa-part3-Soundness-11703" class="Comment">------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-11736" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11738" class="Symbol">((</a><a id="plfa_plfa-part3-Soundness-11740" href="../Soundness/#plfa_plfa-part3-Soundness-11650" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11742" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-11745" href="../Soundness/#plfa_plfa-part3-Soundness-11634" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-11746" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11748" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-11750" href="../Untyped/#plfa_plfa-part2-Untyped-7682" class="Function">ext</a> <a id="plfa_plfa-part3-Soundness-11754" href="../Soundness/#plfa_plfa-part3-Soundness-11666" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-11755" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11757" href="../Denotational/#plfa_plfa-part3-Denotational-9696" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-11760" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11761" href="../Soundness/#plfa_plfa-part3-Soundness-11638" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11763" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-11766" href="../Soundness/#plfa_plfa-part3-Soundness-11634" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-11767" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-11769" href="../Soundness/#plfa_plfa-part3-Soundness-11618" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-11776" href="../Soundness/#plfa_plfa-part3-Soundness-11776" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-11778" href="../Soundness/#plfa_plfa-part3-Soundness-11778" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-11781" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-11783" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-11785" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a>
<a id="plfa_plfa-part3-Soundness-11792" href="../Soundness/#plfa_plfa-part3-Soundness-11618" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-11799" href="../Soundness/#plfa_plfa-part3-Soundness-11799" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-11801" href="../Soundness/#plfa_plfa-part3-Soundness-11801" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-11804" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11805" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-11807" href="../Soundness/#plfa_plfa-part3-Soundness-11807" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-11808" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11810" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-11812" href="../Soundness/#plfa_plfa-part3-Soundness-11801" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-11815" href="../Soundness/#plfa_plfa-part3-Soundness-11807" class="Bound">x</a>
</pre><p>然后证明如下：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-rename-reflect"></a><a id="plfa_plfa-part3-Soundness-11879" href="../Soundness/#plfa_plfa-part3-Soundness-11879" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-11894" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11896" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-11898" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11899" href="../Soundness/#plfa_plfa-part3-Soundness-11899" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11901" href="../Soundness/#plfa_plfa-part3-Soundness-11901" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-11903" href="../Soundness/#plfa_plfa-part3-Soundness-11903" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-11904" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11906" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11907" href="../Soundness/#plfa_plfa-part3-Soundness-11907" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11909" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11911" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-11915" href="../Soundness/#plfa_plfa-part3-Soundness-11899" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-11916" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11918" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11919" href="../Soundness/#plfa_plfa-part3-Soundness-11919" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11921" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11923" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-11927" href="../Soundness/#plfa_plfa-part3-Soundness-11901" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-11928" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11930" class="Symbol">{</a> <a id="plfa_plfa-part3-Soundness-11932" href="../Soundness/#plfa_plfa-part3-Soundness-11932" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-11934" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11936" href="../Soundness/#plfa_plfa-part3-Soundness-11899" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11938" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-11940" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-11941" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-11945" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11947" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11948" href="../Soundness/#plfa_plfa-part3-Soundness-11948" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-11950" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11952" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part3-Soundness-11959" href="../Soundness/#plfa_plfa-part3-Soundness-11899" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11961" href="../Soundness/#plfa_plfa-part3-Soundness-11901" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-11962" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-11966" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11968" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11969" href="../Soundness/#plfa_plfa-part3-Soundness-11919" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11971" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-11973" href="../Soundness/#plfa_plfa-part3-Soundness-11948" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-11974" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11976" href="../Denotational/#plfa_plfa-part3-Denotational-9696" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-11979" href="../Soundness/#plfa_plfa-part3-Soundness-11907" class="Bound">γ</a>
  <a id="plfa_plfa-part3-Soundness-11983" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11985" href="../Soundness/#plfa_plfa-part3-Soundness-11919" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11987" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-11989" href="../Untyped/#plfa_plfa-part2-Untyped-8074" class="Function">rename</a> <a id="plfa_plfa-part3-Soundness-11996" href="../Soundness/#plfa_plfa-part3-Soundness-11948" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-11998" href="../Soundness/#plfa_plfa-part3-Soundness-11932" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-12000" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-12002" href="../Soundness/#plfa_plfa-part3-Soundness-11903" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-12008" class="Comment">------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-12047" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12049" href="../Soundness/#plfa_plfa-part3-Soundness-11907" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-12051" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-12053" href="../Soundness/#plfa_plfa-part3-Soundness-11932" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-12055" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-12057" href="../Soundness/#plfa_plfa-part3-Soundness-11903" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-12059" href="../Soundness/#plfa_plfa-part3-Soundness-11879" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12074" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12075" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12077" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12079" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-12081" href="../Soundness/#plfa_plfa-part3-Soundness-12081" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12082" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12084" href="../Soundness/#plfa_plfa-part3-Soundness-12084" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12090" href="../Soundness/#plfa_plfa-part3-Soundness-12090" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-12092" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-12097" href="../Compositional/#plfa_plfa-part3-Compositional-12863" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-12105" href="../Soundness/#plfa_plfa-part3-Soundness-12090" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-12107" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-12111" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-12113" href="../Soundness/#plfa_plfa-part3-Soundness-12113" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-12116" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12119" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-12123" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-12127" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12128" href="../Denotational/#plfa_plfa-part3-Denotational-5714" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Soundness-12136" href="../Soundness/#plfa_plfa-part3-Soundness-12113" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-12139" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12140" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12146" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12147" class="Symbol">))</a>
<a id="plfa_plfa-part3-Soundness-12150" href="../Soundness/#plfa_plfa-part3-Soundness-11879" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12165" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12166" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12168" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12170" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-12172" href="../Soundness/#plfa_plfa-part3-Soundness-12172" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-12173" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-12175" class="Argument">ρ</a> <a id="plfa_plfa-part3-Soundness-12177" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12179" href="../Soundness/#plfa_plfa-part3-Soundness-12179" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-12180" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12182" href="../Soundness/#plfa_plfa-part3-Soundness-12182" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12188" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12189" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-12197" href="../Soundness/#plfa_plfa-part3-Soundness-12197" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-12198" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12200" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12205" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-12213" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12214" href="../Soundness/#plfa_plfa-part3-Soundness-11879" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12229" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12230" href="../Soundness/#plfa_plfa-part3-Soundness-11618" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-12237" href="../Soundness/#plfa_plfa-part3-Soundness-12179" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-12239" href="../Soundness/#plfa_plfa-part3-Soundness-12182" class="Bound">all-n</a><a id="plfa_plfa-part3-Soundness-12244" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12246" href="../Soundness/#plfa_plfa-part3-Soundness-12197" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-12247" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-12249" href="../Soundness/#plfa_plfa-part3-Soundness-11879" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12264" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12265" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12267" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12269" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-12271" href="../Soundness/#plfa_plfa-part3-Soundness-12271" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-12272" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12274" href="../Soundness/#plfa_plfa-part3-Soundness-12274" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12280" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-12288" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12290" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-12298" href="../Soundness/#plfa_plfa-part3-Soundness-11879" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12313" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12314" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12316" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12318" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-12320" href="../Soundness/#plfa_plfa-part3-Soundness-12320" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-12321" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12323" href="../Soundness/#plfa_plfa-part3-Soundness-12323" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12329" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12330" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-12338" href="../Soundness/#plfa_plfa-part3-Soundness-12338" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-12341" href="../Soundness/#plfa_plfa-part3-Soundness-12341" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12343" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12345" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12350" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-12358" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12359" href="../Soundness/#plfa_plfa-part3-Soundness-11879" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12374" href="../Soundness/#plfa_plfa-part3-Soundness-12323" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12380" href="../Soundness/#plfa_plfa-part3-Soundness-12338" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-12382" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12384" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12385" href="../Soundness/#plfa_plfa-part3-Soundness-11879" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12400" href="../Soundness/#plfa_plfa-part3-Soundness-12323" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12406" href="../Soundness/#plfa_plfa-part3-Soundness-12341" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12408" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-12410" href="../Soundness/#plfa_plfa-part3-Soundness-11879" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12425" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12426" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12428" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12430" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-12432" href="../Soundness/#plfa_plfa-part3-Soundness-12432" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-12433" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12435" href="../Soundness/#plfa_plfa-part3-Soundness-12435" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12441" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12442" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-12446" href="../Soundness/#plfa_plfa-part3-Soundness-12446" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-12449" href="../Soundness/#plfa_plfa-part3-Soundness-12449" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-12451" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12453" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12458" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-12462" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12463" href="../Soundness/#plfa_plfa-part3-Soundness-11879" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12478" href="../Soundness/#plfa_plfa-part3-Soundness-12435" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12484" href="../Soundness/#plfa_plfa-part3-Soundness-12446" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-12486" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12488" href="../Soundness/#plfa_plfa-part3-Soundness-12449" class="Bound">lt</a>
<a id="plfa_plfa-part3-Soundness-12491" href="../Soundness/#plfa_plfa-part3-Soundness-11879" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12506" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12507" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12509" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12511" href="../Soundness/#plfa_plfa-part3-Soundness-12511" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-12513" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-12515" href="../Soundness/#plfa_plfa-part3-Soundness-12515" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-12516" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12518" href="../Soundness/#plfa_plfa-part3-Soundness-12518" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12524" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12525" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-12532" href="../Soundness/#plfa_plfa-part3-Soundness-12532" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-12535" href="../Soundness/#plfa_plfa-part3-Soundness-12535" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12537" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12539" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12544" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-12551" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12552" href="../Soundness/#plfa_plfa-part3-Soundness-11879" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12567" href="../Soundness/#plfa_plfa-part3-Soundness-12518" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12573" href="../Soundness/#plfa_plfa-part3-Soundness-12532" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-12575" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12577" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12578" href="../Soundness/#plfa_plfa-part3-Soundness-11879" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12593" href="../Soundness/#plfa_plfa-part3-Soundness-12518" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12599" href="../Soundness/#plfa_plfa-part3-Soundness-12535" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12601" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-12603" href="../Soundness/#plfa_plfa-part3-Soundness-11879" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12618" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12619" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12621" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12623" href="../Soundness/#plfa_plfa-part3-Soundness-12623" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-12625" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-12627" href="../Soundness/#plfa_plfa-part3-Soundness-12627" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-12628" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12630" href="../Soundness/#plfa_plfa-part3-Soundness-12630" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12636" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-12644" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12646" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-12654" href="../Soundness/#plfa_plfa-part3-Soundness-11879" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12669" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12670" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12672" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12674" href="../Soundness/#plfa_plfa-part3-Soundness-12674" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-12676" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-12678" href="../Soundness/#plfa_plfa-part3-Soundness-12678" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-12679" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12681" href="../Soundness/#plfa_plfa-part3-Soundness-12681" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12687" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12688" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-12696" href="../Soundness/#plfa_plfa-part3-Soundness-12696" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-12699" href="../Soundness/#plfa_plfa-part3-Soundness-12699" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12701" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12703" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12708" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-12716" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12717" href="../Soundness/#plfa_plfa-part3-Soundness-11879" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12732" href="../Soundness/#plfa_plfa-part3-Soundness-12681" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12738" href="../Soundness/#plfa_plfa-part3-Soundness-12696" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-12740" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12742" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12743" href="../Soundness/#plfa_plfa-part3-Soundness-11879" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12758" href="../Soundness/#plfa_plfa-part3-Soundness-12681" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12764" href="../Soundness/#plfa_plfa-part3-Soundness-12699" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12766" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-12768" href="../Soundness/#plfa_plfa-part3-Soundness-11879" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12783" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12784" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12786" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12788" href="../Soundness/#plfa_plfa-part3-Soundness-12788" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-12790" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-12792" href="../Soundness/#plfa_plfa-part3-Soundness-12792" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-12793" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12795" href="../Soundness/#plfa_plfa-part3-Soundness-12795" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12801" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12802" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-12806" href="../Soundness/#plfa_plfa-part3-Soundness-12806" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-12809" href="../Soundness/#plfa_plfa-part3-Soundness-12809" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-12811" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12813" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12818" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-12822" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12823" href="../Soundness/#plfa_plfa-part3-Soundness-11879" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12838" href="../Soundness/#plfa_plfa-part3-Soundness-12795" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12844" href="../Soundness/#plfa_plfa-part3-Soundness-12806" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-12846" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12848" href="../Soundness/#plfa_plfa-part3-Soundness-12809" class="Bound">lt</a>
</pre><p>我们无法通过对 <code>δ ⊢ rename ρ M ↓ v</code> 的推导过程进行归纳来证明此引理， 因此，我们转而通过对 <code>M</code> 进行归纳来证明：</p><ul><li><p>若它是一个变量，我们可通过对它应用反演引理得到 <code>v ⊑ δ (ρ x)</code>。 将前提实例化为 <code>x</code>，我们有 <code>δ (ρ x) ⊑ γ x</code>，于是我们可通过 <code>var</code> 规则证明。</p></li><li><p>若它是一个 λ-抽象 <code>ƛ N</code>，我们有重命名 <code>ρ (ƛ N) = ƛ (rename (ext ρ) N)</code>。 可通过对 <code>δ ⊢ ƛ (rename (ext ρ) N) ↓ v</code> 进行情况分析来论证：</p><ul><li><p>规则 <code>↦-intro</code>：为了满足归纳假设的前提，我们证明了重命名可扩展为从 <code>γ , v</code> 到 <code>δ , v</code> 的映射。</p></li><li><p>规则 <code>⊥-intro</code>：直接应用 <code>⊥-intro</code>。</p></li><li><p>规则 <code>⊔-intro</code>：应用归纳假设和 <code>⊔-intro</code>。</p></li><li><p>规则 <code>sub</code>：应用归纳假设和 <code>sub</code>。</p></li></ul></li><li><p>若它是一个应用 <code>L · M</code>，我们有 <code>rename ρ (L · M) = (rename ρ L) · (rename ρ M)</code>， 于是可通过对 <code>δ ⊢ (rename ρ L) · (rename ρ M) ↓ v</code> 进行情况分析来论证， 而所有的情况都很直白。</p></li></ul><p>在以后使用 <code>rename-reflect</code> 的情况中，重命名始终都是增量函数， 于是我们先在这里为这些特殊情况证明以下推论。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-rename-inc-reflect"></a><a id="plfa_plfa-part3-Soundness-14681" href="../Soundness/#plfa_plfa-part3-Soundness-14681" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-14700" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14702" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-14704" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14705" href="../Soundness/#plfa_plfa-part3-Soundness-14705" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14707" href="../Soundness/#plfa_plfa-part3-Soundness-14707" class="Bound">v′</a> <a id="plfa_plfa-part3-Soundness-14710" href="../Soundness/#plfa_plfa-part3-Soundness-14710" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-14711" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14713" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14714" href="../Soundness/#plfa_plfa-part3-Soundness-14714" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14716" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14718" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-14722" href="../Soundness/#plfa_plfa-part3-Soundness-14705" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-14723" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14725" class="Symbol">{</a> <a id="plfa_plfa-part3-Soundness-14727" href="../Soundness/#plfa_plfa-part3-Soundness-14727" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-14729" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14731" href="../Soundness/#plfa_plfa-part3-Soundness-14705" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14733" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-14735" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-14736" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-14740" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14742" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14743" href="../Soundness/#plfa_plfa-part3-Soundness-14714" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14745" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-14748" href="../Soundness/#plfa_plfa-part3-Soundness-14707" class="Bound">v′</a><a id="plfa_plfa-part3-Soundness-14750" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-14752" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-14754" href="../Untyped/#plfa_plfa-part2-Untyped-8074" class="Function">rename</a> <a id="plfa_plfa-part3-Soundness-14761" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part3-Soundness-14764" href="../Soundness/#plfa_plfa-part3-Soundness-14727" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-14766" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14768" href="../Soundness/#plfa_plfa-part3-Soundness-14710" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-14774" class="Comment">----------------------------</a>
  <a id="plfa_plfa-part3-Soundness-14805" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14807" href="../Soundness/#plfa_plfa-part3-Soundness-14714" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14809" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-14811" href="../Soundness/#plfa_plfa-part3-Soundness-14727" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-14813" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14815" href="../Soundness/#plfa_plfa-part3-Soundness-14710" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-14817" href="../Soundness/#plfa_plfa-part3-Soundness-14681" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-14836" href="../Soundness/#plfa_plfa-part3-Soundness-14836" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-14838" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14840" href="../Soundness/#plfa_plfa-part3-Soundness-11879" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-14855" href="../Denotational/#plfa_plfa-part3-Denotational-10539" class="Function">`⊑-refl</a> <a id="plfa_plfa-part3-Soundness-14863" href="../Soundness/#plfa_plfa-part3-Soundness-14836" class="Bound">d</a>
</pre><h3 id="代换反映了指称不变变量的情况">代换反映了指称不变：变量的情况</h3><p>我们基本上准备好证明同时代换反映指称不变了，也就是说，若 <code>γ ⊢ (subst σ M) ↓ v</code>，则对于任意 <code>k</code> 和某些 <code>δ</code>，有 <code>γ ⊢ σ k ↓ δ k</code> 且 <code>δ ⊢ M ↓ v</code>。我们首先从 <code>M</code> 是一个变量 <code>x</code> 的情况开始， 已知前提是 <code>γ ⊢ σ x ↓ v</code>，我们需要证明对于某个 <code>δ</code>，有 <code>δ ⊢ ` x ↓ v</code>。 我们选择的环境 <code>δ</code> 应当将 <code>x</code> 映射到 <code>v</code>，将任何其他变量映射到 <code>⊥</code>。</p><p>接下来我们定义将 <code>x</code> 映射到 <code>v</code>，将其他变量映射到 <code>⊥</code> 的环境，即 <code>const-env x v</code>。为了区分变量，我们定义以下函数来确定变量的相等性：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-_var≟_"></a><a id="plfa_plfa-part3-Soundness-15951" href="../Soundness/#plfa_plfa-part3-Soundness-15951" class="Function Operator">_var≟_</a> <a id="plfa_plfa-part3-Soundness-15958" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15960" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-15962" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15963" href="../Soundness/#plfa_plfa-part3-Soundness-15963" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-15964" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15966" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15968" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15969" href="../Soundness/#plfa_plfa-part3-Soundness-15969" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-15971" href="../Soundness/#plfa_plfa-part3-Soundness-15971" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-15973" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15975" href="../Soundness/#plfa_plfa-part3-Soundness-15963" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15977" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-15979" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-15980" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-15982" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15984" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1511" class="Record">Dec</a> <a id="plfa_plfa-part3-Soundness-15988" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15989" href="../Soundness/#plfa_plfa-part3-Soundness-15969" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-15991" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-15993" href="../Soundness/#plfa_plfa-part3-Soundness-15971" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-15994" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-15996" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-15998" href="../Soundness/#plfa_plfa-part3-Soundness-15951" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16003" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-16006" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-16009" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-16013" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-16018" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-16020" href="../Soundness/#plfa_plfa-part3-Soundness-15951" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16025" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16026" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-16028" class="Symbol">_)</a>  <a id="plfa_plfa-part3-Soundness-16032" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-16035" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-16038" class="Symbol">λ()</a>
<a id="plfa_plfa-part3-Soundness-16042" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16043" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-16045" class="Symbol">_)</a> <a id="plfa_plfa-part3-Soundness-16048" href="../Soundness/#plfa_plfa-part3-Soundness-15951" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16053" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-16056" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-16059" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-16062" class="Symbol">λ()</a>
<a id="plfa_plfa-part3-Soundness-16066" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16067" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-16069" href="../Soundness/#plfa_plfa-part3-Soundness-16069" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-16070" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16072" href="../Soundness/#plfa_plfa-part3-Soundness-15951" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16077" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16078" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-16080" href="../Soundness/#plfa_plfa-part3-Soundness-16080" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-16081" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16083" class="Keyword">with</a>  <a id="plfa_plfa-part3-Soundness-16089" href="../Soundness/#plfa_plfa-part3-Soundness-16069" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16091" href="../Soundness/#plfa_plfa-part3-Soundness-15951" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16096" href="../Soundness/#plfa_plfa-part3-Soundness-16080" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-16098" class="Symbol">...</a>                 <a id="plfa_plfa-part3-Soundness-16118" class="Symbol">|</a>  <a id="plfa_plfa-part3-Soundness-16121" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-16125" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-16130" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-16133" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-16137" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-16142" class="Symbol">...</a>                 <a id="plfa_plfa-part3-Soundness-16162" class="Symbol">|</a>  <a id="plfa_plfa-part3-Soundness-16165" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-16168" href="../Soundness/#plfa_plfa-part3-Soundness-16168" class="Bound">neq</a>   <a id="plfa_plfa-part3-Soundness-16174" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-16177" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-16180" class="Symbol">λ{</a><a id="plfa_plfa-part3-Soundness-16182" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-16187" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16189" href="../Soundness/#plfa_plfa-part3-Soundness-16168" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-16193" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-16197" class="Symbol">}</a>

<a id="plfa_plfa-part3-Soundness-var≟-refl"></a><a id="plfa_plfa-part3-Soundness-16200" href="../Soundness/#plfa_plfa-part3-Soundness-16200" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-16210" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16212" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-16214" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16215" href="../Soundness/#plfa_plfa-part3-Soundness-16215" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-16216" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16218" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16219" href="../Soundness/#plfa_plfa-part3-Soundness-16219" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16221" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16223" href="../Soundness/#plfa_plfa-part3-Soundness-16215" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-16225" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-16227" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-16228" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16230" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16232" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16233" href="../Soundness/#plfa_plfa-part3-Soundness-16219" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16235" href="../Soundness/#plfa_plfa-part3-Soundness-15951" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16240" href="../Soundness/#plfa_plfa-part3-Soundness-16219" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-16241" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16243" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-16245" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-16249" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-16254" href="../Soundness/#plfa_plfa-part3-Soundness-16200" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-16264" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-16266" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16268" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-16273" href="../Soundness/#plfa_plfa-part3-Soundness-16200" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-16283" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16284" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-16286" href="../Soundness/#plfa_plfa-part3-Soundness-16286" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-16287" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16289" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-16297" href="../Soundness/#plfa_plfa-part3-Soundness-16200" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-16307" href="../Soundness/#plfa_plfa-part3-Soundness-16286" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16309" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16311" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><p>接着我们用 <code>var≟</code> 来定义 <code>const-env</code>：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-const-env"></a><a id="plfa_plfa-part3-Soundness-16411" href="../Soundness/#plfa_plfa-part3-Soundness-16411" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-16421" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16423" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-16425" href="../Soundness/#plfa_plfa-part3-Soundness-16425" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-16426" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16428" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16430" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16431" href="../Soundness/#plfa_plfa-part3-Soundness-16431" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16433" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16435" href="../Soundness/#plfa_plfa-part3-Soundness-16425" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-16437" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-16439" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-16440" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16442" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16444" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-16450" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16452" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-16456" href="../Soundness/#plfa_plfa-part3-Soundness-16425" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Soundness-16458" href="../Soundness/#plfa_plfa-part3-Soundness-16411" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-16468" href="../Soundness/#plfa_plfa-part3-Soundness-16468" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16470" href="../Soundness/#plfa_plfa-part3-Soundness-16470" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-16472" href="../Soundness/#plfa_plfa-part3-Soundness-16472" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-16474" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16479" href="../Soundness/#plfa_plfa-part3-Soundness-16468" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16481" href="../Soundness/#plfa_plfa-part3-Soundness-15951" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16486" href="../Soundness/#plfa_plfa-part3-Soundness-16472" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-16488" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-16504" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16506" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-16510" class="Symbol">_</a>       <a id="plfa_plfa-part3-Soundness-16518" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16520" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-16522" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-16538" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16540" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-16543" class="Symbol">_</a>        <a id="plfa_plfa-part3-Soundness-16552" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16554" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a>
</pre><p>当然，<code>const-env x v</code> 将 <code>x</code> 映射到值 <code>v</code>：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-same-const-env"></a><a id="plfa_plfa-part3-Soundness-16663" href="../Soundness/#plfa_plfa-part3-Soundness-16663" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-16678" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16680" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-16682" href="../Soundness/#plfa_plfa-part3-Soundness-16682" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-16683" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16685" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16686" href="../Soundness/#plfa_plfa-part3-Soundness-16686" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16688" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16690" href="../Soundness/#plfa_plfa-part3-Soundness-16682" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-16692" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-16694" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-16695" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16697" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16698" href="../Soundness/#plfa_plfa-part3-Soundness-16698" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-16699" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16701" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16703" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16704" href="../Soundness/#plfa_plfa-part3-Soundness-16411" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-16714" href="../Soundness/#plfa_plfa-part3-Soundness-16686" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16716" href="../Soundness/#plfa_plfa-part3-Soundness-16698" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-16717" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16719" href="../Soundness/#plfa_plfa-part3-Soundness-16686" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16721" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-16723" href="../Soundness/#plfa_plfa-part3-Soundness-16698" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-16725" href="../Soundness/#plfa_plfa-part3-Soundness-16663" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-16740" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16741" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-16743" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16745" href="../Soundness/#plfa_plfa-part3-Soundness-16745" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-16746" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16748" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-16756" href="../Soundness/#plfa_plfa-part3-Soundness-16200" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-16766" href="../Soundness/#plfa_plfa-part3-Soundness-16745" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16768" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16770" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><p>以及 <code>const-env x v</code> 将 <code>y</code> 映射到 <code>⊥</code>，且 <code>x ≢ y</code>。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-diff-const-env"></a><a id="plfa_plfa-part3-Soundness-16899" href="../Soundness/#plfa_plfa-part3-Soundness-16899" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-16914" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16916" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-16918" href="../Soundness/#plfa_plfa-part3-Soundness-16918" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-16919" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16921" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16922" href="../Soundness/#plfa_plfa-part3-Soundness-16922" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16924" href="../Soundness/#plfa_plfa-part3-Soundness-16924" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-16926" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16928" href="../Soundness/#plfa_plfa-part3-Soundness-16918" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-16930" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-16932" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-16933" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16935" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16936" href="../Soundness/#plfa_plfa-part3-Soundness-16936" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-16937" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-16941" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16943" href="../Soundness/#plfa_plfa-part3-Soundness-16922" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16945" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#830" class="Function Operator">≢</a> <a id="plfa_plfa-part3-Soundness-16947" href="../Soundness/#plfa_plfa-part3-Soundness-16924" class="Bound">y</a>
    <a id="plfa_plfa-part3-Soundness-16953" class="Comment">-------------------</a>
  <a id="plfa_plfa-part3-Soundness-16975" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16977" href="../Soundness/#plfa_plfa-part3-Soundness-16411" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-16987" href="../Soundness/#plfa_plfa-part3-Soundness-16922" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16989" href="../Soundness/#plfa_plfa-part3-Soundness-16936" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-16991" href="../Soundness/#plfa_plfa-part3-Soundness-16924" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-16993" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-16995" href="../Denotational/#plfa_plfa-part3-Denotational-4977" class="InductiveConstructor">⊥</a>
<a id="plfa_plfa-part3-Soundness-16997" href="../Soundness/#plfa_plfa-part3-Soundness-16899" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-17012" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17013" href="../Soundness/#plfa_plfa-part3-Soundness-17013" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-17014" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17016" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17017" href="../Soundness/#plfa_plfa-part3-Soundness-17017" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-17018" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17020" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17021" href="../Soundness/#plfa_plfa-part3-Soundness-17021" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-17022" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17024" href="../Soundness/#plfa_plfa-part3-Soundness-17024" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-17028" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-17033" href="../Soundness/#plfa_plfa-part3-Soundness-17017" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-17035" href="../Soundness/#plfa_plfa-part3-Soundness-15951" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-17040" href="../Soundness/#plfa_plfa-part3-Soundness-17021" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-17042" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-17047" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17049" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-17053" href="../Soundness/#plfa_plfa-part3-Soundness-17053" class="Bound">eq</a>  <a id="plfa_plfa-part3-Soundness-17057" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-17060" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html#628" class="Function">⊥-elim</a> <a id="plfa_plfa-part3-Soundness-17067" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17068" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-17072" href="../Soundness/#plfa_plfa-part3-Soundness-17053" class="Bound">eq</a><a id="plfa_plfa-part3-Soundness-17074" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-17076" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-17081" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17083" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-17086" class="Symbol">_</a>    <a id="plfa_plfa-part3-Soundness-17091" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-17094" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><p>于是我们为 <code>δ</code> 选择 <code>const-env x v</code> 并通过 <code>var</code> 规则得到了 <code>δ ⊢ ` x ↓ v</code>。</p><p>剩下的就是证明 <code>γ `⊢ σ ↓ δ</code>，以及对于任意 <code>k</code> 有 <code>δ ⊢ M ↓ v</code>，据此我们 就能为 <code>δ</code> 选择 <code>const-env x v</code>。我们有两种情况需要考虑：<code>x ≡ y</code> 或 <code>x ≢ y</code>。</p><p>现在完成该证明的两种情况：</p><ul><li>对于 <code>x ≡ y</code> 的情况，我们需要证明 <code>γ ⊢ σ y ↓ v</code>，不过这就是我们的前提。</li><li>对于 <code>x ≢ y,</code> 的情况， we need to show that <code>γ ⊢ σ y ↓ ⊥</code>, which we do via rule <code>⊥-intro</code>.</li></ul><p>这样，我们就完成了同时代换反映指称不变的证明中变量的情况。 以下是正式的证明：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-reflect-var"></a><a id="plfa_plfa-part3-Soundness-18176" href="../Soundness/#plfa_plfa-part3-Soundness-18176" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-18194" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18196" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-18198" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18199" href="../Soundness/#plfa_plfa-part3-Soundness-18199" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18201" href="../Soundness/#plfa_plfa-part3-Soundness-18201" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18202" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18204" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18205" href="../Soundness/#plfa_plfa-part3-Soundness-18205" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18207" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18209" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-18213" href="../Soundness/#plfa_plfa-part3-Soundness-18201" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18214" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18216" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18217" href="../Soundness/#plfa_plfa-part3-Soundness-18217" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18219" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18221" href="../Soundness/#plfa_plfa-part3-Soundness-18199" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18223" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-18225" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-18226" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18228" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18229" href="../Soundness/#plfa_plfa-part3-Soundness-18229" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-18230" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18232" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18233" href="../Soundness/#plfa_plfa-part3-Soundness-18233" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18235" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18237" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-18243" href="../Soundness/#plfa_plfa-part3-Soundness-18199" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18245" href="../Soundness/#plfa_plfa-part3-Soundness-18201" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18246" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-18250" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-18252" href="../Soundness/#plfa_plfa-part3-Soundness-18205" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18254" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-18256" href="../Soundness/#plfa_plfa-part3-Soundness-18233" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18258" href="../Soundness/#plfa_plfa-part3-Soundness-18217" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18260" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-18262" href="../Soundness/#plfa_plfa-part3-Soundness-18229" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-18268" class="Comment">-----------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-18312" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-18314" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-18317" href="../Soundness/#plfa_plfa-part3-Soundness-18317" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-18319" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-18321" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-18325" href="../Soundness/#plfa_plfa-part3-Soundness-18199" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18327" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-18329" href="../Soundness/#plfa_plfa-part3-Soundness-18205" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18331" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-18334" href="../Soundness/#plfa_plfa-part3-Soundness-18233" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18336" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-18338" href="../Soundness/#plfa_plfa-part3-Soundness-18317" class="Bound">δ</a>  <a id="plfa_plfa-part3-Soundness-18341" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-18344" href="../Soundness/#plfa_plfa-part3-Soundness-18317" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-18346" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-18348" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-18350" href="../Soundness/#plfa_plfa-part3-Soundness-18217" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18352" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-18354" href="../Soundness/#plfa_plfa-part3-Soundness-18229" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-18356" href="../Soundness/#plfa_plfa-part3-Soundness-18176" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-18374" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18375" href="../Soundness/#plfa_plfa-part3-Soundness-18375" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-18376" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18378" href="../Soundness/#plfa_plfa-part3-Soundness-18378" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18379" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18381" href="../Soundness/#plfa_plfa-part3-Soundness-18381" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-18382" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18384" href="../Soundness/#plfa_plfa-part3-Soundness-18384" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-18385" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18387" href="../Soundness/#plfa_plfa-part3-Soundness-18387" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-18388" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18390" href="../Soundness/#plfa_plfa-part3-Soundness-18390" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-18391" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18393" href="../Soundness/#plfa_plfa-part3-Soundness-18393" class="Bound">xv</a>
  <a id="plfa_plfa-part3-Soundness-18398" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-18406" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-18410" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-18411" href="../Soundness/#plfa_plfa-part3-Soundness-16663" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-18426" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18427" href="../Soundness/#plfa_plfa-part3-Soundness-18375" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-18428" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18430" href="../Soundness/#plfa_plfa-part3-Soundness-18384" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-18431" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18433" href="../Soundness/#plfa_plfa-part3-Soundness-18387" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-18434" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-18437" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-18443" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-18445" href="../Soundness/#plfa_plfa-part3-Soundness-16411" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-18455" href="../Soundness/#plfa_plfa-part3-Soundness-18384" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18457" href="../Soundness/#plfa_plfa-part3-Soundness-18387" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-18459" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-18461" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-18463" href="../Soundness/#plfa_plfa-part3-Soundness-18496" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-18476" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-18478" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-18482" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-18484" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Soundness-18488" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-18496" href="../Soundness/#plfa_plfa-part3-Soundness-18496" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-18509" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18511" href="../Soundness/#plfa_plfa-part3-Soundness-18381" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18513" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-18516" href="../Soundness/#plfa_plfa-part3-Soundness-18390" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18518" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-18520" href="../Soundness/#plfa_plfa-part3-Soundness-16411" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-18530" href="../Soundness/#plfa_plfa-part3-Soundness-18384" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18532" href="../Soundness/#plfa_plfa-part3-Soundness-18387" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-18536" href="../Soundness/#plfa_plfa-part3-Soundness-18496" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-18549" href="../Soundness/#plfa_plfa-part3-Soundness-18549" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-18551" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-18556" href="../Soundness/#plfa_plfa-part3-Soundness-18384" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18558" href="../Soundness/#plfa_plfa-part3-Soundness-15951" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-18563" href="../Soundness/#plfa_plfa-part3-Soundness-18549" class="Bound">y</a>
  <a id="plfa_plfa-part3-Soundness-18567" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-18571" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-18573" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-18577" href="../Soundness/#plfa_plfa-part3-Soundness-18577" class="Bound">x≡y</a> <a id="plfa_plfa-part3-Soundness-18581" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-18589" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-18593" href="../Soundness/#plfa_plfa-part3-Soundness-18577" class="Bound">x≡y</a> <a id="plfa_plfa-part3-Soundness-18597" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-18599" href="../Soundness/#plfa_plfa-part3-Soundness-16663" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-18614" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18615" href="../Soundness/#plfa_plfa-part3-Soundness-18375" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-18616" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18618" href="../Soundness/#plfa_plfa-part3-Soundness-18384" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-18619" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18621" href="../Soundness/#plfa_plfa-part3-Soundness-18387" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-18622" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18624" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-18626" href="../Soundness/#plfa_plfa-part3-Soundness-18393" class="Bound">xv</a>
  <a id="plfa_plfa-part3-Soundness-18631" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-18635" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-18637" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-18640" href="../Soundness/#plfa_plfa-part3-Soundness-18640" class="Bound">x≢y</a> <a id="plfa_plfa-part3-Soundness-18644" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-18652" href="../Soundness/#plfa_plfa-part3-Soundness-16899" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-18667" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18668" href="../Soundness/#plfa_plfa-part3-Soundness-18375" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-18669" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18671" href="../Soundness/#plfa_plfa-part3-Soundness-18384" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-18672" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18674" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-18675" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18677" href="../Soundness/#plfa_plfa-part3-Soundness-18387" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-18678" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18680" href="../Soundness/#plfa_plfa-part3-Soundness-18640" class="Bound">x≢y</a> <a id="plfa_plfa-part3-Soundness-18684" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-18686" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
</pre><h3 id="代换与环境的构造">代换与环境的构造</h3><p>每一个代换都能产生可求值为 <code>⊥</code> 的项。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-⊥"></a><a id="plfa_plfa-part3-Soundness-18872" href="../Soundness/#plfa_plfa-part3-Soundness-18872" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-18880" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18882" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-18884" href="../Soundness/#plfa_plfa-part3-Soundness-18884" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18886" href="../Soundness/#plfa_plfa-part3-Soundness-18886" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18887" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18889" href="../Soundness/#plfa_plfa-part3-Soundness-18889" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18891" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18893" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-18897" href="../Soundness/#plfa_plfa-part3-Soundness-18886" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18898" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18900" href="../Soundness/#plfa_plfa-part3-Soundness-18900" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18902" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18904" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-18910" href="../Soundness/#plfa_plfa-part3-Soundness-18884" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18912" href="../Soundness/#plfa_plfa-part3-Soundness-18886" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18913" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Soundness-18919" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Soundness-18939" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-18941" href="../Soundness/#plfa_plfa-part3-Soundness-18889" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18943" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-18946" href="../Soundness/#plfa_plfa-part3-Soundness-18900" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18948" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-18950" href="../Denotational/#plfa_plfa-part3-Denotational-9950" class="Function">`⊥</a>
<a id="plfa_plfa-part3-Soundness-18953" href="../Soundness/#plfa_plfa-part3-Soundness-18872" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-18961" href="../Soundness/#plfa_plfa-part3-Soundness-18961" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18963" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-18965" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
</pre><p>若代换产生的项的求值结果为 <code>γ₁</code> 或 <code>γ₂</code> 中的值，那么这些项的求值结果也是 <code>γ₁ ⊔ γ₂</code> 中的值。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-⊔"></a><a id="plfa_plfa-part3-Soundness-19198" href="../Soundness/#plfa_plfa-part3-Soundness-19198" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-19206" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19208" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-19210" href="../Soundness/#plfa_plfa-part3-Soundness-19210" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-19212" href="../Soundness/#plfa_plfa-part3-Soundness-19212" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-19213" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-19215" href="../Soundness/#plfa_plfa-part3-Soundness-19215" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-19217" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19219" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-19223" href="../Soundness/#plfa_plfa-part3-Soundness-19212" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-19224" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-19226" href="../Soundness/#plfa_plfa-part3-Soundness-19226" class="Bound">γ₁</a> <a id="plfa_plfa-part3-Soundness-19229" href="../Soundness/#plfa_plfa-part3-Soundness-19229" class="Bound">γ₂</a> <a id="plfa_plfa-part3-Soundness-19232" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19234" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-19238" href="../Soundness/#plfa_plfa-part3-Soundness-19210" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-19239" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-19241" href="../Soundness/#plfa_plfa-part3-Soundness-19241" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-19243" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19245" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-19251" href="../Soundness/#plfa_plfa-part3-Soundness-19210" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-19253" href="../Soundness/#plfa_plfa-part3-Soundness-19212" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-19254" class="Symbol">}</a>
           <a id="plfa_plfa-part3-Soundness-19267" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-19269" href="../Soundness/#plfa_plfa-part3-Soundness-19215" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-19271" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-19274" href="../Soundness/#plfa_plfa-part3-Soundness-19241" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-19276" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-19278" href="../Soundness/#plfa_plfa-part3-Soundness-19226" class="Bound">γ₁</a>
           <a id="plfa_plfa-part3-Soundness-19292" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-19294" href="../Soundness/#plfa_plfa-part3-Soundness-19215" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-19296" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-19299" href="../Soundness/#plfa_plfa-part3-Soundness-19241" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-19301" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-19303" href="../Soundness/#plfa_plfa-part3-Soundness-19229" class="Bound">γ₂</a>
             <a id="plfa_plfa-part3-Soundness-19319" class="Comment">-------------------------</a>
           <a id="plfa_plfa-part3-Soundness-19356" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-19358" href="../Soundness/#plfa_plfa-part3-Soundness-19215" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-19360" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-19363" href="../Soundness/#plfa_plfa-part3-Soundness-19241" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-19365" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-19367" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-19368" href="../Soundness/#plfa_plfa-part3-Soundness-19226" class="Bound">γ₁</a> <a id="plfa_plfa-part3-Soundness-19371" href="../Denotational/#plfa_plfa-part3-Denotational-9979" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-19374" href="../Soundness/#plfa_plfa-part3-Soundness-19229" class="Bound">γ₂</a><a id="plfa_plfa-part3-Soundness-19376" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-19378" href="../Soundness/#plfa_plfa-part3-Soundness-19198" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-19386" href="../Soundness/#plfa_plfa-part3-Soundness-19386" class="Bound">γ₁-ok</a> <a id="plfa_plfa-part3-Soundness-19392" href="../Soundness/#plfa_plfa-part3-Soundness-19392" class="Bound">γ₂-ok</a> <a id="plfa_plfa-part3-Soundness-19398" href="../Soundness/#plfa_plfa-part3-Soundness-19398" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-19400" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-19402" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-19410" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-19411" href="../Soundness/#plfa_plfa-part3-Soundness-19386" class="Bound">γ₁-ok</a> <a id="plfa_plfa-part3-Soundness-19417" href="../Soundness/#plfa_plfa-part3-Soundness-19398" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-19418" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-19420" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-19421" href="../Soundness/#plfa_plfa-part3-Soundness-19392" class="Bound">γ₂-ok</a> <a id="plfa_plfa-part3-Soundness-19427" href="../Soundness/#plfa_plfa-part3-Soundness-19398" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-19428" class="Symbol">)</a>
</pre><h3 id="λ-构造子是单射的">λ 构造子是单射的</h3><pre class="Agda"><a id="plfa_plfa-part3-Soundness-lambda-inj"></a><a id="plfa_plfa-part3-Soundness-19508" href="../Soundness/#plfa_plfa-part3-Soundness-19508" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-19519" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19521" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-19523" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-19524" href="../Soundness/#plfa_plfa-part3-Soundness-19524" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-19525" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-19527" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-19528" href="../Soundness/#plfa_plfa-part3-Soundness-19528" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-19530" href="../Soundness/#plfa_plfa-part3-Soundness-19530" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-19532" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19534" href="../Soundness/#plfa_plfa-part3-Soundness-19524" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-19536" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-19538" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-19540" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-19542" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-19544" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-19548" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-19550" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a> <a id="plfa_plfa-part3-Soundness-19554" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-19555" class="Argument">A</a> <a id="plfa_plfa-part3-Soundness-19557" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-19559" href="../Soundness/#plfa_plfa-part3-Soundness-19524" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-19561" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-19563" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-19564" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-19566" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-19567" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-19569" href="../Soundness/#plfa_plfa-part3-Soundness-19528" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-19570" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-19572" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-19573" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-19575" href="../Soundness/#plfa_plfa-part3-Soundness-19530" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-19576" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Soundness-19582" class="Comment">---------------------------</a>
  <a id="plfa_plfa-part3-Soundness-19612" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-19614" href="../Soundness/#plfa_plfa-part3-Soundness-19528" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-19616" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-19618" href="../Soundness/#plfa_plfa-part3-Soundness-19530" class="Bound">N</a>
<a id="plfa_plfa-part3-Soundness-19620" href="../Soundness/#plfa_plfa-part3-Soundness-19508" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-19631" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-19636" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-19638" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><h3 id="同时代换反映了指称相等">同时代换反映了指称相等</h3><p>本节中我们要证明一个核心引理，即代换反映了指称不变。也就是说，若 <code>γ ⊢ subst σ M ↓ v</code>，则 <code>δ ⊢ M ↓ v</code> 且对于某个 <code>δ</code> 有 <code>γ `⊢ σ ↓ δ</code>。 我们通过对 <code>γ ⊢ subst σ M ↓ v</code> 的推导过程进行归纳来证明， 为此需要稍微重述一下该引理，将前提更改为 <code>γ ⊢ L ↓ v</code> 和 <code>L ≡ subst σ M</code>。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-split"></a><a id="plfa_plfa-part3-Soundness-20278" href="../Soundness/#plfa_plfa-part3-Soundness-20278" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-20284" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20286" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-20288" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20289" href="../Soundness/#plfa_plfa-part3-Soundness-20289" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-20290" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20292" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20293" href="../Soundness/#plfa_plfa-part3-Soundness-20293" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20295" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20297" href="../Soundness/#plfa_plfa-part3-Soundness-20289" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20299" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20301" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-20303" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20305" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20306" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20308" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20309" href="../Soundness/#plfa_plfa-part3-Soundness-20309" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20311" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20313" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20317" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20318" href="../Soundness/#plfa_plfa-part3-Soundness-20289" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20320" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20322" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20323" class="Symbol">)}</a> <a id="plfa_plfa-part3-Soundness-20326" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20327" href="../Soundness/#plfa_plfa-part3-Soundness-20327" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-20328" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-20332" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20334" href="../Soundness/#plfa_plfa-part3-Soundness-20309" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20336" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20338" href="../Soundness/#plfa_plfa-part3-Soundness-20293" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20340" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20342" href="../Soundness/#plfa_plfa-part3-Soundness-20327" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-20348" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part3-Soundness-20377" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20379" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20380" href="../Denotational/#plfa_plfa-part3-Denotational-9222" class="Function">init</a> <a id="plfa_plfa-part3-Soundness-20385" href="../Soundness/#plfa_plfa-part3-Soundness-20309" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20387" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-20390" href="../Denotational/#plfa_plfa-part3-Denotational-9277" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-20395" href="../Soundness/#plfa_plfa-part3-Soundness-20309" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-20396" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-20398" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20400" href="../Soundness/#plfa_plfa-part3-Soundness-20293" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20402" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20404" href="../Soundness/#plfa_plfa-part3-Soundness-20327" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-20406" href="../Soundness/#plfa_plfa-part3-Soundness-20278" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-20412" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20413" class="Argument">δ</a> <a id="plfa_plfa-part3-Soundness-20415" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20417" href="../Soundness/#plfa_plfa-part3-Soundness-20417" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-20418" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20420" href="../Soundness/#plfa_plfa-part3-Soundness-20420" class="Bound">δMv</a> <a id="plfa_plfa-part3-Soundness-20424" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-20432" href="../Denotational/#plfa_plfa-part3-Denotational-9326" class="Function">init-last</a> <a id="plfa_plfa-part3-Soundness-20442" href="../Soundness/#plfa_plfa-part3-Soundness-20417" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20444" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20446" href="../Soundness/#plfa_plfa-part3-Soundness-20420" class="Bound">δMv</a>

<a id="plfa_plfa-part3-Soundness-subst-reflect"></a><a id="plfa_plfa-part3-Soundness-20451" href="../Soundness/#plfa_plfa-part3-Soundness-20451" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-20465" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20467" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-20469" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20470" href="../Soundness/#plfa_plfa-part3-Soundness-20470" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20472" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20473" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20475" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20476" href="../Soundness/#plfa_plfa-part3-Soundness-20476" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20478" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20480" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20484" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20485" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20487" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20488" href="../Soundness/#plfa_plfa-part3-Soundness-20488" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20490" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20492" href="../Soundness/#plfa_plfa-part3-Soundness-20470" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20494" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20496" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20497" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20499" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20500" href="../Soundness/#plfa_plfa-part3-Soundness-20500" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-20501" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20503" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20504" href="../Soundness/#plfa_plfa-part3-Soundness-20504" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-20506" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20508" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-20510" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20512" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20513" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20515" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20516" href="../Soundness/#plfa_plfa-part3-Soundness-20516" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-20518" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20520" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-20526" href="../Soundness/#plfa_plfa-part3-Soundness-20470" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20528" href="../Soundness/#plfa_plfa-part3-Soundness-20472" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20529" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-20533" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20535" href="../Soundness/#plfa_plfa-part3-Soundness-20476" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20537" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20539" href="../Soundness/#plfa_plfa-part3-Soundness-20504" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-20541" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20543" href="../Soundness/#plfa_plfa-part3-Soundness-20500" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-20547" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20549" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part3-Soundness-20555" href="../Soundness/#plfa_plfa-part3-Soundness-20516" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-20557" href="../Soundness/#plfa_plfa-part3-Soundness-20488" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20559" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-20561" href="../Soundness/#plfa_plfa-part3-Soundness-20504" class="Bound">L</a>
    <a id="plfa_plfa-part3-Soundness-20567" class="Comment">---------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-20609" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20611" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-20614" href="../Soundness/#plfa_plfa-part3-Soundness-20614" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20616" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-20618" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20622" href="../Soundness/#plfa_plfa-part3-Soundness-20470" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20624" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-20626" href="../Soundness/#plfa_plfa-part3-Soundness-20476" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20628" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-20631" href="../Soundness/#plfa_plfa-part3-Soundness-20516" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-20633" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20635" href="../Soundness/#plfa_plfa-part3-Soundness-20614" class="Bound">γ</a>  <a id="plfa_plfa-part3-Soundness-20638" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-20641" href="../Soundness/#plfa_plfa-part3-Soundness-20614" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20643" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20645" href="../Soundness/#plfa_plfa-part3-Soundness-20488" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20647" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20649" href="../Soundness/#plfa_plfa-part3-Soundness-20500" class="Bound">v</a>

<a id="plfa_plfa-part3-Soundness-20652" href="../Soundness/#plfa_plfa-part3-Soundness-20451" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-20666" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20667" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-20669" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20671" href="../Soundness/#plfa_plfa-part3-Soundness-20671" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-20672" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-20674" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-20676" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20678" href="../Soundness/#plfa_plfa-part3-Soundness-20678" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-20679" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20681" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20682" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-20686" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20687" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-20689" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20691" href="../Soundness/#plfa_plfa-part3-Soundness-20691" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-20692" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-20695" href="../Soundness/#plfa_plfa-part3-Soundness-20695" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-20699" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-20704" href="../Soundness/#plfa_plfa-part3-Soundness-20671" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-20706" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-20710" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20712" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-20714" href="../Soundness/#plfa_plfa-part3-Soundness-20714" class="Bound">x</a>  <a id="plfa_plfa-part3-Soundness-20717" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-20722" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-20726" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20727" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-20729" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20731" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-20732" class="Symbol">}</a>
<a id="plfa_plfa-part3-Soundness-20734" class="Symbol">...</a>           <a id="plfa_plfa-part3-Soundness-20748" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20750" href="../Soundness/#plfa_plfa-part3-Soundness-20750" class="Bound">yv</a>  <a id="plfa_plfa-part3-Soundness-20754" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-20762" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-20766" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-20770" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20772" href="../Soundness/#plfa_plfa-part3-Soundness-18176" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-20790" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20791" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-20793" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20795" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-20796" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20798" href="../Soundness/#plfa_plfa-part3-Soundness-20750" class="Bound">yv</a>
<a id="plfa_plfa-part3-Soundness-20801" href="../Soundness/#plfa_plfa-part3-Soundness-20451" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-20815" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20816" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-20818" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20820" href="../Soundness/#plfa_plfa-part3-Soundness-20820" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-20821" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20823" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20824" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-20828" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20829" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-20831" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20833" href="../Soundness/#plfa_plfa-part3-Soundness-20833" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-20834" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-20837" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-20840" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20842" href="../Soundness/#plfa_plfa-part3-Soundness-20842" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-20845" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-20847" href="../Soundness/#plfa_plfa-part3-Soundness-20847" class="Bound">M₂</a>
<a id="plfa_plfa-part3-Soundness-20850" href="../Soundness/#plfa_plfa-part3-Soundness-20451" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-20864" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20865" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-20867" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20869" href="../Soundness/#plfa_plfa-part3-Soundness-20869" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-20870" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20872" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20873" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-20877" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20878" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-20880" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20882" href="../Soundness/#plfa_plfa-part3-Soundness-20882" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-20883" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-20886" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-20889" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20891" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-20893" href="../Soundness/#plfa_plfa-part3-Soundness-20893" class="Bound">M′</a>

<a id="plfa_plfa-part3-Soundness-20897" href="../Soundness/#plfa_plfa-part3-Soundness-20451" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-20911" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20912" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-20914" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20916" href="../Soundness/#plfa_plfa-part3-Soundness-20916" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-20917" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-20919" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-20921" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20923" href="../Soundness/#plfa_plfa-part3-Soundness-20923" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-20924" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20926" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20927" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-20934" href="../Soundness/#plfa_plfa-part3-Soundness-20934" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-20937" href="../Soundness/#plfa_plfa-part3-Soundness-20937" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-20939" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-20941" href="../Soundness/#plfa_plfa-part3-Soundness-20941" class="Bound">eqL</a>
         <a id="plfa_plfa-part3-Soundness-20954" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-20959" href="../Soundness/#plfa_plfa-part3-Soundness-20916" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-20961" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-20968" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20970" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-20972" href="../Soundness/#plfa_plfa-part3-Soundness-20972" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-20974" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-20979" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-20986" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-20989" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-20992" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-20999" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21001" href="../Soundness/#plfa_plfa-part3-Soundness-21001" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-21004" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-21012" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-21016" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-21020" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21022" href="../Soundness/#plfa_plfa-part3-Soundness-18176" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-21040" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21041" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21043" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21045" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21046" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21048" href="../Soundness/#plfa_plfa-part3-Soundness-21001" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-21051" href="../Soundness/#plfa_plfa-part3-Soundness-20451" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21065" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21066" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-21073" href="../Soundness/#plfa_plfa-part3-Soundness-21073" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-21076" href="../Soundness/#plfa_plfa-part3-Soundness-21076" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-21078" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21080" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-21083" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21085" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-21087" href="../Soundness/#plfa_plfa-part3-Soundness-21087" class="Bound">M′</a>
<a id="plfa_plfa-part3-Soundness-21090" href="../Soundness/#plfa_plfa-part3-Soundness-20451" class="Function">subst-reflect</a><a id="plfa_plfa-part3-Soundness-21103" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21104" href="../Soundness/#plfa_plfa-part3-Soundness-21104" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-21105" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21107" href="../Soundness/#plfa_plfa-part3-Soundness-21107" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-21108" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21110" href="../Soundness/#plfa_plfa-part3-Soundness-21110" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-21111" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21113" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21115" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21117" href="../Soundness/#plfa_plfa-part3-Soundness-21117" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21118" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21120" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21121" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-21128" href="../Soundness/#plfa_plfa-part3-Soundness-21128" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-21131" href="../Soundness/#plfa_plfa-part3-Soundness-21131" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-21133" class="Symbol">)</a>
   <a id="plfa_plfa-part3-Soundness-21138" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-21143" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21145" href="../Soundness/#plfa_plfa-part3-Soundness-21145" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-21148" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-21150" href="../Soundness/#plfa_plfa-part3-Soundness-21150" class="Bound">M₂</a>
     <a id="plfa_plfa-part3-Soundness-21158" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21163" href="../Soundness/#plfa_plfa-part3-Soundness-20451" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21177" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21178" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-21180" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21182" href="../Soundness/#plfa_plfa-part3-Soundness-21145" class="Bound">M₁</a><a id="plfa_plfa-part3-Soundness-21184" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21186" href="../Soundness/#plfa_plfa-part3-Soundness-21128" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-21189" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-21194" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21196" href="../Soundness/#plfa_plfa-part3-Soundness-20451" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21210" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21211" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-21213" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21215" href="../Soundness/#plfa_plfa-part3-Soundness-21150" class="Bound">M₂</a><a id="plfa_plfa-part3-Soundness-21217" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21219" href="../Soundness/#plfa_plfa-part3-Soundness-21131" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-21222" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-21227" class="Symbol">...</a>     <a id="plfa_plfa-part3-Soundness-21235" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21237" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21239" href="../Soundness/#plfa_plfa-part3-Soundness-21239" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-21242" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21244" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21246" href="../Soundness/#plfa_plfa-part3-Soundness-21246" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-21255" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21257" href="../Soundness/#plfa_plfa-part3-Soundness-21257" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-21260" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21262" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21264" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21266" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21268" href="../Soundness/#plfa_plfa-part3-Soundness-21268" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-21271" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21273" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21275" href="../Soundness/#plfa_plfa-part3-Soundness-21275" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-21284" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21286" href="../Soundness/#plfa_plfa-part3-Soundness-21286" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-21289" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21291" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21293" class="Symbol">=</a>
     <a id="plfa_plfa-part3-Soundness-21300" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21302" href="../Soundness/#plfa_plfa-part3-Soundness-21239" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-21305" href="../Denotational/#plfa_plfa-part3-Denotational-9979" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-21308" href="../Soundness/#plfa_plfa-part3-Soundness-21268" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-21311" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21313" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21315" href="../Soundness/#plfa_plfa-part3-Soundness-19198" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-21323" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21324" class="Argument">γ₁</a> <a id="plfa_plfa-part3-Soundness-21327" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21329" href="../Soundness/#plfa_plfa-part3-Soundness-21239" class="Bound">δ₁</a><a id="plfa_plfa-part3-Soundness-21331" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21333" class="Argument">γ₂</a> <a id="plfa_plfa-part3-Soundness-21336" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21338" href="../Soundness/#plfa_plfa-part3-Soundness-21268" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-21340" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21342" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21344" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21346" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21347" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21349" href="../Soundness/#plfa_plfa-part3-Soundness-21246" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-21358" href="../Soundness/#plfa_plfa-part3-Soundness-21275" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-21367" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a>
                    <a id="plfa_plfa-part3-Soundness-21389" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-21396" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21397" href="../Denotational/#plfa_plfa-part3-Denotational-32332" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-21403" href="../Soundness/#plfa_plfa-part3-Soundness-21257" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-21406" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21407" href="../Denotational/#plfa_plfa-part3-Denotational-10610" class="Function">⊑-env-conj-R1</a> <a id="plfa_plfa-part3-Soundness-21421" href="../Soundness/#plfa_plfa-part3-Soundness-21239" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-21424" href="../Soundness/#plfa_plfa-part3-Soundness-21268" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-21426" class="Symbol">))</a>
                           <a id="plfa_plfa-part3-Soundness-21456" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21457" href="../Denotational/#plfa_plfa-part3-Denotational-32332" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-21463" href="../Soundness/#plfa_plfa-part3-Soundness-21286" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-21466" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21467" href="../Denotational/#plfa_plfa-part3-Denotational-10716" class="Function">⊑-env-conj-R2</a> <a id="plfa_plfa-part3-Soundness-21481" href="../Soundness/#plfa_plfa-part3-Soundness-21239" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-21484" href="../Soundness/#plfa_plfa-part3-Soundness-21268" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-21486" class="Symbol">))</a> <a id="plfa_plfa-part3-Soundness-21489" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21491" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a>

<a id="plfa_plfa-part3-Soundness-21494" href="../Soundness/#plfa_plfa-part3-Soundness-20451" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21508" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21509" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-21511" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21513" href="../Soundness/#plfa_plfa-part3-Soundness-21513" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-21514" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21516" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21518" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21520" href="../Soundness/#plfa_plfa-part3-Soundness-21520" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21521" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21523" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21524" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21532" href="../Soundness/#plfa_plfa-part3-Soundness-21532" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-21533" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21535" href="../Soundness/#plfa_plfa-part3-Soundness-21535" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-21539" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21544" href="../Soundness/#plfa_plfa-part3-Soundness-21513" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-21546" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-21553" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21555" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-21557" href="../Soundness/#plfa_plfa-part3-Soundness-21557" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-21559" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21564" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21565" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21573" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-21574" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-21576" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-21592" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21594" href="../Soundness/#plfa_plfa-part3-Soundness-21594" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-21597" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-21605" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-21609" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-21613" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21615" href="../Soundness/#plfa_plfa-part3-Soundness-18176" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-21633" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21634" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21636" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21638" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21639" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21641" href="../Soundness/#plfa_plfa-part3-Soundness-21594" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-21644" href="../Soundness/#plfa_plfa-part3-Soundness-20451" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21658" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21659" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21661" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21663" href="../Soundness/#plfa_plfa-part3-Soundness-21663" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21664" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21666" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21667" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21675" href="../Soundness/#plfa_plfa-part3-Soundness-21675" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-21676" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21678" href="../Soundness/#plfa_plfa-part3-Soundness-21678" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-21681" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21683" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-21685" href="../Soundness/#plfa_plfa-part3-Soundness-21685" class="Bound">M′</a>
      <a id="plfa_plfa-part3-Soundness-21694" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21699" href="../Soundness/#plfa_plfa-part3-Soundness-20451" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21713" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21714" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21716" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21718" href="../Untyped/#plfa_plfa-part2-Untyped-8601" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-21723" href="../Soundness/#plfa_plfa-part3-Soundness-21663" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21724" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21726" href="../Soundness/#plfa_plfa-part3-Soundness-21675" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-21728" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21729" href="../Soundness/#plfa_plfa-part3-Soundness-19508" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-21740" href="../Soundness/#plfa_plfa-part3-Soundness-21678" class="Bound">eq</a><a id="plfa_plfa-part3-Soundness-21742" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-21744" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-21748" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21750" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21752" href="../Soundness/#plfa_plfa-part3-Soundness-21752" class="Bound">δ′</a> <a id="plfa_plfa-part3-Soundness-21755" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21757" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21759" href="../Soundness/#plfa_plfa-part3-Soundness-21759" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-21769" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21771" href="../Soundness/#plfa_plfa-part3-Soundness-21771" class="Bound">m′</a> <a id="plfa_plfa-part3-Soundness-21774" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21776" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21778" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-21784" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21786" href="../Denotational/#plfa_plfa-part3-Denotational-9222" class="Function">init</a> <a id="plfa_plfa-part3-Soundness-21791" href="../Soundness/#plfa_plfa-part3-Soundness-21752" class="Bound">δ′</a> <a id="plfa_plfa-part3-Soundness-21794" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21796" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21798" class="Symbol">((λ</a> <a id="plfa_plfa-part3-Soundness-21802" href="../Soundness/#plfa_plfa-part3-Soundness-21802" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-21804" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-21806" href="../Soundness/#plfa_plfa-part3-Soundness-14681" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-21825" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21826" href="../Soundness/#plfa_plfa-part3-Soundness-21759" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-21836" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21837" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-21839" href="../Soundness/#plfa_plfa-part3-Soundness-21802" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-21840" class="Symbol">))))</a> <a id="plfa_plfa-part3-Soundness-21845" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a>
             <a id="plfa_plfa-part3-Soundness-21860" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21868" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21869" href="../Denotational/#plfa_plfa-part3-Denotational-32854" class="Function">up-env</a> <a id="plfa_plfa-part3-Soundness-21876" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21877" href="../Soundness/#plfa_plfa-part3-Soundness-20278" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-21883" href="../Soundness/#plfa_plfa-part3-Soundness-21771" class="Bound">m′</a><a id="plfa_plfa-part3-Soundness-21885" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21887" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21888" href="../Compositional/#plfa_plfa-part3-Compositional-12863" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-21896" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21897" href="../Soundness/#plfa_plfa-part3-Soundness-21759" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-21907" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a><a id="plfa_plfa-part3-Soundness-21908" class="Symbol">)))</a> <a id="plfa_plfa-part3-Soundness-21912" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21914" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-21916" href="../Soundness/#plfa_plfa-part3-Soundness-20451" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21930" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21931" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21939" href="../Soundness/#plfa_plfa-part3-Soundness-21939" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-21940" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21942" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-21945" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21947" href="../Soundness/#plfa_plfa-part3-Soundness-21947" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-21950" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-21952" href="../Soundness/#plfa_plfa-part3-Soundness-21952" class="Bound">M₂</a>

<a id="plfa_plfa-part3-Soundness-21956" href="../Soundness/#plfa_plfa-part3-Soundness-20451" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21970" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21971" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21973" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21975" href="../Soundness/#plfa_plfa-part3-Soundness-21975" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21976" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21978" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-21986" href="../Soundness/#plfa_plfa-part3-Soundness-21986" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-21989" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-21995" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21997" href="../Denotational/#plfa_plfa-part3-Denotational-9950" class="Function">`⊥</a> <a id="plfa_plfa-part3-Soundness-22000" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22002" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22004" href="../Soundness/#plfa_plfa-part3-Soundness-18872" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-22012" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22013" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-22015" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22017" href="../Soundness/#plfa_plfa-part3-Soundness-21975" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-22018" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22020" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22022" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-22030" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22032" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a>

<a id="plfa_plfa-part3-Soundness-22035" href="../Soundness/#plfa_plfa-part3-Soundness-20451" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-22049" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22050" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-22052" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22054" href="../Soundness/#plfa_plfa-part3-Soundness-22054" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-22055" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22057" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22058" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-22066" href="../Soundness/#plfa_plfa-part3-Soundness-22066" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22069" href="../Soundness/#plfa_plfa-part3-Soundness-22069" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22071" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22073" href="../Soundness/#plfa_plfa-part3-Soundness-22073" class="Bound">eq</a>
  <a id="plfa_plfa-part3-Soundness-22078" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-22083" href="../Soundness/#plfa_plfa-part3-Soundness-20451" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-22097" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22098" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-22100" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22102" href="../Soundness/#plfa_plfa-part3-Soundness-22054" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-22103" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22105" href="../Soundness/#plfa_plfa-part3-Soundness-22066" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22108" href="../Soundness/#plfa_plfa-part3-Soundness-22073" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-22111" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22113" href="../Soundness/#plfa_plfa-part3-Soundness-20451" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-22127" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22128" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-22130" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22132" href="../Soundness/#plfa_plfa-part3-Soundness-22054" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-22133" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22135" href="../Soundness/#plfa_plfa-part3-Soundness-22069" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-22138" href="../Soundness/#plfa_plfa-part3-Soundness-22073" class="Bound">eq</a>
<a id="plfa_plfa-part3-Soundness-22141" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-22145" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22147" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22149" href="../Soundness/#plfa_plfa-part3-Soundness-22149" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-22152" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22154" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22156" href="../Soundness/#plfa_plfa-part3-Soundness-22156" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-22165" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22167" href="../Soundness/#plfa_plfa-part3-Soundness-22167" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-22170" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22172" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22174" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22176" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22178" href="../Soundness/#plfa_plfa-part3-Soundness-22178" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-22181" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22183" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22185" href="../Soundness/#plfa_plfa-part3-Soundness-22185" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-22194" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22196" href="../Soundness/#plfa_plfa-part3-Soundness-22196" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-22199" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22201" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22203" class="Symbol">=</a>
     <a id="plfa_plfa-part3-Soundness-22210" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22212" href="../Soundness/#plfa_plfa-part3-Soundness-22149" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-22215" href="../Denotational/#plfa_plfa-part3-Denotational-9979" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-22218" href="../Soundness/#plfa_plfa-part3-Soundness-22178" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-22221" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22223" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22225" href="../Soundness/#plfa_plfa-part3-Soundness-19198" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-22233" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22234" class="Argument">γ₁</a> <a id="plfa_plfa-part3-Soundness-22237" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22239" href="../Soundness/#plfa_plfa-part3-Soundness-22149" class="Bound">δ₁</a><a id="plfa_plfa-part3-Soundness-22241" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-22243" class="Argument">γ₂</a> <a id="plfa_plfa-part3-Soundness-22246" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22248" href="../Soundness/#plfa_plfa-part3-Soundness-22178" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-22250" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-22252" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-22254" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22256" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-22257" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22259" href="../Soundness/#plfa_plfa-part3-Soundness-22156" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-22268" href="../Soundness/#plfa_plfa-part3-Soundness-22185" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-22277" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a>
                    <a id="plfa_plfa-part3-Soundness-22299" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-22307" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22308" href="../Denotational/#plfa_plfa-part3-Denotational-32332" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-22314" href="../Soundness/#plfa_plfa-part3-Soundness-22167" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-22317" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22318" href="../Denotational/#plfa_plfa-part3-Denotational-10610" class="Function">⊑-env-conj-R1</a> <a id="plfa_plfa-part3-Soundness-22332" href="../Soundness/#plfa_plfa-part3-Soundness-22149" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-22335" href="../Soundness/#plfa_plfa-part3-Soundness-22178" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-22337" class="Symbol">))</a>
                            <a id="plfa_plfa-part3-Soundness-22368" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22369" href="../Denotational/#plfa_plfa-part3-Denotational-32332" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-22375" href="../Soundness/#plfa_plfa-part3-Soundness-22196" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-22378" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22379" href="../Denotational/#plfa_plfa-part3-Denotational-10716" class="Function">⊑-env-conj-R2</a> <a id="plfa_plfa-part3-Soundness-22393" href="../Soundness/#plfa_plfa-part3-Soundness-22149" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-22396" href="../Soundness/#plfa_plfa-part3-Soundness-22178" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-22398" class="Symbol">))</a> <a id="plfa_plfa-part3-Soundness-22401" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22403" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-22405" href="../Soundness/#plfa_plfa-part3-Soundness-20451" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-22419" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22420" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-22424" href="../Soundness/#plfa_plfa-part3-Soundness-22424" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-22426" href="../Soundness/#plfa_plfa-part3-Soundness-22426" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-22428" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22430" href="../Soundness/#plfa_plfa-part3-Soundness-22430" class="Bound">eq</a>
    <a id="plfa_plfa-part3-Soundness-22437" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-22442" href="../Soundness/#plfa_plfa-part3-Soundness-20451" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-22456" href="../Soundness/#plfa_plfa-part3-Soundness-22424" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-22458" href="../Soundness/#plfa_plfa-part3-Soundness-22430" class="Bound">eq</a>
<a id="plfa_plfa-part3-Soundness-22461" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-22465" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22467" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22469" href="../Soundness/#plfa_plfa-part3-Soundness-22469" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-22471" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22473" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22475" href="../Soundness/#plfa_plfa-part3-Soundness-22475" class="Bound">subst-δ</a> <a id="plfa_plfa-part3-Soundness-22483" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22485" href="../Soundness/#plfa_plfa-part3-Soundness-22485" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-22487" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22489" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22491" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22493" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22495" href="../Soundness/#plfa_plfa-part3-Soundness-22469" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-22497" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22499" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22501" href="../Soundness/#plfa_plfa-part3-Soundness-22475" class="Bound">subst-δ</a> <a id="plfa_plfa-part3-Soundness-22509" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22511" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-22515" href="../Soundness/#plfa_plfa-part3-Soundness-22485" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-22517" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-22520" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22522" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a>
</pre><ul><li>情况 <code>var</code>：我们有 <code>subst σ M ≡ y</code>，因此 <code>M</code> 也必须是一个变量，称为 <code>x</code>。 我们应用引理 <code>subst-reflect-var</code> 得出结论。</li></ul><ul><li>情况 <code>↦-elim</code>：我们有 <code>subst σ M ≡ L₁ · L₂</code>，需要对 <code>M</code> 进行情况分析：<ul><li><p>情况 <code>M ≡ ` x</code>：我们再次应用 <code>subst-reflect-var</code> 得出结论。</p></li><li><p>情况 <code>M ≡ M₁ · M₂</code>：根据归纳假设，我们有某个 <code>δ₁</code> 和 <code>δ₂</code> 使得 <code>δ₁ ⊢ M₁ ↓ v₁ ↦ v₃</code> 和 <code>γ `⊢ σ ↓ δ₁</code>，以及 <code>δ₂ ⊢ M₂ ↓ v₁</code> 和 <code>γ `⊢ σ ↓ δ₂</code>。 根据 <code>⊑-env</code> 我们有 <code>δ₁ ⊔ δ₂ ⊢ M₁ ↓ v₁ ↦ v₃</code> 和 <code>δ₁ ⊔ δ₂ ⊢ M₂ ↓ v₁</code> （使用 <code>⊑-env-conj-R1</code> 和 <code>⊑-env-conj-R2</code> 得出），因此 <code>δ₁ ⊔ δ₂ ⊢ M₁ · M₂ ↓ v₃</code>。 我们通过 <code>subst-⊔</code> 引理得出 <code>γ `⊢ σ ↓ δ₁ ⊔ δ₂</code> 从而证明此情况。</p></li></ul></li></ul><ul><li>情况 <code>↦-intro</code>：我们有 <code>subst σ M ≡ ƛ L′</code>，需要对 <code>M</code> 进行情况分析：<ul><li><p>情况 <code>M ≡ x</code>：我们应用 <code>subst-reflect-var</code> 引理。</p></li><li><p>情况 <code>M ≡ ƛ M′</code>：根据归纳假设，我们有 <code>(δ′ , v′) ⊢ M′ ↓ v₂</code> 和 <code>(δ , v₁) ⊢ exts σ ↓ (δ′ , v′)</code>。根据后者可得 <code>(δ , v₁) ⊢ # 0 ↓ v′</code>。 根据引理 <code>var-inv</code> 我们有 <code>v′ ⊑ v₁</code>，于是根据 <code>up-env</code> 引理我们有 <code>(δ′ , v₁) ⊢ M′ ↓ v₂</code>，因此 <code>δ′ ⊢ ƛ M′ ↓ v₁ → v₂</code>。我们还需要证明 <code>δ ⊢ σ ↓ δ′</code>。固定 <code>k</code>，我们有 <code>(δ , v₁) ⊢ rename S_ σ k ↓ δ k′</code>， 接着应用引理 <code>rename-inc-reflect</code> 可得 <code>δ ⊢ σ k ↓ δ k′</code>，于是此情况证明完毕。</p></li></ul></li></ul><ul><li>情况 <code>⊥-intro</code>：我们为 <code>δ</code> 选择<code>⊥</code>。 根据 <code>⊥-intro</code> 我们有 <code>⊥ ⊢ M ↓ ⊥</code>。 根据 <code>subst-⊥</code> 引理有 <code>δ `⊢ σ ↓ `⊥</code>。</li></ul><ul><li>情况 <code>⊔-intro</code>：根据归纳假设我们有 <code>δ₁ ⊢ M ↓ v₁</code>、<code>δ₂ ⊢ M ↓ v₂</code>、 <code>δ `⊢ σ ↓ δ₁</code> 和 <code>δ `⊢ σ ↓ δ₂</code>。 根据 <code>⊑-env</code>、<code>⊑-env-conj-R1</code> 和 <code>⊑-env-conj-R2</code> 我们有 <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₁</code> 和 <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₂</code>，因此根据 <code>⊔-intro</code> 可得 <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₁ ⊔ v₂</code>。 根据 <code>subst-⊔</code> 可得 <code>δ `⊢ σ ↓ δ₁ ⊔ δ₂</code>。</li></ul><h3 id="单一代换反映了指称不变">单一代换反映了指称不变</h3><p>现在大部分工作已经完成，我们已经证明了同时代换反映了指称不变。当然，β-归约使用单一代换， 因此我们需要一个推论来证明单一代换反映了指称不变。也就是说，给定项 <code>N : (Γ , ★ ⊢ ★)</code> 和 <code>M : (Γ ⊢ ★)</code>，若 <code>γ ⊢ N [ M ] ↓ w</code>，则对于某个值 <code>v</code> 有 <code>γ ⊢ M ↓ v</code> 且 <code>( γ , v) ⊢ N ↓ w</code> 。于是我们有 <code>N [ M ] = subst (subst-zero M) N</code>。</p><p>我们首先证明一个关于 <code>subst-zero</code> 的引理，即若 <code>δ ⊢ subst-zero M ↓ γ</code>，则对某个值 <code>w</code>，有 <code>γ `⊑ (δ , w) × δ ⊢ M ↓ w</code>。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-zero-reflect"></a><a id="plfa_plfa-part3-Soundness-26778" href="../Soundness/#plfa_plfa-part3-Soundness-26778" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-26797" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-26799" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-26801" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-26802" href="../Soundness/#plfa_plfa-part3-Soundness-26802" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-26803" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-26805" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-26806" href="../Soundness/#plfa_plfa-part3-Soundness-26806" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-26808" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-26810" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-26814" href="../Soundness/#plfa_plfa-part3-Soundness-26802" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-26815" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-26817" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-26818" href="../Soundness/#plfa_plfa-part3-Soundness-26818" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-26820" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-26822" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-26826" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-26827" href="../Soundness/#plfa_plfa-part3-Soundness-26802" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-26829" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-26831" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-26832" class="Symbol">)}</a> <a id="plfa_plfa-part3-Soundness-26835" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-26836" href="../Soundness/#plfa_plfa-part3-Soundness-26836" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-26838" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-26840" href="../Soundness/#plfa_plfa-part3-Soundness-26802" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-26842" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-26844" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-26845" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-26849" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-26851" href="../Soundness/#plfa_plfa-part3-Soundness-26806" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-26853" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-26856" href="../Untyped/#plfa_plfa-part2-Untyped-9458" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-26867" href="../Soundness/#plfa_plfa-part3-Soundness-26836" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-26869" href="../Soundness/#plfa_plfa-part3-Soundness-4036" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-26871" href="../Soundness/#plfa_plfa-part3-Soundness-26818" class="Bound">γ</a>
    <a id="plfa_plfa-part3-Soundness-26877" class="Comment">----------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-26920" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-26922" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-26925" href="../Soundness/#plfa_plfa-part3-Soundness-26925" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-26927" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-26929" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-26935" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-26937" href="../Soundness/#plfa_plfa-part3-Soundness-26818" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-26939" href="../Denotational/#plfa_plfa-part3-Denotational-9696" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-26942" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-26943" href="../Soundness/#plfa_plfa-part3-Soundness-26806" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-26945" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-26948" href="../Soundness/#plfa_plfa-part3-Soundness-26925" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-26949" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-26951" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Soundness-26953" href="../Soundness/#plfa_plfa-part3-Soundness-26806" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-26955" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-26957" href="../Soundness/#plfa_plfa-part3-Soundness-26836" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-26959" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-26961" href="../Soundness/#plfa_plfa-part3-Soundness-26925" class="Bound">w</a>
<a id="plfa_plfa-part3-Soundness-26963" href="../Soundness/#plfa_plfa-part3-Soundness-26778" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-26982" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-26983" class="Argument">δ</a> <a id="plfa_plfa-part3-Soundness-26985" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-26987" href="../Soundness/#plfa_plfa-part3-Soundness-26987" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-26988" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-26990" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-26991" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-26993" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-26995" href="../Soundness/#plfa_plfa-part3-Soundness-26995" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-26996" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-26998" href="../Soundness/#plfa_plfa-part3-Soundness-26998" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-27002" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-27004" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-27006" href="../Denotational/#plfa_plfa-part3-Denotational-9277" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-27011" href="../Soundness/#plfa_plfa-part3-Soundness-26995" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-27013" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-27015" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-27017" href="../Soundness/#plfa_plfa-part3-Soundness-27045" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-27023" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-27025" href="../Soundness/#plfa_plfa-part3-Soundness-26998" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-27029" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-27031" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-27033" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Soundness-27037" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-27045" href="../Soundness/#plfa_plfa-part3-Soundness-27045" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-27051" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-27053" href="../Soundness/#plfa_plfa-part3-Soundness-26995" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-27055" href="../Denotational/#plfa_plfa-part3-Denotational-9696" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-27058" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-27059" href="../Soundness/#plfa_plfa-part3-Soundness-26987" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-27061" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-27064" href="../Denotational/#plfa_plfa-part3-Denotational-9277" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-27069" href="../Soundness/#plfa_plfa-part3-Soundness-26995" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-27070" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-27074" href="../Soundness/#plfa_plfa-part3-Soundness-27045" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-27080" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-27083" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-27086" href="../Denotational/#plfa_plfa-part3-Denotational-6820" class="Function">⊑-refl</a>
  <a id="plfa_plfa-part3-Soundness-27095" href="../Soundness/#plfa_plfa-part3-Soundness-27045" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-27101" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-27102" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-27104" href="../Soundness/#plfa_plfa-part3-Soundness-27104" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-27105" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-27107" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-27109" href="../Compositional/#plfa_plfa-part3-Compositional-12863" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-27117" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-27118" href="../Soundness/#plfa_plfa-part3-Soundness-26998" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-27122" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-27123" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-27125" href="../Soundness/#plfa_plfa-part3-Soundness-27104" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-27126" class="Symbol">))</a>
</pre><p>我们选择 <code>w</code> 作为 <code>γ</code> 中的最后一个值，通过将前提应用到 <code>Z</code> 可得 <code>δ ⊢ M ↓ w</code>。 最后，要证明 <code>γ `⊑ (δ , w)</code>，我们需要在输入项中通过归纳来证明一个引理。 由于我们选择了 <code>w</code>，因此基本的情况是平凡的。在归纳的情况中 <code>S x</code> 中， 前提 <code>δ ⊢ subst-zero M ↓ γ</code> 给出了 <code>δ ⊢ x ↓ γ (S x)</code>，接着使用 <code>var-inv</code> 可得 <code>γ (S x) ⊑ (δ `, w) (S x)</code>。</p><p>现在证明代换反映了指称不变：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-substitution-reflect"></a><a id="plfa_plfa-part3-Soundness-27893" href="../Soundness/#plfa_plfa-part3-Soundness-27893" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-27914" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-27916" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-27918" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27919" href="../Soundness/#plfa_plfa-part3-Soundness-27919" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-27920" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-27922" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27923" href="../Soundness/#plfa_plfa-part3-Soundness-27923" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-27925" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-27927" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-27931" href="../Soundness/#plfa_plfa-part3-Soundness-27919" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-27932" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-27934" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27935" href="../Soundness/#plfa_plfa-part3-Soundness-27935" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-27937" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-27939" href="../Soundness/#plfa_plfa-part3-Soundness-27919" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-27941" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-27943" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-27945" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-27947" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-27948" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-27950" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27951" href="../Soundness/#plfa_plfa-part3-Soundness-27951" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-27953" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-27955" href="../Soundness/#plfa_plfa-part3-Soundness-27919" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-27957" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-27959" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-27960" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-27962" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27963" href="../Soundness/#plfa_plfa-part3-Soundness-27963" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-27964" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-27968" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-27970" href="../Soundness/#plfa_plfa-part3-Soundness-27923" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-27972" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-27974" href="../Soundness/#plfa_plfa-part3-Soundness-27935" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-27976" href="../Untyped/#plfa_plfa-part2-Untyped-9574" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-27978" href="../Soundness/#plfa_plfa-part3-Soundness-27951" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-27980" href="../Untyped/#plfa_plfa-part2-Untyped-9574" class="Function Operator">]</a> <a id="plfa_plfa-part3-Soundness-27982" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-27984" href="../Soundness/#plfa_plfa-part3-Soundness-27963" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-27990" class="Comment">------------------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-28041" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-28043" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-28046" href="../Soundness/#plfa_plfa-part3-Soundness-28046" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-28048" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-28050" href="../Denotational/#plfa_plfa-part3-Denotational-4957" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-28056" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-28058" href="../Soundness/#plfa_plfa-part3-Soundness-27923" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-28060" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-28062" href="../Soundness/#plfa_plfa-part3-Soundness-27951" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-28064" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-28066" href="../Soundness/#plfa_plfa-part3-Soundness-28046" class="Bound">w</a>  <a id="plfa_plfa-part3-Soundness-28069" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-28072" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-28073" href="../Soundness/#plfa_plfa-part3-Soundness-27923" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-28075" href="../Denotational/#plfa_plfa-part3-Denotational-8918" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-28078" href="../Soundness/#plfa_plfa-part3-Soundness-28046" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-28079" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-28081" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-28083" href="../Soundness/#plfa_plfa-part3-Soundness-27935" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-28085" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-28087" href="../Soundness/#plfa_plfa-part3-Soundness-27963" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-28089" href="../Soundness/#plfa_plfa-part3-Soundness-27893" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-28110" href="../Soundness/#plfa_plfa-part3-Soundness-28110" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-28112" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-28117" href="../Soundness/#plfa_plfa-part3-Soundness-20451" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-28131" href="../Soundness/#plfa_plfa-part3-Soundness-28110" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-28133" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-28138" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-28143" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-28145" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28147" href="../Soundness/#plfa_plfa-part3-Soundness-28147" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-28149" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28151" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28153" href="../Soundness/#plfa_plfa-part3-Soundness-28153" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-28157" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28159" href="../Soundness/#plfa_plfa-part3-Soundness-28159" class="Bound">γNv</a> <a id="plfa_plfa-part3-Soundness-28163" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-28165" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-28167" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-28172" href="../Soundness/#plfa_plfa-part3-Soundness-26778" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-28191" href="../Soundness/#plfa_plfa-part3-Soundness-28153" class="Bound">δσγ</a>
<a id="plfa_plfa-part3-Soundness-28195" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-28202" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-28204" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28206" href="../Soundness/#plfa_plfa-part3-Soundness-28206" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-28208" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28210" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28212" href="../Soundness/#plfa_plfa-part3-Soundness-28212" class="Bound">ineq</a> <a id="plfa_plfa-part3-Soundness-28217" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28219" href="../Soundness/#plfa_plfa-part3-Soundness-28219" class="Bound">δMw</a> <a id="plfa_plfa-part3-Soundness-28223" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-28225" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-28227" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-28229" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28231" href="../Soundness/#plfa_plfa-part3-Soundness-28206" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-28233" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28235" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28237" href="../Soundness/#plfa_plfa-part3-Soundness-28219" class="Bound">δMw</a> <a id="plfa_plfa-part3-Soundness-28241" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28243" href="../Denotational/#plfa_plfa-part3-Denotational-32332" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-28249" class="Bound">γNv</a> <a id="plfa_plfa-part3-Soundness-28253" href="../Soundness/#plfa_plfa-part3-Soundness-28212" class="Bound">ineq</a> <a id="plfa_plfa-part3-Soundness-28258" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-28260" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a>
</pre><p>我们应用 <code>subst-reflect</code> 引理可得对于某个 <code>γ</code> 有 <code>δ ⊢ subst-zero M ↓ γ</code> 和 <code>γ ⊢ N ↓ v</code>。通过使用前者，<code>subst-zero-reflect</code> 给出了 <code>γ `⊑ (δ , w)</code> 和 <code>δ ⊢ M ↓ w</code>。我们通过应用 <code>⊑-env</code> 引理，使用 <code>γ ⊢ N ↓ v</code> 和 <code>γ `⊑ (δ , w)</code> 可得 <code>δ , w ⊢ N ↓ v</code>。</p><h3 id="归约反映了指称不变-1">归约反映了指称不变</h3><p>现在我们已经证明了代换反映了指称不变，可以很容易地证明归约也拥有此性质：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-reflect-beta"></a><a id="plfa_plfa-part3-Soundness-29014" href="../Soundness/#plfa_plfa-part3-Soundness-29014" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-29027" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-29029" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-29031" href="../Soundness/#plfa_plfa-part3-Soundness-29031" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-29032" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-29034" href="../Soundness/#plfa_plfa-part3-Soundness-29034" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-29036" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-29038" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-29042" href="../Soundness/#plfa_plfa-part3-Soundness-29031" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-29043" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-29045" href="../Soundness/#plfa_plfa-part3-Soundness-29045" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29047" href="../Soundness/#plfa_plfa-part3-Soundness-29047" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-29048" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-29050" href="../Soundness/#plfa_plfa-part3-Soundness-29050" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-29051" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Soundness-29057" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-29059" href="../Soundness/#plfa_plfa-part3-Soundness-29034" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-29061" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-29063" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29064" href="../Soundness/#plfa_plfa-part3-Soundness-29047" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-29066" href="../Untyped/#plfa_plfa-part2-Untyped-9574" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-29068" href="../Soundness/#plfa_plfa-part3-Soundness-29045" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29070" href="../Untyped/#plfa_plfa-part2-Untyped-9574" class="Function Operator">]</a><a id="plfa_plfa-part3-Soundness-29071" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29073" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-29075" href="../Soundness/#plfa_plfa-part3-Soundness-29050" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-29081" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-29083" href="../Soundness/#plfa_plfa-part3-Soundness-29034" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-29085" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-29087" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29088" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-29090" href="../Soundness/#plfa_plfa-part3-Soundness-29047" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-29091" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29093" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-29095" href="../Soundness/#plfa_plfa-part3-Soundness-29045" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29097" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-29099" href="../Soundness/#plfa_plfa-part3-Soundness-29050" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-29101" href="../Soundness/#plfa_plfa-part3-Soundness-29014" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-29114" href="../Soundness/#plfa_plfa-part3-Soundness-29114" class="Bound">d</a>
    <a id="plfa_plfa-part3-Soundness-29120" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-29125" href="../Soundness/#plfa_plfa-part3-Soundness-27893" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-29146" href="../Soundness/#plfa_plfa-part3-Soundness-29114" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-29148" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-29152" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-29154" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-29156" href="../Soundness/#plfa_plfa-part3-Soundness-29156" class="Bound">v₂′</a> <a id="plfa_plfa-part3-Soundness-29160" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-29162" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-29164" href="../Soundness/#plfa_plfa-part3-Soundness-29164" class="Bound">d₁′</a> <a id="plfa_plfa-part3-Soundness-29168" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-29170" href="../Soundness/#plfa_plfa-part3-Soundness-29170" class="Bound">d₂′</a> <a id="plfa_plfa-part3-Soundness-29174" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-29176" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-29178" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29180" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29187" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29188" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29196" href="../Soundness/#plfa_plfa-part3-Soundness-29170" class="Bound">d₂′</a><a id="plfa_plfa-part3-Soundness-29199" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29201" href="../Soundness/#plfa_plfa-part3-Soundness-29164" class="Bound">d₁′</a>


<a id="plfa_plfa-part3-Soundness-reflect"></a><a id="plfa_plfa-part3-Soundness-29207" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29215" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-29217" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-29219" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29220" href="../Soundness/#plfa_plfa-part3-Soundness-29220" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-29221" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-29223" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29224" href="../Soundness/#plfa_plfa-part3-Soundness-29224" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-29226" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-29228" href="../Denotational/#plfa_plfa-part3-Denotational-8730" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-29232" href="../Soundness/#plfa_plfa-part3-Soundness-29220" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-29233" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-29235" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29236" href="../Soundness/#plfa_plfa-part3-Soundness-29236" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29238" href="../Soundness/#plfa_plfa-part3-Soundness-29238" class="Bound">M′</a> <a id="plfa_plfa-part3-Soundness-29241" href="../Soundness/#plfa_plfa-part3-Soundness-29241" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-29243" href="../Soundness/#plfa_plfa-part3-Soundness-29243" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-29244" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-29248" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-29250" href="../Soundness/#plfa_plfa-part3-Soundness-29224" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-29252" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-29254" href="../Soundness/#plfa_plfa-part3-Soundness-29241" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-29256" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-29258" href="../Soundness/#plfa_plfa-part3-Soundness-29243" class="Bound">v</a>  <a id="plfa_plfa-part3-Soundness-29261" class="Symbol">→</a>  <a id="plfa_plfa-part3-Soundness-29264" href="../Soundness/#plfa_plfa-part3-Soundness-29236" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29266" href="../Untyped/#plfa_plfa-part2-Untyped-12874" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-29269" href="../Soundness/#plfa_plfa-part3-Soundness-29238" class="Bound">M′</a>  <a id="plfa_plfa-part3-Soundness-29273" class="Symbol">→</a>   <a id="plfa_plfa-part3-Soundness-29277" href="../Soundness/#plfa_plfa-part3-Soundness-29238" class="Bound">M′</a> <a id="plfa_plfa-part3-Soundness-29280" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-29282" href="../Soundness/#plfa_plfa-part3-Soundness-29241" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-29288" class="Comment">---------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-29324" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-29326" href="../Soundness/#plfa_plfa-part3-Soundness-29224" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-29328" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-29330" href="../Soundness/#plfa_plfa-part3-Soundness-29236" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29332" href="../Denotational/#plfa_plfa-part3-Denotational-11454" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-29334" href="../Soundness/#plfa_plfa-part3-Soundness-29243" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-29336" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29344" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-29348" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29349" href="../Untyped/#plfa_plfa-part2-Untyped-12924" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-29352" href="../Soundness/#plfa_plfa-part3-Soundness-29352" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29353" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29355" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29358" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29366" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-29370" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29371" href="../Untyped/#plfa_plfa-part2-Untyped-13014" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-29374" href="../Soundness/#plfa_plfa-part3-Soundness-29374" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29375" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29377" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29380" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a><a id="plfa_plfa-part3-Soundness-29387" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29388" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-29390" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29392" href="../Soundness/#plfa_plfa-part3-Soundness-29392" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-29393" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-29395" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29396" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-29399" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29400" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-29402" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29404" href="../Soundness/#plfa_plfa-part3-Soundness-29404" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-29405" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-29408" href="../Untyped/#plfa_plfa-part2-Untyped-13104" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-29410" href="../Soundness/#plfa_plfa-part3-Soundness-29410" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-29417" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-29422" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-29425" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29426" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-29428" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29430" href="../Soundness/#plfa_plfa-part3-Soundness-29392" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-29431" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-29433" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-29435" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29437" href="../Soundness/#plfa_plfa-part3-Soundness-29404" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-29438" class="Symbol">}</a>
<a id="plfa_plfa-part3-Soundness-29440" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-29444" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-29446" href="../Soundness/#plfa_plfa-part3-Soundness-29446" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-29449" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-29457" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-29461" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-29464" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29466" href="../Soundness/#plfa_plfa-part3-Soundness-29014" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-29479" href="../Soundness/#plfa_plfa-part3-Soundness-29446" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-29482" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29490" href="../Denotational/#plfa_plfa-part3-Denotational-11508" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-29494" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29495" href="../Untyped/#plfa_plfa-part2-Untyped-13212" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-29497" href="../Soundness/#plfa_plfa-part3-Soundness-29497" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29498" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29500" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29503" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29511" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29512" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29519" href="../Soundness/#plfa_plfa-part3-Soundness-29519" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29522" href="../Soundness/#plfa_plfa-part3-Soundness-29522" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-29524" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29526" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29527" href="../Untyped/#plfa_plfa-part2-Untyped-12924" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-29530" href="../Soundness/#plfa_plfa-part3-Soundness-29530" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29531" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29533" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-29538" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29540" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29547" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29548" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29556" href="../Soundness/#plfa_plfa-part3-Soundness-29519" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29559" href="../Soundness/#plfa_plfa-part3-Soundness-29530" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-29561" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-29565" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29567" href="../Soundness/#plfa_plfa-part3-Soundness-29522" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-29570" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29578" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29579" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29586" href="../Soundness/#plfa_plfa-part3-Soundness-29586" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29589" href="../Soundness/#plfa_plfa-part3-Soundness-29589" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-29591" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29593" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29594" href="../Untyped/#plfa_plfa-part2-Untyped-13014" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-29597" href="../Soundness/#plfa_plfa-part3-Soundness-29597" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29598" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29600" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-29605" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29607" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29614" href="../Soundness/#plfa_plfa-part3-Soundness-29586" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29617" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29618" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29626" href="../Soundness/#plfa_plfa-part3-Soundness-29589" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-29629" href="../Soundness/#plfa_plfa-part3-Soundness-29597" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-29631" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-29635" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-29637" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29645" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29646" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29653" href="../Soundness/#plfa_plfa-part3-Soundness-29653" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29656" href="../Soundness/#plfa_plfa-part3-Soundness-29656" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-29658" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29660" href="../Untyped/#plfa_plfa-part2-Untyped-13104" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-29662" href="../Soundness/#plfa_plfa-part3-Soundness-29662" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-29669" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-29674" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29681" href="../Soundness/#plfa_plfa-part3-Soundness-29653" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29684" href="../Soundness/#plfa_plfa-part3-Soundness-29656" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-29687" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-29691" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-29693" href="../Soundness/#plfa_plfa-part3-Soundness-29693" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-29696" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-29704" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-29708" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-29711" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29713" href="../Soundness/#plfa_plfa-part3-Soundness-29014" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-29726" href="../Soundness/#plfa_plfa-part3-Soundness-29693" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-29729" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29737" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29738" href="../Denotational/#plfa_plfa-part3-Denotational-11583" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29745" href="../Soundness/#plfa_plfa-part3-Soundness-29745" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29748" href="../Soundness/#plfa_plfa-part3-Soundness-29748" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-29750" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29752" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29753" href="../Untyped/#plfa_plfa-part2-Untyped-13212" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-29755" href="../Soundness/#plfa_plfa-part3-Soundness-29755" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29756" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29758" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29761" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29769" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29770" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29778" href="../Soundness/#plfa_plfa-part3-Soundness-29778" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-29779" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29781" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29782" href="../Untyped/#plfa_plfa-part2-Untyped-12924" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-29785" href="../Soundness/#plfa_plfa-part3-Soundness-29785" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29786" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29788" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29791" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29799" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29800" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29808" href="../Soundness/#plfa_plfa-part3-Soundness-29808" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-29809" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29811" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29812" href="../Untyped/#plfa_plfa-part2-Untyped-13014" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-29815" href="../Soundness/#plfa_plfa-part3-Soundness-29815" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29816" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29818" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29821" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29829" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29830" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29838" href="../Soundness/#plfa_plfa-part3-Soundness-29838" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-29839" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29841" href="../Untyped/#plfa_plfa-part2-Untyped-13104" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-29843" href="../Soundness/#plfa_plfa-part3-Soundness-29843" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-29850" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-29855" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29863" href="../Soundness/#plfa_plfa-part3-Soundness-29838" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-29865" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-29869" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-29871" href="../Soundness/#plfa_plfa-part3-Soundness-29871" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-29874" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-29882" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-29886" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-29889" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29891" href="../Soundness/#plfa_plfa-part3-Soundness-29014" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-29904" href="../Soundness/#plfa_plfa-part3-Soundness-29871" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-29907" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29915" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29916" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29924" href="../Soundness/#plfa_plfa-part3-Soundness-29924" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-29925" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29927" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29928" href="../Untyped/#plfa_plfa-part2-Untyped-13212" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-29930" href="../Soundness/#plfa_plfa-part3-Soundness-29930" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29931" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29933" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-29938" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29940" href="../Denotational/#plfa_plfa-part3-Denotational-11705" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29948" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29949" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29957" href="../Soundness/#plfa_plfa-part3-Soundness-29924" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-29959" href="../Soundness/#plfa_plfa-part3-Soundness-29930" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-29961" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-29965" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-29967" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29975" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-29983" href="../Soundness/#plfa_plfa-part3-Soundness-29983" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-29985" href="../Soundness/#plfa_plfa-part3-Soundness-29985" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-29988" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29990" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-29998" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-30006" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30007" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-30015" href="../Soundness/#plfa_plfa-part3-Soundness-30015" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-30018" href="../Soundness/#plfa_plfa-part3-Soundness-30018" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-30020" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30022" href="../Soundness/#plfa_plfa-part3-Soundness-30022" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30024" href="../Soundness/#plfa_plfa-part3-Soundness-30024" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-30027" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-30035" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-30039" href="../Soundness/#plfa_plfa-part3-Soundness-30024" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-30042" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-30047" href="../Denotational/#plfa_plfa-part3-Denotational-11884" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-30055" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30056" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-30064" href="../Soundness/#plfa_plfa-part3-Soundness-30015" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-30067" href="../Soundness/#plfa_plfa-part3-Soundness-30022" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30069" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-30073" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30075" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30076" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-30084" href="../Soundness/#plfa_plfa-part3-Soundness-30018" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-30087" href="../Soundness/#plfa_plfa-part3-Soundness-30022" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30089" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-30093" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-30095" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-30103" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30104" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-30108" href="../Soundness/#plfa_plfa-part3-Soundness-30108" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-30110" href="../Soundness/#plfa_plfa-part3-Soundness-30110" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-30112" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30114" href="../Soundness/#plfa_plfa-part3-Soundness-30114" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30116" href="../Soundness/#plfa_plfa-part3-Soundness-30116" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-30119" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-30121" href="../Denotational/#plfa_plfa-part3-Denotational-11999" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-30125" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30126" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-30134" href="../Soundness/#plfa_plfa-part3-Soundness-30108" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-30136" href="../Soundness/#plfa_plfa-part3-Soundness-30114" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30138" href="../Soundness/#plfa_plfa-part3-Soundness-30116" class="Bound">mn</a><a id="plfa_plfa-part3-Soundness-30140" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30142" href="../Soundness/#plfa_plfa-part3-Soundness-30110" class="Bound">lt</a>
</pre><h2 id="归约蕴含指称等价">归约蕴含指称等价</h2><p>我们已经证明了归约保持并反映了指称不变，因此归约蕴含指称等价：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-reduce-equal"></a><a id="plfa_plfa-part3-Soundness-30385" href="../Soundness/#plfa_plfa-part3-Soundness-30385" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-30398" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30400" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-30402" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30403" href="../Soundness/#plfa_plfa-part3-Soundness-30403" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-30404" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30406" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30407" href="../Soundness/#plfa_plfa-part3-Soundness-30407" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30409" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30411" href="../Soundness/#plfa_plfa-part3-Soundness-30403" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-30413" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-30415" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-30416" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30418" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30419" href="../Soundness/#plfa_plfa-part3-Soundness-30419" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-30421" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30423" href="../Soundness/#plfa_plfa-part3-Soundness-30403" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-30425" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-30427" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-30428" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-30432" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30434" href="../Soundness/#plfa_plfa-part3-Soundness-30407" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30436" href="../Untyped/#plfa_plfa-part2-Untyped-12874" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-30439" href="../Soundness/#plfa_plfa-part3-Soundness-30419" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-30445" class="Comment">---------</a>
  <a id="plfa_plfa-part3-Soundness-30457" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30459" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-30461" href="../Soundness/#plfa_plfa-part3-Soundness-30407" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30463" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Soundness-30465" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-30467" href="../Soundness/#plfa_plfa-part3-Soundness-30419" class="Bound">N</a>
<a id="plfa_plfa-part3-Soundness-30469" href="../Soundness/#plfa_plfa-part3-Soundness-30385" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-30482" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30483" href="../Soundness/#plfa_plfa-part3-Soundness-30483" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-30484" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-30486" href="../Soundness/#plfa_plfa-part3-Soundness-30486" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-30487" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-30489" href="../Soundness/#plfa_plfa-part3-Soundness-30489" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-30490" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30492" href="../Soundness/#plfa_plfa-part3-Soundness-30492" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30494" href="../Soundness/#plfa_plfa-part3-Soundness-30494" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-30496" href="../Soundness/#plfa_plfa-part3-Soundness-30496" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-30498" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-30504" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-30506" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-30509" href="../Soundness/#plfa_plfa-part3-Soundness-30509" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-30511" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30513" href="../Soundness/#plfa_plfa-part3-Soundness-8626" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-30522" href="../Soundness/#plfa_plfa-part3-Soundness-30509" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-30524" href="../Soundness/#plfa_plfa-part3-Soundness-30492" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-30525" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30527" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-30529" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-30532" href="../Soundness/#plfa_plfa-part3-Soundness-30532" class="Bound">n</a> <a id="plfa_plfa-part3-Soundness-30534" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30536" href="../Soundness/#plfa_plfa-part3-Soundness-29207" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-30544" href="../Soundness/#plfa_plfa-part3-Soundness-30532" class="Bound">n</a> <a id="plfa_plfa-part3-Soundness-30546" href="../Soundness/#plfa_plfa-part3-Soundness-30492" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30548" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-30552" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30554" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a>
</pre><p>最终我们就得到了<strong>可靠性（Soundness Property）</strong>，即多步归约到一个 λ-抽象蕴含指称等价于该 λ-抽象。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-soundness"></a><a id="plfa_plfa-part3-Soundness-30797" href="../Soundness/#plfa_plfa-part3-Soundness-30797" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-30807" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30809" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-30811" href="../Soundness/#plfa_plfa-part3-Soundness-30811" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-30812" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30814" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30815" href="../Soundness/#plfa_plfa-part3-Soundness-30815" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30817" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30819" href="../Soundness/#plfa_plfa-part3-Soundness-30811" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-30821" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-30823" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-30824" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30826" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30827" href="../Soundness/#plfa_plfa-part3-Soundness-30827" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-30829" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30831" href="../Soundness/#plfa_plfa-part3-Soundness-30811" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-30833" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-30835" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-30837" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-30839" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-30840" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-30844" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30846" href="../Soundness/#plfa_plfa-part3-Soundness-30815" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30848" href="../Untyped/#plfa_plfa-part2-Untyped-14270" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part3-Soundness-30851" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-30853" href="../Soundness/#plfa_plfa-part3-Soundness-30827" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-30859" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Soundness-30879" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30881" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-30883" href="../Soundness/#plfa_plfa-part3-Soundness-30815" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30885" href="../Denotational/#plfa_plfa-part3-Denotational-22494" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Soundness-30887" href="../Denotational/#plfa_plfa-part3-Denotational-22262" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-30889" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30890" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-30892" href="../Soundness/#plfa_plfa-part3-Soundness-30827" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-30893" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-30895" href="../Soundness/#plfa_plfa-part3-Soundness-30797" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-30905" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30906" class="DottedPattern Symbol">.(</a><a id="plfa_plfa-part3-Soundness-30908" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="DottedPattern InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-30910" class="DottedPattern Symbol">_)</a> <a id="plfa_plfa-part3-Soundness-30913" href="../Untyped/#plfa_plfa-part2-Untyped-14316" class="InductiveConstructor Operator">∎</a><a id="plfa_plfa-part3-Soundness-30914" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30916" href="../Soundness/#plfa_plfa-part3-Soundness-30916" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-30918" href="../Soundness/#plfa_plfa-part3-Soundness-30918" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-30920" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-30922" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-30924" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-30927" href="../Soundness/#plfa_plfa-part3-Soundness-30927" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-30929" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30931" href="../Soundness/#plfa_plfa-part3-Soundness-30927" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-30932" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30934" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-30936" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-30939" href="../Soundness/#plfa_plfa-part3-Soundness-30939" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-30941" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30943" href="../Soundness/#plfa_plfa-part3-Soundness-30939" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-30944" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30946" href="../Soundness/#plfa_plfa-part3-Soundness-1709" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-30948" href="../Soundness/#plfa_plfa-part3-Soundness-30797" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-30958" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30959" href="../Soundness/#plfa_plfa-part3-Soundness-30959" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-30960" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30962" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30963" href="../Soundness/#plfa_plfa-part3-Soundness-30963" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-30965" href="../Untyped/#plfa_plfa-part2-Untyped-14458" class="InductiveConstructor Operator">—→⟨</a> <a id="plfa_plfa-part3-Soundness-30969" href="../Soundness/#plfa_plfa-part3-Soundness-30969" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30971" href="../Untyped/#plfa_plfa-part2-Untyped-14458" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-30973" href="../Soundness/#plfa_plfa-part3-Soundness-30973" class="Bound">M—↠N</a><a id="plfa_plfa-part3-Soundness-30977" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30979" href="../Soundness/#plfa_plfa-part3-Soundness-30979" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-30981" href="../Soundness/#plfa_plfa-part3-Soundness-30981" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-30983" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-30988" class="Keyword">let</a> <a id="plfa_plfa-part3-Soundness-30992" href="../Soundness/#plfa_plfa-part3-Soundness-30992" class="Bound">ih</a> <a id="plfa_plfa-part3-Soundness-30995" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-30997" href="../Soundness/#plfa_plfa-part3-Soundness-30797" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-31007" href="../Soundness/#plfa_plfa-part3-Soundness-30973" class="Bound">M—↠N</a> <a id="plfa_plfa-part3-Soundness-31012" class="Keyword">in</a>
   <a id="plfa_plfa-part3-Soundness-31018" class="Keyword">let</a> <a id="plfa_plfa-part3-Soundness-31022" href="../Soundness/#plfa_plfa-part3-Soundness-31022" class="Bound">e</a> <a id="plfa_plfa-part3-Soundness-31024" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-31026" href="../Soundness/#plfa_plfa-part3-Soundness-30385" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-31039" href="../Soundness/#plfa_plfa-part3-Soundness-30969" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-31041" class="Keyword">in</a>
   <a id="plfa_plfa-part3-Soundness-31047" href="../Denotational/#plfa_plfa-part3-Denotational-22926" class="Function">≃-trans</a> <a id="plfa_plfa-part3-Soundness-31055" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-31056" href="../Soundness/#plfa_plfa-part3-Soundness-30959" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-31057" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-31059" href="../Soundness/#plfa_plfa-part3-Soundness-31022" class="Bound">e</a> <a id="plfa_plfa-part3-Soundness-31061" href="../Soundness/#plfa_plfa-part3-Soundness-30992" class="Bound">ih</a> <a id="plfa_plfa-part3-Soundness-31064" href="../Soundness/#plfa_plfa-part3-Soundness-30979" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-31066" href="../Soundness/#plfa_plfa-part3-Soundness-30981" class="Bound">v</a>
</pre><h2 id="unicode">Unicode</h2><p>本章使用了以下 Unicode：</p><pre><code>≟  U+225F  QUESTIONED EQUAL TO (\?=)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Compositional/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Soundness.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Adequacy/">下一章</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">编程语言基础：Agda 描述</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>