<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>编程语言基础：Agda 描述 – Soundness</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">编程语言基础：Agda 描述</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">主页</a> <a class="page-link" href="../Announcements/">公告</a> <a class="page-link" href="../GettingStarted/">使用说明</a> <a class="page-link" href="../Citing/">引用</a> <a class="page-link" href="https://plfa.github.io/">English</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Compositional/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Soundness.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Adequacy/">下一章</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Soundness: 指称语义归约的可靠性</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part3-Soundness-109" class="Keyword">module</a> <a id="plfa_plfa-part3-Soundness-116" href="../Soundness/#" class="Module">plfa.part3.Soundness</a> <a id="plfa_plfa-part3-Soundness-137" class="Keyword">where</a>
</pre><h2 id="简介">简介</h2><p>本章中我们会证明指称语义的归约语义是<strong>可靠（Sound）</strong>的，即对于任意项 <code>L</code>：</p><pre><code>L —↠ ƛ N  蕴含  ℰ L ≃ ℰ (ƛ N)</code></pre><p>证明可通过对归约序列进行归纳得出，因此主引理涉及单个归约步骤。 我们需要证明，如果任何项 <code>M</code> 步进到项 <code>N</code>，则 <code>M</code> 和 <code>M</code> 的指称相等。 我们将分别证明「当且仅当」的两个方向，一个方向类似于<strong>保型性（type preservation）</strong>的证明， 另一个方向类似于反向归约（即展开）的保型性证明。回想一下， 保型性有时称为<strong>主体归约（subject reduction）</strong>。 反向的保型性是一个众所周知的属性，称为<strong>主体展开（subject expansion）</strong>。 众所周知，大多数类型化 λ-演算都不满足主体展开！ （译注：一个 subject 是形如 <code>(1*2+3) : Int</code> 这样已经确定类型的项。 大多数类型化 λ-演算会失去保型性的原因参见<a href="https://www.bananaspace.org/wiki/%E7%B1%BB%E5%9E%8B%E4%B8%8D%E5%8F%98%E6%80%A7">类型不变性</a>。）</p><h2 id="导入">导入</h2><pre class="Agda"><a id="plfa_plfa-part3-Soundness-1530" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1535" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1542" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
  <a id="plfa_plfa-part3-Soundness-1582" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1588" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1589" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="plfa_plfa-part3-Soundness-1592" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1594" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">_≢_</a><a id="plfa_plfa-part3-Soundness-1597" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1599" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-1603" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1605" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a><a id="plfa_plfa-part3-Soundness-1608" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1610" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1615" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1622" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html" class="Module">Data.Product.Base</a> <a id="plfa_plfa-part3-Soundness-1640" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1646" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1647" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="plfa_plfa-part3-Soundness-1650" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1652" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="plfa_plfa-part3-Soundness-1653" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1655" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">Σ-syntax</a><a id="plfa_plfa-part3-Soundness-1663" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1665" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#852" class="Function">∃</a><a id="plfa_plfa-part3-Soundness-1666" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1668" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1371" class="Function">∃-syntax</a><a id="plfa_plfa-part3-Soundness-1676" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1678" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#636" class="Field">proj₁</a><a id="plfa_plfa-part3-Soundness-1683" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1685" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#650" class="Field">proj₂</a><a id="plfa_plfa-part3-Soundness-1690" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-1694" class="Keyword">renaming</a> <a id="plfa_plfa-part3-Soundness-1703" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1704" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part3-Soundness-1708" class="Symbol">to</a> <a id="plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part3-Soundness-1716" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1718" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1723" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1730" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Negation.html" class="Module">Relation.Nullary.Negation</a> <a id="plfa_plfa-part3-Soundness-1756" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1762" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1763" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬_</a><a id="plfa_plfa-part3-Soundness-1765" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1767" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Negation.Core.html#1270" class="Function">contradiction</a><a id="plfa_plfa-part3-Soundness-1780" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1782" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1787" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1794" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Decidable.html" class="Module">Relation.Nullary.Decidable</a> <a id="plfa_plfa-part3-Soundness-1821" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1827" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1828" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Decidable.Core.html#1861" class="Record">Dec</a><a id="plfa_plfa-part3-Soundness-1831" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1833" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a><a id="plfa_plfa-part3-Soundness-1836" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1838" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a><a id="plfa_plfa-part3-Soundness-1840" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1842" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1847" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1854" href="https://agda.github.io/agda-stdlib/v2.2-dev/Function.Base.html" class="Module">Function.Base</a> <a id="plfa_plfa-part3-Soundness-1868" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1874" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1875" href="https://agda.github.io/agda-stdlib/v2.2-dev/Function.Base.html#1115" class="Function Operator">_∘_</a><a id="plfa_plfa-part3-Soundness-1878" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1880" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1885" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1892" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
     <a id="plfa_plfa-part3-Soundness-1916" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1922" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1923" href="../Untyped/#plfa_plfa-part2-Untyped-3798" class="Datatype">Context</a><a id="plfa_plfa-part3-Soundness-1930" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1932" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part3-Soundness-1935" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1937" href="../Untyped/#plfa_plfa-part2-Untyped-4323" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part3-Soundness-1940" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1942" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part3-Soundness-1945" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1947" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-1948" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1950" href="../Untyped/#plfa_plfa-part2-Untyped-4359" class="InductiveConstructor">Z</a><a id="plfa_plfa-part3-Soundness-1951" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1953" href="../Untyped/#plfa_plfa-part2-Untyped-4404" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part3-Soundness-1955" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1957" href="../Untyped/#plfa_plfa-part2-Untyped-5402" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part3-Soundness-1959" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1961" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part3-Soundness-1963" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1965" href="../Untyped/#plfa_plfa-part2-Untyped-5514" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part3-Soundness-1968" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-1982" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a><a id="plfa_plfa-part3-Soundness-1987" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1989" href="../Untyped/#plfa_plfa-part2-Untyped-9523" class="Function Operator">_[_]</a><a id="plfa_plfa-part3-Soundness-1993" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1995" href="../Untyped/#plfa_plfa-part2-Untyped-9407" class="Function">subst-zero</a><a id="plfa_plfa-part3-Soundness-2005" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2007" href="../Untyped/#plfa_plfa-part2-Untyped-7631" class="Function">ext</a><a id="plfa_plfa-part3-Soundness-2010" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2012" href="../Untyped/#plfa_plfa-part2-Untyped-8023" class="Function">rename</a><a id="plfa_plfa-part3-Soundness-2018" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2020" href="../Untyped/#plfa_plfa-part2-Untyped-8550" class="Function">exts</a><a id="plfa_plfa-part3-Soundness-2024" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2038" href="../Untyped/#plfa_plfa-part2-Untyped-12823" class="Datatype Operator">_—→_</a><a id="plfa_plfa-part3-Soundness-2042" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2044" href="../Untyped/#plfa_plfa-part2-Untyped-12873" class="InductiveConstructor">ξ₁</a><a id="plfa_plfa-part3-Soundness-2046" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2048" href="../Untyped/#plfa_plfa-part2-Untyped-12963" class="InductiveConstructor">ξ₂</a><a id="plfa_plfa-part3-Soundness-2050" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2052" href="../Untyped/#plfa_plfa-part2-Untyped-13053" class="InductiveConstructor">β</a><a id="plfa_plfa-part3-Soundness-2053" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2055" href="../Untyped/#plfa_plfa-part2-Untyped-13161" class="InductiveConstructor">ζ</a><a id="plfa_plfa-part3-Soundness-2056" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2058" href="../Untyped/#plfa_plfa-part2-Untyped-14217" class="Datatype Operator">_—↠_</a><a id="plfa_plfa-part3-Soundness-2062" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2064" href="../Untyped/#plfa_plfa-part2-Untyped-14405" class="InductiveConstructor Operator">_—→⟨_⟩_</a><a id="plfa_plfa-part3-Soundness-2071" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2073" href="../Untyped/#plfa_plfa-part2-Untyped-14263" class="InductiveConstructor Operator">_∎</a><a id="plfa_plfa-part3-Soundness-2075" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-2077" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-2082" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-2089" href="../Substitution/#" class="Module">plfa.part2.Substitution</a> <a id="plfa_plfa-part3-Soundness-2113" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-2119" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-2120" href="../Substitution/#plfa_plfa-part2-Substitution-2613" class="Function">Rename</a><a id="plfa_plfa-part3-Soundness-2126" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2128" href="../Substitution/#plfa_plfa-part2-Substitution-2892" class="Function">Subst</a><a id="plfa_plfa-part3-Soundness-2133" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2135" href="../Substitution/#plfa_plfa-part2-Substitution-3772" class="Function">ids</a><a id="plfa_plfa-part3-Soundness-2138" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-2140" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-2145" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-2152" href="../Denotational/#" class="Module">plfa.part3.Denotational</a>
     <a id="plfa_plfa-part3-Soundness-2181" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-2187" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-2188" href="../Denotational/#plfa_plfa-part3-Denotational-4890" class="Datatype">Value</a><a id="plfa_plfa-part3-Soundness-2193" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2195" href="../Denotational/#plfa_plfa-part3-Denotational-4910" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Soundness-2196" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2198" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a><a id="plfa_plfa-part3-Soundness-2201" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2203" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">_⊢_↓_</a><a id="plfa_plfa-part3-Soundness-2208" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2210" href="../Denotational/#plfa_plfa-part3-Denotational-8851" class="Function Operator">_`,_</a><a id="plfa_plfa-part3-Soundness-2214" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2216" href="../Denotational/#plfa_plfa-part3-Denotational-5357" class="Datatype Operator">_⊑_</a><a id="plfa_plfa-part3-Soundness-2219" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2221" href="../Denotational/#plfa_plfa-part3-Denotational-9629" class="Function Operator">_`⊑_</a><a id="plfa_plfa-part3-Soundness-2225" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2227" href="../Denotational/#plfa_plfa-part3-Denotational-9883" class="Function">`⊥</a><a id="plfa_plfa-part3-Soundness-2229" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2231" href="../Denotational/#plfa_plfa-part3-Denotational-9912" class="Function Operator">_`⊔_</a><a id="plfa_plfa-part3-Soundness-2235" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2237" href="../Denotational/#plfa_plfa-part3-Denotational-9155" class="Function">init</a><a id="plfa_plfa-part3-Soundness-2241" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2243" href="../Denotational/#plfa_plfa-part3-Denotational-9210" class="Function">last</a><a id="plfa_plfa-part3-Soundness-2247" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2249" href="../Denotational/#plfa_plfa-part3-Denotational-9259" class="Function">init-last</a><a id="plfa_plfa-part3-Soundness-2258" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2272" href="../Denotational/#plfa_plfa-part3-Denotational-6753" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Soundness-2278" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2280" href="../Denotational/#plfa_plfa-part3-Denotational-5647" class="InductiveConstructor">⊑-trans</a><a id="plfa_plfa-part3-Soundness-2287" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2289" href="../Denotational/#plfa_plfa-part3-Denotational-10472" class="Function">`⊑-refl</a><a id="plfa_plfa-part3-Soundness-2296" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2298" href="../Denotational/#plfa_plfa-part3-Denotational-32265" class="Function">⊑-env</a><a id="plfa_plfa-part3-Soundness-2303" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2305" href="../Denotational/#plfa_plfa-part3-Denotational-10543" class="Function">⊑-env-conj-R1</a><a id="plfa_plfa-part3-Soundness-2318" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2320" href="../Denotational/#plfa_plfa-part3-Denotational-10649" class="Function">⊑-env-conj-R2</a><a id="plfa_plfa-part3-Soundness-2333" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2335" href="../Denotational/#plfa_plfa-part3-Denotational-32787" class="Function">up-env</a><a id="plfa_plfa-part3-Soundness-2341" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2355" href="../Denotational/#plfa_plfa-part3-Denotational-11441" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-2358" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2360" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Soundness-2366" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2368" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a><a id="plfa_plfa-part3-Soundness-2375" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2377" href="../Denotational/#plfa_plfa-part3-Denotational-11750" class="InductiveConstructor">⊥-intro</a><a id="plfa_plfa-part3-Soundness-2384" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2386" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Soundness-2393" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2395" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a><a id="plfa_plfa-part3-Soundness-2398" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2412" href="../Denotational/#plfa_plfa-part3-Denotational-30264" class="Function">rename-pres</a><a id="plfa_plfa-part3-Soundness-2423" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2425" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a><a id="plfa_plfa-part3-Soundness-2426" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2428" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">_≃_</a><a id="plfa_plfa-part3-Soundness-2431" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2433" href="../Denotational/#plfa_plfa-part3-Denotational-22859" class="Function">≃-trans</a><a id="plfa_plfa-part3-Soundness-2440" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-2442" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-2447" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-2454" href="../Compositional/#" class="Module">plfa.part3.Compositional</a> <a id="plfa_plfa-part3-Soundness-2479" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-2485" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-2486" href="../Compositional/#plfa_plfa-part3-Compositional-4487" class="Function">lambda-inversion</a><a id="plfa_plfa-part3-Soundness-2502" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2504" href="../Compositional/#plfa_plfa-part3-Compositional-12881" class="Function">var-inv</a><a id="plfa_plfa-part3-Soundness-2511" class="Symbol">)</a>
</pre><h2 id="向前归约保持指称不变">向前归约保持指称不变</h2><p>本节中对指称不变性的证明使用了前一章中的技术。和 STLC 的不变性证明一样，我们保留了独立于语法定义的关系，这与内在类型项相反。 另一方面，我们对变量使用了 de Bruijn 索引。</p><p>证明的大纲保持不变，因为我们必须证明归约关系中使用的所有辅助函数的引理： 代换、重命名和扩展。</p><h3 id="同时代换保持指称不变">同时代换保持指称不变</h3><p>我们接下来的目标是证明同时代换变量和环境会保持含义不变。也就是说，若 <code>M</code> 在环境 <code>γ</code> 中的结果是 <code>v</code>，那么代换 <code>σ</code> 应用到 <code>M</code> 所得的程序，其结果仍然是 <code>v</code>， 但环境转移到了 <code>δ</code> 中。该环境中对于每一个变量 <code>x</code>，<code>σ x</code> 产生的结果值与原始环境 <code>γ</code> 中的 <code>x</code> 的值相同。我们将这种情况写作 <code>δ `⊢ σ ↓ γ</code>。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-3923" class="Keyword">infix</a> <a id="plfa_plfa-part3-Soundness-3929" class="Number">3</a> <a id="plfa_plfa-part3-Soundness-3931" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">_`⊢_↓_</a>
<a id="plfa_plfa-part3-Soundness-_`⊢_↓_"></a><a id="plfa_plfa-part3-Soundness-3938" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">_`⊢_↓_</a> <a id="plfa_plfa-part3-Soundness-3945" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3947" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-3949" href="../Soundness/#plfa_plfa-part3-Soundness-3949" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-3951" href="../Soundness/#plfa_plfa-part3-Soundness-3951" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-3952" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-3954" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3956" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-3960" href="../Soundness/#plfa_plfa-part3-Soundness-3949" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-3962" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3964" href="../Substitution/#plfa_plfa-part2-Substitution-2892" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-3970" href="../Soundness/#plfa_plfa-part3-Soundness-3951" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3972" href="../Soundness/#plfa_plfa-part3-Soundness-3949" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-3974" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3976" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-3980" href="../Soundness/#plfa_plfa-part3-Soundness-3951" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3982" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3984" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="plfa_plfa-part3-Soundness-3988" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">_`⊢_↓_</a> <a id="plfa_plfa-part3-Soundness-3995" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-3996" href="../Soundness/#plfa_plfa-part3-Soundness-3996" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-3997" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-3999" href="../Soundness/#plfa_plfa-part3-Soundness-3999" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-4000" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4002" href="../Soundness/#plfa_plfa-part3-Soundness-4002" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4004" href="../Soundness/#plfa_plfa-part3-Soundness-4004" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4006" href="../Soundness/#plfa_plfa-part3-Soundness-4006" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4008" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4010" class="Symbol">(∀</a> <a id="plfa_plfa-part3-Soundness-4013" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4014" href="../Soundness/#plfa_plfa-part3-Soundness-4014" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-4016" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4018" href="../Soundness/#plfa_plfa-part3-Soundness-3999" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4020" href="../Untyped/#plfa_plfa-part2-Untyped-4323" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-4022" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-4023" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4025" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4027" href="../Soundness/#plfa_plfa-part3-Soundness-4002" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4029" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-4031" href="../Soundness/#plfa_plfa-part3-Soundness-4004" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4033" href="../Soundness/#plfa_plfa-part3-Soundness-4014" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-4035" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4037" href="../Soundness/#plfa_plfa-part3-Soundness-4006" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4039" href="../Soundness/#plfa_plfa-part3-Soundness-4014" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-4040" class="Symbol">)</a>
</pre><p>和之前一样，为了证明 λ-抽象，我们需要证明一个扩展引理， 该引理说明了将 <code>exts</code> 函数应用于代换会产生一个新的代换，该代换将变量映射到项， 使得当对 <code>δ , v</code> 求值时会产生 <code>γ , v</code> 中的值。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-ext"></a><a id="plfa_plfa-part3-Soundness-4426" href="../Soundness/#plfa_plfa-part3-Soundness-4426" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-4436" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4438" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-4440" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4441" href="../Soundness/#plfa_plfa-part3-Soundness-4441" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4443" href="../Soundness/#plfa_plfa-part3-Soundness-4443" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-4445" href="../Soundness/#plfa_plfa-part3-Soundness-4445" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-4446" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4448" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4449" href="../Soundness/#plfa_plfa-part3-Soundness-4449" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4451" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4453" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4457" href="../Soundness/#plfa_plfa-part3-Soundness-4441" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-4458" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4460" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4461" href="../Soundness/#plfa_plfa-part3-Soundness-4461" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4463" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4465" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4469" href="../Soundness/#plfa_plfa-part3-Soundness-4443" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-4470" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-4474" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4476" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4477" href="../Soundness/#plfa_plfa-part3-Soundness-4477" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4479" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4481" href="../Substitution/#plfa_plfa-part2-Substitution-2892" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-4487" href="../Soundness/#plfa_plfa-part3-Soundness-4441" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4489" href="../Soundness/#plfa_plfa-part3-Soundness-4443" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-4490" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-4494" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4496" href="../Soundness/#plfa_plfa-part3-Soundness-4461" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4498" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-4501" href="../Soundness/#plfa_plfa-part3-Soundness-4477" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4503" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4505" href="../Soundness/#plfa_plfa-part3-Soundness-4449" class="Bound">γ</a>
   <a id="plfa_plfa-part3-Soundness-4510" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part3-Soundness-4539" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4541" href="../Soundness/#plfa_plfa-part3-Soundness-4461" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4543" href="../Denotational/#plfa_plfa-part3-Denotational-8851" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-4546" href="../Soundness/#plfa_plfa-part3-Soundness-4445" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-4548" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-4551" href="../Untyped/#plfa_plfa-part2-Untyped-8550" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-4556" href="../Soundness/#plfa_plfa-part3-Soundness-4477" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4558" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4560" href="../Soundness/#plfa_plfa-part3-Soundness-4449" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4562" href="../Denotational/#plfa_plfa-part3-Denotational-8851" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-4565" href="../Soundness/#plfa_plfa-part3-Soundness-4445" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-4567" href="../Soundness/#plfa_plfa-part3-Soundness-4426" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-4577" href="../Soundness/#plfa_plfa-part3-Soundness-4577" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4579" href="../Soundness/#plfa_plfa-part3-Soundness-4579" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-4581" href="../Untyped/#plfa_plfa-part2-Untyped-4359" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-4583" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4585" href="../Denotational/#plfa_plfa-part3-Denotational-11441" class="InductiveConstructor">var</a>
<a id="plfa_plfa-part3-Soundness-4589" href="../Soundness/#plfa_plfa-part3-Soundness-4426" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-4599" href="../Soundness/#plfa_plfa-part3-Soundness-4599" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4601" href="../Soundness/#plfa_plfa-part3-Soundness-4601" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-4603" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4604" href="../Untyped/#plfa_plfa-part2-Untyped-4404" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-4606" href="../Soundness/#plfa_plfa-part3-Soundness-4606" class="Bound">x′</a><a id="plfa_plfa-part3-Soundness-4608" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4610" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4612" href="../Denotational/#plfa_plfa-part3-Denotational-30264" class="Function">rename-pres</a> <a id="plfa_plfa-part3-Soundness-4624" href="../Untyped/#plfa_plfa-part2-Untyped-4404" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part3-Soundness-4627" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-4630" href="../Soundness/#plfa_plfa-part3-Soundness-4630" class="Bound">_</a> <a id="plfa_plfa-part3-Soundness-4632" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4634" href="../Denotational/#plfa_plfa-part3-Denotational-6753" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Soundness-4640" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4642" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4643" href="../Soundness/#plfa_plfa-part3-Soundness-4601" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-4645" href="../Soundness/#plfa_plfa-part3-Soundness-4606" class="Bound">x′</a><a id="plfa_plfa-part3-Soundness-4647" class="Symbol">)</a>
</pre><p>该证明通过对 de Bruijn 索引 <code>x</code> 进行情况分析来论证：</p><ul><li><p>若索引为 <code>Z</code>，那么我们需要证明 <code>δ , v ⊢ # 0 ↓ v</code>， 它可通过规则 <code>var</code> 得证。</p></li><li><p>若索引为 <code>S x′</code> 那么我们需要证明 <code>δ , v ⊢ rename S_ (σ x′) ↓ γ x′</code>， 它可通过 <code>rename-pres</code> 引理证明。</p></li></ul><p>有了这个扩展引理，同时代换会保持含义不变的证明就很直白了，我们继续深入：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-pres"></a><a id="plfa_plfa-part3-Soundness-5303" href="../Soundness/#plfa_plfa-part3-Soundness-5303" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5314" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5316" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-5318" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5319" href="../Soundness/#plfa_plfa-part3-Soundness-5319" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-5321" href="../Soundness/#plfa_plfa-part3-Soundness-5321" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-5323" href="../Soundness/#plfa_plfa-part3-Soundness-5323" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-5324" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5326" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5327" href="../Soundness/#plfa_plfa-part3-Soundness-5327" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5329" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5331" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-5335" href="../Soundness/#plfa_plfa-part3-Soundness-5319" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-5336" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5338" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5339" href="../Soundness/#plfa_plfa-part3-Soundness-5339" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-5341" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5343" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-5347" href="../Soundness/#plfa_plfa-part3-Soundness-5321" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-5348" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5350" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5351" href="../Soundness/#plfa_plfa-part3-Soundness-5351" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5353" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5355" href="../Soundness/#plfa_plfa-part3-Soundness-5319" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-5357" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5359" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-5360" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-5364" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5366" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5367" href="../Soundness/#plfa_plfa-part3-Soundness-5367" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5369" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5371" href="../Substitution/#plfa_plfa-part2-Substitution-2892" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-5377" href="../Soundness/#plfa_plfa-part3-Soundness-5319" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-5379" href="../Soundness/#plfa_plfa-part3-Soundness-5321" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-5380" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-5384" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5386" href="../Soundness/#plfa_plfa-part3-Soundness-5339" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-5388" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-5391" href="../Soundness/#plfa_plfa-part3-Soundness-5367" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5393" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5395" href="../Soundness/#plfa_plfa-part3-Soundness-5327" class="Bound">γ</a>
  <a id="plfa_plfa-part3-Soundness-5399" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5401" href="../Soundness/#plfa_plfa-part3-Soundness-5327" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5403" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5405" href="../Soundness/#plfa_plfa-part3-Soundness-5351" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5407" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5409" href="../Soundness/#plfa_plfa-part3-Soundness-5323" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-5415" class="Comment">------------------</a>
  <a id="plfa_plfa-part3-Soundness-5436" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5438" href="../Soundness/#plfa_plfa-part3-Soundness-5339" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-5440" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5442" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a> <a id="plfa_plfa-part3-Soundness-5448" href="../Soundness/#plfa_plfa-part3-Soundness-5367" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5450" href="../Soundness/#plfa_plfa-part3-Soundness-5351" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5452" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5454" href="../Soundness/#plfa_plfa-part3-Soundness-5323" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-5456" href="../Soundness/#plfa_plfa-part3-Soundness-5303" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5467" href="../Soundness/#plfa_plfa-part3-Soundness-5467" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5469" href="../Soundness/#plfa_plfa-part3-Soundness-5469" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5471" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5472" href="../Denotational/#plfa_plfa-part3-Denotational-11441" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-5476" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5477" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-5479" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5481" href="../Soundness/#plfa_plfa-part3-Soundness-5481" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-5482" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-5485" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5487" href="../Soundness/#plfa_plfa-part3-Soundness-5469" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5489" href="../Soundness/#plfa_plfa-part3-Soundness-5481" class="Bound">x</a>
<a id="plfa_plfa-part3-Soundness-5491" href="../Soundness/#plfa_plfa-part3-Soundness-5303" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5502" href="../Soundness/#plfa_plfa-part3-Soundness-5502" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5504" href="../Soundness/#plfa_plfa-part3-Soundness-5504" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5506" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5507" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-5514" href="../Soundness/#plfa_plfa-part3-Soundness-5514" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-5517" href="../Soundness/#plfa_plfa-part3-Soundness-5517" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-5519" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5521" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-5525" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-5532" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5533" href="../Soundness/#plfa_plfa-part3-Soundness-5303" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5544" href="../Soundness/#plfa_plfa-part3-Soundness-5502" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5546" href="../Soundness/#plfa_plfa-part3-Soundness-5504" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5548" href="../Soundness/#plfa_plfa-part3-Soundness-5514" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-5550" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5552" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5553" href="../Soundness/#plfa_plfa-part3-Soundness-5303" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5564" href="../Soundness/#plfa_plfa-part3-Soundness-5502" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5566" href="../Soundness/#plfa_plfa-part3-Soundness-5504" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5568" href="../Soundness/#plfa_plfa-part3-Soundness-5517" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-5570" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-5572" href="../Soundness/#plfa_plfa-part3-Soundness-5303" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5583" href="../Soundness/#plfa_plfa-part3-Soundness-5583" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5585" href="../Soundness/#plfa_plfa-part3-Soundness-5585" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5587" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5588" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-5596" href="../Soundness/#plfa_plfa-part3-Soundness-5596" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-5597" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5599" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-5603" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-5611" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5612" href="../Soundness/#plfa_plfa-part3-Soundness-5303" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5623" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-5626" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5627" href="../Soundness/#plfa_plfa-part3-Soundness-5627" class="Bound">A</a><a id="plfa_plfa-part3-Soundness-5628" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5630" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5632" href="../Untyped/#plfa_plfa-part2-Untyped-8550" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-5637" href="../Soundness/#plfa_plfa-part3-Soundness-5583" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-5638" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5640" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5641" href="../Soundness/#plfa_plfa-part3-Soundness-4426" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-5651" href="../Soundness/#plfa_plfa-part3-Soundness-5583" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5653" href="../Soundness/#plfa_plfa-part3-Soundness-5585" class="Bound">s</a><a id="plfa_plfa-part3-Soundness-5654" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5656" href="../Soundness/#plfa_plfa-part3-Soundness-5596" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-5657" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-5659" href="../Soundness/#plfa_plfa-part3-Soundness-5303" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5670" href="../Soundness/#plfa_plfa-part3-Soundness-5670" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5672" href="../Soundness/#plfa_plfa-part3-Soundness-5672" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5674" href="../Denotational/#plfa_plfa-part3-Denotational-11750" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-5682" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5684" href="../Denotational/#plfa_plfa-part3-Denotational-11750" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-5692" href="../Soundness/#plfa_plfa-part3-Soundness-5303" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5703" href="../Soundness/#plfa_plfa-part3-Soundness-5703" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5705" href="../Soundness/#plfa_plfa-part3-Soundness-5705" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5707" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5708" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-5716" href="../Soundness/#plfa_plfa-part3-Soundness-5716" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-5719" href="../Soundness/#plfa_plfa-part3-Soundness-5719" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-5721" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5723" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-5727" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-5735" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5736" href="../Soundness/#plfa_plfa-part3-Soundness-5303" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5747" href="../Soundness/#plfa_plfa-part3-Soundness-5703" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5749" href="../Soundness/#plfa_plfa-part3-Soundness-5705" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5751" href="../Soundness/#plfa_plfa-part3-Soundness-5716" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-5753" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5755" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5756" href="../Soundness/#plfa_plfa-part3-Soundness-5303" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5767" href="../Soundness/#plfa_plfa-part3-Soundness-5703" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5769" href="../Soundness/#plfa_plfa-part3-Soundness-5705" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5771" href="../Soundness/#plfa_plfa-part3-Soundness-5719" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-5773" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-5775" href="../Soundness/#plfa_plfa-part3-Soundness-5303" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5786" href="../Soundness/#plfa_plfa-part3-Soundness-5786" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5788" href="../Soundness/#plfa_plfa-part3-Soundness-5788" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5790" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5791" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-5795" href="../Soundness/#plfa_plfa-part3-Soundness-5795" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-5797" href="../Soundness/#plfa_plfa-part3-Soundness-5797" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-5799" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5801" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5803" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-5807" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5808" href="../Soundness/#plfa_plfa-part3-Soundness-5303" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5819" href="../Soundness/#plfa_plfa-part3-Soundness-5786" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-5821" href="../Soundness/#plfa_plfa-part3-Soundness-5788" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-5823" href="../Soundness/#plfa_plfa-part3-Soundness-5795" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-5824" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5826" href="../Soundness/#plfa_plfa-part3-Soundness-5797" class="Bound">lt</a>
</pre><p>我们通过对 <code>M</code> 的语义进行归纳来证明。两个有趣的情况分别对应于变量和 λ-抽象：</p><ul><li><p>对于变量 <code>x</code>，我们有 <code>v = γ x</code>，于是需要证明 <code>δ ⊢ σ x ↓ v</code>。 将前提应用到 <code>x</code>，我们有 <code>δ ⊢ σ x ↓ γ x</code>，即 <code>δ ⊢ σ x ↓ v</code>.</p></li><li><p>对于 λ-抽象，我们必须为归纳假设扩展代换。应用 <code>subst-ext</code> 引理可证明扩展的代换会将变量映射到产生对应值的项。</p></li></ul><h3 id="单一代换保持指称不变">单一代换保持指称不变</h3><p>对于 β-规约 <code>(ƛ N) · M —→ N [ M ]</code>，我们需要证明当用 <code>M</code> 代换项 <code>N</code> 中的 de Bruijn 索引 0 时，语义保持不变。通过对规则 <code>↦-elim</code> 和 <code>↦-intro</code> 进行反演，我们可得到 <code>γ , v ⊢ M ↓ w</code> 和 <code>γ ⊢ N ↓ v</code>。因此，我们需要证明 <code>γ ⊢ M [ N ] ↓ w</code>，或等价地证明 <code>γ ⊢ subst (subst-zero N) M ↓ w</code>。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-substitution"></a><a id="plfa_plfa-part3-Soundness-7224" href="../Soundness/#plfa_plfa-part3-Soundness-7224" class="Function">substitution</a> <a id="plfa_plfa-part3-Soundness-7237" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-7239" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-7241" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-7242" href="../Soundness/#plfa_plfa-part3-Soundness-7242" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-7243" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-7245" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-7246" href="../Soundness/#plfa_plfa-part3-Soundness-7246" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7248" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-7250" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-7254" href="../Soundness/#plfa_plfa-part3-Soundness-7242" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-7255" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-7257" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-7258" href="../Soundness/#plfa_plfa-part3-Soundness-7258" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-7260" href="../Soundness/#plfa_plfa-part3-Soundness-7260" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-7262" href="../Soundness/#plfa_plfa-part3-Soundness-7262" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-7264" href="../Soundness/#plfa_plfa-part3-Soundness-7264" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-7265" class="Symbol">}</a>
   <a id="plfa_plfa-part3-Soundness-7270" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-7272" href="../Soundness/#plfa_plfa-part3-Soundness-7246" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7274" href="../Denotational/#plfa_plfa-part3-Denotational-8851" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-7277" href="../Soundness/#plfa_plfa-part3-Soundness-7262" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-7279" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-7281" href="../Soundness/#plfa_plfa-part3-Soundness-7258" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-7283" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-7285" href="../Soundness/#plfa_plfa-part3-Soundness-7264" class="Bound">w</a>
   <a id="plfa_plfa-part3-Soundness-7290" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-7292" href="../Soundness/#plfa_plfa-part3-Soundness-7246" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7294" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-7296" href="../Soundness/#plfa_plfa-part3-Soundness-7260" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-7298" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-7300" href="../Soundness/#plfa_plfa-part3-Soundness-7262" class="Bound">v</a>
     <a id="plfa_plfa-part3-Soundness-7307" class="Comment">---------------</a>
   <a id="plfa_plfa-part3-Soundness-7326" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-7328" href="../Soundness/#plfa_plfa-part3-Soundness-7246" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7330" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-7332" href="../Soundness/#plfa_plfa-part3-Soundness-7258" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-7334" href="../Untyped/#plfa_plfa-part2-Untyped-9523" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-7336" href="../Soundness/#plfa_plfa-part3-Soundness-7260" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-7338" href="../Untyped/#plfa_plfa-part2-Untyped-9523" class="Function Operator">]</a> <a id="plfa_plfa-part3-Soundness-7340" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-7342" href="../Soundness/#plfa_plfa-part3-Soundness-7264" class="Bound">w</a>
<a id="plfa_plfa-part3-Soundness-7344" href="../Soundness/#plfa_plfa-part3-Soundness-7224" class="Function">substitution</a><a id="plfa_plfa-part3-Soundness-7356" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-7357" href="../Soundness/#plfa_plfa-part3-Soundness-7357" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-7358" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-7360" href="../Soundness/#plfa_plfa-part3-Soundness-7360" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-7361" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-7363" href="../Soundness/#plfa_plfa-part3-Soundness-7363" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-7364" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-7366" href="../Soundness/#plfa_plfa-part3-Soundness-7366" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-7367" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-7369" href="../Soundness/#plfa_plfa-part3-Soundness-7369" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-7370" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-7372" href="../Soundness/#plfa_plfa-part3-Soundness-7372" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-7373" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-7375" href="../Soundness/#plfa_plfa-part3-Soundness-7375" class="Bound">dn</a> <a id="plfa_plfa-part3-Soundness-7378" href="../Soundness/#plfa_plfa-part3-Soundness-7378" class="Bound">dm</a> <a id="plfa_plfa-part3-Soundness-7381" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-7385" href="../Soundness/#plfa_plfa-part3-Soundness-5303" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-7396" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-7397" href="../Untyped/#plfa_plfa-part2-Untyped-9407" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-7408" href="../Soundness/#plfa_plfa-part3-Soundness-7366" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-7409" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-7411" href="../Soundness/#plfa_plfa-part3-Soundness-7433" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-7420" href="../Soundness/#plfa_plfa-part3-Soundness-7375" class="Bound">dn</a>
  <a id="plfa_plfa-part3-Soundness-7425" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-7433" href="../Soundness/#plfa_plfa-part3-Soundness-7433" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-7442" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-7444" href="../Soundness/#plfa_plfa-part3-Soundness-7360" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7446" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-7449" href="../Untyped/#plfa_plfa-part2-Untyped-9407" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-7460" href="../Soundness/#plfa_plfa-part3-Soundness-7366" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-7462" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-7464" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-7465" href="../Soundness/#plfa_plfa-part3-Soundness-7360" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-7467" href="../Denotational/#plfa_plfa-part3-Denotational-8851" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-7470" href="../Soundness/#plfa_plfa-part3-Soundness-7369" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-7471" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-7475" href="../Soundness/#plfa_plfa-part3-Soundness-7433" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-7484" href="../Untyped/#plfa_plfa-part2-Untyped-4359" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-7486" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-7488" href="../Soundness/#plfa_plfa-part3-Soundness-7378" class="Bound">dm</a>
  <a id="plfa_plfa-part3-Soundness-7493" href="../Soundness/#plfa_plfa-part3-Soundness-7433" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-7502" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-7503" href="../Untyped/#plfa_plfa-part2-Untyped-4404" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-7505" href="../Soundness/#plfa_plfa-part3-Soundness-7505" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-7506" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-7508" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-7510" href="../Denotational/#plfa_plfa-part3-Denotational-11441" class="InductiveConstructor">var</a>
</pre><p>这个结果是同时代换引理的推论。要使用该引理，我们只需要证明 <code>subst-zero M</code> 会将变量映射到某个项，该项产生的值与 <code>γ , v</code> 中产生的值相同。令 <code>y</code> 为任意变量（即 de Bruijn 索引）：</p><ul><li><p>若索引为 <code>Z</code>，则 <code>(subst-zero M) y = M</code> 且 <code>(γ , v) y = v</code>， 根据前提可得 <code>γ ⊢ M ↓ v</code>。</p></li><li><p>若索引为 <code>S x</code>，则 <code>(subst-zero M) (S x) = x</code> 且 <code>(γ , v) (S x) = γ x</code>， 根据规则 <code>var</code> 可得 <code>γ ⊢ x ↓ γ x</code>。</p></li></ul><h3 id="归约保持指称不变">归约保持指称不变</h3><p>有了代换引理，就能直接证明归约保持指称不变：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-preserve"></a><a id="plfa_plfa-part3-Soundness-8527" href="../Soundness/#plfa_plfa-part3-Soundness-8527" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8536" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8538" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-8540" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8541" href="../Soundness/#plfa_plfa-part3-Soundness-8541" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-8542" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-8544" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8545" href="../Soundness/#plfa_plfa-part3-Soundness-8545" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-8547" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8549" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-8553" href="../Soundness/#plfa_plfa-part3-Soundness-8541" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-8554" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-8556" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8557" href="../Soundness/#plfa_plfa-part3-Soundness-8557" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-8559" href="../Soundness/#plfa_plfa-part3-Soundness-8559" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-8561" href="../Soundness/#plfa_plfa-part3-Soundness-8561" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-8562" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-8566" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8568" href="../Soundness/#plfa_plfa-part3-Soundness-8545" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-8570" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-8572" href="../Soundness/#plfa_plfa-part3-Soundness-8557" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-8574" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-8576" href="../Soundness/#plfa_plfa-part3-Soundness-8561" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-8580" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8582" href="../Soundness/#plfa_plfa-part3-Soundness-8557" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-8584" href="../Untyped/#plfa_plfa-part2-Untyped-12823" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-8587" href="../Soundness/#plfa_plfa-part3-Soundness-8559" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-8593" class="Comment">----------</a>
  <a id="plfa_plfa-part3-Soundness-8606" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8608" href="../Soundness/#plfa_plfa-part3-Soundness-8545" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-8610" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-8612" href="../Soundness/#plfa_plfa-part3-Soundness-8559" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-8614" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-8616" href="../Soundness/#plfa_plfa-part3-Soundness-8561" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-8618" href="../Soundness/#plfa_plfa-part3-Soundness-8527" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8627" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8628" href="../Denotational/#plfa_plfa-part3-Denotational-11441" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-8631" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8633" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-8636" href="../Soundness/#plfa_plfa-part3-Soundness-8527" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8645" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8646" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-8653" href="../Soundness/#plfa_plfa-part3-Soundness-8653" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-8656" href="../Soundness/#plfa_plfa-part3-Soundness-8656" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-8658" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8660" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8661" href="../Untyped/#plfa_plfa-part2-Untyped-12873" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-8664" href="../Soundness/#plfa_plfa-part3-Soundness-8664" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8665" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8667" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8669" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-8676" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8677" href="../Soundness/#plfa_plfa-part3-Soundness-8527" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8686" href="../Soundness/#plfa_plfa-part3-Soundness-8653" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-8689" href="../Soundness/#plfa_plfa-part3-Soundness-8664" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8690" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8692" href="../Soundness/#plfa_plfa-part3-Soundness-8656" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-8695" href="../Soundness/#plfa_plfa-part3-Soundness-8527" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8704" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8705" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-8712" href="../Soundness/#plfa_plfa-part3-Soundness-8712" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-8715" href="../Soundness/#plfa_plfa-part3-Soundness-8715" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-8717" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8719" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8720" href="../Untyped/#plfa_plfa-part2-Untyped-12963" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-8723" href="../Soundness/#plfa_plfa-part3-Soundness-8723" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8724" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8726" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8728" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-8735" href="../Soundness/#plfa_plfa-part3-Soundness-8712" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-8738" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8739" href="../Soundness/#plfa_plfa-part3-Soundness-8527" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8748" href="../Soundness/#plfa_plfa-part3-Soundness-8715" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-8751" href="../Soundness/#plfa_plfa-part3-Soundness-8723" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8752" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-8754" href="../Soundness/#plfa_plfa-part3-Soundness-8527" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8763" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8764" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-8771" href="../Soundness/#plfa_plfa-part3-Soundness-8771" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-8774" href="../Soundness/#plfa_plfa-part3-Soundness-8774" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-8776" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8778" href="../Untyped/#plfa_plfa-part2-Untyped-13053" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-8780" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8782" href="../Soundness/#plfa_plfa-part3-Soundness-7224" class="Function">substitution</a> <a id="plfa_plfa-part3-Soundness-8795" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8796" href="../Compositional/#plfa_plfa-part3-Compositional-4487" class="Function">lambda-inversion</a> <a id="plfa_plfa-part3-Soundness-8813" href="../Soundness/#plfa_plfa-part3-Soundness-8771" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-8815" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8817" href="../Soundness/#plfa_plfa-part3-Soundness-8774" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-8820" href="../Soundness/#plfa_plfa-part3-Soundness-8527" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8829" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8830" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-8838" href="../Soundness/#plfa_plfa-part3-Soundness-8838" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-8839" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8841" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8842" href="../Untyped/#plfa_plfa-part2-Untyped-13161" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-8844" href="../Soundness/#plfa_plfa-part3-Soundness-8844" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8845" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8847" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8849" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-8857" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8858" href="../Soundness/#plfa_plfa-part3-Soundness-8527" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8867" href="../Soundness/#plfa_plfa-part3-Soundness-8838" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-8869" href="../Soundness/#plfa_plfa-part3-Soundness-8844" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8870" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-8872" href="../Soundness/#plfa_plfa-part3-Soundness-8527" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8881" href="../Denotational/#plfa_plfa-part3-Denotational-11750" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-8889" href="../Soundness/#plfa_plfa-part3-Soundness-8889" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-8891" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8893" href="../Denotational/#plfa_plfa-part3-Denotational-11750" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-8901" href="../Soundness/#plfa_plfa-part3-Soundness-8527" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8910" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8911" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-8919" href="../Soundness/#plfa_plfa-part3-Soundness-8919" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-8921" href="../Soundness/#plfa_plfa-part3-Soundness-8921" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-8923" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8925" href="../Soundness/#plfa_plfa-part3-Soundness-8925" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-8927" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8929" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-8937" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8938" href="../Soundness/#plfa_plfa-part3-Soundness-8527" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8947" href="../Soundness/#plfa_plfa-part3-Soundness-8919" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-8949" href="../Soundness/#plfa_plfa-part3-Soundness-8925" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8950" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8952" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8953" href="../Soundness/#plfa_plfa-part3-Soundness-8527" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8962" href="../Soundness/#plfa_plfa-part3-Soundness-8921" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-8965" href="../Soundness/#plfa_plfa-part3-Soundness-8925" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-8966" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-8968" href="../Soundness/#plfa_plfa-part3-Soundness-8527" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-8977" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8978" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-8982" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-8984" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-8986" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8988" href="../Soundness/#plfa_plfa-part3-Soundness-8988" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-8990" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8992" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-8996" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8997" href="../Soundness/#plfa_plfa-part3-Soundness-8527" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-9006" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-9008" href="../Soundness/#plfa_plfa-part3-Soundness-8988" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-9009" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9011" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Bound">lt</a>
</pre><p>我们通过对 <code>M</code> 的语义进行归纳，并对归约进行情况分析来证明：</p><ul><li><p>若 <code>M</code> 为变量，则无需归约。</p></li><li><p>若 <code>M</code> 为应用，则归约要么满足合同性（ξ₁ 或 ξ₂），要么是 β-归约。 对于每一种合同性，我们使用归纳假设。对于 β-归约，我们使用代换引理和 <code>sub</code> 规则。</p></li><li><p>其余的情况都很直白。</p></li></ul><h2 id="归约反映了指称不变">归约反映了指称不变</h2><p>本节中将证明归约反映了项的指称不变，换言之，若 <code>N</code> 的结果是 <code>v</code>，且若 <code>M</code> 可归约为 <code>N</code>，则 <code>M</code> 的结果也是 <code>v</code>。虽然此证明和前面的语义保持不变的证明 之间存在一些广泛的相似之处，但我们仍需更多的技术引理才能得到这个结果。</p><p>最主要挑战是处理 β-归约中的代换：</p><pre><code>(ƛ N) · M —→ N [ M ]</code></pre><p>我们有 <code>γ ⊢ N [ M ] ↓ v</code> 且需要证明 <code>γ ⊢ (ƛ N) · M ↓ v</code>。现在考虑 <code>γ ⊢ N [ M ] ↓ v</code> 的推导过程。项 <code>M</code> 在 <code>N [ M ]</code> 中可能会出现 0、1 或多次。 对于它可能出现的任意次数，<code>M</code> 都可能产生不同的值。不过为了构建出 <code>(ƛ N) · M</code> 的推导过程，我们需要单个的 <code>M</code> 值。若 <code>M</code> 出现了超过 1 次，那么我们就能将不同的值用 <code>⊔</code> 连接到一起。若 <code>M</code> 出现了 0 次，那么我们就无需任何关于 <code>M</code> 的信息， 并直接使用 <code>⊥</code> 作为 <code>M</code> 的值。</p><h3 id="重命名反映了含义不变">重命名反映了含义不变</h3><p>首先，我们需要一个前面给出的引理的变体：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-ext-`⊑"></a><a id="plfa_plfa-part3-Soundness-11521" href="../Soundness/#plfa_plfa-part3-Soundness-11521" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-11528" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11530" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-11532" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11533" href="../Soundness/#plfa_plfa-part3-Soundness-11533" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11535" href="../Soundness/#plfa_plfa-part3-Soundness-11535" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-11537" href="../Soundness/#plfa_plfa-part3-Soundness-11537" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-11538" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11540" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11541" href="../Soundness/#plfa_plfa-part3-Soundness-11541" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11543" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11545" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-11549" href="../Soundness/#plfa_plfa-part3-Soundness-11533" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-11550" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11552" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11553" href="../Soundness/#plfa_plfa-part3-Soundness-11553" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11555" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11557" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-11561" href="../Soundness/#plfa_plfa-part3-Soundness-11535" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-11562" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-11566" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11568" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11569" href="../Soundness/#plfa_plfa-part3-Soundness-11569" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-11571" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11573" href="../Substitution/#plfa_plfa-part2-Substitution-2613" class="Function">Rename</a> <a id="plfa_plfa-part3-Soundness-11580" href="../Soundness/#plfa_plfa-part3-Soundness-11533" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11582" href="../Soundness/#plfa_plfa-part3-Soundness-11535" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-11583" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-11587" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11589" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11590" href="../Soundness/#plfa_plfa-part3-Soundness-11553" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11592" href="https://agda.github.io/agda-stdlib/v2.2-dev/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-11594" href="../Soundness/#plfa_plfa-part3-Soundness-11569" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-11595" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11597" href="../Denotational/#plfa_plfa-part3-Denotational-9629" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-11600" href="../Soundness/#plfa_plfa-part3-Soundness-11541" class="Bound">γ</a>
    <a id="plfa_plfa-part3-Soundness-11606" class="Comment">------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-11639" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11641" class="Symbol">((</a><a id="plfa_plfa-part3-Soundness-11643" href="../Soundness/#plfa_plfa-part3-Soundness-11553" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11645" href="../Denotational/#plfa_plfa-part3-Denotational-8851" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-11648" href="../Soundness/#plfa_plfa-part3-Soundness-11537" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-11649" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11651" href="https://agda.github.io/agda-stdlib/v2.2-dev/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-11653" href="../Untyped/#plfa_plfa-part2-Untyped-7631" class="Function">ext</a> <a id="plfa_plfa-part3-Soundness-11657" href="../Soundness/#plfa_plfa-part3-Soundness-11569" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-11658" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11660" href="../Denotational/#plfa_plfa-part3-Denotational-9629" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-11663" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11664" href="../Soundness/#plfa_plfa-part3-Soundness-11541" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11666" href="../Denotational/#plfa_plfa-part3-Denotational-8851" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-11669" href="../Soundness/#plfa_plfa-part3-Soundness-11537" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-11670" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-11672" href="../Soundness/#plfa_plfa-part3-Soundness-11521" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-11679" href="../Soundness/#plfa_plfa-part3-Soundness-11679" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-11681" href="../Soundness/#plfa_plfa-part3-Soundness-11681" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-11684" href="../Untyped/#plfa_plfa-part2-Untyped-4359" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-11686" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-11688" href="../Denotational/#plfa_plfa-part3-Denotational-6753" class="Function">⊑-refl</a>
<a id="plfa_plfa-part3-Soundness-11695" href="../Soundness/#plfa_plfa-part3-Soundness-11521" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-11702" href="../Soundness/#plfa_plfa-part3-Soundness-11702" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-11704" href="../Soundness/#plfa_plfa-part3-Soundness-11704" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-11707" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11708" href="../Untyped/#plfa_plfa-part2-Untyped-4404" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-11710" href="../Soundness/#plfa_plfa-part3-Soundness-11710" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-11711" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11713" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-11715" href="../Soundness/#plfa_plfa-part3-Soundness-11704" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-11718" href="../Soundness/#plfa_plfa-part3-Soundness-11710" class="Bound">x</a>
</pre><p>然后证明如下：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-rename-reflect"></a><a id="plfa_plfa-part3-Soundness-11782" href="../Soundness/#plfa_plfa-part3-Soundness-11782" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-11797" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11799" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-11801" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11802" href="../Soundness/#plfa_plfa-part3-Soundness-11802" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11804" href="../Soundness/#plfa_plfa-part3-Soundness-11804" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-11806" href="../Soundness/#plfa_plfa-part3-Soundness-11806" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-11807" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11809" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11810" href="../Soundness/#plfa_plfa-part3-Soundness-11810" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11812" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11814" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-11818" href="../Soundness/#plfa_plfa-part3-Soundness-11802" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-11819" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11821" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11822" href="../Soundness/#plfa_plfa-part3-Soundness-11822" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11824" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11826" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-11830" href="../Soundness/#plfa_plfa-part3-Soundness-11804" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-11831" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11833" class="Symbol">{</a> <a id="plfa_plfa-part3-Soundness-11835" href="../Soundness/#plfa_plfa-part3-Soundness-11835" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-11837" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11839" href="../Soundness/#plfa_plfa-part3-Soundness-11802" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11841" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-11843" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-11844" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-11848" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11850" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11851" href="../Soundness/#plfa_plfa-part3-Soundness-11851" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-11853" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11855" href="../Substitution/#plfa_plfa-part2-Substitution-2613" class="Function">Rename</a> <a id="plfa_plfa-part3-Soundness-11862" href="../Soundness/#plfa_plfa-part3-Soundness-11802" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11864" href="../Soundness/#plfa_plfa-part3-Soundness-11804" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-11865" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-11869" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11871" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11872" href="../Soundness/#plfa_plfa-part3-Soundness-11822" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11874" href="https://agda.github.io/agda-stdlib/v2.2-dev/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-11876" href="../Soundness/#plfa_plfa-part3-Soundness-11851" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-11877" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11879" href="../Denotational/#plfa_plfa-part3-Denotational-9629" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-11882" href="../Soundness/#plfa_plfa-part3-Soundness-11810" class="Bound">γ</a>
  <a id="plfa_plfa-part3-Soundness-11886" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11888" href="../Soundness/#plfa_plfa-part3-Soundness-11822" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-11890" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-11892" href="../Untyped/#plfa_plfa-part2-Untyped-8023" class="Function">rename</a> <a id="plfa_plfa-part3-Soundness-11899" href="../Soundness/#plfa_plfa-part3-Soundness-11851" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-11901" href="../Soundness/#plfa_plfa-part3-Soundness-11835" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-11903" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-11905" href="../Soundness/#plfa_plfa-part3-Soundness-11806" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-11911" class="Comment">------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-11950" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11952" href="../Soundness/#plfa_plfa-part3-Soundness-11810" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11954" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-11956" href="../Soundness/#plfa_plfa-part3-Soundness-11835" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-11958" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-11960" href="../Soundness/#plfa_plfa-part3-Soundness-11806" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-11962" href="../Soundness/#plfa_plfa-part3-Soundness-11782" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-11977" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11978" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-11980" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-11982" href="../Untyped/#plfa_plfa-part2-Untyped-5402" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-11984" href="../Soundness/#plfa_plfa-part3-Soundness-11984" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-11985" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11987" href="../Soundness/#plfa_plfa-part3-Soundness-11987" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-11993" href="../Soundness/#plfa_plfa-part3-Soundness-11993" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-11995" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-12000" href="../Compositional/#plfa_plfa-part3-Compositional-12881" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-12008" href="../Soundness/#plfa_plfa-part3-Soundness-11993" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-12010" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-12014" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-12016" href="../Soundness/#plfa_plfa-part3-Soundness-12016" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-12019" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12022" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-12026" href="../Denotational/#plfa_plfa-part3-Denotational-11441" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-12030" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12031" href="../Denotational/#plfa_plfa-part3-Denotational-5647" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Soundness-12039" href="../Soundness/#plfa_plfa-part3-Soundness-12016" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-12042" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12043" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12049" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12050" class="Symbol">))</a>
<a id="plfa_plfa-part3-Soundness-12053" href="../Soundness/#plfa_plfa-part3-Soundness-11782" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12068" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12069" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12071" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12073" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-12075" href="../Soundness/#plfa_plfa-part3-Soundness-12075" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-12076" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-12078" class="Argument">ρ</a> <a id="plfa_plfa-part3-Soundness-12080" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12082" href="../Soundness/#plfa_plfa-part3-Soundness-12082" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-12083" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12085" href="../Soundness/#plfa_plfa-part3-Soundness-12085" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12091" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12092" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-12100" href="../Soundness/#plfa_plfa-part3-Soundness-12100" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-12101" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12103" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12108" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-12116" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12117" href="../Soundness/#plfa_plfa-part3-Soundness-11782" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12132" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12133" href="../Soundness/#plfa_plfa-part3-Soundness-11521" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-12140" href="../Soundness/#plfa_plfa-part3-Soundness-12082" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-12142" href="../Soundness/#plfa_plfa-part3-Soundness-12085" class="Bound">all-n</a><a id="plfa_plfa-part3-Soundness-12147" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12149" href="../Soundness/#plfa_plfa-part3-Soundness-12100" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-12150" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-12152" href="../Soundness/#plfa_plfa-part3-Soundness-11782" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12167" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12168" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12170" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12172" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-12174" href="../Soundness/#plfa_plfa-part3-Soundness-12174" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-12175" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12177" href="../Soundness/#plfa_plfa-part3-Soundness-12177" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12183" href="../Denotational/#plfa_plfa-part3-Denotational-11750" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-12191" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12193" href="../Denotational/#plfa_plfa-part3-Denotational-11750" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-12201" href="../Soundness/#plfa_plfa-part3-Soundness-11782" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12216" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12217" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12219" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12221" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-12223" href="../Soundness/#plfa_plfa-part3-Soundness-12223" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-12224" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12226" href="../Soundness/#plfa_plfa-part3-Soundness-12226" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12232" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12233" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-12241" href="../Soundness/#plfa_plfa-part3-Soundness-12241" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-12244" href="../Soundness/#plfa_plfa-part3-Soundness-12244" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12246" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12248" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12253" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-12261" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12262" href="../Soundness/#plfa_plfa-part3-Soundness-11782" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12277" href="../Soundness/#plfa_plfa-part3-Soundness-12226" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12283" href="../Soundness/#plfa_plfa-part3-Soundness-12241" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-12285" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12287" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12288" href="../Soundness/#plfa_plfa-part3-Soundness-11782" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12303" href="../Soundness/#plfa_plfa-part3-Soundness-12226" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12309" href="../Soundness/#plfa_plfa-part3-Soundness-12244" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12311" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-12313" href="../Soundness/#plfa_plfa-part3-Soundness-11782" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12328" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12329" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12331" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12333" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-12335" href="../Soundness/#plfa_plfa-part3-Soundness-12335" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-12336" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12338" href="../Soundness/#plfa_plfa-part3-Soundness-12338" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12344" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12345" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-12349" href="../Soundness/#plfa_plfa-part3-Soundness-12349" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-12352" href="../Soundness/#plfa_plfa-part3-Soundness-12352" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-12354" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12356" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12361" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-12365" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12366" href="../Soundness/#plfa_plfa-part3-Soundness-11782" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12381" href="../Soundness/#plfa_plfa-part3-Soundness-12338" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12387" href="../Soundness/#plfa_plfa-part3-Soundness-12349" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-12389" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12391" href="../Soundness/#plfa_plfa-part3-Soundness-12352" class="Bound">lt</a>
<a id="plfa_plfa-part3-Soundness-12394" href="../Soundness/#plfa_plfa-part3-Soundness-11782" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12409" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12410" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12412" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12414" href="../Soundness/#plfa_plfa-part3-Soundness-12414" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-12416" href="../Untyped/#plfa_plfa-part2-Untyped-5514" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-12418" href="../Soundness/#plfa_plfa-part3-Soundness-12418" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-12419" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12421" href="../Soundness/#plfa_plfa-part3-Soundness-12421" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12427" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12428" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-12435" href="../Soundness/#plfa_plfa-part3-Soundness-12435" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-12438" href="../Soundness/#plfa_plfa-part3-Soundness-12438" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12440" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12442" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12447" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-12454" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12455" href="../Soundness/#plfa_plfa-part3-Soundness-11782" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12470" href="../Soundness/#plfa_plfa-part3-Soundness-12421" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12476" href="../Soundness/#plfa_plfa-part3-Soundness-12435" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-12478" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12480" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12481" href="../Soundness/#plfa_plfa-part3-Soundness-11782" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12496" href="../Soundness/#plfa_plfa-part3-Soundness-12421" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12502" href="../Soundness/#plfa_plfa-part3-Soundness-12438" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12504" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-12506" href="../Soundness/#plfa_plfa-part3-Soundness-11782" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12521" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12522" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12524" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12526" href="../Soundness/#plfa_plfa-part3-Soundness-12526" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-12528" href="../Untyped/#plfa_plfa-part2-Untyped-5514" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-12530" href="../Soundness/#plfa_plfa-part3-Soundness-12530" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-12531" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12533" href="../Soundness/#plfa_plfa-part3-Soundness-12533" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12539" href="../Denotational/#plfa_plfa-part3-Denotational-11750" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-12547" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12549" href="../Denotational/#plfa_plfa-part3-Denotational-11750" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-12557" href="../Soundness/#plfa_plfa-part3-Soundness-11782" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12572" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12573" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12575" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12577" href="../Soundness/#plfa_plfa-part3-Soundness-12577" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-12579" href="../Untyped/#plfa_plfa-part2-Untyped-5514" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-12581" href="../Soundness/#plfa_plfa-part3-Soundness-12581" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-12582" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12584" href="../Soundness/#plfa_plfa-part3-Soundness-12584" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12590" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12591" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-12599" href="../Soundness/#plfa_plfa-part3-Soundness-12599" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-12602" href="../Soundness/#plfa_plfa-part3-Soundness-12602" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12604" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12606" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12611" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-12619" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12620" href="../Soundness/#plfa_plfa-part3-Soundness-11782" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12635" href="../Soundness/#plfa_plfa-part3-Soundness-12584" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12641" href="../Soundness/#plfa_plfa-part3-Soundness-12599" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-12643" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12645" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12646" href="../Soundness/#plfa_plfa-part3-Soundness-11782" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12661" href="../Soundness/#plfa_plfa-part3-Soundness-12584" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12667" href="../Soundness/#plfa_plfa-part3-Soundness-12602" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-12669" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-12671" href="../Soundness/#plfa_plfa-part3-Soundness-11782" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12686" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12687" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-12689" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12691" href="../Soundness/#plfa_plfa-part3-Soundness-12691" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-12693" href="../Untyped/#plfa_plfa-part2-Untyped-5514" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-12695" href="../Soundness/#plfa_plfa-part3-Soundness-12695" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-12696" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12698" href="../Soundness/#plfa_plfa-part3-Soundness-12698" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12704" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12705" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-12709" href="../Soundness/#plfa_plfa-part3-Soundness-12709" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-12712" href="../Soundness/#plfa_plfa-part3-Soundness-12712" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-12714" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12716" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-12721" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-12725" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12726" href="../Soundness/#plfa_plfa-part3-Soundness-11782" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-12741" href="../Soundness/#plfa_plfa-part3-Soundness-12698" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-12747" href="../Soundness/#plfa_plfa-part3-Soundness-12709" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-12749" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12751" href="../Soundness/#plfa_plfa-part3-Soundness-12712" class="Bound">lt</a>
</pre><p>我们无法通过对 <code>δ ⊢ rename ρ M ↓ v</code> 的推导过程进行归纳来证明此引理， 所以我们转而通过对 <code>M</code> 进行归纳来证明：</p><ul><li><p>若它是一个变量，我们可通过对它应用反演引理得到 <code>v ⊑ δ (ρ x)</code>。 将前提实例化为 <code>x</code>，我们有 <code>δ (ρ x) ⊑ γ x</code>，于是我们可通过 <code>var</code> 规则证明。</p></li><li><p>若它是一个 λ-抽象 <code>ƛ N</code>，我们有重命名 <code>ρ (ƛ N) = ƛ (rename (ext ρ) N)</code>。 可通过对 <code>δ ⊢ ƛ (rename (ext ρ) N) ↓ v</code> 进行情况分析来论证：</p><ul><li><p>规则 <code>↦-intro</code>：为了满足归纳假设的前提，我们证明了重命名可扩展为从 <code>γ , v</code> 到 <code>δ , v</code> 的映射。</p></li><li><p>规则 <code>⊥-intro</code>：直接应用 <code>⊥-intro</code>。</p></li><li><p>规则 <code>⊔-intro</code>：应用归纳假设和 <code>⊔-intro</code>。</p></li><li><p>规则 <code>sub</code>：应用归纳假设和 <code>sub</code>。</p></li></ul></li><li><p>若它是一个应用 <code>L · M</code>，我们有 <code>rename ρ (L · M) = (rename ρ L) · (rename ρ M)</code>， 于是可通过对 <code>δ ⊢ (rename ρ L) · (rename ρ M) ↓ v</code> 进行情况分析来论证， 而所有的情况都很直白。</p></li></ul><p>在以后使用 <code>rename-reflect</code> 的情况中，重命名始终都是增量函数， 于是我们先在这里为这些特殊情况证明以下推论：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-rename-inc-reflect"></a><a id="plfa_plfa-part3-Soundness-14583" href="../Soundness/#plfa_plfa-part3-Soundness-14583" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-14602" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14604" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-14606" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14607" href="../Soundness/#plfa_plfa-part3-Soundness-14607" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14609" href="../Soundness/#plfa_plfa-part3-Soundness-14609" class="Bound">v′</a> <a id="plfa_plfa-part3-Soundness-14612" href="../Soundness/#plfa_plfa-part3-Soundness-14612" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-14613" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14615" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14616" href="../Soundness/#plfa_plfa-part3-Soundness-14616" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14618" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14620" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-14624" href="../Soundness/#plfa_plfa-part3-Soundness-14607" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-14625" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14627" class="Symbol">{</a> <a id="plfa_plfa-part3-Soundness-14629" href="../Soundness/#plfa_plfa-part3-Soundness-14629" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-14631" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14633" href="../Soundness/#plfa_plfa-part3-Soundness-14607" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14635" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-14637" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-14638" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-14642" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14644" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14645" href="../Soundness/#plfa_plfa-part3-Soundness-14616" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14647" href="../Denotational/#plfa_plfa-part3-Denotational-8851" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-14650" href="../Soundness/#plfa_plfa-part3-Soundness-14609" class="Bound">v′</a><a id="plfa_plfa-part3-Soundness-14652" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-14654" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-14656" href="../Untyped/#plfa_plfa-part2-Untyped-8023" class="Function">rename</a> <a id="plfa_plfa-part3-Soundness-14663" href="../Untyped/#plfa_plfa-part2-Untyped-4404" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part3-Soundness-14666" href="../Soundness/#plfa_plfa-part3-Soundness-14629" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-14668" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14670" href="../Soundness/#plfa_plfa-part3-Soundness-14612" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-14676" class="Comment">----------------------------</a>
  <a id="plfa_plfa-part3-Soundness-14707" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14709" href="../Soundness/#plfa_plfa-part3-Soundness-14616" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14711" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-14713" href="../Soundness/#plfa_plfa-part3-Soundness-14629" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-14715" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14717" href="../Soundness/#plfa_plfa-part3-Soundness-14612" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-14719" href="../Soundness/#plfa_plfa-part3-Soundness-14583" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-14738" href="../Soundness/#plfa_plfa-part3-Soundness-14738" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-14740" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14742" href="../Soundness/#plfa_plfa-part3-Soundness-11782" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-14757" href="../Denotational/#plfa_plfa-part3-Denotational-10472" class="Function">`⊑-refl</a> <a id="plfa_plfa-part3-Soundness-14765" href="../Soundness/#plfa_plfa-part3-Soundness-14738" class="Bound">d</a>
</pre><h3 id="代换反映了指称不变变量的情况">代换反映了指称不变：变量的情况</h3><p>我们基本上准备好证明同时代换反映指称不变了，也就是说，若 <code>γ ⊢ (subst σ M) ↓ v</code>，则对于任意 <code>k</code> 和某些 <code>δ</code>，有 <code>γ ⊢ σ k ↓ δ k</code> 且 <code>δ ⊢ M ↓ v</code>。我们首先从 <code>M</code> 是一个变量 <code>x</code> 的情况开始， 已知前提是 <code>γ ⊢ σ x ↓ v</code>，我们需要证明对于某个 <code>δ</code>，有 <code>δ ⊢ ` x ↓ v</code>。 我们选择的环境 <code>δ</code> 应当将 <code>x</code> 映射到 <code>v</code>，将任何其他变量映射到 <code>⊥</code>。</p><p>接下来我们定义将 <code>x</code> 映射到 <code>v</code>，将其他变量映射到 <code>⊥</code> 的环境，即 <code>const-env x v</code>。为了区分变量，我们定义以下函数来确定变量的相等性：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-_var≟_"></a><a id="plfa_plfa-part3-Soundness-15853" href="../Soundness/#plfa_plfa-part3-Soundness-15853" class="Function Operator">_var≟_</a> <a id="plfa_plfa-part3-Soundness-15860" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15862" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-15864" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15865" href="../Soundness/#plfa_plfa-part3-Soundness-15865" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-15866" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15868" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15870" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15871" href="../Soundness/#plfa_plfa-part3-Soundness-15871" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-15873" href="../Soundness/#plfa_plfa-part3-Soundness-15873" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-15875" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15877" href="../Soundness/#plfa_plfa-part3-Soundness-15865" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15879" href="../Untyped/#plfa_plfa-part2-Untyped-4323" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-15881" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-15882" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-15884" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15886" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Decidable.Core.html#1861" class="Record">Dec</a> <a id="plfa_plfa-part3-Soundness-15890" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15891" href="../Soundness/#plfa_plfa-part3-Soundness-15871" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-15893" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-15895" href="../Soundness/#plfa_plfa-part3-Soundness-15873" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-15896" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-15898" href="../Untyped/#plfa_plfa-part2-Untyped-4359" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-15900" href="../Soundness/#plfa_plfa-part3-Soundness-15853" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-15905" href="../Untyped/#plfa_plfa-part2-Untyped-4359" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-15908" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-15911" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-15915" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-15920" href="../Untyped/#plfa_plfa-part2-Untyped-4359" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-15922" href="../Soundness/#plfa_plfa-part3-Soundness-15853" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-15927" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15928" href="../Untyped/#plfa_plfa-part2-Untyped-4404" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-15930" class="Symbol">_)</a>  <a id="plfa_plfa-part3-Soundness-15934" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-15937" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-15940" class="Symbol">λ()</a>
<a id="plfa_plfa-part3-Soundness-15944" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15945" href="../Untyped/#plfa_plfa-part2-Untyped-4404" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-15947" class="Symbol">_)</a> <a id="plfa_plfa-part3-Soundness-15950" href="../Soundness/#plfa_plfa-part3-Soundness-15853" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-15955" href="../Untyped/#plfa_plfa-part2-Untyped-4359" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-15958" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-15961" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-15964" class="Symbol">λ()</a>
<a id="plfa_plfa-part3-Soundness-15968" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15969" href="../Untyped/#plfa_plfa-part2-Untyped-4404" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-15971" href="../Soundness/#plfa_plfa-part3-Soundness-15971" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-15972" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-15974" href="../Soundness/#plfa_plfa-part3-Soundness-15853" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-15979" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15980" href="../Untyped/#plfa_plfa-part2-Untyped-4404" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-15982" href="../Soundness/#plfa_plfa-part3-Soundness-15982" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-15983" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-15985" class="Keyword">with</a>  <a id="plfa_plfa-part3-Soundness-15991" href="../Soundness/#plfa_plfa-part3-Soundness-15971" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-15993" href="../Soundness/#plfa_plfa-part3-Soundness-15853" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-15998" href="../Soundness/#plfa_plfa-part3-Soundness-15982" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-16000" class="Symbol">...</a>                 <a id="plfa_plfa-part3-Soundness-16020" class="Symbol">|</a>  <a id="plfa_plfa-part3-Soundness-16023" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-16027" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-16032" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-16035" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-16039" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-16044" class="Symbol">...</a>                 <a id="plfa_plfa-part3-Soundness-16064" class="Symbol">|</a>  <a id="plfa_plfa-part3-Soundness-16067" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-16070" href="../Soundness/#plfa_plfa-part3-Soundness-16070" class="Bound">neq</a>   <a id="plfa_plfa-part3-Soundness-16076" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-16079" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-16082" class="Symbol">λ{</a><a id="plfa_plfa-part3-Soundness-16084" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-16089" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16091" href="../Soundness/#plfa_plfa-part3-Soundness-16070" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-16095" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-16099" class="Symbol">}</a>

<a id="plfa_plfa-part3-Soundness-var≟-refl"></a><a id="plfa_plfa-part3-Soundness-16102" href="../Soundness/#plfa_plfa-part3-Soundness-16102" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-16112" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16114" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-16116" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16117" href="../Soundness/#plfa_plfa-part3-Soundness-16117" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-16118" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16120" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16121" href="../Soundness/#plfa_plfa-part3-Soundness-16121" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16123" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16125" href="../Soundness/#plfa_plfa-part3-Soundness-16117" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-16127" href="../Untyped/#plfa_plfa-part2-Untyped-4323" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-16129" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-16130" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16132" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16134" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16135" href="../Soundness/#plfa_plfa-part3-Soundness-16121" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16137" href="../Soundness/#plfa_plfa-part3-Soundness-15853" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16142" href="../Soundness/#plfa_plfa-part3-Soundness-16121" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-16143" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16145" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-16147" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-16151" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-16156" href="../Soundness/#plfa_plfa-part3-Soundness-16102" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-16166" href="../Untyped/#plfa_plfa-part2-Untyped-4359" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-16168" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16170" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-16175" href="../Soundness/#plfa_plfa-part3-Soundness-16102" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-16185" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16186" href="../Untyped/#plfa_plfa-part2-Untyped-4404" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-16188" href="../Soundness/#plfa_plfa-part3-Soundness-16188" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-16189" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16191" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-16199" href="../Soundness/#plfa_plfa-part3-Soundness-16102" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-16209" href="../Soundness/#plfa_plfa-part3-Soundness-16188" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16211" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16213" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre><p>接着我们用 <code>var≟</code> 来定义 <code>const-env</code>：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-const-env"></a><a id="plfa_plfa-part3-Soundness-16313" href="../Soundness/#plfa_plfa-part3-Soundness-16313" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-16323" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16325" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-16327" href="../Soundness/#plfa_plfa-part3-Soundness-16327" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-16328" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16330" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16332" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16333" href="../Soundness/#plfa_plfa-part3-Soundness-16333" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16335" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16337" href="../Soundness/#plfa_plfa-part3-Soundness-16327" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-16339" href="../Untyped/#plfa_plfa-part2-Untyped-4323" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-16341" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-16342" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16344" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16346" href="../Denotational/#plfa_plfa-part3-Denotational-4890" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-16352" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16354" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-16358" href="../Soundness/#plfa_plfa-part3-Soundness-16327" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Soundness-16360" href="../Soundness/#plfa_plfa-part3-Soundness-16313" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-16370" href="../Soundness/#plfa_plfa-part3-Soundness-16370" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16372" href="../Soundness/#plfa_plfa-part3-Soundness-16372" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-16374" href="../Soundness/#plfa_plfa-part3-Soundness-16374" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-16376" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16381" href="../Soundness/#plfa_plfa-part3-Soundness-16370" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16383" href="../Soundness/#plfa_plfa-part3-Soundness-15853" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16388" href="../Soundness/#plfa_plfa-part3-Soundness-16374" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-16390" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-16406" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16408" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-16412" class="Symbol">_</a>       <a id="plfa_plfa-part3-Soundness-16420" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16422" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-16424" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-16440" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16442" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-16445" class="Symbol">_</a>        <a id="plfa_plfa-part3-Soundness-16454" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16456" href="../Denotational/#plfa_plfa-part3-Denotational-4910" class="InductiveConstructor">⊥</a>
</pre><p>当然，<code>const-env x v</code> 将 <code>x</code> 映射到值 <code>v</code>：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-same-const-env"></a><a id="plfa_plfa-part3-Soundness-16565" href="../Soundness/#plfa_plfa-part3-Soundness-16565" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-16580" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16582" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-16584" href="../Soundness/#plfa_plfa-part3-Soundness-16584" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-16585" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16587" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16588" href="../Soundness/#plfa_plfa-part3-Soundness-16588" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16590" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16592" href="../Soundness/#plfa_plfa-part3-Soundness-16584" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-16594" href="../Untyped/#plfa_plfa-part2-Untyped-4323" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-16596" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-16597" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16599" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16600" href="../Soundness/#plfa_plfa-part3-Soundness-16600" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-16601" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16603" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16605" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16606" href="../Soundness/#plfa_plfa-part3-Soundness-16313" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-16616" href="../Soundness/#plfa_plfa-part3-Soundness-16588" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16618" href="../Soundness/#plfa_plfa-part3-Soundness-16600" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-16619" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16621" href="../Soundness/#plfa_plfa-part3-Soundness-16588" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16623" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-16625" href="../Soundness/#plfa_plfa-part3-Soundness-16600" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-16627" href="../Soundness/#plfa_plfa-part3-Soundness-16565" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-16642" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16643" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-16645" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16647" href="../Soundness/#plfa_plfa-part3-Soundness-16647" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-16648" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16650" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-16658" href="../Soundness/#plfa_plfa-part3-Soundness-16102" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-16668" href="../Soundness/#plfa_plfa-part3-Soundness-16647" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16670" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16672" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre><p>以及 <code>const-env x v</code> 将 <code>y</code> 映射到 <code>⊥</code>，且 <code>x ≢ y</code>。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-diff-const-env"></a><a id="plfa_plfa-part3-Soundness-16802" href="../Soundness/#plfa_plfa-part3-Soundness-16802" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-16817" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16819" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-16821" href="../Soundness/#plfa_plfa-part3-Soundness-16821" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-16822" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16824" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16825" href="../Soundness/#plfa_plfa-part3-Soundness-16825" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16827" href="../Soundness/#plfa_plfa-part3-Soundness-16827" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-16829" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-16831" href="../Soundness/#plfa_plfa-part3-Soundness-16821" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-16833" href="../Untyped/#plfa_plfa-part2-Untyped-4323" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-16835" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-16836" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16838" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16839" href="../Soundness/#plfa_plfa-part3-Soundness-16839" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-16840" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-16844" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16846" href="../Soundness/#plfa_plfa-part3-Soundness-16825" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16848" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="plfa_plfa-part3-Soundness-16850" href="../Soundness/#plfa_plfa-part3-Soundness-16827" class="Bound">y</a>
    <a id="plfa_plfa-part3-Soundness-16856" class="Comment">-------------------</a>
  <a id="plfa_plfa-part3-Soundness-16878" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16880" href="../Soundness/#plfa_plfa-part3-Soundness-16313" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-16890" href="../Soundness/#plfa_plfa-part3-Soundness-16825" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16892" href="../Soundness/#plfa_plfa-part3-Soundness-16839" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-16894" href="../Soundness/#plfa_plfa-part3-Soundness-16827" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-16896" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-16898" href="../Denotational/#plfa_plfa-part3-Denotational-4910" class="InductiveConstructor">⊥</a>
<a id="plfa_plfa-part3-Soundness-16900" href="../Soundness/#plfa_plfa-part3-Soundness-16802" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-16915" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16916" href="../Soundness/#plfa_plfa-part3-Soundness-16916" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-16917" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16919" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16920" href="../Soundness/#plfa_plfa-part3-Soundness-16920" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-16921" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16923" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16924" href="../Soundness/#plfa_plfa-part3-Soundness-16924" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-16925" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16927" href="../Soundness/#plfa_plfa-part3-Soundness-16927" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-16931" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16936" href="../Soundness/#plfa_plfa-part3-Soundness-16920" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16938" href="../Soundness/#plfa_plfa-part3-Soundness-15853" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-16943" href="../Soundness/#plfa_plfa-part3-Soundness-16924" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-16945" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-16950" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16952" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-16956" href="../Soundness/#plfa_plfa-part3-Soundness-16956" class="Bound">eq</a>  <a id="plfa_plfa-part3-Soundness-16960" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-16963" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Negation.Core.html#1270" class="Function">contradiction</a> <a id="plfa_plfa-part3-Soundness-16977" href="../Soundness/#plfa_plfa-part3-Soundness-16956" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-16980" class="Bound">neq</a>
<a id="plfa_plfa-part3-Soundness-16984" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-16989" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16991" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-16994" class="Symbol">_</a>    <a id="plfa_plfa-part3-Soundness-16999" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-17002" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre><p>于是我们为 <code>δ</code> 选择 <code>const-env x v</code> 并通过 <code>var</code> 规则得到了 <code>δ ⊢ ` x ↓ v</code>。</p><p>剩下的就是证明 <code>γ `⊢ σ ↓ δ</code>，以及对于任意 <code>k</code> 有 <code>δ ⊢ M ↓ v</code>，据此我们 就能为 <code>δ</code> 选择 <code>const-env x v</code>。我们有两种情况需要考虑：<code>x ≡ y</code> 或 <code>x ≢ y</code>。</p><p>现在完成该证明的两种情况：</p><ul><li>对于 <code>x ≡ y</code> 的情况，我们需要证明 <code>γ ⊢ σ y ↓ v</code>，不过这就是我们的前提。</li><li>对于 <code>x ≢ y,</code> 的情况， we need to show that <code>γ ⊢ σ y ↓ ⊥</code>, which we do via rule <code>⊥-intro</code>.</li></ul><p>这样，我们就完成了同时代换反映指称不变的证明中变量的情况。 以下是正式的证明：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-reflect-var"></a><a id="plfa_plfa-part3-Soundness-18084" href="../Soundness/#plfa_plfa-part3-Soundness-18084" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-18102" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18104" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-18106" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18107" href="../Soundness/#plfa_plfa-part3-Soundness-18107" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18109" href="../Soundness/#plfa_plfa-part3-Soundness-18109" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18110" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18112" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18113" href="../Soundness/#plfa_plfa-part3-Soundness-18113" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18115" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18117" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-18121" href="../Soundness/#plfa_plfa-part3-Soundness-18109" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18122" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18124" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18125" href="../Soundness/#plfa_plfa-part3-Soundness-18125" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18127" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18129" href="../Soundness/#plfa_plfa-part3-Soundness-18107" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18131" href="../Untyped/#plfa_plfa-part2-Untyped-4323" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-18133" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-18134" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18136" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18137" href="../Soundness/#plfa_plfa-part3-Soundness-18137" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-18138" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18140" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18141" href="../Soundness/#plfa_plfa-part3-Soundness-18141" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18143" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18145" href="../Substitution/#plfa_plfa-part2-Substitution-2892" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-18151" href="../Soundness/#plfa_plfa-part3-Soundness-18107" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18153" href="../Soundness/#plfa_plfa-part3-Soundness-18109" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18154" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-18158" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-18160" href="../Soundness/#plfa_plfa-part3-Soundness-18113" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18162" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-18164" href="../Soundness/#plfa_plfa-part3-Soundness-18141" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18166" href="../Soundness/#plfa_plfa-part3-Soundness-18125" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18168" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-18170" href="../Soundness/#plfa_plfa-part3-Soundness-18137" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-18176" class="Comment">-----------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-18220" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-18222" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-18225" href="../Soundness/#plfa_plfa-part3-Soundness-18225" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-18227" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-18229" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-18233" href="../Soundness/#plfa_plfa-part3-Soundness-18107" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18235" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-18237" href="../Soundness/#plfa_plfa-part3-Soundness-18113" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18239" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-18242" href="../Soundness/#plfa_plfa-part3-Soundness-18141" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18244" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-18246" href="../Soundness/#plfa_plfa-part3-Soundness-18225" class="Bound">δ</a>  <a id="plfa_plfa-part3-Soundness-18249" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1618" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-18252" href="../Soundness/#plfa_plfa-part3-Soundness-18225" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-18254" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-18256" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-18258" href="../Soundness/#plfa_plfa-part3-Soundness-18125" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18260" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-18262" href="../Soundness/#plfa_plfa-part3-Soundness-18137" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-18264" href="../Soundness/#plfa_plfa-part3-Soundness-18084" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-18282" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18283" href="../Soundness/#plfa_plfa-part3-Soundness-18283" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-18284" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18286" href="../Soundness/#plfa_plfa-part3-Soundness-18286" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18287" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18289" href="../Soundness/#plfa_plfa-part3-Soundness-18289" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-18290" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18292" href="../Soundness/#plfa_plfa-part3-Soundness-18292" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-18293" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18295" href="../Soundness/#plfa_plfa-part3-Soundness-18295" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-18296" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18298" href="../Soundness/#plfa_plfa-part3-Soundness-18298" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-18299" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18301" href="../Soundness/#plfa_plfa-part3-Soundness-18301" class="Bound">xv</a>
  <a id="plfa_plfa-part3-Soundness-18306" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-18314" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-18318" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-18319" href="../Soundness/#plfa_plfa-part3-Soundness-16565" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-18334" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18335" href="../Soundness/#plfa_plfa-part3-Soundness-18283" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-18336" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18338" href="../Soundness/#plfa_plfa-part3-Soundness-18292" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-18339" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18341" href="../Soundness/#plfa_plfa-part3-Soundness-18295" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-18342" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-18345" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-18351" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-18353" href="../Soundness/#plfa_plfa-part3-Soundness-16313" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-18363" href="../Soundness/#plfa_plfa-part3-Soundness-18292" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18365" href="../Soundness/#plfa_plfa-part3-Soundness-18295" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-18367" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-18369" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-18371" href="../Soundness/#plfa_plfa-part3-Soundness-18404" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-18384" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-18386" href="../Denotational/#plfa_plfa-part3-Denotational-11441" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-18390" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-18392" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Soundness-18396" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-18404" href="../Soundness/#plfa_plfa-part3-Soundness-18404" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-18417" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18419" href="../Soundness/#plfa_plfa-part3-Soundness-18289" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18421" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-18424" href="../Soundness/#plfa_plfa-part3-Soundness-18298" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18426" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-18428" href="../Soundness/#plfa_plfa-part3-Soundness-16313" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-18438" href="../Soundness/#plfa_plfa-part3-Soundness-18292" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18440" href="../Soundness/#plfa_plfa-part3-Soundness-18295" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-18444" href="../Soundness/#plfa_plfa-part3-Soundness-18404" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-18457" href="../Soundness/#plfa_plfa-part3-Soundness-18457" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-18459" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-18464" href="../Soundness/#plfa_plfa-part3-Soundness-18292" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18466" href="../Soundness/#plfa_plfa-part3-Soundness-15853" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-18471" href="../Soundness/#plfa_plfa-part3-Soundness-18457" class="Bound">y</a>
  <a id="plfa_plfa-part3-Soundness-18475" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-18479" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-18481" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-18485" href="../Soundness/#plfa_plfa-part3-Soundness-18485" class="Bound">x≡y</a> <a id="plfa_plfa-part3-Soundness-18489" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-18497" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-18501" href="../Soundness/#plfa_plfa-part3-Soundness-18485" class="Bound">x≡y</a> <a id="plfa_plfa-part3-Soundness-18505" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-18507" href="../Soundness/#plfa_plfa-part3-Soundness-16565" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-18522" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18523" href="../Soundness/#plfa_plfa-part3-Soundness-18283" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-18524" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18526" href="../Soundness/#plfa_plfa-part3-Soundness-18292" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-18527" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18529" href="../Soundness/#plfa_plfa-part3-Soundness-18295" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-18530" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18532" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-18534" href="../Soundness/#plfa_plfa-part3-Soundness-18301" class="Bound">xv</a>
  <a id="plfa_plfa-part3-Soundness-18539" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-18543" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-18545" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-18548" href="../Soundness/#plfa_plfa-part3-Soundness-18548" class="Bound">x≢y</a> <a id="plfa_plfa-part3-Soundness-18552" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-18560" href="../Soundness/#plfa_plfa-part3-Soundness-16802" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-18575" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-18576" href="../Soundness/#plfa_plfa-part3-Soundness-18283" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-18577" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18579" href="../Soundness/#plfa_plfa-part3-Soundness-18292" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-18580" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18582" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-18583" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18585" href="../Soundness/#plfa_plfa-part3-Soundness-18295" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-18586" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-18588" href="../Soundness/#plfa_plfa-part3-Soundness-18548" class="Bound">x≢y</a> <a id="plfa_plfa-part3-Soundness-18592" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-18594" href="../Denotational/#plfa_plfa-part3-Denotational-11750" class="InductiveConstructor">⊥-intro</a>
</pre><h3 id="代换与环境的构造">代换与环境的构造</h3><p>每一个代换都能产生可求值为 <code>⊥</code> 的项。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-⊥"></a><a id="plfa_plfa-part3-Soundness-18780" href="../Soundness/#plfa_plfa-part3-Soundness-18780" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-18788" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18790" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-18792" href="../Soundness/#plfa_plfa-part3-Soundness-18792" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18794" href="../Soundness/#plfa_plfa-part3-Soundness-18794" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18795" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18797" href="../Soundness/#plfa_plfa-part3-Soundness-18797" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18799" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18801" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-18805" href="../Soundness/#plfa_plfa-part3-Soundness-18794" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18806" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-18808" href="../Soundness/#plfa_plfa-part3-Soundness-18808" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18810" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-18812" href="../Substitution/#plfa_plfa-part2-Substitution-2892" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-18818" href="../Soundness/#plfa_plfa-part3-Soundness-18792" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-18820" href="../Soundness/#plfa_plfa-part3-Soundness-18794" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-18821" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Soundness-18827" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Soundness-18847" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-18849" href="../Soundness/#plfa_plfa-part3-Soundness-18797" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-18851" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-18854" href="../Soundness/#plfa_plfa-part3-Soundness-18808" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-18856" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-18858" href="../Denotational/#plfa_plfa-part3-Denotational-9883" class="Function">`⊥</a>
<a id="plfa_plfa-part3-Soundness-18861" href="../Soundness/#plfa_plfa-part3-Soundness-18780" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-18869" href="../Soundness/#plfa_plfa-part3-Soundness-18869" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-18871" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-18873" href="../Denotational/#plfa_plfa-part3-Denotational-11750" class="InductiveConstructor">⊥-intro</a>
</pre><p>若代换产生的项的求值结果为 <code>γ₁</code> 或 <code>γ₂</code> 中的值，那么这些项的求值结果也是 <code>γ₁ ⊔ γ₂</code> 中的值。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-⊔"></a><a id="plfa_plfa-part3-Soundness-19106" href="../Soundness/#plfa_plfa-part3-Soundness-19106" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-19114" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19116" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-19118" href="../Soundness/#plfa_plfa-part3-Soundness-19118" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-19120" href="../Soundness/#plfa_plfa-part3-Soundness-19120" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-19121" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-19123" href="../Soundness/#plfa_plfa-part3-Soundness-19123" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-19125" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19127" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-19131" href="../Soundness/#plfa_plfa-part3-Soundness-19120" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-19132" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-19134" href="../Soundness/#plfa_plfa-part3-Soundness-19134" class="Bound">γ₁</a> <a id="plfa_plfa-part3-Soundness-19137" href="../Soundness/#plfa_plfa-part3-Soundness-19137" class="Bound">γ₂</a> <a id="plfa_plfa-part3-Soundness-19140" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19142" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-19146" href="../Soundness/#plfa_plfa-part3-Soundness-19118" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-19147" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-19149" href="../Soundness/#plfa_plfa-part3-Soundness-19149" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-19151" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19153" href="../Substitution/#plfa_plfa-part2-Substitution-2892" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-19159" href="../Soundness/#plfa_plfa-part3-Soundness-19118" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-19161" href="../Soundness/#plfa_plfa-part3-Soundness-19120" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-19162" class="Symbol">}</a>
           <a id="plfa_plfa-part3-Soundness-19175" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-19177" href="../Soundness/#plfa_plfa-part3-Soundness-19123" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-19179" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-19182" href="../Soundness/#plfa_plfa-part3-Soundness-19149" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-19184" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-19186" href="../Soundness/#plfa_plfa-part3-Soundness-19134" class="Bound">γ₁</a>
           <a id="plfa_plfa-part3-Soundness-19200" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-19202" href="../Soundness/#plfa_plfa-part3-Soundness-19123" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-19204" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-19207" href="../Soundness/#plfa_plfa-part3-Soundness-19149" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-19209" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-19211" href="../Soundness/#plfa_plfa-part3-Soundness-19137" class="Bound">γ₂</a>
             <a id="plfa_plfa-part3-Soundness-19227" class="Comment">-------------------------</a>
           <a id="plfa_plfa-part3-Soundness-19264" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-19266" href="../Soundness/#plfa_plfa-part3-Soundness-19123" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-19268" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-19271" href="../Soundness/#plfa_plfa-part3-Soundness-19149" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-19273" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-19275" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-19276" href="../Soundness/#plfa_plfa-part3-Soundness-19134" class="Bound">γ₁</a> <a id="plfa_plfa-part3-Soundness-19279" href="../Denotational/#plfa_plfa-part3-Denotational-9912" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-19282" href="../Soundness/#plfa_plfa-part3-Soundness-19137" class="Bound">γ₂</a><a id="plfa_plfa-part3-Soundness-19284" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-19286" href="../Soundness/#plfa_plfa-part3-Soundness-19106" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-19294" href="../Soundness/#plfa_plfa-part3-Soundness-19294" class="Bound">γ₁-ok</a> <a id="plfa_plfa-part3-Soundness-19300" href="../Soundness/#plfa_plfa-part3-Soundness-19300" class="Bound">γ₂-ok</a> <a id="plfa_plfa-part3-Soundness-19306" href="../Soundness/#plfa_plfa-part3-Soundness-19306" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-19308" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-19310" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-19318" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-19319" href="../Soundness/#plfa_plfa-part3-Soundness-19294" class="Bound">γ₁-ok</a> <a id="plfa_plfa-part3-Soundness-19325" href="../Soundness/#plfa_plfa-part3-Soundness-19306" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-19326" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-19328" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-19329" href="../Soundness/#plfa_plfa-part3-Soundness-19300" class="Bound">γ₂-ok</a> <a id="plfa_plfa-part3-Soundness-19335" href="../Soundness/#plfa_plfa-part3-Soundness-19306" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-19336" class="Symbol">)</a>
</pre><h3 id="λ-构造子是单射的">λ 构造子是单射的</h3><pre class="Agda"><a id="plfa_plfa-part3-Soundness-lambda-inj"></a><a id="plfa_plfa-part3-Soundness-19416" href="../Soundness/#plfa_plfa-part3-Soundness-19416" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-19427" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19429" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-19431" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-19432" href="../Soundness/#plfa_plfa-part3-Soundness-19432" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-19433" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-19435" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-19436" href="../Soundness/#plfa_plfa-part3-Soundness-19436" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-19438" href="../Soundness/#plfa_plfa-part3-Soundness-19438" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-19440" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-19442" href="../Soundness/#plfa_plfa-part3-Soundness-19432" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-19444" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-19446" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-19448" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-19450" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-19452" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-19456" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-19458" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a> <a id="plfa_plfa-part3-Soundness-19462" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-19463" class="Argument">A</a> <a id="plfa_plfa-part3-Soundness-19465" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-19467" href="../Soundness/#plfa_plfa-part3-Soundness-19432" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-19469" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-19471" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-19472" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-19474" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-19475" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-19477" href="../Soundness/#plfa_plfa-part3-Soundness-19436" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-19478" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-19480" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-19481" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-19483" href="../Soundness/#plfa_plfa-part3-Soundness-19438" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-19484" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Soundness-19490" class="Comment">---------------------------</a>
  <a id="plfa_plfa-part3-Soundness-19520" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-19522" href="../Soundness/#plfa_plfa-part3-Soundness-19436" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-19524" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-19526" href="../Soundness/#plfa_plfa-part3-Soundness-19438" class="Bound">N</a>
<a id="plfa_plfa-part3-Soundness-19528" href="../Soundness/#plfa_plfa-part3-Soundness-19416" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-19539" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-19544" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-19546" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre><h3 id="同时代换反映了指称相等">同时代换反映了指称相等</h3><p>本节中我们要证明一个核心引理，即代换反映了指称不变。也就是说，若 <code>γ ⊢ subst σ M ↓ v</code>，则 <code>δ ⊢ M ↓ v</code> 且对于某个 <code>δ</code> 有 <code>γ `⊢ σ ↓ δ</code>。 我们通过对 <code>γ ⊢ subst σ M ↓ v</code> 的推导过程进行归纳来证明， 为此需要稍微重述一下该引理，将前提更改为 <code>γ ⊢ L ↓ v</code> 和 <code>L ≡ subst σ M</code>。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-split"></a><a id="plfa_plfa-part3-Soundness-20186" href="../Soundness/#plfa_plfa-part3-Soundness-20186" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-20192" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20194" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-20196" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20197" href="../Soundness/#plfa_plfa-part3-Soundness-20197" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-20198" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20200" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20201" href="../Soundness/#plfa_plfa-part3-Soundness-20201" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20203" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20205" href="../Soundness/#plfa_plfa-part3-Soundness-20197" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20207" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20209" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-20211" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20213" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20214" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20216" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20217" href="../Soundness/#plfa_plfa-part3-Soundness-20217" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20219" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20221" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20225" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20226" href="../Soundness/#plfa_plfa-part3-Soundness-20197" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20228" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20230" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20231" class="Symbol">)}</a> <a id="plfa_plfa-part3-Soundness-20234" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20235" href="../Soundness/#plfa_plfa-part3-Soundness-20235" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-20236" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-20240" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20242" href="../Soundness/#plfa_plfa-part3-Soundness-20217" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20244" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20246" href="../Soundness/#plfa_plfa-part3-Soundness-20201" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20248" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20250" href="../Soundness/#plfa_plfa-part3-Soundness-20235" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-20256" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part3-Soundness-20285" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20287" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20288" href="../Denotational/#plfa_plfa-part3-Denotational-9155" class="Function">init</a> <a id="plfa_plfa-part3-Soundness-20293" href="../Soundness/#plfa_plfa-part3-Soundness-20217" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20295" href="../Denotational/#plfa_plfa-part3-Denotational-8851" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-20298" href="../Denotational/#plfa_plfa-part3-Denotational-9210" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-20303" href="../Soundness/#plfa_plfa-part3-Soundness-20217" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-20304" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-20306" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20308" href="../Soundness/#plfa_plfa-part3-Soundness-20201" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20310" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20312" href="../Soundness/#plfa_plfa-part3-Soundness-20235" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-20314" href="../Soundness/#plfa_plfa-part3-Soundness-20186" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-20320" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20321" class="Argument">δ</a> <a id="plfa_plfa-part3-Soundness-20323" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20325" href="../Soundness/#plfa_plfa-part3-Soundness-20325" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-20326" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20328" href="../Soundness/#plfa_plfa-part3-Soundness-20328" class="Bound">δMv</a> <a id="plfa_plfa-part3-Soundness-20332" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-20340" href="../Denotational/#plfa_plfa-part3-Denotational-9259" class="Function">init-last</a> <a id="plfa_plfa-part3-Soundness-20350" href="../Soundness/#plfa_plfa-part3-Soundness-20325" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20352" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20354" href="../Soundness/#plfa_plfa-part3-Soundness-20328" class="Bound">δMv</a>

<a id="plfa_plfa-part3-Soundness-subst-reflect"></a><a id="plfa_plfa-part3-Soundness-20359" href="../Soundness/#plfa_plfa-part3-Soundness-20359" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-20373" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20375" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-20377" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20378" href="../Soundness/#plfa_plfa-part3-Soundness-20378" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20380" href="../Soundness/#plfa_plfa-part3-Soundness-20380" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20381" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20383" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20384" href="../Soundness/#plfa_plfa-part3-Soundness-20384" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20386" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20388" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20392" href="../Soundness/#plfa_plfa-part3-Soundness-20380" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20393" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20395" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20396" href="../Soundness/#plfa_plfa-part3-Soundness-20396" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20398" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20400" href="../Soundness/#plfa_plfa-part3-Soundness-20378" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20402" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20404" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20405" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20407" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20408" href="../Soundness/#plfa_plfa-part3-Soundness-20408" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-20409" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20411" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20412" href="../Soundness/#plfa_plfa-part3-Soundness-20412" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-20414" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20416" href="../Soundness/#plfa_plfa-part3-Soundness-20380" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-20418" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20420" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20421" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20423" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20424" href="../Soundness/#plfa_plfa-part3-Soundness-20424" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-20426" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20428" href="../Substitution/#plfa_plfa-part2-Substitution-2892" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-20434" href="../Soundness/#plfa_plfa-part3-Soundness-20378" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20436" href="../Soundness/#plfa_plfa-part3-Soundness-20380" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20437" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-20441" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20443" href="../Soundness/#plfa_plfa-part3-Soundness-20384" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20445" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20447" href="../Soundness/#plfa_plfa-part3-Soundness-20412" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-20449" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20451" href="../Soundness/#plfa_plfa-part3-Soundness-20408" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-20455" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20457" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a> <a id="plfa_plfa-part3-Soundness-20463" href="../Soundness/#plfa_plfa-part3-Soundness-20424" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-20465" href="../Soundness/#plfa_plfa-part3-Soundness-20396" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20467" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-20469" href="../Soundness/#plfa_plfa-part3-Soundness-20412" class="Bound">L</a>
    <a id="plfa_plfa-part3-Soundness-20475" class="Comment">---------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-20517" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20519" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-20522" href="../Soundness/#plfa_plfa-part3-Soundness-20522" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20524" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-20526" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20530" href="../Soundness/#plfa_plfa-part3-Soundness-20378" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-20532" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-20534" href="../Soundness/#plfa_plfa-part3-Soundness-20384" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20536" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-20539" href="../Soundness/#plfa_plfa-part3-Soundness-20424" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-20541" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20543" href="../Soundness/#plfa_plfa-part3-Soundness-20522" class="Bound">γ</a>  <a id="plfa_plfa-part3-Soundness-20546" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1618" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-20549" href="../Soundness/#plfa_plfa-part3-Soundness-20522" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20551" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20553" href="../Soundness/#plfa_plfa-part3-Soundness-20396" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20555" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20557" href="../Soundness/#plfa_plfa-part3-Soundness-20408" class="Bound">v</a>

<a id="plfa_plfa-part3-Soundness-20560" href="../Soundness/#plfa_plfa-part3-Soundness-20359" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-20574" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20575" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-20577" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20579" href="../Soundness/#plfa_plfa-part3-Soundness-20579" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-20580" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-20582" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-20584" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20586" href="../Soundness/#plfa_plfa-part3-Soundness-20586" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-20587" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20589" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20590" href="../Denotational/#plfa_plfa-part3-Denotational-11441" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-20594" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20595" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-20597" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20599" href="../Soundness/#plfa_plfa-part3-Soundness-20599" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-20600" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-20603" href="../Soundness/#plfa_plfa-part3-Soundness-20603" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-20607" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-20612" href="../Soundness/#plfa_plfa-part3-Soundness-20579" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-20614" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-20618" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20620" href="../Untyped/#plfa_plfa-part2-Untyped-5402" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-20622" href="../Soundness/#plfa_plfa-part3-Soundness-20622" class="Bound">x</a>  <a id="plfa_plfa-part3-Soundness-20625" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-20630" href="../Denotational/#plfa_plfa-part3-Denotational-11441" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-20634" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20635" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-20637" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20639" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-20640" class="Symbol">}</a>
<a id="plfa_plfa-part3-Soundness-20642" class="Symbol">...</a>           <a id="plfa_plfa-part3-Soundness-20656" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20658" href="../Soundness/#plfa_plfa-part3-Soundness-20658" class="Bound">yv</a>  <a id="plfa_plfa-part3-Soundness-20662" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-20670" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-20674" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-20678" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20680" href="../Soundness/#plfa_plfa-part3-Soundness-18084" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-20698" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20699" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-20701" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20703" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-20704" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20706" href="../Soundness/#plfa_plfa-part3-Soundness-20658" class="Bound">yv</a>
<a id="plfa_plfa-part3-Soundness-20709" href="../Soundness/#plfa_plfa-part3-Soundness-20359" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-20723" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20724" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-20726" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20728" href="../Soundness/#plfa_plfa-part3-Soundness-20728" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-20729" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20731" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20732" href="../Denotational/#plfa_plfa-part3-Denotational-11441" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-20736" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20737" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-20739" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20741" href="../Soundness/#plfa_plfa-part3-Soundness-20741" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-20742" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-20745" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-20748" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20750" href="../Soundness/#plfa_plfa-part3-Soundness-20750" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-20753" href="../Untyped/#plfa_plfa-part2-Untyped-5514" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-20755" href="../Soundness/#plfa_plfa-part3-Soundness-20755" class="Bound">M₂</a>
<a id="plfa_plfa-part3-Soundness-20758" href="../Soundness/#plfa_plfa-part3-Soundness-20359" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-20772" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20773" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-20775" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20777" href="../Soundness/#plfa_plfa-part3-Soundness-20777" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-20778" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20780" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20781" href="../Denotational/#plfa_plfa-part3-Denotational-11441" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-20785" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20786" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-20788" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20790" href="../Soundness/#plfa_plfa-part3-Soundness-20790" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-20791" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-20794" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-20797" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20799" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-20801" href="../Soundness/#plfa_plfa-part3-Soundness-20801" class="Bound">M′</a>

<a id="plfa_plfa-part3-Soundness-20805" href="../Soundness/#plfa_plfa-part3-Soundness-20359" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-20819" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20820" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-20822" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20824" href="../Soundness/#plfa_plfa-part3-Soundness-20824" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-20825" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-20827" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-20829" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20831" href="../Soundness/#plfa_plfa-part3-Soundness-20831" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-20832" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20834" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20835" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-20842" href="../Soundness/#plfa_plfa-part3-Soundness-20842" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-20845" href="../Soundness/#plfa_plfa-part3-Soundness-20845" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-20847" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-20849" href="../Soundness/#plfa_plfa-part3-Soundness-20849" class="Bound">eqL</a>
         <a id="plfa_plfa-part3-Soundness-20862" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-20867" href="../Soundness/#plfa_plfa-part3-Soundness-20824" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-20869" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-20876" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20878" href="../Untyped/#plfa_plfa-part2-Untyped-5402" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-20880" href="../Soundness/#plfa_plfa-part3-Soundness-20880" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-20882" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-20887" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-20894" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-20897" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-20900" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-20907" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20909" href="../Soundness/#plfa_plfa-part3-Soundness-20909" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-20912" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-20920" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-20924" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-20928" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20930" href="../Soundness/#plfa_plfa-part3-Soundness-18084" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-20948" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20949" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-20951" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20953" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-20954" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20956" href="../Soundness/#plfa_plfa-part3-Soundness-20909" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-20959" href="../Soundness/#plfa_plfa-part3-Soundness-20359" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-20973" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20974" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-20981" href="../Soundness/#plfa_plfa-part3-Soundness-20981" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-20984" href="../Soundness/#plfa_plfa-part3-Soundness-20984" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-20986" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-20988" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-20991" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-20993" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-20995" href="../Soundness/#plfa_plfa-part3-Soundness-20995" class="Bound">M′</a>
<a id="plfa_plfa-part3-Soundness-20998" href="../Soundness/#plfa_plfa-part3-Soundness-20359" class="Function">subst-reflect</a><a id="plfa_plfa-part3-Soundness-21011" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21012" href="../Soundness/#plfa_plfa-part3-Soundness-21012" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-21013" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21015" href="../Soundness/#plfa_plfa-part3-Soundness-21015" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-21016" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21018" href="../Soundness/#plfa_plfa-part3-Soundness-21018" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-21019" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21021" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21023" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21025" href="../Soundness/#plfa_plfa-part3-Soundness-21025" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21026" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21028" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21029" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-21036" href="../Soundness/#plfa_plfa-part3-Soundness-21036" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-21039" href="../Soundness/#plfa_plfa-part3-Soundness-21039" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-21041" class="Symbol">)</a>
   <a id="plfa_plfa-part3-Soundness-21046" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-21051" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21053" href="../Soundness/#plfa_plfa-part3-Soundness-21053" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-21056" href="../Untyped/#plfa_plfa-part2-Untyped-5514" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-21058" href="../Soundness/#plfa_plfa-part3-Soundness-21058" class="Bound">M₂</a>
     <a id="plfa_plfa-part3-Soundness-21066" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21071" href="../Soundness/#plfa_plfa-part3-Soundness-20359" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21085" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21086" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-21088" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21090" href="../Soundness/#plfa_plfa-part3-Soundness-21053" class="Bound">M₁</a><a id="plfa_plfa-part3-Soundness-21092" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21094" href="../Soundness/#plfa_plfa-part3-Soundness-21036" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-21097" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-21102" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21104" href="../Soundness/#plfa_plfa-part3-Soundness-20359" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21118" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21119" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-21121" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21123" href="../Soundness/#plfa_plfa-part3-Soundness-21058" class="Bound">M₂</a><a id="plfa_plfa-part3-Soundness-21125" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21127" href="../Soundness/#plfa_plfa-part3-Soundness-21039" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-21130" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-21135" class="Symbol">...</a>     <a id="plfa_plfa-part3-Soundness-21143" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21145" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21147" href="../Soundness/#plfa_plfa-part3-Soundness-21147" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-21150" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21152" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21154" href="../Soundness/#plfa_plfa-part3-Soundness-21154" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-21163" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21165" href="../Soundness/#plfa_plfa-part3-Soundness-21165" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-21168" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21170" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21172" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21174" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21176" href="../Soundness/#plfa_plfa-part3-Soundness-21176" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-21179" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21181" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21183" href="../Soundness/#plfa_plfa-part3-Soundness-21183" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-21192" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21194" href="../Soundness/#plfa_plfa-part3-Soundness-21194" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-21197" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21199" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21201" class="Symbol">=</a>
     <a id="plfa_plfa-part3-Soundness-21208" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21210" href="../Soundness/#plfa_plfa-part3-Soundness-21147" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-21213" href="../Denotational/#plfa_plfa-part3-Denotational-9912" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-21216" href="../Soundness/#plfa_plfa-part3-Soundness-21176" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-21219" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21221" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21223" href="../Soundness/#plfa_plfa-part3-Soundness-19106" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-21231" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21232" class="Argument">γ₁</a> <a id="plfa_plfa-part3-Soundness-21235" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21237" href="../Soundness/#plfa_plfa-part3-Soundness-21147" class="Bound">δ₁</a><a id="plfa_plfa-part3-Soundness-21239" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21241" class="Argument">γ₂</a> <a id="plfa_plfa-part3-Soundness-21244" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21246" href="../Soundness/#plfa_plfa-part3-Soundness-21176" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-21248" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21250" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21252" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21254" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21255" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21257" href="../Soundness/#plfa_plfa-part3-Soundness-21154" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-21266" href="../Soundness/#plfa_plfa-part3-Soundness-21183" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-21275" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a>
                    <a id="plfa_plfa-part3-Soundness-21297" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-21304" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21305" href="../Denotational/#plfa_plfa-part3-Denotational-32265" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-21311" href="../Soundness/#plfa_plfa-part3-Soundness-21165" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-21314" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21315" href="../Denotational/#plfa_plfa-part3-Denotational-10543" class="Function">⊑-env-conj-R1</a> <a id="plfa_plfa-part3-Soundness-21329" href="../Soundness/#plfa_plfa-part3-Soundness-21147" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-21332" href="../Soundness/#plfa_plfa-part3-Soundness-21176" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-21334" class="Symbol">))</a>
                           <a id="plfa_plfa-part3-Soundness-21364" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21365" href="../Denotational/#plfa_plfa-part3-Denotational-32265" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-21371" href="../Soundness/#plfa_plfa-part3-Soundness-21194" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-21374" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21375" href="../Denotational/#plfa_plfa-part3-Denotational-10649" class="Function">⊑-env-conj-R2</a> <a id="plfa_plfa-part3-Soundness-21389" href="../Soundness/#plfa_plfa-part3-Soundness-21147" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-21392" href="../Soundness/#plfa_plfa-part3-Soundness-21176" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-21394" class="Symbol">))</a> <a id="plfa_plfa-part3-Soundness-21397" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21399" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a>

<a id="plfa_plfa-part3-Soundness-21402" href="../Soundness/#plfa_plfa-part3-Soundness-20359" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21416" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21417" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-21419" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21421" href="../Soundness/#plfa_plfa-part3-Soundness-21421" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-21422" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21424" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21426" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21428" href="../Soundness/#plfa_plfa-part3-Soundness-21428" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21429" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21431" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21432" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21440" href="../Soundness/#plfa_plfa-part3-Soundness-21440" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-21441" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21443" href="../Soundness/#plfa_plfa-part3-Soundness-21443" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-21447" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21452" href="../Soundness/#plfa_plfa-part3-Soundness-21421" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-21454" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-21461" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21463" href="../Untyped/#plfa_plfa-part2-Untyped-5402" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-21465" href="../Soundness/#plfa_plfa-part3-Soundness-21465" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-21467" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21472" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21473" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21481" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-21482" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-21484" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-21500" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21502" href="../Soundness/#plfa_plfa-part3-Soundness-21502" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-21505" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-21513" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-21517" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-21521" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21523" href="../Soundness/#plfa_plfa-part3-Soundness-18084" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-21541" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21542" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21544" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21546" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21547" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21549" href="../Soundness/#plfa_plfa-part3-Soundness-21502" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-21552" href="../Soundness/#plfa_plfa-part3-Soundness-20359" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21566" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21567" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21569" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21571" href="../Soundness/#plfa_plfa-part3-Soundness-21571" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21572" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21574" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21575" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21583" href="../Soundness/#plfa_plfa-part3-Soundness-21583" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-21584" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21586" href="../Soundness/#plfa_plfa-part3-Soundness-21586" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-21589" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21591" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-21593" href="../Soundness/#plfa_plfa-part3-Soundness-21593" class="Bound">M′</a>
      <a id="plfa_plfa-part3-Soundness-21602" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21607" href="../Soundness/#plfa_plfa-part3-Soundness-20359" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21621" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21622" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21624" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21626" href="../Untyped/#plfa_plfa-part2-Untyped-8550" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-21631" href="../Soundness/#plfa_plfa-part3-Soundness-21571" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21632" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21634" href="../Soundness/#plfa_plfa-part3-Soundness-21583" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-21636" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21637" href="../Soundness/#plfa_plfa-part3-Soundness-19416" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-21648" href="../Soundness/#plfa_plfa-part3-Soundness-21586" class="Bound">eq</a><a id="plfa_plfa-part3-Soundness-21650" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-21652" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-21656" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21658" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21660" href="../Soundness/#plfa_plfa-part3-Soundness-21660" class="Bound">δ′</a> <a id="plfa_plfa-part3-Soundness-21663" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21665" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21667" href="../Soundness/#plfa_plfa-part3-Soundness-21667" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-21677" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21679" href="../Soundness/#plfa_plfa-part3-Soundness-21679" class="Bound">m′</a> <a id="plfa_plfa-part3-Soundness-21682" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21684" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21686" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-21692" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21694" href="../Denotational/#plfa_plfa-part3-Denotational-9155" class="Function">init</a> <a id="plfa_plfa-part3-Soundness-21699" href="../Soundness/#plfa_plfa-part3-Soundness-21660" class="Bound">δ′</a> <a id="plfa_plfa-part3-Soundness-21702" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21704" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21706" class="Symbol">((λ</a> <a id="plfa_plfa-part3-Soundness-21710" href="../Soundness/#plfa_plfa-part3-Soundness-21710" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-21712" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-21714" href="../Soundness/#plfa_plfa-part3-Soundness-14583" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-21733" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21734" href="../Soundness/#plfa_plfa-part3-Soundness-21667" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-21744" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21745" href="../Untyped/#plfa_plfa-part2-Untyped-4404" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-21747" href="../Soundness/#plfa_plfa-part3-Soundness-21710" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-21748" class="Symbol">))))</a> <a id="plfa_plfa-part3-Soundness-21753" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a>
             <a id="plfa_plfa-part3-Soundness-21768" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21776" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21777" href="../Denotational/#plfa_plfa-part3-Denotational-32787" class="Function">up-env</a> <a id="plfa_plfa-part3-Soundness-21784" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21785" href="../Soundness/#plfa_plfa-part3-Soundness-20186" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-21791" href="../Soundness/#plfa_plfa-part3-Soundness-21679" class="Bound">m′</a><a id="plfa_plfa-part3-Soundness-21793" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21795" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21796" href="../Compositional/#plfa_plfa-part3-Compositional-12881" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-21804" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21805" href="../Soundness/#plfa_plfa-part3-Soundness-21667" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-21815" href="../Untyped/#plfa_plfa-part2-Untyped-4359" class="InductiveConstructor">Z</a><a id="plfa_plfa-part3-Soundness-21816" class="Symbol">)))</a> <a id="plfa_plfa-part3-Soundness-21820" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21822" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-21824" href="../Soundness/#plfa_plfa-part3-Soundness-20359" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21838" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21839" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21847" href="../Soundness/#plfa_plfa-part3-Soundness-21847" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-21848" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21850" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-21853" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21855" href="../Soundness/#plfa_plfa-part3-Soundness-21855" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-21858" href="../Untyped/#plfa_plfa-part2-Untyped-5514" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-21860" href="../Soundness/#plfa_plfa-part3-Soundness-21860" class="Bound">M₂</a>

<a id="plfa_plfa-part3-Soundness-21864" href="../Soundness/#plfa_plfa-part3-Soundness-20359" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21878" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21879" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21881" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21883" href="../Soundness/#plfa_plfa-part3-Soundness-21883" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21884" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21886" href="../Denotational/#plfa_plfa-part3-Denotational-11750" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-21894" href="../Soundness/#plfa_plfa-part3-Soundness-21894" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-21897" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-21903" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21905" href="../Denotational/#plfa_plfa-part3-Denotational-9883" class="Function">`⊥</a> <a id="plfa_plfa-part3-Soundness-21908" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21910" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21912" href="../Soundness/#plfa_plfa-part3-Soundness-18780" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-21920" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21921" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21923" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21925" href="../Soundness/#plfa_plfa-part3-Soundness-21883" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21926" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21928" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21930" href="../Denotational/#plfa_plfa-part3-Denotational-11750" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-21938" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21940" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a>

<a id="plfa_plfa-part3-Soundness-21943" href="../Soundness/#plfa_plfa-part3-Soundness-20359" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21957" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21958" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-21960" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21962" href="../Soundness/#plfa_plfa-part3-Soundness-21962" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-21963" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21965" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21966" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-21974" href="../Soundness/#plfa_plfa-part3-Soundness-21974" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-21977" href="../Soundness/#plfa_plfa-part3-Soundness-21977" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-21979" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21981" href="../Soundness/#plfa_plfa-part3-Soundness-21981" class="Bound">eq</a>
  <a id="plfa_plfa-part3-Soundness-21986" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21991" href="../Soundness/#plfa_plfa-part3-Soundness-20359" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-22005" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22006" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-22008" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22010" href="../Soundness/#plfa_plfa-part3-Soundness-21962" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-22011" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22013" href="../Soundness/#plfa_plfa-part3-Soundness-21974" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22016" href="../Soundness/#plfa_plfa-part3-Soundness-21981" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-22019" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22021" href="../Soundness/#plfa_plfa-part3-Soundness-20359" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-22035" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22036" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-22038" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22040" href="../Soundness/#plfa_plfa-part3-Soundness-21962" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-22041" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22043" href="../Soundness/#plfa_plfa-part3-Soundness-21977" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-22046" href="../Soundness/#plfa_plfa-part3-Soundness-21981" class="Bound">eq</a>
<a id="plfa_plfa-part3-Soundness-22049" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-22053" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22055" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22057" href="../Soundness/#plfa_plfa-part3-Soundness-22057" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-22060" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22062" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22064" href="../Soundness/#plfa_plfa-part3-Soundness-22064" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-22073" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22075" href="../Soundness/#plfa_plfa-part3-Soundness-22075" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-22078" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22080" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22082" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22084" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22086" href="../Soundness/#plfa_plfa-part3-Soundness-22086" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-22089" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22091" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22093" href="../Soundness/#plfa_plfa-part3-Soundness-22093" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-22102" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22104" href="../Soundness/#plfa_plfa-part3-Soundness-22104" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-22107" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22109" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22111" class="Symbol">=</a>
     <a id="plfa_plfa-part3-Soundness-22118" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22120" href="../Soundness/#plfa_plfa-part3-Soundness-22057" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-22123" href="../Denotational/#plfa_plfa-part3-Denotational-9912" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-22126" href="../Soundness/#plfa_plfa-part3-Soundness-22086" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-22129" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22131" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22133" href="../Soundness/#plfa_plfa-part3-Soundness-19106" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-22141" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22142" class="Argument">γ₁</a> <a id="plfa_plfa-part3-Soundness-22145" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22147" href="../Soundness/#plfa_plfa-part3-Soundness-22057" class="Bound">δ₁</a><a id="plfa_plfa-part3-Soundness-22149" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-22151" class="Argument">γ₂</a> <a id="plfa_plfa-part3-Soundness-22154" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22156" href="../Soundness/#plfa_plfa-part3-Soundness-22086" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-22158" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-22160" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-22162" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22164" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-22165" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22167" href="../Soundness/#plfa_plfa-part3-Soundness-22064" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-22176" href="../Soundness/#plfa_plfa-part3-Soundness-22093" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-22185" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a>
                    <a id="plfa_plfa-part3-Soundness-22207" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-22215" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22216" href="../Denotational/#plfa_plfa-part3-Denotational-32265" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-22222" href="../Soundness/#plfa_plfa-part3-Soundness-22075" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-22225" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22226" href="../Denotational/#plfa_plfa-part3-Denotational-10543" class="Function">⊑-env-conj-R1</a> <a id="plfa_plfa-part3-Soundness-22240" href="../Soundness/#plfa_plfa-part3-Soundness-22057" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-22243" href="../Soundness/#plfa_plfa-part3-Soundness-22086" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-22245" class="Symbol">))</a>
                            <a id="plfa_plfa-part3-Soundness-22276" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22277" href="../Denotational/#plfa_plfa-part3-Denotational-32265" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-22283" href="../Soundness/#plfa_plfa-part3-Soundness-22104" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-22286" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22287" href="../Denotational/#plfa_plfa-part3-Denotational-10649" class="Function">⊑-env-conj-R2</a> <a id="plfa_plfa-part3-Soundness-22301" href="../Soundness/#plfa_plfa-part3-Soundness-22057" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-22304" href="../Soundness/#plfa_plfa-part3-Soundness-22086" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-22306" class="Symbol">))</a> <a id="plfa_plfa-part3-Soundness-22309" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22311" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-22313" href="../Soundness/#plfa_plfa-part3-Soundness-20359" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-22327" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22328" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-22332" href="../Soundness/#plfa_plfa-part3-Soundness-22332" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-22334" href="../Soundness/#plfa_plfa-part3-Soundness-22334" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-22336" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22338" href="../Soundness/#plfa_plfa-part3-Soundness-22338" class="Bound">eq</a>
    <a id="plfa_plfa-part3-Soundness-22345" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-22350" href="../Soundness/#plfa_plfa-part3-Soundness-20359" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-22364" href="../Soundness/#plfa_plfa-part3-Soundness-22332" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-22366" href="../Soundness/#plfa_plfa-part3-Soundness-22338" class="Bound">eq</a>
<a id="plfa_plfa-part3-Soundness-22369" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-22373" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22375" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22377" href="../Soundness/#plfa_plfa-part3-Soundness-22377" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-22379" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22381" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22383" href="../Soundness/#plfa_plfa-part3-Soundness-22383" class="Bound">subst-δ</a> <a id="plfa_plfa-part3-Soundness-22391" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22393" href="../Soundness/#plfa_plfa-part3-Soundness-22393" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-22395" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22397" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22399" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22401" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22403" href="../Soundness/#plfa_plfa-part3-Soundness-22377" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-22405" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22407" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-22409" href="../Soundness/#plfa_plfa-part3-Soundness-22383" class="Bound">subst-δ</a> <a id="plfa_plfa-part3-Soundness-22417" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-22419" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-22423" href="../Soundness/#plfa_plfa-part3-Soundness-22393" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-22425" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-22428" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-22430" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a>
</pre><ul><li>情况 <code>var</code>：我们有 <code>subst σ M ≡ y</code>，因此 <code>M</code> 也必须是一个变量，称为 <code>x</code>。 我们应用引理 <code>subst-reflect-var</code> 得出结论。</li></ul><ul><li>情况 <code>↦-elim</code>：我们有 <code>subst σ M ≡ L₁ · L₂</code>，需要对 <code>M</code> 进行情况分析：<ul><li><p>情况 <code>M ≡ ` x</code>：我们再次应用 <code>subst-reflect-var</code> 得出结论。</p></li><li><p>情况 <code>M ≡ M₁ · M₂</code>：根据归纳假设，我们有某个 <code>δ₁</code> 和 <code>δ₂</code> 使得 <code>δ₁ ⊢ M₁ ↓ v₁ ↦ v₃</code> 和 <code>γ `⊢ σ ↓ δ₁</code>，以及 <code>δ₂ ⊢ M₂ ↓ v₁</code> 和 <code>γ `⊢ σ ↓ δ₂</code>。 根据 <code>⊑-env</code> 我们有 <code>δ₁ ⊔ δ₂ ⊢ M₁ ↓ v₁ ↦ v₃</code> 和 <code>δ₁ ⊔ δ₂ ⊢ M₂ ↓ v₁</code> （使用 <code>⊑-env-conj-R1</code> 和 <code>⊑-env-conj-R2</code> 得出），因此 <code>δ₁ ⊔ δ₂ ⊢ M₁ · M₂ ↓ v₃</code>。 我们通过 <code>subst-⊔</code> 引理得出 <code>γ `⊢ σ ↓ δ₁ ⊔ δ₂</code> 从而证明此情况。</p></li></ul></li></ul><ul><li>情况 <code>↦-intro</code>：我们有 <code>subst σ M ≡ ƛ L′</code>，需要对 <code>M</code> 进行情况分析：<ul><li><p>情况 <code>M ≡ x</code>：我们应用 <code>subst-reflect-var</code> 引理。</p></li><li><p>情况 <code>M ≡ ƛ M′</code>：根据归纳假设，我们有 <code>(δ′ , v′) ⊢ M′ ↓ v₂</code> 和 <code>(δ , v₁) ⊢ exts σ ↓ (δ′ , v′)</code>。根据后者可得 <code>(δ , v₁) ⊢ # 0 ↓ v′</code>。 根据引理 <code>var-inv</code> 我们有 <code>v′ ⊑ v₁</code>，于是根据 <code>up-env</code> 引理我们有 <code>(δ′ , v₁) ⊢ M′ ↓ v₂</code>，因此 <code>δ′ ⊢ ƛ M′ ↓ v₁ → v₂</code>。我们还需要证明 <code>δ ⊢ σ ↓ δ′</code>。固定 <code>k</code>，我们有 <code>(δ , v₁) ⊢ rename S_ σ k ↓ δ k′</code>， 接着应用引理 <code>rename-inc-reflect</code> 可得 <code>δ ⊢ σ k ↓ δ k′</code>，于是此情况证明完毕。</p></li></ul></li></ul><ul><li>情况 <code>⊥-intro</code>：我们为 <code>δ</code> 选择<code>⊥</code>。 根据 <code>⊥-intro</code> 我们有 <code>⊥ ⊢ M ↓ ⊥</code>。 根据 <code>subst-⊥</code> 引理有 <code>δ `⊢ σ ↓ `⊥</code>。</li></ul><ul><li>情况 <code>⊔-intro</code>：根据归纳假设我们有 <code>δ₁ ⊢ M ↓ v₁</code>、<code>δ₂ ⊢ M ↓ v₂</code>、 <code>δ `⊢ σ ↓ δ₁</code> 和 <code>δ `⊢ σ ↓ δ₂</code>。 根据 <code>⊑-env</code>、<code>⊑-env-conj-R1</code> 和 <code>⊑-env-conj-R2</code> 我们有 <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₁</code> 和 <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₂</code>，因此根据 <code>⊔-intro</code> 可得 <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₁ ⊔ v₂</code>。 根据 <code>subst-⊔</code> 可得 <code>δ `⊢ σ ↓ δ₁ ⊔ δ₂</code>。</li></ul><h3 id="单一代换反映了指称不变">单一代换反映了指称不变</h3><p>现在大部分工作已经完成，我们已经证明了同时代换反映了指称不变。当然，β-归约使用单一代换， 因此我们需要一个推论来证明单一代换反映了指称不变。也就是说，给定项 <code>N : (Γ , ★ ⊢ ★)</code> 和 <code>M : (Γ ⊢ ★)</code>，若 <code>γ ⊢ N [ M ] ↓ w</code>，则对于某个值 <code>v</code> 有 <code>γ ⊢ M ↓ v</code> 且 <code>( γ , v) ⊢ N ↓ w</code> 。于是我们有 <code>N [ M ] = subst (subst-zero M) N</code>。</p><p>我们首先证明一个关于 <code>subst-zero</code> 的引理，即若 <code>δ ⊢ subst-zero M ↓ γ</code>，则对某个值 <code>w</code>，有 <code>γ `⊑ (δ , w) × δ ⊢ M ↓ w</code>。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-zero-reflect"></a><a id="plfa_plfa-part3-Soundness-26686" href="../Soundness/#plfa_plfa-part3-Soundness-26686" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-26705" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-26707" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-26709" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-26710" href="../Soundness/#plfa_plfa-part3-Soundness-26710" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-26711" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-26713" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-26714" href="../Soundness/#plfa_plfa-part3-Soundness-26714" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-26716" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-26718" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-26722" href="../Soundness/#plfa_plfa-part3-Soundness-26710" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-26723" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-26725" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-26726" href="../Soundness/#plfa_plfa-part3-Soundness-26726" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-26728" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-26730" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-26734" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-26735" href="../Soundness/#plfa_plfa-part3-Soundness-26710" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-26737" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-26739" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-26740" class="Symbol">)}</a> <a id="plfa_plfa-part3-Soundness-26743" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-26744" href="../Soundness/#plfa_plfa-part3-Soundness-26744" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-26746" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-26748" href="../Soundness/#plfa_plfa-part3-Soundness-26710" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-26750" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-26752" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-26753" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-26757" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-26759" href="../Soundness/#plfa_plfa-part3-Soundness-26714" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-26761" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-26764" href="../Untyped/#plfa_plfa-part2-Untyped-9407" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-26775" href="../Soundness/#plfa_plfa-part3-Soundness-26744" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-26777" href="../Soundness/#plfa_plfa-part3-Soundness-3938" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-26779" href="../Soundness/#plfa_plfa-part3-Soundness-26726" class="Bound">γ</a>
    <a id="plfa_plfa-part3-Soundness-26785" class="Comment">----------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-26828" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-26830" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-26833" href="../Soundness/#plfa_plfa-part3-Soundness-26833" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-26835" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-26837" href="../Denotational/#plfa_plfa-part3-Denotational-4890" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-26843" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-26845" href="../Soundness/#plfa_plfa-part3-Soundness-26726" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-26847" href="../Denotational/#plfa_plfa-part3-Denotational-9629" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-26850" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-26851" href="../Soundness/#plfa_plfa-part3-Soundness-26714" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-26853" href="../Denotational/#plfa_plfa-part3-Denotational-8851" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-26856" href="../Soundness/#plfa_plfa-part3-Soundness-26833" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-26857" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-26859" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="plfa_plfa-part3-Soundness-26861" href="../Soundness/#plfa_plfa-part3-Soundness-26714" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-26863" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-26865" href="../Soundness/#plfa_plfa-part3-Soundness-26744" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-26867" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-26869" href="../Soundness/#plfa_plfa-part3-Soundness-26833" class="Bound">w</a>
<a id="plfa_plfa-part3-Soundness-26871" href="../Soundness/#plfa_plfa-part3-Soundness-26686" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-26890" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-26891" class="Argument">δ</a> <a id="plfa_plfa-part3-Soundness-26893" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-26895" href="../Soundness/#plfa_plfa-part3-Soundness-26895" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-26896" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-26898" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-26899" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-26901" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-26903" href="../Soundness/#plfa_plfa-part3-Soundness-26903" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-26904" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-26906" href="../Soundness/#plfa_plfa-part3-Soundness-26906" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-26910" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-26912" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-26914" href="../Denotational/#plfa_plfa-part3-Denotational-9210" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-26919" href="../Soundness/#plfa_plfa-part3-Soundness-26903" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-26921" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-26923" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-26925" href="../Soundness/#plfa_plfa-part3-Soundness-26953" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-26931" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-26933" href="../Soundness/#plfa_plfa-part3-Soundness-26906" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-26937" href="../Untyped/#plfa_plfa-part2-Untyped-4359" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-26939" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-26941" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Soundness-26945" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-26953" href="../Soundness/#plfa_plfa-part3-Soundness-26953" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-26959" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-26961" href="../Soundness/#plfa_plfa-part3-Soundness-26903" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-26963" href="../Denotational/#plfa_plfa-part3-Denotational-9629" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-26966" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-26967" href="../Soundness/#plfa_plfa-part3-Soundness-26895" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-26969" href="../Denotational/#plfa_plfa-part3-Denotational-8851" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-26972" href="../Denotational/#plfa_plfa-part3-Denotational-9210" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-26977" href="../Soundness/#plfa_plfa-part3-Soundness-26903" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-26978" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-26982" href="../Soundness/#plfa_plfa-part3-Soundness-26953" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-26988" href="../Untyped/#plfa_plfa-part2-Untyped-4359" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-26991" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-26994" href="../Denotational/#plfa_plfa-part3-Denotational-6753" class="Function">⊑-refl</a>
  <a id="plfa_plfa-part3-Soundness-27003" href="../Soundness/#plfa_plfa-part3-Soundness-26953" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-27009" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-27010" href="../Untyped/#plfa_plfa-part2-Untyped-4404" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-27012" href="../Soundness/#plfa_plfa-part3-Soundness-27012" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-27013" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-27015" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-27017" href="../Compositional/#plfa_plfa-part3-Compositional-12881" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-27025" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-27026" href="../Soundness/#plfa_plfa-part3-Soundness-26906" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-27030" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-27031" href="../Untyped/#plfa_plfa-part2-Untyped-4404" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-27033" href="../Soundness/#plfa_plfa-part3-Soundness-27012" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-27034" class="Symbol">))</a>
</pre><p>我们选择 <code>w</code> 作为 <code>γ</code> 中的最后一个值，通过将前提应用到 <code>Z</code> 可得 <code>δ ⊢ M ↓ w</code>。 最后，要证明 <code>γ `⊑ (δ , w)</code>，我们需要在输入项中通过归纳来证明一个引理。 由于我们选择了 <code>w</code>，因此基本的情况是平凡的。在归纳的情况中 <code>S x</code> 中， 前提 <code>δ ⊢ subst-zero M ↓ γ</code> 给出了 <code>δ ⊢ x ↓ γ (S x)</code>，接着使用 <code>var-inv</code> 可得 <code>γ (S x) ⊑ (δ `, w) (S x)</code>。</p><p>现在证明代换反映了指称不变：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-substitution-reflect"></a><a id="plfa_plfa-part3-Soundness-27801" href="../Soundness/#plfa_plfa-part3-Soundness-27801" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-27822" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-27824" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-27826" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27827" href="../Soundness/#plfa_plfa-part3-Soundness-27827" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-27828" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-27830" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27831" href="../Soundness/#plfa_plfa-part3-Soundness-27831" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-27833" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-27835" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-27839" href="../Soundness/#plfa_plfa-part3-Soundness-27827" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-27840" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-27842" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27843" href="../Soundness/#plfa_plfa-part3-Soundness-27843" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-27845" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-27847" href="../Soundness/#plfa_plfa-part3-Soundness-27827" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-27849" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-27851" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-27853" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-27855" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-27856" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-27858" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27859" href="../Soundness/#plfa_plfa-part3-Soundness-27859" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-27861" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-27863" href="../Soundness/#plfa_plfa-part3-Soundness-27827" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-27865" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-27867" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-27868" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-27870" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-27871" href="../Soundness/#plfa_plfa-part3-Soundness-27871" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-27872" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-27876" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-27878" href="../Soundness/#plfa_plfa-part3-Soundness-27831" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-27880" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-27882" href="../Soundness/#plfa_plfa-part3-Soundness-27843" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-27884" href="../Untyped/#plfa_plfa-part2-Untyped-9523" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-27886" href="../Soundness/#plfa_plfa-part3-Soundness-27859" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-27888" href="../Untyped/#plfa_plfa-part2-Untyped-9523" class="Function Operator">]</a> <a id="plfa_plfa-part3-Soundness-27890" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-27892" href="../Soundness/#plfa_plfa-part3-Soundness-27871" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-27898" class="Comment">------------------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-27949" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-27951" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-27954" href="../Soundness/#plfa_plfa-part3-Soundness-27954" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-27956" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-27958" href="../Denotational/#plfa_plfa-part3-Denotational-4890" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-27964" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-27966" href="../Soundness/#plfa_plfa-part3-Soundness-27831" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-27968" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-27970" href="../Soundness/#plfa_plfa-part3-Soundness-27859" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-27972" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-27974" href="../Soundness/#plfa_plfa-part3-Soundness-27954" class="Bound">w</a>  <a id="plfa_plfa-part3-Soundness-27977" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1618" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-27980" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-27981" href="../Soundness/#plfa_plfa-part3-Soundness-27831" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-27983" href="../Denotational/#plfa_plfa-part3-Denotational-8851" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-27986" href="../Soundness/#plfa_plfa-part3-Soundness-27954" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-27987" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-27989" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-27991" href="../Soundness/#plfa_plfa-part3-Soundness-27843" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-27993" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-27995" href="../Soundness/#plfa_plfa-part3-Soundness-27871" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-27997" href="../Soundness/#plfa_plfa-part3-Soundness-27801" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-28018" href="../Soundness/#plfa_plfa-part3-Soundness-28018" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-28020" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-28025" href="../Soundness/#plfa_plfa-part3-Soundness-20359" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-28039" href="../Soundness/#plfa_plfa-part3-Soundness-28018" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-28041" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-28046" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-28051" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-28053" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28055" href="../Soundness/#plfa_plfa-part3-Soundness-28055" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-28057" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28059" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28061" href="../Soundness/#plfa_plfa-part3-Soundness-28061" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-28065" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28067" href="../Soundness/#plfa_plfa-part3-Soundness-28067" class="Bound">γNv</a> <a id="plfa_plfa-part3-Soundness-28071" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-28073" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-28075" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-28080" href="../Soundness/#plfa_plfa-part3-Soundness-26686" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-28099" href="../Soundness/#plfa_plfa-part3-Soundness-28061" class="Bound">δσγ</a>
<a id="plfa_plfa-part3-Soundness-28103" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-28110" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-28112" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28114" href="../Soundness/#plfa_plfa-part3-Soundness-28114" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-28116" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28118" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28120" href="../Soundness/#plfa_plfa-part3-Soundness-28120" class="Bound">ineq</a> <a id="plfa_plfa-part3-Soundness-28125" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28127" href="../Soundness/#plfa_plfa-part3-Soundness-28127" class="Bound">δMw</a> <a id="plfa_plfa-part3-Soundness-28131" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-28133" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-28135" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-28137" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28139" href="../Soundness/#plfa_plfa-part3-Soundness-28114" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-28141" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28143" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-28145" href="../Soundness/#plfa_plfa-part3-Soundness-28127" class="Bound">δMw</a> <a id="plfa_plfa-part3-Soundness-28149" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-28151" href="../Denotational/#plfa_plfa-part3-Denotational-32265" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-28157" class="Bound">γNv</a> <a id="plfa_plfa-part3-Soundness-28161" href="../Soundness/#plfa_plfa-part3-Soundness-28120" class="Bound">ineq</a> <a id="plfa_plfa-part3-Soundness-28166" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-28168" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a>
</pre><p>我们应用 <code>subst-reflect</code> 引理可得对于某个 <code>γ</code> 有 <code>δ ⊢ subst-zero M ↓ γ</code> 和 <code>γ ⊢ N ↓ v</code>。通过使用前者，<code>subst-zero-reflect</code> 给出了 <code>γ `⊑ (δ , w)</code> 和 <code>δ ⊢ M ↓ w</code>。我们通过应用 <code>⊑-env</code> 引理，使用 <code>γ ⊢ N ↓ v</code> 和 <code>γ `⊑ (δ , w)</code> 可得 <code>δ , w ⊢ N ↓ v</code>。</p><h3 id="归约反映了指称不变-1">归约反映了指称不变</h3><p>现在我们已经证明了代换反映了指称不变，可以很容易地证明归约也拥有此性质：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-reflect-beta"></a><a id="plfa_plfa-part3-Soundness-28922" href="../Soundness/#plfa_plfa-part3-Soundness-28922" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-28935" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-28937" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-28939" href="../Soundness/#plfa_plfa-part3-Soundness-28939" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-28940" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-28942" href="../Soundness/#plfa_plfa-part3-Soundness-28942" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-28944" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-28946" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-28950" href="../Soundness/#plfa_plfa-part3-Soundness-28939" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-28951" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-28953" href="../Soundness/#plfa_plfa-part3-Soundness-28953" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-28955" href="../Soundness/#plfa_plfa-part3-Soundness-28955" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-28956" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-28958" href="../Soundness/#plfa_plfa-part3-Soundness-28958" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-28959" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Soundness-28965" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-28967" href="../Soundness/#plfa_plfa-part3-Soundness-28942" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-28969" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-28971" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-28972" href="../Soundness/#plfa_plfa-part3-Soundness-28955" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-28974" href="../Untyped/#plfa_plfa-part2-Untyped-9523" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-28976" href="../Soundness/#plfa_plfa-part3-Soundness-28953" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-28978" href="../Untyped/#plfa_plfa-part2-Untyped-9523" class="Function Operator">]</a><a id="plfa_plfa-part3-Soundness-28979" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-28981" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-28983" href="../Soundness/#plfa_plfa-part3-Soundness-28958" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-28989" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-28991" href="../Soundness/#plfa_plfa-part3-Soundness-28942" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-28993" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-28995" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-28996" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-28998" href="../Soundness/#plfa_plfa-part3-Soundness-28955" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-28999" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29001" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-29003" href="../Soundness/#plfa_plfa-part3-Soundness-28953" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29005" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-29007" href="../Soundness/#plfa_plfa-part3-Soundness-28958" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-29009" href="../Soundness/#plfa_plfa-part3-Soundness-28922" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-29022" href="../Soundness/#plfa_plfa-part3-Soundness-29022" class="Bound">d</a>
    <a id="plfa_plfa-part3-Soundness-29028" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-29033" href="../Soundness/#plfa_plfa-part3-Soundness-27801" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-29054" href="../Soundness/#plfa_plfa-part3-Soundness-29022" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-29056" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-29060" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-29062" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-29064" href="../Soundness/#plfa_plfa-part3-Soundness-29064" class="Bound">v₂′</a> <a id="plfa_plfa-part3-Soundness-29068" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-29070" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-29072" href="../Soundness/#plfa_plfa-part3-Soundness-29072" class="Bound">d₁′</a> <a id="plfa_plfa-part3-Soundness-29076" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-29078" href="../Soundness/#plfa_plfa-part3-Soundness-29078" class="Bound">d₂′</a> <a id="plfa_plfa-part3-Soundness-29082" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-29084" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-29086" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29088" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29095" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29096" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29104" href="../Soundness/#plfa_plfa-part3-Soundness-29078" class="Bound">d₂′</a><a id="plfa_plfa-part3-Soundness-29107" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29109" href="../Soundness/#plfa_plfa-part3-Soundness-29072" class="Bound">d₁′</a>


<a id="plfa_plfa-part3-Soundness-reflect"></a><a id="plfa_plfa-part3-Soundness-29115" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29123" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-29125" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-29127" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29128" href="../Soundness/#plfa_plfa-part3-Soundness-29128" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-29129" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-29131" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29132" href="../Soundness/#plfa_plfa-part3-Soundness-29132" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-29134" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-29136" href="../Denotational/#plfa_plfa-part3-Denotational-8663" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-29140" href="../Soundness/#plfa_plfa-part3-Soundness-29128" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-29141" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-29143" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29144" href="../Soundness/#plfa_plfa-part3-Soundness-29144" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29146" href="../Soundness/#plfa_plfa-part3-Soundness-29146" class="Bound">M′</a> <a id="plfa_plfa-part3-Soundness-29149" href="../Soundness/#plfa_plfa-part3-Soundness-29149" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-29151" href="../Soundness/#plfa_plfa-part3-Soundness-29151" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-29152" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-29156" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-29158" href="../Soundness/#plfa_plfa-part3-Soundness-29132" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-29160" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-29162" href="../Soundness/#plfa_plfa-part3-Soundness-29149" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-29164" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-29166" href="../Soundness/#plfa_plfa-part3-Soundness-29151" class="Bound">v</a>  <a id="plfa_plfa-part3-Soundness-29169" class="Symbol">→</a>  <a id="plfa_plfa-part3-Soundness-29172" href="../Soundness/#plfa_plfa-part3-Soundness-29144" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29174" href="../Untyped/#plfa_plfa-part2-Untyped-12823" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-29177" href="../Soundness/#plfa_plfa-part3-Soundness-29146" class="Bound">M′</a>  <a id="plfa_plfa-part3-Soundness-29181" class="Symbol">→</a>   <a id="plfa_plfa-part3-Soundness-29185" href="../Soundness/#plfa_plfa-part3-Soundness-29146" class="Bound">M′</a> <a id="plfa_plfa-part3-Soundness-29188" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-29190" href="../Soundness/#plfa_plfa-part3-Soundness-29149" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-29196" class="Comment">---------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-29232" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-29234" href="../Soundness/#plfa_plfa-part3-Soundness-29132" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-29236" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-29238" href="../Soundness/#plfa_plfa-part3-Soundness-29144" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-29240" href="../Denotational/#plfa_plfa-part3-Denotational-11387" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-29242" href="../Soundness/#plfa_plfa-part3-Soundness-29151" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-29244" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29252" href="../Denotational/#plfa_plfa-part3-Denotational-11441" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-29256" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29257" href="../Untyped/#plfa_plfa-part2-Untyped-12873" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-29260" href="../Soundness/#plfa_plfa-part3-Soundness-29260" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29261" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29263" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29266" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29274" href="../Denotational/#plfa_plfa-part3-Denotational-11441" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-29278" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29279" href="../Untyped/#plfa_plfa-part2-Untyped-12963" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-29282" href="../Soundness/#plfa_plfa-part3-Soundness-29282" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29283" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29285" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29288" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a><a id="plfa_plfa-part3-Soundness-29295" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29296" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-29298" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29300" href="../Soundness/#plfa_plfa-part3-Soundness-29300" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-29301" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-29303" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29304" href="../Denotational/#plfa_plfa-part3-Denotational-11441" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-29307" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29308" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-29310" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29312" href="../Soundness/#plfa_plfa-part3-Soundness-29312" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-29313" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-29316" href="../Untyped/#plfa_plfa-part2-Untyped-13053" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-29318" href="../Soundness/#plfa_plfa-part3-Soundness-29318" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-29325" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-29330" href="../Denotational/#plfa_plfa-part3-Denotational-11441" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-29333" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-29334" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-29336" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29338" href="../Soundness/#plfa_plfa-part3-Soundness-29300" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-29339" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-29341" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-29343" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29345" href="../Soundness/#plfa_plfa-part3-Soundness-29312" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-29346" class="Symbol">}</a>
<a id="plfa_plfa-part3-Soundness-29348" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-29352" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-29354" href="../Soundness/#plfa_plfa-part3-Soundness-29354" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-29357" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-29365" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-29369" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-29372" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29374" href="../Soundness/#plfa_plfa-part3-Soundness-28922" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-29387" href="../Soundness/#plfa_plfa-part3-Soundness-29354" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-29390" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29398" href="../Denotational/#plfa_plfa-part3-Denotational-11441" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-29402" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29403" href="../Untyped/#plfa_plfa-part2-Untyped-13161" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-29405" href="../Soundness/#plfa_plfa-part3-Soundness-29405" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29406" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29408" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29411" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29419" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29420" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29427" href="../Soundness/#plfa_plfa-part3-Soundness-29427" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29430" href="../Soundness/#plfa_plfa-part3-Soundness-29430" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-29432" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29434" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29435" href="../Untyped/#plfa_plfa-part2-Untyped-12873" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-29438" href="../Soundness/#plfa_plfa-part3-Soundness-29438" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29439" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29441" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-29446" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29448" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29455" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29456" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29464" href="../Soundness/#plfa_plfa-part3-Soundness-29427" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29467" href="../Soundness/#plfa_plfa-part3-Soundness-29438" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-29469" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-29473" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29475" href="../Soundness/#plfa_plfa-part3-Soundness-29430" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-29478" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29486" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29487" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29494" href="../Soundness/#plfa_plfa-part3-Soundness-29494" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29497" href="../Soundness/#plfa_plfa-part3-Soundness-29497" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-29499" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29501" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29502" href="../Untyped/#plfa_plfa-part2-Untyped-12963" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-29505" href="../Soundness/#plfa_plfa-part3-Soundness-29505" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29506" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29508" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-29513" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29515" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29522" href="../Soundness/#plfa_plfa-part3-Soundness-29494" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29525" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29526" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29534" href="../Soundness/#plfa_plfa-part3-Soundness-29497" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-29537" href="../Soundness/#plfa_plfa-part3-Soundness-29505" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-29539" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-29543" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-29545" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29553" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29554" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29561" href="../Soundness/#plfa_plfa-part3-Soundness-29561" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29564" href="../Soundness/#plfa_plfa-part3-Soundness-29564" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-29566" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29568" href="../Untyped/#plfa_plfa-part2-Untyped-13053" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-29570" href="../Soundness/#plfa_plfa-part3-Soundness-29570" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-29577" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-29582" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29589" href="../Soundness/#plfa_plfa-part3-Soundness-29561" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29592" href="../Soundness/#plfa_plfa-part3-Soundness-29564" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-29595" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-29599" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-29601" href="../Soundness/#plfa_plfa-part3-Soundness-29601" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-29604" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-29612" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-29616" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-29619" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29621" href="../Soundness/#plfa_plfa-part3-Soundness-28922" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-29634" href="../Soundness/#plfa_plfa-part3-Soundness-29601" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-29637" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29645" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29646" href="../Denotational/#plfa_plfa-part3-Denotational-11516" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-29653" href="../Soundness/#plfa_plfa-part3-Soundness-29653" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29656" href="../Soundness/#plfa_plfa-part3-Soundness-29656" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-29658" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29660" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29661" href="../Untyped/#plfa_plfa-part2-Untyped-13161" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-29663" href="../Soundness/#plfa_plfa-part3-Soundness-29663" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29664" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29666" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29669" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29677" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29678" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29686" href="../Soundness/#plfa_plfa-part3-Soundness-29686" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-29687" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29689" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29690" href="../Untyped/#plfa_plfa-part2-Untyped-12873" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-29693" href="../Soundness/#plfa_plfa-part3-Soundness-29693" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29694" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29696" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29699" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29707" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29708" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29716" href="../Soundness/#plfa_plfa-part3-Soundness-29716" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-29717" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29719" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29720" href="../Untyped/#plfa_plfa-part2-Untyped-12963" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-29723" href="../Soundness/#plfa_plfa-part3-Soundness-29723" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29724" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29726" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-29729" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29737" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29738" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29746" href="../Soundness/#plfa_plfa-part3-Soundness-29746" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-29747" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29749" href="../Untyped/#plfa_plfa-part2-Untyped-13053" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-29751" href="../Soundness/#plfa_plfa-part3-Soundness-29751" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-29758" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-29763" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29771" href="../Soundness/#plfa_plfa-part3-Soundness-29746" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-29773" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-29777" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-29779" href="../Soundness/#plfa_plfa-part3-Soundness-29779" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-29782" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-29790" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-29794" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-29797" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29799" href="../Soundness/#plfa_plfa-part3-Soundness-28922" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-29812" href="../Soundness/#plfa_plfa-part3-Soundness-29779" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-29815" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29823" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29824" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29832" href="../Soundness/#plfa_plfa-part3-Soundness-29832" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-29833" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29835" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29836" href="../Untyped/#plfa_plfa-part2-Untyped-13161" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-29838" href="../Soundness/#plfa_plfa-part3-Soundness-29838" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-29839" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29841" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-29846" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29848" href="../Denotational/#plfa_plfa-part3-Denotational-11638" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-29856" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29857" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29865" href="../Soundness/#plfa_plfa-part3-Soundness-29832" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-29867" href="../Soundness/#plfa_plfa-part3-Soundness-29838" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-29869" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-29873" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-29875" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29883" href="../Denotational/#plfa_plfa-part3-Denotational-11750" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-29891" href="../Soundness/#plfa_plfa-part3-Soundness-29891" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-29893" href="../Soundness/#plfa_plfa-part3-Soundness-29893" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-29896" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-29898" href="../Denotational/#plfa_plfa-part3-Denotational-11750" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-29906" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29914" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29915" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-29923" href="../Soundness/#plfa_plfa-part3-Soundness-29923" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29926" href="../Soundness/#plfa_plfa-part3-Soundness-29926" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-29928" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29930" href="../Soundness/#plfa_plfa-part3-Soundness-29930" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-29932" href="../Soundness/#plfa_plfa-part3-Soundness-29932" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-29935" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-29943" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-29947" href="../Soundness/#plfa_plfa-part3-Soundness-29932" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-29950" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-29955" href="../Denotational/#plfa_plfa-part3-Denotational-11817" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-29963" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29964" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29972" href="../Soundness/#plfa_plfa-part3-Soundness-29923" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-29975" href="../Soundness/#plfa_plfa-part3-Soundness-29930" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-29977" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-29981" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-29983" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-29984" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-29992" href="../Soundness/#plfa_plfa-part3-Soundness-29926" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-29995" href="../Soundness/#plfa_plfa-part3-Soundness-29930" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-29997" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-30001" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-30003" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-30011" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30012" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-30016" href="../Soundness/#plfa_plfa-part3-Soundness-30016" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-30018" href="../Soundness/#plfa_plfa-part3-Soundness-30018" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-30020" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30022" href="../Soundness/#plfa_plfa-part3-Soundness-30022" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30024" href="../Soundness/#plfa_plfa-part3-Soundness-30024" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-30027" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-30029" href="../Denotational/#plfa_plfa-part3-Denotational-11932" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-30033" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30034" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-30042" href="../Soundness/#plfa_plfa-part3-Soundness-30016" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-30044" href="../Soundness/#plfa_plfa-part3-Soundness-30022" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30046" href="../Soundness/#plfa_plfa-part3-Soundness-30024" class="Bound">mn</a><a id="plfa_plfa-part3-Soundness-30048" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30050" href="../Soundness/#plfa_plfa-part3-Soundness-30018" class="Bound">lt</a>
</pre><h2 id="归约蕴含指称等价">归约蕴含指称等价</h2><p>我们已经证明了归约保持并反映了指称不变，因此归约蕴含指称等价：</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-reduce-equal"></a><a id="plfa_plfa-part3-Soundness-30293" href="../Soundness/#plfa_plfa-part3-Soundness-30293" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-30306" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30308" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-30310" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30311" href="../Soundness/#plfa_plfa-part3-Soundness-30311" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-30312" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30314" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30315" href="../Soundness/#plfa_plfa-part3-Soundness-30315" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30317" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30319" href="../Soundness/#plfa_plfa-part3-Soundness-30311" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-30321" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-30323" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-30324" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30326" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30327" href="../Soundness/#plfa_plfa-part3-Soundness-30327" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-30329" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30331" href="../Soundness/#plfa_plfa-part3-Soundness-30311" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-30333" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-30335" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-30336" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-30340" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30342" href="../Soundness/#plfa_plfa-part3-Soundness-30315" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30344" href="../Untyped/#plfa_plfa-part2-Untyped-12823" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-30347" href="../Soundness/#plfa_plfa-part3-Soundness-30327" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-30353" class="Comment">---------</a>
  <a id="plfa_plfa-part3-Soundness-30365" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30367" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-30369" href="../Soundness/#plfa_plfa-part3-Soundness-30315" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30371" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Soundness-30373" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-30375" href="../Soundness/#plfa_plfa-part3-Soundness-30327" class="Bound">N</a>
<a id="plfa_plfa-part3-Soundness-30377" href="../Soundness/#plfa_plfa-part3-Soundness-30293" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-30390" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30391" href="../Soundness/#plfa_plfa-part3-Soundness-30391" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-30392" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-30394" href="../Soundness/#plfa_plfa-part3-Soundness-30394" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-30395" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-30397" href="../Soundness/#plfa_plfa-part3-Soundness-30397" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-30398" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30400" href="../Soundness/#plfa_plfa-part3-Soundness-30400" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30402" href="../Soundness/#plfa_plfa-part3-Soundness-30402" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-30404" href="../Soundness/#plfa_plfa-part3-Soundness-30404" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-30406" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-30412" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-30414" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-30417" href="../Soundness/#plfa_plfa-part3-Soundness-30417" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-30419" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30421" href="../Soundness/#plfa_plfa-part3-Soundness-8527" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-30430" href="../Soundness/#plfa_plfa-part3-Soundness-30417" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-30432" href="../Soundness/#plfa_plfa-part3-Soundness-30400" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-30433" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30435" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-30437" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-30440" href="../Soundness/#plfa_plfa-part3-Soundness-30440" class="Bound">n</a> <a id="plfa_plfa-part3-Soundness-30442" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30444" href="../Soundness/#plfa_plfa-part3-Soundness-29115" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-30452" href="../Soundness/#plfa_plfa-part3-Soundness-30440" class="Bound">n</a> <a id="plfa_plfa-part3-Soundness-30454" href="../Soundness/#plfa_plfa-part3-Soundness-30400" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30456" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-30460" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30462" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a>
</pre><p>最终我们就得到了<strong>可靠性（Soundness Property）</strong>，即多步归约到一个 λ-抽象，蕴含指称等价于该 λ-抽象。</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-soundness"></a><a id="plfa_plfa-part3-Soundness-30706" href="../Soundness/#plfa_plfa-part3-Soundness-30706" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-30716" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30718" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-30720" href="../Soundness/#plfa_plfa-part3-Soundness-30720" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-30721" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30723" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30724" href="../Soundness/#plfa_plfa-part3-Soundness-30724" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30726" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30728" href="../Soundness/#plfa_plfa-part3-Soundness-30720" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-30730" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-30732" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-30733" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30735" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30736" href="../Soundness/#plfa_plfa-part3-Soundness-30736" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-30738" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-30740" href="../Soundness/#plfa_plfa-part3-Soundness-30720" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-30742" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-30744" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-30746" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-30748" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-30749" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-30753" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30755" href="../Soundness/#plfa_plfa-part3-Soundness-30724" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30757" href="../Untyped/#plfa_plfa-part2-Untyped-14217" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part3-Soundness-30760" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-30762" href="../Soundness/#plfa_plfa-part3-Soundness-30736" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-30768" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Soundness-30788" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30790" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-30792" href="../Soundness/#plfa_plfa-part3-Soundness-30724" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-30794" href="../Denotational/#plfa_plfa-part3-Denotational-22427" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Soundness-30796" href="../Denotational/#plfa_plfa-part3-Denotational-22195" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-30798" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30799" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-30801" href="../Soundness/#plfa_plfa-part3-Soundness-30736" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-30802" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-30804" href="../Soundness/#plfa_plfa-part3-Soundness-30706" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-30814" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30815" class="DottedPattern Symbol">.(</a><a id="plfa_plfa-part3-Soundness-30817" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="DottedPattern InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-30819" class="DottedPattern Symbol">_)</a> <a id="plfa_plfa-part3-Soundness-30822" href="../Untyped/#plfa_plfa-part2-Untyped-14263" class="InductiveConstructor Operator">∎</a><a id="plfa_plfa-part3-Soundness-30823" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30825" href="../Soundness/#plfa_plfa-part3-Soundness-30825" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-30827" href="../Soundness/#plfa_plfa-part3-Soundness-30827" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-30829" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-30831" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-30833" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-30836" href="../Soundness/#plfa_plfa-part3-Soundness-30836" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-30838" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30840" href="../Soundness/#plfa_plfa-part3-Soundness-30836" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-30841" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30843" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-30845" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-30848" href="../Soundness/#plfa_plfa-part3-Soundness-30848" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-30850" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-30852" href="../Soundness/#plfa_plfa-part3-Soundness-30848" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-30853" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30855" href="../Soundness/#plfa_plfa-part3-Soundness-1711" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-30857" href="../Soundness/#plfa_plfa-part3-Soundness-30706" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-30867" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30868" href="../Soundness/#plfa_plfa-part3-Soundness-30868" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-30869" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30871" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-30872" href="../Soundness/#plfa_plfa-part3-Soundness-30872" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-30874" href="../Untyped/#plfa_plfa-part2-Untyped-14405" class="InductiveConstructor Operator">—→⟨</a> <a id="plfa_plfa-part3-Soundness-30878" href="../Soundness/#plfa_plfa-part3-Soundness-30878" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30880" href="../Untyped/#plfa_plfa-part2-Untyped-14405" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-30882" href="../Soundness/#plfa_plfa-part3-Soundness-30882" class="Bound">M—↠N</a><a id="plfa_plfa-part3-Soundness-30886" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-30888" href="../Soundness/#plfa_plfa-part3-Soundness-30888" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-30890" href="../Soundness/#plfa_plfa-part3-Soundness-30890" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-30892" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-30897" class="Keyword">let</a> <a id="plfa_plfa-part3-Soundness-30901" href="../Soundness/#plfa_plfa-part3-Soundness-30901" class="Bound">ih</a> <a id="plfa_plfa-part3-Soundness-30904" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-30906" href="../Soundness/#plfa_plfa-part3-Soundness-30706" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-30916" href="../Soundness/#plfa_plfa-part3-Soundness-30882" class="Bound">M—↠N</a> <a id="plfa_plfa-part3-Soundness-30921" class="Keyword">in</a>
   <a id="plfa_plfa-part3-Soundness-30927" class="Keyword">let</a> <a id="plfa_plfa-part3-Soundness-30931" href="../Soundness/#plfa_plfa-part3-Soundness-30931" class="Bound">e</a> <a id="plfa_plfa-part3-Soundness-30933" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-30935" href="../Soundness/#plfa_plfa-part3-Soundness-30293" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-30948" href="../Soundness/#plfa_plfa-part3-Soundness-30878" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-30950" class="Keyword">in</a>
   <a id="plfa_plfa-part3-Soundness-30956" href="../Denotational/#plfa_plfa-part3-Denotational-22859" class="Function">≃-trans</a> <a id="plfa_plfa-part3-Soundness-30964" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-30965" href="../Soundness/#plfa_plfa-part3-Soundness-30868" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-30966" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-30968" href="../Soundness/#plfa_plfa-part3-Soundness-30931" class="Bound">e</a> <a id="plfa_plfa-part3-Soundness-30970" href="../Soundness/#plfa_plfa-part3-Soundness-30901" class="Bound">ih</a> <a id="plfa_plfa-part3-Soundness-30973" href="../Soundness/#plfa_plfa-part3-Soundness-30888" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-30975" href="../Soundness/#plfa_plfa-part3-Soundness-30890" class="Bound">v</a>
</pre><h2 id="unicode">Unicode</h2><p>本章使用了以下 Unicode：</p><pre><code>≟  U+225F  QUESTIONED EQUAL TO (\?=)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Compositional/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Soundness.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Adequacy/">下一章</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">编程语言基础：Agda 描述</h2>本章译者：OlingCat<div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>本书按照<a rel="license" href="https://creativecommons.org/licenses/by/4.0/">创作公用 署名 4.0 国际</a>许可协议授权</div></footer></body></html>