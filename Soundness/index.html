<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-MkpYfmkWIfATGEd6NpDhZJQB2nIkJDL4/+fTWrR8KGUYK4WpHdNkNtsOewHrkVqI4K1SrtjK7aC/fwQljbifBA==" title="Light" id="stylesheet-light"><link rel="alternate stylesheet" href="../assets/css/dark.css" integrity="sha512-T2Tad3PSo5pIHyLVaV57XanuJRwSgTPT+WVb96FUf6y0ZJIXP4d/lNPJUqbUZ3j0Nq/gej2yteryEz/Hkr2Cdg==" title="Dark" id="stylesheet-dark" disabled><title>编程语言基础：Agda 描述 – Soundness</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header"><div class="wrapper"><a class="site-title" href="../">编程语言基础：Agda 描述</a><nav class="site-nav"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">主页</a> <a class="page-link" href="../Announcements/">公告</a> <a class="page-link" href="../GettingStarted/">使用说明</a> <a class="page-link" href="../Citing/">引用</a> <a class="page-link" href="https://plfa.github.io/">English</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager"><ul class="pagination"><li><a class="pagelink" href="../Compositional/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Soundness.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Adequacy/">下一章</a></li><li class="separator">•</li></ul></nav><header class="post-header"><h1 class="post-title">Soundness: Soundness of reduction with respect to denotational semantics</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part3-Soundness-129" class="Keyword">module</a> <a id="plfa_plfa-part3-Soundness-136" href="../Soundness/#" class="Module">plfa.part3.Soundness</a> <a id="plfa_plfa-part3-Soundness-157" class="Keyword">where</a>
</pre><h2 id="introduction">Introduction</h2><p>In this chapter we prove that the reduction semantics is sound with respect to the denotational semantics, i.e., for any term L</p><pre><code>L —↠ ƛ N  implies  ℰ L ≃ ℰ (ƛ N)</code></pre><p>The proof is by induction on the reduction sequence, so the main lemma concerns a single reduction step. We prove that if any term <code>M</code> steps to a term <code>N</code>, then <code>M</code> and <code>N</code> are denotationally equal. We shall prove each direction of this if-and-only-if separately. One direction will look just like a type preservation proof. The other direction is like proving type preservation for reduction going in reverse. Recall that type preservation is sometimes called subject reduction. Preservation in reverse is a well-known property and is called <em>subject expansion</em>. It is also well-known that subject expansion is false for most typed lambda calculi!</p><h2 id="imports">Imports</h2><pre class="Agda"><a id="plfa_plfa-part3-Soundness-1025" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1030" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1037" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
  <a id="plfa_plfa-part3-Soundness-1077" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1083" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1084" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="plfa_plfa-part3-Soundness-1087" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1089" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#830" class="Function Operator">_≢_</a><a id="plfa_plfa-part3-Soundness-1092" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1094" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-1098" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1100" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a><a id="plfa_plfa-part3-Soundness-1103" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1105" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a><a id="plfa_plfa-part3-Soundness-1109" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1111" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1367" class="Function">cong₂</a><a id="plfa_plfa-part3-Soundness-1116" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1118" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1461" class="Function">cong-app</a><a id="plfa_plfa-part3-Soundness-1126" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1128" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1133" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1140" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html" class="Module">Data.Product</a> <a id="plfa_plfa-part3-Soundness-1153" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1159" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1160" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">_×_</a><a id="plfa_plfa-part3-Soundness-1163" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1165" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#166" class="Record">Σ</a><a id="plfa_plfa-part3-Soundness-1166" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1168" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ-syntax</a><a id="plfa_plfa-part3-Soundness-1176" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1178" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1369" class="Function">∃</a><a id="plfa_plfa-part3-Soundness-1179" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1181" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1806" class="Function">∃-syntax</a><a id="plfa_plfa-part3-Soundness-1189" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1191" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#252" class="Field">proj₁</a><a id="plfa_plfa-part3-Soundness-1196" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1198" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#264" class="Field">proj₂</a><a id="plfa_plfa-part3-Soundness-1203" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-1207" class="Keyword">renaming</a> <a id="plfa_plfa-part3-Soundness-1216" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1217" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part3-Soundness-1221" class="Symbol">to</a> <a id="plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part3-Soundness-1229" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1231" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1236" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1243" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html" class="Module">Agda.Primitive</a> <a id="plfa_plfa-part3-Soundness-1258" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1264" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1265" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#764" class="Primitive">lzero</a><a id="plfa_plfa-part3-Soundness-1270" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1272" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1277" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1284" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="plfa_plfa-part3-Soundness-1301" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1307" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1308" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#656" class="Function Operator">¬_</a><a id="plfa_plfa-part3-Soundness-1310" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1312" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1317" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1324" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Negation.html" class="Module">Relation.Nullary.Negation</a> <a id="plfa_plfa-part3-Soundness-1350" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1356" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1357" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Negation.Core.html#778" class="Function">contradiction</a><a id="plfa_plfa-part3-Soundness-1370" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1372" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1377" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1384" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html" class="Module">Data.Empty</a> <a id="plfa_plfa-part3-Soundness-1395" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1401" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1402" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html#628" class="Function">⊥-elim</a><a id="plfa_plfa-part3-Soundness-1408" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1410" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1415" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1422" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="plfa_plfa-part3-Soundness-1439" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1445" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1446" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1511" class="Record">Dec</a><a id="plfa_plfa-part3-Soundness-1449" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1451" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a><a id="plfa_plfa-part3-Soundness-1454" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1456" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a><a id="plfa_plfa-part3-Soundness-1458" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1460" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1465" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1472" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.html" class="Module">Function</a> <a id="plfa_plfa-part3-Soundness-1481" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1487" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1488" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">_∘_</a><a id="plfa_plfa-part3-Soundness-1491" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1493" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1498" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1505" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
     <a id="plfa_plfa-part3-Soundness-1529" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1535" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1536" href="../Untyped/#plfa_plfa-part2-Untyped-4161" class="Datatype">Context</a><a id="plfa_plfa-part3-Soundness-1543" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1545" href="../Untyped/#plfa_plfa-part2-Untyped-4199" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part3-Soundness-1548" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1550" href="../Untyped/#plfa_plfa-part2-Untyped-4688" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part3-Soundness-1553" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1555" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part3-Soundness-1558" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1560" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-1561" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1563" href="../Untyped/#plfa_plfa-part2-Untyped-4724" class="InductiveConstructor">Z</a><a id="plfa_plfa-part3-Soundness-1564" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1566" href="../Untyped/#plfa_plfa-part2-Untyped-4769" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part3-Soundness-1568" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1570" href="../Untyped/#plfa_plfa-part2-Untyped-5768" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part3-Soundness-1572" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1574" href="../Untyped/#plfa_plfa-part2-Untyped-5820" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part3-Soundness-1576" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1578" href="../Untyped/#plfa_plfa-part2-Untyped-5880" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part3-Soundness-1581" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-1595" href="../Untyped/#plfa_plfa-part2-Untyped-9119" class="Function">subst</a><a id="plfa_plfa-part3-Soundness-1600" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1602" href="../Untyped/#plfa_plfa-part2-Untyped-9731" class="Function Operator">_[_]</a><a id="plfa_plfa-part3-Soundness-1606" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1608" href="../Untyped/#plfa_plfa-part2-Untyped-9615" class="Function">subst-zero</a><a id="plfa_plfa-part3-Soundness-1618" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1620" href="../Untyped/#plfa_plfa-part2-Untyped-7839" class="Function">ext</a><a id="plfa_plfa-part3-Soundness-1623" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1625" href="../Untyped/#plfa_plfa-part2-Untyped-8231" class="Function">rename</a><a id="plfa_plfa-part3-Soundness-1631" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1633" href="../Untyped/#plfa_plfa-part2-Untyped-8758" class="Function">exts</a><a id="plfa_plfa-part3-Soundness-1637" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-1651" href="../Untyped/#plfa_plfa-part2-Untyped-12977" class="Datatype Operator">_—→_</a><a id="plfa_plfa-part3-Soundness-1655" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1657" href="../Untyped/#plfa_plfa-part2-Untyped-13027" class="InductiveConstructor">ξ₁</a><a id="plfa_plfa-part3-Soundness-1659" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1661" href="../Untyped/#plfa_plfa-part2-Untyped-13117" class="InductiveConstructor">ξ₂</a><a id="plfa_plfa-part3-Soundness-1663" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1665" href="../Untyped/#plfa_plfa-part2-Untyped-13207" class="InductiveConstructor">β</a><a id="plfa_plfa-part3-Soundness-1666" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1668" href="../Untyped/#plfa_plfa-part2-Untyped-13315" class="InductiveConstructor">ζ</a><a id="plfa_plfa-part3-Soundness-1669" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1671" href="../Untyped/#plfa_plfa-part2-Untyped-14373" class="Datatype Operator">_—↠_</a><a id="plfa_plfa-part3-Soundness-1675" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1677" href="../Untyped/#plfa_plfa-part2-Untyped-14479" class="InductiveConstructor Operator">_—→⟨_⟩_</a><a id="plfa_plfa-part3-Soundness-1684" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1686" href="../Untyped/#plfa_plfa-part2-Untyped-14423" class="InductiveConstructor Operator">_∎</a><a id="plfa_plfa-part3-Soundness-1688" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1690" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1695" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1702" href="../Substitution/#" class="Module">plfa.part2.Substitution</a> <a id="plfa_plfa-part3-Soundness-1726" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1732" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1733" href="../Substitution/#plfa_plfa-part2-Substitution-2124" class="Function">Rename</a><a id="plfa_plfa-part3-Soundness-1739" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1741" href="../Substitution/#plfa_plfa-part2-Substitution-2341" class="Function">Subst</a><a id="plfa_plfa-part3-Soundness-1746" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1748" href="../Substitution/#plfa_plfa-part2-Substitution-2996" class="Function">ids</a><a id="plfa_plfa-part3-Soundness-1751" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1753" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1758" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1765" href="../Denotational/#" class="Module">plfa.part3.Denotational</a>
     <a id="plfa_plfa-part3-Soundness-1794" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1800" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1801" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Soundness-1806" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1808" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Soundness-1809" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1811" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a><a id="plfa_plfa-part3-Soundness-1814" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1816" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">_⊢_↓_</a><a id="plfa_plfa-part3-Soundness-1821" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1823" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">_`,_</a><a id="plfa_plfa-part3-Soundness-1827" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1829" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">_⊑_</a><a id="plfa_plfa-part3-Soundness-1832" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1834" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">_`⊑_</a><a id="plfa_plfa-part3-Soundness-1838" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1840" href="../Denotational/#plfa_plfa-part3-Denotational-8174" class="Function">`⊥</a><a id="plfa_plfa-part3-Soundness-1842" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1844" href="../Denotational/#plfa_plfa-part3-Denotational-8203" class="Function Operator">_`⊔_</a><a id="plfa_plfa-part3-Soundness-1848" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1850" href="../Denotational/#plfa_plfa-part3-Denotational-7541" class="Function">init</a><a id="plfa_plfa-part3-Soundness-1854" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1856" href="../Denotational/#plfa_plfa-part3-Denotational-7596" class="Function">last</a><a id="plfa_plfa-part3-Soundness-1860" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1862" href="../Denotational/#plfa_plfa-part3-Denotational-7645" class="Function">init-last</a><a id="plfa_plfa-part3-Soundness-1871" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-1885" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Soundness-1891" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1893" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a><a id="plfa_plfa-part3-Soundness-1900" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1902" href="../Denotational/#plfa_plfa-part3-Denotational-8466" class="Function">`⊑-refl</a><a id="plfa_plfa-part3-Soundness-1909" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1911" href="../Denotational/#plfa_plfa-part3-Denotational-25106" class="Function">⊑-env</a><a id="plfa_plfa-part3-Soundness-1916" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1918" href="../Denotational/#plfa_plfa-part3-Denotational-8537" class="Function">⊑-env-conj-R1</a><a id="plfa_plfa-part3-Soundness-1931" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1933" href="../Denotational/#plfa_plfa-part3-Denotational-8643" class="Function">⊑-env-conj-R2</a><a id="plfa_plfa-part3-Soundness-1946" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1948" href="../Denotational/#plfa_plfa-part3-Denotational-25555" class="Function">up-env</a><a id="plfa_plfa-part3-Soundness-1954" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-1968" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-1971" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1973" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Soundness-1979" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1981" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a><a id="plfa_plfa-part3-Soundness-1988" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1990" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a><a id="plfa_plfa-part3-Soundness-1997" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1999" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Soundness-2006" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2008" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a><a id="plfa_plfa-part3-Soundness-2011" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2025" href="../Denotational/#plfa_plfa-part3-Denotational-23533" class="Function">rename-pres</a><a id="plfa_plfa-part3-Soundness-2036" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2038" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a><a id="plfa_plfa-part3-Soundness-2039" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2041" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">_≃_</a><a id="plfa_plfa-part3-Soundness-2044" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2046" href="../Denotational/#plfa_plfa-part3-Denotational-18004" class="Function">≃-trans</a><a id="plfa_plfa-part3-Soundness-2053" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-2055" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-2060" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-2067" href="../Compositional/#" class="Module">plfa.part3.Compositional</a> <a id="plfa_plfa-part3-Soundness-2092" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-2098" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-2099" href="../Compositional/#plfa_plfa-part3-Compositional-3618" class="Function">lambda-inversion</a><a id="plfa_plfa-part3-Soundness-2115" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2117" href="../Compositional/#plfa_plfa-part3-Compositional-9817" class="Function">var-inv</a><a id="plfa_plfa-part3-Soundness-2124" class="Symbol">)</a>
</pre><h2 id="forward-reduction-preserves-denotations">Forward reduction preserves denotations</h2><p>The proof of preservation in this section mixes techniques from previous chapters. Like the proof of preservation for the STLC, we are preserving a relation defined separately from the syntax, in contrast to the intrinsically-typed terms. On the other hand, we are using de Bruijn indices for variables.</p><p>The outline of the proof remains the same in that we must prove lemmas concerning all of the auxiliary functions used in the reduction relation: substitution, renaming, and extension.</p><h3 id="simultaneous-substitution-preserves-denotations">Simultaneous substitution preserves denotations</h3><p>Our next goal is to prove that simultaneous substitution preserves meaning. That is, if <code>M</code> results in <code>v</code> in environment <code>γ</code>, then applying a substitution <code>σ</code> to <code>M</code> gives us a program that also results in <code>v</code>, but in an environment <code>δ</code> in which, for every variable <code>x</code>, <code>σ x</code> results in the same value as the one for <code>x</code> in the original environment <code>γ</code>. We write <code>δ `⊢ σ ↓ γ</code> for this condition.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-3131" class="Keyword">infix</a> <a id="plfa_plfa-part3-Soundness-3137" class="Number">3</a> <a id="plfa_plfa-part3-Soundness-3139" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">_`⊢_↓_</a>
<a id="plfa_plfa-part3-Soundness-_`⊢_↓_"></a><a id="plfa_plfa-part3-Soundness-3146" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">_`⊢_↓_</a> <a id="plfa_plfa-part3-Soundness-3153" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3155" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-3157" href="../Soundness/#plfa_plfa-part3-Soundness-3157" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-3159" href="../Soundness/#plfa_plfa-part3-Soundness-3159" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-3160" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-3162" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3164" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-3168" href="../Soundness/#plfa_plfa-part3-Soundness-3157" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-3170" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3172" href="../Substitution/#plfa_plfa-part2-Substitution-2341" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-3178" href="../Soundness/#plfa_plfa-part3-Soundness-3159" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3180" href="../Soundness/#plfa_plfa-part3-Soundness-3157" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-3182" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3184" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-3188" href="../Soundness/#plfa_plfa-part3-Soundness-3159" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3190" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3192" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="plfa_plfa-part3-Soundness-3196" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">_`⊢_↓_</a> <a id="plfa_plfa-part3-Soundness-3203" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-3204" href="../Soundness/#plfa_plfa-part3-Soundness-3204" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-3205" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-3207" href="../Soundness/#plfa_plfa-part3-Soundness-3207" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-3208" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-3210" href="../Soundness/#plfa_plfa-part3-Soundness-3210" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-3212" href="../Soundness/#plfa_plfa-part3-Soundness-3212" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3214" href="../Soundness/#plfa_plfa-part3-Soundness-3214" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-3216" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-3218" class="Symbol">(∀</a> <a id="plfa_plfa-part3-Soundness-3221" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-3222" href="../Soundness/#plfa_plfa-part3-Soundness-3222" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-3224" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3226" href="../Soundness/#plfa_plfa-part3-Soundness-3207" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3228" href="../Untyped/#plfa_plfa-part2-Untyped-4688" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-3230" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-3231" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-3233" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3235" href="../Soundness/#plfa_plfa-part3-Soundness-3210" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-3237" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-3239" href="../Soundness/#plfa_plfa-part3-Soundness-3212" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3241" href="../Soundness/#plfa_plfa-part3-Soundness-3222" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-3243" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-3245" href="../Soundness/#plfa_plfa-part3-Soundness-3214" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-3247" href="../Soundness/#plfa_plfa-part3-Soundness-3222" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-3248" class="Symbol">)</a>
</pre><p>As usual, to prepare for lambda abstraction, we prove an extension lemma. It says that applying the <code>exts</code> function to a substitution produces a new substitution that maps variables to terms that when evaluated in <code>δ , v</code> produce the values in <code>γ , v</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-ext"></a><a id="plfa_plfa-part3-Soundness-3517" href="../Soundness/#plfa_plfa-part3-Soundness-3517" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-3527" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3529" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-3531" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-3532" href="../Soundness/#plfa_plfa-part3-Soundness-3532" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3534" href="../Soundness/#plfa_plfa-part3-Soundness-3534" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-3536" href="../Soundness/#plfa_plfa-part3-Soundness-3536" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-3537" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-3539" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-3540" href="../Soundness/#plfa_plfa-part3-Soundness-3540" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-3542" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3544" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-3548" href="../Soundness/#plfa_plfa-part3-Soundness-3532" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-3549" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-3551" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-3552" href="../Soundness/#plfa_plfa-part3-Soundness-3552" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-3554" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3556" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-3560" href="../Soundness/#plfa_plfa-part3-Soundness-3534" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-3561" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-3565" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3567" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-3568" href="../Soundness/#plfa_plfa-part3-Soundness-3568" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3570" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3572" href="../Substitution/#plfa_plfa-part2-Substitution-2341" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-3578" href="../Soundness/#plfa_plfa-part3-Soundness-3532" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3580" href="../Soundness/#plfa_plfa-part3-Soundness-3534" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-3581" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-3585" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3587" href="../Soundness/#plfa_plfa-part3-Soundness-3552" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-3589" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-3592" href="../Soundness/#plfa_plfa-part3-Soundness-3568" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3594" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-3596" href="../Soundness/#plfa_plfa-part3-Soundness-3540" class="Bound">γ</a>
   <a id="plfa_plfa-part3-Soundness-3601" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part3-Soundness-3630" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3632" href="../Soundness/#plfa_plfa-part3-Soundness-3552" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-3634" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-3637" href="../Soundness/#plfa_plfa-part3-Soundness-3536" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-3639" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-3642" href="../Untyped/#plfa_plfa-part2-Untyped-8758" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-3647" href="../Soundness/#plfa_plfa-part3-Soundness-3568" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3649" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-3651" href="../Soundness/#plfa_plfa-part3-Soundness-3540" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-3653" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-3656" href="../Soundness/#plfa_plfa-part3-Soundness-3536" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-3658" href="../Soundness/#plfa_plfa-part3-Soundness-3517" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-3668" href="../Soundness/#plfa_plfa-part3-Soundness-3668" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3670" href="../Soundness/#plfa_plfa-part3-Soundness-3670" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-3672" href="../Untyped/#plfa_plfa-part2-Untyped-4724" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-3674" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-3676" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a>
<a id="plfa_plfa-part3-Soundness-3680" href="../Soundness/#plfa_plfa-part3-Soundness-3517" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-3690" href="../Soundness/#plfa_plfa-part3-Soundness-3690" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3692" href="../Soundness/#plfa_plfa-part3-Soundness-3692" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-3694" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-3695" href="../Untyped/#plfa_plfa-part2-Untyped-4769" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-3697" href="../Soundness/#plfa_plfa-part3-Soundness-3697" class="Bound">x′</a><a id="plfa_plfa-part3-Soundness-3699" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-3701" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-3703" href="../Denotational/#plfa_plfa-part3-Denotational-23533" class="Function">rename-pres</a> <a id="plfa_plfa-part3-Soundness-3715" href="../Untyped/#plfa_plfa-part2-Untyped-4769" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part3-Soundness-3718" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-3721" href="../Soundness/#plfa_plfa-part3-Soundness-3721" class="Bound">_</a> <a id="plfa_plfa-part3-Soundness-3723" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3725" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Soundness-3731" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-3733" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-3734" href="../Soundness/#plfa_plfa-part3-Soundness-3692" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-3736" href="../Soundness/#plfa_plfa-part3-Soundness-3697" class="Bound">x′</a><a id="plfa_plfa-part3-Soundness-3738" class="Symbol">)</a>
</pre><p>The proof is by cases on the de Bruijn index <code>x</code>.</p><ul><li><p>If it is <code>Z</code>, then we need to show that <code>δ , v ⊢ # 0 ↓ v</code>, which we have by rule <code>var</code>.</p></li><li><p>If it is <code>S x′</code>,then we need to show that <code>δ , v ⊢ rename S_ (σ x′) ↓ γ x′</code>, which we obtain by the <code>rename-pres</code> lemma.</p></li></ul><p>With the extension lemma in hand, the proof that simultaneous substitution preserves meaning is straightforward. Let’s dive in!</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-pres"></a><a id="plfa_plfa-part3-Soundness-4155" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4166" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4168" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-4170" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4171" href="../Soundness/#plfa_plfa-part3-Soundness-4171" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4173" href="../Soundness/#plfa_plfa-part3-Soundness-4173" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-4175" href="../Soundness/#plfa_plfa-part3-Soundness-4175" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-4176" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4178" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4179" href="../Soundness/#plfa_plfa-part3-Soundness-4179" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4181" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4183" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4187" href="../Soundness/#plfa_plfa-part3-Soundness-4171" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-4188" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4190" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4191" href="../Soundness/#plfa_plfa-part3-Soundness-4191" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4193" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4195" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4199" href="../Soundness/#plfa_plfa-part3-Soundness-4173" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-4200" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4202" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4203" href="../Soundness/#plfa_plfa-part3-Soundness-4203" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-4205" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4207" href="../Soundness/#plfa_plfa-part3-Soundness-4171" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4209" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-4211" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-4212" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-4216" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4218" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4219" href="../Soundness/#plfa_plfa-part3-Soundness-4219" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4221" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4223" href="../Substitution/#plfa_plfa-part2-Substitution-2341" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-4229" href="../Soundness/#plfa_plfa-part3-Soundness-4171" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4231" href="../Soundness/#plfa_plfa-part3-Soundness-4173" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-4232" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-4236" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4238" href="../Soundness/#plfa_plfa-part3-Soundness-4191" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4240" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-4243" href="../Soundness/#plfa_plfa-part3-Soundness-4219" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4245" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4247" href="../Soundness/#plfa_plfa-part3-Soundness-4179" class="Bound">γ</a>
  <a id="plfa_plfa-part3-Soundness-4251" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4253" href="../Soundness/#plfa_plfa-part3-Soundness-4179" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4255" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-4257" href="../Soundness/#plfa_plfa-part3-Soundness-4203" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-4259" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4261" href="../Soundness/#plfa_plfa-part3-Soundness-4175" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-4267" class="Comment">------------------</a>
  <a id="plfa_plfa-part3-Soundness-4288" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4290" href="../Soundness/#plfa_plfa-part3-Soundness-4191" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4292" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-4294" href="../Untyped/#plfa_plfa-part2-Untyped-9119" class="Function">subst</a> <a id="plfa_plfa-part3-Soundness-4300" href="../Soundness/#plfa_plfa-part3-Soundness-4219" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4302" href="../Soundness/#plfa_plfa-part3-Soundness-4203" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-4304" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4306" href="../Soundness/#plfa_plfa-part3-Soundness-4175" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-4308" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4319" href="../Soundness/#plfa_plfa-part3-Soundness-4319" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4321" href="../Soundness/#plfa_plfa-part3-Soundness-4321" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4323" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4324" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-4328" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4329" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-4331" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4333" href="../Soundness/#plfa_plfa-part3-Soundness-4333" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-4334" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-4337" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4339" href="../Soundness/#plfa_plfa-part3-Soundness-4321" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4341" href="../Soundness/#plfa_plfa-part3-Soundness-4333" class="Bound">x</a>
<a id="plfa_plfa-part3-Soundness-4343" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4354" href="../Soundness/#plfa_plfa-part3-Soundness-4354" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4356" href="../Soundness/#plfa_plfa-part3-Soundness-4356" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4358" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4359" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-4366" href="../Soundness/#plfa_plfa-part3-Soundness-4366" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-4369" href="../Soundness/#plfa_plfa-part3-Soundness-4369" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-4371" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4373" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-4377" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-4384" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4385" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4396" href="../Soundness/#plfa_plfa-part3-Soundness-4354" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4398" href="../Soundness/#plfa_plfa-part3-Soundness-4356" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4400" href="../Soundness/#plfa_plfa-part3-Soundness-4366" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-4402" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4404" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4405" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4416" href="../Soundness/#plfa_plfa-part3-Soundness-4354" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4418" href="../Soundness/#plfa_plfa-part3-Soundness-4356" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4420" href="../Soundness/#plfa_plfa-part3-Soundness-4369" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-4422" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-4424" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4435" href="../Soundness/#plfa_plfa-part3-Soundness-4435" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4437" href="../Soundness/#plfa_plfa-part3-Soundness-4437" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4439" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4440" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-4448" href="../Soundness/#plfa_plfa-part3-Soundness-4448" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-4449" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4451" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-4455" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-4463" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4464" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4475" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-4478" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4479" href="../Soundness/#plfa_plfa-part3-Soundness-4479" class="Bound">A</a><a id="plfa_plfa-part3-Soundness-4480" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4482" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4484" href="../Untyped/#plfa_plfa-part2-Untyped-8758" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-4489" href="../Soundness/#plfa_plfa-part3-Soundness-4435" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-4490" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4492" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4493" href="../Soundness/#plfa_plfa-part3-Soundness-3517" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-4503" href="../Soundness/#plfa_plfa-part3-Soundness-4435" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4505" href="../Soundness/#plfa_plfa-part3-Soundness-4437" class="Bound">s</a><a id="plfa_plfa-part3-Soundness-4506" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4508" href="../Soundness/#plfa_plfa-part3-Soundness-4448" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-4509" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-4511" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4522" href="../Soundness/#plfa_plfa-part3-Soundness-4522" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4524" href="../Soundness/#plfa_plfa-part3-Soundness-4524" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4526" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-4534" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4536" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-4544" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4555" href="../Soundness/#plfa_plfa-part3-Soundness-4555" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4557" href="../Soundness/#plfa_plfa-part3-Soundness-4557" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4559" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4560" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-4568" href="../Soundness/#plfa_plfa-part3-Soundness-4568" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-4571" href="../Soundness/#plfa_plfa-part3-Soundness-4571" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-4573" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4575" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-4579" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-4587" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4588" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4599" href="../Soundness/#plfa_plfa-part3-Soundness-4555" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4601" href="../Soundness/#plfa_plfa-part3-Soundness-4557" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4603" href="../Soundness/#plfa_plfa-part3-Soundness-4568" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-4605" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4607" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4608" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4619" href="../Soundness/#plfa_plfa-part3-Soundness-4555" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4621" href="../Soundness/#plfa_plfa-part3-Soundness-4557" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4623" href="../Soundness/#plfa_plfa-part3-Soundness-4571" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-4625" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-4627" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4638" href="../Soundness/#plfa_plfa-part3-Soundness-4638" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4640" href="../Soundness/#plfa_plfa-part3-Soundness-4640" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4642" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4643" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-4647" href="../Soundness/#plfa_plfa-part3-Soundness-4647" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-4649" href="../Soundness/#plfa_plfa-part3-Soundness-4649" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-4651" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4653" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4655" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-4659" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4660" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4671" href="../Soundness/#plfa_plfa-part3-Soundness-4638" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4673" href="../Soundness/#plfa_plfa-part3-Soundness-4640" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4675" href="../Soundness/#plfa_plfa-part3-Soundness-4647" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-4676" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4678" href="../Soundness/#plfa_plfa-part3-Soundness-4649" class="Bound">lt</a>
</pre><p>The proof is by induction on the semantics of <code>M</code>. The two interesting cases are for variables and lambda abstractions.</p><ul><li><p>For a variable <code>x</code>, we have that <code>v = γ x</code> and we need to show that <code>δ ⊢ σ x ↓ v</code>. From the premise applied to <code>x</code>, we have that <code>δ ⊢ σ x ↓ γ x</code> aka <code>δ ⊢ σ x ↓ v</code>.</p></li><li><p>For a lambda abstraction, we must extend the substitution for the induction hypothesis. We apply the <code>subst-ext</code> lemma to show that the extended substitution maps variables to terms that result in the appropriate values.</p></li></ul><h3 id="single-substitution-preserves-denotations">Single substitution preserves denotations</h3><p>For β reduction, <code>(ƛ N) · M —→ N [ M ]</code>, we need to show that the semantics is preserved when substituting <code>M</code> for de Bruijn index 0 in term <code>N</code>. By inversion on the rules <code>↦-elim</code> and <code>↦-intro</code>, we have that <code>γ , v ⊢ M ↓ w</code> and <code>γ ⊢ N ↓ v</code>. So we need to show that <code>γ ⊢ M [ N ] ↓ w</code>, or equivalently, that <code>γ ⊢ subst (subst-zero N) M ↓ w</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-substitution"></a><a id="plfa_plfa-part3-Soundness-5608" href="../Soundness/#plfa_plfa-part3-Soundness-5608" class="Function">substitution</a> <a id="plfa_plfa-part3-Soundness-5621" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5623" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-5625" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5626" href="../Soundness/#plfa_plfa-part3-Soundness-5626" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-5627" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5629" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5630" href="../Soundness/#plfa_plfa-part3-Soundness-5630" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5632" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5634" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-5638" href="../Soundness/#plfa_plfa-part3-Soundness-5626" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-5639" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5641" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5642" href="../Soundness/#plfa_plfa-part3-Soundness-5642" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-5644" href="../Soundness/#plfa_plfa-part3-Soundness-5644" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5646" href="../Soundness/#plfa_plfa-part3-Soundness-5646" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-5648" href="../Soundness/#plfa_plfa-part3-Soundness-5648" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-5649" class="Symbol">}</a>
   <a id="plfa_plfa-part3-Soundness-5654" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5656" href="../Soundness/#plfa_plfa-part3-Soundness-5630" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5658" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-5661" href="../Soundness/#plfa_plfa-part3-Soundness-5646" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-5663" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5665" href="../Soundness/#plfa_plfa-part3-Soundness-5642" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-5667" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5669" href="../Soundness/#plfa_plfa-part3-Soundness-5648" class="Bound">w</a>
   <a id="plfa_plfa-part3-Soundness-5674" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5676" href="../Soundness/#plfa_plfa-part3-Soundness-5630" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5678" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5680" href="../Soundness/#plfa_plfa-part3-Soundness-5644" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5682" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5684" href="../Soundness/#plfa_plfa-part3-Soundness-5646" class="Bound">v</a>
     <a id="plfa_plfa-part3-Soundness-5691" class="Comment">---------------</a>
   <a id="plfa_plfa-part3-Soundness-5710" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5712" href="../Soundness/#plfa_plfa-part3-Soundness-5630" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5714" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5716" href="../Soundness/#plfa_plfa-part3-Soundness-5642" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-5718" href="../Untyped/#plfa_plfa-part2-Untyped-9731" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-5720" href="../Soundness/#plfa_plfa-part3-Soundness-5644" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5722" href="../Untyped/#plfa_plfa-part2-Untyped-9731" class="Function Operator">]</a> <a id="plfa_plfa-part3-Soundness-5724" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5726" href="../Soundness/#plfa_plfa-part3-Soundness-5648" class="Bound">w</a>
<a id="plfa_plfa-part3-Soundness-5728" href="../Soundness/#plfa_plfa-part3-Soundness-5608" class="Function">substitution</a><a id="plfa_plfa-part3-Soundness-5740" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5741" href="../Soundness/#plfa_plfa-part3-Soundness-5741" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-5742" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-5744" href="../Soundness/#plfa_plfa-part3-Soundness-5744" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-5745" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-5747" href="../Soundness/#plfa_plfa-part3-Soundness-5747" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-5748" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-5750" href="../Soundness/#plfa_plfa-part3-Soundness-5750" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-5751" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-5753" href="../Soundness/#plfa_plfa-part3-Soundness-5753" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-5754" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-5756" href="../Soundness/#plfa_plfa-part3-Soundness-5756" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-5757" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5759" href="../Soundness/#plfa_plfa-part3-Soundness-5759" class="Bound">dn</a> <a id="plfa_plfa-part3-Soundness-5762" href="../Soundness/#plfa_plfa-part3-Soundness-5762" class="Bound">dm</a> <a id="plfa_plfa-part3-Soundness-5765" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-5769" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5780" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5781" href="../Untyped/#plfa_plfa-part2-Untyped-9615" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-5792" href="../Soundness/#plfa_plfa-part3-Soundness-5750" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-5793" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5795" href="../Soundness/#plfa_plfa-part3-Soundness-5817" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-5804" href="../Soundness/#plfa_plfa-part3-Soundness-5759" class="Bound">dn</a>
  <a id="plfa_plfa-part3-Soundness-5809" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-5817" href="../Soundness/#plfa_plfa-part3-Soundness-5817" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-5826" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5828" href="../Soundness/#plfa_plfa-part3-Soundness-5744" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5830" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-5833" href="../Untyped/#plfa_plfa-part2-Untyped-9615" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-5844" href="../Soundness/#plfa_plfa-part3-Soundness-5750" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5846" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5848" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5849" href="../Soundness/#plfa_plfa-part3-Soundness-5744" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5851" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-5854" href="../Soundness/#plfa_plfa-part3-Soundness-5753" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-5855" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-5859" href="../Soundness/#plfa_plfa-part3-Soundness-5817" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-5868" href="../Untyped/#plfa_plfa-part2-Untyped-4724" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-5870" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5872" href="../Soundness/#plfa_plfa-part3-Soundness-5762" class="Bound">dm</a>
  <a id="plfa_plfa-part3-Soundness-5877" href="../Soundness/#plfa_plfa-part3-Soundness-5817" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-5886" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5887" href="../Untyped/#plfa_plfa-part2-Untyped-4769" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-5889" href="../Soundness/#plfa_plfa-part3-Soundness-5889" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-5890" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5892" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5894" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a>
</pre><p>This result is a corollary of the lemma for simultaneous substitution. To use the lemma, we just need to show that <code>subst-zero M</code> maps variables to terms that produces the same values as those in <code>γ , v</code>. Let <code>y</code> be an arbitrary variable (de Bruijn index).</p><ul><li><p>If it is <code>Z</code>, then <code>(subst-zero M) y = M</code> and <code>(γ , v) y = v</code>. By the premise we conclude that <code>γ ⊢ M ↓ v</code>.</p></li><li><p>If it is <code>S x</code>, then <code>(subst-zero M) (S x) = x</code> and <code>(γ , v) (S x) = γ x</code>. So we conclude that <code>γ ⊢ x ↓ γ x</code> by rule <code>var</code>.</p></li></ul><h3 id="reduction-preserves-denotations">Reduction preserves denotations</h3><p>With the substitution lemma in hand, it is straightforward to prove that reduction preserves denotations.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-preserve"></a><a id="plfa_plfa-part3-Soundness-6559" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6568" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-6570" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-6572" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-6573" href="../Soundness/#plfa_plfa-part3-Soundness-6573" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-6574" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-6576" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-6577" href="../Soundness/#plfa_plfa-part3-Soundness-6577" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-6579" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-6581" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-6585" href="../Soundness/#plfa_plfa-part3-Soundness-6573" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-6586" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-6588" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-6589" href="../Soundness/#plfa_plfa-part3-Soundness-6589" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-6591" href="../Soundness/#plfa_plfa-part3-Soundness-6591" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-6593" href="../Soundness/#plfa_plfa-part3-Soundness-6593" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-6594" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-6598" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-6600" href="../Soundness/#plfa_plfa-part3-Soundness-6577" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-6602" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-6604" href="../Soundness/#plfa_plfa-part3-Soundness-6589" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-6606" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-6608" href="../Soundness/#plfa_plfa-part3-Soundness-6593" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-6612" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-6614" href="../Soundness/#plfa_plfa-part3-Soundness-6589" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-6616" href="../Untyped/#plfa_plfa-part2-Untyped-12977" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-6619" href="../Soundness/#plfa_plfa-part3-Soundness-6591" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-6625" class="Comment">----------</a>
  <a id="plfa_plfa-part3-Soundness-6638" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-6640" href="../Soundness/#plfa_plfa-part3-Soundness-6577" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-6642" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-6644" href="../Soundness/#plfa_plfa-part3-Soundness-6591" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-6646" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-6648" href="../Soundness/#plfa_plfa-part3-Soundness-6593" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-6650" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6659" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6660" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-6663" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6665" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-6668" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6677" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6678" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-6685" href="../Soundness/#plfa_plfa-part3-Soundness-6685" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6688" href="../Soundness/#plfa_plfa-part3-Soundness-6688" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-6690" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6692" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6693" href="../Untyped/#plfa_plfa-part2-Untyped-13027" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-6696" href="../Soundness/#plfa_plfa-part3-Soundness-6696" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6697" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6699" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6701" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-6708" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6709" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6718" href="../Soundness/#plfa_plfa-part3-Soundness-6685" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6721" href="../Soundness/#plfa_plfa-part3-Soundness-6696" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6722" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6724" href="../Soundness/#plfa_plfa-part3-Soundness-6688" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-6727" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6736" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6737" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-6744" href="../Soundness/#plfa_plfa-part3-Soundness-6744" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6747" href="../Soundness/#plfa_plfa-part3-Soundness-6747" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-6749" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6751" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6752" href="../Untyped/#plfa_plfa-part2-Untyped-13117" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-6755" href="../Soundness/#plfa_plfa-part3-Soundness-6755" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6756" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6758" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6760" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-6767" href="../Soundness/#plfa_plfa-part3-Soundness-6744" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6770" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6771" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6780" href="../Soundness/#plfa_plfa-part3-Soundness-6747" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-6783" href="../Soundness/#plfa_plfa-part3-Soundness-6755" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6784" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-6786" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6795" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6796" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-6803" href="../Soundness/#plfa_plfa-part3-Soundness-6803" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6806" href="../Soundness/#plfa_plfa-part3-Soundness-6806" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-6808" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6810" href="../Untyped/#plfa_plfa-part2-Untyped-13207" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-6812" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6814" href="../Soundness/#plfa_plfa-part3-Soundness-5608" class="Function">substitution</a> <a id="plfa_plfa-part3-Soundness-6827" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6828" href="../Compositional/#plfa_plfa-part3-Compositional-3618" class="Function">lambda-inversion</a> <a id="plfa_plfa-part3-Soundness-6845" href="../Soundness/#plfa_plfa-part3-Soundness-6803" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-6847" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6849" href="../Soundness/#plfa_plfa-part3-Soundness-6806" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-6852" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6861" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6862" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-6870" href="../Soundness/#plfa_plfa-part3-Soundness-6870" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-6871" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6873" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6874" href="../Untyped/#plfa_plfa-part2-Untyped-13315" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-6876" href="../Soundness/#plfa_plfa-part3-Soundness-6876" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6877" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6879" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6881" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-6889" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6890" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6899" href="../Soundness/#plfa_plfa-part3-Soundness-6870" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-6901" href="../Soundness/#plfa_plfa-part3-Soundness-6876" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6902" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-6904" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6913" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-6921" href="../Soundness/#plfa_plfa-part3-Soundness-6921" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-6923" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6925" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-6933" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6942" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6943" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-6951" href="../Soundness/#plfa_plfa-part3-Soundness-6951" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-6953" href="../Soundness/#plfa_plfa-part3-Soundness-6953" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-6955" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6957" href="../Soundness/#plfa_plfa-part3-Soundness-6957" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-6959" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6961" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-6969" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6970" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6979" href="../Soundness/#plfa_plfa-part3-Soundness-6951" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-6981" href="../Soundness/#plfa_plfa-part3-Soundness-6957" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6982" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6984" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6985" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6994" href="../Soundness/#plfa_plfa-part3-Soundness-6953" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6997" href="../Soundness/#plfa_plfa-part3-Soundness-6957" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6998" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-7000" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-7009" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-7010" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-7014" href="../Soundness/#plfa_plfa-part3-Soundness-7014" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-7016" href="../Soundness/#plfa_plfa-part3-Soundness-7016" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-7018" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-7020" href="../Soundness/#plfa_plfa-part3-Soundness-7020" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-7022" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-7024" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-7028" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-7029" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-7038" href="../Soundness/#plfa_plfa-part3-Soundness-7014" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-7040" href="../Soundness/#plfa_plfa-part3-Soundness-7020" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-7041" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-7043" href="../Soundness/#plfa_plfa-part3-Soundness-7016" class="Bound">lt</a>
</pre><p>We proceed by induction on the semantics of <code>M</code> with case analysis on the reduction.</p><ul><li><p>If <code>M</code> is a variable, then there is no such reduction.</p></li><li><p>If <code>M</code> is an application, then the reduction is either a congruence (ξ₁ or ξ₂) or β. For each congruence, we use the induction hypothesis. For β reduction we use the substitution lemma and the <code>sub</code> rule.</p></li><li><p>The rest of the cases are straightforward.</p></li></ul><h2 id="reduction-reflects-denotations">Reduction reflects denotations</h2><p>This section proves that reduction reflects the denotation of a term. That is, if <code>N</code> results in <code>v</code>, and if <code>M</code> reduces to <code>N</code>, then <code>M</code> also results in <code>v</code>. While there are some broad similarities between this proof and the above proof of semantic preservation, we shall require a few more technical lemmas to obtain this result.</p><p>The main challenge is dealing with the substitution in β reduction:</p><pre><code>(ƛ N) · M —→ N [ M ]</code></pre><p>We have that <code>γ ⊢ N [ M ] ↓ v</code> and need to show that <code>γ ⊢ (ƛ N) · M ↓ v</code>. Now consider the derivation of <code>γ ⊢ N [ M ] ↓ v</code>. The term <code>M</code> may occur 0, 1, or many times inside <code>N [ M ]</code>. At each of those occurrences, <code>M</code> may result in a different value. But to build a derivation for <code>(ƛ N) · M</code>, we need a single value for <code>M</code>. If <code>M</code> occurred more than 1 time, then we can join all of the different values using <code>⊔</code>. If <code>M</code> occurred 0 times, then we do not need any information about <code>M</code> and can therefore use <code>⊥</code> for the value of <code>M</code>.</p><h3 id="renaming-reflects-meaning">Renaming reflects meaning</h3><p>Previously we showed that renaming variables preserves meaning. Now we prove the opposite, that it reflects meaning. That is, if <code>δ ⊢ rename ρ M ↓ v</code>, then <code>γ ⊢ M ↓ v</code>, where <code>(δ ∘ ρ)</code>⊑ γ`.</p>First, we need a variant of a lemma given earlier.<pre class="Agda"><a id="plfa_plfa-part3-Soundness-ext-`⊑"></a><a id="plfa_plfa-part3-Soundness-8740" href="../Soundness/#plfa_plfa-part3-Soundness-8740" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-8747" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8749" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-8751" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8752" href="../Soundness/#plfa_plfa-part3-Soundness-8752" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-8754" href="../Soundness/#plfa_plfa-part3-Soundness-8754" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-8756" href="../Soundness/#plfa_plfa-part3-Soundness-8756" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-8757" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-8759" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8760" href="../Soundness/#plfa_plfa-part3-Soundness-8760" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-8762" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8764" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-8768" href="../Soundness/#plfa_plfa-part3-Soundness-8752" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-8769" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-8771" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8772" href="../Soundness/#plfa_plfa-part3-Soundness-8772" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-8774" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8776" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-8780" href="../Soundness/#plfa_plfa-part3-Soundness-8754" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-8781" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-8785" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8787" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8788" href="../Soundness/#plfa_plfa-part3-Soundness-8788" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-8790" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8792" href="../Substitution/#plfa_plfa-part2-Substitution-2124" class="Function">Rename</a> <a id="plfa_plfa-part3-Soundness-8799" href="../Soundness/#plfa_plfa-part3-Soundness-8752" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-8801" href="../Soundness/#plfa_plfa-part3-Soundness-8754" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-8802" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-8806" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8808" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8809" href="../Soundness/#plfa_plfa-part3-Soundness-8772" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-8811" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-8813" href="../Soundness/#plfa_plfa-part3-Soundness-8788" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-8814" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8816" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-8819" href="../Soundness/#plfa_plfa-part3-Soundness-8760" class="Bound">γ</a>
    <a id="plfa_plfa-part3-Soundness-8825" class="Comment">------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-8858" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8860" class="Symbol">((</a><a id="plfa_plfa-part3-Soundness-8862" href="../Soundness/#plfa_plfa-part3-Soundness-8772" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-8864" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-8867" href="../Soundness/#plfa_plfa-part3-Soundness-8756" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-8868" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8870" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-8872" href="../Untyped/#plfa_plfa-part2-Untyped-7839" class="Function">ext</a> <a id="plfa_plfa-part3-Soundness-8876" href="../Soundness/#plfa_plfa-part3-Soundness-8788" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-8877" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8879" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-8882" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8883" href="../Soundness/#plfa_plfa-part3-Soundness-8760" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-8885" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-8888" href="../Soundness/#plfa_plfa-part3-Soundness-8756" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-8889" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-8891" href="../Soundness/#plfa_plfa-part3-Soundness-8740" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-8898" href="../Soundness/#plfa_plfa-part3-Soundness-8898" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-8900" href="../Soundness/#plfa_plfa-part3-Soundness-8900" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-8903" href="../Untyped/#plfa_plfa-part2-Untyped-4724" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-8905" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8907" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a>
<a id="plfa_plfa-part3-Soundness-8914" href="../Soundness/#plfa_plfa-part3-Soundness-8740" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-8921" href="../Soundness/#plfa_plfa-part3-Soundness-8921" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-8923" href="../Soundness/#plfa_plfa-part3-Soundness-8923" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-8926" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8927" href="../Untyped/#plfa_plfa-part2-Untyped-4769" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-8929" href="../Soundness/#plfa_plfa-part3-Soundness-8929" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-8930" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8932" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8934" href="../Soundness/#plfa_plfa-part3-Soundness-8923" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-8937" href="../Soundness/#plfa_plfa-part3-Soundness-8929" class="Bound">x</a>
</pre>The proof is then as follows.<pre class="Agda"><a id="plfa_plfa-part3-Soundness-rename-reflect"></a><a id="plfa_plfa-part3-Soundness-8982" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-8997" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8999" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-9001" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9002" href="../Soundness/#plfa_plfa-part3-Soundness-9002" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-9004" href="../Soundness/#plfa_plfa-part3-Soundness-9004" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-9006" href="../Soundness/#plfa_plfa-part3-Soundness-9006" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-9007" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9009" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9010" href="../Soundness/#plfa_plfa-part3-Soundness-9010" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-9012" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-9014" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-9018" href="../Soundness/#plfa_plfa-part3-Soundness-9002" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-9019" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9021" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9022" href="../Soundness/#plfa_plfa-part3-Soundness-9022" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-9024" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-9026" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-9030" href="../Soundness/#plfa_plfa-part3-Soundness-9004" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-9031" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9033" class="Symbol">{</a> <a id="plfa_plfa-part3-Soundness-9035" href="../Soundness/#plfa_plfa-part3-Soundness-9035" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-9037" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-9039" href="../Soundness/#plfa_plfa-part3-Soundness-9002" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-9041" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-9043" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-9044" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-9048" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-9050" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9051" href="../Soundness/#plfa_plfa-part3-Soundness-9051" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-9053" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-9055" href="../Substitution/#plfa_plfa-part2-Substitution-2124" class="Function">Rename</a> <a id="plfa_plfa-part3-Soundness-9062" href="../Soundness/#plfa_plfa-part3-Soundness-9002" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-9064" href="../Soundness/#plfa_plfa-part3-Soundness-9004" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-9065" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-9069" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-9071" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9072" href="../Soundness/#plfa_plfa-part3-Soundness-9022" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-9074" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-9076" href="../Soundness/#plfa_plfa-part3-Soundness-9051" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-9077" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9079" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-9082" href="../Soundness/#plfa_plfa-part3-Soundness-9010" class="Bound">γ</a>
  <a id="plfa_plfa-part3-Soundness-9086" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-9088" href="../Soundness/#plfa_plfa-part3-Soundness-9022" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-9090" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-9092" href="../Untyped/#plfa_plfa-part2-Untyped-8231" class="Function">rename</a> <a id="plfa_plfa-part3-Soundness-9099" href="../Soundness/#plfa_plfa-part3-Soundness-9051" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-9101" href="../Soundness/#plfa_plfa-part3-Soundness-9035" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-9103" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-9105" href="../Soundness/#plfa_plfa-part3-Soundness-9006" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-9111" class="Comment">------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-9150" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-9152" href="../Soundness/#plfa_plfa-part3-Soundness-9010" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-9154" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-9156" href="../Soundness/#plfa_plfa-part3-Soundness-9035" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-9158" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-9160" href="../Soundness/#plfa_plfa-part3-Soundness-9006" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-9162" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9177" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9178" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9180" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9182" href="../Untyped/#plfa_plfa-part2-Untyped-5768" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-9184" href="../Soundness/#plfa_plfa-part3-Soundness-9184" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-9185" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9187" href="../Soundness/#plfa_plfa-part3-Soundness-9187" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9193" href="../Soundness/#plfa_plfa-part3-Soundness-9193" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-9195" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-9200" href="../Compositional/#plfa_plfa-part3-Compositional-9817" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-9208" href="../Soundness/#plfa_plfa-part3-Soundness-9193" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-9210" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-9214" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-9216" href="../Soundness/#plfa_plfa-part3-Soundness-9216" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-9219" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-9222" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9226" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-9230" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9231" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Soundness-9239" href="../Soundness/#plfa_plfa-part3-Soundness-9216" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-9242" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9243" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9249" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-9250" class="Symbol">))</a>
<a id="plfa_plfa-part3-Soundness-9253" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9268" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9269" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9271" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9273" href="../Untyped/#plfa_plfa-part2-Untyped-5820" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-9275" href="../Soundness/#plfa_plfa-part3-Soundness-9275" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-9276" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-9278" class="Argument">ρ</a> <a id="plfa_plfa-part3-Soundness-9280" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9282" href="../Soundness/#plfa_plfa-part3-Soundness-9282" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-9283" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9285" href="../Soundness/#plfa_plfa-part3-Soundness-9285" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9291" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9292" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-9300" href="../Soundness/#plfa_plfa-part3-Soundness-9300" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-9301" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9303" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9308" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-9316" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9317" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9332" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9333" href="../Soundness/#plfa_plfa-part3-Soundness-8740" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-9340" href="../Soundness/#plfa_plfa-part3-Soundness-9282" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-9342" href="../Soundness/#plfa_plfa-part3-Soundness-9285" class="Bound">all-n</a><a id="plfa_plfa-part3-Soundness-9347" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9349" href="../Soundness/#plfa_plfa-part3-Soundness-9300" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-9350" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-9352" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9367" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9368" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9370" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9372" href="../Untyped/#plfa_plfa-part2-Untyped-5820" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-9374" href="../Soundness/#plfa_plfa-part3-Soundness-9374" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-9375" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9377" href="../Soundness/#plfa_plfa-part3-Soundness-9377" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9383" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-9391" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9393" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-9401" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9416" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9417" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9419" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9421" href="../Untyped/#plfa_plfa-part2-Untyped-5820" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-9423" href="../Soundness/#plfa_plfa-part3-Soundness-9423" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-9424" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9426" href="../Soundness/#plfa_plfa-part3-Soundness-9426" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9432" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9433" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9441" href="../Soundness/#plfa_plfa-part3-Soundness-9441" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9444" href="../Soundness/#plfa_plfa-part3-Soundness-9444" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9446" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9448" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9453" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9461" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9462" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9477" href="../Soundness/#plfa_plfa-part3-Soundness-9426" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9483" href="../Soundness/#plfa_plfa-part3-Soundness-9441" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9485" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9487" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9488" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9503" href="../Soundness/#plfa_plfa-part3-Soundness-9426" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9509" href="../Soundness/#plfa_plfa-part3-Soundness-9444" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9511" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-9513" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9528" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9529" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9531" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9533" href="../Untyped/#plfa_plfa-part2-Untyped-5820" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-9535" href="../Soundness/#plfa_plfa-part3-Soundness-9535" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-9536" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9538" href="../Soundness/#plfa_plfa-part3-Soundness-9538" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9544" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9545" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9549" href="../Soundness/#plfa_plfa-part3-Soundness-9549" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9552" href="../Soundness/#plfa_plfa-part3-Soundness-9552" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-9554" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9556" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9561" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9565" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9566" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9581" href="../Soundness/#plfa_plfa-part3-Soundness-9538" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9587" href="../Soundness/#plfa_plfa-part3-Soundness-9549" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9589" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9591" href="../Soundness/#plfa_plfa-part3-Soundness-9552" class="Bound">lt</a>
<a id="plfa_plfa-part3-Soundness-9594" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9609" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9610" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9612" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9614" href="../Soundness/#plfa_plfa-part3-Soundness-9614" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-9616" href="../Untyped/#plfa_plfa-part2-Untyped-5880" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-9618" href="../Soundness/#plfa_plfa-part3-Soundness-9618" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-9619" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9621" href="../Soundness/#plfa_plfa-part3-Soundness-9621" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9627" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9628" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-9635" href="../Soundness/#plfa_plfa-part3-Soundness-9635" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9638" href="../Soundness/#plfa_plfa-part3-Soundness-9638" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9640" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9642" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9647" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-9654" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9655" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9670" href="../Soundness/#plfa_plfa-part3-Soundness-9621" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9676" href="../Soundness/#plfa_plfa-part3-Soundness-9635" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9678" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9680" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9681" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9696" href="../Soundness/#plfa_plfa-part3-Soundness-9621" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9702" href="../Soundness/#plfa_plfa-part3-Soundness-9638" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9704" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-9706" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9721" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9722" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9724" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9726" href="../Soundness/#plfa_plfa-part3-Soundness-9726" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-9728" href="../Untyped/#plfa_plfa-part2-Untyped-5880" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-9730" href="../Soundness/#plfa_plfa-part3-Soundness-9730" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-9731" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9733" href="../Soundness/#plfa_plfa-part3-Soundness-9733" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9739" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-9747" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9749" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-9757" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9772" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9773" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9775" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9777" href="../Soundness/#plfa_plfa-part3-Soundness-9777" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-9779" href="../Untyped/#plfa_plfa-part2-Untyped-5880" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-9781" href="../Soundness/#plfa_plfa-part3-Soundness-9781" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-9782" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9784" href="../Soundness/#plfa_plfa-part3-Soundness-9784" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9790" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9791" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9799" href="../Soundness/#plfa_plfa-part3-Soundness-9799" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9802" href="../Soundness/#plfa_plfa-part3-Soundness-9802" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9804" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9806" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9811" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9819" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9820" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9835" href="../Soundness/#plfa_plfa-part3-Soundness-9784" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9841" href="../Soundness/#plfa_plfa-part3-Soundness-9799" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9843" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9845" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9846" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9861" href="../Soundness/#plfa_plfa-part3-Soundness-9784" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9867" href="../Soundness/#plfa_plfa-part3-Soundness-9802" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9869" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-9871" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9886" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9887" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9889" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9891" href="../Soundness/#plfa_plfa-part3-Soundness-9891" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-9893" href="../Untyped/#plfa_plfa-part2-Untyped-5880" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-9895" href="../Soundness/#plfa_plfa-part3-Soundness-9895" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-9896" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9898" href="../Soundness/#plfa_plfa-part3-Soundness-9898" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9904" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9905" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9909" href="../Soundness/#plfa_plfa-part3-Soundness-9909" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9912" href="../Soundness/#plfa_plfa-part3-Soundness-9912" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-9914" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9916" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9921" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9925" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9926" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9941" href="../Soundness/#plfa_plfa-part3-Soundness-9898" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9947" href="../Soundness/#plfa_plfa-part3-Soundness-9909" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9949" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9951" href="../Soundness/#plfa_plfa-part3-Soundness-9912" class="Bound">lt</a>
</pre><p>We cannot prove this lemma by induction on the derivation of <code>δ ⊢ rename ρ M ↓ v</code>, so instead we proceed by induction on <code>M</code>.</p><ul><li><p>If it is a variable, we apply the inversion lemma to obtain that <code>v ⊑ δ (ρ x)</code>. Instantiating the premise to <code>x</code> we have <code>δ (ρ x) ⊑ γ x</code>, so we conclude by the <code>var</code> rule.</p></li><li><p>If it is a lambda abstraction <code>ƛ N</code>, we have rename <code>ρ (ƛ N) = ƛ (rename (ext ρ) N)</code>. We proceed by cases on <code>δ ⊢ ƛ (rename (ext ρ) N) ↓ v</code>.</p><ul><li><p>Rule <code>↦-intro</code>: To satisfy the premise of the induction hypothesis, we prove that the renaming can be extended to be a mapping from <code>γ , v</code> to <code>δ , v</code>.</p></li><li><p>Rule <code>⊥-intro</code>: We simply apply <code>⊥-intro</code>.</p></li><li><p>Rule <code>⊔-intro</code>: We apply the induction hypotheses and <code>⊔-intro</code>.</p></li><li><p>Rule <code>sub</code>: We apply the induction hypothesis and <code>sub</code>.</p></li></ul></li><li><p>If it is an application <code>L · M</code>, we have <code>rename ρ (L · M) = (rename ρ L) · (rename ρ M)</code>. We proceed by cases on <code>δ ⊢ (rename ρ L) · (rename ρ M) ↓ v</code> and all the cases are straightforward.</p></li></ul><p>In the upcoming uses of <code>rename-reflect</code>, the renaming will always be the increment function. So we prove a corollary for that special case.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-rename-inc-reflect"></a><a id="plfa_plfa-part3-Soundness-11108" href="../Soundness/#plfa_plfa-part3-Soundness-11108" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-11127" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11129" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-11131" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11132" href="../Soundness/#plfa_plfa-part3-Soundness-11132" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11134" href="../Soundness/#plfa_plfa-part3-Soundness-11134" class="Bound">v′</a> <a id="plfa_plfa-part3-Soundness-11137" href="../Soundness/#plfa_plfa-part3-Soundness-11137" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-11138" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11140" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11141" href="../Soundness/#plfa_plfa-part3-Soundness-11141" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11143" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11145" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-11149" href="../Soundness/#plfa_plfa-part3-Soundness-11132" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-11150" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11152" class="Symbol">{</a> <a id="plfa_plfa-part3-Soundness-11154" href="../Soundness/#plfa_plfa-part3-Soundness-11154" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-11156" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11158" href="../Soundness/#plfa_plfa-part3-Soundness-11132" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11160" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-11162" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-11163" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-11167" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11169" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11170" href="../Soundness/#plfa_plfa-part3-Soundness-11141" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11172" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-11175" href="../Soundness/#plfa_plfa-part3-Soundness-11134" class="Bound">v′</a><a id="plfa_plfa-part3-Soundness-11177" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11179" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-11181" href="../Untyped/#plfa_plfa-part2-Untyped-8231" class="Function">rename</a> <a id="plfa_plfa-part3-Soundness-11188" href="../Untyped/#plfa_plfa-part2-Untyped-4769" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part3-Soundness-11191" href="../Soundness/#plfa_plfa-part3-Soundness-11154" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-11193" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-11195" href="../Soundness/#plfa_plfa-part3-Soundness-11137" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-11201" class="Comment">----------------------------</a>
  <a id="plfa_plfa-part3-Soundness-11232" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11234" href="../Soundness/#plfa_plfa-part3-Soundness-11141" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11236" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-11238" href="../Soundness/#plfa_plfa-part3-Soundness-11154" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-11240" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-11242" href="../Soundness/#plfa_plfa-part3-Soundness-11137" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-11244" href="../Soundness/#plfa_plfa-part3-Soundness-11108" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-11263" href="../Soundness/#plfa_plfa-part3-Soundness-11263" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-11265" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-11267" href="../Soundness/#plfa_plfa-part3-Soundness-8982" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-11282" href="../Denotational/#plfa_plfa-part3-Denotational-8466" class="Function">`⊑-refl</a> <a id="plfa_plfa-part3-Soundness-11290" href="../Soundness/#plfa_plfa-part3-Soundness-11263" class="Bound">d</a>
</pre><h3 id="substitution-reflects-denotations-the-variable-case">Substitution reflects denotations, the variable case</h3><p>We are almost ready to begin proving that simultaneous substitution reflects denotations. That is, if <code>γ ⊢ (subst σ M) ↓ v</code>, then <code>γ ⊢ σ k ↓ δ k</code> and <code>δ ⊢ M ↓ v</code> for any <code>k</code> and some <code>δ</code>. We shall start with the case in which <code>M</code> is a variable <code>x</code>. So instead the premise is <code>γ ⊢ σ x ↓ v</code> and we need to show that <code>δ ⊢ ` x ↓ v</code> for some <code>δ</code>. The <code>δ</code> that we choose shall be the environment that maps <code>x</code> to <code>v</code> and every other variable to <code>⊥</code>.</p><p>Next we define the environment that maps <code>x</code> to <code>v</code> and every other variable to <code>⊥</code>, that is <code>const-env x v</code>. To tell variables apart, we define the following function for deciding equality of variables.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-_var≟_"></a><a id="plfa_plfa-part3-Soundness-12018" href="../Soundness/#plfa_plfa-part3-Soundness-12018" class="Function Operator">_var≟_</a> <a id="plfa_plfa-part3-Soundness-12025" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12027" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-12029" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12030" href="../Soundness/#plfa_plfa-part3-Soundness-12030" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12031" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12033" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12035" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12036" href="../Soundness/#plfa_plfa-part3-Soundness-12036" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12038" href="../Soundness/#plfa_plfa-part3-Soundness-12038" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-12040" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12042" href="../Soundness/#plfa_plfa-part3-Soundness-12030" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-12044" href="../Untyped/#plfa_plfa-part2-Untyped-4688" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-12046" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-12047" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12049" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12051" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1511" class="Record">Dec</a> <a id="plfa_plfa-part3-Soundness-12055" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12056" href="../Soundness/#plfa_plfa-part3-Soundness-12036" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12058" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-12060" href="../Soundness/#plfa_plfa-part3-Soundness-12038" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-12061" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-12063" href="../Untyped/#plfa_plfa-part2-Untyped-4724" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-12065" href="../Soundness/#plfa_plfa-part3-Soundness-12018" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12070" href="../Untyped/#plfa_plfa-part2-Untyped-4724" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-12073" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12076" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12080" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-12085" href="../Untyped/#plfa_plfa-part2-Untyped-4724" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-12087" href="../Soundness/#plfa_plfa-part3-Soundness-12018" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12092" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12093" href="../Untyped/#plfa_plfa-part2-Untyped-4769" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-12095" class="Symbol">_)</a>  <a id="plfa_plfa-part3-Soundness-12099" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12102" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-12105" class="Symbol">λ()</a>
<a id="plfa_plfa-part3-Soundness-12109" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12110" href="../Untyped/#plfa_plfa-part2-Untyped-4769" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-12112" class="Symbol">_)</a> <a id="plfa_plfa-part3-Soundness-12115" href="../Soundness/#plfa_plfa-part3-Soundness-12018" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12120" href="../Untyped/#plfa_plfa-part2-Untyped-4724" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-12123" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12126" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-12129" class="Symbol">λ()</a>
<a id="plfa_plfa-part3-Soundness-12133" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12134" href="../Untyped/#plfa_plfa-part2-Untyped-4769" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-12136" href="../Soundness/#plfa_plfa-part3-Soundness-12136" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12137" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12139" href="../Soundness/#plfa_plfa-part3-Soundness-12018" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12144" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12145" href="../Untyped/#plfa_plfa-part2-Untyped-4769" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-12147" href="../Soundness/#plfa_plfa-part3-Soundness-12147" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-12148" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12150" class="Keyword">with</a>  <a id="plfa_plfa-part3-Soundness-12156" href="../Soundness/#plfa_plfa-part3-Soundness-12136" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12158" href="../Soundness/#plfa_plfa-part3-Soundness-12018" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12163" href="../Soundness/#plfa_plfa-part3-Soundness-12147" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-12165" class="Symbol">...</a>                 <a id="plfa_plfa-part3-Soundness-12185" class="Symbol">|</a>  <a id="plfa_plfa-part3-Soundness-12188" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12192" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-12197" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12200" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12204" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-12209" class="Symbol">...</a>                 <a id="plfa_plfa-part3-Soundness-12229" class="Symbol">|</a>  <a id="plfa_plfa-part3-Soundness-12232" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-12235" href="../Soundness/#plfa_plfa-part3-Soundness-12235" class="Bound">neq</a>   <a id="plfa_plfa-part3-Soundness-12241" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12244" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-12247" class="Symbol">λ{</a><a id="plfa_plfa-part3-Soundness-12249" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-12254" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12256" href="../Soundness/#plfa_plfa-part3-Soundness-12235" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-12260" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-12264" class="Symbol">}</a>

<a id="plfa_plfa-part3-Soundness-var≟-refl"></a><a id="plfa_plfa-part3-Soundness-12267" href="../Soundness/#plfa_plfa-part3-Soundness-12267" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-12277" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12279" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-12281" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12282" href="../Soundness/#plfa_plfa-part3-Soundness-12282" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12283" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12285" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12286" href="../Soundness/#plfa_plfa-part3-Soundness-12286" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12288" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12290" href="../Soundness/#plfa_plfa-part3-Soundness-12282" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-12292" href="../Untyped/#plfa_plfa-part2-Untyped-4688" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-12294" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-12295" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12297" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12299" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12300" href="../Soundness/#plfa_plfa-part3-Soundness-12286" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12302" href="../Soundness/#plfa_plfa-part3-Soundness-12018" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12307" href="../Soundness/#plfa_plfa-part3-Soundness-12286" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12308" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12310" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-12312" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12316" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-12321" href="../Soundness/#plfa_plfa-part3-Soundness-12267" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-12331" href="../Untyped/#plfa_plfa-part2-Untyped-4724" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-12333" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12335" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-12340" href="../Soundness/#plfa_plfa-part3-Soundness-12267" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-12350" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12351" href="../Untyped/#plfa_plfa-part2-Untyped-4769" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-12353" href="../Soundness/#plfa_plfa-part3-Soundness-12353" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12354" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12356" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-12364" href="../Soundness/#plfa_plfa-part3-Soundness-12267" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-12374" href="../Soundness/#plfa_plfa-part3-Soundness-12353" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12376" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12378" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre><p>Now we use <code>var≟</code> to define <code>const-env</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-const-env"></a><a id="plfa_plfa-part3-Soundness-12438" href="../Soundness/#plfa_plfa-part3-Soundness-12438" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-12448" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12450" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-12452" href="../Soundness/#plfa_plfa-part3-Soundness-12452" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12453" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12455" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12457" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12458" href="../Soundness/#plfa_plfa-part3-Soundness-12458" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12460" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12462" href="../Soundness/#plfa_plfa-part3-Soundness-12452" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-12464" href="../Untyped/#plfa_plfa-part2-Untyped-4688" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-12466" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-12467" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12469" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12471" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-12477" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12479" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-12483" href="../Soundness/#plfa_plfa-part3-Soundness-12452" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Soundness-12485" href="../Soundness/#plfa_plfa-part3-Soundness-12438" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-12495" href="../Soundness/#plfa_plfa-part3-Soundness-12495" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12497" href="../Soundness/#plfa_plfa-part3-Soundness-12497" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-12499" href="../Soundness/#plfa_plfa-part3-Soundness-12499" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-12501" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-12506" href="../Soundness/#plfa_plfa-part3-Soundness-12495" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12508" href="../Soundness/#plfa_plfa-part3-Soundness-12018" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12513" href="../Soundness/#plfa_plfa-part3-Soundness-12499" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-12515" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-12531" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-12533" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12537" class="Symbol">_</a>       <a id="plfa_plfa-part3-Soundness-12545" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12547" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-12549" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-12565" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-12567" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-12570" class="Symbol">_</a>        <a id="plfa_plfa-part3-Soundness-12579" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12581" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a>
</pre><p>Of course, <code>const-env x v</code> maps <code>x</code> to value <code>v</code></p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-same-const-env"></a><a id="plfa_plfa-part3-Soundness-12646" href="../Soundness/#plfa_plfa-part3-Soundness-12646" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-12661" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12663" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-12665" href="../Soundness/#plfa_plfa-part3-Soundness-12665" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12666" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12668" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12669" href="../Soundness/#plfa_plfa-part3-Soundness-12669" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12671" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12673" href="../Soundness/#plfa_plfa-part3-Soundness-12665" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-12675" href="../Untyped/#plfa_plfa-part2-Untyped-4688" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-12677" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-12678" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12680" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12681" href="../Soundness/#plfa_plfa-part3-Soundness-12681" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-12682" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12684" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12686" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12687" href="../Soundness/#plfa_plfa-part3-Soundness-12438" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-12697" href="../Soundness/#plfa_plfa-part3-Soundness-12669" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12699" href="../Soundness/#plfa_plfa-part3-Soundness-12681" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-12700" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12702" href="../Soundness/#plfa_plfa-part3-Soundness-12669" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12704" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-12706" href="../Soundness/#plfa_plfa-part3-Soundness-12681" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-12708" href="../Soundness/#plfa_plfa-part3-Soundness-12646" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-12723" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12724" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-12726" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12728" href="../Soundness/#plfa_plfa-part3-Soundness-12728" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12729" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12731" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-12739" href="../Soundness/#plfa_plfa-part3-Soundness-12267" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-12749" href="../Soundness/#plfa_plfa-part3-Soundness-12728" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12751" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12753" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre><p>and <code>const-env x v</code> maps <code>y</code> to <code>⊥, so long as</code>x ≢ y`.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-diff-const-env"></a><a id="plfa_plfa-part3-Soundness-12828" href="../Soundness/#plfa_plfa-part3-Soundness-12828" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-12843" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12845" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-12847" href="../Soundness/#plfa_plfa-part3-Soundness-12847" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12848" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12850" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12851" href="../Soundness/#plfa_plfa-part3-Soundness-12851" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12853" href="../Soundness/#plfa_plfa-part3-Soundness-12853" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-12855" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12857" href="../Soundness/#plfa_plfa-part3-Soundness-12847" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-12859" href="../Untyped/#plfa_plfa-part2-Untyped-4688" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-12861" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-12862" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12864" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12865" href="../Soundness/#plfa_plfa-part3-Soundness-12865" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-12866" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-12870" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12872" href="../Soundness/#plfa_plfa-part3-Soundness-12851" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12874" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#830" class="Function Operator">≢</a> <a id="plfa_plfa-part3-Soundness-12876" href="../Soundness/#plfa_plfa-part3-Soundness-12853" class="Bound">y</a>
    <a id="plfa_plfa-part3-Soundness-12882" class="Comment">-------------------</a>
  <a id="plfa_plfa-part3-Soundness-12904" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12906" href="../Soundness/#plfa_plfa-part3-Soundness-12438" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-12916" href="../Soundness/#plfa_plfa-part3-Soundness-12851" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12918" href="../Soundness/#plfa_plfa-part3-Soundness-12865" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-12920" href="../Soundness/#plfa_plfa-part3-Soundness-12853" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-12922" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-12924" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a>
<a id="plfa_plfa-part3-Soundness-12926" href="../Soundness/#plfa_plfa-part3-Soundness-12828" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-12941" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12942" href="../Soundness/#plfa_plfa-part3-Soundness-12942" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12943" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12945" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12946" href="../Soundness/#plfa_plfa-part3-Soundness-12946" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12947" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12949" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12950" href="../Soundness/#plfa_plfa-part3-Soundness-12950" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-12951" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12953" href="../Soundness/#plfa_plfa-part3-Soundness-12953" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-12957" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-12962" href="../Soundness/#plfa_plfa-part3-Soundness-12946" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12964" href="../Soundness/#plfa_plfa-part3-Soundness-12018" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12969" href="../Soundness/#plfa_plfa-part3-Soundness-12950" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-12971" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-12976" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-12978" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12982" href="../Soundness/#plfa_plfa-part3-Soundness-12982" class="Bound">eq</a>  <a id="plfa_plfa-part3-Soundness-12986" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12989" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Empty.html#628" class="Function">⊥-elim</a> <a id="plfa_plfa-part3-Soundness-12996" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12997" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-13001" href="../Soundness/#plfa_plfa-part3-Soundness-12982" class="Bound">eq</a><a id="plfa_plfa-part3-Soundness-13003" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-13005" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-13010" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-13012" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-13015" class="Symbol">_</a>    <a id="plfa_plfa-part3-Soundness-13020" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-13023" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre><p>So we choose <code>const-env x v</code> for <code>δ</code> and obtain <code>δ ⊢ ` x ↓ v</code> with the <code>var</code> rule.</p><p>It remains to prove that <code>γ `⊢ σ ↓ δ</code> and <code>δ ⊢ M ↓ v</code> for any <code>k</code>, given that we have chosen <code>const-env x v</code> for <code>δ</code>. We shall have two cases to consider, <code>x ≡ y</code> or <code>x ≢ y</code>.</p><p>Now to finish the two cases of the proof.</p><ul><li>In the case where <code>x ≡ y</code>, we need to show that <code>γ ⊢ σ y ↓ v</code>, but that’s just our premise.</li><li>In the case where <code>x ≢ y,</code> we need to show that <code>γ ⊢ σ y ↓ ⊥</code>, which we do via rule <code>⊥-intro</code>.</li></ul><p>Thus, we have completed the variable case of the proof that simultaneous substitution reflects denotations. Here is the proof again, formally.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-reflect-var"></a><a id="plfa_plfa-part3-Soundness-13694" href="../Soundness/#plfa_plfa-part3-Soundness-13694" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-13712" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-13714" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-13716" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13717" href="../Soundness/#plfa_plfa-part3-Soundness-13717" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-13719" href="../Soundness/#plfa_plfa-part3-Soundness-13719" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-13720" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-13722" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13723" href="../Soundness/#plfa_plfa-part3-Soundness-13723" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-13725" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-13727" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-13731" href="../Soundness/#plfa_plfa-part3-Soundness-13719" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-13732" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-13734" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13735" href="../Soundness/#plfa_plfa-part3-Soundness-13735" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-13737" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-13739" href="../Soundness/#plfa_plfa-part3-Soundness-13717" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-13741" href="../Untyped/#plfa_plfa-part2-Untyped-4688" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-13743" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-13744" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-13746" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13747" href="../Soundness/#plfa_plfa-part3-Soundness-13747" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-13748" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-13750" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13751" href="../Soundness/#plfa_plfa-part3-Soundness-13751" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-13753" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-13755" href="../Substitution/#plfa_plfa-part2-Substitution-2341" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-13761" href="../Soundness/#plfa_plfa-part3-Soundness-13717" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-13763" href="../Soundness/#plfa_plfa-part3-Soundness-13719" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-13764" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-13768" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-13770" href="../Soundness/#plfa_plfa-part3-Soundness-13723" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-13772" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-13774" href="../Soundness/#plfa_plfa-part3-Soundness-13751" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-13776" href="../Soundness/#plfa_plfa-part3-Soundness-13735" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-13778" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-13780" href="../Soundness/#plfa_plfa-part3-Soundness-13747" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-13786" class="Comment">-----------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-13830" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-13832" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-13835" href="../Soundness/#plfa_plfa-part3-Soundness-13835" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-13837" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-13839" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-13843" href="../Soundness/#plfa_plfa-part3-Soundness-13717" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-13845" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-13847" href="../Soundness/#plfa_plfa-part3-Soundness-13723" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-13849" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-13852" href="../Soundness/#plfa_plfa-part3-Soundness-13751" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-13854" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-13856" href="../Soundness/#plfa_plfa-part3-Soundness-13835" class="Bound">δ</a>  <a id="plfa_plfa-part3-Soundness-13859" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-13862" href="../Soundness/#plfa_plfa-part3-Soundness-13835" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-13864" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-13866" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-13868" href="../Soundness/#plfa_plfa-part3-Soundness-13735" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-13870" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-13872" href="../Soundness/#plfa_plfa-part3-Soundness-13747" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-13874" href="../Soundness/#plfa_plfa-part3-Soundness-13694" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-13892" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13893" href="../Soundness/#plfa_plfa-part3-Soundness-13893" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-13894" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13896" href="../Soundness/#plfa_plfa-part3-Soundness-13896" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-13897" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13899" href="../Soundness/#plfa_plfa-part3-Soundness-13899" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-13900" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13902" href="../Soundness/#plfa_plfa-part3-Soundness-13902" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-13903" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13905" href="../Soundness/#plfa_plfa-part3-Soundness-13905" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-13906" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13908" href="../Soundness/#plfa_plfa-part3-Soundness-13908" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-13909" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-13911" href="../Soundness/#plfa_plfa-part3-Soundness-13911" class="Bound">xv</a>
  <a id="plfa_plfa-part3-Soundness-13916" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-13924" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-13928" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-13929" href="../Soundness/#plfa_plfa-part3-Soundness-12646" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-13944" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13945" href="../Soundness/#plfa_plfa-part3-Soundness-13893" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-13946" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13948" href="../Soundness/#plfa_plfa-part3-Soundness-13902" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-13949" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13951" href="../Soundness/#plfa_plfa-part3-Soundness-13905" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-13952" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-13955" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-13961" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-13963" href="../Soundness/#plfa_plfa-part3-Soundness-12438" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-13973" href="../Soundness/#plfa_plfa-part3-Soundness-13902" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-13975" href="../Soundness/#plfa_plfa-part3-Soundness-13905" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-13977" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-13979" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-13981" href="../Soundness/#plfa_plfa-part3-Soundness-14014" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-13994" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-13996" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-14000" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-14002" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Soundness-14006" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-14014" href="../Soundness/#plfa_plfa-part3-Soundness-14014" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-14027" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14029" href="../Soundness/#plfa_plfa-part3-Soundness-13899" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14031" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-14034" href="../Soundness/#plfa_plfa-part3-Soundness-13908" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14036" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14038" href="../Soundness/#plfa_plfa-part3-Soundness-12438" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-14048" href="../Soundness/#plfa_plfa-part3-Soundness-13902" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-14050" href="../Soundness/#plfa_plfa-part3-Soundness-13905" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-14054" href="../Soundness/#plfa_plfa-part3-Soundness-14014" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-14067" href="../Soundness/#plfa_plfa-part3-Soundness-14067" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-14069" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-14074" href="../Soundness/#plfa_plfa-part3-Soundness-13902" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-14076" href="../Soundness/#plfa_plfa-part3-Soundness-12018" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-14081" href="../Soundness/#plfa_plfa-part3-Soundness-14067" class="Bound">y</a>
  <a id="plfa_plfa-part3-Soundness-14085" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-14089" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-14091" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-14095" href="../Soundness/#plfa_plfa-part3-Soundness-14095" class="Bound">x≡y</a> <a id="plfa_plfa-part3-Soundness-14099" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-14107" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-14111" href="../Soundness/#plfa_plfa-part3-Soundness-14095" class="Bound">x≡y</a> <a id="plfa_plfa-part3-Soundness-14115" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-14117" href="../Soundness/#plfa_plfa-part3-Soundness-12646" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-14132" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14133" href="../Soundness/#plfa_plfa-part3-Soundness-13893" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-14134" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14136" href="../Soundness/#plfa_plfa-part3-Soundness-13902" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-14137" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14139" href="../Soundness/#plfa_plfa-part3-Soundness-13905" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-14140" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14142" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14144" href="../Soundness/#plfa_plfa-part3-Soundness-13911" class="Bound">xv</a>
  <a id="plfa_plfa-part3-Soundness-14149" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-14153" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-14155" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-14158" href="../Soundness/#plfa_plfa-part3-Soundness-14158" class="Bound">x≢y</a> <a id="plfa_plfa-part3-Soundness-14162" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-14170" href="../Soundness/#plfa_plfa-part3-Soundness-12828" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-14185" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14186" href="../Soundness/#plfa_plfa-part3-Soundness-13893" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-14187" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14189" href="../Soundness/#plfa_plfa-part3-Soundness-13902" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-14190" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14192" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-14193" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14195" href="../Soundness/#plfa_plfa-part3-Soundness-13905" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-14196" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14198" href="../Soundness/#plfa_plfa-part3-Soundness-14158" class="Bound">x≢y</a> <a id="plfa_plfa-part3-Soundness-14202" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14204" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
</pre><h3 id="substitutions-and-environment-construction">Substitutions and environment construction</h3><p>Every substitution produces terms that can evaluate to <code>⊥</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-⊥"></a><a id="plfa_plfa-part3-Soundness-14335" href="../Soundness/#plfa_plfa-part3-Soundness-14335" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-14343" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14345" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-14347" href="../Soundness/#plfa_plfa-part3-Soundness-14347" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14349" href="../Soundness/#plfa_plfa-part3-Soundness-14349" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14350" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14352" href="../Soundness/#plfa_plfa-part3-Soundness-14352" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14354" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14356" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-14360" href="../Soundness/#plfa_plfa-part3-Soundness-14349" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14361" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14363" href="../Soundness/#plfa_plfa-part3-Soundness-14363" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14365" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14367" href="../Substitution/#plfa_plfa-part2-Substitution-2341" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-14373" href="../Soundness/#plfa_plfa-part3-Soundness-14347" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14375" href="../Soundness/#plfa_plfa-part3-Soundness-14349" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14376" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Soundness-14382" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Soundness-14402" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14404" href="../Soundness/#plfa_plfa-part3-Soundness-14352" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14406" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-14409" href="../Soundness/#plfa_plfa-part3-Soundness-14363" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14411" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14413" href="../Denotational/#plfa_plfa-part3-Denotational-8174" class="Function">`⊥</a>
<a id="plfa_plfa-part3-Soundness-14416" href="../Soundness/#plfa_plfa-part3-Soundness-14335" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-14424" href="../Soundness/#plfa_plfa-part3-Soundness-14424" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-14426" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14428" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
</pre><p>If a substitution produces terms that evaluate to the values in both <code>γ₁</code> and <code>γ₂</code>, then those terms also evaluate to the values in <code>γ₁ ⊔ γ₂</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-⊔"></a><a id="plfa_plfa-part3-Soundness-14593" href="../Soundness/#plfa_plfa-part3-Soundness-14593" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-14601" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14603" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-14605" href="../Soundness/#plfa_plfa-part3-Soundness-14605" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14607" href="../Soundness/#plfa_plfa-part3-Soundness-14607" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14608" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14610" href="../Soundness/#plfa_plfa-part3-Soundness-14610" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14612" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14614" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-14618" href="../Soundness/#plfa_plfa-part3-Soundness-14607" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14619" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14621" href="../Soundness/#plfa_plfa-part3-Soundness-14621" class="Bound">γ₁</a> <a id="plfa_plfa-part3-Soundness-14624" href="../Soundness/#plfa_plfa-part3-Soundness-14624" class="Bound">γ₂</a> <a id="plfa_plfa-part3-Soundness-14627" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14629" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-14633" href="../Soundness/#plfa_plfa-part3-Soundness-14605" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-14634" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14636" href="../Soundness/#plfa_plfa-part3-Soundness-14636" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14638" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14640" href="../Substitution/#plfa_plfa-part2-Substitution-2341" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-14646" href="../Soundness/#plfa_plfa-part3-Soundness-14605" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14648" href="../Soundness/#plfa_plfa-part3-Soundness-14607" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14649" class="Symbol">}</a>
           <a id="plfa_plfa-part3-Soundness-14662" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14664" href="../Soundness/#plfa_plfa-part3-Soundness-14610" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14666" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-14669" href="../Soundness/#plfa_plfa-part3-Soundness-14636" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14671" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14673" href="../Soundness/#plfa_plfa-part3-Soundness-14621" class="Bound">γ₁</a>
           <a id="plfa_plfa-part3-Soundness-14687" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14689" href="../Soundness/#plfa_plfa-part3-Soundness-14610" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14691" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-14694" href="../Soundness/#plfa_plfa-part3-Soundness-14636" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14696" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14698" href="../Soundness/#plfa_plfa-part3-Soundness-14624" class="Bound">γ₂</a>
             <a id="plfa_plfa-part3-Soundness-14714" class="Comment">-------------------------</a>
           <a id="plfa_plfa-part3-Soundness-14751" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14753" href="../Soundness/#plfa_plfa-part3-Soundness-14610" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14755" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-14758" href="../Soundness/#plfa_plfa-part3-Soundness-14636" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14760" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14762" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14763" href="../Soundness/#plfa_plfa-part3-Soundness-14621" class="Bound">γ₁</a> <a id="plfa_plfa-part3-Soundness-14766" href="../Denotational/#plfa_plfa-part3-Denotational-8203" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-14769" href="../Soundness/#plfa_plfa-part3-Soundness-14624" class="Bound">γ₂</a><a id="plfa_plfa-part3-Soundness-14771" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-14773" href="../Soundness/#plfa_plfa-part3-Soundness-14593" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-14781" href="../Soundness/#plfa_plfa-part3-Soundness-14781" class="Bound">γ₁-ok</a> <a id="plfa_plfa-part3-Soundness-14787" href="../Soundness/#plfa_plfa-part3-Soundness-14787" class="Bound">γ₂-ok</a> <a id="plfa_plfa-part3-Soundness-14793" href="../Soundness/#plfa_plfa-part3-Soundness-14793" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-14795" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14797" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-14805" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14806" href="../Soundness/#plfa_plfa-part3-Soundness-14781" class="Bound">γ₁-ok</a> <a id="plfa_plfa-part3-Soundness-14812" href="../Soundness/#plfa_plfa-part3-Soundness-14793" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-14813" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-14815" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14816" href="../Soundness/#plfa_plfa-part3-Soundness-14787" class="Bound">γ₂-ok</a> <a id="plfa_plfa-part3-Soundness-14822" href="../Soundness/#plfa_plfa-part3-Soundness-14793" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-14823" class="Symbol">)</a>
</pre><h3 id="the-lambda-constructor-is-injective">The Lambda constructor is injective</h3><pre class="Agda"><a id="plfa_plfa-part3-Soundness-lambda-inj"></a><a id="plfa_plfa-part3-Soundness-14879" href="../Soundness/#plfa_plfa-part3-Soundness-14879" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-14890" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14892" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-14894" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14895" href="../Soundness/#plfa_plfa-part3-Soundness-14895" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-14896" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14898" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14899" href="../Soundness/#plfa_plfa-part3-Soundness-14899" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-14901" href="../Soundness/#plfa_plfa-part3-Soundness-14901" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-14903" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14905" href="../Soundness/#plfa_plfa-part3-Soundness-14895" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14907" href="../Untyped/#plfa_plfa-part2-Untyped-4199" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-14909" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-14911" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-14913" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-14915" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-14919" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14921" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a> <a id="plfa_plfa-part3-Soundness-14925" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14926" class="Argument">A</a> <a id="plfa_plfa-part3-Soundness-14928" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14930" href="../Soundness/#plfa_plfa-part3-Soundness-14895" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14932" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-14934" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-14935" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14937" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14938" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-14940" href="../Soundness/#plfa_plfa-part3-Soundness-14899" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-14941" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-14943" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14944" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-14946" href="../Soundness/#plfa_plfa-part3-Soundness-14901" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-14947" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Soundness-14953" class="Comment">---------------------------</a>
  <a id="plfa_plfa-part3-Soundness-14983" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14985" href="../Soundness/#plfa_plfa-part3-Soundness-14899" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-14987" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-14989" href="../Soundness/#plfa_plfa-part3-Soundness-14901" class="Bound">N</a>
<a id="plfa_plfa-part3-Soundness-14991" href="../Soundness/#plfa_plfa-part3-Soundness-14879" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-15002" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-15007" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15009" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre><h3 id="simultaneous-substitution-reflects-denotations">Simultaneous substitution reflects denotations</h3><p>In this section we prove a central lemma, that substitution reflects denotations. That is, if <code>γ ⊢ subst σ M ↓ v</code>, then <code>δ ⊢ M ↓ v</code> and <code>γ `⊢ σ ↓ δ</code> for some <code>δ</code>. We shall proceed by induction on the derivation of <code>γ ⊢ subst σ M ↓ v</code>. This requires a minor restatement of the lemma, changing the premise to <code>γ ⊢ L ↓ v</code> and <code>L ≡ subst σ M</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-split"></a><a id="plfa_plfa-part3-Soundness-15424" href="../Soundness/#plfa_plfa-part3-Soundness-15424" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-15430" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15432" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-15434" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15435" href="../Soundness/#plfa_plfa-part3-Soundness-15435" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-15436" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15438" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15439" href="../Soundness/#plfa_plfa-part3-Soundness-15439" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15441" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15443" href="../Soundness/#plfa_plfa-part3-Soundness-15435" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15445" href="../Untyped/#plfa_plfa-part2-Untyped-4199" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-15447" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-15449" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15451" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-15452" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15454" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15455" href="../Soundness/#plfa_plfa-part3-Soundness-15455" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15457" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15459" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-15463" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15464" href="../Soundness/#plfa_plfa-part3-Soundness-15435" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15466" href="../Untyped/#plfa_plfa-part2-Untyped-4199" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-15468" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-15469" class="Symbol">)}</a> <a id="plfa_plfa-part3-Soundness-15472" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15473" href="../Soundness/#plfa_plfa-part3-Soundness-15473" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-15474" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-15478" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15480" href="../Soundness/#plfa_plfa-part3-Soundness-15455" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15482" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15484" href="../Soundness/#plfa_plfa-part3-Soundness-15439" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15486" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-15488" href="../Soundness/#plfa_plfa-part3-Soundness-15473" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-15494" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part3-Soundness-15523" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15525" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15526" href="../Denotational/#plfa_plfa-part3-Denotational-7541" class="Function">init</a> <a id="plfa_plfa-part3-Soundness-15531" href="../Soundness/#plfa_plfa-part3-Soundness-15455" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15533" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-15536" href="../Denotational/#plfa_plfa-part3-Denotational-7596" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-15541" href="../Soundness/#plfa_plfa-part3-Soundness-15455" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-15542" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-15544" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15546" href="../Soundness/#plfa_plfa-part3-Soundness-15439" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15548" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-15550" href="../Soundness/#plfa_plfa-part3-Soundness-15473" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-15552" href="../Soundness/#plfa_plfa-part3-Soundness-15424" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-15558" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15559" class="Argument">δ</a> <a id="plfa_plfa-part3-Soundness-15561" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15563" href="../Soundness/#plfa_plfa-part3-Soundness-15563" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-15564" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15566" href="../Soundness/#plfa_plfa-part3-Soundness-15566" class="Bound">δMv</a> <a id="plfa_plfa-part3-Soundness-15570" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-15578" href="../Denotational/#plfa_plfa-part3-Denotational-7645" class="Function">init-last</a> <a id="plfa_plfa-part3-Soundness-15588" href="../Soundness/#plfa_plfa-part3-Soundness-15563" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15590" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15592" href="../Soundness/#plfa_plfa-part3-Soundness-15566" class="Bound">δMv</a>

<a id="plfa_plfa-part3-Soundness-subst-reflect"></a><a id="plfa_plfa-part3-Soundness-15597" href="../Soundness/#plfa_plfa-part3-Soundness-15597" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-15611" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15613" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-15615" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15616" href="../Soundness/#plfa_plfa-part3-Soundness-15616" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15618" href="../Soundness/#plfa_plfa-part3-Soundness-15618" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-15619" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15621" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15622" href="../Soundness/#plfa_plfa-part3-Soundness-15622" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15624" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15626" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-15630" href="../Soundness/#plfa_plfa-part3-Soundness-15618" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-15631" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15633" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15634" href="../Soundness/#plfa_plfa-part3-Soundness-15634" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15636" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15638" href="../Soundness/#plfa_plfa-part3-Soundness-15616" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15640" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15642" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-15643" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15645" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15646" href="../Soundness/#plfa_plfa-part3-Soundness-15646" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-15647" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15649" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15650" href="../Soundness/#plfa_plfa-part3-Soundness-15650" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-15652" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15654" href="../Soundness/#plfa_plfa-part3-Soundness-15618" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-15656" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15658" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-15659" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15661" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15662" href="../Soundness/#plfa_plfa-part3-Soundness-15662" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-15664" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15666" href="../Substitution/#plfa_plfa-part2-Substitution-2341" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-15672" href="../Soundness/#plfa_plfa-part3-Soundness-15616" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15674" href="../Soundness/#plfa_plfa-part3-Soundness-15618" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-15675" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-15679" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15681" href="../Soundness/#plfa_plfa-part3-Soundness-15622" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15683" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15685" href="../Soundness/#plfa_plfa-part3-Soundness-15650" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-15687" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-15689" href="../Soundness/#plfa_plfa-part3-Soundness-15646" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-15693" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15695" href="../Untyped/#plfa_plfa-part2-Untyped-9119" class="Function">subst</a> <a id="plfa_plfa-part3-Soundness-15701" href="../Soundness/#plfa_plfa-part3-Soundness-15662" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-15703" href="../Soundness/#plfa_plfa-part3-Soundness-15634" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15705" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-15707" href="../Soundness/#plfa_plfa-part3-Soundness-15650" class="Bound">L</a>
    <a id="plfa_plfa-part3-Soundness-15713" class="Comment">---------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-15755" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15757" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-15760" href="../Soundness/#plfa_plfa-part3-Soundness-15760" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-15762" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-15764" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-15768" href="../Soundness/#plfa_plfa-part3-Soundness-15616" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15770" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-15772" href="../Soundness/#plfa_plfa-part3-Soundness-15622" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15774" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-15777" href="../Soundness/#plfa_plfa-part3-Soundness-15662" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-15779" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-15781" href="../Soundness/#plfa_plfa-part3-Soundness-15760" class="Bound">γ</a>  <a id="plfa_plfa-part3-Soundness-15784" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-15787" href="../Soundness/#plfa_plfa-part3-Soundness-15760" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-15789" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15791" href="../Soundness/#plfa_plfa-part3-Soundness-15634" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15793" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-15795" href="../Soundness/#plfa_plfa-part3-Soundness-15646" class="Bound">v</a>

<a id="plfa_plfa-part3-Soundness-15798" href="../Soundness/#plfa_plfa-part3-Soundness-15597" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-15812" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15813" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-15815" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15817" href="../Soundness/#plfa_plfa-part3-Soundness-15817" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-15818" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-15820" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-15822" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15824" href="../Soundness/#plfa_plfa-part3-Soundness-15824" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-15825" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15827" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15828" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-15832" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15833" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-15835" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15837" href="../Soundness/#plfa_plfa-part3-Soundness-15837" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-15838" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-15841" href="../Soundness/#plfa_plfa-part3-Soundness-15841" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-15845" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-15850" href="../Soundness/#plfa_plfa-part3-Soundness-15817" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-15852" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-15856" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-15858" href="../Untyped/#plfa_plfa-part2-Untyped-5768" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-15860" href="../Soundness/#plfa_plfa-part3-Soundness-15860" class="Bound">x</a>  <a id="plfa_plfa-part3-Soundness-15863" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-15868" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-15872" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15873" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-15875" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15877" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-15878" class="Symbol">}</a>
<a id="plfa_plfa-part3-Soundness-15880" class="Symbol">...</a>           <a id="plfa_plfa-part3-Soundness-15894" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-15896" href="../Soundness/#plfa_plfa-part3-Soundness-15896" class="Bound">yv</a>  <a id="plfa_plfa-part3-Soundness-15900" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-15908" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-15912" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-15916" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15918" href="../Soundness/#plfa_plfa-part3-Soundness-13694" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-15936" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15937" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-15939" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15941" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-15942" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15944" href="../Soundness/#plfa_plfa-part3-Soundness-15896" class="Bound">yv</a>
<a id="plfa_plfa-part3-Soundness-15947" href="../Soundness/#plfa_plfa-part3-Soundness-15597" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-15961" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15962" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-15964" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15966" href="../Soundness/#plfa_plfa-part3-Soundness-15966" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-15967" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15969" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15970" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-15974" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15975" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-15977" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15979" href="../Soundness/#plfa_plfa-part3-Soundness-15979" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-15980" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-15983" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-15986" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-15988" href="../Soundness/#plfa_plfa-part3-Soundness-15988" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-15991" href="../Untyped/#plfa_plfa-part2-Untyped-5880" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-15993" href="../Soundness/#plfa_plfa-part3-Soundness-15993" class="Bound">M₂</a>
<a id="plfa_plfa-part3-Soundness-15996" href="../Soundness/#plfa_plfa-part3-Soundness-15597" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16010" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16011" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-16013" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16015" href="../Soundness/#plfa_plfa-part3-Soundness-16015" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-16016" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16018" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16019" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-16023" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16024" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-16026" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16028" href="../Soundness/#plfa_plfa-part3-Soundness-16028" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-16029" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-16032" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-16035" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16037" href="../Untyped/#plfa_plfa-part2-Untyped-5820" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-16039" href="../Soundness/#plfa_plfa-part3-Soundness-16039" class="Bound">M′</a>

<a id="plfa_plfa-part3-Soundness-16043" href="../Soundness/#plfa_plfa-part3-Soundness-15597" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16057" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16058" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-16060" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16062" href="../Soundness/#plfa_plfa-part3-Soundness-16062" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-16063" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16065" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16067" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16069" href="../Soundness/#plfa_plfa-part3-Soundness-16069" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16070" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16072" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16073" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-16080" href="../Soundness/#plfa_plfa-part3-Soundness-16080" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-16083" href="../Soundness/#plfa_plfa-part3-Soundness-16083" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-16085" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16087" href="../Soundness/#plfa_plfa-part3-Soundness-16087" class="Bound">eqL</a>
         <a id="plfa_plfa-part3-Soundness-16100" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16105" href="../Soundness/#plfa_plfa-part3-Soundness-16062" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-16107" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-16114" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16116" href="../Untyped/#plfa_plfa-part2-Untyped-5768" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-16118" href="../Soundness/#plfa_plfa-part3-Soundness-16118" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16120" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16125" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-16132" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-16135" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-16138" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-16145" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16147" href="../Soundness/#plfa_plfa-part3-Soundness-16147" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-16150" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-16158" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-16162" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-16166" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16168" href="../Soundness/#plfa_plfa-part3-Soundness-13694" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-16186" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16187" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16189" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16191" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16192" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16194" href="../Soundness/#plfa_plfa-part3-Soundness-16147" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-16197" href="../Soundness/#plfa_plfa-part3-Soundness-15597" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16211" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16212" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-16219" href="../Soundness/#plfa_plfa-part3-Soundness-16219" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-16222" href="../Soundness/#plfa_plfa-part3-Soundness-16222" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-16224" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16226" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-16229" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16231" href="../Untyped/#plfa_plfa-part2-Untyped-5820" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-16233" href="../Soundness/#plfa_plfa-part3-Soundness-16233" class="Bound">M′</a>
<a id="plfa_plfa-part3-Soundness-16236" href="../Soundness/#plfa_plfa-part3-Soundness-15597" class="Function">subst-reflect</a><a id="plfa_plfa-part3-Soundness-16249" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16250" href="../Soundness/#plfa_plfa-part3-Soundness-16250" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-16251" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16253" href="../Soundness/#plfa_plfa-part3-Soundness-16253" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-16254" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16256" href="../Soundness/#plfa_plfa-part3-Soundness-16256" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-16257" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16259" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16261" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16263" href="../Soundness/#plfa_plfa-part3-Soundness-16263" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16264" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16266" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16267" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-16274" href="../Soundness/#plfa_plfa-part3-Soundness-16274" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-16277" href="../Soundness/#plfa_plfa-part3-Soundness-16277" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-16279" class="Symbol">)</a>
   <a id="plfa_plfa-part3-Soundness-16284" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-16289" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16291" href="../Soundness/#plfa_plfa-part3-Soundness-16291" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-16294" href="../Untyped/#plfa_plfa-part2-Untyped-5880" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-16296" href="../Soundness/#plfa_plfa-part3-Soundness-16296" class="Bound">M₂</a>
     <a id="plfa_plfa-part3-Soundness-16304" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16309" href="../Soundness/#plfa_plfa-part3-Soundness-15597" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16323" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16324" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-16326" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16328" href="../Soundness/#plfa_plfa-part3-Soundness-16291" class="Bound">M₁</a><a id="plfa_plfa-part3-Soundness-16330" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16332" href="../Soundness/#plfa_plfa-part3-Soundness-16274" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-16335" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-16340" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16342" href="../Soundness/#plfa_plfa-part3-Soundness-15597" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16356" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16357" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-16359" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16361" href="../Soundness/#plfa_plfa-part3-Soundness-16296" class="Bound">M₂</a><a id="plfa_plfa-part3-Soundness-16363" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16365" href="../Soundness/#plfa_plfa-part3-Soundness-16277" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-16368" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-16373" class="Symbol">...</a>     <a id="plfa_plfa-part3-Soundness-16381" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16383" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16385" href="../Soundness/#plfa_plfa-part3-Soundness-16385" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-16388" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16390" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16392" href="../Soundness/#plfa_plfa-part3-Soundness-16392" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-16401" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16403" href="../Soundness/#plfa_plfa-part3-Soundness-16403" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-16406" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16408" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16410" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16412" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16414" href="../Soundness/#plfa_plfa-part3-Soundness-16414" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-16417" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16419" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16421" href="../Soundness/#plfa_plfa-part3-Soundness-16421" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-16430" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16432" href="../Soundness/#plfa_plfa-part3-Soundness-16432" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-16435" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16437" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16439" class="Symbol">=</a>
     <a id="plfa_plfa-part3-Soundness-16446" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16448" href="../Soundness/#plfa_plfa-part3-Soundness-16385" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-16451" href="../Denotational/#plfa_plfa-part3-Denotational-8203" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-16454" href="../Soundness/#plfa_plfa-part3-Soundness-16414" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-16457" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16459" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16461" href="../Soundness/#plfa_plfa-part3-Soundness-14593" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-16469" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16470" class="Argument">γ₁</a> <a id="plfa_plfa-part3-Soundness-16473" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16475" href="../Soundness/#plfa_plfa-part3-Soundness-16385" class="Bound">δ₁</a><a id="plfa_plfa-part3-Soundness-16477" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16479" class="Argument">γ₂</a> <a id="plfa_plfa-part3-Soundness-16482" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16484" href="../Soundness/#plfa_plfa-part3-Soundness-16414" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-16486" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16488" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16490" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16492" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16493" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16495" href="../Soundness/#plfa_plfa-part3-Soundness-16392" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-16504" href="../Soundness/#plfa_plfa-part3-Soundness-16421" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-16513" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a>
                    <a id="plfa_plfa-part3-Soundness-16535" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-16542" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16543" href="../Denotational/#plfa_plfa-part3-Denotational-25106" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-16549" href="../Soundness/#plfa_plfa-part3-Soundness-16403" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-16552" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16553" href="../Denotational/#plfa_plfa-part3-Denotational-8537" class="Function">⊑-env-conj-R1</a> <a id="plfa_plfa-part3-Soundness-16567" href="../Soundness/#plfa_plfa-part3-Soundness-16385" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-16570" href="../Soundness/#plfa_plfa-part3-Soundness-16414" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-16572" class="Symbol">))</a>
                           <a id="plfa_plfa-part3-Soundness-16602" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16603" href="../Denotational/#plfa_plfa-part3-Denotational-25106" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-16609" href="../Soundness/#plfa_plfa-part3-Soundness-16432" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-16612" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16613" href="../Denotational/#plfa_plfa-part3-Denotational-8643" class="Function">⊑-env-conj-R2</a> <a id="plfa_plfa-part3-Soundness-16627" href="../Soundness/#plfa_plfa-part3-Soundness-16385" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-16630" href="../Soundness/#plfa_plfa-part3-Soundness-16414" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-16632" class="Symbol">))</a> <a id="plfa_plfa-part3-Soundness-16635" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16637" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>

<a id="plfa_plfa-part3-Soundness-16640" href="../Soundness/#plfa_plfa-part3-Soundness-15597" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16654" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16655" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-16657" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16659" href="../Soundness/#plfa_plfa-part3-Soundness-16659" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-16660" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16662" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16664" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16666" href="../Soundness/#plfa_plfa-part3-Soundness-16666" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16667" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16669" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16670" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-16678" href="../Soundness/#plfa_plfa-part3-Soundness-16678" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-16679" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16681" href="../Soundness/#plfa_plfa-part3-Soundness-16681" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-16685" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16690" href="../Soundness/#plfa_plfa-part3-Soundness-16659" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-16692" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-16699" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16701" href="../Untyped/#plfa_plfa-part2-Untyped-5768" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-16703" href="../Soundness/#plfa_plfa-part3-Soundness-16703" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16705" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16710" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16711" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-16719" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-16720" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-16722" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-16738" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16740" href="../Soundness/#plfa_plfa-part3-Soundness-16740" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-16743" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-16751" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-16755" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-16759" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16761" href="../Soundness/#plfa_plfa-part3-Soundness-13694" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-16779" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16780" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16782" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16784" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16785" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16787" href="../Soundness/#plfa_plfa-part3-Soundness-16740" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-16790" href="../Soundness/#plfa_plfa-part3-Soundness-15597" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16804" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16805" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16807" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16809" href="../Soundness/#plfa_plfa-part3-Soundness-16809" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16810" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16812" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16813" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-16821" href="../Soundness/#plfa_plfa-part3-Soundness-16821" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-16822" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16824" href="../Soundness/#plfa_plfa-part3-Soundness-16824" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-16827" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16829" href="../Untyped/#plfa_plfa-part2-Untyped-5820" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-16831" href="../Soundness/#plfa_plfa-part3-Soundness-16831" class="Bound">M′</a>
      <a id="plfa_plfa-part3-Soundness-16840" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16845" href="../Soundness/#plfa_plfa-part3-Soundness-15597" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16859" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16860" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16862" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16864" href="../Untyped/#plfa_plfa-part2-Untyped-8758" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-16869" href="../Soundness/#plfa_plfa-part3-Soundness-16809" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16870" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16872" href="../Soundness/#plfa_plfa-part3-Soundness-16821" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-16874" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16875" href="../Soundness/#plfa_plfa-part3-Soundness-14879" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-16886" href="../Soundness/#plfa_plfa-part3-Soundness-16824" class="Bound">eq</a><a id="plfa_plfa-part3-Soundness-16888" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-16890" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-16894" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16896" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16898" href="../Soundness/#plfa_plfa-part3-Soundness-16898" class="Bound">δ′</a> <a id="plfa_plfa-part3-Soundness-16901" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16903" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16905" href="../Soundness/#plfa_plfa-part3-Soundness-16905" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-16915" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16917" href="../Soundness/#plfa_plfa-part3-Soundness-16917" class="Bound">m′</a> <a id="plfa_plfa-part3-Soundness-16920" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16922" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16924" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-16930" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16932" href="../Denotational/#plfa_plfa-part3-Denotational-7541" class="Function">init</a> <a id="plfa_plfa-part3-Soundness-16937" href="../Soundness/#plfa_plfa-part3-Soundness-16898" class="Bound">δ′</a> <a id="plfa_plfa-part3-Soundness-16940" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16942" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16944" class="Symbol">((λ</a> <a id="plfa_plfa-part3-Soundness-16948" href="../Soundness/#plfa_plfa-part3-Soundness-16948" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16950" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16952" href="../Soundness/#plfa_plfa-part3-Soundness-11108" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-16971" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16972" href="../Soundness/#plfa_plfa-part3-Soundness-16905" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-16982" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16983" href="../Untyped/#plfa_plfa-part2-Untyped-4769" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-16985" href="../Soundness/#plfa_plfa-part3-Soundness-16948" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-16986" class="Symbol">))))</a> <a id="plfa_plfa-part3-Soundness-16991" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a>
             <a id="plfa_plfa-part3-Soundness-17006" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-17014" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17015" href="../Denotational/#plfa_plfa-part3-Denotational-25555" class="Function">up-env</a> <a id="plfa_plfa-part3-Soundness-17022" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17023" href="../Soundness/#plfa_plfa-part3-Soundness-15424" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-17029" href="../Soundness/#plfa_plfa-part3-Soundness-16917" class="Bound">m′</a><a id="plfa_plfa-part3-Soundness-17031" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-17033" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17034" href="../Compositional/#plfa_plfa-part3-Compositional-9817" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-17042" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17043" href="../Soundness/#plfa_plfa-part3-Soundness-16905" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-17053" href="../Untyped/#plfa_plfa-part2-Untyped-4724" class="InductiveConstructor">Z</a><a id="plfa_plfa-part3-Soundness-17054" class="Symbol">)))</a> <a id="plfa_plfa-part3-Soundness-17058" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17060" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-17062" href="../Soundness/#plfa_plfa-part3-Soundness-15597" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17076" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17077" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-17085" href="../Soundness/#plfa_plfa-part3-Soundness-17085" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-17086" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-17088" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-17091" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17093" href="../Soundness/#plfa_plfa-part3-Soundness-17093" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-17096" href="../Untyped/#plfa_plfa-part2-Untyped-5880" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-17098" href="../Soundness/#plfa_plfa-part3-Soundness-17098" class="Bound">M₂</a>

<a id="plfa_plfa-part3-Soundness-17102" href="../Soundness/#plfa_plfa-part3-Soundness-15597" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17116" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17117" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17119" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17121" href="../Soundness/#plfa_plfa-part3-Soundness-17121" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17122" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17124" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-17132" href="../Soundness/#plfa_plfa-part3-Soundness-17132" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-17135" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-17141" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17143" href="../Denotational/#plfa_plfa-part3-Denotational-8174" class="Function">`⊥</a> <a id="plfa_plfa-part3-Soundness-17146" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17148" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17150" href="../Soundness/#plfa_plfa-part3-Soundness-14335" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-17158" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17159" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17161" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17163" href="../Soundness/#plfa_plfa-part3-Soundness-17121" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17164" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17166" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17168" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-17176" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17178" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>

<a id="plfa_plfa-part3-Soundness-17181" href="../Soundness/#plfa_plfa-part3-Soundness-15597" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17195" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17196" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17198" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17200" href="../Soundness/#plfa_plfa-part3-Soundness-17200" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17201" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17203" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17204" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-17212" href="../Soundness/#plfa_plfa-part3-Soundness-17212" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-17215" href="../Soundness/#plfa_plfa-part3-Soundness-17215" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-17217" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-17219" href="../Soundness/#plfa_plfa-part3-Soundness-17219" class="Bound">eq</a>
  <a id="plfa_plfa-part3-Soundness-17224" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-17229" href="../Soundness/#plfa_plfa-part3-Soundness-15597" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17243" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17244" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17246" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17248" href="../Soundness/#plfa_plfa-part3-Soundness-17200" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17249" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17251" href="../Soundness/#plfa_plfa-part3-Soundness-17212" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-17254" href="../Soundness/#plfa_plfa-part3-Soundness-17219" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-17257" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17259" href="../Soundness/#plfa_plfa-part3-Soundness-15597" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17273" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17274" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17276" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17278" href="../Soundness/#plfa_plfa-part3-Soundness-17200" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17279" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17281" href="../Soundness/#plfa_plfa-part3-Soundness-17215" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-17284" href="../Soundness/#plfa_plfa-part3-Soundness-17219" class="Bound">eq</a>
<a id="plfa_plfa-part3-Soundness-17287" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-17291" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17293" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17295" href="../Soundness/#plfa_plfa-part3-Soundness-17295" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-17298" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17300" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17302" href="../Soundness/#plfa_plfa-part3-Soundness-17302" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-17311" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17313" href="../Soundness/#plfa_plfa-part3-Soundness-17313" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-17316" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17318" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17320" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17322" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17324" href="../Soundness/#plfa_plfa-part3-Soundness-17324" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-17327" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17329" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17331" href="../Soundness/#plfa_plfa-part3-Soundness-17331" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-17340" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17342" href="../Soundness/#plfa_plfa-part3-Soundness-17342" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-17345" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17347" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17349" class="Symbol">=</a>
     <a id="plfa_plfa-part3-Soundness-17356" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17358" href="../Soundness/#plfa_plfa-part3-Soundness-17295" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-17361" href="../Denotational/#plfa_plfa-part3-Denotational-8203" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-17364" href="../Soundness/#plfa_plfa-part3-Soundness-17324" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-17367" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17369" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17371" href="../Soundness/#plfa_plfa-part3-Soundness-14593" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-17379" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17380" class="Argument">γ₁</a> <a id="plfa_plfa-part3-Soundness-17383" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17385" href="../Soundness/#plfa_plfa-part3-Soundness-17295" class="Bound">δ₁</a><a id="plfa_plfa-part3-Soundness-17387" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-17389" class="Argument">γ₂</a> <a id="plfa_plfa-part3-Soundness-17392" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17394" href="../Soundness/#plfa_plfa-part3-Soundness-17324" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-17396" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-17398" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17400" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17402" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17403" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17405" href="../Soundness/#plfa_plfa-part3-Soundness-17302" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-17414" href="../Soundness/#plfa_plfa-part3-Soundness-17331" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-17423" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a>
                    <a id="plfa_plfa-part3-Soundness-17445" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-17453" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17454" href="../Denotational/#plfa_plfa-part3-Denotational-25106" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-17460" href="../Soundness/#plfa_plfa-part3-Soundness-17313" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-17463" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17464" href="../Denotational/#plfa_plfa-part3-Denotational-8537" class="Function">⊑-env-conj-R1</a> <a id="plfa_plfa-part3-Soundness-17478" href="../Soundness/#plfa_plfa-part3-Soundness-17295" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-17481" href="../Soundness/#plfa_plfa-part3-Soundness-17324" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-17483" class="Symbol">))</a>
                            <a id="plfa_plfa-part3-Soundness-17514" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17515" href="../Denotational/#plfa_plfa-part3-Denotational-25106" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-17521" href="../Soundness/#plfa_plfa-part3-Soundness-17342" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-17524" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17525" href="../Denotational/#plfa_plfa-part3-Denotational-8643" class="Function">⊑-env-conj-R2</a> <a id="plfa_plfa-part3-Soundness-17539" href="../Soundness/#plfa_plfa-part3-Soundness-17295" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-17542" href="../Soundness/#plfa_plfa-part3-Soundness-17324" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-17544" class="Symbol">))</a> <a id="plfa_plfa-part3-Soundness-17547" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17549" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-17551" href="../Soundness/#plfa_plfa-part3-Soundness-15597" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17565" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17566" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-17570" href="../Soundness/#plfa_plfa-part3-Soundness-17570" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-17572" href="../Soundness/#plfa_plfa-part3-Soundness-17572" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-17574" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-17576" href="../Soundness/#plfa_plfa-part3-Soundness-17576" class="Bound">eq</a>
    <a id="plfa_plfa-part3-Soundness-17583" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-17588" href="../Soundness/#plfa_plfa-part3-Soundness-15597" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17602" href="../Soundness/#plfa_plfa-part3-Soundness-17570" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-17604" href="../Soundness/#plfa_plfa-part3-Soundness-17576" class="Bound">eq</a>
<a id="plfa_plfa-part3-Soundness-17607" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-17611" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17613" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17615" href="../Soundness/#plfa_plfa-part3-Soundness-17615" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-17617" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17619" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17621" href="../Soundness/#plfa_plfa-part3-Soundness-17621" class="Bound">subst-δ</a> <a id="plfa_plfa-part3-Soundness-17629" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17631" href="../Soundness/#plfa_plfa-part3-Soundness-17631" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-17633" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17635" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17637" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17639" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17641" href="../Soundness/#plfa_plfa-part3-Soundness-17615" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-17643" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17645" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17647" href="../Soundness/#plfa_plfa-part3-Soundness-17621" class="Bound">subst-δ</a> <a id="plfa_plfa-part3-Soundness-17655" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17657" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-17661" href="../Soundness/#plfa_plfa-part3-Soundness-17631" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-17663" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-17666" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17668" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
</pre><ul><li><p>Case <code>var</code>: We have subst <code>σ M ≡ y</code>, so <code>M</code> must also be a variable, say <code>x</code>. We apply the lemma <code>subst-reflect-var</code> to conclude.</p></li><li><p>Case <code>↦-elim</code>: We have <code>subst σ M ≡ L₁ · L₂</code>. We proceed by cases on <code>M</code>.</p><ul><li><p>Case <code>M ≡ ` x</code>: We apply the <code>subst-reflect-var</code> lemma again to conclude.</p></li><li><p>Case <code>M ≡ M₁ · M₂</code>: By the induction hypothesis, we have some <code>δ₁</code> and <code>δ₂</code> such that <code>δ₁ ⊢ M₁ ↓ v₁ ↦ v₃</code> and <code>γ `⊢ σ ↓ δ₁</code>, as well as <code>δ₂ ⊢ M₂ ↓ v₁</code> and <code>γ `⊢ σ ↓ δ₂</code>. By <code>⊑-env</code> we have <code>δ₁ ⊔ δ₂ ⊢ M₁ ↓ v₁ ↦ v₃</code> and <code>δ₁ ⊔ δ₂ ⊢ M₂ ↓ v₁</code> (using <code>⊑-env-conj-R1</code> and <code>⊑-env-conj-R2</code>), and therefore <code>δ₁ ⊔ δ₂ ⊢ M₁ · M₂ ↓ v₃</code>. We conclude this case by obtaining <code>γ `⊢ σ ↓ δ₁ ⊔ δ₂</code> by the <code>subst-⊔</code> lemma.</p></li></ul></li><li><p>Case <code>↦-intro</code>: We have <code>subst σ M ≡ ƛ L′</code>. We proceed by cases on <code>M</code>.</p><ul><li><p>Case <code>M ≡ x</code>: We apply the <code>subst-reflect-var</code> lemma.</p></li><li><p>Case <code>M ≡ ƛ M′</code>: By the induction hypothesis, we have <code>(δ′ , v′) ⊢ M′ ↓ v₂</code> and <code>(δ , v₁) ⊢ exts σ ↓ (δ′ , v′)</code>. From the later we have <code>(δ , v₁) ⊢ # 0 ↓ v′</code>. By the lemma <code>var-inv</code> we have <code>v′ ⊑ v₁</code>, so by the <code>up-env</code> lemma we have <code>(δ′ , v₁) ⊢ M′ ↓ v₂</code> and therefore <code>δ′ ⊢ ƛ M′ ↓ v₁ → v₂</code>. We also need to show that <code>δ</code>⊢ σ ↓ δ′<code>. Fix</code>k<code>. We have</code>(δ , v₁) ⊢ rename S_ σ k ↓ δ k′<code>. We then apply the lemma</code>rename-inc-reflect<code>to obtain</code>δ ⊢ σ k ↓ δ k′`, so this case is complete.</p></li></ul></li><li><p>Case <code>⊥-intro</code>: We choose <code>⊥</code> for <code>δ</code>. We have <code>⊥ ⊢ M ↓ ⊥</code> by <code>⊥-intro</code>. We have <code>δ `⊢ σ ↓ `⊥</code> by the lemma <code>subst-⊥</code>.</p></li><li><p>Case <code>⊔-intro</code>: By the induction hypothesis we have <code>δ₁ ⊢ M ↓ v₁</code>, <code>δ₂ ⊢ M ↓ v₂</code>, <code>δ `⊢ σ ↓ δ₁</code>, and <code>δ `⊢ σ ↓ δ₂</code>. We have <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₁</code> and <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₂</code> by <code>⊑-env</code> with <code>⊑-env-conj-R1</code> and <code>⊑-env-conj-R2</code>. So by <code>⊔-intro</code> we have <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₁ ⊔ v₂</code>. By <code>subst-⊔</code> we conclude that <code>δ `⊢ σ ↓ δ₁ ⊔ δ₂</code>.</p></li></ul><h3 id="single-substitution-reflects-denotations">Single substitution reflects denotations</h3><p>Most of the work is now behind us. We have proved that simultaneous substitution reflects denotations. Of course, β reduction uses single substitution, so we need a corollary that proves that single substitution reflects denotations. That is, given terms <code>N : (Γ , ★ ⊢ ★)</code> and <code>M : (Γ ⊢ ★)</code>, if <code>γ ⊢ N [ M ] ↓ w</code>, then <code>γ ⊢ M ↓ v</code> and <code>(γ , v) ⊢ N ↓ w</code> for some value <code>v</code>. We have <code>N [ M ] = subst (subst-zero M) N</code>.</p><p>We first prove a lemma about <code>subst-zero</code>, that if <code>δ ⊢ subst-zero M ↓ γ</code>, then <code>γ `⊑ (δ , w) × δ ⊢ M ↓ w</code> for some <code>w</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-zero-reflect"></a><a id="plfa_plfa-part3-Soundness-20145" href="../Soundness/#plfa_plfa-part3-Soundness-20145" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-20164" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20166" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-20168" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20169" href="../Soundness/#plfa_plfa-part3-Soundness-20169" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20170" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20172" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20173" href="../Soundness/#plfa_plfa-part3-Soundness-20173" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20175" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20177" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20181" href="../Soundness/#plfa_plfa-part3-Soundness-20169" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20182" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20184" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20185" href="../Soundness/#plfa_plfa-part3-Soundness-20185" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20187" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20189" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20193" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20194" href="../Soundness/#plfa_plfa-part3-Soundness-20169" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-20196" href="../Untyped/#plfa_plfa-part2-Untyped-4199" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20198" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20199" class="Symbol">)}</a> <a id="plfa_plfa-part3-Soundness-20202" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20203" href="../Soundness/#plfa_plfa-part3-Soundness-20203" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20205" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20207" href="../Soundness/#plfa_plfa-part3-Soundness-20169" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-20209" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20211" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20212" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-20216" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20218" href="../Soundness/#plfa_plfa-part3-Soundness-20173" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20220" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-20223" href="../Untyped/#plfa_plfa-part2-Untyped-9615" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-20234" href="../Soundness/#plfa_plfa-part3-Soundness-20203" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20236" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20238" href="../Soundness/#plfa_plfa-part3-Soundness-20185" class="Bound">γ</a>
    <a id="plfa_plfa-part3-Soundness-20244" class="Comment">----------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-20287" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20289" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-20292" href="../Soundness/#plfa_plfa-part3-Soundness-20292" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-20294" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-20296" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-20302" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-20304" href="../Soundness/#plfa_plfa-part3-Soundness-20185" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20306" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-20309" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20310" href="../Soundness/#plfa_plfa-part3-Soundness-20173" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20312" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-20315" href="../Soundness/#plfa_plfa-part3-Soundness-20292" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-20316" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-20318" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Soundness-20320" href="../Soundness/#plfa_plfa-part3-Soundness-20173" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20322" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20324" href="../Soundness/#plfa_plfa-part3-Soundness-20203" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20326" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20328" href="../Soundness/#plfa_plfa-part3-Soundness-20292" class="Bound">w</a>
<a id="plfa_plfa-part3-Soundness-20330" href="../Soundness/#plfa_plfa-part3-Soundness-20145" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-20349" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20350" class="Argument">δ</a> <a id="plfa_plfa-part3-Soundness-20352" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20354" href="../Soundness/#plfa_plfa-part3-Soundness-20354" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-20355" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20357" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20358" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-20360" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20362" href="../Soundness/#plfa_plfa-part3-Soundness-20362" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-20363" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20365" href="../Soundness/#plfa_plfa-part3-Soundness-20365" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-20369" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20371" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-20373" href="../Denotational/#plfa_plfa-part3-Denotational-7596" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-20378" href="../Soundness/#plfa_plfa-part3-Soundness-20362" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20380" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20382" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-20384" href="../Soundness/#plfa_plfa-part3-Soundness-20412" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-20390" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20392" href="../Soundness/#plfa_plfa-part3-Soundness-20365" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-20396" href="../Untyped/#plfa_plfa-part2-Untyped-4724" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-20398" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-20400" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Soundness-20404" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-20412" href="../Soundness/#plfa_plfa-part3-Soundness-20412" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-20418" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20420" href="../Soundness/#plfa_plfa-part3-Soundness-20362" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20422" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-20425" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20426" href="../Soundness/#plfa_plfa-part3-Soundness-20354" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20428" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-20431" href="../Denotational/#plfa_plfa-part3-Denotational-7596" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-20436" href="../Soundness/#plfa_plfa-part3-Soundness-20362" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-20437" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-20441" href="../Soundness/#plfa_plfa-part3-Soundness-20412" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-20447" href="../Untyped/#plfa_plfa-part2-Untyped-4724" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-20450" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-20453" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a>
  <a id="plfa_plfa-part3-Soundness-20462" href="../Soundness/#plfa_plfa-part3-Soundness-20412" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-20468" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20469" href="../Untyped/#plfa_plfa-part2-Untyped-4769" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-20471" href="../Soundness/#plfa_plfa-part3-Soundness-20471" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-20472" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-20474" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20476" href="../Compositional/#plfa_plfa-part3-Compositional-9817" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-20484" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20485" href="../Soundness/#plfa_plfa-part3-Soundness-20365" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-20489" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20490" href="../Untyped/#plfa_plfa-part2-Untyped-4769" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-20492" href="../Soundness/#plfa_plfa-part3-Soundness-20471" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-20493" class="Symbol">))</a>
</pre><p>We choose <code>w</code> to be the last value in <code>γ</code> and we obtain <code>δ ⊢ M ↓ w</code> by applying the premise to variable <code>Z</code>. Finally, to prove <code>γ `⊑ (δ , w)</code>, we prove a lemma by induction in the input variable. The base case is trivial because of our choice of <code>w</code>. In the induction case, <code>S x</code>, the premise <code>δ ⊢ subst-zero M ↓ γ</code> gives us <code>δ ⊢ x ↓ γ (S x)</code> and then using <code>var-inv</code> we conclude that <code>γ (S x) ⊑ (δ `, w) (S x)</code>.</p><p>Now to prove that substitution reflects denotations.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-substitution-reflect"></a><a id="plfa_plfa-part3-Soundness-20985" href="../Soundness/#plfa_plfa-part3-Soundness-20985" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-21006" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-21008" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-21010" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21011" href="../Soundness/#plfa_plfa-part3-Soundness-21011" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-21012" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21014" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21015" href="../Soundness/#plfa_plfa-part3-Soundness-21015" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-21017" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-21019" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-21023" href="../Soundness/#plfa_plfa-part3-Soundness-21011" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-21024" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21026" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21027" href="../Soundness/#plfa_plfa-part3-Soundness-21027" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-21029" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-21031" href="../Soundness/#plfa_plfa-part3-Soundness-21011" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-21033" href="../Untyped/#plfa_plfa-part2-Untyped-4199" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21035" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-21037" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21039" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-21040" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21042" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21043" href="../Soundness/#plfa_plfa-part3-Soundness-21043" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21045" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-21047" href="../Soundness/#plfa_plfa-part3-Soundness-21011" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-21049" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21051" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-21052" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21054" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21055" href="../Soundness/#plfa_plfa-part3-Soundness-21055" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-21056" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-21060" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-21062" href="../Soundness/#plfa_plfa-part3-Soundness-21015" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-21064" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21066" href="../Soundness/#plfa_plfa-part3-Soundness-21027" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-21068" href="../Untyped/#plfa_plfa-part2-Untyped-9731" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-21070" href="../Soundness/#plfa_plfa-part3-Soundness-21043" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21072" href="../Untyped/#plfa_plfa-part2-Untyped-9731" class="Function Operator">]</a> <a id="plfa_plfa-part3-Soundness-21074" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-21076" href="../Soundness/#plfa_plfa-part3-Soundness-21055" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-21082" class="Comment">------------------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-21133" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-21135" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-21138" href="../Soundness/#plfa_plfa-part3-Soundness-21138" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-21140" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-21142" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-21148" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-21150" href="../Soundness/#plfa_plfa-part3-Soundness-21015" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-21152" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21154" href="../Soundness/#plfa_plfa-part3-Soundness-21043" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21156" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-21158" href="../Soundness/#plfa_plfa-part3-Soundness-21138" class="Bound">w</a>  <a id="plfa_plfa-part3-Soundness-21161" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-21164" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21165" href="../Soundness/#plfa_plfa-part3-Soundness-21015" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-21167" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-21170" href="../Soundness/#plfa_plfa-part3-Soundness-21138" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-21171" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21173" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21175" href="../Soundness/#plfa_plfa-part3-Soundness-21027" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-21177" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-21179" href="../Soundness/#plfa_plfa-part3-Soundness-21055" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-21181" href="../Soundness/#plfa_plfa-part3-Soundness-20985" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-21202" href="../Soundness/#plfa_plfa-part3-Soundness-21202" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-21204" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21209" href="../Soundness/#plfa_plfa-part3-Soundness-15597" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21223" href="../Soundness/#plfa_plfa-part3-Soundness-21202" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-21225" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-21230" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-21235" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21237" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21239" href="../Soundness/#plfa_plfa-part3-Soundness-21239" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-21241" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21243" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21245" href="../Soundness/#plfa_plfa-part3-Soundness-21245" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-21249" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21251" href="../Soundness/#plfa_plfa-part3-Soundness-21251" class="Bound">γNv</a> <a id="plfa_plfa-part3-Soundness-21255" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21257" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21259" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21264" href="../Soundness/#plfa_plfa-part3-Soundness-20145" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-21283" href="../Soundness/#plfa_plfa-part3-Soundness-21245" class="Bound">δσγ</a>
<a id="plfa_plfa-part3-Soundness-21287" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-21294" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21296" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21298" href="../Soundness/#plfa_plfa-part3-Soundness-21298" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-21300" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21302" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21304" href="../Soundness/#plfa_plfa-part3-Soundness-21304" class="Bound">ineq</a> <a id="plfa_plfa-part3-Soundness-21309" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21311" href="../Soundness/#plfa_plfa-part3-Soundness-21311" class="Bound">δMw</a> <a id="plfa_plfa-part3-Soundness-21315" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21317" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21319" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21321" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21323" href="../Soundness/#plfa_plfa-part3-Soundness-21298" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-21325" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21327" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21329" href="../Soundness/#plfa_plfa-part3-Soundness-21311" class="Bound">δMw</a> <a id="plfa_plfa-part3-Soundness-21333" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21335" href="../Denotational/#plfa_plfa-part3-Denotational-25106" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-21341" class="Bound">γNv</a> <a id="plfa_plfa-part3-Soundness-21345" href="../Soundness/#plfa_plfa-part3-Soundness-21304" class="Bound">ineq</a> <a id="plfa_plfa-part3-Soundness-21350" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21352" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
</pre><p>We apply the <code>subst-reflect</code> lemma to obtain <code>δ ⊢ subst-zero M ↓ γ</code> and <code>γ ⊢ N ↓ v</code> for some <code>γ</code>. Using the former, the <code>subst-zero-reflect</code> lemma gives us <code>γ `⊑ (δ , w)</code> and <code>δ ⊢ M ↓ w</code>. We conclude that <code>δ , w ⊢ N ↓ v</code> by applying the <code>⊑-env</code> lemma, using <code>γ ⊢ N ↓ v</code> and <code>γ `⊑ (δ , w)</code>.</p><h3 id="reduction-reflects-denotations-1">Reduction reflects denotations</h3><p>Now that we have proved that substitution reflects denotations, we can easily prove that reduction does too.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-reflect-beta"></a><a id="plfa_plfa-part3-Soundness-21813" href="../Soundness/#plfa_plfa-part3-Soundness-21813" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-21826" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-21828" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-21830" href="../Soundness/#plfa_plfa-part3-Soundness-21830" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-21831" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21833" href="../Soundness/#plfa_plfa-part3-Soundness-21833" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-21835" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-21837" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-21841" href="../Soundness/#plfa_plfa-part3-Soundness-21830" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-21842" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21844" href="../Soundness/#plfa_plfa-part3-Soundness-21844" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21846" href="../Soundness/#plfa_plfa-part3-Soundness-21846" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-21847" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21849" href="../Soundness/#plfa_plfa-part3-Soundness-21849" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-21850" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Soundness-21856" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-21858" href="../Soundness/#plfa_plfa-part3-Soundness-21833" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-21860" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21862" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21863" href="../Soundness/#plfa_plfa-part3-Soundness-21846" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-21865" href="../Untyped/#plfa_plfa-part2-Untyped-9731" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-21867" href="../Soundness/#plfa_plfa-part3-Soundness-21844" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21869" href="../Untyped/#plfa_plfa-part2-Untyped-9731" class="Function Operator">]</a><a id="plfa_plfa-part3-Soundness-21870" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21872" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-21874" href="../Soundness/#plfa_plfa-part3-Soundness-21849" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-21880" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-21882" href="../Soundness/#plfa_plfa-part3-Soundness-21833" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-21884" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21886" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21887" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-21889" href="../Soundness/#plfa_plfa-part3-Soundness-21846" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-21890" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21892" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-21894" href="../Soundness/#plfa_plfa-part3-Soundness-21844" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21896" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-21898" href="../Soundness/#plfa_plfa-part3-Soundness-21849" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-21900" href="../Soundness/#plfa_plfa-part3-Soundness-21813" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-21913" href="../Soundness/#plfa_plfa-part3-Soundness-21913" class="Bound">d</a>
    <a id="plfa_plfa-part3-Soundness-21919" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21924" href="../Soundness/#plfa_plfa-part3-Soundness-20985" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-21945" href="../Soundness/#plfa_plfa-part3-Soundness-21913" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-21947" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-21951" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21953" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21955" href="../Soundness/#plfa_plfa-part3-Soundness-21955" class="Bound">v₂′</a> <a id="plfa_plfa-part3-Soundness-21959" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21961" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21963" href="../Soundness/#plfa_plfa-part3-Soundness-21963" class="Bound">d₁′</a> <a id="plfa_plfa-part3-Soundness-21967" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21969" href="../Soundness/#plfa_plfa-part3-Soundness-21969" class="Bound">d₂′</a> <a id="plfa_plfa-part3-Soundness-21973" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21975" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21977" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21979" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-21986" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21987" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21995" href="../Soundness/#plfa_plfa-part3-Soundness-21969" class="Bound">d₂′</a><a id="plfa_plfa-part3-Soundness-21998" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22000" href="../Soundness/#plfa_plfa-part3-Soundness-21963" class="Bound">d₁′</a>


<a id="plfa_plfa-part3-Soundness-reflect"></a><a id="plfa_plfa-part3-Soundness-22006" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22014" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-22016" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-22018" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22019" href="../Soundness/#plfa_plfa-part3-Soundness-22019" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-22020" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22022" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22023" href="../Soundness/#plfa_plfa-part3-Soundness-22023" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-22025" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-22027" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-22031" href="../Soundness/#plfa_plfa-part3-Soundness-22019" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-22032" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22034" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22035" href="../Soundness/#plfa_plfa-part3-Soundness-22035" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-22037" href="../Soundness/#plfa_plfa-part3-Soundness-22037" class="Bound">M′</a> <a id="plfa_plfa-part3-Soundness-22040" href="../Soundness/#plfa_plfa-part3-Soundness-22040" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-22042" href="../Soundness/#plfa_plfa-part3-Soundness-22042" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-22043" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-22047" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-22049" href="../Soundness/#plfa_plfa-part3-Soundness-22023" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-22051" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-22053" href="../Soundness/#plfa_plfa-part3-Soundness-22040" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-22055" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-22057" href="../Soundness/#plfa_plfa-part3-Soundness-22042" class="Bound">v</a>  <a id="plfa_plfa-part3-Soundness-22060" class="Symbol">→</a>  <a id="plfa_plfa-part3-Soundness-22063" href="../Soundness/#plfa_plfa-part3-Soundness-22035" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-22065" href="../Untyped/#plfa_plfa-part2-Untyped-12977" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-22068" href="../Soundness/#plfa_plfa-part3-Soundness-22037" class="Bound">M′</a>  <a id="plfa_plfa-part3-Soundness-22072" class="Symbol">→</a>   <a id="plfa_plfa-part3-Soundness-22076" href="../Soundness/#plfa_plfa-part3-Soundness-22037" class="Bound">M′</a> <a id="plfa_plfa-part3-Soundness-22079" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-22081" href="../Soundness/#plfa_plfa-part3-Soundness-22040" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-22087" class="Comment">---------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-22123" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-22125" href="../Soundness/#plfa_plfa-part3-Soundness-22023" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-22127" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-22129" href="../Soundness/#plfa_plfa-part3-Soundness-22035" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-22131" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-22133" href="../Soundness/#plfa_plfa-part3-Soundness-22042" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-22135" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22143" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-22147" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22148" href="../Untyped/#plfa_plfa-part2-Untyped-13027" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-22151" href="../Soundness/#plfa_plfa-part3-Soundness-22151" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22152" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22154" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22157" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22165" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-22169" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22170" href="../Untyped/#plfa_plfa-part2-Untyped-13117" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-22173" href="../Soundness/#plfa_plfa-part3-Soundness-22173" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22174" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22176" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22179" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a><a id="plfa_plfa-part3-Soundness-22186" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22187" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-22189" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22191" href="../Soundness/#plfa_plfa-part3-Soundness-22191" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-22192" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22194" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22195" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-22198" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22199" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-22201" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22203" href="../Soundness/#plfa_plfa-part3-Soundness-22203" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-22204" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-22207" href="../Untyped/#plfa_plfa-part2-Untyped-13207" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-22209" href="../Soundness/#plfa_plfa-part3-Soundness-22209" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-22216" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-22221" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-22224" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22225" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-22227" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22229" href="../Soundness/#plfa_plfa-part3-Soundness-22191" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-22230" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-22232" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-22234" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22236" href="../Soundness/#plfa_plfa-part3-Soundness-22203" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-22237" class="Symbol">}</a>
<a id="plfa_plfa-part3-Soundness-22239" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-22243" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22245" href="../Soundness/#plfa_plfa-part3-Soundness-22245" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-22248" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-22256" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-22260" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22263" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22265" href="../Soundness/#plfa_plfa-part3-Soundness-21813" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-22278" href="../Soundness/#plfa_plfa-part3-Soundness-22245" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-22281" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22289" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-22293" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22294" href="../Untyped/#plfa_plfa-part2-Untyped-13315" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-22296" href="../Soundness/#plfa_plfa-part3-Soundness-22296" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22297" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22299" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22302" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22310" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22311" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22318" href="../Soundness/#plfa_plfa-part3-Soundness-22318" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22321" href="../Soundness/#plfa_plfa-part3-Soundness-22321" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22323" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22325" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22326" href="../Untyped/#plfa_plfa-part2-Untyped-13027" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-22329" href="../Soundness/#plfa_plfa-part3-Soundness-22329" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22330" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22332" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-22337" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22339" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22346" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22347" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22355" href="../Soundness/#plfa_plfa-part3-Soundness-22318" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22358" href="../Soundness/#plfa_plfa-part3-Soundness-22329" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22360" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-22364" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22366" href="../Soundness/#plfa_plfa-part3-Soundness-22321" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-22369" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22377" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22378" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22385" href="../Soundness/#plfa_plfa-part3-Soundness-22385" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22388" href="../Soundness/#plfa_plfa-part3-Soundness-22388" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22390" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22392" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22393" href="../Untyped/#plfa_plfa-part2-Untyped-13117" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-22396" href="../Soundness/#plfa_plfa-part3-Soundness-22396" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22397" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22399" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-22404" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22406" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22413" href="../Soundness/#plfa_plfa-part3-Soundness-22385" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22416" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22417" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22425" href="../Soundness/#plfa_plfa-part3-Soundness-22388" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-22428" href="../Soundness/#plfa_plfa-part3-Soundness-22396" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22430" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-22434" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-22436" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22444" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22445" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22452" href="../Soundness/#plfa_plfa-part3-Soundness-22452" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22455" href="../Soundness/#plfa_plfa-part3-Soundness-22455" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22457" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22459" href="../Untyped/#plfa_plfa-part2-Untyped-13207" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-22461" href="../Soundness/#plfa_plfa-part3-Soundness-22461" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-22468" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-22473" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22480" href="../Soundness/#plfa_plfa-part3-Soundness-22452" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22483" href="../Soundness/#plfa_plfa-part3-Soundness-22455" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-22486" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-22490" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22492" href="../Soundness/#plfa_plfa-part3-Soundness-22492" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-22495" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-22503" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-22507" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22510" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22512" href="../Soundness/#plfa_plfa-part3-Soundness-21813" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-22525" href="../Soundness/#plfa_plfa-part3-Soundness-22492" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-22528" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22536" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22537" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22544" href="../Soundness/#plfa_plfa-part3-Soundness-22544" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22547" href="../Soundness/#plfa_plfa-part3-Soundness-22547" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22549" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22551" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22552" href="../Untyped/#plfa_plfa-part2-Untyped-13315" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-22554" href="../Soundness/#plfa_plfa-part3-Soundness-22554" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22555" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22557" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22560" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22568" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22569" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22577" href="../Soundness/#plfa_plfa-part3-Soundness-22577" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-22578" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22580" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22581" href="../Untyped/#plfa_plfa-part2-Untyped-13027" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-22584" href="../Soundness/#plfa_plfa-part3-Soundness-22584" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22585" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22587" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22590" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22598" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22599" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22607" href="../Soundness/#plfa_plfa-part3-Soundness-22607" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-22608" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22610" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22611" href="../Untyped/#plfa_plfa-part2-Untyped-13117" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-22614" href="../Soundness/#plfa_plfa-part3-Soundness-22614" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22615" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22617" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22620" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22628" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22629" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22637" href="../Soundness/#plfa_plfa-part3-Soundness-22637" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-22638" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22640" href="../Untyped/#plfa_plfa-part2-Untyped-13207" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-22642" href="../Soundness/#plfa_plfa-part3-Soundness-22642" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-22649" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-22654" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22662" href="../Soundness/#plfa_plfa-part3-Soundness-22637" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-22664" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-22668" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22670" href="../Soundness/#plfa_plfa-part3-Soundness-22670" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-22673" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-22681" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-22685" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22688" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22690" href="../Soundness/#plfa_plfa-part3-Soundness-21813" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-22703" href="../Soundness/#plfa_plfa-part3-Soundness-22670" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-22706" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22714" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22715" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22723" href="../Soundness/#plfa_plfa-part3-Soundness-22723" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-22724" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22726" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22727" href="../Untyped/#plfa_plfa-part2-Untyped-13315" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-22729" href="../Soundness/#plfa_plfa-part3-Soundness-22729" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22730" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22732" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-22737" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22739" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22747" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22748" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22756" href="../Soundness/#plfa_plfa-part3-Soundness-22723" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-22758" href="../Soundness/#plfa_plfa-part3-Soundness-22729" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22760" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-22764" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-22766" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22774" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-22782" href="../Soundness/#plfa_plfa-part3-Soundness-22782" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22784" href="../Soundness/#plfa_plfa-part3-Soundness-22784" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22787" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22789" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-22797" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22805" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22806" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-22814" href="../Soundness/#plfa_plfa-part3-Soundness-22814" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22817" href="../Soundness/#plfa_plfa-part3-Soundness-22817" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22819" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22821" href="../Soundness/#plfa_plfa-part3-Soundness-22821" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22823" href="../Soundness/#plfa_plfa-part3-Soundness-22823" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22826" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-22834" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-22838" href="../Soundness/#plfa_plfa-part3-Soundness-22823" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22841" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-22846" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-22854" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22855" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22863" href="../Soundness/#plfa_plfa-part3-Soundness-22814" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22866" href="../Soundness/#plfa_plfa-part3-Soundness-22821" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22868" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-22872" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22874" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22875" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22883" href="../Soundness/#plfa_plfa-part3-Soundness-22817" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-22886" href="../Soundness/#plfa_plfa-part3-Soundness-22821" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22888" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-22892" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-22894" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22902" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22903" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-22907" href="../Soundness/#plfa_plfa-part3-Soundness-22907" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-22909" href="../Soundness/#plfa_plfa-part3-Soundness-22909" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-22911" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22913" href="../Soundness/#plfa_plfa-part3-Soundness-22913" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22915" href="../Soundness/#plfa_plfa-part3-Soundness-22915" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22918" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22920" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-22924" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22925" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22933" href="../Soundness/#plfa_plfa-part3-Soundness-22907" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-22935" href="../Soundness/#plfa_plfa-part3-Soundness-22913" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22937" href="../Soundness/#plfa_plfa-part3-Soundness-22915" class="Bound">mn</a><a id="plfa_plfa-part3-Soundness-22939" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22941" href="../Soundness/#plfa_plfa-part3-Soundness-22909" class="Bound">lt</a>
</pre><h2 id="reduction-implies-denotational-equality">Reduction implies denotational equality</h2><p>We have proved that reduction both preserves and reflects denotations. Thus, reduction implies denotational equality.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-reduce-equal"></a><a id="plfa_plfa-part3-Soundness-23120" href="../Soundness/#plfa_plfa-part3-Soundness-23120" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-23133" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23135" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-23137" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23138" href="../Soundness/#plfa_plfa-part3-Soundness-23138" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-23139" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23141" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23142" href="../Soundness/#plfa_plfa-part3-Soundness-23142" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23144" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23146" href="../Soundness/#plfa_plfa-part3-Soundness-23138" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-23148" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-23150" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-23151" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23153" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23154" href="../Soundness/#plfa_plfa-part3-Soundness-23154" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-23156" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23158" href="../Soundness/#plfa_plfa-part3-Soundness-23138" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-23160" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-23162" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-23163" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-23167" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23169" href="../Soundness/#plfa_plfa-part3-Soundness-23142" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23171" href="../Untyped/#plfa_plfa-part2-Untyped-12977" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-23174" href="../Soundness/#plfa_plfa-part3-Soundness-23154" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-23180" class="Comment">---------</a>
  <a id="plfa_plfa-part3-Soundness-23192" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23194" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-23196" href="../Soundness/#plfa_plfa-part3-Soundness-23142" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23198" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Soundness-23200" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-23202" href="../Soundness/#plfa_plfa-part3-Soundness-23154" class="Bound">N</a>
<a id="plfa_plfa-part3-Soundness-23204" href="../Soundness/#plfa_plfa-part3-Soundness-23120" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-23217" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23218" href="../Soundness/#plfa_plfa-part3-Soundness-23218" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-23219" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-23221" href="../Soundness/#plfa_plfa-part3-Soundness-23221" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-23222" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-23224" href="../Soundness/#plfa_plfa-part3-Soundness-23224" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-23225" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23227" href="../Soundness/#plfa_plfa-part3-Soundness-23227" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-23229" href="../Soundness/#plfa_plfa-part3-Soundness-23229" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-23231" href="../Soundness/#plfa_plfa-part3-Soundness-23231" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-23233" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-23239" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-23241" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-23244" href="../Soundness/#plfa_plfa-part3-Soundness-23244" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-23246" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23248" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-23257" href="../Soundness/#plfa_plfa-part3-Soundness-23244" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-23259" href="../Soundness/#plfa_plfa-part3-Soundness-23227" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-23260" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23262" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-23264" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-23267" href="../Soundness/#plfa_plfa-part3-Soundness-23267" class="Bound">n</a> <a id="plfa_plfa-part3-Soundness-23269" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23271" href="../Soundness/#plfa_plfa-part3-Soundness-22006" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-23279" href="../Soundness/#plfa_plfa-part3-Soundness-23267" class="Bound">n</a> <a id="plfa_plfa-part3-Soundness-23281" href="../Soundness/#plfa_plfa-part3-Soundness-23227" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-23283" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-23287" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23289" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
</pre><p>We conclude with the <em>soundness property</em>, that multi-step reduction to a lambda abstraction implies denotational equivalence with a lambda abstraction.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-soundness"></a><a id="plfa_plfa-part3-Soundness-23458" href="../Soundness/#plfa_plfa-part3-Soundness-23458" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-23468" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23470" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-23472" href="../Soundness/#plfa_plfa-part3-Soundness-23472" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-23473" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23475" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23476" href="../Soundness/#plfa_plfa-part3-Soundness-23476" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23478" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23480" href="../Soundness/#plfa_plfa-part3-Soundness-23472" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-23482" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-23484" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-23485" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23487" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23488" href="../Soundness/#plfa_plfa-part3-Soundness-23488" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-23490" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23492" href="../Soundness/#plfa_plfa-part3-Soundness-23472" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-23494" href="../Untyped/#plfa_plfa-part2-Untyped-4199" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-23496" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-23498" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-23500" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-23501" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-23505" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23507" href="../Soundness/#plfa_plfa-part3-Soundness-23476" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23509" href="../Untyped/#plfa_plfa-part2-Untyped-14373" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part3-Soundness-23512" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-23514" href="../Soundness/#plfa_plfa-part3-Soundness-23488" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-23520" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Soundness-23540" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23542" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-23544" href="../Soundness/#plfa_plfa-part3-Soundness-23476" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23546" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Soundness-23548" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-23550" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-23551" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-23553" href="../Soundness/#plfa_plfa-part3-Soundness-23488" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-23554" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-23556" href="../Soundness/#plfa_plfa-part3-Soundness-23458" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-23566" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-23567" class="DottedPattern Symbol">.(</a><a id="plfa_plfa-part3-Soundness-23569" href="../Untyped/#plfa_plfa-part2-Untyped-5820" class="DottedPattern InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-23571" class="DottedPattern Symbol">_)</a> <a id="plfa_plfa-part3-Soundness-23574" href="../Untyped/#plfa_plfa-part2-Untyped-14423" class="InductiveConstructor Operator">∎</a><a id="plfa_plfa-part3-Soundness-23575" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23577" href="../Soundness/#plfa_plfa-part3-Soundness-23577" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-23579" href="../Soundness/#plfa_plfa-part3-Soundness-23579" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-23581" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-23583" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-23585" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-23588" href="../Soundness/#plfa_plfa-part3-Soundness-23588" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-23590" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23592" href="../Soundness/#plfa_plfa-part3-Soundness-23588" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-23593" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23595" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-23597" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-23600" href="../Soundness/#plfa_plfa-part3-Soundness-23600" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-23602" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23604" href="../Soundness/#plfa_plfa-part3-Soundness-23600" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-23605" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23607" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-23609" href="../Soundness/#plfa_plfa-part3-Soundness-23458" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-23619" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23620" href="../Soundness/#plfa_plfa-part3-Soundness-23620" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-23621" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23623" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-23624" href="../Soundness/#plfa_plfa-part3-Soundness-23624" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-23626" href="../Untyped/#plfa_plfa-part2-Untyped-14479" class="InductiveConstructor Operator">—→⟨</a> <a id="plfa_plfa-part3-Soundness-23630" href="../Soundness/#plfa_plfa-part3-Soundness-23630" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-23632" href="../Untyped/#plfa_plfa-part2-Untyped-14479" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-23634" href="../Soundness/#plfa_plfa-part3-Soundness-23634" class="Bound">M—↠N</a><a id="plfa_plfa-part3-Soundness-23638" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23640" href="../Soundness/#plfa_plfa-part3-Soundness-23640" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-23642" href="../Soundness/#plfa_plfa-part3-Soundness-23642" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-23644" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-23649" class="Keyword">let</a> <a id="plfa_plfa-part3-Soundness-23653" href="../Soundness/#plfa_plfa-part3-Soundness-23653" class="Bound">ih</a> <a id="plfa_plfa-part3-Soundness-23656" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-23658" href="../Soundness/#plfa_plfa-part3-Soundness-23458" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-23668" href="../Soundness/#plfa_plfa-part3-Soundness-23634" class="Bound">M—↠N</a> <a id="plfa_plfa-part3-Soundness-23673" class="Keyword">in</a>
   <a id="plfa_plfa-part3-Soundness-23679" class="Keyword">let</a> <a id="plfa_plfa-part3-Soundness-23683" href="../Soundness/#plfa_plfa-part3-Soundness-23683" class="Bound">e</a> <a id="plfa_plfa-part3-Soundness-23685" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-23687" href="../Soundness/#plfa_plfa-part3-Soundness-23120" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-23700" href="../Soundness/#plfa_plfa-part3-Soundness-23630" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-23702" class="Keyword">in</a>
   <a id="plfa_plfa-part3-Soundness-23708" href="../Denotational/#plfa_plfa-part3-Denotational-18004" class="Function">≃-trans</a> <a id="plfa_plfa-part3-Soundness-23716" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23717" href="../Soundness/#plfa_plfa-part3-Soundness-23620" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-23718" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23720" href="../Soundness/#plfa_plfa-part3-Soundness-23683" class="Bound">e</a> <a id="plfa_plfa-part3-Soundness-23722" href="../Soundness/#plfa_plfa-part3-Soundness-23653" class="Bound">ih</a> <a id="plfa_plfa-part3-Soundness-23725" href="../Soundness/#plfa_plfa-part3-Soundness-23640" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-23727" href="../Soundness/#plfa_plfa-part3-Soundness-23642" class="Bound">v</a>
</pre><h2 id="unicode">Unicode</h2><p>This chapter uses the following unicode:</p><pre><code>≟  U+225F  QUESTIONED EQUAL TO (\?=)</code></pre></div><nav class="pager"><ul class="pagination"><li><a class="pagelink" href="../Compositional/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Soundness.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Adequacy/">下一章</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">编程语言基础：Agda 描述</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>