<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-dJLJysMdqXtVegSgJLzVykvHbDNrQjmEoKen2rU7YiGMbNpIJIZA1D6HLml44nUJyUGPQ1vkYmT4t5PXKVuBxw==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-/ARdgOQa4vn2XAt4Y1F6NSxFACJwwEuz9pC9NZJHfA6M70ZLUlDoqqeh1kAoVZXgqSw2W4T4J1xuBba725O5/A==" title="Dark" id="stylesheet-dark" disabled><title>编程语言基础：Agda 描述 – BigStep</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">编程语言基础：Agda 描述</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">主页</a> <a class="page-link" href="../Announcements/">公告</a> <a class="page-link" href="../GettingStarted/">使用说明</a> <a class="page-link" href="../Citing/">引用</a> <a class="page-link" href="https://plfa.github.io/">English</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Confluence/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part2/BigStep.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Denotational/">下一章</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">BigStep: 无类型 λ-演算的大步语义</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part2-BigStep-109" class="Keyword">module</a> <a id="plfa_plfa-part2-BigStep-116" href="../BigStep/#" class="Module">plfa.part2.BigStep</a> <a id="plfa_plfa-part2-BigStep-135" class="Keyword">where</a>
</pre><h2 id="简介">简介</h2><p>传名调用求值策略（Call-by-name Evaluation Strategy）是在 λ-演算中计算程序值的一种确定性方法。 也就是说，传名调用能够求出值当且仅当 β-归约能将程序归约为一个 λ-抽象。 在这一章节，我们将定义传名调用求值并且证明这个等价命题的必要性。 充分性的部分较为复杂，通常通过 Curry-Feys 标准化证明。 根据 Plotkin 的工作，我们给出这个证明的概要， 但是由于这是指称语义的一个简单性质， 我们将在为 λ-演算发展出指称语义后在 Agda 中完整地证明它。</p><p>我们将传名调用策略表示为一个输入表达式与输出值间的关系。 因为这样的关系将输入表达式 <code>M</code> 和最终结果 <code>V</code> 直接相联系， 它通常被叫做<strong>大步语义（Big-stepsemantics）</strong>，写做 <code>M ⇓ V</code>。 而小步归约关系则被写做 <code>M —→ M′</code>，它仅通过一步子计算来将 <code>M</code> 归约为另一个表达式 <code>M′</code>。</p><h2 id="导入">导入</h2><pre class="Agda"><a id="plfa_plfa-part2-BigStep-1739" class="Keyword">open</a> <a id="plfa_plfa-part2-BigStep-1744" class="Keyword">import</a> <a id="plfa_plfa-part2-BigStep-1751" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
  <a id="plfa_plfa-part2-BigStep-1791" class="Keyword">using</a> <a id="plfa_plfa-part2-BigStep-1797" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-1798" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="plfa_plfa-part2-BigStep-1801" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1803" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-BigStep-1807" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1809" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Binary.PropositionalEquality.Core.html#1938" class="Function">trans</a><a id="plfa_plfa-part2-BigStep-1814" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1816" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a><a id="plfa_plfa-part2-BigStep-1819" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1821" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Binary.PropositionalEquality.Core.html#1670" class="Function">cong-app</a><a id="plfa_plfa-part2-BigStep-1829" class="Symbol">)</a>
<a id="plfa_plfa-part2-BigStep-1831" class="Keyword">open</a> <a id="plfa_plfa-part2-BigStep-1836" class="Keyword">import</a> <a id="plfa_plfa-part2-BigStep-1843" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html" class="Module">Data.Product.Base</a> <a id="plfa_plfa-part2-BigStep-1861" class="Keyword">using</a> <a id="plfa_plfa-part2-BigStep-1867" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-1868" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="plfa_plfa-part2-BigStep-1871" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1873" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="plfa_plfa-part2-BigStep-1874" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1876" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">Σ-syntax</a><a id="plfa_plfa-part2-BigStep-1884" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1886" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#852" class="Function">∃</a><a id="plfa_plfa-part2-BigStep-1887" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1889" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1371" class="Function">∃-syntax</a><a id="plfa_plfa-part2-BigStep-1897" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1899" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#636" class="Field">proj₁</a><a id="plfa_plfa-part2-BigStep-1904" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1906" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#650" class="Field">proj₂</a><a id="plfa_plfa-part2-BigStep-1911" class="Symbol">)</a>
  <a id="plfa_plfa-part2-BigStep-1915" class="Keyword">renaming</a> <a id="plfa_plfa-part2-BigStep-1924" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-1925" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part2-BigStep-1929" class="Symbol">to</a> <a id="plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part2-BigStep-1937" class="Symbol">)</a>
<a id="plfa_plfa-part2-BigStep-1939" class="Keyword">open</a> <a id="plfa_plfa-part2-BigStep-1944" class="Keyword">import</a> <a id="plfa_plfa-part2-BigStep-1951" href="https://agda.github.io/agda-stdlib/v2.2-dev/Function.Base.html" class="Module">Function.Base</a> <a id="plfa_plfa-part2-BigStep-1965" class="Keyword">using</a> <a id="plfa_plfa-part2-BigStep-1971" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-1972" href="https://agda.github.io/agda-stdlib/v2.2-dev/Function.Base.html#1115" class="Function Operator">_∘_</a><a id="plfa_plfa-part2-BigStep-1975" class="Symbol">)</a>
<a id="plfa_plfa-part2-BigStep-1977" class="Keyword">open</a> <a id="plfa_plfa-part2-BigStep-1982" class="Keyword">import</a> <a id="plfa_plfa-part2-BigStep-1989" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
  <a id="plfa_plfa-part2-BigStep-2010" class="Keyword">using</a> <a id="plfa_plfa-part2-BigStep-2016" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-2017" href="../Untyped/#plfa_plfa-part2-Untyped-3798" class="Datatype">Context</a><a id="plfa_plfa-part2-BigStep-2024" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2026" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part2-BigStep-2029" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2031" href="../Untyped/#plfa_plfa-part2-Untyped-4323" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part2-BigStep-2034" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2036" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-2037" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2039" href="../Untyped/#plfa_plfa-part2-Untyped-3820" class="InductiveConstructor">∅</a><a id="plfa_plfa-part2-BigStep-2040" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2042" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part2-BigStep-2045" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2047" href="../Untyped/#plfa_plfa-part2-Untyped-4359" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-BigStep-2048" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2050" href="../Untyped/#plfa_plfa-part2-Untyped-4404" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-BigStep-2052" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2054" href="../Untyped/#plfa_plfa-part2-Untyped-5402" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part2-BigStep-2056" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2058" href="../Untyped/#plfa_plfa-part2-Untyped-6440" class="Function Operator">#_</a><a id="plfa_plfa-part2-BigStep-2060" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2062" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part2-BigStep-2064" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2066" href="../Untyped/#plfa_plfa-part2-Untyped-5514" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part2-BigStep-2069" class="Symbol">;</a>
  <a id="plfa_plfa-part2-BigStep-2073" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a><a id="plfa_plfa-part2-BigStep-2078" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2080" href="../Untyped/#plfa_plfa-part2-Untyped-9407" class="Function">subst-zero</a><a id="plfa_plfa-part2-BigStep-2090" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2092" href="../Untyped/#plfa_plfa-part2-Untyped-8550" class="Function">exts</a><a id="plfa_plfa-part2-BigStep-2096" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2098" href="../Untyped/#plfa_plfa-part2-Untyped-8023" class="Function">rename</a><a id="plfa_plfa-part2-BigStep-2104" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2106" href="../Untyped/#plfa_plfa-part2-Untyped-13053" class="InductiveConstructor">β</a><a id="plfa_plfa-part2-BigStep-2107" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2109" href="../Untyped/#plfa_plfa-part2-Untyped-12873" class="InductiveConstructor">ξ₁</a><a id="plfa_plfa-part2-BigStep-2111" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2113" href="../Untyped/#plfa_plfa-part2-Untyped-12963" class="InductiveConstructor">ξ₂</a><a id="plfa_plfa-part2-BigStep-2115" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2117" href="../Untyped/#plfa_plfa-part2-Untyped-13161" class="InductiveConstructor">ζ</a><a id="plfa_plfa-part2-BigStep-2118" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2120" href="../Untyped/#plfa_plfa-part2-Untyped-12823" class="Datatype Operator">_—→_</a><a id="plfa_plfa-part2-BigStep-2124" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2126" href="../Untyped/#plfa_plfa-part2-Untyped-14217" class="Datatype Operator">_—↠_</a><a id="plfa_plfa-part2-BigStep-2130" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2132" href="../Untyped/#plfa_plfa-part2-Untyped-14405" class="InductiveConstructor Operator">_—→⟨_⟩_</a><a id="plfa_plfa-part2-BigStep-2139" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2141" href="../Untyped/#plfa_plfa-part2-Untyped-14263" class="InductiveConstructor Operator">_∎</a><a id="plfa_plfa-part2-BigStep-2143" class="Symbol">;</a>
  <a id="plfa_plfa-part2-BigStep-2147" href="../Untyped/#plfa_plfa-part2-Untyped-27426" class="Function">—↠-trans</a><a id="plfa_plfa-part2-BigStep-2155" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2157" href="../Untyped/#plfa_plfa-part2-Untyped-28959" class="Function">appL-cong</a><a id="plfa_plfa-part2-BigStep-2166" class="Symbol">)</a>
<a id="plfa_plfa-part2-BigStep-2168" class="Keyword">open</a> <a id="plfa_plfa-part2-BigStep-2173" class="Keyword">import</a> <a id="plfa_plfa-part2-BigStep-2180" href="../Substitution/#" class="Module">plfa.part2.Substitution</a> <a id="plfa_plfa-part2-BigStep-2204" class="Keyword">using</a> <a id="plfa_plfa-part2-BigStep-2210" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-2211" href="../Substitution/#plfa_plfa-part2-Substitution-2892" class="Function">Subst</a><a id="plfa_plfa-part2-BigStep-2216" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2218" href="../Substitution/#plfa_plfa-part2-Substitution-3772" class="Function">ids</a><a id="plfa_plfa-part2-BigStep-2221" class="Symbol">)</a>
</pre><h2 id="环境">环境</h2><p>为了处理变量和函数应用，我们要么像在 <code>—→</code> 中一样使用替换，要么使用一个<strong>环境（Environment）</strong>。 传名调用中的环境是一个从变量到闭包（即项与其对应的环境）的映射。 我们之所以使用环境取代替换是因为传名调用的核心更接近于语言的实现。 在后续章节中介绍的指称语义也会用到环境，而且对 adequacy 的证明也会变得更加容易。</p><p>我们如下定义环境和闭包。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-ClosEnv"></a><a id="plfa_plfa-part2-BigStep-3080" href="../BigStep/#plfa_plfa-part2-BigStep-3080" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3088" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3090" href="../Untyped/#plfa_plfa-part2-Untyped-3798" class="Datatype">Context</a> <a id="plfa_plfa-part2-BigStep-3098" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3100" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Primitive.html#388" class="Primitive">Set</a>

<a id="plfa_plfa-part2-BigStep-3105" class="Keyword">data</a> <a id="plfa_plfa-part2-BigStep-Clos"></a><a id="plfa_plfa-part2-BigStep-3110" href="../BigStep/#plfa_plfa-part2-BigStep-3110" class="Datatype">Clos</a> <a id="plfa_plfa-part2-BigStep-3115" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3117" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Primitive.html#388" class="Primitive">Set</a> <a id="plfa_plfa-part2-BigStep-3121" class="Keyword">where</a>
  <a id="plfa_plfa-part2-BigStep-Clos.clos"></a><a id="plfa_plfa-part2-BigStep-3129" href="../BigStep/#plfa_plfa-part2-BigStep-3129" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-3134" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3136" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-3138" href="../BigStep/#plfa_plfa-part2-BigStep-3138" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-3139" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-3141" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3143" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-3144" href="../BigStep/#plfa_plfa-part2-BigStep-3144" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-3146" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3148" href="../BigStep/#plfa_plfa-part2-BigStep-3138" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3150" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-3152" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-3153" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-3155" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3157" href="../BigStep/#plfa_plfa-part2-BigStep-3080" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3165" href="../BigStep/#plfa_plfa-part2-BigStep-3138" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3167" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3169" href="../BigStep/#plfa_plfa-part2-BigStep-3110" class="Datatype">Clos</a>

<a id="plfa_plfa-part2-BigStep-3175" href="../BigStep/#plfa_plfa-part2-BigStep-3080" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3183" href="../BigStep/#plfa_plfa-part2-BigStep-3183" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3185" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-3187" class="Symbol">∀</a> <a id="plfa_plfa-part2-BigStep-3189" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-3190" href="../BigStep/#plfa_plfa-part2-BigStep-3190" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-3192" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3194" href="../BigStep/#plfa_plfa-part2-BigStep-3183" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3196" href="../Untyped/#plfa_plfa-part2-Untyped-4323" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-BigStep-3198" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-3199" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-3201" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3203" href="../BigStep/#plfa_plfa-part2-BigStep-3110" class="Datatype">Clos</a>
</pre><p>通常，我们有空环境，也可以扩展一个环境。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-∅&#39;"></a><a id="plfa_plfa-part2-BigStep-3328" href="../BigStep/#plfa_plfa-part2-BigStep-3328" class="Function">∅&#39;</a> <a id="plfa_plfa-part2-BigStep-3331" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3333" href="../BigStep/#plfa_plfa-part2-BigStep-3080" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3341" href="../Untyped/#plfa_plfa-part2-Untyped-3820" class="InductiveConstructor">∅</a>
<a id="plfa_plfa-part2-BigStep-3343" href="../BigStep/#plfa_plfa-part2-BigStep-3328" class="Function">∅&#39;</a> <a id="plfa_plfa-part2-BigStep-3346" class="Symbol">()</a>

<a id="plfa_plfa-part2-BigStep-_,&#39;_"></a><a id="plfa_plfa-part2-BigStep-3350" href="../BigStep/#plfa_plfa-part2-BigStep-3350" class="Function Operator">_,&#39;_</a> <a id="plfa_plfa-part2-BigStep-3355" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3357" class="Symbol">∀</a> <a id="plfa_plfa-part2-BigStep-3359" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-3360" href="../BigStep/#plfa_plfa-part2-BigStep-3360" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-3361" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-3363" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3365" href="../BigStep/#plfa_plfa-part2-BigStep-3080" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3373" href="../BigStep/#plfa_plfa-part2-BigStep-3360" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3375" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3377" href="../BigStep/#plfa_plfa-part2-BigStep-3110" class="Datatype">Clos</a> <a id="plfa_plfa-part2-BigStep-3382" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3384" href="../BigStep/#plfa_plfa-part2-BigStep-3080" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3392" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-3393" href="../BigStep/#plfa_plfa-part2-BigStep-3360" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3395" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-3397" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-3398" class="Symbol">)</a>
<a id="plfa_plfa-part2-BigStep-3400" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-3401" href="../BigStep/#plfa_plfa-part2-BigStep-3401" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-3403" href="../BigStep/#plfa_plfa-part2-BigStep-3350" class="Function Operator">,&#39;</a> <a id="plfa_plfa-part2-BigStep-3406" href="../BigStep/#plfa_plfa-part2-BigStep-3406" class="Bound">c</a><a id="plfa_plfa-part2-BigStep-3407" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-3409" href="../Untyped/#plfa_plfa-part2-Untyped-4359" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-BigStep-3411" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-3413" href="../BigStep/#plfa_plfa-part2-BigStep-3406" class="Bound">c</a>
<a id="plfa_plfa-part2-BigStep-3415" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-3416" href="../BigStep/#plfa_plfa-part2-BigStep-3416" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-3418" href="../BigStep/#plfa_plfa-part2-BigStep-3350" class="Function Operator">,&#39;</a> <a id="plfa_plfa-part2-BigStep-3421" href="../BigStep/#plfa_plfa-part2-BigStep-3421" class="Bound">c</a><a id="plfa_plfa-part2-BigStep-3422" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-3424" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-3425" href="../Untyped/#plfa_plfa-part2-Untyped-4404" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-BigStep-3427" href="../BigStep/#plfa_plfa-part2-BigStep-3427" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-3428" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-3430" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-3432" href="../BigStep/#plfa_plfa-part2-BigStep-3416" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-3434" href="../BigStep/#plfa_plfa-part2-BigStep-3427" class="Bound">x</a>
</pre><h2 id="大步求值">大步求值</h2><p>大步语义被表现为一个三元关系，写作 <code>γ ⊢ M ⇓ V</code>， 其中 <code>γ</code> 是环境，<code>M</code>是输入项，<code>V</code> 是结果值。 <strong>值（Value）</strong> 是一个项是 λ-抽象的闭包。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-3814" class="Keyword">data</a> <a id="plfa_plfa-part2-BigStep-_⊢_⇓_"></a><a id="plfa_plfa-part2-BigStep-3819" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Datatype Operator">_⊢_⇓_</a> <a id="plfa_plfa-part2-BigStep-3825" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3827" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-3829" href="../BigStep/#plfa_plfa-part2-BigStep-3829" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-3830" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-3832" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3834" href="../BigStep/#plfa_plfa-part2-BigStep-3080" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3842" href="../BigStep/#plfa_plfa-part2-BigStep-3829" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3844" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3846" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-3847" href="../BigStep/#plfa_plfa-part2-BigStep-3829" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3849" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-3851" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-3852" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-3854" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3856" href="../BigStep/#plfa_plfa-part2-BigStep-3110" class="Datatype">Clos</a> <a id="plfa_plfa-part2-BigStep-3861" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3863" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Primitive.html#388" class="Primitive">Set</a> <a id="plfa_plfa-part2-BigStep-3867" class="Keyword">where</a>

  <a id="plfa_plfa-part2-BigStep-_⊢_⇓_.⇓-var"></a><a id="plfa_plfa-part2-BigStep-3876" href="../BigStep/#plfa_plfa-part2-BigStep-3876" class="InductiveConstructor">⇓-var</a> <a id="plfa_plfa-part2-BigStep-3882" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3884" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-3886" href="../BigStep/#plfa_plfa-part2-BigStep-3886" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-3887" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-3889" href="../BigStep/#plfa_plfa-part2-BigStep-3889" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-3891" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3893" href="../BigStep/#plfa_plfa-part2-BigStep-3080" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3901" href="../BigStep/#plfa_plfa-part2-BigStep-3886" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-3902" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-3904" href="../BigStep/#plfa_plfa-part2-BigStep-3904" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-3906" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3908" href="../BigStep/#plfa_plfa-part2-BigStep-3886" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3910" href="../Untyped/#plfa_plfa-part2-Untyped-4323" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-BigStep-3912" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-3913" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-3915" href="../BigStep/#plfa_plfa-part2-BigStep-3915" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-3916" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-3918" href="../BigStep/#plfa_plfa-part2-BigStep-3918" class="Bound">δ</a> <a id="plfa_plfa-part2-BigStep-3920" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3922" href="../BigStep/#plfa_plfa-part2-BigStep-3080" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3930" href="../BigStep/#plfa_plfa-part2-BigStep-3915" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-3931" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-3933" href="../BigStep/#plfa_plfa-part2-BigStep-3933" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-3935" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3937" href="../BigStep/#plfa_plfa-part2-BigStep-3915" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-3939" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-3941" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-3942" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-3944" href="../BigStep/#plfa_plfa-part2-BigStep-3944" class="Bound">V</a><a id="plfa_plfa-part2-BigStep-3945" class="Symbol">}</a>
    <a id="plfa_plfa-part2-BigStep-3951" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3953" href="../BigStep/#plfa_plfa-part2-BigStep-3889" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-3955" href="../BigStep/#plfa_plfa-part2-BigStep-3904" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-3957" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-BigStep-3959" href="../BigStep/#plfa_plfa-part2-BigStep-3129" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-3964" href="../BigStep/#plfa_plfa-part2-BigStep-3933" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-3966" href="../BigStep/#plfa_plfa-part2-BigStep-3918" class="Bound">δ</a>
    <a id="plfa_plfa-part2-BigStep-3972" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3974" href="../BigStep/#plfa_plfa-part2-BigStep-3918" class="Bound">δ</a> <a id="plfa_plfa-part2-BigStep-3976" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-3978" href="../BigStep/#plfa_plfa-part2-BigStep-3933" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-3980" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-3982" href="../BigStep/#plfa_plfa-part2-BigStep-3944" class="Bound">V</a>
      <a id="plfa_plfa-part2-BigStep-3990" class="Comment">-----------</a>
    <a id="plfa_plfa-part2-BigStep-4006" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-4008" href="../BigStep/#plfa_plfa-part2-BigStep-3889" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-4010" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4012" href="../Untyped/#plfa_plfa-part2-Untyped-5402" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-BigStep-4014" href="../BigStep/#plfa_plfa-part2-BigStep-3904" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-4016" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-4018" href="../BigStep/#plfa_plfa-part2-BigStep-3944" class="Bound">V</a>

  <a id="plfa_plfa-part2-BigStep-_⊢_⇓_.⇓-lam"></a><a id="plfa_plfa-part2-BigStep-4023" href="../BigStep/#plfa_plfa-part2-BigStep-4023" class="InductiveConstructor">⇓-lam</a> <a id="plfa_plfa-part2-BigStep-4029" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4031" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-4033" href="../BigStep/#plfa_plfa-part2-BigStep-4033" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-4034" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4036" href="../BigStep/#plfa_plfa-part2-BigStep-4036" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-4038" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4040" href="../BigStep/#plfa_plfa-part2-BigStep-3080" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-4048" href="../BigStep/#plfa_plfa-part2-BigStep-4033" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-4049" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4051" href="../BigStep/#plfa_plfa-part2-BigStep-4051" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-4053" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4055" href="../BigStep/#plfa_plfa-part2-BigStep-4033" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-4057" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-4059" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-BigStep-4061" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4063" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-4064" class="Symbol">}</a>
    <a id="plfa_plfa-part2-BigStep-4070" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-4072" href="../BigStep/#plfa_plfa-part2-BigStep-4036" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-4074" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4076" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-4078" href="../BigStep/#plfa_plfa-part2-BigStep-4051" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-4080" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-4082" href="../BigStep/#plfa_plfa-part2-BigStep-3129" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-4087" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-4088" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-4090" href="../BigStep/#plfa_plfa-part2-BigStep-4051" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-4091" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-4093" href="../BigStep/#plfa_plfa-part2-BigStep-4036" class="Bound">γ</a>

  <a id="plfa_plfa-part2-BigStep-_⊢_⇓_.⇓-app"></a><a id="plfa_plfa-part2-BigStep-4098" href="../BigStep/#plfa_plfa-part2-BigStep-4098" class="InductiveConstructor">⇓-app</a> <a id="plfa_plfa-part2-BigStep-4104" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4106" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-4108" href="../BigStep/#plfa_plfa-part2-BigStep-4108" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-4109" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4111" href="../BigStep/#plfa_plfa-part2-BigStep-4111" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-4113" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4115" href="../BigStep/#plfa_plfa-part2-BigStep-3080" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-4123" href="../BigStep/#plfa_plfa-part2-BigStep-4108" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-4124" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4126" href="../BigStep/#plfa_plfa-part2-BigStep-4126" class="Bound">L</a> <a id="plfa_plfa-part2-BigStep-4128" href="../BigStep/#plfa_plfa-part2-BigStep-4128" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-4130" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4132" href="../BigStep/#plfa_plfa-part2-BigStep-4108" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-4134" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4136" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-4137" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4139" href="../BigStep/#plfa_plfa-part2-BigStep-4139" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-4140" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4142" href="../BigStep/#plfa_plfa-part2-BigStep-4142" class="Bound">δ</a> <a id="plfa_plfa-part2-BigStep-4144" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4146" href="../BigStep/#plfa_plfa-part2-BigStep-3080" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-4154" href="../BigStep/#plfa_plfa-part2-BigStep-4139" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-4155" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4157" href="../BigStep/#plfa_plfa-part2-BigStep-4157" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-4159" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4161" href="../BigStep/#plfa_plfa-part2-BigStep-4139" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-4163" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-4165" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-BigStep-4167" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4169" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-4170" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4172" href="../BigStep/#plfa_plfa-part2-BigStep-4172" class="Bound">V</a><a id="plfa_plfa-part2-BigStep-4173" class="Symbol">}</a>
    <a id="plfa_plfa-part2-BigStep-4179" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-4181" href="../BigStep/#plfa_plfa-part2-BigStep-4111" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-4183" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4185" href="../BigStep/#plfa_plfa-part2-BigStep-4126" class="Bound">L</a> <a id="plfa_plfa-part2-BigStep-4187" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-4189" href="../BigStep/#plfa_plfa-part2-BigStep-3129" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-4194" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-4195" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-4197" href="../BigStep/#plfa_plfa-part2-BigStep-4157" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-4198" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-4200" href="../BigStep/#plfa_plfa-part2-BigStep-4142" class="Bound">δ</a>   <a id="plfa_plfa-part2-BigStep-4204" class="Symbol">→</a>   <a id="plfa_plfa-part2-BigStep-4208" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-4209" href="../BigStep/#plfa_plfa-part2-BigStep-4142" class="Bound">δ</a> <a id="plfa_plfa-part2-BigStep-4211" href="../BigStep/#plfa_plfa-part2-BigStep-3350" class="Function Operator">,&#39;</a> <a id="plfa_plfa-part2-BigStep-4214" href="../BigStep/#plfa_plfa-part2-BigStep-3129" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-4219" href="../BigStep/#plfa_plfa-part2-BigStep-4128" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-4221" href="../BigStep/#plfa_plfa-part2-BigStep-4111" class="Bound">γ</a><a id="plfa_plfa-part2-BigStep-4222" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-4224" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4226" href="../BigStep/#plfa_plfa-part2-BigStep-4157" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-4228" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-4230" href="../BigStep/#plfa_plfa-part2-BigStep-4172" class="Bound">V</a>
      <a id="plfa_plfa-part2-BigStep-4238" class="Comment">---------------------------------------------------</a>
    <a id="plfa_plfa-part2-BigStep-4294" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-4296" href="../BigStep/#plfa_plfa-part2-BigStep-4111" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-4298" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4300" href="../BigStep/#plfa_plfa-part2-BigStep-4126" class="Bound">L</a> <a id="plfa_plfa-part2-BigStep-4302" href="../Untyped/#plfa_plfa-part2-Untyped-5514" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-BigStep-4304" href="../BigStep/#plfa_plfa-part2-BigStep-4128" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-4306" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-4308" href="../BigStep/#plfa_plfa-part2-BigStep-4172" class="Bound">V</a>
</pre><ul><li><p><code>⇓-var</code> 规则通过对环境中找到的相关闭包求值，从而完成对变量的求值。</p></li><li><p><code>⇓-lam</code> 规则通过包装 λ-抽象与其环境，将其转变为一个闭包。</p></li><li><p><code>⇓-app</code> 规则分两步处理函数应用。首先对操作位的项 <code>L</code> 求值，如果产生了一个包含 λ-抽象 <code>ƛ N</code> 的闭包， 就在扩展了参数 <code>M</code> 的环境中对 <code>N</code> 求值。注意到 <code>M</code> 并未在 <code>⇓-app</code> 规则中被求值， 因为进行的是传名调用而不是传值调用。</p></li></ul><h4 id="练习-big-step-eg实践">练习 <code>big-step-eg</code>（实践）</h4><p>证明 <code>(ƛ ƛ # 1) · ((ƛ # 0 · # 0) · (ƛ # 0 · # 0))</code> 能在大步传名调用求值下终止。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-5404" class="Comment">-- 请将代码写在此处</a>
</pre><h2 id="大步语义是确定的">大步语义是确定的</h2><p>如果大步关系将一个项 <code>M</code> 求值为 <code>V</code> 和 <code>V′</code>，则 <code>V</code> 和 <code>V′</code> 必然相同。 也就是说，传名调用关系是一个部分函数。该证明由两个大步语义的推论归纳得出。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-⇓-determ"></a><a id="plfa_plfa-part2-BigStep-5837" href="../BigStep/#plfa_plfa-part2-BigStep-5837" class="Function">⇓-determ</a> <a id="plfa_plfa-part2-BigStep-5846" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-5848" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-5850" href="../BigStep/#plfa_plfa-part2-BigStep-5850" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-5851" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-5853" href="../BigStep/#plfa_plfa-part2-BigStep-5853" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-5855" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-5857" href="../BigStep/#plfa_plfa-part2-BigStep-3080" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-5865" href="../BigStep/#plfa_plfa-part2-BigStep-5850" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-5866" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-5868" href="../BigStep/#plfa_plfa-part2-BigStep-5868" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-5870" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-5872" href="../BigStep/#plfa_plfa-part2-BigStep-5850" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-5874" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-5876" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-5877" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-5879" href="../BigStep/#plfa_plfa-part2-BigStep-5879" class="Bound">V</a> <a id="plfa_plfa-part2-BigStep-5881" href="../BigStep/#plfa_plfa-part2-BigStep-5881" class="Bound">V&#39;</a> <a id="plfa_plfa-part2-BigStep-5884" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-5886" href="../BigStep/#plfa_plfa-part2-BigStep-3110" class="Datatype">Clos</a><a id="plfa_plfa-part2-BigStep-5890" class="Symbol">}</a>
  <a id="plfa_plfa-part2-BigStep-5894" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-5896" href="../BigStep/#plfa_plfa-part2-BigStep-5853" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-5898" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-5900" href="../BigStep/#plfa_plfa-part2-BigStep-5868" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-5902" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-5904" href="../BigStep/#plfa_plfa-part2-BigStep-5879" class="Bound">V</a> <a id="plfa_plfa-part2-BigStep-5906" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-5908" href="../BigStep/#plfa_plfa-part2-BigStep-5853" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-5910" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-5912" href="../BigStep/#plfa_plfa-part2-BigStep-5868" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-5914" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-5916" href="../BigStep/#plfa_plfa-part2-BigStep-5881" class="Bound">V&#39;</a>
  <a id="plfa_plfa-part2-BigStep-5921" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-5923" href="../BigStep/#plfa_plfa-part2-BigStep-5879" class="Bound">V</a> <a id="plfa_plfa-part2-BigStep-5925" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-BigStep-5927" href="../BigStep/#plfa_plfa-part2-BigStep-5881" class="Bound">V&#39;</a>
<a id="plfa_plfa-part2-BigStep-5930" href="../BigStep/#plfa_plfa-part2-BigStep-5837" class="Function">⇓-determ</a> <a id="plfa_plfa-part2-BigStep-5939" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-5940" href="../BigStep/#plfa_plfa-part2-BigStep-3876" class="InductiveConstructor">⇓-var</a> <a id="plfa_plfa-part2-BigStep-5946" href="../BigStep/#plfa_plfa-part2-BigStep-5946" class="Bound">eq1</a> <a id="plfa_plfa-part2-BigStep-5950" href="../BigStep/#plfa_plfa-part2-BigStep-5950" class="Bound">mc</a><a id="plfa_plfa-part2-BigStep-5952" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-5954" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-5955" href="../BigStep/#plfa_plfa-part2-BigStep-3876" class="InductiveConstructor">⇓-var</a> <a id="plfa_plfa-part2-BigStep-5961" href="../BigStep/#plfa_plfa-part2-BigStep-5961" class="Bound">eq2</a> <a id="plfa_plfa-part2-BigStep-5965" href="../BigStep/#plfa_plfa-part2-BigStep-5965" class="Bound">mc&#39;</a><a id="plfa_plfa-part2-BigStep-5968" class="Symbol">)</a>
    <a id="plfa_plfa-part2-BigStep-5974" class="Keyword">with</a> <a id="plfa_plfa-part2-BigStep-5979" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Binary.PropositionalEquality.Core.html#1938" class="Function">trans</a> <a id="plfa_plfa-part2-BigStep-5985" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-5986" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part2-BigStep-5990" href="../BigStep/#plfa_plfa-part2-BigStep-5946" class="Bound">eq1</a><a id="plfa_plfa-part2-BigStep-5993" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-5995" href="../BigStep/#plfa_plfa-part2-BigStep-5961" class="Bound">eq2</a>
<a id="plfa_plfa-part2-BigStep-5999" class="Symbol">...</a> <a id="plfa_plfa-part2-BigStep-6003" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-6005" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-BigStep-6010" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-6012" href="../BigStep/#plfa_plfa-part2-BigStep-5837" class="Function">⇓-determ</a> <a id="plfa_plfa-part2-BigStep-6021" class="Bound">mc</a> <a id="plfa_plfa-part2-BigStep-6024" class="Bound">mc&#39;</a>
<a id="plfa_plfa-part2-BigStep-6028" href="../BigStep/#plfa_plfa-part2-BigStep-5837" class="Function">⇓-determ</a> <a id="plfa_plfa-part2-BigStep-6037" href="../BigStep/#plfa_plfa-part2-BigStep-4023" class="InductiveConstructor">⇓-lam</a> <a id="plfa_plfa-part2-BigStep-6043" href="../BigStep/#plfa_plfa-part2-BigStep-4023" class="InductiveConstructor">⇓-lam</a> <a id="plfa_plfa-part2-BigStep-6049" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-6051" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part2-BigStep-6056" href="../BigStep/#plfa_plfa-part2-BigStep-5837" class="Function">⇓-determ</a> <a id="plfa_plfa-part2-BigStep-6065" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-6066" href="../BigStep/#plfa_plfa-part2-BigStep-4098" class="InductiveConstructor">⇓-app</a> <a id="plfa_plfa-part2-BigStep-6072" href="../BigStep/#plfa_plfa-part2-BigStep-6072" class="Bound">mc</a> <a id="plfa_plfa-part2-BigStep-6075" href="../BigStep/#plfa_plfa-part2-BigStep-6075" class="Bound">mc₁</a><a id="plfa_plfa-part2-BigStep-6078" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-6080" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-6081" href="../BigStep/#plfa_plfa-part2-BigStep-4098" class="InductiveConstructor">⇓-app</a> <a id="plfa_plfa-part2-BigStep-6087" href="../BigStep/#plfa_plfa-part2-BigStep-6087" class="Bound">mc&#39;</a> <a id="plfa_plfa-part2-BigStep-6091" href="../BigStep/#plfa_plfa-part2-BigStep-6091" class="Bound">mc&#39;&#39;</a><a id="plfa_plfa-part2-BigStep-6095" class="Symbol">)</a>
    <a id="plfa_plfa-part2-BigStep-6101" class="Keyword">with</a> <a id="plfa_plfa-part2-BigStep-6106" href="../BigStep/#plfa_plfa-part2-BigStep-5837" class="Function">⇓-determ</a> <a id="plfa_plfa-part2-BigStep-6115" href="../BigStep/#plfa_plfa-part2-BigStep-6072" class="Bound">mc</a> <a id="plfa_plfa-part2-BigStep-6118" href="../BigStep/#plfa_plfa-part2-BigStep-6087" class="Bound">mc&#39;</a>
<a id="plfa_plfa-part2-BigStep-6122" class="Symbol">...</a> <a id="plfa_plfa-part2-BigStep-6126" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-6128" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-BigStep-6133" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-6135" href="../BigStep/#plfa_plfa-part2-BigStep-5837" class="Function">⇓-determ</a> <a id="plfa_plfa-part2-BigStep-6144" class="Bound">mc₁</a> <a id="plfa_plfa-part2-BigStep-6148" class="Bound">mc&#39;&#39;</a>
</pre><h2 id="大步求值蕴含-β-归约至-λ-抽象">大步求值蕴含 β-归约至 λ-抽象</h2><p>如果大步求值能够求出值，那么输入项能被 β-归约归约为一个 λ-抽象：</p><pre><code>  ∅&#39; ⊢ M ⇓ clos (ƛ N′) δ
  -----------------------------
→ Σ[ N ∈ ∅ , ★ ⊢ ★ ] (M —↠ ƛ N)</code></pre><p>该证明通过对大步推导归纳来完成。通常，我们需要推广命题以完成归纳。 在 <code>⇓-app</code>（函数应用）的情况下，参数被添加到环境中，导致环境变得非空。 相应的 β-归约将参数替换进 λ-抽象的主体中。 所以我们将引理推广为允许任意环境 <code>γ</code> 并且添加一个前提将环境 <code>γ</code> 与等价的替代 <code>σ</code> 相关联。</p><p><code>⇓-app</code> 的情况也要求我们加强结论。 对于 <code>⇓-app</code>，有 <code>γ ⊢ L ⇓ clos (λ N) δ</code> 以及归纳假设给我们 <code>L —↠ ƛ N′</code>， 但我们需要知道 <code>N</code> 和 <code>N′</code> 是等价的。 特别地，<code>N&#39; ≡ subst τ N</code>，其中 <code>τ</code> 是等价于 <code>δ</code> 的替换。 因此我们扩展命题的结论，以说明这两个结果是等价的。</p><p>我们通过定义以下两个相互递归的谓词 <code>V ≈ M</code> 和 <code>γ ≈ₑ σ</code> 来得到两个精确等价的概念</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-_≈_"></a><a id="plfa_plfa-part2-BigStep-8003" href="../BigStep/#plfa_plfa-part2-BigStep-8003" class="Function Operator">_≈_</a> <a id="plfa_plfa-part2-BigStep-8007" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-8009" href="../BigStep/#plfa_plfa-part2-BigStep-3110" class="Datatype">Clos</a> <a id="plfa_plfa-part2-BigStep-8014" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-8016" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-8017" href="../Untyped/#plfa_plfa-part2-Untyped-3820" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-BigStep-8019" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-8021" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-8022" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-8024" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-8026" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="plfa_plfa-part2-BigStep-_≈ₑ_"></a><a id="plfa_plfa-part2-BigStep-8030" href="../BigStep/#plfa_plfa-part2-BigStep-8030" class="Function Operator">_≈ₑ_</a> <a id="plfa_plfa-part2-BigStep-8035" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-8037" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-8039" href="../BigStep/#plfa_plfa-part2-BigStep-8039" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-8040" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-8042" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-8044" href="../BigStep/#plfa_plfa-part2-BigStep-3080" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-8052" href="../BigStep/#plfa_plfa-part2-BigStep-8039" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-8054" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-8056" href="../Substitution/#plfa_plfa-part2-Substitution-2892" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-8062" href="../BigStep/#plfa_plfa-part2-BigStep-8039" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-8064" href="../Untyped/#plfa_plfa-part2-Untyped-3820" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-BigStep-8066" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-8068" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Primitive.html#388" class="Primitive">Set</a>

<a id="plfa_plfa-part2-BigStep-8073" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-8074" href="../BigStep/#plfa_plfa-part2-BigStep-3129" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-8079" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-8080" href="../BigStep/#plfa_plfa-part2-BigStep-8080" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-8081" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-8083" href="../BigStep/#plfa_plfa-part2-BigStep-8083" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-8085" href="../BigStep/#plfa_plfa-part2-BigStep-8085" class="Bound">γ</a><a id="plfa_plfa-part2-BigStep-8086" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-8088" href="../BigStep/#plfa_plfa-part2-BigStep-8003" class="Function Operator">≈</a> <a id="plfa_plfa-part2-BigStep-8090" href="../BigStep/#plfa_plfa-part2-BigStep-8090" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-8092" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-8094" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">Σ[</a> <a id="plfa_plfa-part2-BigStep-8097" href="../BigStep/#plfa_plfa-part2-BigStep-8097" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-8099" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">∈</a> <a id="plfa_plfa-part2-BigStep-8101" href="../Substitution/#plfa_plfa-part2-Substitution-2892" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-8107" href="../BigStep/#plfa_plfa-part2-BigStep-8080" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-8109" href="../Untyped/#plfa_plfa-part2-Untyped-3820" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-BigStep-8111" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">]</a> <a id="plfa_plfa-part2-BigStep-8113" href="../BigStep/#plfa_plfa-part2-BigStep-8085" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-8115" href="../BigStep/#plfa_plfa-part2-BigStep-8030" class="Function Operator">≈ₑ</a> <a id="plfa_plfa-part2-BigStep-8118" href="../BigStep/#plfa_plfa-part2-BigStep-8097" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-8120" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="plfa_plfa-part2-BigStep-8122" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-8123" href="../BigStep/#plfa_plfa-part2-BigStep-8090" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-8125" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-BigStep-8127" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-8133" href="../BigStep/#plfa_plfa-part2-BigStep-8097" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-8135" href="../BigStep/#plfa_plfa-part2-BigStep-8083" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-8136" class="Symbol">)</a>

<a id="plfa_plfa-part2-BigStep-8139" href="../BigStep/#plfa_plfa-part2-BigStep-8139" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-8141" href="../BigStep/#plfa_plfa-part2-BigStep-8030" class="Function Operator">≈ₑ</a> <a id="plfa_plfa-part2-BigStep-8144" href="../BigStep/#plfa_plfa-part2-BigStep-8144" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-8146" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-8148" class="Symbol">∀</a> <a id="plfa_plfa-part2-BigStep-8150" href="../BigStep/#plfa_plfa-part2-BigStep-8150" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-8152" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-8154" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-8155" href="../BigStep/#plfa_plfa-part2-BigStep-8139" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-8157" href="../BigStep/#plfa_plfa-part2-BigStep-8150" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-8158" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-8160" href="../BigStep/#plfa_plfa-part2-BigStep-8003" class="Function Operator">≈</a> <a id="plfa_plfa-part2-BigStep-8162" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-8163" href="../BigStep/#plfa_plfa-part2-BigStep-8144" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-8165" href="../BigStep/#plfa_plfa-part2-BigStep-8150" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-8166" class="Symbol">)</a>
</pre><p>现在我们可以给出主要的引理。</p><pre><code>如果 γ ⊢ M ⇓ V  且  γ ≈ₑ σ,
那么有  subst σ M —↠ N  以及  V ≈ N  对于某个 N。</code></pre><p>在开始证明之前，我们需要建立一些有关等价的环境和替换的引理。</p><p>空环境与我们从 <a href="../Substitution/">Substitution</a> 章中导入的恒等替换等价。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-≈ₑ-id"></a><a id="plfa_plfa-part2-BigStep-8748" href="../BigStep/#plfa_plfa-part2-BigStep-8748" class="Function">≈ₑ-id</a> <a id="plfa_plfa-part2-BigStep-8754" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-8756" href="../BigStep/#plfa_plfa-part2-BigStep-3328" class="Function">∅&#39;</a> <a id="plfa_plfa-part2-BigStep-8759" href="../BigStep/#plfa_plfa-part2-BigStep-8030" class="Function Operator">≈ₑ</a> <a id="plfa_plfa-part2-BigStep-8762" href="../Substitution/#plfa_plfa-part2-Substitution-3772" class="Function">ids</a>
<a id="plfa_plfa-part2-BigStep-8766" href="../BigStep/#plfa_plfa-part2-BigStep-8748" class="Function">≈ₑ-id</a> <a id="plfa_plfa-part2-BigStep-8772" class="Symbol">()</a>
</pre><p>显然，对项应用恒等替换会得到相同的项。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-sub-id"></a><a id="plfa_plfa-part2-BigStep-8898" href="../BigStep/#plfa_plfa-part2-BigStep-8898" class="Function">sub-id</a> <a id="plfa_plfa-part2-BigStep-8905" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-8907" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-8909" href="../BigStep/#plfa_plfa-part2-BigStep-8909" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-8910" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-8912" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-8913" href="../BigStep/#plfa_plfa-part2-BigStep-8913" class="Bound">A</a><a id="plfa_plfa-part2-BigStep-8914" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-8916" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-8917" href="../BigStep/#plfa_plfa-part2-BigStep-8917" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-8919" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-8921" href="../BigStep/#plfa_plfa-part2-BigStep-8909" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-8923" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-8925" href="../BigStep/#plfa_plfa-part2-BigStep-8913" class="Bound">A</a><a id="plfa_plfa-part2-BigStep-8926" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-8928" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-8930" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-8936" href="../Substitution/#plfa_plfa-part2-Substitution-3772" class="Function">ids</a> <a id="plfa_plfa-part2-BigStep-8940" href="../BigStep/#plfa_plfa-part2-BigStep-8917" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-8942" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-BigStep-8944" href="../BigStep/#plfa_plfa-part2-BigStep-8917" class="Bound">M</a>
<a id="plfa_plfa-part2-BigStep-8946" href="../BigStep/#plfa_plfa-part2-BigStep-8898" class="Function">sub-id</a> <a id="plfa_plfa-part2-BigStep-8953" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-8955" href="../Substitution/#plfa_plfa-part2-Substitution-20319" class="Function">plfa.part2.Substitution.sub-id</a>
</pre><p>我们定义一个辅助函数来扩展替换。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-ext-subst"></a><a id="plfa_plfa-part2-BigStep-9089" href="../BigStep/#plfa_plfa-part2-BigStep-9089" class="Function">ext-subst</a> <a id="plfa_plfa-part2-BigStep-9099" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-9101" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-9103" href="../BigStep/#plfa_plfa-part2-BigStep-9103" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-9105" href="../BigStep/#plfa_plfa-part2-BigStep-9105" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-9106" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-9108" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-9110" href="../Substitution/#plfa_plfa-part2-Substitution-2892" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-9116" href="../BigStep/#plfa_plfa-part2-BigStep-9103" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-9118" href="../BigStep/#plfa_plfa-part2-BigStep-9105" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-9120" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-9122" href="../BigStep/#plfa_plfa-part2-BigStep-9105" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-9124" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-9126" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-BigStep-9128" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-9130" href="../Substitution/#plfa_plfa-part2-Substitution-2892" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-9136" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-9137" href="../BigStep/#plfa_plfa-part2-BigStep-9103" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-9139" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-9141" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-9142" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-9144" href="../BigStep/#plfa_plfa-part2-BigStep-9105" class="Bound">Δ</a>
<a id="plfa_plfa-part2-BigStep-9146" href="../BigStep/#plfa_plfa-part2-BigStep-9089" class="Function">ext-subst</a><a id="plfa_plfa-part2-BigStep-9155" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-9156" href="../BigStep/#plfa_plfa-part2-BigStep-9156" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-9157" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-9159" href="../BigStep/#plfa_plfa-part2-BigStep-9159" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-9160" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-9162" href="../BigStep/#plfa_plfa-part2-BigStep-9162" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-9164" href="../BigStep/#plfa_plfa-part2-BigStep-9164" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-9166" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-9167" href="../BigStep/#plfa_plfa-part2-BigStep-9167" class="Bound">A</a><a id="plfa_plfa-part2-BigStep-9168" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-9170" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-9172" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-9178" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-9179" href="../Untyped/#plfa_plfa-part2-Untyped-9407" class="Function">subst-zero</a> <a id="plfa_plfa-part2-BigStep-9190" href="../BigStep/#plfa_plfa-part2-BigStep-9164" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-9191" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-9193" href="https://agda.github.io/agda-stdlib/v2.2-dev/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part2-BigStep-9195" href="../Untyped/#plfa_plfa-part2-Untyped-8550" class="Function">exts</a> <a id="plfa_plfa-part2-BigStep-9200" href="../BigStep/#plfa_plfa-part2-BigStep-9162" class="Bound">σ</a>
</pre><p>下一个需要证明的引理声称如果从等价的环境和替换 <code>γ ≈ₑ σ</code> 开始， 将它们用等价的闭包和项 <code>c ≈ N</code> 扩展， 将得到等价的环境和替换 <code>(γ ,&#39; V) ≈ₑ (ext-subst σ N)</code>， 即对于任何变量 <code>x</code> 有 <code>(γ ,&#39; V) x ≈ₑ (ext-subst σ N) x</code>。 证明将通过归纳 <code>x</code> 完成，并且我们需要如下引理。 该引理声称将<code>exts σ</code> 和 <code>subst-zero</code> 的组合应用至 <code>S x</code> 等同于 <code>σ x</code>。 这是 <a href="../Substitution/">Substitution</a> 章节中一个定理的推论。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-subst-zero-exts"></a><a id="plfa_plfa-part2-BigStep-10115" href="../BigStep/#plfa_plfa-part2-BigStep-10115" class="Function">subst-zero-exts</a> <a id="plfa_plfa-part2-BigStep-10131" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10133" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-10135" href="../BigStep/#plfa_plfa-part2-BigStep-10135" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-10137" href="../BigStep/#plfa_plfa-part2-BigStep-10137" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-10138" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10140" href="../BigStep/#plfa_plfa-part2-BigStep-10140" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-10142" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10144" href="../Substitution/#plfa_plfa-part2-Substitution-2892" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-10150" href="../BigStep/#plfa_plfa-part2-BigStep-10135" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-10152" href="../BigStep/#plfa_plfa-part2-BigStep-10137" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-10153" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10155" href="../BigStep/#plfa_plfa-part2-BigStep-10155" class="Bound">B</a><a id="plfa_plfa-part2-BigStep-10156" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10158" href="../BigStep/#plfa_plfa-part2-BigStep-10158" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-10160" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10162" href="../BigStep/#plfa_plfa-part2-BigStep-10137" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-10164" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-10166" href="../BigStep/#plfa_plfa-part2-BigStep-10155" class="Bound">B</a><a id="plfa_plfa-part2-BigStep-10167" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10169" href="../BigStep/#plfa_plfa-part2-BigStep-10169" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-10171" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10173" href="../BigStep/#plfa_plfa-part2-BigStep-10135" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-10175" href="../Untyped/#plfa_plfa-part2-Untyped-4323" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-BigStep-10177" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-10178" class="Symbol">}</a>
  <a id="plfa_plfa-part2-BigStep-10182" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-10184" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10185" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-10191" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10192" href="../Untyped/#plfa_plfa-part2-Untyped-9407" class="Function">subst-zero</a> <a id="plfa_plfa-part2-BigStep-10203" href="../BigStep/#plfa_plfa-part2-BigStep-10158" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-10204" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-10206" href="https://agda.github.io/agda-stdlib/v2.2-dev/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part2-BigStep-10208" href="../Untyped/#plfa_plfa-part2-Untyped-8550" class="Function">exts</a> <a id="plfa_plfa-part2-BigStep-10213" href="../BigStep/#plfa_plfa-part2-BigStep-10140" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-10214" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-10216" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10217" href="../Untyped/#plfa_plfa-part2-Untyped-4404" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-BigStep-10219" href="../BigStep/#plfa_plfa-part2-BigStep-10169" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-10220" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-10222" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-BigStep-10224" href="../BigStep/#plfa_plfa-part2-BigStep-10140" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-10226" href="../BigStep/#plfa_plfa-part2-BigStep-10169" class="Bound">x</a>
<a id="plfa_plfa-part2-BigStep-10228" href="../BigStep/#plfa_plfa-part2-BigStep-10115" class="Function">subst-zero-exts</a> <a id="plfa_plfa-part2-BigStep-10244" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10245" href="../BigStep/#plfa_plfa-part2-BigStep-10245" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-10246" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10248" href="../BigStep/#plfa_plfa-part2-BigStep-10248" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-10249" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10251" href="../BigStep/#plfa_plfa-part2-BigStep-10251" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-10252" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10254" href="../BigStep/#plfa_plfa-part2-BigStep-10254" class="Bound">B</a><a id="plfa_plfa-part2-BigStep-10255" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10257" href="../BigStep/#plfa_plfa-part2-BigStep-10257" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-10258" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10260" href="../BigStep/#plfa_plfa-part2-BigStep-10260" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-10261" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10263" class="Symbol">=</a>
   <a id="plfa_plfa-part2-BigStep-10268" href="https://agda.github.io/agda-stdlib/v2.2-dev/Relation.Binary.PropositionalEquality.Core.html#1670" class="Function">cong-app</a> <a id="plfa_plfa-part2-BigStep-10277" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10278" href="../Substitution/#plfa_plfa-part2-Substitution-30188" class="Function">plfa.part2.Substitution.subst-zero-exts-cons</a><a id="plfa_plfa-part2-BigStep-10322" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10323" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-10325" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-10327" href="../BigStep/#plfa_plfa-part2-BigStep-10251" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-10328" class="Symbol">})</a> <a id="plfa_plfa-part2-BigStep-10331" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10332" href="../Untyped/#plfa_plfa-part2-Untyped-4404" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-BigStep-10334" href="../BigStep/#plfa_plfa-part2-BigStep-10260" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-10335" class="Symbol">)</a>
</pre><p>所以 <code>≈ₑ-ext</code> 的证明如下。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-≈ₑ-ext"></a><a id="plfa_plfa-part2-BigStep-10420" href="../BigStep/#plfa_plfa-part2-BigStep-10420" class="Function">≈ₑ-ext</a> <a id="plfa_plfa-part2-BigStep-10427" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10429" class="Symbol">∀</a> <a id="plfa_plfa-part2-BigStep-10431" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10432" href="../BigStep/#plfa_plfa-part2-BigStep-10432" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-10433" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10435" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10436" href="../BigStep/#plfa_plfa-part2-BigStep-10436" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-10438" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10440" href="../BigStep/#plfa_plfa-part2-BigStep-3080" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-10448" href="../BigStep/#plfa_plfa-part2-BigStep-10432" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-10449" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10451" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10452" href="../BigStep/#plfa_plfa-part2-BigStep-10452" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-10454" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10456" href="../Substitution/#plfa_plfa-part2-Substitution-2892" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-10462" href="../BigStep/#plfa_plfa-part2-BigStep-10432" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-10464" href="../Untyped/#plfa_plfa-part2-Untyped-3820" class="InductiveConstructor">∅</a><a id="plfa_plfa-part2-BigStep-10465" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10467" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10468" href="../BigStep/#plfa_plfa-part2-BigStep-10468" class="Bound">V</a><a id="plfa_plfa-part2-BigStep-10469" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10471" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10472" href="../BigStep/#plfa_plfa-part2-BigStep-10472" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-10474" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10476" href="../Untyped/#plfa_plfa-part2-Untyped-3820" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-BigStep-10478" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-10480" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-10481" class="Symbol">}</a>
  <a id="plfa_plfa-part2-BigStep-10485" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-10487" href="../BigStep/#plfa_plfa-part2-BigStep-10436" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-10489" href="../BigStep/#plfa_plfa-part2-BigStep-8030" class="Function Operator">≈ₑ</a> <a id="plfa_plfa-part2-BigStep-10492" href="../BigStep/#plfa_plfa-part2-BigStep-10452" class="Bound">σ</a>  <a id="plfa_plfa-part2-BigStep-10495" class="Symbol">→</a>  <a id="plfa_plfa-part2-BigStep-10498" href="../BigStep/#plfa_plfa-part2-BigStep-10468" class="Bound">V</a> <a id="plfa_plfa-part2-BigStep-10500" href="../BigStep/#plfa_plfa-part2-BigStep-8003" class="Function Operator">≈</a> <a id="plfa_plfa-part2-BigStep-10502" href="../BigStep/#plfa_plfa-part2-BigStep-10472" class="Bound">N</a>
    <a id="plfa_plfa-part2-BigStep-10508" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part2-BigStep-10537" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-10539" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10540" href="../BigStep/#plfa_plfa-part2-BigStep-10436" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-10542" href="../BigStep/#plfa_plfa-part2-BigStep-3350" class="Function Operator">,&#39;</a> <a id="plfa_plfa-part2-BigStep-10545" href="../BigStep/#plfa_plfa-part2-BigStep-10468" class="Bound">V</a><a id="plfa_plfa-part2-BigStep-10546" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-10548" href="../BigStep/#plfa_plfa-part2-BigStep-8030" class="Function Operator">≈ₑ</a> <a id="plfa_plfa-part2-BigStep-10551" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10552" href="../BigStep/#plfa_plfa-part2-BigStep-9089" class="Function">ext-subst</a> <a id="plfa_plfa-part2-BigStep-10562" href="../BigStep/#plfa_plfa-part2-BigStep-10452" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-10564" href="../BigStep/#plfa_plfa-part2-BigStep-10472" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-10565" class="Symbol">)</a>
<a id="plfa_plfa-part2-BigStep-10567" href="../BigStep/#plfa_plfa-part2-BigStep-10420" class="Function">≈ₑ-ext</a> <a id="plfa_plfa-part2-BigStep-10574" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10575" href="../BigStep/#plfa_plfa-part2-BigStep-10575" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-10576" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10578" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10579" href="../BigStep/#plfa_plfa-part2-BigStep-10579" class="Bound">γ</a><a id="plfa_plfa-part2-BigStep-10580" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10582" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10583" href="../BigStep/#plfa_plfa-part2-BigStep-10583" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-10584" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10586" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10587" href="../BigStep/#plfa_plfa-part2-BigStep-10587" class="Bound">V</a><a id="plfa_plfa-part2-BigStep-10588" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10590" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10591" href="../BigStep/#plfa_plfa-part2-BigStep-10591" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-10592" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10594" href="../BigStep/#plfa_plfa-part2-BigStep-10594" class="Bound">γ≈ₑσ</a> <a id="plfa_plfa-part2-BigStep-10599" href="../BigStep/#plfa_plfa-part2-BigStep-10599" class="Bound">V≈N</a> <a id="plfa_plfa-part2-BigStep-10603" href="../Untyped/#plfa_plfa-part2-Untyped-4359" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-BigStep-10605" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-10607" href="../BigStep/#plfa_plfa-part2-BigStep-10599" class="Bound">V≈N</a>
<a id="plfa_plfa-part2-BigStep-10611" href="../BigStep/#plfa_plfa-part2-BigStep-10420" class="Function">≈ₑ-ext</a> <a id="plfa_plfa-part2-BigStep-10618" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10619" href="../BigStep/#plfa_plfa-part2-BigStep-10619" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-10620" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10622" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10623" href="../BigStep/#plfa_plfa-part2-BigStep-10623" class="Bound">γ</a><a id="plfa_plfa-part2-BigStep-10624" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10626" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10627" href="../BigStep/#plfa_plfa-part2-BigStep-10627" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-10628" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10630" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10631" href="../BigStep/#plfa_plfa-part2-BigStep-10631" class="Bound">V</a><a id="plfa_plfa-part2-BigStep-10632" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10634" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10635" href="../BigStep/#plfa_plfa-part2-BigStep-10635" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-10636" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10638" href="../BigStep/#plfa_plfa-part2-BigStep-10638" class="Bound">γ≈ₑσ</a> <a id="plfa_plfa-part2-BigStep-10643" href="../BigStep/#plfa_plfa-part2-BigStep-10643" class="Bound">V≈N</a> <a id="plfa_plfa-part2-BigStep-10647" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10648" href="../Untyped/#plfa_plfa-part2-Untyped-4404" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-BigStep-10650" href="../BigStep/#plfa_plfa-part2-BigStep-10650" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-10651" class="Symbol">)</a>
  <a id="plfa_plfa-part2-BigStep-10655" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-BigStep-10663" href="../BigStep/#plfa_plfa-part2-BigStep-10115" class="Function">subst-zero-exts</a> <a id="plfa_plfa-part2-BigStep-10679" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10680" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-10682" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-10684" href="../BigStep/#plfa_plfa-part2-BigStep-10627" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-10685" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10687" class="Argument">M</a> <a id="plfa_plfa-part2-BigStep-10689" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-10691" href="../BigStep/#plfa_plfa-part2-BigStep-10635" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-10692" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10694" href="../BigStep/#plfa_plfa-part2-BigStep-10650" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-10695" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10697" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-10699" href="../BigStep/#plfa_plfa-part2-BigStep-10638" class="Bound">γ≈ₑσ</a> <a id="plfa_plfa-part2-BigStep-10704" href="../BigStep/#plfa_plfa-part2-BigStep-10650" class="Bound">x</a>
</pre><p>我们通过对输入项进行归纳来证明。</p><ul><li><p>如果它是 <code>Z</code>，那么我们使用前提 <code>V ≈ N</code> 立即得出结论。</p></li><li><p>如果它是 <code>S x</code>，那么我们使用 <code>subst-zero-exts</code> 引理来重写，并使用前提 <code>γ ≈ₑ σ</code> 来得出结论。</p></li></ul><p>为了证明主要的引理，我们需要另一个关于替换的技术性的引理。 接连应用两个替换与先将两个替换连接起来再应用等价。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-sub-sub"></a><a id="plfa_plfa-part2-BigStep-11353" href="../BigStep/#plfa_plfa-part2-BigStep-11353" class="Function">sub-sub</a> <a id="plfa_plfa-part2-BigStep-11361" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11363" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-11365" href="../BigStep/#plfa_plfa-part2-BigStep-11365" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-11367" href="../BigStep/#plfa_plfa-part2-BigStep-11367" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-11369" href="../BigStep/#plfa_plfa-part2-BigStep-11369" class="Bound">Σ</a><a id="plfa_plfa-part2-BigStep-11370" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-11372" href="../BigStep/#plfa_plfa-part2-BigStep-11372" class="Bound">A</a><a id="plfa_plfa-part2-BigStep-11373" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-11375" href="../BigStep/#plfa_plfa-part2-BigStep-11375" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-11377" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11379" href="../BigStep/#plfa_plfa-part2-BigStep-11365" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-11381" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-11383" href="../BigStep/#plfa_plfa-part2-BigStep-11372" class="Bound">A</a><a id="plfa_plfa-part2-BigStep-11384" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-11386" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-11387" href="../BigStep/#plfa_plfa-part2-BigStep-11387" class="Bound">σ₁</a> <a id="plfa_plfa-part2-BigStep-11390" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11392" href="../Substitution/#plfa_plfa-part2-Substitution-2892" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-11398" href="../BigStep/#plfa_plfa-part2-BigStep-11365" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-11400" href="../BigStep/#plfa_plfa-part2-BigStep-11367" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-11401" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-11403" href="../BigStep/#plfa_plfa-part2-BigStep-11403" class="Bound">σ₂</a> <a id="plfa_plfa-part2-BigStep-11406" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11408" href="../Substitution/#plfa_plfa-part2-Substitution-2892" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-11414" href="../BigStep/#plfa_plfa-part2-BigStep-11367" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-11416" href="../BigStep/#plfa_plfa-part2-BigStep-11369" class="Bound">Σ</a><a id="plfa_plfa-part2-BigStep-11417" class="Symbol">}</a>
  <a id="plfa_plfa-part2-BigStep-11421" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-11423" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-11429" href="../BigStep/#plfa_plfa-part2-BigStep-11403" class="Bound">σ₂</a> <a id="plfa_plfa-part2-BigStep-11432" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-11433" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-11439" href="../BigStep/#plfa_plfa-part2-BigStep-11387" class="Bound">σ₁</a> <a id="plfa_plfa-part2-BigStep-11442" href="../BigStep/#plfa_plfa-part2-BigStep-11375" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-11443" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-11445" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-BigStep-11447" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-11453" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-11454" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-11460" href="../BigStep/#plfa_plfa-part2-BigStep-11403" class="Bound">σ₂</a> <a id="plfa_plfa-part2-BigStep-11463" href="https://agda.github.io/agda-stdlib/v2.2-dev/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part2-BigStep-11465" href="../BigStep/#plfa_plfa-part2-BigStep-11387" class="Bound">σ₁</a><a id="plfa_plfa-part2-BigStep-11467" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-11469" href="../BigStep/#plfa_plfa-part2-BigStep-11375" class="Bound">M</a>
<a id="plfa_plfa-part2-BigStep-11471" href="../BigStep/#plfa_plfa-part2-BigStep-11353" class="Function">sub-sub</a> <a id="plfa_plfa-part2-BigStep-11479" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-11480" class="Argument">M</a> <a id="plfa_plfa-part2-BigStep-11482" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-11484" href="../BigStep/#plfa_plfa-part2-BigStep-11484" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-11485" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-11487" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-11489" href="../Substitution/#plfa_plfa-part2-Substitution-27380" class="Function">plfa.part2.Substitution.sub-sub</a> <a id="plfa_plfa-part2-BigStep-11521" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-11522" class="Argument">M</a> <a id="plfa_plfa-part2-BigStep-11524" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-11526" href="../BigStep/#plfa_plfa-part2-BigStep-11484" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-11527" class="Symbol">}</a>
</pre><p>我们到达了主要引理：如果 <code>M</code> 在环境 <code>γ</code> 中大步求值为闭包 <code>V</code>，并且 <code>γ ≈ₑ σ</code>， 那么 <code>subst σ M</code> 将归约为某个等价于 <code>V</code> 的项 <code>N</code>。我们如下叙述该证明。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-⇓→—↠×≈"></a><a id="plfa_plfa-part2-BigStep-11849" href="../BigStep/#plfa_plfa-part2-BigStep-11849" class="Function">⇓→—↠×≈</a> <a id="plfa_plfa-part2-BigStep-11856" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11858" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-11860" href="../BigStep/#plfa_plfa-part2-BigStep-11860" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-11861" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-11863" href="../BigStep/#plfa_plfa-part2-BigStep-11863" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-11865" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11867" href="../BigStep/#plfa_plfa-part2-BigStep-3080" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-11875" href="../BigStep/#plfa_plfa-part2-BigStep-11860" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-11876" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-11878" href="../BigStep/#plfa_plfa-part2-BigStep-11878" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-11880" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11882" href="../Substitution/#plfa_plfa-part2-Substitution-2892" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-11888" href="../BigStep/#plfa_plfa-part2-BigStep-11860" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-11890" href="../Untyped/#plfa_plfa-part2-Untyped-3820" class="InductiveConstructor">∅</a><a id="plfa_plfa-part2-BigStep-11891" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-11893" href="../BigStep/#plfa_plfa-part2-BigStep-11893" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-11895" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11897" href="../BigStep/#plfa_plfa-part2-BigStep-11860" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-11899" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-11901" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-11902" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-11904" href="../BigStep/#plfa_plfa-part2-BigStep-11904" class="Bound">V</a> <a id="plfa_plfa-part2-BigStep-11906" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11908" href="../BigStep/#plfa_plfa-part2-BigStep-3110" class="Datatype">Clos</a><a id="plfa_plfa-part2-BigStep-11912" class="Symbol">}</a>
       <a id="plfa_plfa-part2-BigStep-11921" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-11923" href="../BigStep/#plfa_plfa-part2-BigStep-11863" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-11925" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-11927" href="../BigStep/#plfa_plfa-part2-BigStep-11893" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-11929" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-11931" href="../BigStep/#plfa_plfa-part2-BigStep-11904" class="Bound">V</a>  <a id="plfa_plfa-part2-BigStep-11934" class="Symbol">→</a>  <a id="plfa_plfa-part2-BigStep-11937" href="../BigStep/#plfa_plfa-part2-BigStep-11863" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-11939" href="../BigStep/#plfa_plfa-part2-BigStep-8030" class="Function Operator">≈ₑ</a> <a id="plfa_plfa-part2-BigStep-11942" href="../BigStep/#plfa_plfa-part2-BigStep-11878" class="Bound">σ</a>
         <a id="plfa_plfa-part2-BigStep-11953" class="Comment">---------------------------------------</a>
       <a id="plfa_plfa-part2-BigStep-12000" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-12002" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">Σ[</a> <a id="plfa_plfa-part2-BigStep-12005" href="../BigStep/#plfa_plfa-part2-BigStep-12005" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-12007" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">∈</a> <a id="plfa_plfa-part2-BigStep-12009" href="../Untyped/#plfa_plfa-part2-Untyped-3820" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-BigStep-12011" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-12013" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-BigStep-12015" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">]</a> <a id="plfa_plfa-part2-BigStep-12017" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12018" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12024" href="../BigStep/#plfa_plfa-part2-BigStep-11878" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12026" href="../BigStep/#plfa_plfa-part2-BigStep-11893" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-12028" href="../Untyped/#plfa_plfa-part2-Untyped-14217" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part2-BigStep-12031" href="../BigStep/#plfa_plfa-part2-BigStep-12005" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12032" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12034" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="plfa_plfa-part2-BigStep-12036" href="../BigStep/#plfa_plfa-part2-BigStep-11904" class="Bound">V</a> <a id="plfa_plfa-part2-BigStep-12038" href="../BigStep/#plfa_plfa-part2-BigStep-8003" class="Function Operator">≈</a> <a id="plfa_plfa-part2-BigStep-12040" href="../BigStep/#plfa_plfa-part2-BigStep-12005" class="Bound">N</a>
<a id="plfa_plfa-part2-BigStep-12042" href="../BigStep/#plfa_plfa-part2-BigStep-11849" class="Function">⇓→—↠×≈</a> <a id="plfa_plfa-part2-BigStep-12049" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12050" class="Argument">γ</a> <a id="plfa_plfa-part2-BigStep-12052" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12054" href="../BigStep/#plfa_plfa-part2-BigStep-12054" class="Bound">γ</a><a id="plfa_plfa-part2-BigStep-12055" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12057" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12058" href="../BigStep/#plfa_plfa-part2-BigStep-3876" class="InductiveConstructor">⇓-var</a><a id="plfa_plfa-part2-BigStep-12063" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12064" class="Argument">x</a> <a id="plfa_plfa-part2-BigStep-12066" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12068" href="../BigStep/#plfa_plfa-part2-BigStep-12068" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-12069" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12071" href="../BigStep/#plfa_plfa-part2-BigStep-12071" class="Bound">γx≡Lδ</a> <a id="plfa_plfa-part2-BigStep-12077" href="../BigStep/#plfa_plfa-part2-BigStep-12077" class="Bound">δ⊢L⇓V</a><a id="plfa_plfa-part2-BigStep-12082" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12084" href="../BigStep/#plfa_plfa-part2-BigStep-12084" class="Bound">γ≈ₑσ</a>
    <a id="plfa_plfa-part2-BigStep-12093" class="Keyword">with</a> <a id="plfa_plfa-part2-BigStep-12098" href="../BigStep/#plfa_plfa-part2-BigStep-12054" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-12100" href="../BigStep/#plfa_plfa-part2-BigStep-12068" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-12102" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12104" href="../BigStep/#plfa_plfa-part2-BigStep-12084" class="Bound">γ≈ₑσ</a> <a id="plfa_plfa-part2-BigStep-12109" href="../BigStep/#plfa_plfa-part2-BigStep-12068" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-12111" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12113" href="../BigStep/#plfa_plfa-part2-BigStep-12071" class="Bound">γx≡Lδ</a>
<a id="plfa_plfa-part2-BigStep-12119" class="Symbol">...</a> <a id="plfa_plfa-part2-BigStep-12123" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12125" href="../BigStep/#plfa_plfa-part2-BigStep-3129" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-12130" href="../BigStep/#plfa_plfa-part2-BigStep-12130" class="Bound">L</a> <a id="plfa_plfa-part2-BigStep-12132" href="../BigStep/#plfa_plfa-part2-BigStep-12132" class="Bound">δ</a> <a id="plfa_plfa-part2-BigStep-12134" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12136" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12138" href="../BigStep/#plfa_plfa-part2-BigStep-12138" class="Bound">τ</a> <a id="plfa_plfa-part2-BigStep-12140" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12142" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12144" href="../BigStep/#plfa_plfa-part2-BigStep-12144" class="Bound">δ≈ₑτ</a> <a id="plfa_plfa-part2-BigStep-12149" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12151" href="../BigStep/#plfa_plfa-part2-BigStep-12151" class="Bound">σx≡τL</a> <a id="plfa_plfa-part2-BigStep-12157" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12159" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12161" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12163" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
      <a id="plfa_plfa-part2-BigStep-12174" class="Keyword">with</a> <a id="plfa_plfa-part2-BigStep-12179" href="../BigStep/#plfa_plfa-part2-BigStep-11849" class="Function">⇓→—↠×≈</a><a id="plfa_plfa-part2-BigStep-12185" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12186" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-12188" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12190" href="../BigStep/#plfa_plfa-part2-BigStep-12138" class="Bound">τ</a><a id="plfa_plfa-part2-BigStep-12191" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12193" class="Bound">δ⊢L⇓V</a> <a id="plfa_plfa-part2-BigStep-12199" href="../BigStep/#plfa_plfa-part2-BigStep-12144" class="Bound">δ≈ₑτ</a>
<a id="plfa_plfa-part2-BigStep-12204" class="Symbol">...</a>   <a id="plfa_plfa-part2-BigStep-12210" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12212" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12214" href="../BigStep/#plfa_plfa-part2-BigStep-12214" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-12216" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12218" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12220" href="../BigStep/#plfa_plfa-part2-BigStep-12220" class="Bound">τL—↠N</a> <a id="plfa_plfa-part2-BigStep-12226" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12228" href="../BigStep/#plfa_plfa-part2-BigStep-12228" class="Bound">V≈N</a> <a id="plfa_plfa-part2-BigStep-12232" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12234" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12236" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-BigStep-12244" class="Bound">σx≡τL</a> <a id="plfa_plfa-part2-BigStep-12250" class="Symbol">=</a>
        <a id="plfa_plfa-part2-BigStep-12260" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12262" href="../BigStep/#plfa_plfa-part2-BigStep-12214" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-12264" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12266" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12268" href="../BigStep/#plfa_plfa-part2-BigStep-12220" class="Bound">τL—↠N</a> <a id="plfa_plfa-part2-BigStep-12274" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12276" href="../BigStep/#plfa_plfa-part2-BigStep-12228" class="Bound">V≈N</a> <a id="plfa_plfa-part2-BigStep-12280" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12282" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part2-BigStep-12284" href="../BigStep/#plfa_plfa-part2-BigStep-11849" class="Function">⇓→—↠×≈</a> <a id="plfa_plfa-part2-BigStep-12291" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12292" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-12294" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12296" href="../BigStep/#plfa_plfa-part2-BigStep-12296" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-12297" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12299" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12300" class="Argument">V</a> <a id="plfa_plfa-part2-BigStep-12302" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12304" href="../BigStep/#plfa_plfa-part2-BigStep-3129" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-12309" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12310" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-12312" href="../BigStep/#plfa_plfa-part2-BigStep-12312" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12313" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12315" href="../BigStep/#plfa_plfa-part2-BigStep-12315" class="Bound">γ</a><a id="plfa_plfa-part2-BigStep-12316" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12318" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12319" href="../BigStep/#plfa_plfa-part2-BigStep-4023" class="InductiveConstructor">⇓-lam</a><a id="plfa_plfa-part2-BigStep-12324" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12326" href="../BigStep/#plfa_plfa-part2-BigStep-12326" class="Bound">γ≈ₑσ</a> <a id="plfa_plfa-part2-BigStep-12331" class="Symbol">=</a>
    <a id="plfa_plfa-part2-BigStep-12337" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12339" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12345" href="../BigStep/#plfa_plfa-part2-BigStep-12296" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12347" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12348" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-12350" href="../BigStep/#plfa_plfa-part2-BigStep-12312" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12351" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12353" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12355" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12357" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12363" href="../BigStep/#plfa_plfa-part2-BigStep-12296" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12365" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12366" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-12368" href="../BigStep/#plfa_plfa-part2-BigStep-12312" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12369" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12371" href="../Untyped/#plfa_plfa-part2-Untyped-14263" class="InductiveConstructor Operator">∎</a> <a id="plfa_plfa-part2-BigStep-12373" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12375" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12377" href="../BigStep/#plfa_plfa-part2-BigStep-12296" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12379" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12381" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12383" href="../BigStep/#plfa_plfa-part2-BigStep-12326" class="Bound">γ≈ₑσ</a> <a id="plfa_plfa-part2-BigStep-12388" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12390" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-BigStep-12395" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12397" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12399" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12401" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part2-BigStep-12403" href="../BigStep/#plfa_plfa-part2-BigStep-11849" class="Function">⇓→—↠×≈</a><a id="plfa_plfa-part2-BigStep-12409" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12410" href="../BigStep/#plfa_plfa-part2-BigStep-12410" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-12411" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-12413" href="../BigStep/#plfa_plfa-part2-BigStep-12413" class="Bound">γ</a><a id="plfa_plfa-part2-BigStep-12414" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12416" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12417" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-12419" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12421" href="../BigStep/#plfa_plfa-part2-BigStep-12421" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-12422" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12424" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12425" href="../BigStep/#plfa_plfa-part2-BigStep-12425" class="Bound">L</a> <a id="plfa_plfa-part2-BigStep-12427" href="../Untyped/#plfa_plfa-part2-Untyped-5514" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-BigStep-12429" href="../BigStep/#plfa_plfa-part2-BigStep-12429" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-12430" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12432" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12433" href="../BigStep/#plfa_plfa-part2-BigStep-12433" class="Bound">V</a><a id="plfa_plfa-part2-BigStep-12434" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12436" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12437" href="../BigStep/#plfa_plfa-part2-BigStep-4098" class="InductiveConstructor">⇓-app</a> <a id="plfa_plfa-part2-BigStep-12443" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12444" class="Argument">N</a> <a id="plfa_plfa-part2-BigStep-12446" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12448" href="../BigStep/#plfa_plfa-part2-BigStep-12448" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12449" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12451" href="../BigStep/#plfa_plfa-part2-BigStep-12451" class="Bound">L⇓ƛNδ</a> <a id="plfa_plfa-part2-BigStep-12457" href="../BigStep/#plfa_plfa-part2-BigStep-12457" class="Bound">N⇓V</a><a id="plfa_plfa-part2-BigStep-12460" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12462" href="../BigStep/#plfa_plfa-part2-BigStep-12462" class="Bound">γ≈ₑσ</a>
    <a id="plfa_plfa-part2-BigStep-12471" class="Keyword">with</a> <a id="plfa_plfa-part2-BigStep-12476" href="../BigStep/#plfa_plfa-part2-BigStep-11849" class="Function">⇓→—↠×≈</a><a id="plfa_plfa-part2-BigStep-12482" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12483" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-12485" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12487" href="../BigStep/#plfa_plfa-part2-BigStep-12421" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-12488" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12490" href="../BigStep/#plfa_plfa-part2-BigStep-12451" class="Bound">L⇓ƛNδ</a> <a id="plfa_plfa-part2-BigStep-12496" href="../BigStep/#plfa_plfa-part2-BigStep-12462" class="Bound">γ≈ₑσ</a>
<a id="plfa_plfa-part2-BigStep-12501" class="Symbol">...</a> <a id="plfa_plfa-part2-BigStep-12505" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12507" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12509" class="Symbol">_</a> <a id="plfa_plfa-part2-BigStep-12511" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12513" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12515" href="../BigStep/#plfa_plfa-part2-BigStep-12515" class="Bound">σL—↠ƛτN</a> <a id="plfa_plfa-part2-BigStep-12523" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12525" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12527" href="../BigStep/#plfa_plfa-part2-BigStep-12527" class="Bound">τ</a> <a id="plfa_plfa-part2-BigStep-12529" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12531" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12533" href="../BigStep/#plfa_plfa-part2-BigStep-12533" class="Bound">δ≈ₑτ</a> <a id="plfa_plfa-part2-BigStep-12538" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12540" href="../BigStep/#plfa_plfa-part2-BigStep-12540" class="Bound">≡ƛτN</a> <a id="plfa_plfa-part2-BigStep-12545" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12547" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12549" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12551" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12553" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-BigStep-12561" href="../BigStep/#plfa_plfa-part2-BigStep-12540" class="Bound">≡ƛτN</a>
      <a id="plfa_plfa-part2-BigStep-12572" class="Keyword">with</a> <a id="plfa_plfa-part2-BigStep-12577" href="../BigStep/#plfa_plfa-part2-BigStep-11849" class="Function">⇓→—↠×≈</a> <a id="plfa_plfa-part2-BigStep-12584" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12585" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-12587" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12589" href="../BigStep/#plfa_plfa-part2-BigStep-9089" class="Function">ext-subst</a> <a id="plfa_plfa-part2-BigStep-12599" href="../BigStep/#plfa_plfa-part2-BigStep-12527" class="Bound">τ</a> <a id="plfa_plfa-part2-BigStep-12601" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12602" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12608" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12610" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-12611" class="Symbol">)}</a> <a id="plfa_plfa-part2-BigStep-12614" class="Bound">N⇓V</a>
             <a id="plfa_plfa-part2-BigStep-12631" class="Symbol">(λ</a> <a id="plfa_plfa-part2-BigStep-12634" href="../BigStep/#plfa_plfa-part2-BigStep-12634" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-12636" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-12638" href="../BigStep/#plfa_plfa-part2-BigStep-10420" class="Function">≈ₑ-ext</a><a id="plfa_plfa-part2-BigStep-12644" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12645" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-12647" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12649" href="../BigStep/#plfa_plfa-part2-BigStep-12527" class="Bound">τ</a><a id="plfa_plfa-part2-BigStep-12650" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12652" href="../BigStep/#plfa_plfa-part2-BigStep-12533" class="Bound">δ≈ₑτ</a> <a id="plfa_plfa-part2-BigStep-12657" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12659" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12661" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12663" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12665" class="Bound">γ≈ₑσ</a> <a id="plfa_plfa-part2-BigStep-12670" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12672" href="https://agda.github.io/agda-stdlib/v2.2-dev/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-BigStep-12677" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12679" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12681" href="../BigStep/#plfa_plfa-part2-BigStep-12634" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-12682" class="Symbol">)</a>
           <a id="plfa_plfa-part2-BigStep-12695" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12697" href="../Untyped/#plfa_plfa-part2-Untyped-13053" class="InductiveConstructor">β</a><a id="plfa_plfa-part2-BigStep-12698" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12699" href="../Untyped/#plfa_plfa-part2-Untyped-3820" class="InductiveConstructor">∅</a><a id="plfa_plfa-part2-BigStep-12700" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-12702" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12708" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12709" href="../Untyped/#plfa_plfa-part2-Untyped-8550" class="Function">exts</a> <a id="plfa_plfa-part2-BigStep-12714" href="../BigStep/#plfa_plfa-part2-BigStep-12527" class="Bound">τ</a><a id="plfa_plfa-part2-BigStep-12715" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12717" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12718" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-12720" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12726" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12728" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-12729" class="Symbol">}</a>
<a id="plfa_plfa-part2-BigStep-12731" class="Symbol">...</a>   <a id="plfa_plfa-part2-BigStep-12737" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12739" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12741" href="../BigStep/#plfa_plfa-part2-BigStep-12741" class="Bound">N&#39;</a> <a id="plfa_plfa-part2-BigStep-12744" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12746" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12748" href="../BigStep/#plfa_plfa-part2-BigStep-12748" class="Bound">—↠N&#39;</a> <a id="plfa_plfa-part2-BigStep-12753" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12755" href="../BigStep/#plfa_plfa-part2-BigStep-12755" class="Bound">V≈N&#39;</a> <a id="plfa_plfa-part2-BigStep-12760" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12762" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12764" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12766" href="../BigStep/#plfa_plfa-part2-BigStep-12766" class="Bound">ƛτN·σM—→</a>
        <a id="plfa_plfa-part2-BigStep-12783" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-BigStep-12791" href="../BigStep/#plfa_plfa-part2-BigStep-11353" class="Function">sub-sub</a><a id="plfa_plfa-part2-BigStep-12798" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12799" class="Argument">M</a> <a id="plfa_plfa-part2-BigStep-12801" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12803" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12804" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-12806" class="Argument">σ₁</a> <a id="plfa_plfa-part2-BigStep-12809" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12811" href="../Untyped/#plfa_plfa-part2-Untyped-8550" class="Function">exts</a> <a id="plfa_plfa-part2-BigStep-12816" class="Bound">τ</a><a id="plfa_plfa-part2-BigStep-12817" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-12819" class="Argument">σ₂</a> <a id="plfa_plfa-part2-BigStep-12822" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12824" href="../Untyped/#plfa_plfa-part2-Untyped-9407" class="Function">subst-zero</a> <a id="plfa_plfa-part2-BigStep-12835" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12836" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12842" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12844" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-12845" class="Symbol">)}</a> <a id="plfa_plfa-part2-BigStep-12848" class="Symbol">=</a>
        <a id="plfa_plfa-part2-BigStep-12858" class="Keyword">let</a> <a id="plfa_plfa-part2-BigStep-12862" href="../BigStep/#plfa_plfa-part2-BigStep-12862" class="Bound">rs</a> <a id="plfa_plfa-part2-BigStep-12865" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12867" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12868" href="../Untyped/#plfa_plfa-part2-Untyped-5454" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-12870" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12876" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12877" href="../Untyped/#plfa_plfa-part2-Untyped-8550" class="Function">exts</a> <a id="plfa_plfa-part2-BigStep-12882" class="Bound">τ</a><a id="plfa_plfa-part2-BigStep-12883" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12885" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12886" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12888" href="../Untyped/#plfa_plfa-part2-Untyped-5514" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-BigStep-12890" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12896" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12898" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-12900" href="../Untyped/#plfa_plfa-part2-Untyped-14405" class="InductiveConstructor Operator">—→⟨</a> <a id="plfa_plfa-part2-BigStep-12904" href="../BigStep/#plfa_plfa-part2-BigStep-12766" class="Bound">ƛτN·σM—→</a> <a id="plfa_plfa-part2-BigStep-12913" href="../Untyped/#plfa_plfa-part2-Untyped-14405" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12915" href="../BigStep/#plfa_plfa-part2-BigStep-12748" class="Bound">—↠N&#39;</a> <a id="plfa_plfa-part2-BigStep-12920" class="Keyword">in</a>
        <a id="plfa_plfa-part2-BigStep-12931" class="Keyword">let</a> <a id="plfa_plfa-part2-BigStep-12935" href="../BigStep/#plfa_plfa-part2-BigStep-12935" class="Bound">g</a> <a id="plfa_plfa-part2-BigStep-12937" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12939" href="../Untyped/#plfa_plfa-part2-Untyped-27426" class="Function">—↠-trans</a> <a id="plfa_plfa-part2-BigStep-12948" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12949" href="../Untyped/#plfa_plfa-part2-Untyped-28959" class="Function">appL-cong</a> <a id="plfa_plfa-part2-BigStep-12959" class="Bound">σL—↠ƛτN</a><a id="plfa_plfa-part2-BigStep-12966" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12968" href="../BigStep/#plfa_plfa-part2-BigStep-12862" class="Bound">rs</a> <a id="plfa_plfa-part2-BigStep-12971" class="Keyword">in</a>
        <a id="plfa_plfa-part2-BigStep-12982" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12984" href="../BigStep/#plfa_plfa-part2-BigStep-12741" class="Bound">N&#39;</a> <a id="plfa_plfa-part2-BigStep-12987" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12989" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12991" href="../BigStep/#plfa_plfa-part2-BigStep-12935" class="Bound">g</a> <a id="plfa_plfa-part2-BigStep-12993" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12995" href="../BigStep/#plfa_plfa-part2-BigStep-12755" class="Bound">V≈N&#39;</a> <a id="plfa_plfa-part2-BigStep-13000" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-13002" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a>
</pre><p>该证明对 <code>γ ⊢ M ⇓ V</code> 进行归纳。我们有三种情况需要考虑。</p><ul><li>情况 <code>⇓-var</code>： 此时我们有 <code>γ x ≡ clos L δ</code> 和 <code>δ ⊢ L ⇓ V</code>。 我们需要证明对于某个 <code>N</code> 有<code>subst σ x —↠ N</code> 和 <code>V ≈ N</code>。 前提 <code>γ ≈ₑ σ</code> 告诉我们 <code>γ x ≈ σ x</code>，所以有 <code>clos L δ ≈ σ x</code>。 根据 <code>≈</code> 的定义， 存在一个 <code>τ</code> 使得 <code>δ ≈ₑ τ</code> 且 <code>σ x ≡ subst τ L</code>。 使用 <code>δ ⊢ L ⇓ V</code> 和 <code>δ ≈ₑ τ</code>， 归纳假设使得对于某个 <code>N</code> 有 <code>subst τ L —↠ N</code> 和 <code>V ≈ N</code>。 所以我们证明了对于某个 <code>N</code>，有 <code>subst σ x —↠ N</code> 和 <code>V ≈ N</code>。</li></ul><ul><li>情况 <code>⇓-lam</code>： 我们立刻获得 <code>subst σ (ƛ N) —↠ subst σ (ƛ N)</code> 和 <code>clos (subst σ (ƛ N)) γ ≈ subst σ (ƛ N)</code>。</li></ul><ul><li><p>情况 <code>⇓-app</code>： 使用 <code>γ ⊢ L ⇓ clos N δ</code> 和 <code>γ ≈ₑ σ</code>， 归纳假设给我们</p><pre><code>  subst σ L —↠ ƛ subst (exts τ) N                                     (1)</code></pre><p>并且对于某个 <code>τ</code> 有 <code>δ ≈ₑ τ</code>。 根据 <code>γ≈ₑσ</code> 我们有 <code>clos M γ ≈ subst σ M</code>。 与 <code>(δ ,&#39; clos M γ) ⊢ N ⇓ V</code> 一同， 归纳假设给我们 <code>V ≈ N&#39;</code> 和</p><pre><code>  subst (subst (subst-zero (subst σ M)) ∘ (exts τ)) N —↠ N&#39;         (2)</code></pre><p>同时根据 <code>β</code>，我们有</p><pre><code>  (ƛ subst (exts τ) N) · subst σ M
  —→ subst (subst-zero (subst σ M)) (subst (exts τ) N)</code></pre><p>通过 <code>sub-sub</code>，这等价于</p><pre><code>  (ƛ subst (exts τ) N) · subst σ M
  —→ subst (subst (subst-zero (subst σ M)) ∘ exts τ) N              (3)</code></pre><p>使用 (3) 和 (2) 我们有</p><pre><code>  (ƛ subst (exts τ) N) · subst σ M —↠ N&#39;                             (4)</code></pre><p>根据 (1) 我们有</p><pre><code>  subst σ L · subst σ M —↠ (ƛ subst (exts τ) N) · subst σ M</code></pre><p>与 (4) 相结合，我们得出结论</p><pre><code>  subst σ L · subst σ M —↠ N&#39;</code></pre></li></ul><p>证明了主要引理后，我们便建立起大步语义与 β-归约等价关系的必要性。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-cbn→reduce"></a><a id="plfa_plfa-part2-BigStep-16232" href="../BigStep/#plfa_plfa-part2-BigStep-16232" class="Function">cbn→reduce</a> <a id="plfa_plfa-part2-BigStep-16243" class="Symbol">:</a>  <a id="plfa_plfa-part2-BigStep-16246" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-16248" href="../BigStep/#plfa_plfa-part2-BigStep-16248" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-16250" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-16252" href="../Untyped/#plfa_plfa-part2-Untyped-3820" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-BigStep-16254" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-16256" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-16257" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-16259" href="../BigStep/#plfa_plfa-part2-BigStep-16259" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-16260" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-16262" href="../BigStep/#plfa_plfa-part2-BigStep-16262" class="Bound">δ</a> <a id="plfa_plfa-part2-BigStep-16264" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-16266" href="../BigStep/#plfa_plfa-part2-BigStep-3080" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-16274" href="../BigStep/#plfa_plfa-part2-BigStep-16259" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-16275" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-16277" href="../BigStep/#plfa_plfa-part2-BigStep-16277" class="Bound">N′</a> <a id="plfa_plfa-part2-BigStep-16280" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-16282" href="../BigStep/#plfa_plfa-part2-BigStep-16259" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-16284" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-16286" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-BigStep-16288" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-16290" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-16291" class="Symbol">}</a>
  <a id="plfa_plfa-part2-BigStep-16295" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-16297" href="../BigStep/#plfa_plfa-part2-BigStep-3328" class="Function">∅&#39;</a> <a id="plfa_plfa-part2-BigStep-16300" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-16302" href="../BigStep/#plfa_plfa-part2-BigStep-16248" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-16304" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-16306" href="../BigStep/#plfa_plfa-part2-BigStep-3129" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-16311" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-16312" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-16314" href="../BigStep/#plfa_plfa-part2-BigStep-16277" class="Bound">N′</a><a id="plfa_plfa-part2-BigStep-16316" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-16318" href="../BigStep/#plfa_plfa-part2-BigStep-16262" class="Bound">δ</a>
    <a id="plfa_plfa-part2-BigStep-16324" class="Comment">-----------------------------</a>
  <a id="plfa_plfa-part2-BigStep-16356" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-16358" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">Σ[</a> <a id="plfa_plfa-part2-BigStep-16361" href="../BigStep/#plfa_plfa-part2-BigStep-16361" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-16363" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">∈</a> <a id="plfa_plfa-part2-BigStep-16365" href="../Untyped/#plfa_plfa-part2-Untyped-3820" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-BigStep-16367" href="../Untyped/#plfa_plfa-part2-Untyped-3836" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-16369" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-BigStep-16371" href="../Untyped/#plfa_plfa-part2-Untyped-5366" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-16373" href="../Untyped/#plfa_plfa-part2-Untyped-3406" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-BigStep-16375" href="https://agda.github.io/agda-stdlib/v2.2-dev/Data.Product.Base.html#1244" class="Function">]</a> <a id="plfa_plfa-part2-BigStep-16377" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-16378" href="../BigStep/#plfa_plfa-part2-BigStep-16248" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-16380" href="../Untyped/#plfa_plfa-part2-Untyped-14217" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part2-BigStep-16383" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-16385" href="../BigStep/#plfa_plfa-part2-BigStep-16361" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-16386" class="Symbol">)</a>
<a id="plfa_plfa-part2-BigStep-16388" href="../BigStep/#plfa_plfa-part2-BigStep-16232" class="Function">cbn→reduce</a> <a id="plfa_plfa-part2-BigStep-16399" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-16400" href="../BigStep/#plfa_plfa-part2-BigStep-16400" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-16401" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-16403" href="../BigStep/#plfa_plfa-part2-BigStep-16403" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-16404" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-16406" href="../BigStep/#plfa_plfa-part2-BigStep-16406" class="Bound">δ</a><a id="plfa_plfa-part2-BigStep-16407" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-16409" href="../BigStep/#plfa_plfa-part2-BigStep-16409" class="Bound">N′</a><a id="plfa_plfa-part2-BigStep-16411" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-16413" href="../BigStep/#plfa_plfa-part2-BigStep-16413" class="Bound">M⇓c</a>
    <a id="plfa_plfa-part2-BigStep-16421" class="Keyword">with</a> <a id="plfa_plfa-part2-BigStep-16426" href="../BigStep/#plfa_plfa-part2-BigStep-11849" class="Function">⇓→—↠×≈</a><a id="plfa_plfa-part2-BigStep-16432" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-16433" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-16435" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-16437" href="../Substitution/#plfa_plfa-part2-Substitution-3772" class="Function">ids</a><a id="plfa_plfa-part2-BigStep-16440" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-16442" href="../BigStep/#plfa_plfa-part2-BigStep-16413" class="Bound">M⇓c</a> <a id="plfa_plfa-part2-BigStep-16446" href="../BigStep/#plfa_plfa-part2-BigStep-8748" class="Function">≈ₑ-id</a>
<a id="plfa_plfa-part2-BigStep-16452" class="Symbol">...</a> <a id="plfa_plfa-part2-BigStep-16456" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-16458" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-16460" href="../BigStep/#plfa_plfa-part2-BigStep-16460" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-16462" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-16464" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-16466" href="../BigStep/#plfa_plfa-part2-BigStep-16466" class="Bound">rs</a> <a id="plfa_plfa-part2-BigStep-16469" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-16471" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-16473" href="../BigStep/#plfa_plfa-part2-BigStep-16473" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-16475" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-16477" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-16479" href="../BigStep/#plfa_plfa-part2-BigStep-16479" class="Bound">h</a> <a id="plfa_plfa-part2-BigStep-16481" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-16483" href="../BigStep/#plfa_plfa-part2-BigStep-16483" class="Bound">eq2</a> <a id="plfa_plfa-part2-BigStep-16487" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-16489" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-16491" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-16493" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-16495" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-BigStep-16503" href="../BigStep/#plfa_plfa-part2-BigStep-8898" class="Function">sub-id</a><a id="plfa_plfa-part2-BigStep-16509" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-16510" class="Argument">M</a> <a id="plfa_plfa-part2-BigStep-16512" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-16514" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-16515" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-16517" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-16519" href="../BigStep/#plfa_plfa-part2-BigStep-16483" class="Bound">eq2</a> <a id="plfa_plfa-part2-BigStep-16523" class="Symbol">=</a>
      <a id="plfa_plfa-part2-BigStep-16531" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-16533" href="../Untyped/#plfa_plfa-part2-Untyped-8911" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-16539" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-16540" href="../Untyped/#plfa_plfa-part2-Untyped-8550" class="Function">exts</a> <a id="plfa_plfa-part2-BigStep-16545" href="../BigStep/#plfa_plfa-part2-BigStep-16473" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-16546" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-16548" class="Bound">N′</a> <a id="plfa_plfa-part2-BigStep-16551" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-16553" href="../BigStep/#plfa_plfa-part2-BigStep-16466" class="Bound">rs</a> <a id="plfa_plfa-part2-BigStep-16556" href="../BigStep/#plfa_plfa-part2-BigStep-1932" class="InductiveConstructor Operator">⟩</a>
</pre><h4 id="练习-big-alt-implies-multi实践">练习 <code>big-alt-implies-multi</code>（实践）</h4><p>为使用替换而不是环境的传名调用表达另一种大步语义，形式为 <code>M ↓ N</code>。 即应用规则 <code>⇓-app</code> 应像在 <code>N [ M ]</code> 中一样执行替换而不是用 <code>M</code> 扩展环境。 证明 <code>M ↓ N</code> 蕴含 <code>M —↠ N</code>。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-17108" class="Comment">-- 请将代码写在此处</a>
</pre><h2 id="β-归约至-λ-抽象蕴含大步求值">β-归约至 λ-抽象蕴含大步求值</h2><p>充分性的证明，也就是 β-归约至 λ-抽象蕴含大步语义求值是更困难的。 困难源于通过 <code>ζ</code> 规则在 λ-抽象下的归约过程。 传名调用语义在 λ-演算中并不会归约，因此直接通过归纳归约序列来证明是不可能的。 在文章 <strong>Call-by-name, call-by-value, and the λ-calculus</strong> 中， Plotkin使用两个辅助归约关系分两步完成了证明。 第一步使用了 Curry-Feys 标准化这一经典方法， 它依赖于 <strong>标准归约序列（Standard Reduction Sequence）</strong> 的概念， 通过在 λ-演算下将传名调用扩展以包括归约， 标准归约序列充当了完整 β-归约与传名调用求值的中间点。 Plotkin证明了 <code>M</code> 能被归约为 <code>L</code> 当且仅当 <code>M</code> 与 <code>L</code> 通过一个标准归约序列相关。</p><pre><code>定理 1（标准化）
`M —↠ L` 当且仅当 `M` 能通过一个标准归约序列归约成 `L`。</code></pre><p>Plotkin 接着引入了<strong>左归约（Left Reduction）</strong> 作为传名调用的小步描述， 并且用上方的定理证明了 β-归约与左归约在下述情况下等价。</p><pre><code>推论 1
`M —↠ ƛ N` 当且仅当对于某个 `N′`，`M`能通过左归约成 `ƛ N′`。</code></pre><p>证明的下一步将左归约与传名调用求值联系起来。</p><pre><code>定理 2
`M` 左归约成 `ƛ N` 当且仅当 `⊢ M ⇓ ƛ N`。</code></pre><p>（Plotkin 的传名调用求值使用替换而不是环境， 这解释了为何在上文定理的描述中环境被隐去了。）</p><p>将推论 1 和定理 2 相结合，Plotkin 证明了传名调用求值与 β-归约等价。</p><pre><code>推论 2
`M —↠ ƛ N` 当且仅当对某个 `N′`，`⊢ M ⇓ ƛ N′`。</code></pre><p>Plotkin 还证明了 λᵥ-演算中的类似结果，将其与传值调用求值相联系。 为了更好阐述该证明，我们推荐阅读由 Felleisen、Findler 和 Flatt 所著的 <em>Semantics Engineering with PLT Redex</em> 的第五章。</p><p>我们不通过上文描述的标准化方式来完成充分性的证明， 而是将其推迟到发展出 λ-演算的指称语义后， 此时该证明是指称语义中 soundness 和 adequacy 的推论。</p><h2 id="unicode">Unicode</h2><p>本章中使用了以下 Unicode：</p><pre><code>≈  U+2248  ALMOST EQUAL TO (\~~ or \approx)
ₑ  U+2091  LATIN SUBSCRIPT SMALL LETTER E (\_e)
⊢  U+22A2  RIGHT TACK (\|- or \vdash)
⇓  U+21DB  DOWNWARDS DOUBLE ARROW (\d= or \Downarrow)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Confluence/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part2/BigStep.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Denotational/">下一章</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">编程语言基础：Agda 描述</h2>本章译者：starxingchenc<div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>本书按照<a rel="license" href="https://creativecommons.org/licenses/by/4.0/">创作公用 署名 4.0 国际</a>许可协议授权</div></footer><script src="../assets/js/ruby-tags.js" integrity="sha512-ohLx3ydhHH5A2SRALHSSKZ1WRfgHk35NR9ef+bnxc1XgZCXDRYG5oNYdx2STnACcshdWXXnPjb5doJLM6Zhaew==" id="script-ruby-tags"></script></body></html>