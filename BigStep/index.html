<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>编程语言基础：Agda 描述 – BigStep</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">编程语言基础：Agda 描述</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">主页</a> <a class="page-link" href="../Announcements/">公告</a> <a class="page-link" href="../GettingStarted/">使用说明</a> <a class="page-link" href="../Citing/">引用</a> <a class="page-link" href="https://plfa.github.io/">English</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Confluence/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part2/BigStep.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Denotational/">下一章</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">BigStep: 无类型 λ-演算的大步语义</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part2-BigStep-125" class="Keyword">module</a> <a id="plfa_plfa-part2-BigStep-132" href="../BigStep/#" class="Module">plfa.part2.BigStep</a> <a id="plfa_plfa-part2-BigStep-151" class="Keyword">where</a>
</pre><h2 id="简介">简介</h2><p>传名调用求值策略（Call-by-name Evaluation Strategy）是在 λ-演算中计算程序值的一种确定性方法。 也就是说，传名调用能够求出值当且仅当 β-归约能将程序归约为一个 λ-抽象。 在这一章节，我们将定义传名调用求值并且证明这个等价命题的必要性。 充分性的部分较为复杂，通常通过 Curry-Feys 标准化证明。 根据 Plotkin 的工作，我们给出这个证明的概要， 但是由于这是指称语义的一个简单性质， 我们将在为 λ-演算发展出指称语义后在 Agda 中完整地证明它。</p><p>我们将传名调用策略表示为一个输入表达式与输出值间的关系。 因为这样的关系将输入表达式 <code>M</code> 和最终结果 <code>V</code> 直接相联系， 它通常被叫做<strong>大步语义（Big-stepsemantics）</strong>，写做 <code>M ⇓ V</code>。 而小步归约关系则被写做 <code>M —→ M′</code>，它仅通过一步子计算来将 <code>M</code> 归约为另一个表达式 <code>M′</code>。</p><h2 id="导入">导入</h2><pre class="Agda"><a id="plfa_plfa-part2-BigStep-1755" class="Keyword">open</a> <a id="plfa_plfa-part2-BigStep-1760" class="Keyword">import</a> <a id="plfa_plfa-part2-BigStep-1767" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
  <a id="plfa_plfa-part2-BigStep-1807" class="Keyword">using</a> <a id="plfa_plfa-part2-BigStep-1813" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-1814" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="plfa_plfa-part2-BigStep-1817" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1819" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-BigStep-1823" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1825" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1729" class="Function">trans</a><a id="plfa_plfa-part2-BigStep-1830" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1832" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a><a id="plfa_plfa-part2-BigStep-1835" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1837" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1461" class="Function">cong-app</a><a id="plfa_plfa-part2-BigStep-1845" class="Symbol">)</a>
<a id="plfa_plfa-part2-BigStep-1847" class="Keyword">open</a> <a id="plfa_plfa-part2-BigStep-1852" class="Keyword">import</a> <a id="plfa_plfa-part2-BigStep-1859" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html" class="Module">Data.Product</a> <a id="plfa_plfa-part2-BigStep-1872" class="Keyword">using</a> <a id="plfa_plfa-part2-BigStep-1878" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-1879" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">_×_</a><a id="plfa_plfa-part2-BigStep-1882" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1884" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="plfa_plfa-part2-BigStep-1885" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1887" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ-syntax</a><a id="plfa_plfa-part2-BigStep-1895" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1897" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1369" class="Function">∃</a><a id="plfa_plfa-part2-BigStep-1898" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1900" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1806" class="Function">∃-syntax</a><a id="plfa_plfa-part2-BigStep-1908" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1910" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a><a id="plfa_plfa-part2-BigStep-1915" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1917" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a><a id="plfa_plfa-part2-BigStep-1922" class="Symbol">)</a>
  <a id="plfa_plfa-part2-BigStep-1926" class="Keyword">renaming</a> <a id="plfa_plfa-part2-BigStep-1935" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-1936" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part2-BigStep-1940" class="Symbol">to</a> <a id="plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part2-BigStep-1948" class="Symbol">)</a>
<a id="plfa_plfa-part2-BigStep-1950" class="Keyword">open</a> <a id="plfa_plfa-part2-BigStep-1955" class="Keyword">import</a> <a id="plfa_plfa-part2-BigStep-1962" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.html" class="Module">Function</a> <a id="plfa_plfa-part2-BigStep-1971" class="Keyword">using</a> <a id="plfa_plfa-part2-BigStep-1977" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-1978" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">_∘_</a><a id="plfa_plfa-part2-BigStep-1981" class="Symbol">)</a>
<a id="plfa_plfa-part2-BigStep-1983" class="Keyword">open</a> <a id="plfa_plfa-part2-BigStep-1988" class="Keyword">import</a> <a id="plfa_plfa-part2-BigStep-1995" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
  <a id="plfa_plfa-part2-BigStep-2016" class="Keyword">using</a> <a id="plfa_plfa-part2-BigStep-2022" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-2023" href="../Untyped/#plfa_plfa-part2-Untyped-3848" class="Datatype">Context</a><a id="plfa_plfa-part2-BigStep-2030" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2032" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part2-BigStep-2035" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2037" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part2-BigStep-2040" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2042" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-2043" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2045" href="../Untyped/#plfa_plfa-part2-Untyped-3870" class="InductiveConstructor">∅</a><a id="plfa_plfa-part2-BigStep-2046" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2048" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part2-BigStep-2051" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2053" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-BigStep-2054" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2056" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-BigStep-2058" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2060" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part2-BigStep-2062" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2064" href="../Untyped/#plfa_plfa-part2-Untyped-6491" class="Function Operator">#_</a><a id="plfa_plfa-part2-BigStep-2066" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2068" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part2-BigStep-2070" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2072" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part2-BigStep-2075" class="Symbol">;</a>
  <a id="plfa_plfa-part2-BigStep-2079" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a><a id="plfa_plfa-part2-BigStep-2084" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2086" href="../Untyped/#plfa_plfa-part2-Untyped-9458" class="Function">subst-zero</a><a id="plfa_plfa-part2-BigStep-2096" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2098" href="../Untyped/#plfa_plfa-part2-Untyped-8601" class="Function">exts</a><a id="plfa_plfa-part2-BigStep-2102" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2104" href="../Untyped/#plfa_plfa-part2-Untyped-8074" class="Function">rename</a><a id="plfa_plfa-part2-BigStep-2110" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2112" href="../Untyped/#plfa_plfa-part2-Untyped-13104" class="InductiveConstructor">β</a><a id="plfa_plfa-part2-BigStep-2113" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2115" href="../Untyped/#plfa_plfa-part2-Untyped-12924" class="InductiveConstructor">ξ₁</a><a id="plfa_plfa-part2-BigStep-2117" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2119" href="../Untyped/#plfa_plfa-part2-Untyped-13014" class="InductiveConstructor">ξ₂</a><a id="plfa_plfa-part2-BigStep-2121" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2123" href="../Untyped/#plfa_plfa-part2-Untyped-13212" class="InductiveConstructor">ζ</a><a id="plfa_plfa-part2-BigStep-2124" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2126" href="../Untyped/#plfa_plfa-part2-Untyped-12874" class="Datatype Operator">_—→_</a><a id="plfa_plfa-part2-BigStep-2130" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2132" href="../Untyped/#plfa_plfa-part2-Untyped-14270" class="Datatype Operator">_—↠_</a><a id="plfa_plfa-part2-BigStep-2136" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2138" href="../Untyped/#plfa_plfa-part2-Untyped-14458" class="InductiveConstructor Operator">_—→⟨_⟩_</a><a id="plfa_plfa-part2-BigStep-2145" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2147" href="../Untyped/#plfa_plfa-part2-Untyped-14316" class="InductiveConstructor Operator">_∎</a><a id="plfa_plfa-part2-BigStep-2149" class="Symbol">;</a>
  <a id="plfa_plfa-part2-BigStep-2153" href="../Untyped/#plfa_plfa-part2-Untyped-27482" class="Function">—↠-trans</a><a id="plfa_plfa-part2-BigStep-2161" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2163" href="../Untyped/#plfa_plfa-part2-Untyped-29015" class="Function">appL-cong</a><a id="plfa_plfa-part2-BigStep-2172" class="Symbol">)</a>
<a id="plfa_plfa-part2-BigStep-2174" class="Keyword">open</a> <a id="plfa_plfa-part2-BigStep-2179" class="Keyword">import</a> <a id="plfa_plfa-part2-BigStep-2186" href="../Substitution/#" class="Module">plfa.part2.Substitution</a> <a id="plfa_plfa-part2-BigStep-2210" class="Keyword">using</a> <a id="plfa_plfa-part2-BigStep-2216" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-2217" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a><a id="plfa_plfa-part2-BigStep-2222" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2224" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-BigStep-2227" class="Symbol">)</a>
</pre><h2 id="环境">环境</h2><p>为了处理变量和函数应用，我们要么像在 <code>—→</code> 中一样使用替换，要么使用一个<strong>环境（Environment）</strong>。 传名调用中的环境是一个从变量到闭包（即项与其对应的环境）的映射。 我们之所以使用环境取代替换是因为传名调用的核心更接近于语言的实现。 在后续章节中介绍的指称语义也会用到环境，而且对 adequacy 的证明也会变得更加容易。</p><p>我们如下定义环境和闭包。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-ClosEnv"></a><a id="plfa_plfa-part2-BigStep-3086" href="../BigStep/#plfa_plfa-part2-BigStep-3086" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3094" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3096" href="../Untyped/#plfa_plfa-part2-Untyped-3848" class="Datatype">Context</a> <a id="plfa_plfa-part2-BigStep-3104" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3106" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a>

<a id="plfa_plfa-part2-BigStep-3111" class="Keyword">data</a> <a id="plfa_plfa-part2-BigStep-Clos"></a><a id="plfa_plfa-part2-BigStep-3116" href="../BigStep/#plfa_plfa-part2-BigStep-3116" class="Datatype">Clos</a> <a id="plfa_plfa-part2-BigStep-3121" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3123" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part2-BigStep-3127" class="Keyword">where</a>
  <a id="plfa_plfa-part2-BigStep-Clos.clos"></a><a id="plfa_plfa-part2-BigStep-3135" href="../BigStep/#plfa_plfa-part2-BigStep-3135" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-3140" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3142" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-3144" href="../BigStep/#plfa_plfa-part2-BigStep-3144" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-3145" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-3147" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3149" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-3150" href="../BigStep/#plfa_plfa-part2-BigStep-3150" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-3152" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3154" href="../BigStep/#plfa_plfa-part2-BigStep-3144" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3156" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-3158" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-3159" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-3161" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3163" href="../BigStep/#plfa_plfa-part2-BigStep-3086" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3171" href="../BigStep/#plfa_plfa-part2-BigStep-3144" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3173" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3175" href="../BigStep/#plfa_plfa-part2-BigStep-3116" class="Datatype">Clos</a>

<a id="plfa_plfa-part2-BigStep-3181" href="../BigStep/#plfa_plfa-part2-BigStep-3086" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3189" href="../BigStep/#plfa_plfa-part2-BigStep-3189" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3191" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-3193" class="Symbol">∀</a> <a id="plfa_plfa-part2-BigStep-3195" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-3196" href="../BigStep/#plfa_plfa-part2-BigStep-3196" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-3198" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3200" href="../BigStep/#plfa_plfa-part2-BigStep-3189" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3202" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-BigStep-3204" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-3205" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-3207" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3209" href="../BigStep/#plfa_plfa-part2-BigStep-3116" class="Datatype">Clos</a>
</pre><p>通常，我们有空环境，也可以扩展一个环境。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-∅&#39;"></a><a id="plfa_plfa-part2-BigStep-3334" href="../BigStep/#plfa_plfa-part2-BigStep-3334" class="Function">∅&#39;</a> <a id="plfa_plfa-part2-BigStep-3337" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3339" href="../BigStep/#plfa_plfa-part2-BigStep-3086" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3347" href="../Untyped/#plfa_plfa-part2-Untyped-3870" class="InductiveConstructor">∅</a>
<a id="plfa_plfa-part2-BigStep-3349" href="../BigStep/#plfa_plfa-part2-BigStep-3334" class="Function">∅&#39;</a> <a id="plfa_plfa-part2-BigStep-3352" class="Symbol">()</a>

<a id="plfa_plfa-part2-BigStep-_,&#39;_"></a><a id="plfa_plfa-part2-BigStep-3356" href="../BigStep/#plfa_plfa-part2-BigStep-3356" class="Function Operator">_,&#39;_</a> <a id="plfa_plfa-part2-BigStep-3361" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3363" class="Symbol">∀</a> <a id="plfa_plfa-part2-BigStep-3365" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-3366" href="../BigStep/#plfa_plfa-part2-BigStep-3366" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-3367" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-3369" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3371" href="../BigStep/#plfa_plfa-part2-BigStep-3086" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3379" href="../BigStep/#plfa_plfa-part2-BigStep-3366" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3381" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3383" href="../BigStep/#plfa_plfa-part2-BigStep-3116" class="Datatype">Clos</a> <a id="plfa_plfa-part2-BigStep-3388" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3390" href="../BigStep/#plfa_plfa-part2-BigStep-3086" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3398" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-3399" href="../BigStep/#plfa_plfa-part2-BigStep-3366" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3401" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-3403" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-3404" class="Symbol">)</a>
<a id="plfa_plfa-part2-BigStep-3406" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-3407" href="../BigStep/#plfa_plfa-part2-BigStep-3407" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-3409" href="../BigStep/#plfa_plfa-part2-BigStep-3356" class="Function Operator">,&#39;</a> <a id="plfa_plfa-part2-BigStep-3412" href="../BigStep/#plfa_plfa-part2-BigStep-3412" class="Bound">c</a><a id="plfa_plfa-part2-BigStep-3413" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-3415" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-BigStep-3417" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-3419" href="../BigStep/#plfa_plfa-part2-BigStep-3412" class="Bound">c</a>
<a id="plfa_plfa-part2-BigStep-3421" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-3422" href="../BigStep/#plfa_plfa-part2-BigStep-3422" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-3424" href="../BigStep/#plfa_plfa-part2-BigStep-3356" class="Function Operator">,&#39;</a> <a id="plfa_plfa-part2-BigStep-3427" href="../BigStep/#plfa_plfa-part2-BigStep-3427" class="Bound">c</a><a id="plfa_plfa-part2-BigStep-3428" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-3430" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-3431" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-BigStep-3433" href="../BigStep/#plfa_plfa-part2-BigStep-3433" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-3434" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-3436" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-3438" href="../BigStep/#plfa_plfa-part2-BigStep-3422" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-3440" href="../BigStep/#plfa_plfa-part2-BigStep-3433" class="Bound">x</a>
</pre><h2 id="大步求值">大步求值</h2><p>大步语义被表现为一个三元关系，写作 <code>γ ⊢ M ⇓ V</code>， 其中 <code>γ</code> 是环境，<code>M</code>是输入项，<code>V</code> 是结果值。 <strong>值（Value）</strong> 是一个项是 λ-抽象的闭包。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-3820" class="Keyword">data</a> <a id="plfa_plfa-part2-BigStep-_⊢_⇓_"></a><a id="plfa_plfa-part2-BigStep-3825" href="../BigStep/#plfa_plfa-part2-BigStep-3825" class="Datatype Operator">_⊢_⇓_</a> <a id="plfa_plfa-part2-BigStep-3831" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3833" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-3835" href="../BigStep/#plfa_plfa-part2-BigStep-3835" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-3836" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-3838" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3840" href="../BigStep/#plfa_plfa-part2-BigStep-3086" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3848" href="../BigStep/#plfa_plfa-part2-BigStep-3835" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3850" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3852" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-3853" href="../BigStep/#plfa_plfa-part2-BigStep-3835" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3855" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-3857" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-3858" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-3860" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3862" href="../BigStep/#plfa_plfa-part2-BigStep-3116" class="Datatype">Clos</a> <a id="plfa_plfa-part2-BigStep-3867" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3869" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part2-BigStep-3873" class="Keyword">where</a>

  <a id="plfa_plfa-part2-BigStep-_⊢_⇓_.⇓-var"></a><a id="plfa_plfa-part2-BigStep-3882" href="../BigStep/#plfa_plfa-part2-BigStep-3882" class="InductiveConstructor">⇓-var</a> <a id="plfa_plfa-part2-BigStep-3888" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3890" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-3892" href="../BigStep/#plfa_plfa-part2-BigStep-3892" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-3893" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-3895" href="../BigStep/#plfa_plfa-part2-BigStep-3895" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-3897" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3899" href="../BigStep/#plfa_plfa-part2-BigStep-3086" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3907" href="../BigStep/#plfa_plfa-part2-BigStep-3892" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-3908" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-3910" href="../BigStep/#plfa_plfa-part2-BigStep-3910" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-3912" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3914" href="../BigStep/#plfa_plfa-part2-BigStep-3892" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3916" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-BigStep-3918" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-3919" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-3921" href="../BigStep/#plfa_plfa-part2-BigStep-3921" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-3922" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-3924" href="../BigStep/#plfa_plfa-part2-BigStep-3924" class="Bound">δ</a> <a id="plfa_plfa-part2-BigStep-3926" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3928" href="../BigStep/#plfa_plfa-part2-BigStep-3086" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3936" href="../BigStep/#plfa_plfa-part2-BigStep-3921" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-3937" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-3939" href="../BigStep/#plfa_plfa-part2-BigStep-3939" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-3941" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3943" href="../BigStep/#plfa_plfa-part2-BigStep-3921" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-3945" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-3947" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-3948" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-3950" href="../BigStep/#plfa_plfa-part2-BigStep-3950" class="Bound">V</a><a id="plfa_plfa-part2-BigStep-3951" class="Symbol">}</a>
    <a id="plfa_plfa-part2-BigStep-3957" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3959" href="../BigStep/#plfa_plfa-part2-BigStep-3895" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-3961" href="../BigStep/#plfa_plfa-part2-BigStep-3910" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-3963" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-BigStep-3965" href="../BigStep/#plfa_plfa-part2-BigStep-3135" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-3970" href="../BigStep/#plfa_plfa-part2-BigStep-3939" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-3972" href="../BigStep/#plfa_plfa-part2-BigStep-3924" class="Bound">δ</a>
    <a id="plfa_plfa-part2-BigStep-3978" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3980" href="../BigStep/#plfa_plfa-part2-BigStep-3924" class="Bound">δ</a> <a id="plfa_plfa-part2-BigStep-3982" href="../BigStep/#plfa_plfa-part2-BigStep-3825" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-3984" href="../BigStep/#plfa_plfa-part2-BigStep-3939" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-3986" href="../BigStep/#plfa_plfa-part2-BigStep-3825" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-3988" href="../BigStep/#plfa_plfa-part2-BigStep-3950" class="Bound">V</a>
      <a id="plfa_plfa-part2-BigStep-3996" class="Comment">-----------</a>
    <a id="plfa_plfa-part2-BigStep-4012" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-4014" href="../BigStep/#plfa_plfa-part2-BigStep-3895" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-4016" href="../BigStep/#plfa_plfa-part2-BigStep-3825" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4018" href="../Untyped/#plfa_plfa-part2-Untyped-5453" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-BigStep-4020" href="../BigStep/#plfa_plfa-part2-BigStep-3910" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-4022" href="../BigStep/#plfa_plfa-part2-BigStep-3825" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-4024" href="../BigStep/#plfa_plfa-part2-BigStep-3950" class="Bound">V</a>

  <a id="plfa_plfa-part2-BigStep-_⊢_⇓_.⇓-lam"></a><a id="plfa_plfa-part2-BigStep-4029" href="../BigStep/#plfa_plfa-part2-BigStep-4029" class="InductiveConstructor">⇓-lam</a> <a id="plfa_plfa-part2-BigStep-4035" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4037" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-4039" href="../BigStep/#plfa_plfa-part2-BigStep-4039" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-4040" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4042" href="../BigStep/#plfa_plfa-part2-BigStep-4042" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-4044" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4046" href="../BigStep/#plfa_plfa-part2-BigStep-3086" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-4054" href="../BigStep/#plfa_plfa-part2-BigStep-4039" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-4055" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4057" href="../BigStep/#plfa_plfa-part2-BigStep-4057" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-4059" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4061" href="../BigStep/#plfa_plfa-part2-BigStep-4039" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-4063" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-4065" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-BigStep-4067" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4069" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-4070" class="Symbol">}</a>
    <a id="plfa_plfa-part2-BigStep-4076" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-4078" href="../BigStep/#plfa_plfa-part2-BigStep-4042" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-4080" href="../BigStep/#plfa_plfa-part2-BigStep-3825" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4082" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-4084" href="../BigStep/#plfa_plfa-part2-BigStep-4057" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-4086" href="../BigStep/#plfa_plfa-part2-BigStep-3825" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-4088" href="../BigStep/#plfa_plfa-part2-BigStep-3135" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-4093" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-4094" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-4096" href="../BigStep/#plfa_plfa-part2-BigStep-4057" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-4097" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-4099" href="../BigStep/#plfa_plfa-part2-BigStep-4042" class="Bound">γ</a>

  <a id="plfa_plfa-part2-BigStep-_⊢_⇓_.⇓-app"></a><a id="plfa_plfa-part2-BigStep-4104" href="../BigStep/#plfa_plfa-part2-BigStep-4104" class="InductiveConstructor">⇓-app</a> <a id="plfa_plfa-part2-BigStep-4110" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4112" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-4114" href="../BigStep/#plfa_plfa-part2-BigStep-4114" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-4115" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4117" href="../BigStep/#plfa_plfa-part2-BigStep-4117" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-4119" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4121" href="../BigStep/#plfa_plfa-part2-BigStep-3086" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-4129" href="../BigStep/#plfa_plfa-part2-BigStep-4114" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-4130" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4132" href="../BigStep/#plfa_plfa-part2-BigStep-4132" class="Bound">L</a> <a id="plfa_plfa-part2-BigStep-4134" href="../BigStep/#plfa_plfa-part2-BigStep-4134" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-4136" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4138" href="../BigStep/#plfa_plfa-part2-BigStep-4114" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-4140" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4142" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-4143" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4145" href="../BigStep/#plfa_plfa-part2-BigStep-4145" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-4146" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4148" href="../BigStep/#plfa_plfa-part2-BigStep-4148" class="Bound">δ</a> <a id="plfa_plfa-part2-BigStep-4150" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4152" href="../BigStep/#plfa_plfa-part2-BigStep-3086" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-4160" href="../BigStep/#plfa_plfa-part2-BigStep-4145" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-4161" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4163" href="../BigStep/#plfa_plfa-part2-BigStep-4163" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-4165" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4167" href="../BigStep/#plfa_plfa-part2-BigStep-4145" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-4169" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-4171" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-BigStep-4173" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4175" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-4176" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4178" href="../BigStep/#plfa_plfa-part2-BigStep-4178" class="Bound">V</a><a id="plfa_plfa-part2-BigStep-4179" class="Symbol">}</a>
    <a id="plfa_plfa-part2-BigStep-4185" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-4187" href="../BigStep/#plfa_plfa-part2-BigStep-4117" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-4189" href="../BigStep/#plfa_plfa-part2-BigStep-3825" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4191" href="../BigStep/#plfa_plfa-part2-BigStep-4132" class="Bound">L</a> <a id="plfa_plfa-part2-BigStep-4193" href="../BigStep/#plfa_plfa-part2-BigStep-3825" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-4195" href="../BigStep/#plfa_plfa-part2-BigStep-3135" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-4200" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-4201" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-4203" href="../BigStep/#plfa_plfa-part2-BigStep-4163" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-4204" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-4206" href="../BigStep/#plfa_plfa-part2-BigStep-4148" class="Bound">δ</a>   <a id="plfa_plfa-part2-BigStep-4210" class="Symbol">→</a>   <a id="plfa_plfa-part2-BigStep-4214" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-4215" href="../BigStep/#plfa_plfa-part2-BigStep-4148" class="Bound">δ</a> <a id="plfa_plfa-part2-BigStep-4217" href="../BigStep/#plfa_plfa-part2-BigStep-3356" class="Function Operator">,&#39;</a> <a id="plfa_plfa-part2-BigStep-4220" href="../BigStep/#plfa_plfa-part2-BigStep-3135" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-4225" href="../BigStep/#plfa_plfa-part2-BigStep-4134" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-4227" href="../BigStep/#plfa_plfa-part2-BigStep-4117" class="Bound">γ</a><a id="plfa_plfa-part2-BigStep-4228" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-4230" href="../BigStep/#plfa_plfa-part2-BigStep-3825" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4232" href="../BigStep/#plfa_plfa-part2-BigStep-4163" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-4234" href="../BigStep/#plfa_plfa-part2-BigStep-3825" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-4236" href="../BigStep/#plfa_plfa-part2-BigStep-4178" class="Bound">V</a>
      <a id="plfa_plfa-part2-BigStep-4244" class="Comment">---------------------------------------------------</a>
    <a id="plfa_plfa-part2-BigStep-4300" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-4302" href="../BigStep/#plfa_plfa-part2-BigStep-4117" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-4304" href="../BigStep/#plfa_plfa-part2-BigStep-3825" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4306" href="../BigStep/#plfa_plfa-part2-BigStep-4132" class="Bound">L</a> <a id="plfa_plfa-part2-BigStep-4308" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-BigStep-4310" href="../BigStep/#plfa_plfa-part2-BigStep-4134" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-4312" href="../BigStep/#plfa_plfa-part2-BigStep-3825" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-4314" href="../BigStep/#plfa_plfa-part2-BigStep-4178" class="Bound">V</a>
</pre><ul><li><p><code>⇓-var</code> 规则通过对环境中找到的相关闭包求值，从而完成对变量的求值。</p></li><li><p><code>⇓-lam</code> 规则通过包装 λ-抽象与其环境，将其转变为一个闭包。</p></li><li><p><code>⇓-app</code> 规则分两步处理函数应用。首先对操作位的项 <code>L</code> 求值，如果产生了一个包含 λ-抽象 <code>ƛ N</code> 的闭包， 就在扩展了参数 <code>M</code> 的环境中对 <code>N</code> 求值。注意到 <code>M</code> 并未在 <code>⇓-app</code> 规则中被求值， 因为进行的是传名调用而不是传值调用。</p></li></ul><h4 id="练习-big-step-eg实践">练习 <code>big-step-eg</code>（实践）</h4><p>证明 <code>(ƛ ƛ # 1) · ((ƛ # 0 · # 0) · (ƛ # 0 · # 0))</code> 能在大步传名调用求值下终止。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-5410" class="Comment">-- 请将代码写在此处。</a>
</pre><h2 id="大步语义是确定的">大步语义是确定的</h2><p>如果大步关系将一个项 <code>M</code> 求值为 <code>V</code> 和 <code>V′</code>，则 <code>V</code> 和 <code>V′</code> 必然相同。 也就是说，传名调用关系是一个部分函数。该证明由两个大步语义的推论归纳得出。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-⇓-determ"></a><a id="plfa_plfa-part2-BigStep-5844" href="../BigStep/#plfa_plfa-part2-BigStep-5844" class="Function">⇓-determ</a> <a id="plfa_plfa-part2-BigStep-5853" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-5855" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-5857" href="../BigStep/#plfa_plfa-part2-BigStep-5857" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-5858" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-5860" href="../BigStep/#plfa_plfa-part2-BigStep-5860" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-5862" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-5864" href="../BigStep/#plfa_plfa-part2-BigStep-3086" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-5872" href="../BigStep/#plfa_plfa-part2-BigStep-5857" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-5873" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-5875" href="../BigStep/#plfa_plfa-part2-BigStep-5875" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-5877" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-5879" href="../BigStep/#plfa_plfa-part2-BigStep-5857" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-5881" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-5883" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-5884" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-5886" href="../BigStep/#plfa_plfa-part2-BigStep-5886" class="Bound">V</a> <a id="plfa_plfa-part2-BigStep-5888" href="../BigStep/#plfa_plfa-part2-BigStep-5888" class="Bound">V&#39;</a> <a id="plfa_plfa-part2-BigStep-5891" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-5893" href="../BigStep/#plfa_plfa-part2-BigStep-3116" class="Datatype">Clos</a><a id="plfa_plfa-part2-BigStep-5897" class="Symbol">}</a>
  <a id="plfa_plfa-part2-BigStep-5901" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-5903" href="../BigStep/#plfa_plfa-part2-BigStep-5860" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-5905" href="../BigStep/#plfa_plfa-part2-BigStep-3825" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-5907" href="../BigStep/#plfa_plfa-part2-BigStep-5875" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-5909" href="../BigStep/#plfa_plfa-part2-BigStep-3825" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-5911" href="../BigStep/#plfa_plfa-part2-BigStep-5886" class="Bound">V</a> <a id="plfa_plfa-part2-BigStep-5913" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-5915" href="../BigStep/#plfa_plfa-part2-BigStep-5860" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-5917" href="../BigStep/#plfa_plfa-part2-BigStep-3825" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-5919" href="../BigStep/#plfa_plfa-part2-BigStep-5875" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-5921" href="../BigStep/#plfa_plfa-part2-BigStep-3825" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-5923" href="../BigStep/#plfa_plfa-part2-BigStep-5888" class="Bound">V&#39;</a>
  <a id="plfa_plfa-part2-BigStep-5928" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-5930" href="../BigStep/#plfa_plfa-part2-BigStep-5886" class="Bound">V</a> <a id="plfa_plfa-part2-BigStep-5932" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-BigStep-5934" href="../BigStep/#plfa_plfa-part2-BigStep-5888" class="Bound">V&#39;</a>
<a id="plfa_plfa-part2-BigStep-5937" href="../BigStep/#plfa_plfa-part2-BigStep-5844" class="Function">⇓-determ</a> <a id="plfa_plfa-part2-BigStep-5946" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-5947" href="../BigStep/#plfa_plfa-part2-BigStep-3882" class="InductiveConstructor">⇓-var</a> <a id="plfa_plfa-part2-BigStep-5953" href="../BigStep/#plfa_plfa-part2-BigStep-5953" class="Bound">eq1</a> <a id="plfa_plfa-part2-BigStep-5957" href="../BigStep/#plfa_plfa-part2-BigStep-5957" class="Bound">mc</a><a id="plfa_plfa-part2-BigStep-5959" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-5961" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-5962" href="../BigStep/#plfa_plfa-part2-BigStep-3882" class="InductiveConstructor">⇓-var</a> <a id="plfa_plfa-part2-BigStep-5968" href="../BigStep/#plfa_plfa-part2-BigStep-5968" class="Bound">eq2</a> <a id="plfa_plfa-part2-BigStep-5972" href="../BigStep/#plfa_plfa-part2-BigStep-5972" class="Bound">mc&#39;</a><a id="plfa_plfa-part2-BigStep-5975" class="Symbol">)</a>
    <a id="plfa_plfa-part2-BigStep-5981" class="Keyword">with</a> <a id="plfa_plfa-part2-BigStep-5986" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1729" class="Function">trans</a> <a id="plfa_plfa-part2-BigStep-5992" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-5993" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part2-BigStep-5997" href="../BigStep/#plfa_plfa-part2-BigStep-5953" class="Bound">eq1</a><a id="plfa_plfa-part2-BigStep-6000" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-6002" href="../BigStep/#plfa_plfa-part2-BigStep-5968" class="Bound">eq2</a>
<a id="plfa_plfa-part2-BigStep-6006" class="Symbol">...</a> <a id="plfa_plfa-part2-BigStep-6010" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-6012" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-BigStep-6017" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-6019" href="../BigStep/#plfa_plfa-part2-BigStep-5844" class="Function">⇓-determ</a> <a id="plfa_plfa-part2-BigStep-6028" class="Bound">mc</a> <a id="plfa_plfa-part2-BigStep-6031" class="Bound">mc&#39;</a>
<a id="plfa_plfa-part2-BigStep-6035" href="../BigStep/#plfa_plfa-part2-BigStep-5844" class="Function">⇓-determ</a> <a id="plfa_plfa-part2-BigStep-6044" href="../BigStep/#plfa_plfa-part2-BigStep-4029" class="InductiveConstructor">⇓-lam</a> <a id="plfa_plfa-part2-BigStep-6050" href="../BigStep/#plfa_plfa-part2-BigStep-4029" class="InductiveConstructor">⇓-lam</a> <a id="plfa_plfa-part2-BigStep-6056" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-6058" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part2-BigStep-6063" href="../BigStep/#plfa_plfa-part2-BigStep-5844" class="Function">⇓-determ</a> <a id="plfa_plfa-part2-BigStep-6072" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-6073" href="../BigStep/#plfa_plfa-part2-BigStep-4104" class="InductiveConstructor">⇓-app</a> <a id="plfa_plfa-part2-BigStep-6079" href="../BigStep/#plfa_plfa-part2-BigStep-6079" class="Bound">mc</a> <a id="plfa_plfa-part2-BigStep-6082" href="../BigStep/#plfa_plfa-part2-BigStep-6082" class="Bound">mc₁</a><a id="plfa_plfa-part2-BigStep-6085" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-6087" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-6088" href="../BigStep/#plfa_plfa-part2-BigStep-4104" class="InductiveConstructor">⇓-app</a> <a id="plfa_plfa-part2-BigStep-6094" href="../BigStep/#plfa_plfa-part2-BigStep-6094" class="Bound">mc&#39;</a> <a id="plfa_plfa-part2-BigStep-6098" href="../BigStep/#plfa_plfa-part2-BigStep-6098" class="Bound">mc&#39;&#39;</a><a id="plfa_plfa-part2-BigStep-6102" class="Symbol">)</a>
    <a id="plfa_plfa-part2-BigStep-6108" class="Keyword">with</a> <a id="plfa_plfa-part2-BigStep-6113" href="../BigStep/#plfa_plfa-part2-BigStep-5844" class="Function">⇓-determ</a> <a id="plfa_plfa-part2-BigStep-6122" href="../BigStep/#plfa_plfa-part2-BigStep-6079" class="Bound">mc</a> <a id="plfa_plfa-part2-BigStep-6125" href="../BigStep/#plfa_plfa-part2-BigStep-6094" class="Bound">mc&#39;</a>
<a id="plfa_plfa-part2-BigStep-6129" class="Symbol">...</a> <a id="plfa_plfa-part2-BigStep-6133" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-6135" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-BigStep-6140" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-6142" href="../BigStep/#plfa_plfa-part2-BigStep-5844" class="Function">⇓-determ</a> <a id="plfa_plfa-part2-BigStep-6151" class="Bound">mc₁</a> <a id="plfa_plfa-part2-BigStep-6155" class="Bound">mc&#39;&#39;</a>
</pre><h2 id="大步求值蕴含-β-归约至-λ-抽象">大步求值蕴含 β-归约至 λ-抽象</h2><p>如果大步求值能够求出值，那么输入项能被 β-归约归约为一个 λ-抽象：</p><pre><code>  ∅&#39; ⊢ M ⇓ clos (ƛ N′) δ
  -----------------------------
→ Σ[ N ∈ ∅ , ★ ⊢ ★ ] (M —↠ ƛ N)</code></pre><p>该证明通过对大步推导归纳来完成。通常，我们需要推广命题以完成归纳。 在 <code>⇓-app</code>（函数应用）的情况下，参数被添加到环境中，导致环境变得非空。 相应的 β-归约将参数替换进 λ-抽象的主体中。 所以我们将引理推广为允许任意环境 <code>γ</code> 并且添加一个前提将环境 <code>γ</code> 与等价的替代 <code>σ</code> 相关联。</p><p><code>⇓-app</code> 的情况也要求我们加强结论。 对于 <code>⇓-app</code>，有 <code>γ ⊢ L ⇓ clos (λ N) δ</code> 以及归纳假设给我们 <code>L —↠ ƛ N′</code>， 但我们需要知道 <code>N</code> 和 <code>N′</code> 是等价的。 特别地，<code>N&#39; ≡ subst τ N</code>，其中 <code>τ</code> 是等价于 <code>δ</code> 的替换。 因此我们扩展命题的结论，以说明这两个结果是等价的。</p><p>我们通过定义以下两个相互递归的谓词 <code>V ≈ M</code> 和 <code>γ ≈ₑ σ</code> 来得到两个精确等价的概念</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-_≈_"></a><a id="plfa_plfa-part2-BigStep-8010" href="../BigStep/#plfa_plfa-part2-BigStep-8010" class="Function Operator">_≈_</a> <a id="plfa_plfa-part2-BigStep-8014" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-8016" href="../BigStep/#plfa_plfa-part2-BigStep-3116" class="Datatype">Clos</a> <a id="plfa_plfa-part2-BigStep-8021" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-8023" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-8024" href="../Untyped/#plfa_plfa-part2-Untyped-3870" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-BigStep-8026" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-8028" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-8029" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-8031" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-8033" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a>
<a id="plfa_plfa-part2-BigStep-_≈ₑ_"></a><a id="plfa_plfa-part2-BigStep-8037" href="../BigStep/#plfa_plfa-part2-BigStep-8037" class="Function Operator">_≈ₑ_</a> <a id="plfa_plfa-part2-BigStep-8042" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-8044" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-8046" href="../BigStep/#plfa_plfa-part2-BigStep-8046" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-8047" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-8049" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-8051" href="../BigStep/#plfa_plfa-part2-BigStep-3086" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-8059" href="../BigStep/#plfa_plfa-part2-BigStep-8046" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-8061" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-8063" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-8069" href="../BigStep/#plfa_plfa-part2-BigStep-8046" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-8071" href="../Untyped/#plfa_plfa-part2-Untyped-3870" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-BigStep-8073" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-8075" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a>

<a id="plfa_plfa-part2-BigStep-8080" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-8081" href="../BigStep/#plfa_plfa-part2-BigStep-3135" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-8086" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-8087" href="../BigStep/#plfa_plfa-part2-BigStep-8087" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-8088" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-8090" href="../BigStep/#plfa_plfa-part2-BigStep-8090" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-8092" href="../BigStep/#plfa_plfa-part2-BigStep-8092" class="Bound">γ</a><a id="plfa_plfa-part2-BigStep-8093" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-8095" href="../BigStep/#plfa_plfa-part2-BigStep-8010" class="Function Operator">≈</a> <a id="plfa_plfa-part2-BigStep-8097" href="../BigStep/#plfa_plfa-part2-BigStep-8097" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-8099" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-8101" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part2-BigStep-8104" href="../BigStep/#plfa_plfa-part2-BigStep-8104" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-8106" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part2-BigStep-8108" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-8114" href="../BigStep/#plfa_plfa-part2-BigStep-8087" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-8116" href="../Untyped/#plfa_plfa-part2-Untyped-3870" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-BigStep-8118" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part2-BigStep-8120" href="../BigStep/#plfa_plfa-part2-BigStep-8092" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-8122" href="../BigStep/#plfa_plfa-part2-BigStep-8037" class="Function Operator">≈ₑ</a> <a id="plfa_plfa-part2-BigStep-8125" href="../BigStep/#plfa_plfa-part2-BigStep-8104" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-8127" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part2-BigStep-8129" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-8130" href="../BigStep/#plfa_plfa-part2-BigStep-8097" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-8132" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-BigStep-8134" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-8140" href="../BigStep/#plfa_plfa-part2-BigStep-8104" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-8142" href="../BigStep/#plfa_plfa-part2-BigStep-8090" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-8143" class="Symbol">)</a>

<a id="plfa_plfa-part2-BigStep-8146" href="../BigStep/#plfa_plfa-part2-BigStep-8146" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-8148" href="../BigStep/#plfa_plfa-part2-BigStep-8037" class="Function Operator">≈ₑ</a> <a id="plfa_plfa-part2-BigStep-8151" href="../BigStep/#plfa_plfa-part2-BigStep-8151" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-8153" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-8155" class="Symbol">∀</a> <a id="plfa_plfa-part2-BigStep-8157" href="../BigStep/#plfa_plfa-part2-BigStep-8157" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-8159" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-8161" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-8162" href="../BigStep/#plfa_plfa-part2-BigStep-8146" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-8164" href="../BigStep/#plfa_plfa-part2-BigStep-8157" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-8165" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-8167" href="../BigStep/#plfa_plfa-part2-BigStep-8010" class="Function Operator">≈</a> <a id="plfa_plfa-part2-BigStep-8169" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-8170" href="../BigStep/#plfa_plfa-part2-BigStep-8151" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-8172" href="../BigStep/#plfa_plfa-part2-BigStep-8157" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-8173" class="Symbol">)</a>
</pre><p>现在我们可以给出主要的引理。</p><pre><code>如果 γ ⊢ M ⇓ V  且  γ ≈ₑ σ,
那么有  subst σ M —↠ N  以及  V ≈ N  对于某个 N。</code></pre><p>在开始证明之前，我们需要建立一些有关等价的环境和替换的引理。</p><p>空环境与我们从 <a href="../Substitution/">Substitution</a> 章中导入的恒等替换等价。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-≈ₑ-id"></a><a id="plfa_plfa-part2-BigStep-8755" href="../BigStep/#plfa_plfa-part2-BigStep-8755" class="Function">≈ₑ-id</a> <a id="plfa_plfa-part2-BigStep-8761" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-8763" href="../BigStep/#plfa_plfa-part2-BigStep-3334" class="Function">∅&#39;</a> <a id="plfa_plfa-part2-BigStep-8766" href="../BigStep/#plfa_plfa-part2-BigStep-8037" class="Function Operator">≈ₑ</a> <a id="plfa_plfa-part2-BigStep-8769" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a>
<a id="plfa_plfa-part2-BigStep-8773" href="../BigStep/#plfa_plfa-part2-BigStep-8755" class="Function">≈ₑ-id</a> <a id="plfa_plfa-part2-BigStep-8779" class="Symbol">()</a>
</pre><p>显然，对项应用恒等替换会得到相同的项。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-sub-id"></a><a id="plfa_plfa-part2-BigStep-8905" href="../BigStep/#plfa_plfa-part2-BigStep-8905" class="Function">sub-id</a> <a id="plfa_plfa-part2-BigStep-8912" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-8914" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-8916" href="../BigStep/#plfa_plfa-part2-BigStep-8916" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-8917" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-8919" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-8920" href="../BigStep/#plfa_plfa-part2-BigStep-8920" class="Bound">A</a><a id="plfa_plfa-part2-BigStep-8921" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-8923" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-8924" href="../BigStep/#plfa_plfa-part2-BigStep-8924" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-8926" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-8928" href="../BigStep/#plfa_plfa-part2-BigStep-8916" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-8930" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-8932" href="../BigStep/#plfa_plfa-part2-BigStep-8920" class="Bound">A</a><a id="plfa_plfa-part2-BigStep-8933" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-8935" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-8937" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-8943" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-BigStep-8947" href="../BigStep/#plfa_plfa-part2-BigStep-8924" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-8949" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-BigStep-8951" href="../BigStep/#plfa_plfa-part2-BigStep-8924" class="Bound">M</a>
<a id="plfa_plfa-part2-BigStep-8953" href="../BigStep/#plfa_plfa-part2-BigStep-8905" class="Function">sub-id</a> <a id="plfa_plfa-part2-BigStep-8960" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-8962" href="../Substitution/#plfa_plfa-part2-Substitution-16836" class="Function">plfa.part2.Substitution.sub-id</a>
</pre><p>我们定义一个辅助函数来扩展替换。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-ext-subst"></a><a id="plfa_plfa-part2-BigStep-9096" href="../BigStep/#plfa_plfa-part2-BigStep-9096" class="Function">ext-subst</a> <a id="plfa_plfa-part2-BigStep-9106" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-9108" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-9110" href="../BigStep/#plfa_plfa-part2-BigStep-9110" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-9112" href="../BigStep/#plfa_plfa-part2-BigStep-9112" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-9113" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-9115" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-9117" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-9123" href="../BigStep/#plfa_plfa-part2-BigStep-9110" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-9125" href="../BigStep/#plfa_plfa-part2-BigStep-9112" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-9127" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-9129" href="../BigStep/#plfa_plfa-part2-BigStep-9112" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-9131" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-9133" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-BigStep-9135" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-9137" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-9143" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-9144" href="../BigStep/#plfa_plfa-part2-BigStep-9110" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-9146" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-9148" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-9149" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-9151" href="../BigStep/#plfa_plfa-part2-BigStep-9112" class="Bound">Δ</a>
<a id="plfa_plfa-part2-BigStep-9153" href="../BigStep/#plfa_plfa-part2-BigStep-9096" class="Function">ext-subst</a><a id="plfa_plfa-part2-BigStep-9162" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-9163" href="../BigStep/#plfa_plfa-part2-BigStep-9163" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-9164" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-9166" href="../BigStep/#plfa_plfa-part2-BigStep-9166" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-9167" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-9169" href="../BigStep/#plfa_plfa-part2-BigStep-9169" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-9171" href="../BigStep/#plfa_plfa-part2-BigStep-9171" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-9173" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-9174" href="../BigStep/#plfa_plfa-part2-BigStep-9174" class="Bound">A</a><a id="plfa_plfa-part2-BigStep-9175" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-9177" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-9179" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-9185" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-9186" href="../Untyped/#plfa_plfa-part2-Untyped-9458" class="Function">subst-zero</a> <a id="plfa_plfa-part2-BigStep-9197" href="../BigStep/#plfa_plfa-part2-BigStep-9171" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-9198" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-9200" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">∘</a> <a id="plfa_plfa-part2-BigStep-9202" href="../Untyped/#plfa_plfa-part2-Untyped-8601" class="Function">exts</a> <a id="plfa_plfa-part2-BigStep-9207" href="../BigStep/#plfa_plfa-part2-BigStep-9169" class="Bound">σ</a>
</pre><p>下一个需要证明的引理声称如果从等价的环境和替换 <code>γ ≈ₑ σ</code> 开始， 将它们用等价的闭包和项 <code>c ≈ N</code> 扩展， 将得到等价的环境和替换 <code>(γ ,&#39; V) ≈ₑ (ext-subst σ N)</code>， 即对于任何变量 <code>x</code> 有 <code>(γ ,&#39; V) x ≈ₑ (ext-subst σ N) x</code>。 证明将通过归纳 <code>x</code> 完成，并且我们需要如下引理。 该引理声称将<code>exts σ</code> 和 <code>subst-zero</code> 的组合应用至 <code>S x</code> 等同于 <code>σ x</code>。 这是 <a href="../Substitution/">Substitution</a> 章节中一个定理的推论。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-subst-zero-exts"></a><a id="plfa_plfa-part2-BigStep-10122" href="../BigStep/#plfa_plfa-part2-BigStep-10122" class="Function">subst-zero-exts</a> <a id="plfa_plfa-part2-BigStep-10138" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10140" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-10142" href="../BigStep/#plfa_plfa-part2-BigStep-10142" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-10144" href="../BigStep/#plfa_plfa-part2-BigStep-10144" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-10145" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10147" href="../BigStep/#plfa_plfa-part2-BigStep-10147" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-10149" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10151" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-10157" href="../BigStep/#plfa_plfa-part2-BigStep-10142" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-10159" href="../BigStep/#plfa_plfa-part2-BigStep-10144" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-10160" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10162" href="../BigStep/#plfa_plfa-part2-BigStep-10162" class="Bound">B</a><a id="plfa_plfa-part2-BigStep-10163" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10165" href="../BigStep/#plfa_plfa-part2-BigStep-10165" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-10167" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10169" href="../BigStep/#plfa_plfa-part2-BigStep-10144" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-10171" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-10173" href="../BigStep/#plfa_plfa-part2-BigStep-10162" class="Bound">B</a><a id="plfa_plfa-part2-BigStep-10174" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10176" href="../BigStep/#plfa_plfa-part2-BigStep-10176" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-10178" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10180" href="../BigStep/#plfa_plfa-part2-BigStep-10142" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-10182" href="../Untyped/#plfa_plfa-part2-Untyped-4374" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-BigStep-10184" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-10185" class="Symbol">}</a>
  <a id="plfa_plfa-part2-BigStep-10189" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-10191" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10192" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-10198" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10199" href="../Untyped/#plfa_plfa-part2-Untyped-9458" class="Function">subst-zero</a> <a id="plfa_plfa-part2-BigStep-10210" href="../BigStep/#plfa_plfa-part2-BigStep-10165" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-10211" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-10213" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">∘</a> <a id="plfa_plfa-part2-BigStep-10215" href="../Untyped/#plfa_plfa-part2-Untyped-8601" class="Function">exts</a> <a id="plfa_plfa-part2-BigStep-10220" href="../BigStep/#plfa_plfa-part2-BigStep-10147" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-10221" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-10223" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10224" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-BigStep-10226" href="../BigStep/#plfa_plfa-part2-BigStep-10176" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-10227" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-10229" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-BigStep-10231" href="../BigStep/#plfa_plfa-part2-BigStep-10147" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-10233" href="../BigStep/#plfa_plfa-part2-BigStep-10176" class="Bound">x</a>
<a id="plfa_plfa-part2-BigStep-10235" href="../BigStep/#plfa_plfa-part2-BigStep-10122" class="Function">subst-zero-exts</a> <a id="plfa_plfa-part2-BigStep-10251" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10252" href="../BigStep/#plfa_plfa-part2-BigStep-10252" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-10253" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10255" href="../BigStep/#plfa_plfa-part2-BigStep-10255" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-10256" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10258" href="../BigStep/#plfa_plfa-part2-BigStep-10258" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-10259" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10261" href="../BigStep/#plfa_plfa-part2-BigStep-10261" class="Bound">B</a><a id="plfa_plfa-part2-BigStep-10262" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10264" href="../BigStep/#plfa_plfa-part2-BigStep-10264" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-10265" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10267" href="../BigStep/#plfa_plfa-part2-BigStep-10267" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-10268" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10270" class="Symbol">=</a>
   <a id="plfa_plfa-part2-BigStep-10275" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1461" class="Function">cong-app</a> <a id="plfa_plfa-part2-BigStep-10284" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10285" href="../Substitution/#plfa_plfa-part2-Substitution-25099" class="Function">plfa.part2.Substitution.subst-zero-exts-cons</a><a id="plfa_plfa-part2-BigStep-10329" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10330" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-10332" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-10334" href="../BigStep/#plfa_plfa-part2-BigStep-10258" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-10335" class="Symbol">})</a> <a id="plfa_plfa-part2-BigStep-10338" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10339" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-BigStep-10341" href="../BigStep/#plfa_plfa-part2-BigStep-10267" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-10342" class="Symbol">)</a>
</pre><p>所以 <code>≈ₑ-ext</code> 的证明如下。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-≈ₑ-ext"></a><a id="plfa_plfa-part2-BigStep-10427" href="../BigStep/#plfa_plfa-part2-BigStep-10427" class="Function">≈ₑ-ext</a> <a id="plfa_plfa-part2-BigStep-10434" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10436" class="Symbol">∀</a> <a id="plfa_plfa-part2-BigStep-10438" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10439" href="../BigStep/#plfa_plfa-part2-BigStep-10439" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-10440" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10442" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10443" href="../BigStep/#plfa_plfa-part2-BigStep-10443" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-10445" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10447" href="../BigStep/#plfa_plfa-part2-BigStep-3086" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-10455" href="../BigStep/#plfa_plfa-part2-BigStep-10439" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-10456" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10458" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10459" href="../BigStep/#plfa_plfa-part2-BigStep-10459" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-10461" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10463" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-10469" href="../BigStep/#plfa_plfa-part2-BigStep-10439" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-10471" href="../Untyped/#plfa_plfa-part2-Untyped-3870" class="InductiveConstructor">∅</a><a id="plfa_plfa-part2-BigStep-10472" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10474" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10475" href="../BigStep/#plfa_plfa-part2-BigStep-10475" class="Bound">V</a><a id="plfa_plfa-part2-BigStep-10476" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10478" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10479" href="../BigStep/#plfa_plfa-part2-BigStep-10479" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-10481" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10483" href="../Untyped/#plfa_plfa-part2-Untyped-3870" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-BigStep-10485" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-10487" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-10488" class="Symbol">}</a>
  <a id="plfa_plfa-part2-BigStep-10492" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-10494" href="../BigStep/#plfa_plfa-part2-BigStep-10443" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-10496" href="../BigStep/#plfa_plfa-part2-BigStep-8037" class="Function Operator">≈ₑ</a> <a id="plfa_plfa-part2-BigStep-10499" href="../BigStep/#plfa_plfa-part2-BigStep-10459" class="Bound">σ</a>  <a id="plfa_plfa-part2-BigStep-10502" class="Symbol">→</a>  <a id="plfa_plfa-part2-BigStep-10505" href="../BigStep/#plfa_plfa-part2-BigStep-10475" class="Bound">V</a> <a id="plfa_plfa-part2-BigStep-10507" href="../BigStep/#plfa_plfa-part2-BigStep-8010" class="Function Operator">≈</a> <a id="plfa_plfa-part2-BigStep-10509" href="../BigStep/#plfa_plfa-part2-BigStep-10479" class="Bound">N</a>
    <a id="plfa_plfa-part2-BigStep-10515" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part2-BigStep-10544" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-10546" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10547" href="../BigStep/#plfa_plfa-part2-BigStep-10443" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-10549" href="../BigStep/#plfa_plfa-part2-BigStep-3356" class="Function Operator">,&#39;</a> <a id="plfa_plfa-part2-BigStep-10552" href="../BigStep/#plfa_plfa-part2-BigStep-10475" class="Bound">V</a><a id="plfa_plfa-part2-BigStep-10553" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-10555" href="../BigStep/#plfa_plfa-part2-BigStep-8037" class="Function Operator">≈ₑ</a> <a id="plfa_plfa-part2-BigStep-10558" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10559" href="../BigStep/#plfa_plfa-part2-BigStep-9096" class="Function">ext-subst</a> <a id="plfa_plfa-part2-BigStep-10569" href="../BigStep/#plfa_plfa-part2-BigStep-10459" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-10571" href="../BigStep/#plfa_plfa-part2-BigStep-10479" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-10572" class="Symbol">)</a>
<a id="plfa_plfa-part2-BigStep-10574" href="../BigStep/#plfa_plfa-part2-BigStep-10427" class="Function">≈ₑ-ext</a> <a id="plfa_plfa-part2-BigStep-10581" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10582" href="../BigStep/#plfa_plfa-part2-BigStep-10582" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-10583" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10585" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10586" href="../BigStep/#plfa_plfa-part2-BigStep-10586" class="Bound">γ</a><a id="plfa_plfa-part2-BigStep-10587" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10589" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10590" href="../BigStep/#plfa_plfa-part2-BigStep-10590" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-10591" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10593" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10594" href="../BigStep/#plfa_plfa-part2-BigStep-10594" class="Bound">V</a><a id="plfa_plfa-part2-BigStep-10595" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10597" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10598" href="../BigStep/#plfa_plfa-part2-BigStep-10598" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-10599" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10601" href="../BigStep/#plfa_plfa-part2-BigStep-10601" class="Bound">γ≈ₑσ</a> <a id="plfa_plfa-part2-BigStep-10606" href="../BigStep/#plfa_plfa-part2-BigStep-10606" class="Bound">V≈N</a> <a id="plfa_plfa-part2-BigStep-10610" href="../Untyped/#plfa_plfa-part2-Untyped-4410" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-BigStep-10612" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-10614" href="../BigStep/#plfa_plfa-part2-BigStep-10606" class="Bound">V≈N</a>
<a id="plfa_plfa-part2-BigStep-10618" href="../BigStep/#plfa_plfa-part2-BigStep-10427" class="Function">≈ₑ-ext</a> <a id="plfa_plfa-part2-BigStep-10625" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10626" href="../BigStep/#plfa_plfa-part2-BigStep-10626" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-10627" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10629" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10630" href="../BigStep/#plfa_plfa-part2-BigStep-10630" class="Bound">γ</a><a id="plfa_plfa-part2-BigStep-10631" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10633" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10634" href="../BigStep/#plfa_plfa-part2-BigStep-10634" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-10635" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10637" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10638" href="../BigStep/#plfa_plfa-part2-BigStep-10638" class="Bound">V</a><a id="plfa_plfa-part2-BigStep-10639" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10641" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10642" href="../BigStep/#plfa_plfa-part2-BigStep-10642" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-10643" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10645" href="../BigStep/#plfa_plfa-part2-BigStep-10645" class="Bound">γ≈ₑσ</a> <a id="plfa_plfa-part2-BigStep-10650" href="../BigStep/#plfa_plfa-part2-BigStep-10650" class="Bound">V≈N</a> <a id="plfa_plfa-part2-BigStep-10654" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10655" href="../Untyped/#plfa_plfa-part2-Untyped-4455" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-BigStep-10657" href="../BigStep/#plfa_plfa-part2-BigStep-10657" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-10658" class="Symbol">)</a>
  <a id="plfa_plfa-part2-BigStep-10662" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-BigStep-10670" href="../BigStep/#plfa_plfa-part2-BigStep-10122" class="Function">subst-zero-exts</a> <a id="plfa_plfa-part2-BigStep-10686" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10687" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-10689" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-10691" href="../BigStep/#plfa_plfa-part2-BigStep-10634" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-10692" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10694" class="Argument">M</a> <a id="plfa_plfa-part2-BigStep-10696" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-10698" href="../BigStep/#plfa_plfa-part2-BigStep-10642" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-10699" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10701" href="../BigStep/#plfa_plfa-part2-BigStep-10657" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-10702" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10704" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-10706" href="../BigStep/#plfa_plfa-part2-BigStep-10645" class="Bound">γ≈ₑσ</a> <a id="plfa_plfa-part2-BigStep-10711" href="../BigStep/#plfa_plfa-part2-BigStep-10657" class="Bound">x</a>
</pre><p>我们通过对输入项进行归纳来证明。</p><ul><li><p>如果它是 <code>Z</code>，那么我们使用前提 <code>V ≈ N</code> 立即得出结论。</p></li><li><p>如果它是 <code>S x</code>，那么我们使用 <code>subst-zero-exts</code> 引理来重写，并使用前提 <code>γ ≈ₑ σ</code> 来得出结论。</p></li></ul><p>为了证明主要的引理，我们需要另一个关于替换的技术性的引理。 接连应用两个替换与先将两个替换连接起来再应用等价。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-sub-sub"></a><a id="plfa_plfa-part2-BigStep-11360" href="../BigStep/#plfa_plfa-part2-BigStep-11360" class="Function">sub-sub</a> <a id="plfa_plfa-part2-BigStep-11368" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11370" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-11372" href="../BigStep/#plfa_plfa-part2-BigStep-11372" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-11374" href="../BigStep/#plfa_plfa-part2-BigStep-11374" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-11376" href="../BigStep/#plfa_plfa-part2-BigStep-11376" class="Bound">Σ</a><a id="plfa_plfa-part2-BigStep-11377" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-11379" href="../BigStep/#plfa_plfa-part2-BigStep-11379" class="Bound">A</a><a id="plfa_plfa-part2-BigStep-11380" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-11382" href="../BigStep/#plfa_plfa-part2-BigStep-11382" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-11384" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11386" href="../BigStep/#plfa_plfa-part2-BigStep-11372" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-11388" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-11390" href="../BigStep/#plfa_plfa-part2-BigStep-11379" class="Bound">A</a><a id="plfa_plfa-part2-BigStep-11391" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-11393" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-11394" href="../BigStep/#plfa_plfa-part2-BigStep-11394" class="Bound">σ₁</a> <a id="plfa_plfa-part2-BigStep-11397" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11399" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-11405" href="../BigStep/#plfa_plfa-part2-BigStep-11372" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-11407" href="../BigStep/#plfa_plfa-part2-BigStep-11374" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-11408" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-11410" href="../BigStep/#plfa_plfa-part2-BigStep-11410" class="Bound">σ₂</a> <a id="plfa_plfa-part2-BigStep-11413" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11415" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-11421" href="../BigStep/#plfa_plfa-part2-BigStep-11374" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-11423" href="../BigStep/#plfa_plfa-part2-BigStep-11376" class="Bound">Σ</a><a id="plfa_plfa-part2-BigStep-11424" class="Symbol">}</a>
  <a id="plfa_plfa-part2-BigStep-11428" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-11430" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-11436" href="../BigStep/#plfa_plfa-part2-BigStep-11410" class="Bound">σ₂</a> <a id="plfa_plfa-part2-BigStep-11439" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-11440" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-11446" href="../BigStep/#plfa_plfa-part2-BigStep-11394" class="Bound">σ₁</a> <a id="plfa_plfa-part2-BigStep-11449" href="../BigStep/#plfa_plfa-part2-BigStep-11382" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-11450" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-11452" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-BigStep-11454" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-11460" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-11461" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-11467" href="../BigStep/#plfa_plfa-part2-BigStep-11410" class="Bound">σ₂</a> <a id="plfa_plfa-part2-BigStep-11470" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">∘</a> <a id="plfa_plfa-part2-BigStep-11472" href="../BigStep/#plfa_plfa-part2-BigStep-11394" class="Bound">σ₁</a><a id="plfa_plfa-part2-BigStep-11474" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-11476" href="../BigStep/#plfa_plfa-part2-BigStep-11382" class="Bound">M</a>
<a id="plfa_plfa-part2-BigStep-11478" href="../BigStep/#plfa_plfa-part2-BigStep-11360" class="Function">sub-sub</a> <a id="plfa_plfa-part2-BigStep-11486" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-11487" class="Argument">M</a> <a id="plfa_plfa-part2-BigStep-11489" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-11491" href="../BigStep/#plfa_plfa-part2-BigStep-11491" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-11492" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-11494" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-11496" href="../Substitution/#plfa_plfa-part2-Substitution-22857" class="Function">plfa.part2.Substitution.sub-sub</a> <a id="plfa_plfa-part2-BigStep-11528" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-11529" class="Argument">M</a> <a id="plfa_plfa-part2-BigStep-11531" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-11533" href="../BigStep/#plfa_plfa-part2-BigStep-11491" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-11534" class="Symbol">}</a>
</pre><p>我们到达了主要引理：如果 <code>M</code> 在环境 <code>γ</code> 中大步求值为闭包 <code>V</code>，并且 <code>γ ≈ₑ σ</code>， 那么 <code>subst σ M</code> 将归约为某个等价于 <code>V</code> 的项 <code>N</code>。我们如下叙述该证明。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-⇓→—↠×≈"></a><a id="plfa_plfa-part2-BigStep-11856" href="../BigStep/#plfa_plfa-part2-BigStep-11856" class="Function">⇓→—↠×≈</a> <a id="plfa_plfa-part2-BigStep-11863" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11865" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-11867" href="../BigStep/#plfa_plfa-part2-BigStep-11867" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-11868" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-11870" href="../BigStep/#plfa_plfa-part2-BigStep-11870" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-11872" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11874" href="../BigStep/#plfa_plfa-part2-BigStep-3086" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-11882" href="../BigStep/#plfa_plfa-part2-BigStep-11867" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-11883" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-11885" href="../BigStep/#plfa_plfa-part2-BigStep-11885" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-11887" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11889" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-11895" href="../BigStep/#plfa_plfa-part2-BigStep-11867" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-11897" href="../Untyped/#plfa_plfa-part2-Untyped-3870" class="InductiveConstructor">∅</a><a id="plfa_plfa-part2-BigStep-11898" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-11900" href="../BigStep/#plfa_plfa-part2-BigStep-11900" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-11902" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11904" href="../BigStep/#plfa_plfa-part2-BigStep-11867" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-11906" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-11908" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-11909" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-11911" href="../BigStep/#plfa_plfa-part2-BigStep-11911" class="Bound">V</a> <a id="plfa_plfa-part2-BigStep-11913" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11915" href="../BigStep/#plfa_plfa-part2-BigStep-3116" class="Datatype">Clos</a><a id="plfa_plfa-part2-BigStep-11919" class="Symbol">}</a>
       <a id="plfa_plfa-part2-BigStep-11928" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-11930" href="../BigStep/#plfa_plfa-part2-BigStep-11870" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-11932" href="../BigStep/#plfa_plfa-part2-BigStep-3825" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-11934" href="../BigStep/#plfa_plfa-part2-BigStep-11900" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-11936" href="../BigStep/#plfa_plfa-part2-BigStep-3825" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-11938" href="../BigStep/#plfa_plfa-part2-BigStep-11911" class="Bound">V</a>  <a id="plfa_plfa-part2-BigStep-11941" class="Symbol">→</a>  <a id="plfa_plfa-part2-BigStep-11944" href="../BigStep/#plfa_plfa-part2-BigStep-11870" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-11946" href="../BigStep/#plfa_plfa-part2-BigStep-8037" class="Function Operator">≈ₑ</a> <a id="plfa_plfa-part2-BigStep-11949" href="../BigStep/#plfa_plfa-part2-BigStep-11885" class="Bound">σ</a>
         <a id="plfa_plfa-part2-BigStep-11960" class="Comment">---------------------------------------</a>
       <a id="plfa_plfa-part2-BigStep-12007" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-12009" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part2-BigStep-12012" href="../BigStep/#plfa_plfa-part2-BigStep-12012" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-12014" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part2-BigStep-12016" href="../Untyped/#plfa_plfa-part2-Untyped-3870" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-BigStep-12018" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-12020" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-BigStep-12022" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part2-BigStep-12024" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12025" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12031" href="../BigStep/#plfa_plfa-part2-BigStep-11885" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12033" href="../BigStep/#plfa_plfa-part2-BigStep-11900" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-12035" href="../Untyped/#plfa_plfa-part2-Untyped-14270" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part2-BigStep-12038" href="../BigStep/#plfa_plfa-part2-BigStep-12012" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12039" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12041" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part2-BigStep-12043" href="../BigStep/#plfa_plfa-part2-BigStep-11911" class="Bound">V</a> <a id="plfa_plfa-part2-BigStep-12045" href="../BigStep/#plfa_plfa-part2-BigStep-8010" class="Function Operator">≈</a> <a id="plfa_plfa-part2-BigStep-12047" href="../BigStep/#plfa_plfa-part2-BigStep-12012" class="Bound">N</a>
<a id="plfa_plfa-part2-BigStep-12049" href="../BigStep/#plfa_plfa-part2-BigStep-11856" class="Function">⇓→—↠×≈</a> <a id="plfa_plfa-part2-BigStep-12056" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12057" class="Argument">γ</a> <a id="plfa_plfa-part2-BigStep-12059" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12061" href="../BigStep/#plfa_plfa-part2-BigStep-12061" class="Bound">γ</a><a id="plfa_plfa-part2-BigStep-12062" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12064" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12065" href="../BigStep/#plfa_plfa-part2-BigStep-3882" class="InductiveConstructor">⇓-var</a><a id="plfa_plfa-part2-BigStep-12070" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12071" class="Argument">x</a> <a id="plfa_plfa-part2-BigStep-12073" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12075" href="../BigStep/#plfa_plfa-part2-BigStep-12075" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-12076" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12078" href="../BigStep/#plfa_plfa-part2-BigStep-12078" class="Bound">γx≡Lδ</a> <a id="plfa_plfa-part2-BigStep-12084" href="../BigStep/#plfa_plfa-part2-BigStep-12084" class="Bound">δ⊢L⇓V</a><a id="plfa_plfa-part2-BigStep-12089" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12091" href="../BigStep/#plfa_plfa-part2-BigStep-12091" class="Bound">γ≈ₑσ</a>
    <a id="plfa_plfa-part2-BigStep-12100" class="Keyword">with</a> <a id="plfa_plfa-part2-BigStep-12105" href="../BigStep/#plfa_plfa-part2-BigStep-12061" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-12107" href="../BigStep/#plfa_plfa-part2-BigStep-12075" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-12109" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12111" href="../BigStep/#plfa_plfa-part2-BigStep-12091" class="Bound">γ≈ₑσ</a> <a id="plfa_plfa-part2-BigStep-12116" href="../BigStep/#plfa_plfa-part2-BigStep-12075" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-12118" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12120" href="../BigStep/#plfa_plfa-part2-BigStep-12078" class="Bound">γx≡Lδ</a>
<a id="plfa_plfa-part2-BigStep-12126" class="Symbol">...</a> <a id="plfa_plfa-part2-BigStep-12130" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12132" href="../BigStep/#plfa_plfa-part2-BigStep-3135" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-12137" href="../BigStep/#plfa_plfa-part2-BigStep-12137" class="Bound">L</a> <a id="plfa_plfa-part2-BigStep-12139" href="../BigStep/#plfa_plfa-part2-BigStep-12139" class="Bound">δ</a> <a id="plfa_plfa-part2-BigStep-12141" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12143" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12145" href="../BigStep/#plfa_plfa-part2-BigStep-12145" class="Bound">τ</a> <a id="plfa_plfa-part2-BigStep-12147" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12149" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12151" href="../BigStep/#plfa_plfa-part2-BigStep-12151" class="Bound">δ≈ₑτ</a> <a id="plfa_plfa-part2-BigStep-12156" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12158" href="../BigStep/#plfa_plfa-part2-BigStep-12158" class="Bound">σx≡τL</a> <a id="plfa_plfa-part2-BigStep-12164" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12166" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12168" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12170" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
      <a id="plfa_plfa-part2-BigStep-12181" class="Keyword">with</a> <a id="plfa_plfa-part2-BigStep-12186" href="../BigStep/#plfa_plfa-part2-BigStep-11856" class="Function">⇓→—↠×≈</a><a id="plfa_plfa-part2-BigStep-12192" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12193" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-12195" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12197" href="../BigStep/#plfa_plfa-part2-BigStep-12145" class="Bound">τ</a><a id="plfa_plfa-part2-BigStep-12198" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12200" class="Bound">δ⊢L⇓V</a> <a id="plfa_plfa-part2-BigStep-12206" href="../BigStep/#plfa_plfa-part2-BigStep-12151" class="Bound">δ≈ₑτ</a>
<a id="plfa_plfa-part2-BigStep-12211" class="Symbol">...</a>   <a id="plfa_plfa-part2-BigStep-12217" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12219" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12221" href="../BigStep/#plfa_plfa-part2-BigStep-12221" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-12223" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12225" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12227" href="../BigStep/#plfa_plfa-part2-BigStep-12227" class="Bound">τL—↠N</a> <a id="plfa_plfa-part2-BigStep-12233" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12235" href="../BigStep/#plfa_plfa-part2-BigStep-12235" class="Bound">V≈N</a> <a id="plfa_plfa-part2-BigStep-12239" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12241" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12243" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-BigStep-12251" class="Bound">σx≡τL</a> <a id="plfa_plfa-part2-BigStep-12257" class="Symbol">=</a>
        <a id="plfa_plfa-part2-BigStep-12267" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12269" href="../BigStep/#plfa_plfa-part2-BigStep-12221" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-12271" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12273" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12275" href="../BigStep/#plfa_plfa-part2-BigStep-12227" class="Bound">τL—↠N</a> <a id="plfa_plfa-part2-BigStep-12281" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12283" href="../BigStep/#plfa_plfa-part2-BigStep-12235" class="Bound">V≈N</a> <a id="plfa_plfa-part2-BigStep-12287" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12289" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part2-BigStep-12291" href="../BigStep/#plfa_plfa-part2-BigStep-11856" class="Function">⇓→—↠×≈</a> <a id="plfa_plfa-part2-BigStep-12298" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12299" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-12301" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12303" href="../BigStep/#plfa_plfa-part2-BigStep-12303" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-12304" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12306" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12307" class="Argument">V</a> <a id="plfa_plfa-part2-BigStep-12309" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12311" href="../BigStep/#plfa_plfa-part2-BigStep-3135" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-12316" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12317" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-12319" href="../BigStep/#plfa_plfa-part2-BigStep-12319" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12320" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12322" href="../BigStep/#plfa_plfa-part2-BigStep-12322" class="Bound">γ</a><a id="plfa_plfa-part2-BigStep-12323" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12325" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12326" href="../BigStep/#plfa_plfa-part2-BigStep-4029" class="InductiveConstructor">⇓-lam</a><a id="plfa_plfa-part2-BigStep-12331" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12333" href="../BigStep/#plfa_plfa-part2-BigStep-12333" class="Bound">γ≈ₑσ</a> <a id="plfa_plfa-part2-BigStep-12338" class="Symbol">=</a>
    <a id="plfa_plfa-part2-BigStep-12344" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12346" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12352" href="../BigStep/#plfa_plfa-part2-BigStep-12303" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12354" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12355" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-12357" href="../BigStep/#plfa_plfa-part2-BigStep-12319" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12358" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12360" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12362" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12364" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12370" href="../BigStep/#plfa_plfa-part2-BigStep-12303" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12372" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12373" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-12375" href="../BigStep/#plfa_plfa-part2-BigStep-12319" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12376" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12378" href="../Untyped/#plfa_plfa-part2-Untyped-14316" class="InductiveConstructor Operator">∎</a> <a id="plfa_plfa-part2-BigStep-12380" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12382" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12384" href="../BigStep/#plfa_plfa-part2-BigStep-12303" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12386" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12388" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12390" href="../BigStep/#plfa_plfa-part2-BigStep-12333" class="Bound">γ≈ₑσ</a> <a id="plfa_plfa-part2-BigStep-12395" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12397" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-BigStep-12402" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12404" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12406" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12408" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part2-BigStep-12410" href="../BigStep/#plfa_plfa-part2-BigStep-11856" class="Function">⇓→—↠×≈</a><a id="plfa_plfa-part2-BigStep-12416" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12417" href="../BigStep/#plfa_plfa-part2-BigStep-12417" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-12418" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-12420" href="../BigStep/#plfa_plfa-part2-BigStep-12420" class="Bound">γ</a><a id="plfa_plfa-part2-BigStep-12421" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12423" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12424" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-12426" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12428" href="../BigStep/#plfa_plfa-part2-BigStep-12428" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-12429" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12431" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12432" href="../BigStep/#plfa_plfa-part2-BigStep-12432" class="Bound">L</a> <a id="plfa_plfa-part2-BigStep-12434" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-BigStep-12436" href="../BigStep/#plfa_plfa-part2-BigStep-12436" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-12437" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12439" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12440" href="../BigStep/#plfa_plfa-part2-BigStep-12440" class="Bound">V</a><a id="plfa_plfa-part2-BigStep-12441" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12443" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12444" href="../BigStep/#plfa_plfa-part2-BigStep-4104" class="InductiveConstructor">⇓-app</a> <a id="plfa_plfa-part2-BigStep-12450" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12451" class="Argument">N</a> <a id="plfa_plfa-part2-BigStep-12453" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12455" href="../BigStep/#plfa_plfa-part2-BigStep-12455" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12456" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12458" href="../BigStep/#plfa_plfa-part2-BigStep-12458" class="Bound">L⇓ƛNδ</a> <a id="plfa_plfa-part2-BigStep-12464" href="../BigStep/#plfa_plfa-part2-BigStep-12464" class="Bound">N⇓V</a><a id="plfa_plfa-part2-BigStep-12467" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12469" href="../BigStep/#plfa_plfa-part2-BigStep-12469" class="Bound">γ≈ₑσ</a>
    <a id="plfa_plfa-part2-BigStep-12478" class="Keyword">with</a> <a id="plfa_plfa-part2-BigStep-12483" href="../BigStep/#plfa_plfa-part2-BigStep-11856" class="Function">⇓→—↠×≈</a><a id="plfa_plfa-part2-BigStep-12489" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12490" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-12492" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12494" href="../BigStep/#plfa_plfa-part2-BigStep-12428" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-12495" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12497" href="../BigStep/#plfa_plfa-part2-BigStep-12458" class="Bound">L⇓ƛNδ</a> <a id="plfa_plfa-part2-BigStep-12503" href="../BigStep/#plfa_plfa-part2-BigStep-12469" class="Bound">γ≈ₑσ</a>
<a id="plfa_plfa-part2-BigStep-12508" class="Symbol">...</a> <a id="plfa_plfa-part2-BigStep-12512" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12514" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12516" class="Symbol">_</a> <a id="plfa_plfa-part2-BigStep-12518" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12520" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12522" href="../BigStep/#plfa_plfa-part2-BigStep-12522" class="Bound">σL—↠ƛτN</a> <a id="plfa_plfa-part2-BigStep-12530" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12532" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12534" href="../BigStep/#plfa_plfa-part2-BigStep-12534" class="Bound">τ</a> <a id="plfa_plfa-part2-BigStep-12536" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12538" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12540" href="../BigStep/#plfa_plfa-part2-BigStep-12540" class="Bound">δ≈ₑτ</a> <a id="plfa_plfa-part2-BigStep-12545" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12547" href="../BigStep/#plfa_plfa-part2-BigStep-12547" class="Bound">≡ƛτN</a> <a id="plfa_plfa-part2-BigStep-12552" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12554" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12556" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12558" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12560" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-BigStep-12568" href="../BigStep/#plfa_plfa-part2-BigStep-12547" class="Bound">≡ƛτN</a>
      <a id="plfa_plfa-part2-BigStep-12579" class="Keyword">with</a> <a id="plfa_plfa-part2-BigStep-12584" href="../BigStep/#plfa_plfa-part2-BigStep-11856" class="Function">⇓→—↠×≈</a> <a id="plfa_plfa-part2-BigStep-12591" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12592" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-12594" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12596" href="../BigStep/#plfa_plfa-part2-BigStep-9096" class="Function">ext-subst</a> <a id="plfa_plfa-part2-BigStep-12606" href="../BigStep/#plfa_plfa-part2-BigStep-12534" class="Bound">τ</a> <a id="plfa_plfa-part2-BigStep-12608" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12609" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12615" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12617" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-12618" class="Symbol">)}</a> <a id="plfa_plfa-part2-BigStep-12621" class="Bound">N⇓V</a>
             <a id="plfa_plfa-part2-BigStep-12638" class="Symbol">(λ</a> <a id="plfa_plfa-part2-BigStep-12641" href="../BigStep/#plfa_plfa-part2-BigStep-12641" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-12643" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-12645" href="../BigStep/#plfa_plfa-part2-BigStep-10427" class="Function">≈ₑ-ext</a><a id="plfa_plfa-part2-BigStep-12651" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12652" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-12654" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12656" href="../BigStep/#plfa_plfa-part2-BigStep-12534" class="Bound">τ</a><a id="plfa_plfa-part2-BigStep-12657" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12659" href="../BigStep/#plfa_plfa-part2-BigStep-12540" class="Bound">δ≈ₑτ</a> <a id="plfa_plfa-part2-BigStep-12664" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12666" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12668" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12670" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12672" class="Bound">γ≈ₑσ</a> <a id="plfa_plfa-part2-BigStep-12677" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12679" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-BigStep-12684" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12686" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12688" href="../BigStep/#plfa_plfa-part2-BigStep-12641" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-12689" class="Symbol">)</a>
           <a id="plfa_plfa-part2-BigStep-12702" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12704" href="../Untyped/#plfa_plfa-part2-Untyped-13104" class="InductiveConstructor">β</a><a id="plfa_plfa-part2-BigStep-12705" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12706" href="../Untyped/#plfa_plfa-part2-Untyped-3870" class="InductiveConstructor">∅</a><a id="plfa_plfa-part2-BigStep-12707" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-12709" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12715" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12716" href="../Untyped/#plfa_plfa-part2-Untyped-8601" class="Function">exts</a> <a id="plfa_plfa-part2-BigStep-12721" href="../BigStep/#plfa_plfa-part2-BigStep-12534" class="Bound">τ</a><a id="plfa_plfa-part2-BigStep-12722" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12724" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12725" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-12727" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12733" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12735" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-12736" class="Symbol">}</a>
<a id="plfa_plfa-part2-BigStep-12738" class="Symbol">...</a>   <a id="plfa_plfa-part2-BigStep-12744" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12746" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12748" href="../BigStep/#plfa_plfa-part2-BigStep-12748" class="Bound">N&#39;</a> <a id="plfa_plfa-part2-BigStep-12751" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12753" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12755" href="../BigStep/#plfa_plfa-part2-BigStep-12755" class="Bound">—↠N&#39;</a> <a id="plfa_plfa-part2-BigStep-12760" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12762" href="../BigStep/#plfa_plfa-part2-BigStep-12762" class="Bound">V≈N&#39;</a> <a id="plfa_plfa-part2-BigStep-12767" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12769" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12771" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12773" href="../BigStep/#plfa_plfa-part2-BigStep-12773" class="Bound">ƛτN·σM—→</a>
        <a id="plfa_plfa-part2-BigStep-12790" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-BigStep-12798" href="../BigStep/#plfa_plfa-part2-BigStep-11360" class="Function">sub-sub</a><a id="plfa_plfa-part2-BigStep-12805" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12806" class="Argument">M</a> <a id="plfa_plfa-part2-BigStep-12808" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12810" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12811" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-12813" class="Argument">σ₁</a> <a id="plfa_plfa-part2-BigStep-12816" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12818" href="../Untyped/#plfa_plfa-part2-Untyped-8601" class="Function">exts</a> <a id="plfa_plfa-part2-BigStep-12823" class="Bound">τ</a><a id="plfa_plfa-part2-BigStep-12824" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-12826" class="Argument">σ₂</a> <a id="plfa_plfa-part2-BigStep-12829" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12831" href="../Untyped/#plfa_plfa-part2-Untyped-9458" class="Function">subst-zero</a> <a id="plfa_plfa-part2-BigStep-12842" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12843" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12849" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12851" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-12852" class="Symbol">)}</a> <a id="plfa_plfa-part2-BigStep-12855" class="Symbol">=</a>
        <a id="plfa_plfa-part2-BigStep-12865" class="Keyword">let</a> <a id="plfa_plfa-part2-BigStep-12869" href="../BigStep/#plfa_plfa-part2-BigStep-12869" class="Bound">rs</a> <a id="plfa_plfa-part2-BigStep-12872" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12874" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12875" href="../Untyped/#plfa_plfa-part2-Untyped-5505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-12877" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12883" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12884" href="../Untyped/#plfa_plfa-part2-Untyped-8601" class="Function">exts</a> <a id="plfa_plfa-part2-BigStep-12889" class="Bound">τ</a><a id="plfa_plfa-part2-BigStep-12890" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12892" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12893" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12895" href="../Untyped/#plfa_plfa-part2-Untyped-5565" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-BigStep-12897" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12903" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12905" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-12907" href="../Untyped/#plfa_plfa-part2-Untyped-14458" class="InductiveConstructor Operator">—→⟨</a> <a id="plfa_plfa-part2-BigStep-12911" href="../BigStep/#plfa_plfa-part2-BigStep-12773" class="Bound">ƛτN·σM—→</a> <a id="plfa_plfa-part2-BigStep-12920" href="../Untyped/#plfa_plfa-part2-Untyped-14458" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12922" href="../BigStep/#plfa_plfa-part2-BigStep-12755" class="Bound">—↠N&#39;</a> <a id="plfa_plfa-part2-BigStep-12927" class="Keyword">in</a>
        <a id="plfa_plfa-part2-BigStep-12938" class="Keyword">let</a> <a id="plfa_plfa-part2-BigStep-12942" href="../BigStep/#plfa_plfa-part2-BigStep-12942" class="Bound">g</a> <a id="plfa_plfa-part2-BigStep-12944" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12946" href="../Untyped/#plfa_plfa-part2-Untyped-27482" class="Function">—↠-trans</a> <a id="plfa_plfa-part2-BigStep-12955" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12956" href="../Untyped/#plfa_plfa-part2-Untyped-29015" class="Function">appL-cong</a> <a id="plfa_plfa-part2-BigStep-12966" class="Bound">σL—↠ƛτN</a><a id="plfa_plfa-part2-BigStep-12973" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12975" href="../BigStep/#plfa_plfa-part2-BigStep-12869" class="Bound">rs</a> <a id="plfa_plfa-part2-BigStep-12978" class="Keyword">in</a>
        <a id="plfa_plfa-part2-BigStep-12989" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12991" href="../BigStep/#plfa_plfa-part2-BigStep-12748" class="Bound">N&#39;</a> <a id="plfa_plfa-part2-BigStep-12994" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12996" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12998" href="../BigStep/#plfa_plfa-part2-BigStep-12942" class="Bound">g</a> <a id="plfa_plfa-part2-BigStep-13000" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-13002" href="../BigStep/#plfa_plfa-part2-BigStep-12762" class="Bound">V≈N&#39;</a> <a id="plfa_plfa-part2-BigStep-13007" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-13009" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a>
</pre><p>该证明对 <code>γ ⊢ M ⇓ V</code> 进行归纳。我们有三种情况需要考虑。</p><ul><li>情况 <code>⇓-var</code>： 此时我们有 <code>γ x ≡ clos L δ</code> 和 <code>δ ⊢ L ⇓ V</code>。 我们需要证明对于某个 <code>N</code> 有<code>subst σ x —↠ N</code> 和 <code>V ≈ N</code>。 前提 <code>γ ≈ₑ σ</code> 告诉我们 <code>γ x ≈ σ x</code>，所以有 <code>clos L δ ≈ σ x</code>。 根据 <code>≈</code> 的定义， 存在一个 <code>τ</code> 使得 <code>δ ≈ₑ τ</code> 且 <code>σ x ≡ subst τ L</code>。 使用 <code>δ ⊢ L ⇓ V</code> 和 <code>δ ≈ₑ τ</code>， 归纳假设使得对于某个 <code>N</code> 有 <code>subst τ L —↠ N</code> 和 <code>V ≈ N</code>。 所以我们证明了对于某个 <code>N</code>，有 <code>subst σ x —↠ N</code> 和 <code>V ≈ N</code>。</li></ul><ul><li>情况 <code>⇓-lam</code>： 我们立刻获得 <code>subst σ (ƛ N) —↠ subst σ (ƛ N)</code> 和 <code>clos (subst σ (ƛ N)) γ ≈ subst σ (ƛ N)</code>。</li></ul><ul><li><p>情况 <code>⇓-app</code>： 使用 <code>γ ⊢ L ⇓ clos N δ</code> 和 <code>γ ≈ₑ σ</code>， 归纳假设给我们</p><pre><code>  subst σ L —↠ ƛ subst (exts τ) N                                     (1)</code></pre><p>并且对于某个 <code>τ</code> 有 <code>δ ≈ₑ τ</code>。 根据 <code>γ≈ₑσ</code> 我们有 <code>clos M γ ≈ subst σ M</code>。 与 <code>(δ ,&#39; clos M γ) ⊢ N ⇓ V</code> 一同， 归纳假设给我们 <code>V ≈ N&#39;</code> 和</p><pre><code>  subst (subst (subst-zero (subst σ M)) ∘ (exts τ)) N —↠ N&#39;         (2)</code></pre><p>同时根据 <code>β</code>，我们有</p><pre><code>  (ƛ subst (exts τ) N) · subst σ M
  —→ subst (subst-zero (subst σ M)) (subst (exts τ) N)</code></pre><p>通过 <code>sub-sub</code>，这等价于</p><pre><code>  (ƛ subst (exts τ) N) · subst σ M
  —→ subst (subst (subst-zero (subst σ M)) ∘ exts τ) N              (3)</code></pre><p>使用 (3) 和 (2) 我们有</p><pre><code>  (ƛ subst (exts τ) N) · subst σ M —↠ N&#39;                             (4)</code></pre><p>根据 (1) 我们有</p><pre><code>  subst σ L · subst σ M —↠ (ƛ subst (exts τ) N) · subst σ M</code></pre><p>与 (4) 相结合，我们得出结论</p><pre><code>  subst σ L · subst σ M —↠ N&#39;</code></pre></li></ul><p>证明了主要引理后，我们便建立起大步语义与 β-归约等价关系的必要性。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-cbn→reduce"></a><a id="plfa_plfa-part2-BigStep-16239" href="../BigStep/#plfa_plfa-part2-BigStep-16239" class="Function">cbn→reduce</a> <a id="plfa_plfa-part2-BigStep-16250" class="Symbol">:</a>  <a id="plfa_plfa-part2-BigStep-16253" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-16255" href="../BigStep/#plfa_plfa-part2-BigStep-16255" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-16257" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-16259" href="../Untyped/#plfa_plfa-part2-Untyped-3870" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-BigStep-16261" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-16263" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-16264" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-16266" href="../BigStep/#plfa_plfa-part2-BigStep-16266" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-16267" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-16269" href="../BigStep/#plfa_plfa-part2-BigStep-16269" class="Bound">δ</a> <a id="plfa_plfa-part2-BigStep-16271" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-16273" href="../BigStep/#plfa_plfa-part2-BigStep-3086" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-16281" href="../BigStep/#plfa_plfa-part2-BigStep-16266" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-16282" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-16284" href="../BigStep/#plfa_plfa-part2-BigStep-16284" class="Bound">N′</a> <a id="plfa_plfa-part2-BigStep-16287" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-16289" href="../BigStep/#plfa_plfa-part2-BigStep-16266" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-16291" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-16293" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-BigStep-16295" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-16297" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-16298" class="Symbol">}</a>
  <a id="plfa_plfa-part2-BigStep-16302" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-16304" href="../BigStep/#plfa_plfa-part2-BigStep-3334" class="Function">∅&#39;</a> <a id="plfa_plfa-part2-BigStep-16307" href="../BigStep/#plfa_plfa-part2-BigStep-3825" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-16309" href="../BigStep/#plfa_plfa-part2-BigStep-16255" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-16311" href="../BigStep/#plfa_plfa-part2-BigStep-3825" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-16313" href="../BigStep/#plfa_plfa-part2-BigStep-3135" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-16318" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-16319" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-16321" href="../BigStep/#plfa_plfa-part2-BigStep-16284" class="Bound">N′</a><a id="plfa_plfa-part2-BigStep-16323" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-16325" href="../BigStep/#plfa_plfa-part2-BigStep-16269" class="Bound">δ</a>
    <a id="plfa_plfa-part2-BigStep-16331" class="Comment">-----------------------------</a>
  <a id="plfa_plfa-part2-BigStep-16363" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-16365" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part2-BigStep-16368" href="../BigStep/#plfa_plfa-part2-BigStep-16368" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-16370" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part2-BigStep-16372" href="../Untyped/#plfa_plfa-part2-Untyped-3870" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-BigStep-16374" href="../Untyped/#plfa_plfa-part2-Untyped-3886" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-16376" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-BigStep-16378" href="../Untyped/#plfa_plfa-part2-Untyped-5417" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-16380" href="../Untyped/#plfa_plfa-part2-Untyped-3455" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-BigStep-16382" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part2-BigStep-16384" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-16385" href="../BigStep/#plfa_plfa-part2-BigStep-16255" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-16387" href="../Untyped/#plfa_plfa-part2-Untyped-14270" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part2-BigStep-16390" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-16392" href="../BigStep/#plfa_plfa-part2-BigStep-16368" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-16393" class="Symbol">)</a>
<a id="plfa_plfa-part2-BigStep-16395" href="../BigStep/#plfa_plfa-part2-BigStep-16239" class="Function">cbn→reduce</a> <a id="plfa_plfa-part2-BigStep-16406" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-16407" href="../BigStep/#plfa_plfa-part2-BigStep-16407" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-16408" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-16410" href="../BigStep/#plfa_plfa-part2-BigStep-16410" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-16411" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-16413" href="../BigStep/#plfa_plfa-part2-BigStep-16413" class="Bound">δ</a><a id="plfa_plfa-part2-BigStep-16414" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-16416" href="../BigStep/#plfa_plfa-part2-BigStep-16416" class="Bound">N′</a><a id="plfa_plfa-part2-BigStep-16418" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-16420" href="../BigStep/#plfa_plfa-part2-BigStep-16420" class="Bound">M⇓c</a>
    <a id="plfa_plfa-part2-BigStep-16428" class="Keyword">with</a> <a id="plfa_plfa-part2-BigStep-16433" href="../BigStep/#plfa_plfa-part2-BigStep-11856" class="Function">⇓→—↠×≈</a><a id="plfa_plfa-part2-BigStep-16439" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-16440" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-16442" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-16444" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-BigStep-16447" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-16449" href="../BigStep/#plfa_plfa-part2-BigStep-16420" class="Bound">M⇓c</a> <a id="plfa_plfa-part2-BigStep-16453" href="../BigStep/#plfa_plfa-part2-BigStep-8755" class="Function">≈ₑ-id</a>
<a id="plfa_plfa-part2-BigStep-16459" class="Symbol">...</a> <a id="plfa_plfa-part2-BigStep-16463" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-16465" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-16467" href="../BigStep/#plfa_plfa-part2-BigStep-16467" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-16469" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-16471" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-16473" href="../BigStep/#plfa_plfa-part2-BigStep-16473" class="Bound">rs</a> <a id="plfa_plfa-part2-BigStep-16476" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-16478" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-16480" href="../BigStep/#plfa_plfa-part2-BigStep-16480" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-16482" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-16484" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-16486" href="../BigStep/#plfa_plfa-part2-BigStep-16486" class="Bound">h</a> <a id="plfa_plfa-part2-BigStep-16488" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-16490" href="../BigStep/#plfa_plfa-part2-BigStep-16490" class="Bound">eq2</a> <a id="plfa_plfa-part2-BigStep-16494" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-16496" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-16498" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-16500" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-16502" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-BigStep-16510" href="../BigStep/#plfa_plfa-part2-BigStep-8905" class="Function">sub-id</a><a id="plfa_plfa-part2-BigStep-16516" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-16517" class="Argument">M</a> <a id="plfa_plfa-part2-BigStep-16519" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-16521" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-16522" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-16524" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-16526" href="../BigStep/#plfa_plfa-part2-BigStep-16490" class="Bound">eq2</a> <a id="plfa_plfa-part2-BigStep-16530" class="Symbol">=</a>
      <a id="plfa_plfa-part2-BigStep-16538" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-16540" href="../Untyped/#plfa_plfa-part2-Untyped-8962" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-16546" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-16547" href="../Untyped/#plfa_plfa-part2-Untyped-8601" class="Function">exts</a> <a id="plfa_plfa-part2-BigStep-16552" href="../BigStep/#plfa_plfa-part2-BigStep-16480" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-16553" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-16555" class="Bound">N′</a> <a id="plfa_plfa-part2-BigStep-16558" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-16560" href="../BigStep/#plfa_plfa-part2-BigStep-16473" class="Bound">rs</a> <a id="plfa_plfa-part2-BigStep-16563" href="../BigStep/#plfa_plfa-part2-BigStep-1943" class="InductiveConstructor Operator">⟩</a>
</pre><h4 id="练习-big-alt-implies-multi实践">练习 <code>big-alt-implies-multi</code>（实践）</h4><p>为使用替换而不是环境的传名调用表达另一种大步语义，形式为 <code>M ↓ N</code>。 即应用规则 <code>⇓-app</code> 应像在 <code>N [ M ]</code> 中一样执行替换而不是用 <code>M</code> 扩展环境。 证明 <code>M ↓ N</code> 蕴含 <code>M —↠ N</code>。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-17115" class="Comment">-- 请将代码写在此处。</a>
</pre><h2 id="β-归约至-λ-抽象蕴含大步求值">β-归约至 λ-抽象蕴含大步求值</h2><p>充分性的证明，也就是 β-归约至 λ-抽象蕴含大步语义求值是更困难的。 困难源于通过 <code>ζ</code> 规则在 λ-抽象下的归约过程。 传名调用语义在 λ-演算中并不会归约，因此直接通过归纳归约序列来证明是不可能的。 在文章 <strong>Call-by-name, call-by-value, and the λ-calculus</strong> 中， Plotkin使用两个辅助归约关系分两步完成了证明。 第一步使用了 Curry-Feys 标准化这一经典方法， 它依赖于 <strong>标准归约序列（Standard Reduction Sequence）</strong> 的概念， 通过在 λ-演算下将传名调用扩展以包括归约， 标准归约序列充当了完整 β-归约与传名调用求值的中间点。 Plotkin证明了 <code>M</code> 能被归约为 <code>L</code> 当且仅当 <code>M</code> 与 <code>L</code> 通过一个标准归约序列相关。</p><pre><code>定理 1（标准化）
`M —↠ L` 当且仅当 `M` 能通过一个标准归约序列归约成 `L`。</code></pre><p>Plotkin 接着引入了<strong>左归约（Left Reduction）</strong> 作为传名调用的小步描述， 并且用上方的定理证明了 β-归约与左归约在下述情况下等价。</p><pre><code>推论 1
`M —↠ ƛ N` 当且仅当对于某个 `N′`，`M`能通过左归约成 `ƛ N′`。</code></pre><p>证明的下一步将左归约与传名调用求值联系起来。</p><pre><code>定理 2
`M` 左归约成 `ƛ N` 当且仅当 `⊢ M ⇓ ƛ N`。</code></pre><p>（Plotkin 的传名调用求值使用替换而不是环境， 这解释了为何在上文定理的描述中环境被隐去了。）</p><p>将推论 1 和定理 2 相结合，Plotkin 证明了传名调用求值与 β-归约等价。</p><pre><code>推论 2
`M —↠ ƛ N` 当且仅当对某个 `N′`，`⊢ M ⇓ ƛ N′`。</code></pre><p>Plotkin 还证明了 λᵥ-演算中的类似结果，将其与传值调用求值相联系。 为了更好阐述该证明，我们推荐阅读由 Felleisen、Findler 和 Flatt 所著的 <em>Semantics Engineering with PLT Redex</em> 的第五章。</p><p>我们不通过上文描述的标准化方式来完成充分性的证明， 而是将其推迟到发展出 λ-演算的指称语义后， 此时该证明是指称语义中 soundness 和 adequacy 的推论。</p><h2 id="unicode">Unicode</h2><p>本章中使用了以下 Unicode：</p><pre><code>≈  U+2248  ALMOST EQUAL TO (\~~ or \approx)
ₑ  U+2091  LATIN SUBSCRIPT SMALL LETTER E (\_e)
⊢  U+22A2  RIGHT TACK (\|- or \vdash)
⇓  U+21DB  DOWNWARDS DOUBLE ARROW (\d= or \Downarrow)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Confluence/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part2/BigStep.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Denotational/">下一章</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">编程语言基础：Agda 描述</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div><h3 class="footer-heading">本章翻译进度：100% ，译者：starxingchenc</h3>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>