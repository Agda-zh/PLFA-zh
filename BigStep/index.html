<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>编程语言基础：Agda 描述 – BigStep</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">编程语言基础：Agda 描述</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">主页</a> <a class="page-link" href="../Announcements/">公告</a> <a class="page-link" href="../GettingStarted/">使用说明</a> <a class="page-link" href="../Citing/">引用</a> <a class="page-link" href="https://plfa.github.io/">English</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Confluence/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part2/BigStep.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Denotational/">下一章</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">BigStep: 无类型 λ-演算的大步语义</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part2-BigStep-109" class="Keyword">module</a> <a id="plfa_plfa-part2-BigStep-116" href="../BigStep/#" class="Module">plfa.part2.BigStep</a> <a id="plfa_plfa-part2-BigStep-135" class="Keyword">where</a>
</pre><h2 id="简介">简介</h2><p>传名调用求值策略（Call-by-name Evaluation Strategy）是在 λ-演算中计算程序值的一种确定性方法。 也就是说，传名调用能够求出值当且仅当 β-归约能将程序归约为一个 λ-抽象。 在这一章节，我们将定义传名调用求值并且证明这个等价命题的必要性。 充分性的部分较为复杂，通常通过 Curry-Feys 标准化证明。 根据 Plotkin 的工作，我们给出这个证明的概要， 但是由于这是指称语义的一个简单性质， 我们将在为 λ-演算发展出指称语义后在 Agda 中完整地证明它。</p><p>我们将传名调用策略表示为一个输入表达式与输出值间的关系。 因为这样的关系将输入表达式 <code>M</code> 和最终结果 <code>V</code> 直接相联系， 它通常被叫做<strong>大步语义（Big-stepsemantics）</strong>，写做 <code>M ⇓ V</code>。 而小步归约关系则被写做 <code>M —→ M′</code>，它仅通过一步子计算来将 <code>M</code> 归约为另一个表达式 <code>M′</code>。</p><h2 id="导入">导入</h2><pre class="Agda"><a id="plfa_plfa-part2-BigStep-1739" class="Keyword">open</a> <a id="plfa_plfa-part2-BigStep-1744" class="Keyword">import</a> <a id="plfa_plfa-part2-BigStep-1751" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
  <a id="plfa_plfa-part2-BigStep-1791" class="Keyword">using</a> <a id="plfa_plfa-part2-BigStep-1797" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-1798" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="plfa_plfa-part2-BigStep-1801" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1803" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-BigStep-1807" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1809" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1729" class="Function">trans</a><a id="plfa_plfa-part2-BigStep-1814" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1816" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a><a id="plfa_plfa-part2-BigStep-1819" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1821" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1461" class="Function">cong-app</a><a id="plfa_plfa-part2-BigStep-1829" class="Symbol">)</a>
<a id="plfa_plfa-part2-BigStep-1831" class="Keyword">open</a> <a id="plfa_plfa-part2-BigStep-1836" class="Keyword">import</a> <a id="plfa_plfa-part2-BigStep-1843" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html" class="Module">Data.Product</a> <a id="plfa_plfa-part2-BigStep-1856" class="Keyword">using</a> <a id="plfa_plfa-part2-BigStep-1862" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-1863" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">_×_</a><a id="plfa_plfa-part2-BigStep-1866" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1868" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="plfa_plfa-part2-BigStep-1869" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1871" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ-syntax</a><a id="plfa_plfa-part2-BigStep-1879" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1881" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1369" class="Function">∃</a><a id="plfa_plfa-part2-BigStep-1882" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1884" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1806" class="Function">∃-syntax</a><a id="plfa_plfa-part2-BigStep-1892" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1894" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a><a id="plfa_plfa-part2-BigStep-1899" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-1901" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a><a id="plfa_plfa-part2-BigStep-1906" class="Symbol">)</a>
  <a id="plfa_plfa-part2-BigStep-1910" class="Keyword">renaming</a> <a id="plfa_plfa-part2-BigStep-1919" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-1920" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part2-BigStep-1924" class="Symbol">to</a> <a id="plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part2-BigStep-1932" class="Symbol">)</a>
<a id="plfa_plfa-part2-BigStep-1934" class="Keyword">open</a> <a id="plfa_plfa-part2-BigStep-1939" class="Keyword">import</a> <a id="plfa_plfa-part2-BigStep-1946" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.html" class="Module">Function</a> <a id="plfa_plfa-part2-BigStep-1955" class="Keyword">using</a> <a id="plfa_plfa-part2-BigStep-1961" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-1962" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">_∘_</a><a id="plfa_plfa-part2-BigStep-1965" class="Symbol">)</a>
<a id="plfa_plfa-part2-BigStep-1967" class="Keyword">open</a> <a id="plfa_plfa-part2-BigStep-1972" class="Keyword">import</a> <a id="plfa_plfa-part2-BigStep-1979" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
  <a id="plfa_plfa-part2-BigStep-2000" class="Keyword">using</a> <a id="plfa_plfa-part2-BigStep-2006" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-2007" href="../Untyped/#plfa_plfa-part2-Untyped-3830" class="Datatype">Context</a><a id="plfa_plfa-part2-BigStep-2014" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2016" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part2-BigStep-2019" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2021" href="../Untyped/#plfa_plfa-part2-Untyped-4355" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part2-BigStep-2024" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2026" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-2027" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2029" href="../Untyped/#plfa_plfa-part2-Untyped-3852" class="InductiveConstructor">∅</a><a id="plfa_plfa-part2-BigStep-2030" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2032" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part2-BigStep-2035" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2037" href="../Untyped/#plfa_plfa-part2-Untyped-4391" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-BigStep-2038" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2040" href="../Untyped/#plfa_plfa-part2-Untyped-4436" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-BigStep-2042" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2044" href="../Untyped/#plfa_plfa-part2-Untyped-5434" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part2-BigStep-2046" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2048" href="../Untyped/#plfa_plfa-part2-Untyped-6472" class="Function Operator">#_</a><a id="plfa_plfa-part2-BigStep-2050" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2052" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part2-BigStep-2054" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2056" href="../Untyped/#plfa_plfa-part2-Untyped-5546" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part2-BigStep-2059" class="Symbol">;</a>
  <a id="plfa_plfa-part2-BigStep-2063" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a><a id="plfa_plfa-part2-BigStep-2068" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2070" href="../Untyped/#plfa_plfa-part2-Untyped-9439" class="Function">subst-zero</a><a id="plfa_plfa-part2-BigStep-2080" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2082" href="../Untyped/#plfa_plfa-part2-Untyped-8582" class="Function">exts</a><a id="plfa_plfa-part2-BigStep-2086" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2088" href="../Untyped/#plfa_plfa-part2-Untyped-8055" class="Function">rename</a><a id="plfa_plfa-part2-BigStep-2094" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2096" href="../Untyped/#plfa_plfa-part2-Untyped-13085" class="InductiveConstructor">β</a><a id="plfa_plfa-part2-BigStep-2097" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2099" href="../Untyped/#plfa_plfa-part2-Untyped-12905" class="InductiveConstructor">ξ₁</a><a id="plfa_plfa-part2-BigStep-2101" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2103" href="../Untyped/#plfa_plfa-part2-Untyped-12995" class="InductiveConstructor">ξ₂</a><a id="plfa_plfa-part2-BigStep-2105" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2107" href="../Untyped/#plfa_plfa-part2-Untyped-13193" class="InductiveConstructor">ζ</a><a id="plfa_plfa-part2-BigStep-2108" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2110" href="../Untyped/#plfa_plfa-part2-Untyped-12855" class="Datatype Operator">_—→_</a><a id="plfa_plfa-part2-BigStep-2114" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2116" href="../Untyped/#plfa_plfa-part2-Untyped-14249" class="Datatype Operator">_—↠_</a><a id="plfa_plfa-part2-BigStep-2120" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2122" href="../Untyped/#plfa_plfa-part2-Untyped-14437" class="InductiveConstructor Operator">_—→⟨_⟩_</a><a id="plfa_plfa-part2-BigStep-2129" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2131" href="../Untyped/#plfa_plfa-part2-Untyped-14295" class="InductiveConstructor Operator">_∎</a><a id="plfa_plfa-part2-BigStep-2133" class="Symbol">;</a>
  <a id="plfa_plfa-part2-BigStep-2137" href="../Untyped/#plfa_plfa-part2-Untyped-27458" class="Function">—↠-trans</a><a id="plfa_plfa-part2-BigStep-2145" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2147" href="../Untyped/#plfa_plfa-part2-Untyped-28991" class="Function">appL-cong</a><a id="plfa_plfa-part2-BigStep-2156" class="Symbol">)</a>
<a id="plfa_plfa-part2-BigStep-2158" class="Keyword">open</a> <a id="plfa_plfa-part2-BigStep-2163" class="Keyword">import</a> <a id="plfa_plfa-part2-BigStep-2170" href="../Substitution/#" class="Module">plfa.part2.Substitution</a> <a id="plfa_plfa-part2-BigStep-2194" class="Keyword">using</a> <a id="plfa_plfa-part2-BigStep-2200" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-2201" href="../Substitution/#plfa_plfa-part2-Substitution-2882" class="Function">Subst</a><a id="plfa_plfa-part2-BigStep-2206" class="Symbol">;</a> <a id="plfa_plfa-part2-BigStep-2208" href="../Substitution/#plfa_plfa-part2-Substitution-3762" class="Function">ids</a><a id="plfa_plfa-part2-BigStep-2211" class="Symbol">)</a>
</pre><h2 id="环境">环境</h2><p>为了处理变量和函数应用，我们要么像在 <code>—→</code> 中一样使用替换，要么使用一个<strong>环境（Environment）</strong>。 传名调用中的环境是一个从变量到闭包（即项与其对应的环境）的映射。 我们之所以使用环境取代替换是因为传名调用的核心更接近于语言的实现。 在后续章节中介绍的指称语义也会用到环境，而且对 adequacy 的证明也会变得更加容易。</p><p>我们如下定义环境和闭包。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-ClosEnv"></a><a id="plfa_plfa-part2-BigStep-3070" href="../BigStep/#plfa_plfa-part2-BigStep-3070" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3078" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3080" href="../Untyped/#plfa_plfa-part2-Untyped-3830" class="Datatype">Context</a> <a id="plfa_plfa-part2-BigStep-3088" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3090" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a>

<a id="plfa_plfa-part2-BigStep-3095" class="Keyword">data</a> <a id="plfa_plfa-part2-BigStep-Clos"></a><a id="plfa_plfa-part2-BigStep-3100" href="../BigStep/#plfa_plfa-part2-BigStep-3100" class="Datatype">Clos</a> <a id="plfa_plfa-part2-BigStep-3105" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3107" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part2-BigStep-3111" class="Keyword">where</a>
  <a id="plfa_plfa-part2-BigStep-Clos.clos"></a><a id="plfa_plfa-part2-BigStep-3119" href="../BigStep/#plfa_plfa-part2-BigStep-3119" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-3124" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3126" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-3128" href="../BigStep/#plfa_plfa-part2-BigStep-3128" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-3129" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-3131" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3133" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-3134" href="../BigStep/#plfa_plfa-part2-BigStep-3134" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-3136" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3138" href="../BigStep/#plfa_plfa-part2-BigStep-3128" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3140" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-3142" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-3143" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-3145" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3147" href="../BigStep/#plfa_plfa-part2-BigStep-3070" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3155" href="../BigStep/#plfa_plfa-part2-BigStep-3128" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3157" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3159" href="../BigStep/#plfa_plfa-part2-BigStep-3100" class="Datatype">Clos</a>

<a id="plfa_plfa-part2-BigStep-3165" href="../BigStep/#plfa_plfa-part2-BigStep-3070" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3173" href="../BigStep/#plfa_plfa-part2-BigStep-3173" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3175" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-3177" class="Symbol">∀</a> <a id="plfa_plfa-part2-BigStep-3179" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-3180" href="../BigStep/#plfa_plfa-part2-BigStep-3180" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-3182" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3184" href="../BigStep/#plfa_plfa-part2-BigStep-3173" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3186" href="../Untyped/#plfa_plfa-part2-Untyped-4355" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-BigStep-3188" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-3189" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-3191" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3193" href="../BigStep/#plfa_plfa-part2-BigStep-3100" class="Datatype">Clos</a>
</pre><p>通常，我们有空环境，也可以扩展一个环境。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-∅&#39;"></a><a id="plfa_plfa-part2-BigStep-3318" href="../BigStep/#plfa_plfa-part2-BigStep-3318" class="Function">∅&#39;</a> <a id="plfa_plfa-part2-BigStep-3321" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3323" href="../BigStep/#plfa_plfa-part2-BigStep-3070" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3331" href="../Untyped/#plfa_plfa-part2-Untyped-3852" class="InductiveConstructor">∅</a>
<a id="plfa_plfa-part2-BigStep-3333" href="../BigStep/#plfa_plfa-part2-BigStep-3318" class="Function">∅&#39;</a> <a id="plfa_plfa-part2-BigStep-3336" class="Symbol">()</a>

<a id="plfa_plfa-part2-BigStep-_,&#39;_"></a><a id="plfa_plfa-part2-BigStep-3340" href="../BigStep/#plfa_plfa-part2-BigStep-3340" class="Function Operator">_,&#39;_</a> <a id="plfa_plfa-part2-BigStep-3345" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3347" class="Symbol">∀</a> <a id="plfa_plfa-part2-BigStep-3349" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-3350" href="../BigStep/#plfa_plfa-part2-BigStep-3350" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-3351" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-3353" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3355" href="../BigStep/#plfa_plfa-part2-BigStep-3070" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3363" href="../BigStep/#plfa_plfa-part2-BigStep-3350" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3365" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3367" href="../BigStep/#plfa_plfa-part2-BigStep-3100" class="Datatype">Clos</a> <a id="plfa_plfa-part2-BigStep-3372" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3374" href="../BigStep/#plfa_plfa-part2-BigStep-3070" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3382" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-3383" href="../BigStep/#plfa_plfa-part2-BigStep-3350" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3385" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-3387" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-3388" class="Symbol">)</a>
<a id="plfa_plfa-part2-BigStep-3390" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-3391" href="../BigStep/#plfa_plfa-part2-BigStep-3391" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-3393" href="../BigStep/#plfa_plfa-part2-BigStep-3340" class="Function Operator">,&#39;</a> <a id="plfa_plfa-part2-BigStep-3396" href="../BigStep/#plfa_plfa-part2-BigStep-3396" class="Bound">c</a><a id="plfa_plfa-part2-BigStep-3397" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-3399" href="../Untyped/#plfa_plfa-part2-Untyped-4391" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-BigStep-3401" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-3403" href="../BigStep/#plfa_plfa-part2-BigStep-3396" class="Bound">c</a>
<a id="plfa_plfa-part2-BigStep-3405" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-3406" href="../BigStep/#plfa_plfa-part2-BigStep-3406" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-3408" href="../BigStep/#plfa_plfa-part2-BigStep-3340" class="Function Operator">,&#39;</a> <a id="plfa_plfa-part2-BigStep-3411" href="../BigStep/#plfa_plfa-part2-BigStep-3411" class="Bound">c</a><a id="plfa_plfa-part2-BigStep-3412" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-3414" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-3415" href="../Untyped/#plfa_plfa-part2-Untyped-4436" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-BigStep-3417" href="../BigStep/#plfa_plfa-part2-BigStep-3417" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-3418" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-3420" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-3422" href="../BigStep/#plfa_plfa-part2-BigStep-3406" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-3424" href="../BigStep/#plfa_plfa-part2-BigStep-3417" class="Bound">x</a>
</pre><h2 id="大步求值">大步求值</h2><p>大步语义被表现为一个三元关系，写作 <code>γ ⊢ M ⇓ V</code>， 其中 <code>γ</code> 是环境，<code>M</code>是输入项，<code>V</code> 是结果值。 <strong>值（Value）</strong> 是一个项是 λ-抽象的闭包。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-3804" class="Keyword">data</a> <a id="plfa_plfa-part2-BigStep-_⊢_⇓_"></a><a id="plfa_plfa-part2-BigStep-3809" href="../BigStep/#plfa_plfa-part2-BigStep-3809" class="Datatype Operator">_⊢_⇓_</a> <a id="plfa_plfa-part2-BigStep-3815" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3817" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-3819" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-3820" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-3822" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3824" href="../BigStep/#plfa_plfa-part2-BigStep-3070" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3832" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3834" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3836" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-3837" href="../BigStep/#plfa_plfa-part2-BigStep-3819" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3839" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-3841" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-3842" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-3844" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3846" href="../BigStep/#plfa_plfa-part2-BigStep-3100" class="Datatype">Clos</a> <a id="plfa_plfa-part2-BigStep-3851" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3853" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part2-BigStep-3857" class="Keyword">where</a>

  <a id="plfa_plfa-part2-BigStep-_⊢_⇓_.⇓-var"></a><a id="plfa_plfa-part2-BigStep-3866" href="../BigStep/#plfa_plfa-part2-BigStep-3866" class="InductiveConstructor">⇓-var</a> <a id="plfa_plfa-part2-BigStep-3872" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3874" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-3876" href="../BigStep/#plfa_plfa-part2-BigStep-3876" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-3877" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-3879" href="../BigStep/#plfa_plfa-part2-BigStep-3879" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-3881" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3883" href="../BigStep/#plfa_plfa-part2-BigStep-3070" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3891" href="../BigStep/#plfa_plfa-part2-BigStep-3876" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-3892" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-3894" href="../BigStep/#plfa_plfa-part2-BigStep-3894" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-3896" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3898" href="../BigStep/#plfa_plfa-part2-BigStep-3876" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-3900" href="../Untyped/#plfa_plfa-part2-Untyped-4355" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-BigStep-3902" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-3903" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-3905" href="../BigStep/#plfa_plfa-part2-BigStep-3905" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-3906" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-3908" href="../BigStep/#plfa_plfa-part2-BigStep-3908" class="Bound">δ</a> <a id="plfa_plfa-part2-BigStep-3910" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3912" href="../BigStep/#plfa_plfa-part2-BigStep-3070" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-3920" href="../BigStep/#plfa_plfa-part2-BigStep-3905" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-3921" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-3923" href="../BigStep/#plfa_plfa-part2-BigStep-3923" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-3925" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-3927" href="../BigStep/#plfa_plfa-part2-BigStep-3905" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-3929" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-3931" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-3932" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-3934" href="../BigStep/#plfa_plfa-part2-BigStep-3934" class="Bound">V</a><a id="plfa_plfa-part2-BigStep-3935" class="Symbol">}</a>
    <a id="plfa_plfa-part2-BigStep-3941" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3943" href="../BigStep/#plfa_plfa-part2-BigStep-3879" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-3945" href="../BigStep/#plfa_plfa-part2-BigStep-3894" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-3947" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-BigStep-3949" href="../BigStep/#plfa_plfa-part2-BigStep-3119" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-3954" href="../BigStep/#plfa_plfa-part2-BigStep-3923" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-3956" href="../BigStep/#plfa_plfa-part2-BigStep-3908" class="Bound">δ</a>
    <a id="plfa_plfa-part2-BigStep-3962" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3964" href="../BigStep/#plfa_plfa-part2-BigStep-3908" class="Bound">δ</a> <a id="plfa_plfa-part2-BigStep-3966" href="../BigStep/#plfa_plfa-part2-BigStep-3809" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-3968" href="../BigStep/#plfa_plfa-part2-BigStep-3923" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-3970" href="../BigStep/#plfa_plfa-part2-BigStep-3809" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-3972" href="../BigStep/#plfa_plfa-part2-BigStep-3934" class="Bound">V</a>
      <a id="plfa_plfa-part2-BigStep-3980" class="Comment">-----------</a>
    <a id="plfa_plfa-part2-BigStep-3996" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-3998" href="../BigStep/#plfa_plfa-part2-BigStep-3879" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-4000" href="../BigStep/#plfa_plfa-part2-BigStep-3809" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4002" href="../Untyped/#plfa_plfa-part2-Untyped-5434" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-BigStep-4004" href="../BigStep/#plfa_plfa-part2-BigStep-3894" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-4006" href="../BigStep/#plfa_plfa-part2-BigStep-3809" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-4008" href="../BigStep/#plfa_plfa-part2-BigStep-3934" class="Bound">V</a>

  <a id="plfa_plfa-part2-BigStep-_⊢_⇓_.⇓-lam"></a><a id="plfa_plfa-part2-BigStep-4013" href="../BigStep/#plfa_plfa-part2-BigStep-4013" class="InductiveConstructor">⇓-lam</a> <a id="plfa_plfa-part2-BigStep-4019" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4021" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-4023" href="../BigStep/#plfa_plfa-part2-BigStep-4023" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-4024" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4026" href="../BigStep/#plfa_plfa-part2-BigStep-4026" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-4028" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4030" href="../BigStep/#plfa_plfa-part2-BigStep-3070" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-4038" href="../BigStep/#plfa_plfa-part2-BigStep-4023" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-4039" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4041" href="../BigStep/#plfa_plfa-part2-BigStep-4041" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-4043" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4045" href="../BigStep/#plfa_plfa-part2-BigStep-4023" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-4047" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-4049" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-BigStep-4051" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4053" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-4054" class="Symbol">}</a>
    <a id="plfa_plfa-part2-BigStep-4060" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-4062" href="../BigStep/#plfa_plfa-part2-BigStep-4026" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-4064" href="../BigStep/#plfa_plfa-part2-BigStep-3809" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4066" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-4068" href="../BigStep/#plfa_plfa-part2-BigStep-4041" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-4070" href="../BigStep/#plfa_plfa-part2-BigStep-3809" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-4072" href="../BigStep/#plfa_plfa-part2-BigStep-3119" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-4077" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-4078" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-4080" href="../BigStep/#plfa_plfa-part2-BigStep-4041" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-4081" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-4083" href="../BigStep/#plfa_plfa-part2-BigStep-4026" class="Bound">γ</a>

  <a id="plfa_plfa-part2-BigStep-_⊢_⇓_.⇓-app"></a><a id="plfa_plfa-part2-BigStep-4088" href="../BigStep/#plfa_plfa-part2-BigStep-4088" class="InductiveConstructor">⇓-app</a> <a id="plfa_plfa-part2-BigStep-4094" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4096" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-4098" href="../BigStep/#plfa_plfa-part2-BigStep-4098" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-4099" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4101" href="../BigStep/#plfa_plfa-part2-BigStep-4101" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-4103" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4105" href="../BigStep/#plfa_plfa-part2-BigStep-3070" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-4113" href="../BigStep/#plfa_plfa-part2-BigStep-4098" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-4114" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4116" href="../BigStep/#plfa_plfa-part2-BigStep-4116" class="Bound">L</a> <a id="plfa_plfa-part2-BigStep-4118" href="../BigStep/#plfa_plfa-part2-BigStep-4118" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-4120" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4122" href="../BigStep/#plfa_plfa-part2-BigStep-4098" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-4124" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4126" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-4127" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4129" href="../BigStep/#plfa_plfa-part2-BigStep-4129" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-4130" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4132" href="../BigStep/#plfa_plfa-part2-BigStep-4132" class="Bound">δ</a> <a id="plfa_plfa-part2-BigStep-4134" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4136" href="../BigStep/#plfa_plfa-part2-BigStep-3070" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-4144" href="../BigStep/#plfa_plfa-part2-BigStep-4129" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-4145" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4147" href="../BigStep/#plfa_plfa-part2-BigStep-4147" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-4149" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-4151" href="../BigStep/#plfa_plfa-part2-BigStep-4129" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-4153" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-4155" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-BigStep-4157" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4159" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-4160" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-4162" href="../BigStep/#plfa_plfa-part2-BigStep-4162" class="Bound">V</a><a id="plfa_plfa-part2-BigStep-4163" class="Symbol">}</a>
    <a id="plfa_plfa-part2-BigStep-4169" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-4171" href="../BigStep/#plfa_plfa-part2-BigStep-4101" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-4173" href="../BigStep/#plfa_plfa-part2-BigStep-3809" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4175" href="../BigStep/#plfa_plfa-part2-BigStep-4116" class="Bound">L</a> <a id="plfa_plfa-part2-BigStep-4177" href="../BigStep/#plfa_plfa-part2-BigStep-3809" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-4179" href="../BigStep/#plfa_plfa-part2-BigStep-3119" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-4184" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-4185" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-4187" href="../BigStep/#plfa_plfa-part2-BigStep-4147" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-4188" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-4190" href="../BigStep/#plfa_plfa-part2-BigStep-4132" class="Bound">δ</a>   <a id="plfa_plfa-part2-BigStep-4194" class="Symbol">→</a>   <a id="plfa_plfa-part2-BigStep-4198" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-4199" href="../BigStep/#plfa_plfa-part2-BigStep-4132" class="Bound">δ</a> <a id="plfa_plfa-part2-BigStep-4201" href="../BigStep/#plfa_plfa-part2-BigStep-3340" class="Function Operator">,&#39;</a> <a id="plfa_plfa-part2-BigStep-4204" href="../BigStep/#plfa_plfa-part2-BigStep-3119" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-4209" href="../BigStep/#plfa_plfa-part2-BigStep-4118" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-4211" href="../BigStep/#plfa_plfa-part2-BigStep-4101" class="Bound">γ</a><a id="plfa_plfa-part2-BigStep-4212" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-4214" href="../BigStep/#plfa_plfa-part2-BigStep-3809" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4216" href="../BigStep/#plfa_plfa-part2-BigStep-4147" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-4218" href="../BigStep/#plfa_plfa-part2-BigStep-3809" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-4220" href="../BigStep/#plfa_plfa-part2-BigStep-4162" class="Bound">V</a>
      <a id="plfa_plfa-part2-BigStep-4228" class="Comment">---------------------------------------------------</a>
    <a id="plfa_plfa-part2-BigStep-4284" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-4286" href="../BigStep/#plfa_plfa-part2-BigStep-4101" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-4288" href="../BigStep/#plfa_plfa-part2-BigStep-3809" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-4290" href="../BigStep/#plfa_plfa-part2-BigStep-4116" class="Bound">L</a> <a id="plfa_plfa-part2-BigStep-4292" href="../Untyped/#plfa_plfa-part2-Untyped-5546" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-BigStep-4294" href="../BigStep/#plfa_plfa-part2-BigStep-4118" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-4296" href="../BigStep/#plfa_plfa-part2-BigStep-3809" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-4298" href="../BigStep/#plfa_plfa-part2-BigStep-4162" class="Bound">V</a>
</pre><ul><li><p><code>⇓-var</code> 规则通过对环境中找到的相关闭包求值，从而完成对变量的求值。</p></li><li><p><code>⇓-lam</code> 规则通过包装 λ-抽象与其环境，将其转变为一个闭包。</p></li><li><p><code>⇓-app</code> 规则分两步处理函数应用。首先对操作位的项 <code>L</code> 求值，如果产生了一个包含 λ-抽象 <code>ƛ N</code> 的闭包， 就在扩展了参数 <code>M</code> 的环境中对 <code>N</code> 求值。注意到 <code>M</code> 并未在 <code>⇓-app</code> 规则中被求值， 因为进行的是传名调用而不是传值调用。</p></li></ul><h4 id="练习-big-step-eg实践">练习 <code>big-step-eg</code>（实践）</h4><p>证明 <code>(ƛ ƛ # 1) · ((ƛ # 0 · # 0) · (ƛ # 0 · # 0))</code> 能在大步传名调用求值下终止。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-5394" class="Comment">-- 请将代码写在此处</a>
</pre><h2 id="大步语义是确定的">大步语义是确定的</h2><p>如果大步关系将一个项 <code>M</code> 求值为 <code>V</code> 和 <code>V′</code>，则 <code>V</code> 和 <code>V′</code> 必然相同。 也就是说，传名调用关系是一个部分函数。该证明由两个大步语义的推论归纳得出。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-⇓-determ"></a><a id="plfa_plfa-part2-BigStep-5827" href="../BigStep/#plfa_plfa-part2-BigStep-5827" class="Function">⇓-determ</a> <a id="plfa_plfa-part2-BigStep-5836" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-5838" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-5840" href="../BigStep/#plfa_plfa-part2-BigStep-5840" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-5841" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-5843" href="../BigStep/#plfa_plfa-part2-BigStep-5843" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-5845" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-5847" href="../BigStep/#plfa_plfa-part2-BigStep-3070" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-5855" href="../BigStep/#plfa_plfa-part2-BigStep-5840" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-5856" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-5858" href="../BigStep/#plfa_plfa-part2-BigStep-5858" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-5860" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-5862" href="../BigStep/#plfa_plfa-part2-BigStep-5840" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-5864" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-5866" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-5867" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-5869" href="../BigStep/#plfa_plfa-part2-BigStep-5869" class="Bound">V</a> <a id="plfa_plfa-part2-BigStep-5871" href="../BigStep/#plfa_plfa-part2-BigStep-5871" class="Bound">V&#39;</a> <a id="plfa_plfa-part2-BigStep-5874" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-5876" href="../BigStep/#plfa_plfa-part2-BigStep-3100" class="Datatype">Clos</a><a id="plfa_plfa-part2-BigStep-5880" class="Symbol">}</a>
  <a id="plfa_plfa-part2-BigStep-5884" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-5886" href="../BigStep/#plfa_plfa-part2-BigStep-5843" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-5888" href="../BigStep/#plfa_plfa-part2-BigStep-3809" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-5890" href="../BigStep/#plfa_plfa-part2-BigStep-5858" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-5892" href="../BigStep/#plfa_plfa-part2-BigStep-3809" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-5894" href="../BigStep/#plfa_plfa-part2-BigStep-5869" class="Bound">V</a> <a id="plfa_plfa-part2-BigStep-5896" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-5898" href="../BigStep/#plfa_plfa-part2-BigStep-5843" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-5900" href="../BigStep/#plfa_plfa-part2-BigStep-3809" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-5902" href="../BigStep/#plfa_plfa-part2-BigStep-5858" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-5904" href="../BigStep/#plfa_plfa-part2-BigStep-3809" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-5906" href="../BigStep/#plfa_plfa-part2-BigStep-5871" class="Bound">V&#39;</a>
  <a id="plfa_plfa-part2-BigStep-5911" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-5913" href="../BigStep/#plfa_plfa-part2-BigStep-5869" class="Bound">V</a> <a id="plfa_plfa-part2-BigStep-5915" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-BigStep-5917" href="../BigStep/#plfa_plfa-part2-BigStep-5871" class="Bound">V&#39;</a>
<a id="plfa_plfa-part2-BigStep-5920" href="../BigStep/#plfa_plfa-part2-BigStep-5827" class="Function">⇓-determ</a> <a id="plfa_plfa-part2-BigStep-5929" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-5930" href="../BigStep/#plfa_plfa-part2-BigStep-3866" class="InductiveConstructor">⇓-var</a> <a id="plfa_plfa-part2-BigStep-5936" href="../BigStep/#plfa_plfa-part2-BigStep-5936" class="Bound">eq1</a> <a id="plfa_plfa-part2-BigStep-5940" href="../BigStep/#plfa_plfa-part2-BigStep-5940" class="Bound">mc</a><a id="plfa_plfa-part2-BigStep-5942" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-5944" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-5945" href="../BigStep/#plfa_plfa-part2-BigStep-3866" class="InductiveConstructor">⇓-var</a> <a id="plfa_plfa-part2-BigStep-5951" href="../BigStep/#plfa_plfa-part2-BigStep-5951" class="Bound">eq2</a> <a id="plfa_plfa-part2-BigStep-5955" href="../BigStep/#plfa_plfa-part2-BigStep-5955" class="Bound">mc&#39;</a><a id="plfa_plfa-part2-BigStep-5958" class="Symbol">)</a>
    <a id="plfa_plfa-part2-BigStep-5964" class="Keyword">with</a> <a id="plfa_plfa-part2-BigStep-5969" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1729" class="Function">trans</a> <a id="plfa_plfa-part2-BigStep-5975" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-5976" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="plfa_plfa-part2-BigStep-5980" href="../BigStep/#plfa_plfa-part2-BigStep-5936" class="Bound">eq1</a><a id="plfa_plfa-part2-BigStep-5983" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-5985" href="../BigStep/#plfa_plfa-part2-BigStep-5951" class="Bound">eq2</a>
<a id="plfa_plfa-part2-BigStep-5989" class="Symbol">...</a> <a id="plfa_plfa-part2-BigStep-5993" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-5995" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-BigStep-6000" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-6002" href="../BigStep/#plfa_plfa-part2-BigStep-5827" class="Function">⇓-determ</a> <a id="plfa_plfa-part2-BigStep-6011" class="Bound">mc</a> <a id="plfa_plfa-part2-BigStep-6014" class="Bound">mc&#39;</a>
<a id="plfa_plfa-part2-BigStep-6018" href="../BigStep/#plfa_plfa-part2-BigStep-5827" class="Function">⇓-determ</a> <a id="plfa_plfa-part2-BigStep-6027" href="../BigStep/#plfa_plfa-part2-BigStep-4013" class="InductiveConstructor">⇓-lam</a> <a id="plfa_plfa-part2-BigStep-6033" href="../BigStep/#plfa_plfa-part2-BigStep-4013" class="InductiveConstructor">⇓-lam</a> <a id="plfa_plfa-part2-BigStep-6039" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-6041" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part2-BigStep-6046" href="../BigStep/#plfa_plfa-part2-BigStep-5827" class="Function">⇓-determ</a> <a id="plfa_plfa-part2-BigStep-6055" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-6056" href="../BigStep/#plfa_plfa-part2-BigStep-4088" class="InductiveConstructor">⇓-app</a> <a id="plfa_plfa-part2-BigStep-6062" href="../BigStep/#plfa_plfa-part2-BigStep-6062" class="Bound">mc</a> <a id="plfa_plfa-part2-BigStep-6065" href="../BigStep/#plfa_plfa-part2-BigStep-6065" class="Bound">mc₁</a><a id="plfa_plfa-part2-BigStep-6068" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-6070" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-6071" href="../BigStep/#plfa_plfa-part2-BigStep-4088" class="InductiveConstructor">⇓-app</a> <a id="plfa_plfa-part2-BigStep-6077" href="../BigStep/#plfa_plfa-part2-BigStep-6077" class="Bound">mc&#39;</a> <a id="plfa_plfa-part2-BigStep-6081" href="../BigStep/#plfa_plfa-part2-BigStep-6081" class="Bound">mc&#39;&#39;</a><a id="plfa_plfa-part2-BigStep-6085" class="Symbol">)</a>
    <a id="plfa_plfa-part2-BigStep-6091" class="Keyword">with</a> <a id="plfa_plfa-part2-BigStep-6096" href="../BigStep/#plfa_plfa-part2-BigStep-5827" class="Function">⇓-determ</a> <a id="plfa_plfa-part2-BigStep-6105" href="../BigStep/#plfa_plfa-part2-BigStep-6062" class="Bound">mc</a> <a id="plfa_plfa-part2-BigStep-6108" href="../BigStep/#plfa_plfa-part2-BigStep-6077" class="Bound">mc&#39;</a>
<a id="plfa_plfa-part2-BigStep-6112" class="Symbol">...</a> <a id="plfa_plfa-part2-BigStep-6116" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-6118" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-BigStep-6123" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-6125" href="../BigStep/#plfa_plfa-part2-BigStep-5827" class="Function">⇓-determ</a> <a id="plfa_plfa-part2-BigStep-6134" class="Bound">mc₁</a> <a id="plfa_plfa-part2-BigStep-6138" class="Bound">mc&#39;&#39;</a>
</pre><h2 id="大步求值蕴含-β-归约至-λ-抽象">大步求值蕴含 β-归约至 λ-抽象</h2><p>如果大步求值能够求出值，那么输入项能被 β-归约归约为一个 λ-抽象：</p><pre><code>  ∅&#39; ⊢ M ⇓ clos (ƛ N′) δ
  -----------------------------
→ Σ[ N ∈ ∅ , ★ ⊢ ★ ] (M —↠ ƛ N)</code></pre><p>该证明通过对大步推导归纳来完成。通常，我们需要推广命题以完成归纳。 在 <code>⇓-app</code>（函数应用）的情况下，参数被添加到环境中，导致环境变得非空。 相应的 β-归约将参数替换进 λ-抽象的主体中。 所以我们将引理推广为允许任意环境 <code>γ</code> 并且添加一个前提将环境 <code>γ</code> 与等价的替代 <code>σ</code> 相关联。</p><p><code>⇓-app</code> 的情况也要求我们加强结论。 对于 <code>⇓-app</code>，有 <code>γ ⊢ L ⇓ clos (λ N) δ</code> 以及归纳假设给我们 <code>L —↠ ƛ N′</code>， 但我们需要知道 <code>N</code> 和 <code>N′</code> 是等价的。 特别地，<code>N&#39; ≡ subst τ N</code>，其中 <code>τ</code> 是等价于 <code>δ</code> 的替换。 因此我们扩展命题的结论，以说明这两个结果是等价的。</p><p>我们通过定义以下两个相互递归的谓词 <code>V ≈ M</code> 和 <code>γ ≈ₑ σ</code> 来得到两个精确等价的概念</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-_≈_"></a><a id="plfa_plfa-part2-BigStep-7993" href="../BigStep/#plfa_plfa-part2-BigStep-7993" class="Function Operator">_≈_</a> <a id="plfa_plfa-part2-BigStep-7997" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-7999" href="../BigStep/#plfa_plfa-part2-BigStep-3100" class="Datatype">Clos</a> <a id="plfa_plfa-part2-BigStep-8004" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-8006" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-8007" href="../Untyped/#plfa_plfa-part2-Untyped-3852" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-BigStep-8009" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-8011" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-8012" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-8014" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-8016" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a>
<a id="plfa_plfa-part2-BigStep-_≈ₑ_"></a><a id="plfa_plfa-part2-BigStep-8020" href="../BigStep/#plfa_plfa-part2-BigStep-8020" class="Function Operator">_≈ₑ_</a> <a id="plfa_plfa-part2-BigStep-8025" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-8027" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-8029" href="../BigStep/#plfa_plfa-part2-BigStep-8029" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-8030" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-8032" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-8034" href="../BigStep/#plfa_plfa-part2-BigStep-3070" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-8042" href="../BigStep/#plfa_plfa-part2-BigStep-8029" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-8044" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-8046" href="../Substitution/#plfa_plfa-part2-Substitution-2882" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-8052" href="../BigStep/#plfa_plfa-part2-BigStep-8029" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-8054" href="../Untyped/#plfa_plfa-part2-Untyped-3852" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-BigStep-8056" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-8058" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#320" class="Primitive">Set</a>

<a id="plfa_plfa-part2-BigStep-8063" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-8064" href="../BigStep/#plfa_plfa-part2-BigStep-3119" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-8069" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-8070" href="../BigStep/#plfa_plfa-part2-BigStep-8070" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-8071" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-8073" href="../BigStep/#plfa_plfa-part2-BigStep-8073" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-8075" href="../BigStep/#plfa_plfa-part2-BigStep-8075" class="Bound">γ</a><a id="plfa_plfa-part2-BigStep-8076" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-8078" href="../BigStep/#plfa_plfa-part2-BigStep-7993" class="Function Operator">≈</a> <a id="plfa_plfa-part2-BigStep-8080" href="../BigStep/#plfa_plfa-part2-BigStep-8080" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-8082" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-8084" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part2-BigStep-8087" href="../BigStep/#plfa_plfa-part2-BigStep-8087" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-8089" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part2-BigStep-8091" href="../Substitution/#plfa_plfa-part2-Substitution-2882" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-8097" href="../BigStep/#plfa_plfa-part2-BigStep-8070" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-8099" href="../Untyped/#plfa_plfa-part2-Untyped-3852" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-BigStep-8101" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part2-BigStep-8103" href="../BigStep/#plfa_plfa-part2-BigStep-8075" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-8105" href="../BigStep/#plfa_plfa-part2-BigStep-8020" class="Function Operator">≈ₑ</a> <a id="plfa_plfa-part2-BigStep-8108" href="../BigStep/#plfa_plfa-part2-BigStep-8087" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-8110" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part2-BigStep-8112" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-8113" href="../BigStep/#plfa_plfa-part2-BigStep-8080" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-8115" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-BigStep-8117" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-8123" href="../BigStep/#plfa_plfa-part2-BigStep-8087" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-8125" href="../BigStep/#plfa_plfa-part2-BigStep-8073" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-8126" class="Symbol">)</a>

<a id="plfa_plfa-part2-BigStep-8129" href="../BigStep/#plfa_plfa-part2-BigStep-8129" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-8131" href="../BigStep/#plfa_plfa-part2-BigStep-8020" class="Function Operator">≈ₑ</a> <a id="plfa_plfa-part2-BigStep-8134" href="../BigStep/#plfa_plfa-part2-BigStep-8134" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-8136" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-8138" class="Symbol">∀</a> <a id="plfa_plfa-part2-BigStep-8140" href="../BigStep/#plfa_plfa-part2-BigStep-8140" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-8142" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-8144" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-8145" href="../BigStep/#plfa_plfa-part2-BigStep-8129" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-8147" href="../BigStep/#plfa_plfa-part2-BigStep-8140" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-8148" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-8150" href="../BigStep/#plfa_plfa-part2-BigStep-7993" class="Function Operator">≈</a> <a id="plfa_plfa-part2-BigStep-8152" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-8153" href="../BigStep/#plfa_plfa-part2-BigStep-8134" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-8155" href="../BigStep/#plfa_plfa-part2-BigStep-8140" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-8156" class="Symbol">)</a>
</pre><p>现在我们可以给出主要的引理。</p><pre><code>如果 γ ⊢ M ⇓ V  且  γ ≈ₑ σ,
那么有  subst σ M —↠ N  以及  V ≈ N  对于某个 N。</code></pre><p>在开始证明之前，我们需要建立一些有关等价的环境和替换的引理。</p><p>空环境与我们从 <a href="../Substitution/">Substitution</a> 章中导入的恒等替换等价。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-≈ₑ-id"></a><a id="plfa_plfa-part2-BigStep-8738" href="../BigStep/#plfa_plfa-part2-BigStep-8738" class="Function">≈ₑ-id</a> <a id="plfa_plfa-part2-BigStep-8744" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-8746" href="../BigStep/#plfa_plfa-part2-BigStep-3318" class="Function">∅&#39;</a> <a id="plfa_plfa-part2-BigStep-8749" href="../BigStep/#plfa_plfa-part2-BigStep-8020" class="Function Operator">≈ₑ</a> <a id="plfa_plfa-part2-BigStep-8752" href="../Substitution/#plfa_plfa-part2-Substitution-3762" class="Function">ids</a>
<a id="plfa_plfa-part2-BigStep-8756" href="../BigStep/#plfa_plfa-part2-BigStep-8738" class="Function">≈ₑ-id</a> <a id="plfa_plfa-part2-BigStep-8762" class="Symbol">()</a>
</pre><p>显然，对项应用恒等替换会得到相同的项。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-sub-id"></a><a id="plfa_plfa-part2-BigStep-8888" href="../BigStep/#plfa_plfa-part2-BigStep-8888" class="Function">sub-id</a> <a id="plfa_plfa-part2-BigStep-8895" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-8897" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-8899" href="../BigStep/#plfa_plfa-part2-BigStep-8899" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-8900" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-8902" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-8903" href="../BigStep/#plfa_plfa-part2-BigStep-8903" class="Bound">A</a><a id="plfa_plfa-part2-BigStep-8904" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-8906" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-8907" href="../BigStep/#plfa_plfa-part2-BigStep-8907" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-8909" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-8911" href="../BigStep/#plfa_plfa-part2-BigStep-8899" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-8913" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-8915" href="../BigStep/#plfa_plfa-part2-BigStep-8903" class="Bound">A</a><a id="plfa_plfa-part2-BigStep-8916" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-8918" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-8920" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-8926" href="../Substitution/#plfa_plfa-part2-Substitution-3762" class="Function">ids</a> <a id="plfa_plfa-part2-BigStep-8930" href="../BigStep/#plfa_plfa-part2-BigStep-8907" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-8932" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-BigStep-8934" href="../BigStep/#plfa_plfa-part2-BigStep-8907" class="Bound">M</a>
<a id="plfa_plfa-part2-BigStep-8936" href="../BigStep/#plfa_plfa-part2-BigStep-8888" class="Function">sub-id</a> <a id="plfa_plfa-part2-BigStep-8943" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-8945" href="../Substitution/#plfa_plfa-part2-Substitution-20298" class="Function">plfa.part2.Substitution.sub-id</a>
</pre><p>我们定义一个辅助函数来扩展替换。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-ext-subst"></a><a id="plfa_plfa-part2-BigStep-9079" href="../BigStep/#plfa_plfa-part2-BigStep-9079" class="Function">ext-subst</a> <a id="plfa_plfa-part2-BigStep-9089" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-9091" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-9093" href="../BigStep/#plfa_plfa-part2-BigStep-9093" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-9095" href="../BigStep/#plfa_plfa-part2-BigStep-9095" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-9096" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-9098" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-9100" href="../Substitution/#plfa_plfa-part2-Substitution-2882" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-9106" href="../BigStep/#plfa_plfa-part2-BigStep-9093" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-9108" href="../BigStep/#plfa_plfa-part2-BigStep-9095" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-9110" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-9112" href="../BigStep/#plfa_plfa-part2-BigStep-9095" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-9114" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-9116" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-BigStep-9118" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-9120" href="../Substitution/#plfa_plfa-part2-Substitution-2882" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-9126" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-9127" href="../BigStep/#plfa_plfa-part2-BigStep-9093" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-9129" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-9131" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-9132" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-9134" href="../BigStep/#plfa_plfa-part2-BigStep-9095" class="Bound">Δ</a>
<a id="plfa_plfa-part2-BigStep-9136" href="../BigStep/#plfa_plfa-part2-BigStep-9079" class="Function">ext-subst</a><a id="plfa_plfa-part2-BigStep-9145" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-9146" href="../BigStep/#plfa_plfa-part2-BigStep-9146" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-9147" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-9149" href="../BigStep/#plfa_plfa-part2-BigStep-9149" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-9150" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-9152" href="../BigStep/#plfa_plfa-part2-BigStep-9152" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-9154" href="../BigStep/#plfa_plfa-part2-BigStep-9154" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-9156" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-9157" href="../BigStep/#plfa_plfa-part2-BigStep-9157" class="Bound">A</a><a id="plfa_plfa-part2-BigStep-9158" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-9160" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-9162" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-9168" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-9169" href="../Untyped/#plfa_plfa-part2-Untyped-9439" class="Function">subst-zero</a> <a id="plfa_plfa-part2-BigStep-9180" href="../BigStep/#plfa_plfa-part2-BigStep-9154" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-9181" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-9183" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">∘</a> <a id="plfa_plfa-part2-BigStep-9185" href="../Untyped/#plfa_plfa-part2-Untyped-8582" class="Function">exts</a> <a id="plfa_plfa-part2-BigStep-9190" href="../BigStep/#plfa_plfa-part2-BigStep-9152" class="Bound">σ</a>
</pre><p>下一个需要证明的引理声称如果从等价的环境和替换 <code>γ ≈ₑ σ</code> 开始， 将它们用等价的闭包和项 <code>c ≈ N</code> 扩展， 将得到等价的环境和替换 <code>(γ ,&#39; V) ≈ₑ (ext-subst σ N)</code>， 即对于任何变量 <code>x</code> 有 <code>(γ ,&#39; V) x ≈ₑ (ext-subst σ N) x</code>。 证明将通过归纳 <code>x</code> 完成，并且我们需要如下引理。 该引理声称将<code>exts σ</code> 和 <code>subst-zero</code> 的组合应用至 <code>S x</code> 等同于 <code>σ x</code>。 这是 <a href="../Substitution/">Substitution</a> 章节中一个定理的推论。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-subst-zero-exts"></a><a id="plfa_plfa-part2-BigStep-10105" href="../BigStep/#plfa_plfa-part2-BigStep-10105" class="Function">subst-zero-exts</a> <a id="plfa_plfa-part2-BigStep-10121" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10123" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-10125" href="../BigStep/#plfa_plfa-part2-BigStep-10125" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-10127" href="../BigStep/#plfa_plfa-part2-BigStep-10127" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-10128" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10130" href="../BigStep/#plfa_plfa-part2-BigStep-10130" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-10132" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10134" href="../Substitution/#plfa_plfa-part2-Substitution-2882" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-10140" href="../BigStep/#plfa_plfa-part2-BigStep-10125" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-10142" href="../BigStep/#plfa_plfa-part2-BigStep-10127" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-10143" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10145" href="../BigStep/#plfa_plfa-part2-BigStep-10145" class="Bound">B</a><a id="plfa_plfa-part2-BigStep-10146" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10148" href="../BigStep/#plfa_plfa-part2-BigStep-10148" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-10150" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10152" href="../BigStep/#plfa_plfa-part2-BigStep-10127" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-10154" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-10156" href="../BigStep/#plfa_plfa-part2-BigStep-10145" class="Bound">B</a><a id="plfa_plfa-part2-BigStep-10157" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10159" href="../BigStep/#plfa_plfa-part2-BigStep-10159" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-10161" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10163" href="../BigStep/#plfa_plfa-part2-BigStep-10125" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-10165" href="../Untyped/#plfa_plfa-part2-Untyped-4355" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-BigStep-10167" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-10168" class="Symbol">}</a>
  <a id="plfa_plfa-part2-BigStep-10172" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-10174" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10175" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-10181" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10182" href="../Untyped/#plfa_plfa-part2-Untyped-9439" class="Function">subst-zero</a> <a id="plfa_plfa-part2-BigStep-10193" href="../BigStep/#plfa_plfa-part2-BigStep-10148" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-10194" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-10196" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">∘</a> <a id="plfa_plfa-part2-BigStep-10198" href="../Untyped/#plfa_plfa-part2-Untyped-8582" class="Function">exts</a> <a id="plfa_plfa-part2-BigStep-10203" href="../BigStep/#plfa_plfa-part2-BigStep-10130" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-10204" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-10206" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10207" href="../Untyped/#plfa_plfa-part2-Untyped-4436" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-BigStep-10209" href="../BigStep/#plfa_plfa-part2-BigStep-10159" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-10210" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-10212" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-BigStep-10214" href="../BigStep/#plfa_plfa-part2-BigStep-10130" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-10216" href="../BigStep/#plfa_plfa-part2-BigStep-10159" class="Bound">x</a>
<a id="plfa_plfa-part2-BigStep-10218" href="../BigStep/#plfa_plfa-part2-BigStep-10105" class="Function">subst-zero-exts</a> <a id="plfa_plfa-part2-BigStep-10234" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10235" href="../BigStep/#plfa_plfa-part2-BigStep-10235" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-10236" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10238" href="../BigStep/#plfa_plfa-part2-BigStep-10238" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-10239" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10241" href="../BigStep/#plfa_plfa-part2-BigStep-10241" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-10242" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10244" href="../BigStep/#plfa_plfa-part2-BigStep-10244" class="Bound">B</a><a id="plfa_plfa-part2-BigStep-10245" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10247" href="../BigStep/#plfa_plfa-part2-BigStep-10247" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-10248" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10250" href="../BigStep/#plfa_plfa-part2-BigStep-10250" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-10251" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10253" class="Symbol">=</a>
   <a id="plfa_plfa-part2-BigStep-10258" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1461" class="Function">cong-app</a> <a id="plfa_plfa-part2-BigStep-10267" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10268" href="../Substitution/#plfa_plfa-part2-Substitution-30201" class="Function">plfa.part2.Substitution.subst-zero-exts-cons</a><a id="plfa_plfa-part2-BigStep-10312" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10313" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-10315" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-10317" href="../BigStep/#plfa_plfa-part2-BigStep-10241" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-10318" class="Symbol">})</a> <a id="plfa_plfa-part2-BigStep-10321" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10322" href="../Untyped/#plfa_plfa-part2-Untyped-4436" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-BigStep-10324" href="../BigStep/#plfa_plfa-part2-BigStep-10250" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-10325" class="Symbol">)</a>
</pre><p>所以 <code>≈ₑ-ext</code> 的证明如下。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-≈ₑ-ext"></a><a id="plfa_plfa-part2-BigStep-10410" href="../BigStep/#plfa_plfa-part2-BigStep-10410" class="Function">≈ₑ-ext</a> <a id="plfa_plfa-part2-BigStep-10417" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10419" class="Symbol">∀</a> <a id="plfa_plfa-part2-BigStep-10421" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10422" href="../BigStep/#plfa_plfa-part2-BigStep-10422" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-10423" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10425" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10426" href="../BigStep/#plfa_plfa-part2-BigStep-10426" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-10428" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10430" href="../BigStep/#plfa_plfa-part2-BigStep-3070" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-10438" href="../BigStep/#plfa_plfa-part2-BigStep-10422" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-10439" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10441" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10442" href="../BigStep/#plfa_plfa-part2-BigStep-10442" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-10444" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10446" href="../Substitution/#plfa_plfa-part2-Substitution-2882" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-10452" href="../BigStep/#plfa_plfa-part2-BigStep-10422" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-10454" href="../Untyped/#plfa_plfa-part2-Untyped-3852" class="InductiveConstructor">∅</a><a id="plfa_plfa-part2-BigStep-10455" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10457" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10458" href="../BigStep/#plfa_plfa-part2-BigStep-10458" class="Bound">V</a><a id="plfa_plfa-part2-BigStep-10459" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10461" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10462" href="../BigStep/#plfa_plfa-part2-BigStep-10462" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-10464" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-10466" href="../Untyped/#plfa_plfa-part2-Untyped-3852" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-BigStep-10468" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-10470" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-10471" class="Symbol">}</a>
  <a id="plfa_plfa-part2-BigStep-10475" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-10477" href="../BigStep/#plfa_plfa-part2-BigStep-10426" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-10479" href="../BigStep/#plfa_plfa-part2-BigStep-8020" class="Function Operator">≈ₑ</a> <a id="plfa_plfa-part2-BigStep-10482" href="../BigStep/#plfa_plfa-part2-BigStep-10442" class="Bound">σ</a>  <a id="plfa_plfa-part2-BigStep-10485" class="Symbol">→</a>  <a id="plfa_plfa-part2-BigStep-10488" href="../BigStep/#plfa_plfa-part2-BigStep-10458" class="Bound">V</a> <a id="plfa_plfa-part2-BigStep-10490" href="../BigStep/#plfa_plfa-part2-BigStep-7993" class="Function Operator">≈</a> <a id="plfa_plfa-part2-BigStep-10492" href="../BigStep/#plfa_plfa-part2-BigStep-10462" class="Bound">N</a>
    <a id="plfa_plfa-part2-BigStep-10498" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part2-BigStep-10527" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-10529" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10530" href="../BigStep/#plfa_plfa-part2-BigStep-10426" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-10532" href="../BigStep/#plfa_plfa-part2-BigStep-3340" class="Function Operator">,&#39;</a> <a id="plfa_plfa-part2-BigStep-10535" href="../BigStep/#plfa_plfa-part2-BigStep-10458" class="Bound">V</a><a id="plfa_plfa-part2-BigStep-10536" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-10538" href="../BigStep/#plfa_plfa-part2-BigStep-8020" class="Function Operator">≈ₑ</a> <a id="plfa_plfa-part2-BigStep-10541" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10542" href="../BigStep/#plfa_plfa-part2-BigStep-9079" class="Function">ext-subst</a> <a id="plfa_plfa-part2-BigStep-10552" href="../BigStep/#plfa_plfa-part2-BigStep-10442" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-10554" href="../BigStep/#plfa_plfa-part2-BigStep-10462" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-10555" class="Symbol">)</a>
<a id="plfa_plfa-part2-BigStep-10557" href="../BigStep/#plfa_plfa-part2-BigStep-10410" class="Function">≈ₑ-ext</a> <a id="plfa_plfa-part2-BigStep-10564" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10565" href="../BigStep/#plfa_plfa-part2-BigStep-10565" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-10566" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10568" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10569" href="../BigStep/#plfa_plfa-part2-BigStep-10569" class="Bound">γ</a><a id="plfa_plfa-part2-BigStep-10570" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10572" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10573" href="../BigStep/#plfa_plfa-part2-BigStep-10573" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-10574" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10576" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10577" href="../BigStep/#plfa_plfa-part2-BigStep-10577" class="Bound">V</a><a id="plfa_plfa-part2-BigStep-10578" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10580" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10581" href="../BigStep/#plfa_plfa-part2-BigStep-10581" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-10582" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10584" href="../BigStep/#plfa_plfa-part2-BigStep-10584" class="Bound">γ≈ₑσ</a> <a id="plfa_plfa-part2-BigStep-10589" href="../BigStep/#plfa_plfa-part2-BigStep-10589" class="Bound">V≈N</a> <a id="plfa_plfa-part2-BigStep-10593" href="../Untyped/#plfa_plfa-part2-Untyped-4391" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-BigStep-10595" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-10597" href="../BigStep/#plfa_plfa-part2-BigStep-10589" class="Bound">V≈N</a>
<a id="plfa_plfa-part2-BigStep-10601" href="../BigStep/#plfa_plfa-part2-BigStep-10410" class="Function">≈ₑ-ext</a> <a id="plfa_plfa-part2-BigStep-10608" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10609" href="../BigStep/#plfa_plfa-part2-BigStep-10609" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-10610" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10612" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10613" href="../BigStep/#plfa_plfa-part2-BigStep-10613" class="Bound">γ</a><a id="plfa_plfa-part2-BigStep-10614" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10616" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10617" href="../BigStep/#plfa_plfa-part2-BigStep-10617" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-10618" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10620" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10621" href="../BigStep/#plfa_plfa-part2-BigStep-10621" class="Bound">V</a><a id="plfa_plfa-part2-BigStep-10622" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10624" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10625" href="../BigStep/#plfa_plfa-part2-BigStep-10625" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-10626" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10628" href="../BigStep/#plfa_plfa-part2-BigStep-10628" class="Bound">γ≈ₑσ</a> <a id="plfa_plfa-part2-BigStep-10633" href="../BigStep/#plfa_plfa-part2-BigStep-10633" class="Bound">V≈N</a> <a id="plfa_plfa-part2-BigStep-10637" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-10638" href="../Untyped/#plfa_plfa-part2-Untyped-4436" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-BigStep-10640" href="../BigStep/#plfa_plfa-part2-BigStep-10640" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-10641" class="Symbol">)</a>
  <a id="plfa_plfa-part2-BigStep-10645" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-BigStep-10653" href="../BigStep/#plfa_plfa-part2-BigStep-10105" class="Function">subst-zero-exts</a> <a id="plfa_plfa-part2-BigStep-10669" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-10670" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-10672" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-10674" href="../BigStep/#plfa_plfa-part2-BigStep-10617" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-10675" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10677" class="Argument">M</a> <a id="plfa_plfa-part2-BigStep-10679" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-10681" href="../BigStep/#plfa_plfa-part2-BigStep-10625" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-10682" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-10684" href="../BigStep/#plfa_plfa-part2-BigStep-10640" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-10685" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-10687" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-10689" href="../BigStep/#plfa_plfa-part2-BigStep-10628" class="Bound">γ≈ₑσ</a> <a id="plfa_plfa-part2-BigStep-10694" href="../BigStep/#plfa_plfa-part2-BigStep-10640" class="Bound">x</a>
</pre><p>我们通过对输入项进行归纳来证明。</p><ul><li><p>如果它是 <code>Z</code>，那么我们使用前提 <code>V ≈ N</code> 立即得出结论。</p></li><li><p>如果它是 <code>S x</code>，那么我们使用 <code>subst-zero-exts</code> 引理来重写，并使用前提 <code>γ ≈ₑ σ</code> 来得出结论。</p></li></ul><p>为了证明主要的引理，我们需要另一个关于替换的技术性的引理。 接连应用两个替换与先将两个替换连接起来再应用等价。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-sub-sub"></a><a id="plfa_plfa-part2-BigStep-11343" href="../BigStep/#plfa_plfa-part2-BigStep-11343" class="Function">sub-sub</a> <a id="plfa_plfa-part2-BigStep-11351" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11353" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-11355" href="../BigStep/#plfa_plfa-part2-BigStep-11355" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-11357" href="../BigStep/#plfa_plfa-part2-BigStep-11357" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-11359" href="../BigStep/#plfa_plfa-part2-BigStep-11359" class="Bound">Σ</a><a id="plfa_plfa-part2-BigStep-11360" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-11362" href="../BigStep/#plfa_plfa-part2-BigStep-11362" class="Bound">A</a><a id="plfa_plfa-part2-BigStep-11363" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-11365" href="../BigStep/#plfa_plfa-part2-BigStep-11365" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-11367" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11369" href="../BigStep/#plfa_plfa-part2-BigStep-11355" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-11371" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-11373" href="../BigStep/#plfa_plfa-part2-BigStep-11362" class="Bound">A</a><a id="plfa_plfa-part2-BigStep-11374" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-11376" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-11377" href="../BigStep/#plfa_plfa-part2-BigStep-11377" class="Bound">σ₁</a> <a id="plfa_plfa-part2-BigStep-11380" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11382" href="../Substitution/#plfa_plfa-part2-Substitution-2882" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-11388" href="../BigStep/#plfa_plfa-part2-BigStep-11355" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-11390" href="../BigStep/#plfa_plfa-part2-BigStep-11357" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-11391" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-11393" href="../BigStep/#plfa_plfa-part2-BigStep-11393" class="Bound">σ₂</a> <a id="plfa_plfa-part2-BigStep-11396" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11398" href="../Substitution/#plfa_plfa-part2-Substitution-2882" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-11404" href="../BigStep/#plfa_plfa-part2-BigStep-11357" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-11406" href="../BigStep/#plfa_plfa-part2-BigStep-11359" class="Bound">Σ</a><a id="plfa_plfa-part2-BigStep-11407" class="Symbol">}</a>
  <a id="plfa_plfa-part2-BigStep-11411" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-11413" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-11419" href="../BigStep/#plfa_plfa-part2-BigStep-11393" class="Bound">σ₂</a> <a id="plfa_plfa-part2-BigStep-11422" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-11423" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-11429" href="../BigStep/#plfa_plfa-part2-BigStep-11377" class="Bound">σ₁</a> <a id="plfa_plfa-part2-BigStep-11432" href="../BigStep/#plfa_plfa-part2-BigStep-11365" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-11433" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-11435" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-BigStep-11437" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-11443" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-11444" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-11450" href="../BigStep/#plfa_plfa-part2-BigStep-11393" class="Bound">σ₂</a> <a id="plfa_plfa-part2-BigStep-11453" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">∘</a> <a id="plfa_plfa-part2-BigStep-11455" href="../BigStep/#plfa_plfa-part2-BigStep-11377" class="Bound">σ₁</a><a id="plfa_plfa-part2-BigStep-11457" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-11459" href="../BigStep/#plfa_plfa-part2-BigStep-11365" class="Bound">M</a>
<a id="plfa_plfa-part2-BigStep-11461" href="../BigStep/#plfa_plfa-part2-BigStep-11343" class="Function">sub-sub</a> <a id="plfa_plfa-part2-BigStep-11469" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-11470" class="Argument">M</a> <a id="plfa_plfa-part2-BigStep-11472" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-11474" href="../BigStep/#plfa_plfa-part2-BigStep-11474" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-11475" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-11477" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-11479" href="../Substitution/#plfa_plfa-part2-Substitution-27393" class="Function">plfa.part2.Substitution.sub-sub</a> <a id="plfa_plfa-part2-BigStep-11511" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-11512" class="Argument">M</a> <a id="plfa_plfa-part2-BigStep-11514" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-11516" href="../BigStep/#plfa_plfa-part2-BigStep-11474" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-11517" class="Symbol">}</a>
</pre><p>我们到达了主要引理：如果 <code>M</code> 在环境 <code>γ</code> 中大步求值为闭包 <code>V</code>，并且 <code>γ ≈ₑ σ</code>， 那么 <code>subst σ M</code> 将归约为某个等价于 <code>V</code> 的项 <code>N</code>。我们如下叙述该证明。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-⇓→—↠×≈"></a><a id="plfa_plfa-part2-BigStep-11839" href="../BigStep/#plfa_plfa-part2-BigStep-11839" class="Function">⇓→—↠×≈</a> <a id="plfa_plfa-part2-BigStep-11846" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11848" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-11850" href="../BigStep/#plfa_plfa-part2-BigStep-11850" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-11851" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-11853" href="../BigStep/#plfa_plfa-part2-BigStep-11853" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-11855" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11857" href="../BigStep/#plfa_plfa-part2-BigStep-3070" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-11865" href="../BigStep/#plfa_plfa-part2-BigStep-11850" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-11866" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-11868" href="../BigStep/#plfa_plfa-part2-BigStep-11868" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-11870" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11872" href="../Substitution/#plfa_plfa-part2-Substitution-2882" class="Function">Subst</a> <a id="plfa_plfa-part2-BigStep-11878" href="../BigStep/#plfa_plfa-part2-BigStep-11850" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-11880" href="../Untyped/#plfa_plfa-part2-Untyped-3852" class="InductiveConstructor">∅</a><a id="plfa_plfa-part2-BigStep-11881" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-11883" href="../BigStep/#plfa_plfa-part2-BigStep-11883" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-11885" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11887" href="../BigStep/#plfa_plfa-part2-BigStep-11850" class="Bound">Γ</a> <a id="plfa_plfa-part2-BigStep-11889" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-11891" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-11892" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-11894" href="../BigStep/#plfa_plfa-part2-BigStep-11894" class="Bound">V</a> <a id="plfa_plfa-part2-BigStep-11896" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-11898" href="../BigStep/#plfa_plfa-part2-BigStep-3100" class="Datatype">Clos</a><a id="plfa_plfa-part2-BigStep-11902" class="Symbol">}</a>
       <a id="plfa_plfa-part2-BigStep-11911" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-11913" href="../BigStep/#plfa_plfa-part2-BigStep-11853" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-11915" href="../BigStep/#plfa_plfa-part2-BigStep-3809" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-11917" href="../BigStep/#plfa_plfa-part2-BigStep-11883" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-11919" href="../BigStep/#plfa_plfa-part2-BigStep-3809" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-11921" href="../BigStep/#plfa_plfa-part2-BigStep-11894" class="Bound">V</a>  <a id="plfa_plfa-part2-BigStep-11924" class="Symbol">→</a>  <a id="plfa_plfa-part2-BigStep-11927" href="../BigStep/#plfa_plfa-part2-BigStep-11853" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-11929" href="../BigStep/#plfa_plfa-part2-BigStep-8020" class="Function Operator">≈ₑ</a> <a id="plfa_plfa-part2-BigStep-11932" href="../BigStep/#plfa_plfa-part2-BigStep-11868" class="Bound">σ</a>
         <a id="plfa_plfa-part2-BigStep-11943" class="Comment">---------------------------------------</a>
       <a id="plfa_plfa-part2-BigStep-11990" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-11992" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part2-BigStep-11995" href="../BigStep/#plfa_plfa-part2-BigStep-11995" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-11997" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part2-BigStep-11999" href="../Untyped/#plfa_plfa-part2-Untyped-3852" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-BigStep-12001" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-12003" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-BigStep-12005" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part2-BigStep-12007" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12008" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12014" href="../BigStep/#plfa_plfa-part2-BigStep-11868" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12016" href="../BigStep/#plfa_plfa-part2-BigStep-11883" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-12018" href="../Untyped/#plfa_plfa-part2-Untyped-14249" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part2-BigStep-12021" href="../BigStep/#plfa_plfa-part2-BigStep-11995" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12022" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12024" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part2-BigStep-12026" href="../BigStep/#plfa_plfa-part2-BigStep-11894" class="Bound">V</a> <a id="plfa_plfa-part2-BigStep-12028" href="../BigStep/#plfa_plfa-part2-BigStep-7993" class="Function Operator">≈</a> <a id="plfa_plfa-part2-BigStep-12030" href="../BigStep/#plfa_plfa-part2-BigStep-11995" class="Bound">N</a>
<a id="plfa_plfa-part2-BigStep-12032" href="../BigStep/#plfa_plfa-part2-BigStep-11839" class="Function">⇓→—↠×≈</a> <a id="plfa_plfa-part2-BigStep-12039" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12040" class="Argument">γ</a> <a id="plfa_plfa-part2-BigStep-12042" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12044" href="../BigStep/#plfa_plfa-part2-BigStep-12044" class="Bound">γ</a><a id="plfa_plfa-part2-BigStep-12045" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12047" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12048" href="../BigStep/#plfa_plfa-part2-BigStep-3866" class="InductiveConstructor">⇓-var</a><a id="plfa_plfa-part2-BigStep-12053" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12054" class="Argument">x</a> <a id="plfa_plfa-part2-BigStep-12056" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12058" href="../BigStep/#plfa_plfa-part2-BigStep-12058" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-12059" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12061" href="../BigStep/#plfa_plfa-part2-BigStep-12061" class="Bound">γx≡Lδ</a> <a id="plfa_plfa-part2-BigStep-12067" href="../BigStep/#plfa_plfa-part2-BigStep-12067" class="Bound">δ⊢L⇓V</a><a id="plfa_plfa-part2-BigStep-12072" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12074" href="../BigStep/#plfa_plfa-part2-BigStep-12074" class="Bound">γ≈ₑσ</a>
    <a id="plfa_plfa-part2-BigStep-12083" class="Keyword">with</a> <a id="plfa_plfa-part2-BigStep-12088" href="../BigStep/#plfa_plfa-part2-BigStep-12044" class="Bound">γ</a> <a id="plfa_plfa-part2-BigStep-12090" href="../BigStep/#plfa_plfa-part2-BigStep-12058" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-12092" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12094" href="../BigStep/#plfa_plfa-part2-BigStep-12074" class="Bound">γ≈ₑσ</a> <a id="plfa_plfa-part2-BigStep-12099" href="../BigStep/#plfa_plfa-part2-BigStep-12058" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-12101" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12103" href="../BigStep/#plfa_plfa-part2-BigStep-12061" class="Bound">γx≡Lδ</a>
<a id="plfa_plfa-part2-BigStep-12109" class="Symbol">...</a> <a id="plfa_plfa-part2-BigStep-12113" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12115" href="../BigStep/#plfa_plfa-part2-BigStep-3119" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-12120" href="../BigStep/#plfa_plfa-part2-BigStep-12120" class="Bound">L</a> <a id="plfa_plfa-part2-BigStep-12122" href="../BigStep/#plfa_plfa-part2-BigStep-12122" class="Bound">δ</a> <a id="plfa_plfa-part2-BigStep-12124" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12126" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12128" href="../BigStep/#plfa_plfa-part2-BigStep-12128" class="Bound">τ</a> <a id="plfa_plfa-part2-BigStep-12130" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12132" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12134" href="../BigStep/#plfa_plfa-part2-BigStep-12134" class="Bound">δ≈ₑτ</a> <a id="plfa_plfa-part2-BigStep-12139" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12141" href="../BigStep/#plfa_plfa-part2-BigStep-12141" class="Bound">σx≡τL</a> <a id="plfa_plfa-part2-BigStep-12147" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12149" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12151" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12153" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
      <a id="plfa_plfa-part2-BigStep-12164" class="Keyword">with</a> <a id="plfa_plfa-part2-BigStep-12169" href="../BigStep/#plfa_plfa-part2-BigStep-11839" class="Function">⇓→—↠×≈</a><a id="plfa_plfa-part2-BigStep-12175" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12176" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-12178" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12180" href="../BigStep/#plfa_plfa-part2-BigStep-12128" class="Bound">τ</a><a id="plfa_plfa-part2-BigStep-12181" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12183" class="Bound">δ⊢L⇓V</a> <a id="plfa_plfa-part2-BigStep-12189" href="../BigStep/#plfa_plfa-part2-BigStep-12134" class="Bound">δ≈ₑτ</a>
<a id="plfa_plfa-part2-BigStep-12194" class="Symbol">...</a>   <a id="plfa_plfa-part2-BigStep-12200" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12202" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12204" href="../BigStep/#plfa_plfa-part2-BigStep-12204" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-12206" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12208" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12210" href="../BigStep/#plfa_plfa-part2-BigStep-12210" class="Bound">τL—↠N</a> <a id="plfa_plfa-part2-BigStep-12216" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12218" href="../BigStep/#plfa_plfa-part2-BigStep-12218" class="Bound">V≈N</a> <a id="plfa_plfa-part2-BigStep-12222" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12224" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12226" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-BigStep-12234" class="Bound">σx≡τL</a> <a id="plfa_plfa-part2-BigStep-12240" class="Symbol">=</a>
        <a id="plfa_plfa-part2-BigStep-12250" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12252" href="../BigStep/#plfa_plfa-part2-BigStep-12204" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-12254" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12256" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12258" href="../BigStep/#plfa_plfa-part2-BigStep-12210" class="Bound">τL—↠N</a> <a id="plfa_plfa-part2-BigStep-12264" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12266" href="../BigStep/#plfa_plfa-part2-BigStep-12218" class="Bound">V≈N</a> <a id="plfa_plfa-part2-BigStep-12270" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12272" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part2-BigStep-12274" href="../BigStep/#plfa_plfa-part2-BigStep-11839" class="Function">⇓→—↠×≈</a> <a id="plfa_plfa-part2-BigStep-12281" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12282" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-12284" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12286" href="../BigStep/#plfa_plfa-part2-BigStep-12286" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-12287" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12289" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12290" class="Argument">V</a> <a id="plfa_plfa-part2-BigStep-12292" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12294" href="../BigStep/#plfa_plfa-part2-BigStep-3119" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-12299" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12300" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-12302" href="../BigStep/#plfa_plfa-part2-BigStep-12302" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12303" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12305" href="../BigStep/#plfa_plfa-part2-BigStep-12305" class="Bound">γ</a><a id="plfa_plfa-part2-BigStep-12306" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12308" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12309" href="../BigStep/#plfa_plfa-part2-BigStep-4013" class="InductiveConstructor">⇓-lam</a><a id="plfa_plfa-part2-BigStep-12314" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12316" href="../BigStep/#plfa_plfa-part2-BigStep-12316" class="Bound">γ≈ₑσ</a> <a id="plfa_plfa-part2-BigStep-12321" class="Symbol">=</a>
    <a id="plfa_plfa-part2-BigStep-12327" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12329" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12335" href="../BigStep/#plfa_plfa-part2-BigStep-12286" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12337" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12338" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-12340" href="../BigStep/#plfa_plfa-part2-BigStep-12302" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12341" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12343" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12345" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12347" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12353" href="../BigStep/#plfa_plfa-part2-BigStep-12286" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12355" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12356" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-12358" href="../BigStep/#plfa_plfa-part2-BigStep-12302" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12359" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12361" href="../Untyped/#plfa_plfa-part2-Untyped-14295" class="InductiveConstructor Operator">∎</a> <a id="plfa_plfa-part2-BigStep-12363" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12365" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12367" href="../BigStep/#plfa_plfa-part2-BigStep-12286" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12369" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12371" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12373" href="../BigStep/#plfa_plfa-part2-BigStep-12316" class="Bound">γ≈ₑσ</a> <a id="plfa_plfa-part2-BigStep-12378" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12380" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-BigStep-12385" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12387" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12389" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12391" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part2-BigStep-12393" href="../BigStep/#plfa_plfa-part2-BigStep-11839" class="Function">⇓→—↠×≈</a><a id="plfa_plfa-part2-BigStep-12399" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12400" href="../BigStep/#plfa_plfa-part2-BigStep-12400" class="Bound">Γ</a><a id="plfa_plfa-part2-BigStep-12401" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-12403" href="../BigStep/#plfa_plfa-part2-BigStep-12403" class="Bound">γ</a><a id="plfa_plfa-part2-BigStep-12404" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12406" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12407" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-12409" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12411" href="../BigStep/#plfa_plfa-part2-BigStep-12411" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-12412" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12414" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12415" href="../BigStep/#plfa_plfa-part2-BigStep-12415" class="Bound">L</a> <a id="plfa_plfa-part2-BigStep-12417" href="../Untyped/#plfa_plfa-part2-Untyped-5546" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-BigStep-12419" href="../BigStep/#plfa_plfa-part2-BigStep-12419" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-12420" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12422" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12423" href="../BigStep/#plfa_plfa-part2-BigStep-12423" class="Bound">V</a><a id="plfa_plfa-part2-BigStep-12424" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12426" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12427" href="../BigStep/#plfa_plfa-part2-BigStep-4088" class="InductiveConstructor">⇓-app</a> <a id="plfa_plfa-part2-BigStep-12433" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12434" class="Argument">N</a> <a id="plfa_plfa-part2-BigStep-12436" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12438" href="../BigStep/#plfa_plfa-part2-BigStep-12438" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12439" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12441" href="../BigStep/#plfa_plfa-part2-BigStep-12441" class="Bound">L⇓ƛNδ</a> <a id="plfa_plfa-part2-BigStep-12447" href="../BigStep/#plfa_plfa-part2-BigStep-12447" class="Bound">N⇓V</a><a id="plfa_plfa-part2-BigStep-12450" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12452" href="../BigStep/#plfa_plfa-part2-BigStep-12452" class="Bound">γ≈ₑσ</a>
    <a id="plfa_plfa-part2-BigStep-12461" class="Keyword">with</a> <a id="plfa_plfa-part2-BigStep-12466" href="../BigStep/#plfa_plfa-part2-BigStep-11839" class="Function">⇓→—↠×≈</a><a id="plfa_plfa-part2-BigStep-12472" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12473" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-12475" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12477" href="../BigStep/#plfa_plfa-part2-BigStep-12411" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-12478" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12480" href="../BigStep/#plfa_plfa-part2-BigStep-12441" class="Bound">L⇓ƛNδ</a> <a id="plfa_plfa-part2-BigStep-12486" href="../BigStep/#plfa_plfa-part2-BigStep-12452" class="Bound">γ≈ₑσ</a>
<a id="plfa_plfa-part2-BigStep-12491" class="Symbol">...</a> <a id="plfa_plfa-part2-BigStep-12495" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12497" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12499" class="Symbol">_</a> <a id="plfa_plfa-part2-BigStep-12501" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12503" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12505" href="../BigStep/#plfa_plfa-part2-BigStep-12505" class="Bound">σL—↠ƛτN</a> <a id="plfa_plfa-part2-BigStep-12513" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12515" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12517" href="../BigStep/#plfa_plfa-part2-BigStep-12517" class="Bound">τ</a> <a id="plfa_plfa-part2-BigStep-12519" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12521" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12523" href="../BigStep/#plfa_plfa-part2-BigStep-12523" class="Bound">δ≈ₑτ</a> <a id="plfa_plfa-part2-BigStep-12528" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12530" href="../BigStep/#plfa_plfa-part2-BigStep-12530" class="Bound">≡ƛτN</a> <a id="plfa_plfa-part2-BigStep-12535" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12537" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12539" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12541" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12543" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-BigStep-12551" href="../BigStep/#plfa_plfa-part2-BigStep-12530" class="Bound">≡ƛτN</a>
      <a id="plfa_plfa-part2-BigStep-12562" class="Keyword">with</a> <a id="plfa_plfa-part2-BigStep-12567" href="../BigStep/#plfa_plfa-part2-BigStep-11839" class="Function">⇓→—↠×≈</a> <a id="plfa_plfa-part2-BigStep-12574" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12575" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-12577" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12579" href="../BigStep/#plfa_plfa-part2-BigStep-9079" class="Function">ext-subst</a> <a id="plfa_plfa-part2-BigStep-12589" href="../BigStep/#plfa_plfa-part2-BigStep-12517" class="Bound">τ</a> <a id="plfa_plfa-part2-BigStep-12591" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12592" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12598" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12600" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-12601" class="Symbol">)}</a> <a id="plfa_plfa-part2-BigStep-12604" class="Bound">N⇓V</a>
             <a id="plfa_plfa-part2-BigStep-12621" class="Symbol">(λ</a> <a id="plfa_plfa-part2-BigStep-12624" href="../BigStep/#plfa_plfa-part2-BigStep-12624" class="Bound">x</a> <a id="plfa_plfa-part2-BigStep-12626" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-12628" href="../BigStep/#plfa_plfa-part2-BigStep-10410" class="Function">≈ₑ-ext</a><a id="plfa_plfa-part2-BigStep-12634" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12635" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-12637" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12639" href="../BigStep/#plfa_plfa-part2-BigStep-12517" class="Bound">τ</a><a id="plfa_plfa-part2-BigStep-12640" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-12642" href="../BigStep/#plfa_plfa-part2-BigStep-12523" class="Bound">δ≈ₑτ</a> <a id="plfa_plfa-part2-BigStep-12647" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12649" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12651" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12653" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12655" class="Bound">γ≈ₑσ</a> <a id="plfa_plfa-part2-BigStep-12660" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12662" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-BigStep-12667" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12669" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12671" href="../BigStep/#plfa_plfa-part2-BigStep-12624" class="Bound">x</a><a id="plfa_plfa-part2-BigStep-12672" class="Symbol">)</a>
           <a id="plfa_plfa-part2-BigStep-12685" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12687" href="../Untyped/#plfa_plfa-part2-Untyped-13085" class="InductiveConstructor">β</a><a id="plfa_plfa-part2-BigStep-12688" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12689" href="../Untyped/#plfa_plfa-part2-Untyped-3852" class="InductiveConstructor">∅</a><a id="plfa_plfa-part2-BigStep-12690" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-12692" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12698" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12699" href="../Untyped/#plfa_plfa-part2-Untyped-8582" class="Function">exts</a> <a id="plfa_plfa-part2-BigStep-12704" href="../BigStep/#plfa_plfa-part2-BigStep-12517" class="Bound">τ</a><a id="plfa_plfa-part2-BigStep-12705" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12707" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12708" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-12710" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12716" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12718" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-12719" class="Symbol">}</a>
<a id="plfa_plfa-part2-BigStep-12721" class="Symbol">...</a>   <a id="plfa_plfa-part2-BigStep-12727" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12729" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12731" href="../BigStep/#plfa_plfa-part2-BigStep-12731" class="Bound">N&#39;</a> <a id="plfa_plfa-part2-BigStep-12734" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12736" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12738" href="../BigStep/#plfa_plfa-part2-BigStep-12738" class="Bound">—↠N&#39;</a> <a id="plfa_plfa-part2-BigStep-12743" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12745" href="../BigStep/#plfa_plfa-part2-BigStep-12745" class="Bound">V≈N&#39;</a> <a id="plfa_plfa-part2-BigStep-12750" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12752" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12754" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-12756" href="../BigStep/#plfa_plfa-part2-BigStep-12756" class="Bound">ƛτN·σM—→</a>
        <a id="plfa_plfa-part2-BigStep-12773" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-BigStep-12781" href="../BigStep/#plfa_plfa-part2-BigStep-11343" class="Function">sub-sub</a><a id="plfa_plfa-part2-BigStep-12788" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-12789" class="Argument">M</a> <a id="plfa_plfa-part2-BigStep-12791" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12793" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12794" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-12796" class="Argument">σ₁</a> <a id="plfa_plfa-part2-BigStep-12799" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12801" href="../Untyped/#plfa_plfa-part2-Untyped-8582" class="Function">exts</a> <a id="plfa_plfa-part2-BigStep-12806" class="Bound">τ</a><a id="plfa_plfa-part2-BigStep-12807" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-12809" class="Argument">σ₂</a> <a id="plfa_plfa-part2-BigStep-12812" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12814" href="../Untyped/#plfa_plfa-part2-Untyped-9439" class="Function">subst-zero</a> <a id="plfa_plfa-part2-BigStep-12825" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12826" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12832" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12834" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-12835" class="Symbol">)}</a> <a id="plfa_plfa-part2-BigStep-12838" class="Symbol">=</a>
        <a id="plfa_plfa-part2-BigStep-12848" class="Keyword">let</a> <a id="plfa_plfa-part2-BigStep-12852" href="../BigStep/#plfa_plfa-part2-BigStep-12852" class="Bound">rs</a> <a id="plfa_plfa-part2-BigStep-12855" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12857" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12858" href="../Untyped/#plfa_plfa-part2-Untyped-5486" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-12860" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12866" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12867" href="../Untyped/#plfa_plfa-part2-Untyped-8582" class="Function">exts</a> <a id="plfa_plfa-part2-BigStep-12872" class="Bound">τ</a><a id="plfa_plfa-part2-BigStep-12873" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12875" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-12876" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12878" href="../Untyped/#plfa_plfa-part2-Untyped-5546" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-BigStep-12880" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-12886" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-12888" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-12890" href="../Untyped/#plfa_plfa-part2-Untyped-14437" class="InductiveConstructor Operator">—→⟨</a> <a id="plfa_plfa-part2-BigStep-12894" href="../BigStep/#plfa_plfa-part2-BigStep-12756" class="Bound">ƛτN·σM—→</a> <a id="plfa_plfa-part2-BigStep-12903" href="../Untyped/#plfa_plfa-part2-Untyped-14437" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12905" href="../BigStep/#plfa_plfa-part2-BigStep-12738" class="Bound">—↠N&#39;</a> <a id="plfa_plfa-part2-BigStep-12910" class="Keyword">in</a>
        <a id="plfa_plfa-part2-BigStep-12921" class="Keyword">let</a> <a id="plfa_plfa-part2-BigStep-12925" href="../BigStep/#plfa_plfa-part2-BigStep-12925" class="Bound">g</a> <a id="plfa_plfa-part2-BigStep-12927" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-12929" href="../Untyped/#plfa_plfa-part2-Untyped-27458" class="Function">—↠-trans</a> <a id="plfa_plfa-part2-BigStep-12938" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-12939" href="../Untyped/#plfa_plfa-part2-Untyped-28991" class="Function">appL-cong</a> <a id="plfa_plfa-part2-BigStep-12949" class="Bound">σL—↠ƛτN</a><a id="plfa_plfa-part2-BigStep-12956" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-12958" href="../BigStep/#plfa_plfa-part2-BigStep-12852" class="Bound">rs</a> <a id="plfa_plfa-part2-BigStep-12961" class="Keyword">in</a>
        <a id="plfa_plfa-part2-BigStep-12972" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12974" href="../BigStep/#plfa_plfa-part2-BigStep-12731" class="Bound">N&#39;</a> <a id="plfa_plfa-part2-BigStep-12977" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12979" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-12981" href="../BigStep/#plfa_plfa-part2-BigStep-12925" class="Bound">g</a> <a id="plfa_plfa-part2-BigStep-12983" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-12985" href="../BigStep/#plfa_plfa-part2-BigStep-12745" class="Bound">V≈N&#39;</a> <a id="plfa_plfa-part2-BigStep-12990" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-12992" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a>
</pre><p>该证明对 <code>γ ⊢ M ⇓ V</code> 进行归纳。我们有三种情况需要考虑。</p><ul><li>情况 <code>⇓-var</code>： 此时我们有 <code>γ x ≡ clos L δ</code> 和 <code>δ ⊢ L ⇓ V</code>。 我们需要证明对于某个 <code>N</code> 有<code>subst σ x —↠ N</code> 和 <code>V ≈ N</code>。 前提 <code>γ ≈ₑ σ</code> 告诉我们 <code>γ x ≈ σ x</code>，所以有 <code>clos L δ ≈ σ x</code>。 根据 <code>≈</code> 的定义， 存在一个 <code>τ</code> 使得 <code>δ ≈ₑ τ</code> 且 <code>σ x ≡ subst τ L</code>。 使用 <code>δ ⊢ L ⇓ V</code> 和 <code>δ ≈ₑ τ</code>， 归纳假设使得对于某个 <code>N</code> 有 <code>subst τ L —↠ N</code> 和 <code>V ≈ N</code>。 所以我们证明了对于某个 <code>N</code>，有 <code>subst σ x —↠ N</code> 和 <code>V ≈ N</code>。</li></ul><ul><li>情况 <code>⇓-lam</code>： 我们立刻获得 <code>subst σ (ƛ N) —↠ subst σ (ƛ N)</code> 和 <code>clos (subst σ (ƛ N)) γ ≈ subst σ (ƛ N)</code>。</li></ul><ul><li><p>情况 <code>⇓-app</code>： 使用 <code>γ ⊢ L ⇓ clos N δ</code> 和 <code>γ ≈ₑ σ</code>， 归纳假设给我们</p><pre><code>  subst σ L —↠ ƛ subst (exts τ) N                                     (1)</code></pre><p>并且对于某个 <code>τ</code> 有 <code>δ ≈ₑ τ</code>。 根据 <code>γ≈ₑσ</code> 我们有 <code>clos M γ ≈ subst σ M</code>。 与 <code>(δ ,&#39; clos M γ) ⊢ N ⇓ V</code> 一同， 归纳假设给我们 <code>V ≈ N&#39;</code> 和</p><pre><code>  subst (subst (subst-zero (subst σ M)) ∘ (exts τ)) N —↠ N&#39;         (2)</code></pre><p>同时根据 <code>β</code>，我们有</p><pre><code>  (ƛ subst (exts τ) N) · subst σ M
  —→ subst (subst-zero (subst σ M)) (subst (exts τ) N)</code></pre><p>通过 <code>sub-sub</code>，这等价于</p><pre><code>  (ƛ subst (exts τ) N) · subst σ M
  —→ subst (subst (subst-zero (subst σ M)) ∘ exts τ) N              (3)</code></pre><p>使用 (3) 和 (2) 我们有</p><pre><code>  (ƛ subst (exts τ) N) · subst σ M —↠ N&#39;                             (4)</code></pre><p>根据 (1) 我们有</p><pre><code>  subst σ L · subst σ M —↠ (ƛ subst (exts τ) N) · subst σ M</code></pre><p>与 (4) 相结合，我们得出结论</p><pre><code>  subst σ L · subst σ M —↠ N&#39;</code></pre></li></ul><p>证明了主要引理后，我们便建立起大步语义与 β-归约等价关系的必要性。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-cbn→reduce"></a><a id="plfa_plfa-part2-BigStep-16222" href="../BigStep/#plfa_plfa-part2-BigStep-16222" class="Function">cbn→reduce</a> <a id="plfa_plfa-part2-BigStep-16233" class="Symbol">:</a>  <a id="plfa_plfa-part2-BigStep-16236" class="Symbol">∀{</a><a id="plfa_plfa-part2-BigStep-16238" href="../BigStep/#plfa_plfa-part2-BigStep-16238" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-16240" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-16242" href="../Untyped/#plfa_plfa-part2-Untyped-3852" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-BigStep-16244" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-16246" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-16247" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-16249" href="../BigStep/#plfa_plfa-part2-BigStep-16249" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-16250" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-16252" href="../BigStep/#plfa_plfa-part2-BigStep-16252" class="Bound">δ</a> <a id="plfa_plfa-part2-BigStep-16254" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-16256" href="../BigStep/#plfa_plfa-part2-BigStep-3070" class="Function">ClosEnv</a> <a id="plfa_plfa-part2-BigStep-16264" href="../BigStep/#plfa_plfa-part2-BigStep-16249" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-16265" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-16267" href="../BigStep/#plfa_plfa-part2-BigStep-16267" class="Bound">N′</a> <a id="plfa_plfa-part2-BigStep-16270" class="Symbol">:</a> <a id="plfa_plfa-part2-BigStep-16272" href="../BigStep/#plfa_plfa-part2-BigStep-16249" class="Bound">Δ</a> <a id="plfa_plfa-part2-BigStep-16274" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-16276" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-BigStep-16278" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-16280" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-BigStep-16281" class="Symbol">}</a>
  <a id="plfa_plfa-part2-BigStep-16285" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-16287" href="../BigStep/#plfa_plfa-part2-BigStep-3318" class="Function">∅&#39;</a> <a id="plfa_plfa-part2-BigStep-16290" href="../BigStep/#plfa_plfa-part2-BigStep-3809" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-16292" href="../BigStep/#plfa_plfa-part2-BigStep-16238" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-16294" href="../BigStep/#plfa_plfa-part2-BigStep-3809" class="Datatype Operator">⇓</a> <a id="plfa_plfa-part2-BigStep-16296" href="../BigStep/#plfa_plfa-part2-BigStep-3119" class="InductiveConstructor">clos</a> <a id="plfa_plfa-part2-BigStep-16301" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-16302" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-16304" href="../BigStep/#plfa_plfa-part2-BigStep-16267" class="Bound">N′</a><a id="plfa_plfa-part2-BigStep-16306" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-16308" href="../BigStep/#plfa_plfa-part2-BigStep-16252" class="Bound">δ</a>
    <a id="plfa_plfa-part2-BigStep-16314" class="Comment">-----------------------------</a>
  <a id="plfa_plfa-part2-BigStep-16346" class="Symbol">→</a> <a id="plfa_plfa-part2-BigStep-16348" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part2-BigStep-16351" href="../BigStep/#plfa_plfa-part2-BigStep-16351" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-16353" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part2-BigStep-16355" href="../Untyped/#plfa_plfa-part2-Untyped-3852" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-BigStep-16357" href="../Untyped/#plfa_plfa-part2-Untyped-3868" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-16359" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-BigStep-16361" href="../Untyped/#plfa_plfa-part2-Untyped-5398" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-BigStep-16363" href="../Untyped/#plfa_plfa-part2-Untyped-3438" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-BigStep-16365" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part2-BigStep-16367" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-16368" href="../BigStep/#plfa_plfa-part2-BigStep-16238" class="Bound">M</a> <a id="plfa_plfa-part2-BigStep-16370" href="../Untyped/#plfa_plfa-part2-Untyped-14249" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part2-BigStep-16373" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-BigStep-16375" href="../BigStep/#plfa_plfa-part2-BigStep-16351" class="Bound">N</a><a id="plfa_plfa-part2-BigStep-16376" class="Symbol">)</a>
<a id="plfa_plfa-part2-BigStep-16378" href="../BigStep/#plfa_plfa-part2-BigStep-16222" class="Function">cbn→reduce</a> <a id="plfa_plfa-part2-BigStep-16389" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-16390" href="../BigStep/#plfa_plfa-part2-BigStep-16390" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-16391" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-16393" href="../BigStep/#plfa_plfa-part2-BigStep-16393" class="Bound">Δ</a><a id="plfa_plfa-part2-BigStep-16394" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-16396" href="../BigStep/#plfa_plfa-part2-BigStep-16396" class="Bound">δ</a><a id="plfa_plfa-part2-BigStep-16397" class="Symbol">}{</a><a id="plfa_plfa-part2-BigStep-16399" href="../BigStep/#plfa_plfa-part2-BigStep-16399" class="Bound">N′</a><a id="plfa_plfa-part2-BigStep-16401" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-16403" href="../BigStep/#plfa_plfa-part2-BigStep-16403" class="Bound">M⇓c</a>
    <a id="plfa_plfa-part2-BigStep-16411" class="Keyword">with</a> <a id="plfa_plfa-part2-BigStep-16416" href="../BigStep/#plfa_plfa-part2-BigStep-11839" class="Function">⇓→—↠×≈</a><a id="plfa_plfa-part2-BigStep-16422" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-16423" class="Argument">σ</a> <a id="plfa_plfa-part2-BigStep-16425" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-16427" href="../Substitution/#plfa_plfa-part2-Substitution-3762" class="Function">ids</a><a id="plfa_plfa-part2-BigStep-16430" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-16432" href="../BigStep/#plfa_plfa-part2-BigStep-16403" class="Bound">M⇓c</a> <a id="plfa_plfa-part2-BigStep-16436" href="../BigStep/#plfa_plfa-part2-BigStep-8738" class="Function">≈ₑ-id</a>
<a id="plfa_plfa-part2-BigStep-16442" class="Symbol">...</a> <a id="plfa_plfa-part2-BigStep-16446" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-16448" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-16450" href="../BigStep/#plfa_plfa-part2-BigStep-16450" class="Bound">N</a> <a id="plfa_plfa-part2-BigStep-16452" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-16454" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-16456" href="../BigStep/#plfa_plfa-part2-BigStep-16456" class="Bound">rs</a> <a id="plfa_plfa-part2-BigStep-16459" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-16461" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-16463" href="../BigStep/#plfa_plfa-part2-BigStep-16463" class="Bound">σ</a> <a id="plfa_plfa-part2-BigStep-16465" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-16467" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-16469" href="../BigStep/#plfa_plfa-part2-BigStep-16469" class="Bound">h</a> <a id="plfa_plfa-part2-BigStep-16471" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-16473" href="../BigStep/#plfa_plfa-part2-BigStep-16473" class="Bound">eq2</a> <a id="plfa_plfa-part2-BigStep-16477" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-16479" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-16481" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-16483" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-BigStep-16485" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-BigStep-16493" href="../BigStep/#plfa_plfa-part2-BigStep-8888" class="Function">sub-id</a><a id="plfa_plfa-part2-BigStep-16499" class="Symbol">{</a><a id="plfa_plfa-part2-BigStep-16500" class="Argument">M</a> <a id="plfa_plfa-part2-BigStep-16502" class="Symbol">=</a> <a id="plfa_plfa-part2-BigStep-16504" class="Bound">M</a><a id="plfa_plfa-part2-BigStep-16505" class="Symbol">}</a> <a id="plfa_plfa-part2-BigStep-16507" class="Symbol">|</a> <a id="plfa_plfa-part2-BigStep-16509" href="../BigStep/#plfa_plfa-part2-BigStep-16473" class="Bound">eq2</a> <a id="plfa_plfa-part2-BigStep-16513" class="Symbol">=</a>
      <a id="plfa_plfa-part2-BigStep-16521" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-BigStep-16523" href="../Untyped/#plfa_plfa-part2-Untyped-8943" class="Function">subst</a> <a id="plfa_plfa-part2-BigStep-16529" class="Symbol">(</a><a id="plfa_plfa-part2-BigStep-16530" href="../Untyped/#plfa_plfa-part2-Untyped-8582" class="Function">exts</a> <a id="plfa_plfa-part2-BigStep-16535" href="../BigStep/#plfa_plfa-part2-BigStep-16463" class="Bound">σ</a><a id="plfa_plfa-part2-BigStep-16536" class="Symbol">)</a> <a id="plfa_plfa-part2-BigStep-16538" class="Bound">N′</a> <a id="plfa_plfa-part2-BigStep-16541" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-BigStep-16543" href="../BigStep/#plfa_plfa-part2-BigStep-16456" class="Bound">rs</a> <a id="plfa_plfa-part2-BigStep-16546" href="../BigStep/#plfa_plfa-part2-BigStep-1927" class="InductiveConstructor Operator">⟩</a>
</pre><h4 id="练习-big-alt-implies-multi实践">练习 <code>big-alt-implies-multi</code>（实践）</h4><p>为使用替换而不是环境的传名调用表达另一种大步语义，形式为 <code>M ↓ N</code>。 即应用规则 <code>⇓-app</code> 应像在 <code>N [ M ]</code> 中一样执行替换而不是用 <code>M</code> 扩展环境。 证明 <code>M ↓ N</code> 蕴含 <code>M —↠ N</code>。</p><pre class="Agda"><a id="plfa_plfa-part2-BigStep-17098" class="Comment">-- 请将代码写在此处</a>
</pre><h2 id="β-归约至-λ-抽象蕴含大步求值">β-归约至 λ-抽象蕴含大步求值</h2><p>充分性的证明，也就是 β-归约至 λ-抽象蕴含大步语义求值是更困难的。 困难源于通过 <code>ζ</code> 规则在 λ-抽象下的归约过程。 传名调用语义在 λ-演算中并不会归约，因此直接通过归纳归约序列来证明是不可能的。 在文章 <strong>Call-by-name, call-by-value, and the λ-calculus</strong> 中， Plotkin使用两个辅助归约关系分两步完成了证明。 第一步使用了 Curry-Feys 标准化这一经典方法， 它依赖于 <strong>标准归约序列（Standard Reduction Sequence）</strong> 的概念， 通过在 λ-演算下将传名调用扩展以包括归约， 标准归约序列充当了完整 β-归约与传名调用求值的中间点。 Plotkin证明了 <code>M</code> 能被归约为 <code>L</code> 当且仅当 <code>M</code> 与 <code>L</code> 通过一个标准归约序列相关。</p><pre><code>定理 1（标准化）
`M —↠ L` 当且仅当 `M` 能通过一个标准归约序列归约成 `L`。</code></pre><p>Plotkin 接着引入了<strong>左归约（Left Reduction）</strong> 作为传名调用的小步描述， 并且用上方的定理证明了 β-归约与左归约在下述情况下等价。</p><pre><code>推论 1
`M —↠ ƛ N` 当且仅当对于某个 `N′`，`M`能通过左归约成 `ƛ N′`。</code></pre><p>证明的下一步将左归约与传名调用求值联系起来。</p><pre><code>定理 2
`M` 左归约成 `ƛ N` 当且仅当 `⊢ M ⇓ ƛ N`。</code></pre><p>（Plotkin 的传名调用求值使用替换而不是环境， 这解释了为何在上文定理的描述中环境被隐去了。）</p><p>将推论 1 和定理 2 相结合，Plotkin 证明了传名调用求值与 β-归约等价。</p><pre><code>推论 2
`M —↠ ƛ N` 当且仅当对某个 `N′`，`⊢ M ⇓ ƛ N′`。</code></pre><p>Plotkin 还证明了 λᵥ-演算中的类似结果，将其与传值调用求值相联系。 为了更好阐述该证明，我们推荐阅读由 Felleisen、Findler 和 Flatt 所著的 <em>Semantics Engineering with PLT Redex</em> 的第五章。</p><p>我们不通过上文描述的标准化方式来完成充分性的证明， 而是将其推迟到发展出 λ-演算的指称语义后， 此时该证明是指称语义中 soundness 和 adequacy 的推论。</p><h2 id="unicode">Unicode</h2><p>本章中使用了以下 Unicode：</p><pre><code>≈  U+2248  ALMOST EQUAL TO (\~~ or \approx)
ₑ  U+2091  LATIN SUBSCRIPT SMALL LETTER E (\_e)
⊢  U+22A2  RIGHT TACK (\|- or \vdash)
⇓  U+21DB  DOWNWARDS DOUBLE ARROW (\d= or \Downarrow)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Confluence/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part2/BigStep.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Denotational/">下一章</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">编程语言基础：Agda 描述</h2>本章译者：starxingchenc<div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>本书按照<a rel="license" href="https://creativecommons.org/licenses/by/4.0/">创作公用 署名 4.0 国际</a>许可协议授权</div></footer></body></html>