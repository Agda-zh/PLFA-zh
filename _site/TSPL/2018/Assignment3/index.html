<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Assignment3: TSPL Assignment 3 | 编程语言基础：Agda 语言描述
</title><!-- Begin Jekyll SEO tag v2.5.0 -->
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Assignment3: TSPL Assignment 3" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="编程语言基础：Agda 语言描述" />
<meta property="og:description" content="编程语言基础：Agda 语言描述" />
<link rel="canonical" href="https://agda-zh.github.io/PLFA-zh/TSPL/2018/Assignment3/" />
<meta property="og:url" content="https://agda-zh.github.io/PLFA-zh/TSPL/2018/Assignment3/" />
<meta property="og:site_name" content="编程语言基础：Agda 语言描述" />
<script type="application/ld+json">
{"description":"编程语言基础：Agda 语言描述","@type":"WebPage","url":"https://agda-zh.github.io/PLFA-zh/TSPL/2018/Assignment3/","headline":"Assignment3: TSPL Assignment 3","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/PLFA-zh/assets/main.css"></head>
<body><header class="site-header" role="banner">

    <div class="wrapper">

        <a class="site-title" href="/PLFA-zh/">编程语言基础：Agda 语言描述
</a>

        <nav class="site-nav">
            <span class="menu-icon">
                <svg viewBox="0 0 18 15" width="18px" height="15px">
                    <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                    <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                    <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
                </svg>
            </span>

            <div class="trigger">
                <a class="page-link" href="/PLFA-zh/">主页</a>
                <a class="page-link" href="/PLFA-zh/Announcements/">公告</a>
                <a class="page-link" href="/PLFA-zh/GettingStarted/">使用说明</a>
                <a class="page-link" href="/PLFA-zh/Citing/">引用</a>
                <a class="page-link" href="https://plfa.github.io/">English</a>
            </div>
        </nav>

    </div>

</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
      <h1 class="post-title">Assignment3: TSPL Assignment 3</h1>
  </header>

  <p style="text-align:center;">
    
    
    
    <a alt="Source code" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/courses/tspl/2018/Assignment3.lagda.md">源代码</a>
    
    
    
</p>


  <div class="post-content">
    <pre class="Agda"><a id="112" class="Keyword">module</a> <a id="119" href="/PLFA-zh/TSPL/2018/Assignment3/" class="Module">Assignment3</a> <a id="131" class="Keyword">where</a>
</pre>
<h2 id="your-name-and-email-goes-here">YOUR NAME AND EMAIL GOES HERE</h2>

<h2 id="introduction">Introduction</h2>

<!-- This assignment is due **4pm Thursday 1 November** (Week 7). -->

<p>You must do <em>all</em> the exercises labelled “(recommended)”.</p>

<p>Exercises labelled “(stretch)” are there to provide an extra challenge.
You don’t need to do all of these, but should attempt at least a few.</p>

<p>Exercises without a label are optional, and may be done if you want
some extra practice.</p>

<!-- Submit your homework using the "submit" command. -->
<p>Please ensure your files execute correctly under Agda!</p>

<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="686" class="Keyword">import</a> <a id="693" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="731" class="Symbol">as</a> <a id="734" class="Module">Eq</a>
<a id="737" class="Keyword">open</a> <a id="742" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="745" class="Keyword">using</a> <a id="751" class="Symbol">(</a><a id="752" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">_≡_</a><a id="755" class="Symbol">;</a> <a id="757" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="761" class="Symbol">;</a> <a id="763" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a><a id="767" class="Symbol">;</a> <a id="769" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a><a id="772" class="Symbol">)</a>
<a id="774" class="Keyword">open</a> <a id="779" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2499" class="Module">Eq.≡-Reasoning</a> <a id="794" class="Keyword">using</a> <a id="800" class="Symbol">(</a><a id="801" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin_</a><a id="807" class="Symbol">;</a> <a id="809" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">_≡⟨⟩_</a><a id="814" class="Symbol">;</a> <a id="816" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">_≡⟨_⟩_</a><a id="822" class="Symbol">;</a> <a id="824" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">_∎</a><a id="826" class="Symbol">)</a>
<a id="828" class="Keyword">open</a> <a id="833" class="Keyword">import</a> <a id="840" href="https://agda.github.io/agda-stdlib/v1.1/Data.Bool.Base.html" class="Module">Data.Bool.Base</a> <a id="855" class="Keyword">using</a> <a id="861" class="Symbol">(</a><a id="862" href="Agda.Builtin.Bool.html#135" class="Datatype">Bool</a><a id="866" class="Symbol">;</a> <a id="868" href="Agda.Builtin.Bool.html#160" class="InductiveConstructor">true</a><a id="872" class="Symbol">;</a> <a id="874" href="Agda.Builtin.Bool.html#154" class="InductiveConstructor">false</a><a id="879" class="Symbol">;</a> <a id="881" href="https://agda.github.io/agda-stdlib/v1.1/Data.Bool.Base.html#1480" class="Function">T</a><a id="882" class="Symbol">;</a> <a id="884" href="https://agda.github.io/agda-stdlib/v1.1/Data.Bool.Base.html#1015" class="Function Operator">_∧_</a><a id="887" class="Symbol">;</a> <a id="889" href="https://agda.github.io/agda-stdlib/v1.1/Data.Bool.Base.html#1073" class="Function Operator">_∨_</a><a id="892" class="Symbol">;</a> <a id="894" href="https://agda.github.io/agda-stdlib/v1.1/Data.Bool.Base.html#961" class="Function">not</a><a id="897" class="Symbol">)</a>
<a id="899" class="Keyword">open</a> <a id="904" class="Keyword">import</a> <a id="911" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.html" class="Module">Data.Nat</a> <a id="920" class="Keyword">using</a> <a id="926" class="Symbol">(</a><a id="927" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a><a id="928" class="Symbol">;</a> <a id="930" href="Agda.Builtin.Nat.html#183" class="InductiveConstructor">zero</a><a id="934" class="Symbol">;</a> <a id="936" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a><a id="939" class="Symbol">;</a> <a id="941" href="Agda.Builtin.Nat.html#298" class="Primitive Operator">_+_</a><a id="944" class="Symbol">;</a> <a id="946" href="Agda.Builtin.Nat.html#501" class="Primitive Operator">_*_</a><a id="949" class="Symbol">;</a> <a id="951" href="Agda.Builtin.Nat.html#388" class="Primitive Operator">_∸_</a><a id="954" class="Symbol">;</a> <a id="956" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Base.html#895" class="Datatype Operator">_≤_</a><a id="959" class="Symbol">;</a> <a id="961" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Base.html#960" class="InductiveConstructor">s≤s</a><a id="964" class="Symbol">;</a> <a id="966" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Base.html#918" class="InductiveConstructor">z≤n</a><a id="969" class="Symbol">)</a>
<a id="971" class="Keyword">open</a> <a id="976" class="Keyword">import</a> <a id="983" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="1003" class="Keyword">using</a>
  <a id="1011" class="Symbol">(</a><a id="1012" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#11578" class="Function">+-assoc</a><a id="1019" class="Symbol">;</a> <a id="1021" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#11679" class="Function">+-identityˡ</a><a id="1032" class="Symbol">;</a> <a id="1034" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#11734" class="Function">+-identityʳ</a><a id="1045" class="Symbol">;</a> <a id="1047" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#18464" class="Function">*-assoc</a><a id="1054" class="Symbol">;</a> <a id="1056" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#17362" class="Function">*-identityˡ</a><a id="1067" class="Symbol">;</a> <a id="1069" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#17426" class="Function">*-identityʳ</a><a id="1080" class="Symbol">)</a>
<a id="1082" class="Keyword">open</a> <a id="1087" class="Keyword">import</a> <a id="1094" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="1111" class="Keyword">using</a> <a id="1117" class="Symbol">(</a><a id="1118" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">¬_</a><a id="1120" class="Symbol">;</a> <a id="1122" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#605" class="Datatype">Dec</a><a id="1125" class="Symbol">;</a> <a id="1127" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#641" class="InductiveConstructor">yes</a><a id="1130" class="Symbol">;</a> <a id="1132" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#668" class="InductiveConstructor">no</a><a id="1134" class="Symbol">)</a>
<a id="1136" class="Keyword">open</a> <a id="1141" class="Keyword">import</a> <a id="1148" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html" class="Module">Data.Product</a> <a id="1161" class="Keyword">using</a> <a id="1167" class="Symbol">(</a><a id="1168" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1162" class="Function Operator">_×_</a><a id="1171" class="Symbol">;</a> <a id="1173" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1364" class="Function">∃</a><a id="1174" class="Symbol">;</a> <a id="1176" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1783" class="Function">∃-syntax</a><a id="1184" class="Symbol">)</a> <a id="1186" class="Keyword">renaming</a> <a id="1195" class="Symbol">(</a><a id="1196" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">_,_</a> <a id="1200" class="Symbol">to</a> <a id="1203" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="1208" class="Symbol">)</a>
<a id="1210" class="Keyword">open</a> <a id="1215" class="Keyword">import</a> <a id="1222" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html" class="Module">Data.Empty</a> <a id="1233" class="Keyword">using</a> <a id="1239" class="Symbol">(</a><a id="1240" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#279" class="Datatype">⊥</a><a id="1241" class="Symbol">;</a> <a id="1243" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#294" class="Function">⊥-elim</a><a id="1249" class="Symbol">)</a>
<a id="1251" class="Keyword">open</a> <a id="1256" class="Keyword">import</a> <a id="1263" href="https://agda.github.io/agda-stdlib/v1.1/Function.html" class="Module">Function</a> <a id="1272" class="Keyword">using</a> <a id="1278" class="Symbol">(</a><a id="1279" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">_∘_</a><a id="1282" class="Symbol">)</a>
<a id="1284" class="Keyword">open</a> <a id="1289" class="Keyword">import</a> <a id="1296" href="https://agda.github.io/agda-stdlib/v1.1/Algebra.Structures.html" class="Module">Algebra.Structures</a> <a id="1315" class="Keyword">using</a> <a id="1321" class="Symbol">(</a><a id="1322" href="https://agda.github.io/agda-stdlib/v1.1/Algebra.Structures.html#2215" class="Record">IsMonoid</a><a id="1330" class="Symbol">)</a>
<a id="1332" class="Keyword">open</a> <a id="1337" class="Keyword">import</a> <a id="1344" href="https://agda.github.io/agda-stdlib/v1.1/Level.html" class="Module">Level</a> <a id="1350" class="Keyword">using</a> <a id="1356" class="Symbol">(</a><a id="1357" href="Agda.Primitive.html#408" class="Postulate">Level</a><a id="1362" class="Symbol">)</a>
<a id="1364" class="Keyword">open</a> <a id="1369" class="Keyword">import</a> <a id="1376" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Unary.html" class="Module">Relation.Unary</a> <a id="1391" class="Keyword">using</a> <a id="1397" class="Symbol">(</a><a id="1398" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Unary.html#3474" class="Function">Decidable</a><a id="1407" class="Symbol">)</a>
<a id="1409" class="Keyword">open</a> <a id="1414" class="Keyword">import</a> <a id="1421" href="/PLFA-zh/Relations/" class="Module">plfa.Relations</a> <a id="1436" class="Keyword">using</a> <a id="1442" class="Symbol">(</a><a id="1443" href="plfa.Relations.html#26522" class="Datatype Operator">_&lt;_</a><a id="1446" class="Symbol">;</a> <a id="1448" href="plfa.Relations.html#26549" class="InductiveConstructor">z&lt;s</a><a id="1451" class="Symbol">;</a> <a id="1453" href="plfa.Relations.html#26606" class="InductiveConstructor">s&lt;s</a><a id="1456" class="Symbol">)</a>
<a id="1458" class="Keyword">open</a> <a id="1463" class="Keyword">import</a> <a id="1470" href="/PLFA-zh/Isomorphism/" class="Module">plfa.Isomorphism</a> <a id="1487" class="Keyword">using</a> <a id="1493" class="Symbol">(</a><a id="1494" href="plfa.Isomorphism.html#5843" class="Record Operator">_≃_</a><a id="1497" class="Symbol">;</a> <a id="1499" href="plfa.Isomorphism.html#9378" class="Function">≃-sym</a><a id="1504" class="Symbol">;</a> <a id="1506" href="plfa.Isomorphism.html#9775" class="Function">≃-trans</a><a id="1513" class="Symbol">;</a> <a id="1515" href="plfa.Isomorphism.html#11919" class="Record Operator">_≲_</a><a id="1518" class="Symbol">;</a> <a id="1520" href="plfa.Isomorphism.html#3758" class="Postulate">extensionality</a><a id="1534" class="Symbol">)</a>
<a id="1536" class="Keyword">open</a> <a id="1541" href="/PLFA-zh/Isomorphism/#10987" class="Module">plfa.Isomorphism.≃-Reasoning</a>
<a id="1570" class="Keyword">open</a> <a id="1575" class="Keyword">import</a> <a id="1582" href="/PLFA-zh/Lists/" class="Module">plfa.Lists</a> <a id="1593" class="Keyword">using</a> <a id="1599" class="Symbol">(</a><a id="1600" href="plfa.Lists.html#1284" class="Datatype">List</a><a id="1604" class="Symbol">;</a> <a id="1606" href="plfa.Lists.html#1313" class="InductiveConstructor">[]</a><a id="1608" class="Symbol">;</a> <a id="1610" href="plfa.Lists.html#1328" class="InductiveConstructor Operator">_∷_</a><a id="1613" class="Symbol">;</a> <a id="1615" href="plfa.Lists.html#3818" class="Operator">[_]</a><a id="1618" class="Symbol">;</a> <a id="1620" href="plfa.Lists.html#3841" class="Operator">[_,_]</a><a id="1625" class="Symbol">;</a> <a id="1627" href="plfa.Lists.html#3872" class="Operator">[_,_,_]</a><a id="1634" class="Symbol">;</a> <a id="1636" href="plfa.Lists.html#3911" class="Operator">[_,_,_,_]</a><a id="1645" class="Symbol">;</a>
  <a id="1649" href="/PLFA-zh/Lists/#4651" class="Function Operator">_++_</a><a id="1653" class="Symbol">;</a> <a id="1655" href="plfa.Lists.html#10957" class="Function">reverse</a><a id="1662" class="Symbol">;</a> <a id="1664" href="plfa.Lists.html#16959" class="Function">map</a><a id="1667" class="Symbol">;</a> <a id="1669" href="plfa.Lists.html#20225" class="Function">foldr</a><a id="1674" class="Symbol">;</a> <a id="1676" href="plfa.Lists.html#21337" class="Function">sum</a><a id="1679" class="Symbol">;</a> <a id="1681" href="plfa.Lists.html#27650" class="Datatype">All</a><a id="1684" class="Symbol">;</a> <a id="1686" href="plfa.Lists.html#29796" class="Datatype">Any</a><a id="1689" class="Symbol">;</a> <a id="1691" href="plfa.Lists.html#29847" class="InductiveConstructor">here</a><a id="1695" class="Symbol">;</a> <a id="1697" href="plfa.Lists.html#29904" class="InductiveConstructor">there</a><a id="1702" class="Symbol">;</a> <a id="1704" href="plfa.Lists.html#30311" class="Function Operator">_∈_</a><a id="1707" class="Symbol">)</a>
<a id="1709" class="Keyword">open</a> <a id="1714" class="Keyword">import</a> <a id="1721" href="/PLFA-zh/Lambda/" class="Module">plfa.Lambda</a> <a id="1733" class="Keyword">hiding</a> <a id="1740" class="Symbol">(</a><a id="1741" href="plfa.Lambda.html#7314" class="Function Operator">ƛ′_⇒_</a><a id="1746" class="Symbol">;</a> <a id="1748" href="plfa.Lambda.html#7435" class="Function Operator">case′_[zero⇒_|suc_⇒_]</a><a id="1769" class="Symbol">;</a> <a id="1771" href="plfa.Lambda.html#7649" class="Function Operator">μ′_⇒_</a><a id="1776" class="Symbol">;</a> <a id="1778" href="plfa.Lambda.html#7833" class="Function">plus′</a><a id="1783" class="Symbol">)</a>
<a id="1785" class="Keyword">open</a> <a id="1790" class="Keyword">import</a> <a id="1797" href="/PLFA-zh/Properties/" class="Module">plfa.Properties</a> <a id="1813" class="Keyword">hiding</a> <a id="1820" class="Symbol">(</a><a id="1821" href="plfa.Properties.html#11716" class="Postulate">value?</a><a id="1827" class="Symbol">;</a> <a id="1829" href="plfa.Properties.html#41540" class="Postulate">unstuck</a><a id="1836" class="Symbol">;</a> <a id="1838" href="plfa.Properties.html#41740" class="Postulate">preserves</a><a id="1847" class="Symbol">;</a> <a id="1849" href="plfa.Properties.html#41977" class="Postulate">wttdgs</a><a id="1855" class="Symbol">)</a>
</pre>
<h4 id="exercise-reverse--commute-recommended">Exercise <code class="highlighter-rouge">reverse-++-commute</code> (recommended)</h4>

<p>Show that the reverse of one list appended to another is the
reverse of the second appended to the reverse of the first.</p>
<pre class="Agda"><a id="2037" class="Keyword">postulate</a>
  <a id="reverse-++-commute"></a><a id="2049" href="/PLFA-zh/TSPL/2018/Assignment3/#2049" class="Postulate">reverse-++-commute</a> <a id="2068" class="Symbol">:</a> <a id="2070" class="Symbol">∀</a> <a id="2072" class="Symbol">{</a><a id="2073" href="Assignment3.html#2073" class="Bound">A</a> <a id="2075" class="Symbol">:</a> <a id="2077" class="PrimitiveType">Set</a><a id="2080" class="Symbol">}</a> <a id="2082" class="Symbol">{</a><a id="2083" href="Assignment3.html#2083" class="Bound">xs</a> <a id="2086" href="Assignment3.html#2086" class="Bound">ys</a> <a id="2089" class="Symbol">:</a> <a id="2091" href="/PLFA-zh/Lists/#1284" class="Datatype">List</a> <a id="2096" href="Assignment3.html#2073" class="Bound">A</a><a id="2097" class="Symbol">}</a>
    <a id="2103" class="Symbol">→</a> <a id="2105" href="/PLFA-zh/Lists/#10957" class="Function">reverse</a> <a id="2113" class="Symbol">(</a><a id="2114" href="/PLFA-zh/TSPL/2018/Assignment3/#2083" class="Bound">xs</a> <a id="2117" href="plfa.Lists.html#4651" class="Function Operator">++</a> <a id="2120" href="Assignment3.html#2086" class="Bound">ys</a><a id="2122" class="Symbol">)</a> <a id="2124" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="2126" href="plfa.Lists.html#10957" class="Function">reverse</a> <a id="2134" href="Assignment3.html#2086" class="Bound">ys</a> <a id="2137" href="plfa.Lists.html#4651" class="Function Operator">++</a> <a id="2140" href="plfa.Lists.html#10957" class="Function">reverse</a> <a id="2148" href="Assignment3.html#2083" class="Bound">xs</a>
</pre>
<h4 id="exercise-reverse-involutive-recommended">Exercise <code class="highlighter-rouge">reverse-involutive</code> (recommended)</h4>

<p>A function is an <em>involution</em> if when applied twice it acts
as the identity function.  Show that reverse is an involution.</p>
<pre class="Agda"><a id="2333" class="Keyword">postulate</a>
  <a id="reverse-involutive"></a><a id="2345" href="/PLFA-zh/TSPL/2018/Assignment3/#2345" class="Postulate">reverse-involutive</a> <a id="2364" class="Symbol">:</a> <a id="2366" class="Symbol">∀</a> <a id="2368" class="Symbol">{</a><a id="2369" href="Assignment3.html#2369" class="Bound">A</a> <a id="2371" class="Symbol">:</a> <a id="2373" class="PrimitiveType">Set</a><a id="2376" class="Symbol">}</a> <a id="2378" class="Symbol">{</a><a id="2379" href="Assignment3.html#2379" class="Bound">xs</a> <a id="2382" class="Symbol">:</a> <a id="2384" href="/PLFA-zh/Lists/#1284" class="Datatype">List</a> <a id="2389" href="Assignment3.html#2369" class="Bound">A</a><a id="2390" class="Symbol">}</a>
    <a id="2396" class="Symbol">→</a> <a id="2398" href="/PLFA-zh/Lists/#10957" class="Function">reverse</a> <a id="2406" class="Symbol">(</a><a id="2407" href="plfa.Lists.html#10957" class="Function">reverse</a> <a id="2415" href="/PLFA-zh/TSPL/2018/Assignment3/#2379" class="Bound">xs</a><a id="2417" class="Symbol">)</a> <a id="2419" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="2421" href="Assignment3.html#2379" class="Bound">xs</a>
</pre>
<h4 id="exercise-map-compose">Exercise <code class="highlighter-rouge">map-compose</code></h4>

<p>Prove that the map of a composition is equal to the composition of two maps.</p>
<pre class="Agda"><a id="2539" class="Keyword">postulate</a>
  <a id="map-compose"></a><a id="2551" href="/PLFA-zh/TSPL/2018/Assignment3/#2551" class="Postulate">map-compose</a> <a id="2563" class="Symbol">:</a> <a id="2565" class="Symbol">∀</a> <a id="2567" class="Symbol">{</a><a id="2568" href="Assignment3.html#2568" class="Bound">A</a> <a id="2570" href="Assignment3.html#2570" class="Bound">B</a> <a id="2572" href="Assignment3.html#2572" class="Bound">C</a> <a id="2574" class="Symbol">:</a> <a id="2576" class="PrimitiveType">Set</a><a id="2579" class="Symbol">}</a> <a id="2581" class="Symbol">{</a><a id="2582" href="Assignment3.html#2582" class="Bound">f</a> <a id="2584" class="Symbol">:</a> <a id="2586" href="Assignment3.html#2568" class="Bound">A</a> <a id="2588" class="Symbol">→</a> <a id="2590" href="Assignment3.html#2570" class="Bound">B</a><a id="2591" class="Symbol">}</a> <a id="2593" class="Symbol">{</a><a id="2594" href="Assignment3.html#2594" class="Bound">g</a> <a id="2596" class="Symbol">:</a> <a id="2598" href="Assignment3.html#2570" class="Bound">B</a> <a id="2600" class="Symbol">→</a> <a id="2602" href="Assignment3.html#2572" class="Bound">C</a><a id="2603" class="Symbol">}</a>
    <a id="2609" class="Symbol">→</a> <a id="2611" href="/PLFA-zh/Lists/#16959" class="Function">map</a> <a id="2615" class="Symbol">(</a><a id="2616" href="/PLFA-zh/TSPL/2018/Assignment3/#2594" class="Bound">g</a> <a id="2618" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">∘</a> <a id="2620" href="Assignment3.html#2582" class="Bound">f</a><a id="2621" class="Symbol">)</a> <a id="2623" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="2625" href="plfa.Lists.html#16959" class="Function">map</a> <a id="2629" href="Assignment3.html#2594" class="Bound">g</a> <a id="2631" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">∘</a> <a id="2633" href="plfa.Lists.html#16959" class="Function">map</a> <a id="2637" href="Assignment3.html#2582" class="Bound">f</a>
</pre>
<p>The last step of the proof requires extensionality.</p>

<h4 id="exercise-map--commute">Exercise <code class="highlighter-rouge">map-++-commute</code></h4>

<p>Prove the following relationship between map and append.</p>
<pre class="Agda"><a id="2789" class="Keyword">postulate</a>
  <a id="map-++-commute"></a><a id="2801" href="/PLFA-zh/TSPL/2018/Assignment3/#2801" class="Postulate">map-++-commute</a> <a id="2816" class="Symbol">:</a> <a id="2818" class="Symbol">∀</a> <a id="2820" class="Symbol">{</a><a id="2821" href="Assignment3.html#2821" class="Bound">A</a> <a id="2823" href="Assignment3.html#2823" class="Bound">B</a> <a id="2825" class="Symbol">:</a> <a id="2827" class="PrimitiveType">Set</a><a id="2830" class="Symbol">}</a> <a id="2832" class="Symbol">{</a><a id="2833" href="Assignment3.html#2833" class="Bound">f</a> <a id="2835" class="Symbol">:</a> <a id="2837" href="Assignment3.html#2821" class="Bound">A</a> <a id="2839" class="Symbol">→</a> <a id="2841" href="Assignment3.html#2823" class="Bound">B</a><a id="2842" class="Symbol">}</a> <a id="2844" class="Symbol">{</a><a id="2845" href="Assignment3.html#2845" class="Bound">xs</a> <a id="2848" href="Assignment3.html#2848" class="Bound">ys</a> <a id="2851" class="Symbol">:</a> <a id="2853" href="/PLFA-zh/Lists/#1284" class="Datatype">List</a> <a id="2858" href="Assignment3.html#2821" class="Bound">A</a><a id="2859" class="Symbol">}</a>
   <a id="2864" class="Symbol">→</a>  <a id="2867" href="/PLFA-zh/Lists/#16959" class="Function">map</a> <a id="2871" href="/PLFA-zh/TSPL/2018/Assignment3/#2833" class="Bound">f</a> <a id="2873" class="Symbol">(</a><a id="2874" href="Assignment3.html#2845" class="Bound">xs</a> <a id="2877" href="plfa.Lists.html#4651" class="Function Operator">++</a> <a id="2880" href="Assignment3.html#2848" class="Bound">ys</a><a id="2882" class="Symbol">)</a> <a id="2884" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="2886" href="plfa.Lists.html#16959" class="Function">map</a> <a id="2890" href="Assignment3.html#2833" class="Bound">f</a> <a id="2892" href="Assignment3.html#2845" class="Bound">xs</a> <a id="2895" href="plfa.Lists.html#4651" class="Function Operator">++</a> <a id="2898" href="plfa.Lists.html#16959" class="Function">map</a> <a id="2902" href="Assignment3.html#2833" class="Bound">f</a> <a id="2904" href="Assignment3.html#2848" class="Bound">ys</a>
</pre>
<h4 id="exercise-map-tree">Exercise <code class="highlighter-rouge">map-Tree</code></h4>

<p>Define a type of trees with leaves of type <code class="highlighter-rouge">A</code> and internal
nodes of type <code class="highlighter-rouge">B</code>.</p>
<pre class="Agda"><a id="3021" class="Keyword">data</a> <a id="Tree"></a><a id="3026" href="/PLFA-zh/TSPL/2018/Assignment3/#3026" class="Datatype">Tree</a> <a id="3031" class="Symbol">(</a><a id="3032" href="Assignment3.html#3032" class="Bound">A</a> <a id="3034" href="Assignment3.html#3034" class="Bound">B</a> <a id="3036" class="Symbol">:</a> <a id="3038" class="PrimitiveType">Set</a><a id="3041" class="Symbol">)</a> <a id="3043" class="Symbol">:</a> <a id="3045" class="PrimitiveType">Set</a> <a id="3049" class="Keyword">where</a>
  <a id="Tree.leaf"></a><a id="3057" href="/PLFA-zh/TSPL/2018/Assignment3/#3057" class="InductiveConstructor">leaf</a> <a id="3062" class="Symbol">:</a> <a id="3064" href="Assignment3.html#3032" class="Bound">A</a> <a id="3066" class="Symbol">→</a> <a id="3068" href="Assignment3.html#3026" class="Datatype">Tree</a> <a id="3073" href="Assignment3.html#3032" class="Bound">A</a> <a id="3075" href="Assignment3.html#3034" class="Bound">B</a>
  <a id="Tree.node"></a><a id="3079" href="/PLFA-zh/TSPL/2018/Assignment3/#3079" class="InductiveConstructor">node</a> <a id="3084" class="Symbol">:</a> <a id="3086" href="Assignment3.html#3026" class="Datatype">Tree</a> <a id="3091" href="Assignment3.html#3032" class="Bound">A</a> <a id="3093" href="Assignment3.html#3034" class="Bound">B</a> <a id="3095" class="Symbol">→</a> <a id="3097" href="Assignment3.html#3034" class="Bound">B</a> <a id="3099" class="Symbol">→</a> <a id="3101" href="Assignment3.html#3026" class="Datatype">Tree</a> <a id="3106" href="Assignment3.html#3032" class="Bound">A</a> <a id="3108" href="Assignment3.html#3034" class="Bound">B</a> <a id="3110" class="Symbol">→</a> <a id="3112" href="Assignment3.html#3026" class="Datatype">Tree</a> <a id="3117" href="Assignment3.html#3032" class="Bound">A</a> <a id="3119" href="Assignment3.html#3034" class="Bound">B</a>
</pre>
<p>Define a suitable map operator over trees.</p>
<pre class="Agda"><a id="3172" class="Keyword">postulate</a>
  <a id="map-Tree"></a><a id="3184" href="/PLFA-zh/TSPL/2018/Assignment3/#3184" class="Postulate">map-Tree</a> <a id="3193" class="Symbol">:</a> <a id="3195" class="Symbol">∀</a> <a id="3197" class="Symbol">{</a><a id="3198" href="Assignment3.html#3198" class="Bound">A</a> <a id="3200" href="Assignment3.html#3200" class="Bound">B</a> <a id="3202" href="Assignment3.html#3202" class="Bound">C</a> <a id="3204" href="Assignment3.html#3204" class="Bound">D</a> <a id="3206" class="Symbol">:</a> <a id="3208" class="PrimitiveType">Set</a><a id="3211" class="Symbol">}</a>
    <a id="3217" class="Symbol">→</a> <a id="3219" class="Symbol">(</a><a id="3220" href="/PLFA-zh/TSPL/2018/Assignment3/#3198" class="Bound">A</a> <a id="3222" class="Symbol">→</a> <a id="3224" href="Assignment3.html#3202" class="Bound">C</a><a id="3225" class="Symbol">)</a> <a id="3227" class="Symbol">→</a> <a id="3229" class="Symbol">(</a><a id="3230" href="Assignment3.html#3200" class="Bound">B</a> <a id="3232" class="Symbol">→</a> <a id="3234" href="Assignment3.html#3204" class="Bound">D</a><a id="3235" class="Symbol">)</a> <a id="3237" class="Symbol">→</a> <a id="3239" href="Assignment3.html#3026" class="Datatype">Tree</a> <a id="3244" href="Assignment3.html#3198" class="Bound">A</a> <a id="3246" href="Assignment3.html#3200" class="Bound">B</a> <a id="3248" class="Symbol">→</a> <a id="3250" href="Assignment3.html#3026" class="Datatype">Tree</a> <a id="3255" href="Assignment3.html#3202" class="Bound">C</a> <a id="3257" href="Assignment3.html#3204" class="Bound">D</a>
</pre>
<h4 id="exercise-product-recommended">Exercise <code class="highlighter-rouge">product</code> (recommended)</h4>

<p>Use fold to define a function to find the product of a list of numbers.
For example,</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>product [ 1 , 2 , 3 , 4 ] ≡ 24
</code></pre></div></div>

<h4 id="exercise-foldr--recommended">Exercise <code class="highlighter-rouge">foldr-++</code> (recommended)</h4>

<p>Show that fold and append are related as follows.</p>
<pre class="Agda"><a id="3519" class="Keyword">postulate</a>
  <a id="foldr-++"></a><a id="3531" href="/PLFA-zh/TSPL/2018/Assignment3/#3531" class="Postulate">foldr-++</a> <a id="3540" class="Symbol">:</a> <a id="3542" class="Symbol">∀</a> <a id="3544" class="Symbol">{</a><a id="3545" href="Assignment3.html#3545" class="Bound">A</a> <a id="3547" href="Assignment3.html#3547" class="Bound">B</a> <a id="3549" class="Symbol">:</a> <a id="3551" class="PrimitiveType">Set</a><a id="3554" class="Symbol">}</a> <a id="3556" class="Symbol">(</a><a id="3557" href="Assignment3.html#3557" class="Bound Operator">_⊗_</a> <a id="3561" class="Symbol">:</a> <a id="3563" href="Assignment3.html#3545" class="Bound">A</a> <a id="3565" class="Symbol">→</a> <a id="3567" href="Assignment3.html#3547" class="Bound">B</a> <a id="3569" class="Symbol">→</a> <a id="3571" href="Assignment3.html#3547" class="Bound">B</a><a id="3572" class="Symbol">)</a> <a id="3574" class="Symbol">(</a><a id="3575" href="Assignment3.html#3575" class="Bound">e</a> <a id="3577" class="Symbol">:</a> <a id="3579" href="Assignment3.html#3547" class="Bound">B</a><a id="3580" class="Symbol">)</a> <a id="3582" class="Symbol">(</a><a id="3583" href="Assignment3.html#3583" class="Bound">xs</a> <a id="3586" href="Assignment3.html#3586" class="Bound">ys</a> <a id="3589" class="Symbol">:</a> <a id="3591" href="/PLFA-zh/Lists/#1284" class="Datatype">List</a> <a id="3596" href="Assignment3.html#3545" class="Bound">A</a><a id="3597" class="Symbol">)</a> <a id="3599" class="Symbol">→</a>
    <a id="3605" href="/PLFA-zh/Lists/#20225" class="Function">foldr</a> <a id="3611" href="/PLFA-zh/TSPL/2018/Assignment3/#3557" class="Bound Operator">_⊗_</a> <a id="3615" href="Assignment3.html#3575" class="Bound">e</a> <a id="3617" class="Symbol">(</a><a id="3618" href="Assignment3.html#3583" class="Bound">xs</a> <a id="3621" href="plfa.Lists.html#4651" class="Function Operator">++</a> <a id="3624" href="Assignment3.html#3586" class="Bound">ys</a><a id="3626" class="Symbol">)</a> <a id="3628" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="3630" href="plfa.Lists.html#20225" class="Function">foldr</a> <a id="3636" href="Assignment3.html#3557" class="Bound Operator">_⊗_</a> <a id="3640" class="Symbol">(</a><a id="3641" href="plfa.Lists.html#20225" class="Function">foldr</a> <a id="3647" href="Assignment3.html#3557" class="Bound Operator">_⊗_</a> <a id="3651" href="Assignment3.html#3575" class="Bound">e</a> <a id="3653" href="Assignment3.html#3586" class="Bound">ys</a><a id="3655" class="Symbol">)</a> <a id="3657" href="Assignment3.html#3583" class="Bound">xs</a>
</pre>

<h4 id="exercise-map-is-foldr">Exercise <code class="highlighter-rouge">map-is-foldr</code></h4>

<p>Show that map can be defined using fold.</p>
<pre class="Agda"><a id="3741" class="Keyword">postulate</a>
  <a id="map-is-foldr"></a><a id="3753" href="/PLFA-zh/TSPL/2018/Assignment3/#3753" class="Postulate">map-is-foldr</a> <a id="3766" class="Symbol">:</a> <a id="3768" class="Symbol">∀</a> <a id="3770" class="Symbol">{</a><a id="3771" href="Assignment3.html#3771" class="Bound">A</a> <a id="3773" href="Assignment3.html#3773" class="Bound">B</a> <a id="3775" class="Symbol">:</a> <a id="3777" class="PrimitiveType">Set</a><a id="3780" class="Symbol">}</a> <a id="3782" class="Symbol">{</a><a id="3783" href="Assignment3.html#3783" class="Bound">f</a> <a id="3785" class="Symbol">:</a> <a id="3787" href="Assignment3.html#3771" class="Bound">A</a> <a id="3789" class="Symbol">→</a> <a id="3791" href="Assignment3.html#3773" class="Bound">B</a><a id="3792" class="Symbol">}</a> <a id="3794" class="Symbol">→</a>
    <a id="3800" href="/PLFA-zh/Lists/#16959" class="Function">map</a> <a id="3804" href="/PLFA-zh/TSPL/2018/Assignment3/#3783" class="Bound">f</a> <a id="3806" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="3808" href="plfa.Lists.html#20225" class="Function">foldr</a> <a id="3814" class="Symbol">(λ</a> <a id="3817" href="Assignment3.html#3817" class="Bound">x</a> <a id="3819" href="Assignment3.html#3819" class="Bound">xs</a> <a id="3822" class="Symbol">→</a> <a id="3824" href="Assignment3.html#3783" class="Bound">f</a> <a id="3826" href="Assignment3.html#3817" class="Bound">x</a> <a id="3828" href="plfa.Lists.html#1328" class="InductiveConstructor Operator">∷</a> <a id="3830" href="Assignment3.html#3819" class="Bound">xs</a><a id="3832" class="Symbol">)</a> <a id="3834" href="plfa.Lists.html#1313" class="InductiveConstructor">[]</a>
</pre>
<p>This requires extensionality.</p>

<h4 id="exercise-fold-tree">Exercise <code class="highlighter-rouge">fold-Tree</code></h4>

<p>Define a suitable fold function for the type of trees given earlier.</p>
<pre class="Agda"><a id="3972" class="Keyword">postulate</a>
  <a id="fold-Tree"></a><a id="3984" href="/PLFA-zh/TSPL/2018/Assignment3/#3984" class="Postulate">fold-Tree</a> <a id="3994" class="Symbol">:</a> <a id="3996" class="Symbol">∀</a> <a id="3998" class="Symbol">{</a><a id="3999" href="Assignment3.html#3999" class="Bound">A</a> <a id="4001" href="Assignment3.html#4001" class="Bound">B</a> <a id="4003" href="Assignment3.html#4003" class="Bound">C</a> <a id="4005" class="Symbol">:</a> <a id="4007" class="PrimitiveType">Set</a><a id="4010" class="Symbol">}</a>
    <a id="4016" class="Symbol">→</a> <a id="4018" class="Symbol">(</a><a id="4019" href="/PLFA-zh/TSPL/2018/Assignment3/#3999" class="Bound">A</a> <a id="4021" class="Symbol">→</a> <a id="4023" href="Assignment3.html#4003" class="Bound">C</a><a id="4024" class="Symbol">)</a> <a id="4026" class="Symbol">→</a> <a id="4028" class="Symbol">(</a><a id="4029" href="Assignment3.html#4003" class="Bound">C</a> <a id="4031" class="Symbol">→</a> <a id="4033" href="Assignment3.html#4001" class="Bound">B</a> <a id="4035" class="Symbol">→</a> <a id="4037" href="Assignment3.html#4003" class="Bound">C</a> <a id="4039" class="Symbol">→</a> <a id="4041" href="Assignment3.html#4003" class="Bound">C</a><a id="4042" class="Symbol">)</a> <a id="4044" class="Symbol">→</a> <a id="4046" href="Assignment3.html#3026" class="Datatype">Tree</a> <a id="4051" href="Assignment3.html#3999" class="Bound">A</a> <a id="4053" href="Assignment3.html#4001" class="Bound">B</a> <a id="4055" class="Symbol">→</a> <a id="4057" href="Assignment3.html#4003" class="Bound">C</a>
</pre>
<h4 id="exercise-map-is-fold-tree">Exercise <code class="highlighter-rouge">map-is-fold-Tree</code></h4>

<p>Demonstrate an analogue of <code class="highlighter-rouge">map-is-foldr</code> for the type of trees.</p>

<h4 id="exercise-sum-downfrom-stretch">Exercise <code class="highlighter-rouge">sum-downFrom</code> (stretch)</h4>

<p>Define a function that counts down as follows.</p>
<pre class="Agda"><a id="downFrom"></a><a id="4255" href="/PLFA-zh/TSPL/2018/Assignment3/#4255" class="Function">downFrom</a> <a id="4264" class="Symbol">:</a> <a id="4266" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a> <a id="4268" class="Symbol">→</a> <a id="4270" href="/PLFA-zh/Lists/#1284" class="Datatype">List</a> <a id="4275" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a>
<a id="4277" href="/PLFA-zh/TSPL/2018/Assignment3/#4255" class="Function">downFrom</a> <a id="4286" href="Agda.Builtin.Nat.html#183" class="InductiveConstructor">zero</a>     <a id="4295" class="Symbol">=</a>  <a id="4298" href="/PLFA-zh/Lists/#1313" class="InductiveConstructor">[]</a>
<a id="4301" href="/PLFA-zh/TSPL/2018/Assignment3/#4255" class="Function">downFrom</a> <a id="4310" class="Symbol">(</a><a id="4311" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="4315" href="Assignment3.html#4315" class="Bound">n</a><a id="4316" class="Symbol">)</a>  <a id="4319" class="Symbol">=</a>  <a id="4322" href="Assignment3.html#4315" class="Bound">n</a> <a id="4324" href="/PLFA-zh/Lists/#1328" class="InductiveConstructor Operator">∷</a> <a id="4326" href="Assignment3.html#4255" class="Function">downFrom</a> <a id="4335" href="Assignment3.html#4315" class="Bound">n</a>
</pre>
<p>For example,</p>
<pre class="Agda"><a id="4358" href="/PLFA-zh/TSPL/2018/Assignment3/#4358" class="Function">_</a> <a id="4360" class="Symbol">:</a> <a id="4362" href="Assignment3.html#4255" class="Function">downFrom</a> <a id="4371" class="Number">3</a> <a id="4373" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="4375" href="/PLFA-zh/Lists/#3872" class="InductiveConstructor Operator">[</a> <a id="4377" class="Number">2</a> <a id="4379" href="plfa.Lists.html#3872" class="InductiveConstructor Operator">,</a> <a id="4381" class="Number">1</a> <a id="4383" href="plfa.Lists.html#3872" class="InductiveConstructor Operator">,</a> <a id="4385" class="Number">0</a> <a id="4387" href="plfa.Lists.html#3872" class="InductiveConstructor Operator">]</a>
<a id="4389" class="Symbol">_</a> <a id="4391" class="Symbol">=</a> <a id="4393" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
</pre>
<p>Prove that the sum of the numbers <code class="highlighter-rouge">(n - 1) + ⋯ + 0</code> is
equal to <code class="highlighter-rouge">n * (n ∸ 1) / 2</code>.</p>
<pre class="Agda"><a id="4489" class="Keyword">postulate</a>
  <a id="sum-downFrom"></a><a id="4501" href="/PLFA-zh/TSPL/2018/Assignment3/#4501" class="Postulate">sum-downFrom</a> <a id="4514" class="Symbol">:</a> <a id="4516" class="Symbol">∀</a> <a id="4518" class="Symbol">(</a><a id="4519" href="Assignment3.html#4519" class="Bound">n</a> <a id="4521" class="Symbol">:</a> <a id="4523" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a><a id="4524" class="Symbol">)</a>
    <a id="4530" class="Symbol">→</a> <a id="4532" href="/PLFA-zh/Lists/#21337" class="Function">sum</a> <a id="4536" class="Symbol">(</a><a id="4537" href="/PLFA-zh/TSPL/2018/Assignment3/#4255" class="Function">downFrom</a> <a id="4546" href="Assignment3.html#4519" class="Bound">n</a><a id="4547" class="Symbol">)</a> <a id="4549" href="Agda.Builtin.Nat.html#501" class="Primitive Operator">*</a> <a id="4551" class="Number">2</a> <a id="4553" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="4555" href="Assignment3.html#4519" class="Bound">n</a> <a id="4557" href="Agda.Builtin.Nat.html#501" class="Primitive Operator">*</a> <a id="4559" class="Symbol">(</a><a id="4560" href="Assignment3.html#4519" class="Bound">n</a> <a id="4562" href="Agda.Builtin.Nat.html#388" class="Primitive Operator">∸</a> <a id="4564" class="Number">1</a><a id="4565" class="Symbol">)</a>
</pre>

<h4 id="exercise-foldl">Exercise <code class="highlighter-rouge">foldl</code></h4>

<p>Define a function <code class="highlighter-rouge">foldl</code> which is analogous to <code class="highlighter-rouge">foldr</code>, but where
operations associate to the left rather than the right.  For example,</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>foldr _⊗_ e [ x , y , z ]  =  x ⊗ (y ⊗ (z ⊗ e))
foldl _⊗_ e [ x , y , z ]  =  ((e ⊗ x) ⊗ y) ⊗ z
</code></pre></div></div>

<h4 id="exercise-foldr-monoid-foldl">Exercise <code class="highlighter-rouge">foldr-monoid-foldl</code></h4>

<p>Show that if <code class="highlighter-rouge">_⊕_</code> and <code class="highlighter-rouge">e</code> form a monoid, then <code class="highlighter-rouge">foldr _⊗_ e</code> and
<code class="highlighter-rouge">foldl _⊗_ e</code> always compute the same result.</p>

<h4 id="exercise-any---recommended">Exercise <code class="highlighter-rouge">Any-++-⇔</code> (recommended)</h4>

<p>Prove a result similar to <code class="highlighter-rouge">All-++-↔</code>, but with <code class="highlighter-rouge">Any</code> in place of <code class="highlighter-rouge">All</code>, and a suitable
replacement for <code class="highlighter-rouge">_×_</code>.  As a consequence, demonstrate an equivalence relating
<code class="highlighter-rouge">_∈_</code> and <code class="highlighter-rouge">_++_</code>.</p>

<h4 id="exercise-all---stretch">Exercise <code class="highlighter-rouge">All-++-≃</code> (stretch)</h4>

<p>Show that the equivalence <code class="highlighter-rouge">All-++-⇔</code> can be extended to an isomorphism.</p>

<h4 id="exercise-anyall-stretch">Exercise <code class="highlighter-rouge">¬Any≃All¬</code> (stretch)</h4>

<p>First generalise composition to arbitrary levels, using
[universe polymorphism][plfa.Equality#unipoly].</p>
<pre class="Agda"><a id="_∘′_"></a><a id="5469" href="/PLFA-zh/TSPL/2018/Assignment3/#5469" class="Function Operator">_∘′_</a> <a id="5474" class="Symbol">:</a> <a id="5476" class="Symbol">∀</a> <a id="5478" class="Symbol">{</a><a id="5479" href="Assignment3.html#5479" class="Bound">ℓ₁</a> <a id="5482" href="Assignment3.html#5482" class="Bound">ℓ₂</a> <a id="5485" href="Assignment3.html#5485" class="Bound">ℓ₃</a> <a id="5488" class="Symbol">:</a> <a id="5490" href="Agda.Primitive.html#408" class="Postulate">Level</a><a id="5495" class="Symbol">}</a> <a id="5497" class="Symbol">{</a><a id="5498" href="Assignment3.html#5498" class="Bound">A</a> <a id="5500" class="Symbol">:</a> <a id="5502" class="PrimitiveType">Set</a> <a id="5506" href="Assignment3.html#5479" class="Bound">ℓ₁</a><a id="5508" class="Symbol">}</a> <a id="5510" class="Symbol">{</a><a id="5511" href="Assignment3.html#5511" class="Bound">B</a> <a id="5513" class="Symbol">:</a> <a id="5515" class="PrimitiveType">Set</a> <a id="5519" href="Assignment3.html#5482" class="Bound">ℓ₂</a><a id="5521" class="Symbol">}</a> <a id="5523" class="Symbol">{</a><a id="5524" href="Assignment3.html#5524" class="Bound">C</a> <a id="5526" class="Symbol">:</a> <a id="5528" class="PrimitiveType">Set</a> <a id="5532" href="Assignment3.html#5485" class="Bound">ℓ₃</a><a id="5534" class="Symbol">}</a>
  <a id="5538" class="Symbol">→</a> <a id="5540" class="Symbol">(</a><a id="5541" href="/PLFA-zh/TSPL/2018/Assignment3/#5511" class="Bound">B</a> <a id="5543" class="Symbol">→</a> <a id="5545" href="Assignment3.html#5524" class="Bound">C</a><a id="5546" class="Symbol">)</a> <a id="5548" class="Symbol">→</a> <a id="5550" class="Symbol">(</a><a id="5551" href="Assignment3.html#5498" class="Bound">A</a> <a id="5553" class="Symbol">→</a> <a id="5555" href="Assignment3.html#5511" class="Bound">B</a><a id="5556" class="Symbol">)</a> <a id="5558" class="Symbol">→</a> <a id="5560" href="Assignment3.html#5498" class="Bound">A</a> <a id="5562" class="Symbol">→</a> <a id="5564" href="Assignment3.html#5524" class="Bound">C</a>
<a id="5566" class="Symbol">(</a><a id="5567" href="/PLFA-zh/TSPL/2018/Assignment3/#5567" class="Bound">g</a> <a id="5569" href="Assignment3.html#5469" class="Function Operator">∘′</a> <a id="5572" href="Assignment3.html#5572" class="Bound">f</a><a id="5573" class="Symbol">)</a> <a id="5575" href="Assignment3.html#5575" class="Bound">x</a>  <a id="5578" class="Symbol">=</a>  <a id="5581" href="Assignment3.html#5567" class="Bound">g</a> <a id="5583" class="Symbol">(</a><a id="5584" href="Assignment3.html#5572" class="Bound">f</a> <a id="5586" href="Assignment3.html#5575" class="Bound">x</a><a id="5587" class="Symbol">)</a>
</pre>
<p>Show that <code class="highlighter-rouge">Any</code> and <code class="highlighter-rouge">All</code> satisfy a version of De Morgan’s Law.</p>
<pre class="Agda"><a id="5662" class="Keyword">postulate</a>
  <a id="¬Any≃All¬"></a><a id="5674" href="/PLFA-zh/TSPL/2018/Assignment3/#5674" class="Postulate">¬Any≃All¬</a> <a id="5684" class="Symbol">:</a> <a id="5686" class="Symbol">∀</a> <a id="5688" class="Symbol">{</a><a id="5689" href="Assignment3.html#5689" class="Bound">A</a> <a id="5691" class="Symbol">:</a> <a id="5693" class="PrimitiveType">Set</a><a id="5696" class="Symbol">}</a> <a id="5698" class="Symbol">(</a><a id="5699" href="Assignment3.html#5699" class="Bound">P</a> <a id="5701" class="Symbol">:</a> <a id="5703" href="Assignment3.html#5689" class="Bound">A</a> <a id="5705" class="Symbol">→</a> <a id="5707" class="PrimitiveType">Set</a><a id="5710" class="Symbol">)</a> <a id="5712" class="Symbol">(</a><a id="5713" href="Assignment3.html#5713" class="Bound">xs</a> <a id="5716" class="Symbol">:</a> <a id="5718" href="/PLFA-zh/Lists/#1284" class="Datatype">List</a> <a id="5723" href="Assignment3.html#5689" class="Bound">A</a><a id="5724" class="Symbol">)</a>
    <a id="5730" class="Symbol">→</a> <a id="5732" class="Symbol">(</a><a id="5733" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">¬_</a> <a id="5736" href="/PLFA-zh/TSPL/2018/Assignment3/#5469" class="Function Operator">∘′</a> <a id="5739" href="/PLFA-zh/Lists/#29796" class="Datatype">Any</a> <a id="5743" href="Assignment3.html#5699" class="Bound">P</a><a id="5744" class="Symbol">)</a> <a id="5746" href="Assignment3.html#5713" class="Bound">xs</a> <a id="5749" href="/PLFA-zh/Isomorphism/#5843" class="Record Operator">≃</a> <a id="5751" href="plfa.Lists.html#27650" class="Datatype">All</a> <a id="5755" class="Symbol">(</a><a id="5756" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">¬_</a> <a id="5759" href="Assignment3.html#5469" class="Function Operator">∘′</a> <a id="5762" href="Assignment3.html#5699" class="Bound">P</a><a id="5763" class="Symbol">)</a> <a id="5765" href="Assignment3.html#5713" class="Bound">xs</a>
</pre>
<p>Do we also have the following?</p>
<pre class="Agda"><a id="5808" class="Keyword">postulate</a>
  <a id="¬All≃Any¬"></a><a id="5820" href="/PLFA-zh/TSPL/2018/Assignment3/#5820" class="Postulate">¬All≃Any¬</a> <a id="5830" class="Symbol">:</a> <a id="5832" class="Symbol">∀</a> <a id="5834" class="Symbol">{</a><a id="5835" href="Assignment3.html#5835" class="Bound">A</a> <a id="5837" class="Symbol">:</a> <a id="5839" class="PrimitiveType">Set</a><a id="5842" class="Symbol">}</a> <a id="5844" class="Symbol">(</a><a id="5845" href="Assignment3.html#5845" class="Bound">P</a> <a id="5847" class="Symbol">:</a> <a id="5849" href="Assignment3.html#5835" class="Bound">A</a> <a id="5851" class="Symbol">→</a> <a id="5853" class="PrimitiveType">Set</a><a id="5856" class="Symbol">)</a> <a id="5858" class="Symbol">(</a><a id="5859" href="Assignment3.html#5859" class="Bound">xs</a> <a id="5862" class="Symbol">:</a> <a id="5864" href="/PLFA-zh/Lists/#1284" class="Datatype">List</a> <a id="5869" href="Assignment3.html#5835" class="Bound">A</a><a id="5870" class="Symbol">)</a>
    <a id="5876" class="Symbol">→</a> <a id="5878" class="Symbol">(</a><a id="5879" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">¬_</a> <a id="5882" href="/PLFA-zh/TSPL/2018/Assignment3/#5469" class="Function Operator">∘′</a> <a id="5885" href="/PLFA-zh/Lists/#27650" class="Datatype">All</a> <a id="5889" href="Assignment3.html#5845" class="Bound">P</a><a id="5890" class="Symbol">)</a> <a id="5892" href="Assignment3.html#5859" class="Bound">xs</a> <a id="5895" href="/PLFA-zh/Isomorphism/#5843" class="Record Operator">≃</a> <a id="5897" href="plfa.Lists.html#29796" class="Datatype">Any</a> <a id="5901" class="Symbol">(</a><a id="5902" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">¬_</a> <a id="5905" href="Assignment3.html#5469" class="Function Operator">∘′</a> <a id="5908" href="Assignment3.html#5845" class="Bound">P</a><a id="5909" class="Symbol">)</a> <a id="5911" href="Assignment3.html#5859" class="Bound">xs</a>
</pre>
<p>If so, prove; if not, explain why.</p>

<h4 id="exercise-any-stretch">Exercise <code class="highlighter-rouge">any?</code> (stretch)</h4>

<p>Just as <code class="highlighter-rouge">All</code> has analogues <code class="highlighter-rouge">all</code> and <code class="highlighter-rouge">all?</code> which determine whether a
predicate holds for every element of a list, so does <code class="highlighter-rouge">Any</code> have
analogues <code class="highlighter-rouge">any</code> and <code class="highlighter-rouge">any?</code> which determine whether a predicates holds
for some element of a list.  Give their definitions.</p>

<h4 id="exercise-filter-stretch">Exercise <code class="highlighter-rouge">filter?</code> (stretch)</h4>

<p>Define the following variant of the traditional <code class="highlighter-rouge">filter</code> function on lists,
which given a list and a decidable predicate returns all elements of the
list satisfying the predicate.</p>
<pre class="Agda"><a id="6466" class="Keyword">postulate</a>
  <a id="filter?"></a><a id="6478" href="/PLFA-zh/TSPL/2018/Assignment3/#6478" class="Postulate">filter?</a> <a id="6486" class="Symbol">:</a> <a id="6488" class="Symbol">∀</a> <a id="6490" class="Symbol">{</a><a id="6491" href="Assignment3.html#6491" class="Bound">A</a> <a id="6493" class="Symbol">:</a> <a id="6495" class="PrimitiveType">Set</a><a id="6498" class="Symbol">}</a> <a id="6500" class="Symbol">{</a><a id="6501" href="Assignment3.html#6501" class="Bound">P</a> <a id="6503" class="Symbol">:</a> <a id="6505" href="Assignment3.html#6491" class="Bound">A</a> <a id="6507" class="Symbol">→</a> <a id="6509" class="PrimitiveType">Set</a><a id="6512" class="Symbol">}</a>
    <a id="6518" class="Symbol">→</a> <a id="6520" class="Symbol">(</a><a id="6521" href="/PLFA-zh/TSPL/2018/Assignment3/#6521" class="Bound">P?</a> <a id="6524" class="Symbol">:</a> <a id="6526" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Unary.html#3474" class="Function">Decidable</a> <a id="6536" href="Assignment3.html#6501" class="Bound">P</a><a id="6537" class="Symbol">)</a> <a id="6539" class="Symbol">→</a> <a id="6541" href="/PLFA-zh/Lists/#1284" class="Datatype">List</a> <a id="6546" href="Assignment3.html#6491" class="Bound">A</a> <a id="6548" class="Symbol">→</a> <a id="6550" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1783" class="Function">∃[</a> <a id="6553" href="Assignment3.html#6553" class="Bound">ys</a> <a id="6556" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1783" class="Function">]</a><a id="6557" class="Symbol">(</a> <a id="6559" href="plfa.Lists.html#27650" class="Datatype">All</a> <a id="6563" href="Assignment3.html#6501" class="Bound">P</a> <a id="6565" href="Assignment3.html#6553" class="Bound">ys</a> <a id="6568" class="Symbol">)</a>
</pre>

<h2 id="lambda">Lambda</h2>

<h4 id="exercise-mul-recommended">Exercise <code class="highlighter-rouge">mul</code> (recommended)</h4>

<p>Write out the definition of a lambda term that multiplies
two natural numbers.</p>

<h4 id="exercise-primed-stretch">Exercise <code class="highlighter-rouge">primed</code> (stretch)</h4>

<p>We can make examples with lambda terms slightly easier to write
by adding the following definitions.</p>
<pre class="Agda"><a id="ƛ′_⇒_"></a><a id="6842" href="/PLFA-zh/TSPL/2018/Assignment3/#6842" class="Function Operator">ƛ′_⇒_</a> <a id="6848" class="Symbol">:</a> <a id="6850" href="/PLFA-zh/Lambda/#3748" class="Datatype">Term</a> <a id="6855" class="Symbol">→</a> <a id="6857" href="plfa.Lambda.html#3748" class="Datatype">Term</a> <a id="6862" class="Symbol">→</a> <a id="6864" href="plfa.Lambda.html#3748" class="Datatype">Term</a>
<a id="6869" href="/PLFA-zh/TSPL/2018/Assignment3/#6842" class="Function Operator">ƛ′</a> <a id="6872" class="Symbol">(</a><a id="6873" href="/PLFA-zh/Lambda/#3767" class="InductiveConstructor Operator">`</a> <a id="6875" href="Assignment3.html#6875" class="Bound">x</a><a id="6876" class="Symbol">)</a> <a id="6878" href="Assignment3.html#6842" class="Function Operator">⇒</a> <a id="6880" href="Assignment3.html#6880" class="Bound">N</a>  <a id="6883" class="Symbol">=</a>  <a id="6886" href="plfa.Lambda.html#3806" class="InductiveConstructor Operator">ƛ</a> <a id="6888" href="Assignment3.html#6875" class="Bound">x</a> <a id="6890" href="plfa.Lambda.html#3806" class="InductiveConstructor Operator">⇒</a> <a id="6892" href="Assignment3.html#6880" class="Bound">N</a>
<a id="6894" href="/PLFA-zh/TSPL/2018/Assignment3/#6842" class="CatchallClause Function Operator">ƛ′</a><a id="6896" class="CatchallClause"> </a><a id="6897" class="CatchallClause Symbol">_</a><a id="6898" class="CatchallClause"> </a><a id="6899" href="Assignment3.html#6842" class="CatchallClause Function Operator">⇒</a><a id="6900" class="CatchallClause"> </a><a id="6901" class="CatchallClause Symbol">_</a>      <a id="6908" class="Symbol">=</a>  <a id="6911" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#294" class="Function">⊥-elim</a> <a id="6918" href="Assignment3.html#6947" class="Postulate">impossible</a>
  <a id="6931" class="Keyword">where</a> <a id="6937" class="Keyword">postulate</a> <a id="6947" href="/PLFA-zh/TSPL/2018/Assignment3/#6947" class="Postulate">impossible</a> <a id="6958" class="Symbol">:</a> <a id="6960" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#279" class="Datatype">⊥</a>

<a id="case′_[zero⇒_|suc_⇒_]"></a><a id="6963" href="/PLFA-zh/TSPL/2018/Assignment3/#6963" class="Function Operator">case′_[zero⇒_|suc_⇒_]</a> <a id="6985" class="Symbol">:</a> <a id="6987" href="/PLFA-zh/Lambda/#3748" class="Datatype">Term</a> <a id="6992" class="Symbol">→</a> <a id="6994" href="plfa.Lambda.html#3748" class="Datatype">Term</a> <a id="6999" class="Symbol">→</a> <a id="7001" href="plfa.Lambda.html#3748" class="Datatype">Term</a> <a id="7006" class="Symbol">→</a> <a id="7008" href="plfa.Lambda.html#3748" class="Datatype">Term</a> <a id="7013" class="Symbol">→</a> <a id="7015" href="plfa.Lambda.html#3748" class="Datatype">Term</a>
<a id="7020" href="/PLFA-zh/TSPL/2018/Assignment3/#6963" class="Function Operator">case′</a> <a id="7026" href="Assignment3.html#7026" class="Bound">L</a> <a id="7028" href="Assignment3.html#6963" class="Function Operator">[zero⇒</a> <a id="7035" href="Assignment3.html#7035" class="Bound">M</a> <a id="7037" href="Assignment3.html#6963" class="Function Operator">|suc</a> <a id="7042" class="Symbol">(</a><a id="7043" href="/PLFA-zh/Lambda/#3767" class="InductiveConstructor Operator">`</a> <a id="7045" href="Assignment3.html#7045" class="Bound">x</a><a id="7046" class="Symbol">)</a> <a id="7048" href="Assignment3.html#6963" class="Function Operator">⇒</a> <a id="7050" href="Assignment3.html#7050" class="Bound">N</a> <a id="7052" href="Assignment3.html#6963" class="Function Operator">]</a>  <a id="7055" class="Symbol">=</a>  <a id="7058" href="plfa.Lambda.html#3975" class="InductiveConstructor Operator">case</a> <a id="7063" href="Assignment3.html#7026" class="Bound">L</a> <a id="7065" href="plfa.Lambda.html#3975" class="InductiveConstructor Operator">[zero⇒</a> <a id="7072" href="Assignment3.html#7035" class="Bound">M</a> <a id="7074" href="plfa.Lambda.html#3975" class="InductiveConstructor Operator">|suc</a> <a id="7079" href="Assignment3.html#7045" class="Bound">x</a> <a id="7081" href="plfa.Lambda.html#3975" class="InductiveConstructor Operator">⇒</a> <a id="7083" href="Assignment3.html#7050" class="Bound">N</a> <a id="7085" href="plfa.Lambda.html#3975" class="InductiveConstructor Operator">]</a>
<a id="7087" href="/PLFA-zh/TSPL/2018/Assignment3/#6963" class="CatchallClause Function Operator">case′</a><a id="7092" class="CatchallClause"> </a><a id="7093" class="CatchallClause Symbol">_</a><a id="7094" class="CatchallClause"> </a><a id="7095" href="Assignment3.html#6963" class="CatchallClause Function Operator">[zero⇒</a><a id="7101" class="CatchallClause"> </a><a id="7102" class="CatchallClause Symbol">_</a><a id="7103" class="CatchallClause"> </a><a id="7104" href="Assignment3.html#6963" class="CatchallClause Function Operator">|suc</a><a id="7108" class="CatchallClause"> </a><a id="7109" class="CatchallClause Symbol">_</a><a id="7110" class="CatchallClause"> </a><a id="7111" href="Assignment3.html#6963" class="CatchallClause Function Operator">⇒</a><a id="7112" class="CatchallClause"> </a><a id="7113" class="CatchallClause Symbol">_</a><a id="7114" class="CatchallClause"> </a><a id="7115" href="Assignment3.html#6963" class="CatchallClause Function Operator">]</a>      <a id="7122" class="Symbol">=</a>  <a id="7125" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#294" class="Function">⊥-elim</a> <a id="7132" href="Assignment3.html#7161" class="Postulate">impossible</a>
  <a id="7145" class="Keyword">where</a> <a id="7151" class="Keyword">postulate</a> <a id="7161" href="/PLFA-zh/TSPL/2018/Assignment3/#7161" class="Postulate">impossible</a> <a id="7172" class="Symbol">:</a> <a id="7174" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#279" class="Datatype">⊥</a>

<a id="μ′_⇒_"></a><a id="7177" href="/PLFA-zh/TSPL/2018/Assignment3/#7177" class="Function Operator">μ′_⇒_</a> <a id="7183" class="Symbol">:</a> <a id="7185" href="/PLFA-zh/Lambda/#3748" class="Datatype">Term</a> <a id="7190" class="Symbol">→</a> <a id="7192" href="plfa.Lambda.html#3748" class="Datatype">Term</a> <a id="7197" class="Symbol">→</a> <a id="7199" href="plfa.Lambda.html#3748" class="Datatype">Term</a>
<a id="7204" href="/PLFA-zh/TSPL/2018/Assignment3/#7177" class="Function Operator">μ′</a> <a id="7207" class="Symbol">(</a><a id="7208" href="/PLFA-zh/Lambda/#3767" class="InductiveConstructor Operator">`</a> <a id="7210" href="Assignment3.html#7210" class="Bound">x</a><a id="7211" class="Symbol">)</a> <a id="7213" href="Assignment3.html#7177" class="Function Operator">⇒</a> <a id="7215" href="Assignment3.html#7215" class="Bound">N</a>  <a id="7218" class="Symbol">=</a>  <a id="7221" href="plfa.Lambda.html#4035" class="InductiveConstructor Operator">μ</a> <a id="7223" href="Assignment3.html#7210" class="Bound">x</a> <a id="7225" href="plfa.Lambda.html#4035" class="InductiveConstructor Operator">⇒</a> <a id="7227" href="Assignment3.html#7215" class="Bound">N</a>
<a id="7229" href="/PLFA-zh/TSPL/2018/Assignment3/#7177" class="CatchallClause Function Operator">μ′</a><a id="7231" class="CatchallClause"> </a><a id="7232" class="CatchallClause Symbol">_</a><a id="7233" class="CatchallClause"> </a><a id="7234" href="Assignment3.html#7177" class="CatchallClause Function Operator">⇒</a><a id="7235" class="CatchallClause"> </a><a id="7236" class="CatchallClause Symbol">_</a>      <a id="7243" class="Symbol">=</a>  <a id="7246" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#294" class="Function">⊥-elim</a> <a id="7253" href="Assignment3.html#7282" class="Postulate">impossible</a>
  <a id="7266" class="Keyword">where</a> <a id="7272" class="Keyword">postulate</a> <a id="7282" href="/PLFA-zh/TSPL/2018/Assignment3/#7282" class="Postulate">impossible</a> <a id="7293" class="Symbol">:</a> <a id="7295" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#279" class="Datatype">⊥</a>
</pre>
<p>The definition of <code class="highlighter-rouge">plus</code> can now be written as follows.</p>
<pre class="Agda"><a id="plus′"></a><a id="7361" href="/PLFA-zh/TSPL/2018/Assignment3/#7361" class="Function">plus′</a> <a id="7367" class="Symbol">:</a> <a id="7369" href="/PLFA-zh/Lambda/#3748" class="Datatype">Term</a>
<a id="7374" href="/PLFA-zh/TSPL/2018/Assignment3/#7361" class="Function">plus′</a> <a id="7380" class="Symbol">=</a> <a id="7382" href="Assignment3.html#7177" class="Function Operator">μ′</a> <a id="7385" href="Assignment3.html#7492" class="Function">+</a> <a id="7387" href="Assignment3.html#7177" class="Function Operator">⇒</a> <a id="7389" href="Assignment3.html#6842" class="Function Operator">ƛ′</a> <a id="7392" href="Assignment3.html#7506" class="Function">m</a> <a id="7394" href="Assignment3.html#6842" class="Function Operator">⇒</a> <a id="7396" href="Assignment3.html#6842" class="Function Operator">ƛ′</a> <a id="7399" href="Assignment3.html#7520" class="Function">n</a> <a id="7401" href="Assignment3.html#6842" class="Function Operator">⇒</a>
          <a id="7413" href="/PLFA-zh/TSPL/2018/Assignment3/#6963" class="Function Operator">case′</a> <a id="7419" href="Assignment3.html#7506" class="Function">m</a>
            <a id="7433" href="/PLFA-zh/TSPL/2018/Assignment3/#6963" class="Function Operator">[zero⇒</a> <a id="7440" href="Assignment3.html#7520" class="Function">n</a>
            <a id="7454" href="/PLFA-zh/TSPL/2018/Assignment3/#6963" class="Function Operator">|suc</a> <a id="7459" href="Assignment3.html#7506" class="Function">m</a> <a id="7461" href="Assignment3.html#6963" class="Function Operator">⇒</a> <a id="7463" href="/PLFA-zh/Lambda/#3934" class="InductiveConstructor Operator">`suc</a> <a id="7468" class="Symbol">(</a><a id="7469" href="Assignment3.html#7492" class="Function">+</a> <a id="7471" href="plfa.Lambda.html#3852" class="InductiveConstructor Operator">·</a> <a id="7473" href="Assignment3.html#7506" class="Function">m</a> <a id="7475" href="plfa.Lambda.html#3852" class="InductiveConstructor Operator">·</a> <a id="7477" href="Assignment3.html#7520" class="Function">n</a><a id="7478" class="Symbol">)</a> <a id="7480" href="Assignment3.html#6963" class="Function Operator">]</a>
  <a id="7484" class="Keyword">where</a>
  <a id="7492" href="/PLFA-zh/TSPL/2018/Assignment3/#7492" class="Function">+</a>  <a id="7495" class="Symbol">=</a>  <a id="7498" href="/PLFA-zh/Lambda/#3767" class="InductiveConstructor Operator">`</a> <a id="7500" class="String">&quot;+&quot;</a>
  <a id="7506" href="/PLFA-zh/TSPL/2018/Assignment3/#7506" class="Function">m</a>  <a id="7509" class="Symbol">=</a>  <a id="7512" href="/PLFA-zh/Lambda/#3767" class="InductiveConstructor Operator">`</a> <a id="7514" class="String">&quot;m&quot;</a>
  <a id="7520" href="/PLFA-zh/TSPL/2018/Assignment3/#7520" class="Function">n</a>  <a id="7523" class="Symbol">=</a>  <a id="7526" href="/PLFA-zh/Lambda/#3767" class="InductiveConstructor Operator">`</a> <a id="7528" class="String">&quot;n&quot;</a>
</pre>
<p>Write out the definition of multiplication in the same style.</p>

<h4 id="exercise-___-stretch">Exercise <code class="highlighter-rouge">_[_:=_]′</code> (stretch)</h4>

<p>The definition of substitution above has three clauses (<code class="highlighter-rouge">ƛ</code>, <code class="highlighter-rouge">case</code>,
and <code class="highlighter-rouge">μ</code>) that invoke a with clause to deal with bound variables.
Rewrite the definition to factor the common part of these three
clauses into a single function, defined by mutual recursion with
substitution.</p>

<h4 id="exercise-">Exercise <code class="highlighter-rouge">—↠≃—↠′</code></h4>

<p>Show that the two notions of reflexive and transitive closure
above are isomorphic.</p>

<h4 id="exercise-plus-example">Exercise <code class="highlighter-rouge">plus-example</code></h4>

<p>Write out the reduction sequence demonstrating that one plus one is two.</p>

<h4 id="exercise-mul-type-recommended">Exercise <code class="highlighter-rouge">mul-type</code> (recommended)</h4>

<p>Using the term <code class="highlighter-rouge">mul</code> you defined earlier, write out the derivation
showing that it is well-typed.</p>

<h2 id="properties">Properties</h2>

<h4 id="exercise-progress-">Exercise <code class="highlighter-rouge">Progress-≃</code></h4>

<p>Show that <code class="highlighter-rouge">Progress M</code> is isomorphic to <code class="highlighter-rouge">Value M ⊎ ∃[ N ](M —→ N)</code>.</p>

<h4 id="exercise-progress">Exercise <code class="highlighter-rouge">progress′</code></h4>

<p>Write out the proof of <code class="highlighter-rouge">progress′</code> in full, and compare it to the
proof of <code class="highlighter-rouge">progress</code> above.</p>

<h4 id="exercise-value">Exercise <code class="highlighter-rouge">value?</code></h4>

<p>Combine <code class="highlighter-rouge">progress</code> and <code class="highlighter-rouge">—→¬V</code> to write a program that decides
whether a well-typed term is a value.</p>
<pre class="Agda"><a id="8633" class="Keyword">postulate</a>
  <a id="value?"></a><a id="8645" href="/PLFA-zh/TSPL/2018/Assignment3/#8645" class="Postulate">value?</a> <a id="8652" class="Symbol">:</a> <a id="8654" class="Symbol">∀</a> <a id="8656" class="Symbol">{</a><a id="8657" href="Assignment3.html#8657" class="Bound">A</a> <a id="8659" href="Assignment3.html#8659" class="Bound">M</a><a id="8660" class="Symbol">}</a> <a id="8662" class="Symbol">→</a> <a id="8664" href="/PLFA-zh/Lambda/#31053" class="InductiveConstructor">∅</a> <a id="8666" href="plfa.Lambda.html#33418" class="Datatype Operator">⊢</a> <a id="8668" href="Assignment3.html#8659" class="Bound">M</a> <a id="8670" href="plfa.Lambda.html#33418" class="Datatype Operator">⦂</a> <a id="8672" href="Assignment3.html#8657" class="Bound">A</a> <a id="8674" class="Symbol">→</a> <a id="8676" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#605" class="Datatype">Dec</a> <a id="8680" class="Symbol">(</a><a id="8681" href="plfa.Lambda.html#11536" class="Datatype">Value</a> <a id="8687" href="Assignment3.html#8659" class="Bound">M</a><a id="8688" class="Symbol">)</a>
</pre>

<h4 id="exercise-subst-stretch">Exercise <code class="highlighter-rouge">subst′</code> (stretch)</h4>

<p>Rewrite <code class="highlighter-rouge">subst</code> to work with the modified definition <code class="highlighter-rouge">_[_:=_]′</code>
from the exercise in the previous chapter.  As before, this
should factor dealing with bound variables into a single function,
defined by mutual recursion with the proof that substitution
preserves types.</p>

<h4 id="exercise-mul-eval-recommended">Exercise <code class="highlighter-rouge">mul-eval</code> (recommended)</h4>

<p>Using the evaluator, confirm that two times two is four.</p>

<h4 id="exercise-progress-preservation">Exercise: <code class="highlighter-rouge">progress-preservation</code></h4>

<p>Without peeking at their statements above, write down the progress
and preservation theorems for the simply typed lambda-calculus.</p>

<h4 id="exercise-subject-expansion">Exercise <code class="highlighter-rouge">subject-expansion</code></h4>

<p>We say that <code class="highlighter-rouge">M</code> <em>reduces</em> to <code class="highlighter-rouge">N</code> if <code class="highlighter-rouge">M —→ N</code>,
and conversely that <code class="highlighter-rouge">M</code> <em>expands</em> to <code class="highlighter-rouge">N</code> if <code class="highlighter-rouge">N —→ M</code>.
The preservation property is sometimes called <em>subject reduction</em>.
Its opposite is <em>subject expansion</em>, which holds if
<code class="highlighter-rouge">M —→ N</code> and <code class="highlighter-rouge">∅ ⊢ N ⦂ A</code> imply <code class="highlighter-rouge">∅ ⊢ M ⦂ A</code>.
Find two counter-examples to subject expansion, one
with case expressions and one not involving case expressions.</p>

<h4 id="exercise-stuck">Exercise <code class="highlighter-rouge">stuck</code></h4>

<p>Give an example of an ill-typed term that does get stuck.</p>

<h4 id="exercise-unstuck-recommended">Exercise <code class="highlighter-rouge">unstuck</code> (recommended)</h4>

<p>Provide proofs of the three postulates, <code class="highlighter-rouge">unstuck</code>, <code class="highlighter-rouge">preserves</code>, and <code class="highlighter-rouge">wttdgs</code> above.</p>

  </div>

  <p style="text-align:center;">
    
    
    
    <a alt="Source code" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/courses/tspl/2018/Assignment3.lagda.md">源代码</a>
    
    
    
</p>


</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/PLFA-zh/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">编程语言基础：Agda 语言描述
</h2>

    <h3 class="footer-heading">原作者：</h3><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Philip Wadler</li>
          <li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk">wadler@inf.ed.ac.uk</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wadler"><svg class="svg-icon"><use xlink:href="/PLFA-zh/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wadler</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Wen Kokke</li>
          <li><a class="u-email" href="mailto:wen.kokke@ed.ac.uk">wen.kokke@ed.ac.uk</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wenkokke"><svg class="svg-icon"><use xlink:href="/PLFA-zh/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wenkokke</span></a></li><li><a href="https://www.twitter.com/wenkokke"><svg class="svg-icon"><use xlink:href="/PLFA-zh/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">wenkokke</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div><h3 class="footer-heading">本章暂无翻译</h3>本作品采用<a rel="license" href="https://creativecommons.org/licenses/by/4.0/deed.zh">创作共用-署名 4.0 国际（CC BY 4.0）许可协议</a>授权。<br />
  </div>
</footer>
<!-- Import jQuery -->
<script type="text/javascript" src="/PLFA-zh/assets/jquery.js"></script>

<!-- Script which draws background for progress tags -->
<script type="text/javascript">
$('span.progress').each(function(){
    const progress = parseInt($(this).text());
    $(this).css({
        'border-style': 'solid',
        'border-radius': '5px',
        'border-width': 'thin',
        'border-color': progress === 100 ? 'limegreen' : 'dimgray',
        'font-size': '70%',
        'padding': '0% 0.5% 0% 0.5%',
        'margin': '0em 0em 0em 0.5em',
        'box-sizing': 'border-box',
        'vertical-align': '10%'
    });
    $(this).text(progress.toString() + " %");
})
</script>

<!-- Script which allows for foldable code blocks -->
<script type="text/javascript">

 // Makes sandwhich menu works
 $('.menu-icon').click(function(){
   $('.trigger').toggle();
 });

 // Script which allows for foldable code blocks
 $('div.foldable pre').each(function(){
     var autoHeight = $(this).height();
     var lineHeight = parseFloat($(this).css('line-height'));

     var plus    = $("<div></div>");
     var horLine = $("<div></div>");
     var verLine = $("<div></div>");
     $(this).prepend(plus);
     plus.css({
         'position'         : 'relative',
         'float'            : 'right',
         'right'            : '-' + (0.5 * lineHeight - 1.5) + 'px',
         'width'            : lineHeight,
         'height'           : lineHeight});
     verLine.css({
         'position'         : 'relative',
         'height'           : lineHeight,
         'width'            : '3px',
         'background-color' : '#C1E0FF'});
     horLine.css({
         'position'         : 'relative',
         'top'              : '-' + (0.5 * lineHeight + 1.5) + 'px',
         'left'             : '-' + (0.5 * lineHeight - 1.5) + 'px',
         'height'           : '3px',
         'width'            : lineHeight,
         'background-color' : '#C1E0FF'});
     plus.append(verLine);
     plus.append(horLine);

     $(this).height(2.0 * lineHeight);
     $(this).css('overflow','hidden');

     $(this).click(function(){
         if ($(this).height() == autoHeight) {
             $(this).height(2.0 * lineHeight);
             plus.show();
         }
         else {
             $(this).height('auto');
             plus.hide();
         }
     });
 });
</script>

<!-- Import KaTeX -->
<script type="text/javascript" src="/PLFA-zh/assets/katex.js"></script>

<!-- Script which renders TeX using KaTeX -->
<script type="text/javascript">
 $("script[type='math/tex']").replaceWith(
     function(){
         var tex = $(this).text();
         return "<span class=\"inline-equation\">" +
                katex.renderToString(tex) +
                "</span>";
     });
 $("script[type='math/tex; mode=display']").replaceWith(
     function(){
         var tex = $(this).text().replace(/%.*?(\n|$)/g,"");
         return "<div class=\"equation\">" +
                katex.renderToString("\\displaystyle "+tex) +
                "</div>";
     });
</script>
</body>

</html>
