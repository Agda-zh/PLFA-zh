<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-MkpYfmkWIfATGEd6NpDhZJQB2nIkJDL4/+fTWrR8KGUYK4WpHdNkNtsOewHrkVqI4K1SrtjK7aC/fwQljbifBA==" title="Light" id="stylesheet-light"><link rel="alternate stylesheet" href="../assets/css/dark.css" integrity="sha512-T2Tad3PSo5pIHyLVaV57XanuJRwSgTPT+WVb96FUf6y0ZJIXP4d/lNPJUqbUZ3j0Nq/gej2yteryEz/Hkr2Cdg==" title="Dark" id="stylesheet-dark" disabled><title>编程语言基础：Agda 描述 – Denotational</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header"><div class="wrapper"><a class="site-title" href="../">编程语言基础：Agda 描述</a><nav class="site-nav"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">主页</a> <a class="page-link" href="../Announcements/">公告</a> <a class="page-link" href="../GettingStarted/">使用说明</a> <a class="page-link" href="../Citing/">引用</a> <a class="page-link" href="https://plfa.github.io/">English</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager"><ul class="pagination"><li><a class="pagelink" href="../BigStep/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Denotational.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Compositional/">下一章</a></li><li class="separator">•</li></ul></nav><header class="post-header"><h1 class="post-title">Denotational: Denotational semantics of untyped lambda calculus</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part3-Denotational-123" class="Keyword">module</a> <a id="plfa_plfa-part3-Denotational-130" href="../Denotational/#" class="Module">plfa.part3.Denotational</a> <a id="plfa_plfa-part3-Denotational-154" class="Keyword">where</a>
</pre><p>The lambda calculus is a language about <em>functions</em>, that is, mappings from input to output. In computing we often think of such mappings as being carried out by a sequence of operations that transform an input into an output. But functions can also be represented as data. For example, one can tabulate a function, that is, create a table where each row has two entries, an input and the corresponding output for the function. Function application is then the process of looking up the row for a given input and reading off the output.</p><p>We shall create a semantics for the untyped lambda calculus based on this idea of functions-as-tables. However, there are two difficulties that arise. First, functions often have an infinite domain, so it would seem that we would need infinitely long tables to represent functions. Second, in the lambda calculus, functions can be applied to functions. They can even be applied to themselves! So it would seem that the tables would contain cycles. One might start to worry that advanced techniques are necessary to address these issues, but fortunately this is not the case!</p><p>The first problem, of functions with infinite domains, is solved by observing that in the execution of a terminating program, each lambda abstraction will only be applied to a finite number of distinct arguments. (We come back later to discuss diverging programs.) This observation is another way of looking at Dana Scott’s insight that only continuous functions are needed to model the lambda calculus.</p><p>The second problem, that of self-application, is solved by relaxing the way in which we lookup an argument in a function’s table. Naively, one would look in the table for a row in which the input entry exactly matches the argument. In the case of self-application, this would require the table to contain a copy of itself. Impossible! (At least, it is impossible if we want to build tables using inductive data type definitions, which indeed we do.) Instead it is sufficient to find an input such that every row of the input appears as a row of the argument (that is, the input is a subset of the argument). In the case of self-application, the table only needs to contain a smaller copy of itself, which is fine.</p><p>With these two observations in hand, it is straightforward to write down a denotational semantics of the lambda calculus.</p><h2 id="imports">Imports</h2><pre class="Agda"><a id="plfa_plfa-part3-Denotational-2545" class="Keyword">open</a> <a id="plfa_plfa-part3-Denotational-2550" class="Keyword">import</a> <a id="plfa_plfa-part3-Denotational-2557" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html" class="Module">Agda.Primitive</a> <a id="plfa_plfa-part3-Denotational-2572" class="Keyword">using</a> <a id="plfa_plfa-part3-Denotational-2578" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-2579" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#764" class="Primitive">lzero</a><a id="plfa_plfa-part3-Denotational-2584" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-2586" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#780" class="Primitive">lsuc</a><a id="plfa_plfa-part3-Denotational-2590" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-2592" class="Keyword">open</a> <a id="plfa_plfa-part3-Denotational-2597" class="Keyword">import</a> <a id="plfa_plfa-part3-Denotational-2604" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Nat.html" class="Module">Data.Nat</a> <a id="plfa_plfa-part3-Denotational-2613" class="Keyword">using</a> <a id="plfa_plfa-part3-Denotational-2619" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-2620" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="plfa_plfa-part3-Denotational-2621" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-2623" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="plfa_plfa-part3-Denotational-2627" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-2629" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="plfa_plfa-part3-Denotational-2632" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-2634" class="Keyword">open</a> <a id="plfa_plfa-part3-Denotational-2639" class="Keyword">import</a> <a id="plfa_plfa-part3-Denotational-2646" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html" class="Module">Data.Product</a> <a id="plfa_plfa-part3-Denotational-2659" class="Keyword">using</a> <a id="plfa_plfa-part3-Denotational-2665" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-2666" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">_×_</a><a id="plfa_plfa-part3-Denotational-2669" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-2671" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#166" class="Record">Σ</a><a id="plfa_plfa-part3-Denotational-2672" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-2674" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ-syntax</a><a id="plfa_plfa-part3-Denotational-2682" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-2684" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1369" class="Function">∃</a><a id="plfa_plfa-part3-Denotational-2685" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-2687" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1806" class="Function">∃-syntax</a><a id="plfa_plfa-part3-Denotational-2695" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-2697" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#252" class="Field">proj₁</a><a id="plfa_plfa-part3-Denotational-2702" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-2704" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#264" class="Field">proj₂</a><a id="plfa_plfa-part3-Denotational-2709" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Denotational-2713" class="Keyword">renaming</a> <a id="plfa_plfa-part3-Denotational-2722" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-2723" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part3-Denotational-2727" class="Symbol">to</a> <a id="plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part3-Denotational-2735" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-2737" class="Keyword">open</a> <a id="plfa_plfa-part3-Denotational-2742" class="Keyword">import</a> <a id="plfa_plfa-part3-Denotational-2749" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.html" class="Module">Data.Sum</a>
<a id="plfa_plfa-part3-Denotational-2758" class="Keyword">open</a> <a id="plfa_plfa-part3-Denotational-2763" class="Keyword">import</a> <a id="plfa_plfa-part3-Denotational-2770" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Vec.html" class="Module">Data.Vec</a> <a id="plfa_plfa-part3-Denotational-2779" class="Keyword">using</a> <a id="plfa_plfa-part3-Denotational-2785" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-2786" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Vec.Base.html#998" class="Datatype">Vec</a><a id="plfa_plfa-part3-Denotational-2789" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-2791" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a><a id="plfa_plfa-part3-Denotational-2793" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-2795" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Vec.Base.html#1053" class="InductiveConstructor Operator">_∷_</a><a id="plfa_plfa-part3-Denotational-2798" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-2800" class="Keyword">open</a> <a id="plfa_plfa-part3-Denotational-2805" class="Keyword">import</a> <a id="plfa_plfa-part3-Denotational-2812" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
  <a id="plfa_plfa-part3-Denotational-2852" class="Keyword">using</a> <a id="plfa_plfa-part3-Denotational-2858" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-2859" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="plfa_plfa-part3-Denotational-2862" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-2864" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#830" class="Function Operator">_≢_</a><a id="plfa_plfa-part3-Denotational-2867" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-2869" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Denotational-2873" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-2875" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a><a id="plfa_plfa-part3-Denotational-2878" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-2880" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a><a id="plfa_plfa-part3-Denotational-2884" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-2886" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1367" class="Function">cong₂</a><a id="plfa_plfa-part3-Denotational-2891" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-2893" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Binary.PropositionalEquality.Core.html#1461" class="Function">cong-app</a><a id="plfa_plfa-part3-Denotational-2901" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-2903" class="Keyword">open</a> <a id="plfa_plfa-part3-Denotational-2908" class="Keyword">import</a> <a id="plfa_plfa-part3-Denotational-2915" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="plfa_plfa-part3-Denotational-2932" class="Keyword">using</a> <a id="plfa_plfa-part3-Denotational-2938" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-2939" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#656" class="Function Operator">¬_</a><a id="plfa_plfa-part3-Denotational-2941" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-2943" class="Keyword">open</a> <a id="plfa_plfa-part3-Denotational-2948" class="Keyword">import</a> <a id="plfa_plfa-part3-Denotational-2955" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Negation.html" class="Module">Relation.Nullary.Negation</a> <a id="plfa_plfa-part3-Denotational-2981" class="Keyword">using</a> <a id="plfa_plfa-part3-Denotational-2987" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-2988" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Negation.Core.html#778" class="Function">contradiction</a><a id="plfa_plfa-part3-Denotational-3001" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-3003" class="Keyword">open</a> <a id="plfa_plfa-part3-Denotational-3008" class="Keyword">import</a> <a id="plfa_plfa-part3-Denotational-3015" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.html" class="Module">Function</a> <a id="plfa_plfa-part3-Denotational-3024" class="Keyword">using</a> <a id="plfa_plfa-part3-Denotational-3030" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-3031" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">_∘_</a><a id="plfa_plfa-part3-Denotational-3034" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-3036" class="Keyword">open</a> <a id="plfa_plfa-part3-Denotational-3041" class="Keyword">import</a> <a id="plfa_plfa-part3-Denotational-3048" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
  <a id="plfa_plfa-part3-Denotational-3069" class="Keyword">using</a> <a id="plfa_plfa-part3-Denotational-3075" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-3076" href="../Untyped/#plfa_plfa-part2-Untyped-4161" class="Datatype">Context</a><a id="plfa_plfa-part3-Denotational-3083" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-3085" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Denotational-3086" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-3088" href="../Untyped/#plfa_plfa-part2-Untyped-4688" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part3-Denotational-3091" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-3093" href="../Untyped/#plfa_plfa-part2-Untyped-4183" class="InductiveConstructor">∅</a><a id="plfa_plfa-part3-Denotational-3094" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-3096" href="../Untyped/#plfa_plfa-part2-Untyped-4199" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part3-Denotational-3099" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-3101" href="../Untyped/#plfa_plfa-part2-Untyped-4724" class="InductiveConstructor">Z</a><a id="plfa_plfa-part3-Denotational-3102" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-3104" href="../Untyped/#plfa_plfa-part2-Untyped-4769" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part3-Denotational-3106" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-3108" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part3-Denotational-3111" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-3113" href="../Untyped/#plfa_plfa-part2-Untyped-5768" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part3-Denotational-3115" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-3117" href="../Untyped/#plfa_plfa-part2-Untyped-5880" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part3-Denotational-3120" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-3122" href="../Untyped/#plfa_plfa-part2-Untyped-5820" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part3-Denotational-3124" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Denotational-3135" href="../Untyped/#plfa_plfa-part2-Untyped-6753" class="Function Operator">#_</a><a id="plfa_plfa-part3-Denotational-3137" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-3139" href="../Untyped/#plfa_plfa-part2-Untyped-6942" class="Function">twoᶜ</a><a id="plfa_plfa-part3-Denotational-3143" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-3145" href="../Untyped/#plfa_plfa-part2-Untyped-7839" class="Function">ext</a><a id="plfa_plfa-part3-Denotational-3148" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-3150" href="../Untyped/#plfa_plfa-part2-Untyped-8231" class="Function">rename</a><a id="plfa_plfa-part3-Denotational-3156" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-3158" href="../Untyped/#plfa_plfa-part2-Untyped-8758" class="Function">exts</a><a id="plfa_plfa-part3-Denotational-3162" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-3164" href="../Untyped/#plfa_plfa-part2-Untyped-9119" class="Function">subst</a><a id="plfa_plfa-part3-Denotational-3169" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-3171" href="../Untyped/#plfa_plfa-part2-Untyped-9615" class="Function">subst-zero</a><a id="plfa_plfa-part3-Denotational-3181" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-3183" href="../Untyped/#plfa_plfa-part2-Untyped-9731" class="Function Operator">_[_]</a><a id="plfa_plfa-part3-Denotational-3187" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-3189" class="Keyword">open</a> <a id="plfa_plfa-part3-Denotational-3194" class="Keyword">import</a> <a id="plfa_plfa-part3-Denotational-3201" href="../Substitution/#" class="Module">plfa.part2.Substitution</a> <a id="plfa_plfa-part3-Denotational-3225" class="Keyword">using</a> <a id="plfa_plfa-part3-Denotational-3231" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-3232" href="../Substitution/#plfa_plfa-part2-Substitution-2124" class="Function">Rename</a><a id="plfa_plfa-part3-Denotational-3238" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-3240" href="../Substitution/#plfa_plfa-part2-Substitution-1855" class="Postulate">extensionality</a><a id="plfa_plfa-part3-Denotational-3254" class="Symbol">;</a> <a id="plfa_plfa-part3-Denotational-3256" href="../Substitution/#plfa_plfa-part2-Substitution-17207" class="Function">rename-id</a><a id="plfa_plfa-part3-Denotational-3265" class="Symbol">)</a>
</pre><h2 id="values">Values</h2><p>The <code>Value</code> data type represents a finite portion of a function. We think of a value as a finite set of pairs that represent input-output mappings. The <code>Value</code> data type represents the set as a binary tree whose internal nodes are the union operator and whose leaves represent either a single mapping or the empty set.</p><ul><li><p>The ⊥ value provides no information about the computation.</p></li><li><p>A value of the form <code>v ↦ w</code> is a single input-output mapping, from input <code>v</code> to output <code>w</code>.</p></li><li><p>A value of the form <code>v ⊔ w</code> is a function that maps inputs to outputs according to both <code>v</code> and <code>w</code>. Think of it as taking the union of the two sets.</p></li></ul><pre class="Agda"><a id="plfa_plfa-part3-Denotational-3942" class="Keyword">infixr</a> <a id="plfa_plfa-part3-Denotational-3949" class="Number">7</a> <a id="plfa_plfa-part3-Denotational-3951" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">_↦_</a>
<a id="plfa_plfa-part3-Denotational-3955" class="Keyword">infixl</a> <a id="plfa_plfa-part3-Denotational-3962" class="Number">5</a> <a id="plfa_plfa-part3-Denotational-3964" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">_⊔_</a>

<a id="plfa_plfa-part3-Denotational-3969" class="Keyword">data</a> <a id="plfa_plfa-part3-Denotational-Value"></a><a id="plfa_plfa-part3-Denotational-3974" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-3980" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-3982" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#326" class="Primitive">Set</a> <a id="plfa_plfa-part3-Denotational-3986" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Denotational-Value.⊥"></a><a id="plfa_plfa-part3-Denotational-3994" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Denotational-3996" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-3998" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a>
  <a id="plfa_plfa-part3-Denotational-Value._↦_"></a><a id="plfa_plfa-part3-Denotational-4006" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">_↦_</a> <a id="plfa_plfa-part3-Denotational-4010" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-4012" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-4018" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-4020" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-4026" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-4028" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a>
  <a id="plfa_plfa-part3-Denotational-Value._⊔_"></a><a id="plfa_plfa-part3-Denotational-4036" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">_⊔_</a> <a id="plfa_plfa-part3-Denotational-4040" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-4042" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-4048" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-4050" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-4056" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-4058" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a>
</pre><p>The <code>⊑</code> relation adapts the familiar notion of subset to the Value data type. This relation plays the key role in enabling self-application. There are two rules that are specific to functions, <code>⊑-fun</code> and <code>⊑-dist</code>, which we discuss below.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-4317" class="Keyword">infix</a> <a id="plfa_plfa-part3-Denotational-4323" class="Number">4</a> <a id="plfa_plfa-part3-Denotational-4325" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">_⊑_</a>

<a id="plfa_plfa-part3-Denotational-4330" class="Keyword">data</a> <a id="plfa_plfa-part3-Denotational-_⊑_"></a><a id="plfa_plfa-part3-Denotational-4335" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">_⊑_</a> <a id="plfa_plfa-part3-Denotational-4339" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-4341" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-4347" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-4349" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-4355" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-4357" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#326" class="Primitive">Set</a> <a id="plfa_plfa-part3-Denotational-4361" class="Keyword">where</a>

  <a id="plfa_plfa-part3-Denotational-_⊑_.⊑-bot"></a><a id="plfa_plfa-part3-Denotational-4370" href="../Denotational/#plfa_plfa-part3-Denotational-4370" class="InductiveConstructor">⊑-bot</a> <a id="plfa_plfa-part3-Denotational-4376" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-4378" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-4380" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-4381" href="../Denotational/#plfa_plfa-part3-Denotational-4381" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-4382" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-4384" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-4386" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Denotational-4388" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-4390" href="../Denotational/#plfa_plfa-part3-Denotational-4381" class="Bound">v</a>

  <a id="plfa_plfa-part3-Denotational-_⊑_.⊑-conj-L"></a><a id="plfa_plfa-part3-Denotational-4395" href="../Denotational/#plfa_plfa-part3-Denotational-4395" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Denotational-4404" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-4406" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-4408" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-4409" href="../Denotational/#plfa_plfa-part3-Denotational-4409" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-4411" href="../Denotational/#plfa_plfa-part3-Denotational-4411" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-4413" href="../Denotational/#plfa_plfa-part3-Denotational-4413" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-4414" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Denotational-4420" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-4422" href="../Denotational/#plfa_plfa-part3-Denotational-4411" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-4424" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-4426" href="../Denotational/#plfa_plfa-part3-Denotational-4409" class="Bound">u</a>
    <a id="plfa_plfa-part3-Denotational-4432" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-4434" href="../Denotational/#plfa_plfa-part3-Denotational-4413" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-4436" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-4438" href="../Denotational/#plfa_plfa-part3-Denotational-4409" class="Bound">u</a>
      <a id="plfa_plfa-part3-Denotational-4446" class="Comment">-----------</a>
    <a id="plfa_plfa-part3-Denotational-4462" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-4464" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-4465" href="../Denotational/#plfa_plfa-part3-Denotational-4411" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-4467" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-4469" href="../Denotational/#plfa_plfa-part3-Denotational-4413" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-4470" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-4472" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-4474" href="../Denotational/#plfa_plfa-part3-Denotational-4409" class="Bound">u</a>

  <a id="plfa_plfa-part3-Denotational-_⊑_.⊑-conj-R1"></a><a id="plfa_plfa-part3-Denotational-4479" href="../Denotational/#plfa_plfa-part3-Denotational-4479" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Denotational-4489" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-4491" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-4493" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-4494" href="../Denotational/#plfa_plfa-part3-Denotational-4494" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-4496" href="../Denotational/#plfa_plfa-part3-Denotational-4496" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-4498" href="../Denotational/#plfa_plfa-part3-Denotational-4498" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-4499" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Denotational-4505" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-4507" href="../Denotational/#plfa_plfa-part3-Denotational-4494" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-4509" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-4511" href="../Denotational/#plfa_plfa-part3-Denotational-4496" class="Bound">v</a>
      <a id="plfa_plfa-part3-Denotational-4519" class="Comment">-----------</a>
    <a id="plfa_plfa-part3-Denotational-4535" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-4537" href="../Denotational/#plfa_plfa-part3-Denotational-4494" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-4539" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-4541" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-4542" href="../Denotational/#plfa_plfa-part3-Denotational-4496" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-4544" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-4546" href="../Denotational/#plfa_plfa-part3-Denotational-4498" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-4547" class="Symbol">)</a>

  <a id="plfa_plfa-part3-Denotational-_⊑_.⊑-conj-R2"></a><a id="plfa_plfa-part3-Denotational-4552" href="../Denotational/#plfa_plfa-part3-Denotational-4552" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Denotational-4562" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-4564" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-4566" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-4567" href="../Denotational/#plfa_plfa-part3-Denotational-4567" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-4569" href="../Denotational/#plfa_plfa-part3-Denotational-4569" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-4571" href="../Denotational/#plfa_plfa-part3-Denotational-4571" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-4572" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Denotational-4578" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-4580" href="../Denotational/#plfa_plfa-part3-Denotational-4567" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-4582" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-4584" href="../Denotational/#plfa_plfa-part3-Denotational-4571" class="Bound">w</a>
      <a id="plfa_plfa-part3-Denotational-4592" class="Comment">-----------</a>
    <a id="plfa_plfa-part3-Denotational-4608" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-4610" href="../Denotational/#plfa_plfa-part3-Denotational-4567" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-4612" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-4614" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-4615" href="../Denotational/#plfa_plfa-part3-Denotational-4569" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-4617" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-4619" href="../Denotational/#plfa_plfa-part3-Denotational-4571" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-4620" class="Symbol">)</a>

  <a id="plfa_plfa-part3-Denotational-_⊑_.⊑-trans"></a><a id="plfa_plfa-part3-Denotational-4625" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Denotational-4633" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-4635" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-4637" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-4638" href="../Denotational/#plfa_plfa-part3-Denotational-4638" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-4640" href="../Denotational/#plfa_plfa-part3-Denotational-4640" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-4642" href="../Denotational/#plfa_plfa-part3-Denotational-4642" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-4643" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Denotational-4649" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-4651" href="../Denotational/#plfa_plfa-part3-Denotational-4638" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-4653" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-4655" href="../Denotational/#plfa_plfa-part3-Denotational-4640" class="Bound">v</a>
    <a id="plfa_plfa-part3-Denotational-4661" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-4663" href="../Denotational/#plfa_plfa-part3-Denotational-4640" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-4665" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-4667" href="../Denotational/#plfa_plfa-part3-Denotational-4642" class="Bound">w</a>
      <a id="plfa_plfa-part3-Denotational-4675" class="Comment">-----</a>
    <a id="plfa_plfa-part3-Denotational-4685" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-4687" href="../Denotational/#plfa_plfa-part3-Denotational-4638" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-4689" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-4691" href="../Denotational/#plfa_plfa-part3-Denotational-4642" class="Bound">w</a>

  <a id="plfa_plfa-part3-Denotational-_⊑_.⊑-fun"></a><a id="plfa_plfa-part3-Denotational-4696" href="../Denotational/#plfa_plfa-part3-Denotational-4696" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Denotational-4702" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-4704" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-4706" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-4707" href="../Denotational/#plfa_plfa-part3-Denotational-4707" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-4709" href="../Denotational/#plfa_plfa-part3-Denotational-4709" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-4711" href="../Denotational/#plfa_plfa-part3-Denotational-4711" class="Bound">v′</a> <a id="plfa_plfa-part3-Denotational-4714" href="../Denotational/#plfa_plfa-part3-Denotational-4714" class="Bound">w′</a><a id="plfa_plfa-part3-Denotational-4716" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Denotational-4722" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-4724" href="../Denotational/#plfa_plfa-part3-Denotational-4711" class="Bound">v′</a> <a id="plfa_plfa-part3-Denotational-4727" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-4729" href="../Denotational/#plfa_plfa-part3-Denotational-4707" class="Bound">v</a>
    <a id="plfa_plfa-part3-Denotational-4735" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-4737" href="../Denotational/#plfa_plfa-part3-Denotational-4709" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-4739" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-4741" href="../Denotational/#plfa_plfa-part3-Denotational-4714" class="Bound">w′</a>
      <a id="plfa_plfa-part3-Denotational-4750" class="Comment">-------------------</a>
    <a id="plfa_plfa-part3-Denotational-4774" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-4776" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-4777" href="../Denotational/#plfa_plfa-part3-Denotational-4707" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-4779" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-4781" href="../Denotational/#plfa_plfa-part3-Denotational-4709" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-4782" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-4784" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-4786" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-4787" href="../Denotational/#plfa_plfa-part3-Denotational-4711" class="Bound">v′</a> <a id="plfa_plfa-part3-Denotational-4790" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-4792" href="../Denotational/#plfa_plfa-part3-Denotational-4714" class="Bound">w′</a><a id="plfa_plfa-part3-Denotational-4794" class="Symbol">)</a>

  <a id="plfa_plfa-part3-Denotational-_⊑_.⊑-dist"></a><a id="plfa_plfa-part3-Denotational-4799" href="../Denotational/#plfa_plfa-part3-Denotational-4799" class="InductiveConstructor">⊑-dist</a> <a id="plfa_plfa-part3-Denotational-4806" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-4808" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-4810" href="../Denotational/#plfa_plfa-part3-Denotational-4810" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-4812" href="../Denotational/#plfa_plfa-part3-Denotational-4812" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-4814" href="../Denotational/#plfa_plfa-part3-Denotational-4814" class="Bound">w′</a><a id="plfa_plfa-part3-Denotational-4816" class="Symbol">}</a>
      <a id="plfa_plfa-part3-Denotational-4824" class="Comment">---------------------------------</a>
    <a id="plfa_plfa-part3-Denotational-4862" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-4864" href="../Denotational/#plfa_plfa-part3-Denotational-4810" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-4866" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-4868" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-4869" href="../Denotational/#plfa_plfa-part3-Denotational-4812" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-4871" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-4873" href="../Denotational/#plfa_plfa-part3-Denotational-4814" class="Bound">w′</a><a id="plfa_plfa-part3-Denotational-4875" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-4877" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-4879" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-4880" href="../Denotational/#plfa_plfa-part3-Denotational-4810" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-4882" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-4884" href="../Denotational/#plfa_plfa-part3-Denotational-4812" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-4885" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-4887" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-4889" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-4890" href="../Denotational/#plfa_plfa-part3-Denotational-4810" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-4892" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-4894" href="../Denotational/#plfa_plfa-part3-Denotational-4814" class="Bound">w′</a><a id="plfa_plfa-part3-Denotational-4896" class="Symbol">)</a>
</pre><p>The first five rules are straightforward. The rule <code>⊑-fun</code> captures when it is OK to match a higher-order argument <code>v′ ↦ w′</code> to a table entry whose input is <code>v ↦ w</code>. Considering a call to the higher-order argument. It is OK to pass a larger argument than expected, so <code>v</code> can be larger than <code>v′</code>. Also, it is OK to disregard some of the output, so <code>w</code> can be smaller than <code>w′</code>. The rule <code>⊑-dist</code> says that if you have two entries for the same input, then you can combine them into a single entry and joins the two outputs.</p><p>The <code>⊑</code> relation is reflexive.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-⊑-refl"></a><a id="plfa_plfa-part3-Denotational-5469" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Denotational-5476" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-5478" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-5480" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-5481" href="../Denotational/#plfa_plfa-part3-Denotational-5481" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-5482" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-5484" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-5486" href="../Denotational/#plfa_plfa-part3-Denotational-5481" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-5488" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-5490" href="../Denotational/#plfa_plfa-part3-Denotational-5481" class="Bound">v</a>
<a id="plfa_plfa-part3-Denotational-5492" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Denotational-5499" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-5500" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Denotational-5501" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-5503" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-5505" href="../Denotational/#plfa_plfa-part3-Denotational-4370" class="InductiveConstructor">⊑-bot</a>
<a id="plfa_plfa-part3-Denotational-5511" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Denotational-5518" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-5519" href="../Denotational/#plfa_plfa-part3-Denotational-5519" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-5521" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-5523" href="../Denotational/#plfa_plfa-part3-Denotational-5523" class="Bound">v′</a><a id="plfa_plfa-part3-Denotational-5525" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-5527" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-5529" href="../Denotational/#plfa_plfa-part3-Denotational-4696" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Denotational-5535" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Denotational-5542" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a>
<a id="plfa_plfa-part3-Denotational-5549" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Denotational-5556" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-5557" href="../Denotational/#plfa_plfa-part3-Denotational-5557" class="Bound">v₁</a> <a id="plfa_plfa-part3-Denotational-5560" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-5562" href="../Denotational/#plfa_plfa-part3-Denotational-5562" class="Bound">v₂</a><a id="plfa_plfa-part3-Denotational-5564" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-5566" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-5568" href="../Denotational/#plfa_plfa-part3-Denotational-4395" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Denotational-5577" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-5578" href="../Denotational/#plfa_plfa-part3-Denotational-4479" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Denotational-5588" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Denotational-5594" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-5596" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-5597" href="../Denotational/#plfa_plfa-part3-Denotational-4552" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Denotational-5607" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Denotational-5613" class="Symbol">)</a>
</pre><p>The <code>⊔</code> operation is monotonic with respect to <code>⊑</code>, that is, given two larger values it produces a larger value.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-⊔⊑⊔"></a><a id="plfa_plfa-part3-Denotational-5742" href="../Denotational/#plfa_plfa-part3-Denotational-5742" class="Function">⊔⊑⊔</a> <a id="plfa_plfa-part3-Denotational-5746" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-5748" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-5750" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-5751" href="../Denotational/#plfa_plfa-part3-Denotational-5751" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-5753" href="../Denotational/#plfa_plfa-part3-Denotational-5753" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-5755" href="../Denotational/#plfa_plfa-part3-Denotational-5755" class="Bound">v′</a> <a id="plfa_plfa-part3-Denotational-5758" href="../Denotational/#plfa_plfa-part3-Denotational-5758" class="Bound">w′</a><a id="plfa_plfa-part3-Denotational-5760" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Denotational-5764" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-5766" href="../Denotational/#plfa_plfa-part3-Denotational-5751" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-5768" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-5770" href="../Denotational/#plfa_plfa-part3-Denotational-5755" class="Bound">v′</a>  <a id="plfa_plfa-part3-Denotational-5774" class="Symbol">→</a>  <a id="plfa_plfa-part3-Denotational-5777" href="../Denotational/#plfa_plfa-part3-Denotational-5753" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-5779" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-5781" href="../Denotational/#plfa_plfa-part3-Denotational-5758" class="Bound">w′</a>
    <a id="plfa_plfa-part3-Denotational-5788" class="Comment">-----------------------</a>
  <a id="plfa_plfa-part3-Denotational-5814" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-5816" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-5817" href="../Denotational/#plfa_plfa-part3-Denotational-5751" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-5819" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-5821" href="../Denotational/#plfa_plfa-part3-Denotational-5753" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-5822" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-5824" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-5826" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-5827" href="../Denotational/#plfa_plfa-part3-Denotational-5755" class="Bound">v′</a> <a id="plfa_plfa-part3-Denotational-5830" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-5832" href="../Denotational/#plfa_plfa-part3-Denotational-5758" class="Bound">w′</a><a id="plfa_plfa-part3-Denotational-5834" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-5836" href="../Denotational/#plfa_plfa-part3-Denotational-5742" class="Function">⊔⊑⊔</a> <a id="plfa_plfa-part3-Denotational-5840" href="../Denotational/#plfa_plfa-part3-Denotational-5840" class="Bound">d₁</a> <a id="plfa_plfa-part3-Denotational-5843" href="../Denotational/#plfa_plfa-part3-Denotational-5843" class="Bound">d₂</a> <a id="plfa_plfa-part3-Denotational-5846" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-5848" href="../Denotational/#plfa_plfa-part3-Denotational-4395" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Denotational-5857" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-5858" href="../Denotational/#plfa_plfa-part3-Denotational-4479" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Denotational-5868" href="../Denotational/#plfa_plfa-part3-Denotational-5840" class="Bound">d₁</a><a id="plfa_plfa-part3-Denotational-5870" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-5872" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-5873" href="../Denotational/#plfa_plfa-part3-Denotational-4552" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Denotational-5883" href="../Denotational/#plfa_plfa-part3-Denotational-5843" class="Bound">d₂</a><a id="plfa_plfa-part3-Denotational-5885" class="Symbol">)</a>
</pre><p>The <code>⊑-dist</code> rule can be used to combine two entries even when the input values are not identical. One can first combine the two inputs using ⊔ and then apply the <code>⊑-dist</code> rule to obtain the following property.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-⊔↦⊔-dist"></a><a id="plfa_plfa-part3-Denotational-6112" href="../Denotational/#plfa_plfa-part3-Denotational-6112" class="Function">⊔↦⊔-dist</a> <a id="plfa_plfa-part3-Denotational-6121" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-6123" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-6125" href="../Denotational/#plfa_plfa-part3-Denotational-6125" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-6127" href="../Denotational/#plfa_plfa-part3-Denotational-6127" class="Bound">v′</a> <a id="plfa_plfa-part3-Denotational-6130" href="../Denotational/#plfa_plfa-part3-Denotational-6130" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-6132" href="../Denotational/#plfa_plfa-part3-Denotational-6132" class="Bound">w′</a> <a id="plfa_plfa-part3-Denotational-6135" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-6137" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-6142" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Denotational-6146" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-6148" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6149" href="../Denotational/#plfa_plfa-part3-Denotational-6125" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-6151" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-6153" href="../Denotational/#plfa_plfa-part3-Denotational-6127" class="Bound">v′</a><a id="plfa_plfa-part3-Denotational-6155" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-6157" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-6159" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6160" href="../Denotational/#plfa_plfa-part3-Denotational-6130" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-6162" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-6164" href="../Denotational/#plfa_plfa-part3-Denotational-6132" class="Bound">w′</a><a id="plfa_plfa-part3-Denotational-6166" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-6168" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-6170" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6171" href="../Denotational/#plfa_plfa-part3-Denotational-6125" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-6173" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-6175" href="../Denotational/#plfa_plfa-part3-Denotational-6130" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-6176" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-6178" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-6180" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6181" href="../Denotational/#plfa_plfa-part3-Denotational-6127" class="Bound">v′</a> <a id="plfa_plfa-part3-Denotational-6184" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-6186" href="../Denotational/#plfa_plfa-part3-Denotational-6132" class="Bound">w′</a><a id="plfa_plfa-part3-Denotational-6188" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-6190" href="../Denotational/#plfa_plfa-part3-Denotational-6112" class="Function">⊔↦⊔-dist</a> <a id="plfa_plfa-part3-Denotational-6199" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-6201" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Denotational-6209" href="../Denotational/#plfa_plfa-part3-Denotational-4799" class="InductiveConstructor">⊑-dist</a> <a id="plfa_plfa-part3-Denotational-6216" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6217" href="../Denotational/#plfa_plfa-part3-Denotational-5742" class="Function">⊔⊑⊔</a> <a id="plfa_plfa-part3-Denotational-6221" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6222" href="../Denotational/#plfa_plfa-part3-Denotational-4696" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Denotational-6228" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6229" href="../Denotational/#plfa_plfa-part3-Denotational-4479" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Denotational-6239" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Denotational-6245" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-6247" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Denotational-6253" class="Symbol">)</a>
                            <a id="plfa_plfa-part3-Denotational-6283" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6284" href="../Denotational/#plfa_plfa-part3-Denotational-4696" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Denotational-6290" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6291" href="../Denotational/#plfa_plfa-part3-Denotational-4552" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Denotational-6301" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Denotational-6307" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-6309" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Denotational-6315" class="Symbol">))</a>
</pre><p>If the join <code>u ⊔ v</code> is less than another value <code>w</code>, then both <code>u</code> and <code>v</code> are less than <code>w</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-⊔⊑-invL"></a><a id="plfa_plfa-part3-Denotational-6513" href="../Denotational/#plfa_plfa-part3-Denotational-6513" class="Function">⊔⊑-invL</a> <a id="plfa_plfa-part3-Denotational-6521" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-6523" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-6525" href="../Denotational/#plfa_plfa-part3-Denotational-6525" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-6527" href="../Denotational/#plfa_plfa-part3-Denotational-6527" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-6529" href="../Denotational/#plfa_plfa-part3-Denotational-6529" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-6531" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-6533" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-6538" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Denotational-6542" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-6544" href="../Denotational/#plfa_plfa-part3-Denotational-6525" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-6546" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-6548" href="../Denotational/#plfa_plfa-part3-Denotational-6527" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-6550" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-6552" href="../Denotational/#plfa_plfa-part3-Denotational-6529" class="Bound">w</a>
    <a id="plfa_plfa-part3-Denotational-6558" class="Comment">---------</a>
  <a id="plfa_plfa-part3-Denotational-6570" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-6572" href="../Denotational/#plfa_plfa-part3-Denotational-6525" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-6574" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-6576" href="../Denotational/#plfa_plfa-part3-Denotational-6529" class="Bound">w</a>
<a id="plfa_plfa-part3-Denotational-6578" href="../Denotational/#plfa_plfa-part3-Denotational-6513" class="Function">⊔⊑-invL</a> <a id="plfa_plfa-part3-Denotational-6586" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6587" href="../Denotational/#plfa_plfa-part3-Denotational-4395" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Denotational-6596" href="../Denotational/#plfa_plfa-part3-Denotational-6596" class="Bound">lt1</a> <a id="plfa_plfa-part3-Denotational-6600" href="../Denotational/#plfa_plfa-part3-Denotational-6600" class="Bound">lt2</a><a id="plfa_plfa-part3-Denotational-6603" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-6605" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-6607" href="../Denotational/#plfa_plfa-part3-Denotational-6596" class="Bound">lt1</a>
<a id="plfa_plfa-part3-Denotational-6611" href="../Denotational/#plfa_plfa-part3-Denotational-6513" class="Function">⊔⊑-invL</a> <a id="plfa_plfa-part3-Denotational-6619" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6620" href="../Denotational/#plfa_plfa-part3-Denotational-4479" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Denotational-6630" href="../Denotational/#plfa_plfa-part3-Denotational-6630" class="Bound">lt</a><a id="plfa_plfa-part3-Denotational-6632" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-6634" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-6636" href="../Denotational/#plfa_plfa-part3-Denotational-4479" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Denotational-6646" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6647" href="../Denotational/#plfa_plfa-part3-Denotational-6513" class="Function">⊔⊑-invL</a> <a id="plfa_plfa-part3-Denotational-6655" href="../Denotational/#plfa_plfa-part3-Denotational-6630" class="Bound">lt</a><a id="plfa_plfa-part3-Denotational-6657" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-6659" href="../Denotational/#plfa_plfa-part3-Denotational-6513" class="Function">⊔⊑-invL</a> <a id="plfa_plfa-part3-Denotational-6667" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6668" href="../Denotational/#plfa_plfa-part3-Denotational-4552" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Denotational-6678" href="../Denotational/#plfa_plfa-part3-Denotational-6678" class="Bound">lt</a><a id="plfa_plfa-part3-Denotational-6680" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-6682" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-6684" href="../Denotational/#plfa_plfa-part3-Denotational-4552" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Denotational-6694" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6695" href="../Denotational/#plfa_plfa-part3-Denotational-6513" class="Function">⊔⊑-invL</a> <a id="plfa_plfa-part3-Denotational-6703" href="../Denotational/#plfa_plfa-part3-Denotational-6678" class="Bound">lt</a><a id="plfa_plfa-part3-Denotational-6705" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-6707" href="../Denotational/#plfa_plfa-part3-Denotational-6513" class="Function">⊔⊑-invL</a> <a id="plfa_plfa-part3-Denotational-6715" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6716" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Denotational-6724" href="../Denotational/#plfa_plfa-part3-Denotational-6724" class="Bound">lt1</a> <a id="plfa_plfa-part3-Denotational-6728" href="../Denotational/#plfa_plfa-part3-Denotational-6728" class="Bound">lt2</a><a id="plfa_plfa-part3-Denotational-6731" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-6733" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-6735" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Denotational-6743" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6744" href="../Denotational/#plfa_plfa-part3-Denotational-6513" class="Function">⊔⊑-invL</a> <a id="plfa_plfa-part3-Denotational-6752" href="../Denotational/#plfa_plfa-part3-Denotational-6724" class="Bound">lt1</a><a id="plfa_plfa-part3-Denotational-6755" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-6757" href="../Denotational/#plfa_plfa-part3-Denotational-6728" class="Bound">lt2</a>

<a id="plfa_plfa-part3-Denotational-⊔⊑-invR"></a><a id="plfa_plfa-part3-Denotational-6762" href="../Denotational/#plfa_plfa-part3-Denotational-6762" class="Function">⊔⊑-invR</a> <a id="plfa_plfa-part3-Denotational-6770" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-6772" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-6774" href="../Denotational/#plfa_plfa-part3-Denotational-6774" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-6776" href="../Denotational/#plfa_plfa-part3-Denotational-6776" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-6778" href="../Denotational/#plfa_plfa-part3-Denotational-6778" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-6780" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-6782" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-6787" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Denotational-6791" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-6793" href="../Denotational/#plfa_plfa-part3-Denotational-6774" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-6795" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-6797" href="../Denotational/#plfa_plfa-part3-Denotational-6776" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-6799" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-6801" href="../Denotational/#plfa_plfa-part3-Denotational-6778" class="Bound">w</a>
    <a id="plfa_plfa-part3-Denotational-6807" class="Comment">---------</a>
  <a id="plfa_plfa-part3-Denotational-6819" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-6821" href="../Denotational/#plfa_plfa-part3-Denotational-6776" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-6823" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-6825" href="../Denotational/#plfa_plfa-part3-Denotational-6778" class="Bound">w</a>
<a id="plfa_plfa-part3-Denotational-6827" href="../Denotational/#plfa_plfa-part3-Denotational-6762" class="Function">⊔⊑-invR</a> <a id="plfa_plfa-part3-Denotational-6835" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6836" href="../Denotational/#plfa_plfa-part3-Denotational-4395" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Denotational-6845" href="../Denotational/#plfa_plfa-part3-Denotational-6845" class="Bound">lt1</a> <a id="plfa_plfa-part3-Denotational-6849" href="../Denotational/#plfa_plfa-part3-Denotational-6849" class="Bound">lt2</a><a id="plfa_plfa-part3-Denotational-6852" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-6854" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-6856" href="../Denotational/#plfa_plfa-part3-Denotational-6849" class="Bound">lt2</a>
<a id="plfa_plfa-part3-Denotational-6860" href="../Denotational/#plfa_plfa-part3-Denotational-6762" class="Function">⊔⊑-invR</a> <a id="plfa_plfa-part3-Denotational-6868" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6869" href="../Denotational/#plfa_plfa-part3-Denotational-4479" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Denotational-6879" href="../Denotational/#plfa_plfa-part3-Denotational-6879" class="Bound">lt</a><a id="plfa_plfa-part3-Denotational-6881" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-6883" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-6885" href="../Denotational/#plfa_plfa-part3-Denotational-4479" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Denotational-6895" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6896" href="../Denotational/#plfa_plfa-part3-Denotational-6762" class="Function">⊔⊑-invR</a> <a id="plfa_plfa-part3-Denotational-6904" href="../Denotational/#plfa_plfa-part3-Denotational-6879" class="Bound">lt</a><a id="plfa_plfa-part3-Denotational-6906" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-6908" href="../Denotational/#plfa_plfa-part3-Denotational-6762" class="Function">⊔⊑-invR</a> <a id="plfa_plfa-part3-Denotational-6916" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6917" href="../Denotational/#plfa_plfa-part3-Denotational-4552" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Denotational-6927" href="../Denotational/#plfa_plfa-part3-Denotational-6927" class="Bound">lt</a><a id="plfa_plfa-part3-Denotational-6929" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-6931" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-6933" href="../Denotational/#plfa_plfa-part3-Denotational-4552" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Denotational-6943" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6944" href="../Denotational/#plfa_plfa-part3-Denotational-6762" class="Function">⊔⊑-invR</a> <a id="plfa_plfa-part3-Denotational-6952" href="../Denotational/#plfa_plfa-part3-Denotational-6927" class="Bound">lt</a><a id="plfa_plfa-part3-Denotational-6954" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-6956" href="../Denotational/#plfa_plfa-part3-Denotational-6762" class="Function">⊔⊑-invR</a> <a id="plfa_plfa-part3-Denotational-6964" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6965" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Denotational-6973" href="../Denotational/#plfa_plfa-part3-Denotational-6973" class="Bound">lt1</a> <a id="plfa_plfa-part3-Denotational-6977" href="../Denotational/#plfa_plfa-part3-Denotational-6977" class="Bound">lt2</a><a id="plfa_plfa-part3-Denotational-6980" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-6982" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-6984" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Denotational-6992" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-6993" href="../Denotational/#plfa_plfa-part3-Denotational-6762" class="Function">⊔⊑-invR</a> <a id="plfa_plfa-part3-Denotational-7001" href="../Denotational/#plfa_plfa-part3-Denotational-6973" class="Bound">lt1</a><a id="plfa_plfa-part3-Denotational-7004" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-7006" href="../Denotational/#plfa_plfa-part3-Denotational-6977" class="Bound">lt2</a>
</pre><h2 id="environments">Environments</h2><p>An environment gives meaning to the free variables in a term by mapping variables to values.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-Env"></a><a id="plfa_plfa-part3-Denotational-7135" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-7139" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-7141" href="../Untyped/#plfa_plfa-part2-Untyped-4161" class="Datatype">Context</a> <a id="plfa_plfa-part3-Denotational-7149" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-7151" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="plfa_plfa-part3-Denotational-7155" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-7159" href="../Denotational/#plfa_plfa-part3-Denotational-7159" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-7161" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-7163" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-7165" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-7166" href="../Denotational/#plfa_plfa-part3-Denotational-7166" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-7168" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-7170" href="../Denotational/#plfa_plfa-part3-Denotational-7159" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-7172" href="../Untyped/#plfa_plfa-part2-Untyped-4688" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Denotational-7174" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Denotational-7175" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-7177" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-7179" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a>
</pre>We have the empty environment, and we can extend an environment.<pre class="Agda"><a id="plfa_plfa-part3-Denotational-`∅"></a><a id="plfa_plfa-part3-Denotational-7263" href="../Denotational/#plfa_plfa-part3-Denotational-7263" class="Function">`∅</a> <a id="plfa_plfa-part3-Denotational-7266" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-7268" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-7272" href="../Untyped/#plfa_plfa-part2-Untyped-4183" class="InductiveConstructor">∅</a>
<a id="plfa_plfa-part3-Denotational-7274" href="../Denotational/#plfa_plfa-part3-Denotational-7263" class="Function">`∅</a> <a id="plfa_plfa-part3-Denotational-7277" class="Symbol">()</a>

<a id="plfa_plfa-part3-Denotational-7281" class="Keyword">infixl</a> <a id="plfa_plfa-part3-Denotational-7288" class="Number">5</a> <a id="plfa_plfa-part3-Denotational-7290" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">_`,_</a>

<a id="plfa_plfa-part3-Denotational-_`,_"></a><a id="plfa_plfa-part3-Denotational-7296" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">_`,_</a> <a id="plfa_plfa-part3-Denotational-7301" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-7303" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-7305" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-7306" href="../Denotational/#plfa_plfa-part3-Denotational-7306" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-7307" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-7309" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-7311" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-7315" href="../Denotational/#plfa_plfa-part3-Denotational-7306" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-7317" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-7319" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-7325" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-7327" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-7331" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-7332" href="../Denotational/#plfa_plfa-part3-Denotational-7306" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-7334" href="../Untyped/#plfa_plfa-part2-Untyped-4199" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-7336" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Denotational-7337" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-7339" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-7340" href="../Denotational/#plfa_plfa-part3-Denotational-7340" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-7342" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Denotational-7345" href="../Denotational/#plfa_plfa-part3-Denotational-7345" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-7346" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-7348" href="../Untyped/#plfa_plfa-part2-Untyped-4724" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Denotational-7350" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-7352" href="../Denotational/#plfa_plfa-part3-Denotational-7345" class="Bound">v</a>
<a id="plfa_plfa-part3-Denotational-7354" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-7355" href="../Denotational/#plfa_plfa-part3-Denotational-7355" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-7357" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Denotational-7360" href="../Denotational/#plfa_plfa-part3-Denotational-7360" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-7361" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-7363" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-7364" href="../Untyped/#plfa_plfa-part2-Untyped-4769" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Denotational-7366" href="../Denotational/#plfa_plfa-part3-Denotational-7366" class="Bound">x</a><a id="plfa_plfa-part3-Denotational-7367" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-7369" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-7371" href="../Denotational/#plfa_plfa-part3-Denotational-7355" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-7373" href="../Denotational/#plfa_plfa-part3-Denotational-7366" class="Bound">x</a>
</pre>We can recover the previous environment from an extended environment, and the last value. Putting them together again takes us back to where we started.<pre class="Agda"><a id="plfa_plfa-part3-Denotational-init"></a><a id="plfa_plfa-part3-Denotational-7541" href="../Denotational/#plfa_plfa-part3-Denotational-7541" class="Function">init</a> <a id="plfa_plfa-part3-Denotational-7546" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-7548" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-7550" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-7551" href="../Denotational/#plfa_plfa-part3-Denotational-7551" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-7552" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-7554" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-7556" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-7560" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-7561" href="../Denotational/#plfa_plfa-part3-Denotational-7551" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-7563" href="../Untyped/#plfa_plfa-part2-Untyped-4199" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-7565" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Denotational-7566" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-7568" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-7570" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-7574" href="../Denotational/#plfa_plfa-part3-Denotational-7551" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Denotational-7576" href="../Denotational/#plfa_plfa-part3-Denotational-7541" class="Function">init</a> <a id="plfa_plfa-part3-Denotational-7581" href="../Denotational/#plfa_plfa-part3-Denotational-7581" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-7583" href="../Denotational/#plfa_plfa-part3-Denotational-7583" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-7585" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-7587" href="../Denotational/#plfa_plfa-part3-Denotational-7581" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-7589" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-7590" href="../Untyped/#plfa_plfa-part2-Untyped-4769" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Denotational-7592" href="../Denotational/#plfa_plfa-part3-Denotational-7583" class="Bound">x</a><a id="plfa_plfa-part3-Denotational-7593" class="Symbol">)</a>

<a id="plfa_plfa-part3-Denotational-last"></a><a id="plfa_plfa-part3-Denotational-7596" href="../Denotational/#plfa_plfa-part3-Denotational-7596" class="Function">last</a> <a id="plfa_plfa-part3-Denotational-7601" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-7603" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-7605" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-7606" href="../Denotational/#plfa_plfa-part3-Denotational-7606" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-7607" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-7609" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-7611" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-7615" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-7616" href="../Denotational/#plfa_plfa-part3-Denotational-7606" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-7618" href="../Untyped/#plfa_plfa-part2-Untyped-4199" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-7620" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Denotational-7621" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-7623" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-7625" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a>
<a id="plfa_plfa-part3-Denotational-7631" href="../Denotational/#plfa_plfa-part3-Denotational-7596" class="Function">last</a> <a id="plfa_plfa-part3-Denotational-7636" href="../Denotational/#plfa_plfa-part3-Denotational-7636" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-7638" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-7640" href="../Denotational/#plfa_plfa-part3-Denotational-7636" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-7642" href="../Untyped/#plfa_plfa-part2-Untyped-4724" class="InductiveConstructor">Z</a>

<a id="plfa_plfa-part3-Denotational-init-last"></a><a id="plfa_plfa-part3-Denotational-7645" href="../Denotational/#plfa_plfa-part3-Denotational-7645" class="Function">init-last</a> <a id="plfa_plfa-part3-Denotational-7655" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-7657" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-7659" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-7660" href="../Denotational/#plfa_plfa-part3-Denotational-7660" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-7661" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-7663" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-7665" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-7666" href="../Denotational/#plfa_plfa-part3-Denotational-7666" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-7668" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-7670" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-7674" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-7675" href="../Denotational/#plfa_plfa-part3-Denotational-7660" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-7677" href="../Untyped/#plfa_plfa-part2-Untyped-4199" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-7679" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Denotational-7680" class="Symbol">))</a> <a id="plfa_plfa-part3-Denotational-7683" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-7685" href="../Denotational/#plfa_plfa-part3-Denotational-7666" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-7687" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Denotational-7689" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-7690" href="../Denotational/#plfa_plfa-part3-Denotational-7541" class="Function">init</a> <a id="plfa_plfa-part3-Denotational-7695" href="../Denotational/#plfa_plfa-part3-Denotational-7666" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-7697" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Denotational-7700" href="../Denotational/#plfa_plfa-part3-Denotational-7596" class="Function">last</a> <a id="plfa_plfa-part3-Denotational-7705" href="../Denotational/#plfa_plfa-part3-Denotational-7666" class="Bound">γ</a><a id="plfa_plfa-part3-Denotational-7706" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-7708" href="../Denotational/#plfa_plfa-part3-Denotational-7645" class="Function">init-last</a> <a id="plfa_plfa-part3-Denotational-7718" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-7719" href="../Denotational/#plfa_plfa-part3-Denotational-7719" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-7720" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-7722" href="../Denotational/#plfa_plfa-part3-Denotational-7722" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-7724" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-7726" href="../Substitution/#plfa_plfa-part2-Substitution-1855" class="Postulate">extensionality</a> <a id="plfa_plfa-part3-Denotational-7741" href="../Denotational/#plfa_plfa-part3-Denotational-7755" class="Function">lemma</a>
  <a id="plfa_plfa-part3-Denotational-7749" class="Keyword">where</a> <a id="plfa_plfa-part3-Denotational-7755" href="../Denotational/#plfa_plfa-part3-Denotational-7755" class="Function">lemma</a> <a id="plfa_plfa-part3-Denotational-7761" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-7763" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-7765" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-7766" href="../Denotational/#plfa_plfa-part3-Denotational-7766" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-7768" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-7770" href="../Denotational/#plfa_plfa-part3-Denotational-7719" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-7772" href="../Untyped/#plfa_plfa-part2-Untyped-4199" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-7774" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Denotational-7776" href="../Untyped/#plfa_plfa-part2-Untyped-4688" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Denotational-7778" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Denotational-7779" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-7781" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-7783" href="../Denotational/#plfa_plfa-part3-Denotational-7722" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-7785" href="../Denotational/#plfa_plfa-part3-Denotational-7766" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-7787" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Denotational-7789" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-7790" href="../Denotational/#plfa_plfa-part3-Denotational-7541" class="Function">init</a> <a id="plfa_plfa-part3-Denotational-7795" href="../Denotational/#plfa_plfa-part3-Denotational-7722" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-7797" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Denotational-7800" href="../Denotational/#plfa_plfa-part3-Denotational-7596" class="Function">last</a> <a id="plfa_plfa-part3-Denotational-7805" href="../Denotational/#plfa_plfa-part3-Denotational-7722" class="Bound">γ</a><a id="plfa_plfa-part3-Denotational-7806" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-7808" href="../Denotational/#plfa_plfa-part3-Denotational-7766" class="Bound">x</a>
        <a id="plfa_plfa-part3-Denotational-7818" href="../Denotational/#plfa_plfa-part3-Denotational-7755" class="Function">lemma</a> <a id="plfa_plfa-part3-Denotational-7824" href="../Untyped/#plfa_plfa-part2-Untyped-4724" class="InductiveConstructor">Z</a>      <a id="plfa_plfa-part3-Denotational-7831" class="Symbol">=</a>  <a id="plfa_plfa-part3-Denotational-7834" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
        <a id="plfa_plfa-part3-Denotational-7847" href="../Denotational/#plfa_plfa-part3-Denotational-7755" class="Function">lemma</a> <a id="plfa_plfa-part3-Denotational-7853" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-7854" href="../Untyped/#plfa_plfa-part2-Untyped-4769" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Denotational-7856" href="../Denotational/#plfa_plfa-part3-Denotational-7856" class="Bound">x</a><a id="plfa_plfa-part3-Denotational-7857" class="Symbol">)</a>  <a id="plfa_plfa-part3-Denotational-7860" class="Symbol">=</a>  <a id="plfa_plfa-part3-Denotational-7863" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre><p>We extend the <code>⊑</code> relation point-wise to environments with the following definition.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-_`⊑_"></a><a id="plfa_plfa-part3-Denotational-7967" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">_`⊑_</a> <a id="plfa_plfa-part3-Denotational-7972" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-7974" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-7976" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-7977" href="../Denotational/#plfa_plfa-part3-Denotational-7977" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-7978" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-7980" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-7982" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-7986" href="../Denotational/#plfa_plfa-part3-Denotational-7977" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-7988" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-7990" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-7994" href="../Denotational/#plfa_plfa-part3-Denotational-7977" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-7996" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-7998" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="plfa_plfa-part3-Denotational-8002" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">_`⊑_</a> <a id="plfa_plfa-part3-Denotational-8007" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-8008" href="../Denotational/#plfa_plfa-part3-Denotational-8008" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-8009" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-8011" href="../Denotational/#plfa_plfa-part3-Denotational-8011" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-8013" href="../Denotational/#plfa_plfa-part3-Denotational-8013" class="Bound">δ</a> <a id="plfa_plfa-part3-Denotational-8015" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-8017" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-8019" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-8020" href="../Denotational/#plfa_plfa-part3-Denotational-8020" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-8022" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-8024" href="../Denotational/#plfa_plfa-part3-Denotational-8008" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-8026" href="../Untyped/#plfa_plfa-part2-Untyped-4688" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Denotational-8028" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Denotational-8029" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-8031" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-8033" href="../Denotational/#plfa_plfa-part3-Denotational-8011" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-8035" href="../Denotational/#plfa_plfa-part3-Denotational-8020" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-8037" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-8039" href="../Denotational/#plfa_plfa-part3-Denotational-8013" class="Bound">δ</a> <a id="plfa_plfa-part3-Denotational-8041" href="../Denotational/#plfa_plfa-part3-Denotational-8020" class="Bound">x</a>
</pre><p>We define a bottom environment and a join operator on environments, which takes the point-wise join of their values.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-`⊥"></a><a id="plfa_plfa-part3-Denotational-8174" href="../Denotational/#plfa_plfa-part3-Denotational-8174" class="Function">`⊥</a> <a id="plfa_plfa-part3-Denotational-8177" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-8179" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-8181" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-8182" href="../Denotational/#plfa_plfa-part3-Denotational-8182" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-8183" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-8185" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-8187" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-8191" href="../Denotational/#plfa_plfa-part3-Denotational-8182" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Denotational-8193" href="../Denotational/#plfa_plfa-part3-Denotational-8174" class="Function">`⊥</a> <a id="plfa_plfa-part3-Denotational-8196" href="../Denotational/#plfa_plfa-part3-Denotational-8196" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-8198" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-8200" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a>

<a id="plfa_plfa-part3-Denotational-_`⊔_"></a><a id="plfa_plfa-part3-Denotational-8203" href="../Denotational/#plfa_plfa-part3-Denotational-8203" class="Function Operator">_`⊔_</a> <a id="plfa_plfa-part3-Denotational-8208" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-8210" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-8212" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-8213" href="../Denotational/#plfa_plfa-part3-Denotational-8213" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-8214" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-8216" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-8218" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-8222" href="../Denotational/#plfa_plfa-part3-Denotational-8213" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-8224" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-8226" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-8230" href="../Denotational/#plfa_plfa-part3-Denotational-8213" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-8232" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-8234" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-8238" href="../Denotational/#plfa_plfa-part3-Denotational-8213" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Denotational-8240" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-8241" href="../Denotational/#plfa_plfa-part3-Denotational-8241" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-8243" href="../Denotational/#plfa_plfa-part3-Denotational-8203" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Denotational-8246" href="../Denotational/#plfa_plfa-part3-Denotational-8246" class="Bound">δ</a><a id="plfa_plfa-part3-Denotational-8247" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-8249" href="../Denotational/#plfa_plfa-part3-Denotational-8249" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-8251" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-8253" href="../Denotational/#plfa_plfa-part3-Denotational-8241" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-8255" href="../Denotational/#plfa_plfa-part3-Denotational-8249" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-8257" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-8259" href="../Denotational/#plfa_plfa-part3-Denotational-8246" class="Bound">δ</a> <a id="plfa_plfa-part3-Denotational-8261" href="../Denotational/#plfa_plfa-part3-Denotational-8249" class="Bound">x</a>
</pre><p>The <code>⊑-refl</code>, <code>⊑-conj-R1</code>, and <code>⊑-conj-R2</code> rules lift to environments. So the join of two environments <code>γ</code> and <code>δ</code> is greater than the first environment <code>γ</code> or the second environment <code>δ</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-`⊑-refl"></a><a id="plfa_plfa-part3-Denotational-8466" href="../Denotational/#plfa_plfa-part3-Denotational-8466" class="Function">`⊑-refl</a> <a id="plfa_plfa-part3-Denotational-8474" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-8476" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-8478" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-8479" href="../Denotational/#plfa_plfa-part3-Denotational-8479" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-8480" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-8482" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-8483" href="../Denotational/#plfa_plfa-part3-Denotational-8483" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-8485" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-8487" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-8491" href="../Denotational/#plfa_plfa-part3-Denotational-8479" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-8492" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-8494" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-8496" href="../Denotational/#plfa_plfa-part3-Denotational-8483" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-8498" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Denotational-8501" href="../Denotational/#plfa_plfa-part3-Denotational-8483" class="Bound">γ</a>
<a id="plfa_plfa-part3-Denotational-8503" href="../Denotational/#plfa_plfa-part3-Denotational-8466" class="Function">`⊑-refl</a> <a id="plfa_plfa-part3-Denotational-8511" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-8512" href="../Denotational/#plfa_plfa-part3-Denotational-8512" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-8513" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-8515" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-8516" href="../Denotational/#plfa_plfa-part3-Denotational-8516" class="Bound">γ</a><a id="plfa_plfa-part3-Denotational-8517" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-8519" href="../Denotational/#plfa_plfa-part3-Denotational-8519" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-8521" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-8523" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Denotational-8530" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-8531" href="../Denotational/#plfa_plfa-part3-Denotational-8516" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-8533" href="../Denotational/#plfa_plfa-part3-Denotational-8519" class="Bound">x</a><a id="plfa_plfa-part3-Denotational-8534" class="Symbol">}</a>

<a id="plfa_plfa-part3-Denotational-⊑-env-conj-R1"></a><a id="plfa_plfa-part3-Denotational-8537" href="../Denotational/#plfa_plfa-part3-Denotational-8537" class="Function">⊑-env-conj-R1</a> <a id="plfa_plfa-part3-Denotational-8551" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-8553" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-8555" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-8556" href="../Denotational/#plfa_plfa-part3-Denotational-8556" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-8557" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-8559" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-8561" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-8562" href="../Denotational/#plfa_plfa-part3-Denotational-8562" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-8564" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-8566" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-8570" href="../Denotational/#plfa_plfa-part3-Denotational-8556" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-8571" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-8573" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-8575" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-8576" href="../Denotational/#plfa_plfa-part3-Denotational-8576" class="Bound">δ</a> <a id="plfa_plfa-part3-Denotational-8578" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-8580" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-8584" href="../Denotational/#plfa_plfa-part3-Denotational-8556" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-8585" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-8587" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-8589" href="../Denotational/#plfa_plfa-part3-Denotational-8562" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-8591" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Denotational-8594" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-8595" href="../Denotational/#plfa_plfa-part3-Denotational-8562" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-8597" href="../Denotational/#plfa_plfa-part3-Denotational-8203" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Denotational-8600" href="../Denotational/#plfa_plfa-part3-Denotational-8576" class="Bound">δ</a><a id="plfa_plfa-part3-Denotational-8601" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-8603" href="../Denotational/#plfa_plfa-part3-Denotational-8537" class="Function">⊑-env-conj-R1</a> <a id="plfa_plfa-part3-Denotational-8617" href="../Denotational/#plfa_plfa-part3-Denotational-8617" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-8619" href="../Denotational/#plfa_plfa-part3-Denotational-8619" class="Bound">δ</a> <a id="plfa_plfa-part3-Denotational-8621" href="../Denotational/#plfa_plfa-part3-Denotational-8621" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-8623" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-8625" href="../Denotational/#plfa_plfa-part3-Denotational-4479" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Denotational-8635" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a>

<a id="plfa_plfa-part3-Denotational-⊑-env-conj-R2"></a><a id="plfa_plfa-part3-Denotational-8643" href="../Denotational/#plfa_plfa-part3-Denotational-8643" class="Function">⊑-env-conj-R2</a> <a id="plfa_plfa-part3-Denotational-8657" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-8659" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-8661" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-8662" href="../Denotational/#plfa_plfa-part3-Denotational-8662" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-8663" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-8665" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-8667" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-8668" href="../Denotational/#plfa_plfa-part3-Denotational-8668" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-8670" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-8672" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-8676" href="../Denotational/#plfa_plfa-part3-Denotational-8662" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-8677" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-8679" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-8681" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-8682" href="../Denotational/#plfa_plfa-part3-Denotational-8682" class="Bound">δ</a> <a id="plfa_plfa-part3-Denotational-8684" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-8686" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-8690" href="../Denotational/#plfa_plfa-part3-Denotational-8662" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-8691" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-8693" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-8695" href="../Denotational/#plfa_plfa-part3-Denotational-8682" class="Bound">δ</a> <a id="plfa_plfa-part3-Denotational-8697" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Denotational-8700" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-8701" href="../Denotational/#plfa_plfa-part3-Denotational-8668" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-8703" href="../Denotational/#plfa_plfa-part3-Denotational-8203" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Denotational-8706" href="../Denotational/#plfa_plfa-part3-Denotational-8682" class="Bound">δ</a><a id="plfa_plfa-part3-Denotational-8707" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-8709" href="../Denotational/#plfa_plfa-part3-Denotational-8643" class="Function">⊑-env-conj-R2</a> <a id="plfa_plfa-part3-Denotational-8723" href="../Denotational/#plfa_plfa-part3-Denotational-8723" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-8725" href="../Denotational/#plfa_plfa-part3-Denotational-8725" class="Bound">δ</a> <a id="plfa_plfa-part3-Denotational-8727" href="../Denotational/#plfa_plfa-part3-Denotational-8727" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-8729" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-8731" href="../Denotational/#plfa_plfa-part3-Denotational-4552" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Denotational-8741" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a>
</pre><h2 id="denotational-semantics">Denotational Semantics</h2><p>We define the semantics with a judgment of the form <code>ρ ⊢ M ↓ v</code>, where <code>ρ</code> is the environment, <code>M</code> the program, and <code>v</code> is a result value. For readers familiar with big-step semantics, this notation will feel quite natural, but don’t let the similarity fool you. There are subtle but important differences! So here is the definition of the semantics, which we discuss in detail in the following paragraphs.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-9197" class="Keyword">infix</a> <a id="plfa_plfa-part3-Denotational-9203" class="Number">3</a> <a id="plfa_plfa-part3-Denotational-9205" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">_⊢_↓_</a>

<a id="plfa_plfa-part3-Denotational-9212" class="Keyword">data</a> <a id="plfa_plfa-part3-Denotational-_⊢_↓_"></a><a id="plfa_plfa-part3-Denotational-9217" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">_⊢_↓_</a> <a id="plfa_plfa-part3-Denotational-9223" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-9225" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-9227" href="../Denotational/#plfa_plfa-part3-Denotational-9227" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-9228" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-9230" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-9232" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-9236" href="../Denotational/#plfa_plfa-part3-Denotational-9227" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-9238" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-9240" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-9241" href="../Denotational/#plfa_plfa-part3-Denotational-9227" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-9243" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-9245" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Denotational-9246" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-9248" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-9250" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-9256" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-9258" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#326" class="Primitive">Set</a> <a id="plfa_plfa-part3-Denotational-9262" class="Keyword">where</a>

  <a id="plfa_plfa-part3-Denotational-_⊢_↓_.var"></a><a id="plfa_plfa-part3-Denotational-9271" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Denotational-9275" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-9277" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-9279" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-9280" href="../Denotational/#plfa_plfa-part3-Denotational-9280" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-9281" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-9283" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-9284" href="../Denotational/#plfa_plfa-part3-Denotational-9284" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-9286" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-9288" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-9292" href="../Denotational/#plfa_plfa-part3-Denotational-9280" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-9293" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-9295" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-9296" href="../Denotational/#plfa_plfa-part3-Denotational-9296" class="Bound">x</a><a id="plfa_plfa-part3-Denotational-9297" class="Symbol">}</a>
      <a id="plfa_plfa-part3-Denotational-9305" class="Comment">---------------</a>
    <a id="plfa_plfa-part3-Denotational-9325" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-9327" href="../Denotational/#plfa_plfa-part3-Denotational-9284" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-9329" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-9331" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-9332" href="../Untyped/#plfa_plfa-part2-Untyped-5768" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Denotational-9334" href="../Denotational/#plfa_plfa-part3-Denotational-9296" class="Bound">x</a><a id="plfa_plfa-part3-Denotational-9335" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-9337" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-9339" href="../Denotational/#plfa_plfa-part3-Denotational-9284" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-9341" href="../Denotational/#plfa_plfa-part3-Denotational-9296" class="Bound">x</a>

  <a id="plfa_plfa-part3-Denotational-_⊢_↓_.↦-elim"></a><a id="plfa_plfa-part3-Denotational-9346" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Denotational-9353" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-9355" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-9357" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-9358" href="../Denotational/#plfa_plfa-part3-Denotational-9358" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-9359" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-9361" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-9362" href="../Denotational/#plfa_plfa-part3-Denotational-9362" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-9364" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-9366" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-9370" href="../Denotational/#plfa_plfa-part3-Denotational-9358" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-9371" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-9373" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-9374" href="../Denotational/#plfa_plfa-part3-Denotational-9374" class="Bound">L</a> <a id="plfa_plfa-part3-Denotational-9376" href="../Denotational/#plfa_plfa-part3-Denotational-9376" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-9378" href="../Denotational/#plfa_plfa-part3-Denotational-9378" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-9380" href="../Denotational/#plfa_plfa-part3-Denotational-9380" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-9381" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Denotational-9387" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-9389" href="../Denotational/#plfa_plfa-part3-Denotational-9362" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-9391" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-9393" href="../Denotational/#plfa_plfa-part3-Denotational-9374" class="Bound">L</a> <a id="plfa_plfa-part3-Denotational-9395" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-9397" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-9398" href="../Denotational/#plfa_plfa-part3-Denotational-9378" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-9400" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-9402" href="../Denotational/#plfa_plfa-part3-Denotational-9380" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-9403" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Denotational-9409" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-9411" href="../Denotational/#plfa_plfa-part3-Denotational-9362" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-9413" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-9415" href="../Denotational/#plfa_plfa-part3-Denotational-9376" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-9417" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-9419" href="../Denotational/#plfa_plfa-part3-Denotational-9378" class="Bound">v</a>
      <a id="plfa_plfa-part3-Denotational-9427" class="Comment">---------------</a>
    <a id="plfa_plfa-part3-Denotational-9447" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-9449" href="../Denotational/#plfa_plfa-part3-Denotational-9362" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-9451" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-9453" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-9454" href="../Denotational/#plfa_plfa-part3-Denotational-9374" class="Bound">L</a> <a id="plfa_plfa-part3-Denotational-9456" href="../Untyped/#plfa_plfa-part2-Untyped-5880" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Denotational-9458" href="../Denotational/#plfa_plfa-part3-Denotational-9376" class="Bound">M</a><a id="plfa_plfa-part3-Denotational-9459" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-9461" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-9463" href="../Denotational/#plfa_plfa-part3-Denotational-9380" class="Bound">w</a>

  <a id="plfa_plfa-part3-Denotational-_⊢_↓_.↦-intro"></a><a id="plfa_plfa-part3-Denotational-9468" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Denotational-9476" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-9478" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-9480" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-9481" href="../Denotational/#plfa_plfa-part3-Denotational-9481" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-9482" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-9484" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-9485" href="../Denotational/#plfa_plfa-part3-Denotational-9485" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-9487" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-9489" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-9493" href="../Denotational/#plfa_plfa-part3-Denotational-9481" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-9494" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-9496" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-9497" href="../Denotational/#plfa_plfa-part3-Denotational-9497" class="Bound">N</a> <a id="plfa_plfa-part3-Denotational-9499" href="../Denotational/#plfa_plfa-part3-Denotational-9499" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-9501" href="../Denotational/#plfa_plfa-part3-Denotational-9501" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-9502" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Denotational-9508" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-9510" href="../Denotational/#plfa_plfa-part3-Denotational-9485" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-9512" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Denotational-9515" href="../Denotational/#plfa_plfa-part3-Denotational-9499" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-9517" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-9519" href="../Denotational/#plfa_plfa-part3-Denotational-9497" class="Bound">N</a> <a id="plfa_plfa-part3-Denotational-9521" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-9523" href="../Denotational/#plfa_plfa-part3-Denotational-9501" class="Bound">w</a>
      <a id="plfa_plfa-part3-Denotational-9531" class="Comment">-------------------</a>
    <a id="plfa_plfa-part3-Denotational-9555" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-9557" href="../Denotational/#plfa_plfa-part3-Denotational-9485" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-9559" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-9561" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-9562" href="../Untyped/#plfa_plfa-part2-Untyped-5820" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Denotational-9564" href="../Denotational/#plfa_plfa-part3-Denotational-9497" class="Bound">N</a><a id="plfa_plfa-part3-Denotational-9565" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-9567" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-9569" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-9570" href="../Denotational/#plfa_plfa-part3-Denotational-9499" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-9572" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-9574" href="../Denotational/#plfa_plfa-part3-Denotational-9501" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-9575" class="Symbol">)</a>

  <a id="plfa_plfa-part3-Denotational-_⊢_↓_.⊥-intro"></a><a id="plfa_plfa-part3-Denotational-9580" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Denotational-9588" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-9590" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-9592" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-9593" href="../Denotational/#plfa_plfa-part3-Denotational-9593" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-9594" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-9596" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-9597" href="../Denotational/#plfa_plfa-part3-Denotational-9597" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-9599" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-9601" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-9605" href="../Denotational/#plfa_plfa-part3-Denotational-9593" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-9606" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-9608" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-9609" href="../Denotational/#plfa_plfa-part3-Denotational-9609" class="Bound">M</a><a id="plfa_plfa-part3-Denotational-9610" class="Symbol">}</a>
      <a id="plfa_plfa-part3-Denotational-9618" class="Comment">---------</a>
    <a id="plfa_plfa-part3-Denotational-9632" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-9634" href="../Denotational/#plfa_plfa-part3-Denotational-9597" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-9636" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-9638" href="../Denotational/#plfa_plfa-part3-Denotational-9609" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-9640" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-9642" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a>

  <a id="plfa_plfa-part3-Denotational-_⊢_↓_.⊔-intro"></a><a id="plfa_plfa-part3-Denotational-9647" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Denotational-9655" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-9657" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-9659" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-9660" href="../Denotational/#plfa_plfa-part3-Denotational-9660" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-9661" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-9663" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-9664" href="../Denotational/#plfa_plfa-part3-Denotational-9664" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-9666" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-9668" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-9672" href="../Denotational/#plfa_plfa-part3-Denotational-9660" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-9673" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-9675" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-9676" href="../Denotational/#plfa_plfa-part3-Denotational-9676" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-9678" href="../Denotational/#plfa_plfa-part3-Denotational-9678" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-9680" href="../Denotational/#plfa_plfa-part3-Denotational-9680" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-9681" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Denotational-9687" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-9689" href="../Denotational/#plfa_plfa-part3-Denotational-9664" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-9691" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-9693" href="../Denotational/#plfa_plfa-part3-Denotational-9676" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-9695" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-9697" href="../Denotational/#plfa_plfa-part3-Denotational-9678" class="Bound">v</a>
    <a id="plfa_plfa-part3-Denotational-9703" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-9705" href="../Denotational/#plfa_plfa-part3-Denotational-9664" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-9707" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-9709" href="../Denotational/#plfa_plfa-part3-Denotational-9676" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-9711" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-9713" href="../Denotational/#plfa_plfa-part3-Denotational-9680" class="Bound">w</a>
      <a id="plfa_plfa-part3-Denotational-9721" class="Comment">---------------</a>
    <a id="plfa_plfa-part3-Denotational-9741" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-9743" href="../Denotational/#plfa_plfa-part3-Denotational-9664" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-9745" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-9747" href="../Denotational/#plfa_plfa-part3-Denotational-9676" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-9749" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-9751" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-9752" href="../Denotational/#plfa_plfa-part3-Denotational-9678" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-9754" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-9756" href="../Denotational/#plfa_plfa-part3-Denotational-9680" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-9757" class="Symbol">)</a>

  <a id="plfa_plfa-part3-Denotational-_⊢_↓_.sub"></a><a id="plfa_plfa-part3-Denotational-9762" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Denotational-9766" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-9768" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-9770" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-9771" href="../Denotational/#plfa_plfa-part3-Denotational-9771" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-9772" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-9774" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-9775" href="../Denotational/#plfa_plfa-part3-Denotational-9775" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-9777" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-9779" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-9783" href="../Denotational/#plfa_plfa-part3-Denotational-9771" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-9784" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-9786" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-9787" href="../Denotational/#plfa_plfa-part3-Denotational-9787" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-9789" href="../Denotational/#plfa_plfa-part3-Denotational-9789" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-9791" href="../Denotational/#plfa_plfa-part3-Denotational-9791" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-9792" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Denotational-9798" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-9800" href="../Denotational/#plfa_plfa-part3-Denotational-9775" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-9802" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-9804" href="../Denotational/#plfa_plfa-part3-Denotational-9787" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-9806" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-9808" href="../Denotational/#plfa_plfa-part3-Denotational-9789" class="Bound">v</a>
    <a id="plfa_plfa-part3-Denotational-9814" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-9816" href="../Denotational/#plfa_plfa-part3-Denotational-9791" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-9818" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-9820" href="../Denotational/#plfa_plfa-part3-Denotational-9789" class="Bound">v</a>
      <a id="plfa_plfa-part3-Denotational-9828" class="Comment">---------</a>
    <a id="plfa_plfa-part3-Denotational-9842" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-9844" href="../Denotational/#plfa_plfa-part3-Denotational-9775" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-9846" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-9848" href="../Denotational/#plfa_plfa-part3-Denotational-9787" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-9850" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-9852" href="../Denotational/#plfa_plfa-part3-Denotational-9791" class="Bound">w</a>
</pre><p>Consider the rule for lambda abstractions, <code>↦-intro</code>. It says that a lambda abstraction results in a single-entry table that maps the input <code>v</code> to the output <code>w</code>, provided that evaluating the body in an environment with <code>v</code> bound to its parameter produces the output <code>w</code>. As a simple example of this rule, we can see that the identity function maps <code>⊥</code> to <code>⊥</code> and also that it maps <code>⊥ ↦ ⊥</code> to <code>⊥ ↦ ⊥</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-id"></a><a id="plfa_plfa-part3-Denotational-10271" href="../Denotational/#plfa_plfa-part3-Denotational-10271" class="Function">id</a> <a id="plfa_plfa-part3-Denotational-10274" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-10276" href="../Untyped/#plfa_plfa-part2-Untyped-4183" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part3-Denotational-10278" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-10280" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a>
<a id="plfa_plfa-part3-Denotational-10282" href="../Denotational/#plfa_plfa-part3-Denotational-10271" class="Function">id</a> <a id="plfa_plfa-part3-Denotational-10285" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-10287" href="../Untyped/#plfa_plfa-part2-Untyped-5820" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Denotational-10289" href="../Untyped/#plfa_plfa-part2-Untyped-6753" class="Function Operator">#</a> <a id="plfa_plfa-part3-Denotational-10291" class="Number">0</a>
</pre><pre class="Agda"><a id="plfa_plfa-part3-Denotational-denot-id1"></a><a id="plfa_plfa-part3-Denotational-10306" href="../Denotational/#plfa_plfa-part3-Denotational-10306" class="Function">denot-id1</a> <a id="plfa_plfa-part3-Denotational-10316" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-10318" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-10320" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-10321" href="../Denotational/#plfa_plfa-part3-Denotational-10321" class="Bound">γ</a><a id="plfa_plfa-part3-Denotational-10322" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-10324" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-10326" href="../Denotational/#plfa_plfa-part3-Denotational-10321" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-10328" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-10330" href="../Denotational/#plfa_plfa-part3-Denotational-10271" class="Function">id</a> <a id="plfa_plfa-part3-Denotational-10333" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-10335" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Denotational-10337" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-10339" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a>
<a id="plfa_plfa-part3-Denotational-10341" href="../Denotational/#plfa_plfa-part3-Denotational-10306" class="Function">denot-id1</a> <a id="plfa_plfa-part3-Denotational-10351" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-10353" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Denotational-10361" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a>

<a id="plfa_plfa-part3-Denotational-denot-id2"></a><a id="plfa_plfa-part3-Denotational-10366" href="../Denotational/#plfa_plfa-part3-Denotational-10366" class="Function">denot-id2</a> <a id="plfa_plfa-part3-Denotational-10376" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-10378" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-10380" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-10381" href="../Denotational/#plfa_plfa-part3-Denotational-10381" class="Bound">γ</a><a id="plfa_plfa-part3-Denotational-10382" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-10384" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-10386" href="../Denotational/#plfa_plfa-part3-Denotational-10381" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-10388" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-10390" href="../Denotational/#plfa_plfa-part3-Denotational-10271" class="Function">id</a> <a id="plfa_plfa-part3-Denotational-10393" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-10395" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-10396" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Denotational-10398" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-10400" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Denotational-10401" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-10403" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-10405" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-10406" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Denotational-10408" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-10410" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Denotational-10411" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-10413" href="../Denotational/#plfa_plfa-part3-Denotational-10366" class="Function">denot-id2</a> <a id="plfa_plfa-part3-Denotational-10423" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-10425" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Denotational-10433" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a>
</pre><p>Of course, we will need tables with many rows to capture the meaning of lambda abstractions. These can be constructed using the <code>⊔-intro</code> rule. If term M (typically a lambda abstraction) can produce both tables <code>v</code> and <code>w</code>, then it produces the combined table <code>v ⊔ w</code>. One can take an operational view of the rules <code>↦-intro</code> and <code>⊔-intro</code> by imagining that when an interpreter first comes to a lambda abstraction, it pre-evaluates the function on a bunch of randomly chosen arguments, using many instances of the rule <code>↦-intro</code>, and then joins them into a big table using many instances of the rule <code>⊔-intro</code>. In the following we show that the identity function produces a table containing both of the previous results, <code>⊥ ↦ ⊥</code> and <code>(⊥ ↦ ⊥) ↦ (⊥ ↦ ⊥)</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-denot-id3"></a><a id="plfa_plfa-part3-Denotational-11205" href="../Denotational/#plfa_plfa-part3-Denotational-11205" class="Function">denot-id3</a> <a id="plfa_plfa-part3-Denotational-11215" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-11217" href="../Denotational/#plfa_plfa-part3-Denotational-7263" class="Function">`∅</a> <a id="plfa_plfa-part3-Denotational-11220" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-11222" href="../Denotational/#plfa_plfa-part3-Denotational-10271" class="Function">id</a> <a id="plfa_plfa-part3-Denotational-11225" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-11227" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-11228" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Denotational-11230" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-11232" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Denotational-11233" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-11235" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-11237" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-11238" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Denotational-11240" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-11242" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Denotational-11243" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-11245" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-11247" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-11248" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Denotational-11250" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-11252" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Denotational-11253" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-11255" href="../Denotational/#plfa_plfa-part3-Denotational-11205" class="Function">denot-id3</a> <a id="plfa_plfa-part3-Denotational-11265" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-11267" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Denotational-11275" href="../Denotational/#plfa_plfa-part3-Denotational-10306" class="Function">denot-id1</a> <a id="plfa_plfa-part3-Denotational-11285" href="../Denotational/#plfa_plfa-part3-Denotational-10366" class="Function">denot-id2</a>
</pre><p>We most often think of the judgment <code>γ ⊢ M ↓ v</code> as taking the environment <code>γ</code> and term <code>M</code> as input, producing the result <code>v</code>. However, it is worth emphasizing that the semantics is a <em>relation</em>. The above results for the identity function show that the same environment and term can be mapped to different results. However, the results for a given <code>γ</code> and <code>M</code> are not <em>too</em> different, they are all finite approximations of the same function. Perhaps a better way of thinking about the judgment <code>γ ⊢ M ↓ v</code> is that the <code>γ</code>, <code>M</code>, and <code>v</code> are all inputs and the semantics either confirms or denies whether <code>v</code> is an accurate partial description of the result of <code>M</code> in environment <code>γ</code>.</p><p>Next we consider the meaning of function application as given by the <code>↦-elim</code> rule. In the premise of the rule we have that <code>L</code> maps <code>v</code> to <code>w</code>. So if <code>M</code> produces <code>v</code>, then the application of <code>L</code> to <code>M</code> produces <code>w</code>.</p><p>As an example of function application and the <code>↦-elim</code> rule, we apply the identity function to itself. Indeed, we have both that <code>∅ ⊢ id ↓ (u ↦ u) ↦ (u ↦ u)</code> and also <code>∅ ⊢ id ↓ (u ↦ u)</code>, so we can apply the rule <code>↦-elim</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-id-app-id"></a><a id="plfa_plfa-part3-Denotational-12438" href="../Denotational/#plfa_plfa-part3-Denotational-12438" class="Function">id-app-id</a> <a id="plfa_plfa-part3-Denotational-12448" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-12450" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-12452" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-12453" href="../Denotational/#plfa_plfa-part3-Denotational-12453" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-12455" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-12457" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-12462" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-12464" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-12466" href="../Denotational/#plfa_plfa-part3-Denotational-7263" class="Function">`∅</a> <a id="plfa_plfa-part3-Denotational-12469" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-12471" href="../Denotational/#plfa_plfa-part3-Denotational-10271" class="Function">id</a> <a id="plfa_plfa-part3-Denotational-12474" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Denotational-12476" href="../Denotational/#plfa_plfa-part3-Denotational-10271" class="Function">id</a> <a id="plfa_plfa-part3-Denotational-12479" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-12481" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-12482" href="../Denotational/#plfa_plfa-part3-Denotational-12453" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-12484" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-12486" href="../Denotational/#plfa_plfa-part3-Denotational-12453" class="Bound">u</a><a id="plfa_plfa-part3-Denotational-12487" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-12489" href="../Denotational/#plfa_plfa-part3-Denotational-12438" class="Function">id-app-id</a> <a id="plfa_plfa-part3-Denotational-12499" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-12500" href="../Denotational/#plfa_plfa-part3-Denotational-12500" class="Bound">u</a><a id="plfa_plfa-part3-Denotational-12501" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-12503" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-12505" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Denotational-12512" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-12513" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Denotational-12521" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Denotational-12524" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-12526" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-12527" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Denotational-12535" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Denotational-12538" class="Symbol">)</a>
</pre><p>Next we revisit the Church numeral two: <code>λ f. λ u. (f (f u))</code>. This function has two parameters: a function <code>f</code> and an arbitrary value <code>u</code>, and it applies <code>f</code> twice. So <code>f</code> must map <code>u</code> to some value, which we’ll name <code>v</code>. Then for the second application, <code>f</code> must map <code>v</code> to some value. Let’s name it <code>w</code>. So the function’s table must include two entries, both <code>u ↦ v</code> and <code>v ↦ w</code>. For each application of the table, we extract the appropriate entry from it using the <code>sub</code> rule. In particular, we use the ⊑-conj-R1 and ⊑-conj-R2 to select <code>u ↦ v</code> and <code>v ↦ w</code>, respectively, from the table <code>u ↦ v ⊔ v ↦ w</code>. So the meaning of twoᶜ is that it takes this table and parameter <code>u</code>, and it returns <code>w</code>. Indeed we derive this as follows.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-denot-twoᶜ"></a><a id="plfa_plfa-part3-Denotational-13288" href="../Denotational/#plfa_plfa-part3-Denotational-13288" class="Function">denot-twoᶜ</a> <a id="plfa_plfa-part3-Denotational-13299" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-13301" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-13303" href="../Denotational/#plfa_plfa-part3-Denotational-13303" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-13305" href="../Denotational/#plfa_plfa-part3-Denotational-13305" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-13307" href="../Denotational/#plfa_plfa-part3-Denotational-13307" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-13309" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-13311" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-13316" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-13318" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-13320" href="../Denotational/#plfa_plfa-part3-Denotational-7263" class="Function">`∅</a> <a id="plfa_plfa-part3-Denotational-13323" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-13325" href="../Untyped/#plfa_plfa-part2-Untyped-6942" class="Function">twoᶜ</a> <a id="plfa_plfa-part3-Denotational-13330" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-13332" class="Symbol">((</a><a id="plfa_plfa-part3-Denotational-13334" href="../Denotational/#plfa_plfa-part3-Denotational-13303" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-13336" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-13338" href="../Denotational/#plfa_plfa-part3-Denotational-13305" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-13340" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-13342" href="../Denotational/#plfa_plfa-part3-Denotational-13305" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-13344" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-13346" href="../Denotational/#plfa_plfa-part3-Denotational-13307" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-13347" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-13349" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-13351" href="../Denotational/#plfa_plfa-part3-Denotational-13303" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-13353" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-13355" href="../Denotational/#plfa_plfa-part3-Denotational-13307" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-13356" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-13358" href="../Denotational/#plfa_plfa-part3-Denotational-13288" class="Function">denot-twoᶜ</a> <a id="plfa_plfa-part3-Denotational-13369" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-13370" href="../Denotational/#plfa_plfa-part3-Denotational-13370" class="Bound">u</a><a id="plfa_plfa-part3-Denotational-13371" class="Symbol">}{</a><a id="plfa_plfa-part3-Denotational-13373" href="../Denotational/#plfa_plfa-part3-Denotational-13373" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-13374" class="Symbol">}{</a><a id="plfa_plfa-part3-Denotational-13376" href="../Denotational/#plfa_plfa-part3-Denotational-13376" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-13377" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-13379" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Denotational-13383" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Denotational-13391" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-13392" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Denotational-13400" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-13401" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Denotational-13408" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-13409" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Denotational-13413" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Denotational-13417" href="../Denotational/#plfa_plfa-part3-Denotational-13459" class="Function">lt1</a><a id="plfa_plfa-part3-Denotational-13420" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-13422" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-13423" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Denotational-13430" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-13431" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Denotational-13435" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Denotational-13439" href="../Denotational/#plfa_plfa-part3-Denotational-13542" class="Function">lt2</a><a id="plfa_plfa-part3-Denotational-13442" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-13444" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Denotational-13447" class="Symbol">)))</a>
  <a id="plfa_plfa-part3-Denotational-13453" class="Keyword">where</a> <a id="plfa_plfa-part3-Denotational-13459" href="../Denotational/#plfa_plfa-part3-Denotational-13459" class="Function">lt1</a> <a id="plfa_plfa-part3-Denotational-13463" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-13465" href="../Denotational/#plfa_plfa-part3-Denotational-13373" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-13467" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-13469" href="../Denotational/#plfa_plfa-part3-Denotational-13376" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-13471" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-13473" href="../Denotational/#plfa_plfa-part3-Denotational-13370" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-13475" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-13477" href="../Denotational/#plfa_plfa-part3-Denotational-13373" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-13479" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-13481" href="../Denotational/#plfa_plfa-part3-Denotational-13373" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-13483" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-13485" href="../Denotational/#plfa_plfa-part3-Denotational-13376" class="Bound">w</a>
        <a id="plfa_plfa-part3-Denotational-13495" href="../Denotational/#plfa_plfa-part3-Denotational-13459" class="Function">lt1</a> <a id="plfa_plfa-part3-Denotational-13499" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-13501" href="../Denotational/#plfa_plfa-part3-Denotational-4552" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Denotational-13511" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-13512" href="../Denotational/#plfa_plfa-part3-Denotational-4696" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Denotational-13518" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Denotational-13525" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Denotational-13531" class="Symbol">)</a>

        <a id="plfa_plfa-part3-Denotational-13542" href="../Denotational/#plfa_plfa-part3-Denotational-13542" class="Function">lt2</a> <a id="plfa_plfa-part3-Denotational-13546" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-13548" href="../Denotational/#plfa_plfa-part3-Denotational-13370" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-13550" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-13552" href="../Denotational/#plfa_plfa-part3-Denotational-13373" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-13554" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-13556" href="../Denotational/#plfa_plfa-part3-Denotational-13370" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-13558" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-13560" href="../Denotational/#plfa_plfa-part3-Denotational-13373" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-13562" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-13564" href="../Denotational/#plfa_plfa-part3-Denotational-13373" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-13566" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-13568" href="../Denotational/#plfa_plfa-part3-Denotational-13376" class="Bound">w</a>
        <a id="plfa_plfa-part3-Denotational-13578" href="../Denotational/#plfa_plfa-part3-Denotational-13542" class="Function">lt2</a> <a id="plfa_plfa-part3-Denotational-13582" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-13584" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-13585" href="../Denotational/#plfa_plfa-part3-Denotational-4479" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Denotational-13595" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-13596" href="../Denotational/#plfa_plfa-part3-Denotational-4696" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Denotational-13602" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Denotational-13609" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Denotational-13615" class="Symbol">))</a>
</pre><p>Next we have a classic example of self application: <code>Δ = λx. (x x)</code>. The input value for <code>x</code> needs to be a table, and it needs to have an entry that maps a smaller version of itself, call it <code>v</code>, to some value <code>w</code>. So the input value looks like <code>v ↦ w ⊔ v</code>. Of course, then the output of <code>Δ</code> is <code>w</code>. The derivation is given below. The first occurrences of <code>x</code> evaluates to <code>v ↦ w</code>, the second occurrence of <code>x</code> evaluates to <code>v</code>, and then the result of the application is <code>w</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-Δ"></a><a id="plfa_plfa-part3-Denotational-14110" href="../Denotational/#plfa_plfa-part3-Denotational-14110" class="Function">Δ</a> <a id="plfa_plfa-part3-Denotational-14112" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-14114" href="../Untyped/#plfa_plfa-part2-Untyped-4183" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part3-Denotational-14116" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-14118" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a>
<a id="plfa_plfa-part3-Denotational-14120" href="../Denotational/#plfa_plfa-part3-Denotational-14110" class="Function">Δ</a> <a id="plfa_plfa-part3-Denotational-14122" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-14124" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-14125" href="../Untyped/#plfa_plfa-part2-Untyped-5820" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Denotational-14127" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-14128" href="../Untyped/#plfa_plfa-part2-Untyped-6753" class="Function Operator">#</a> <a id="plfa_plfa-part3-Denotational-14130" class="Number">0</a><a id="plfa_plfa-part3-Denotational-14131" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-14133" href="../Untyped/#plfa_plfa-part2-Untyped-5880" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Denotational-14135" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-14136" href="../Untyped/#plfa_plfa-part2-Untyped-6753" class="Function Operator">#</a> <a id="plfa_plfa-part3-Denotational-14138" class="Number">0</a><a id="plfa_plfa-part3-Denotational-14139" class="Symbol">))</a>

<a id="plfa_plfa-part3-Denotational-denot-Δ"></a><a id="plfa_plfa-part3-Denotational-14143" href="../Denotational/#plfa_plfa-part3-Denotational-14143" class="Function">denot-Δ</a> <a id="plfa_plfa-part3-Denotational-14151" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-14153" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-14155" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-14156" href="../Denotational/#plfa_plfa-part3-Denotational-14156" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-14158" href="../Denotational/#plfa_plfa-part3-Denotational-14158" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-14159" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-14161" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-14163" href="../Denotational/#plfa_plfa-part3-Denotational-7263" class="Function">`∅</a> <a id="plfa_plfa-part3-Denotational-14166" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-14168" href="../Denotational/#plfa_plfa-part3-Denotational-14110" class="Function">Δ</a> <a id="plfa_plfa-part3-Denotational-14170" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-14172" class="Symbol">((</a><a id="plfa_plfa-part3-Denotational-14174" href="../Denotational/#plfa_plfa-part3-Denotational-14156" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-14176" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-14178" href="../Denotational/#plfa_plfa-part3-Denotational-14158" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-14180" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-14182" href="../Denotational/#plfa_plfa-part3-Denotational-14156" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-14183" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-14185" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-14187" href="../Denotational/#plfa_plfa-part3-Denotational-14158" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-14188" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-14190" href="../Denotational/#plfa_plfa-part3-Denotational-14143" class="Function">denot-Δ</a> <a id="plfa_plfa-part3-Denotational-14198" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-14200" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Denotational-14208" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-14209" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Denotational-14216" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-14217" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Denotational-14221" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Denotational-14225" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-14226" href="../Denotational/#plfa_plfa-part3-Denotational-4479" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Denotational-14236" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Denotational-14242" class="Symbol">))</a>
                          <a id="plfa_plfa-part3-Denotational-14271" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-14272" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Denotational-14276" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Denotational-14280" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-14281" href="../Denotational/#plfa_plfa-part3-Denotational-4552" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Denotational-14291" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Denotational-14297" class="Symbol">)))</a>
</pre><p>One might worry whether this semantics can deal with diverging programs. The <code>⊥</code> value and the <code>⊥-intro</code> rule provide a way to handle them. (The <code>⊥-intro</code> rule is also what enables β reduction on non-terminating arguments.) The classic <code>Ω</code> program is a particularly simple program that diverges. It applies <code>Δ</code> to itself. The semantics assigns to <code>Ω</code> the meaning <code>⊥</code>. There are several ways to derive this, we shall start with one that makes use of the <code>⊔-intro</code> rule. First, <code>denot-Δ</code> tells us that <code>Δ</code> evaluates to <code>((⊥ ↦ ⊥) ⊔ ⊥) ↦ ⊥</code> (choose <code>v₁ = v₂ = ⊥</code>). Next, <code>Δ</code> also evaluates to <code>⊥ ↦ ⊥</code> by use of <code>↦-intro</code> and <code>⊥-intro</code> and to <code>⊥</code> by <code>⊥-intro</code>. As we saw previously, whenever we can show that a program evaluates to two values, we can apply <code>⊔-intro</code> to join them together, so <code>Δ</code> evaluates to <code>(⊥ ↦ ⊥) ⊔ ⊥</code>. This matches the input of the first occurrence of <code>Δ</code>, so we can conclude that the result of the application is <code>⊥</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-Ω"></a><a id="plfa_plfa-part3-Denotational-15256" href="../Denotational/#plfa_plfa-part3-Denotational-15256" class="Function">Ω</a> <a id="plfa_plfa-part3-Denotational-15258" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-15260" href="../Untyped/#plfa_plfa-part2-Untyped-4183" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part3-Denotational-15262" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-15264" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a>
<a id="plfa_plfa-part3-Denotational-15266" href="../Denotational/#plfa_plfa-part3-Denotational-15256" class="Function">Ω</a> <a id="plfa_plfa-part3-Denotational-15268" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-15270" href="../Denotational/#plfa_plfa-part3-Denotational-14110" class="Function">Δ</a> <a id="plfa_plfa-part3-Denotational-15272" href="../Untyped/#plfa_plfa-part2-Untyped-5880" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Denotational-15274" href="../Denotational/#plfa_plfa-part3-Denotational-14110" class="Function">Δ</a>

<a id="plfa_plfa-part3-Denotational-denot-Ω"></a><a id="plfa_plfa-part3-Denotational-15277" href="../Denotational/#plfa_plfa-part3-Denotational-15277" class="Function">denot-Ω</a> <a id="plfa_plfa-part3-Denotational-15285" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-15287" href="../Denotational/#plfa_plfa-part3-Denotational-7263" class="Function">`∅</a> <a id="plfa_plfa-part3-Denotational-15290" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-15292" href="../Denotational/#plfa_plfa-part3-Denotational-15256" class="Function">Ω</a> <a id="plfa_plfa-part3-Denotational-15294" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-15296" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a>
<a id="plfa_plfa-part3-Denotational-15298" href="../Denotational/#plfa_plfa-part3-Denotational-15277" class="Function">denot-Ω</a> <a id="plfa_plfa-part3-Denotational-15306" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-15308" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Denotational-15315" href="../Denotational/#plfa_plfa-part3-Denotational-14143" class="Function">denot-Δ</a> <a id="plfa_plfa-part3-Denotational-15323" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-15324" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Denotational-15332" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-15333" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Denotational-15341" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a><a id="plfa_plfa-part3-Denotational-15348" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-15350" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a><a id="plfa_plfa-part3-Denotational-15357" class="Symbol">)</a>
</pre><p>A shorter derivation of the same result is by just one use of the <code>⊥-intro</code> rule.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-denot-Ω&#39;"></a><a id="plfa_plfa-part3-Denotational-15455" href="../Denotational/#plfa_plfa-part3-Denotational-15455" class="Function">denot-Ω&#39;</a> <a id="plfa_plfa-part3-Denotational-15464" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-15466" href="../Denotational/#plfa_plfa-part3-Denotational-7263" class="Function">`∅</a> <a id="plfa_plfa-part3-Denotational-15469" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-15471" href="../Denotational/#plfa_plfa-part3-Denotational-15256" class="Function">Ω</a> <a id="plfa_plfa-part3-Denotational-15473" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-15475" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a>
<a id="plfa_plfa-part3-Denotational-15477" href="../Denotational/#plfa_plfa-part3-Denotational-15455" class="Function">denot-Ω&#39;</a> <a id="plfa_plfa-part3-Denotational-15486" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-15488" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
</pre><p>Just because one can derive <code>∅ ⊢ M ↓ ⊥</code> for some closed term <code>M</code> doesn’t mean that <code>M</code> necessarily diverges. There may be other derivations that conclude with <code>M</code> producing some more informative value. However, if the only thing that a term evaluates to is <code>⊥</code>, then it indeed diverges.</p><p>An attentive reader may have noticed a disconnect earlier in the way we planned to solve the self-application problem and the actual <code>↦-elim</code> rule for application. We said at the beginning that we would relax the notion of table lookup, allowing an argument to match an input entry if the argument is equal or greater than the input entry. Instead, the <code>↦-elim</code> rule seems to require an exact match. However, because of the <code>sub</code> rule, application really does allow larger arguments.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-↦-elim2"></a><a id="plfa_plfa-part3-Denotational-16284" href="../Denotational/#plfa_plfa-part3-Denotational-16284" class="Function">↦-elim2</a> <a id="plfa_plfa-part3-Denotational-16292" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-16294" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-16296" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-16297" href="../Denotational/#plfa_plfa-part3-Denotational-16297" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-16298" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-16300" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-16301" href="../Denotational/#plfa_plfa-part3-Denotational-16301" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-16303" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-16305" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-16309" href="../Denotational/#plfa_plfa-part3-Denotational-16297" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-16310" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-16312" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-16313" href="../Denotational/#plfa_plfa-part3-Denotational-16313" class="Bound">M₁</a> <a id="plfa_plfa-part3-Denotational-16316" href="../Denotational/#plfa_plfa-part3-Denotational-16316" class="Bound">M₂</a> <a id="plfa_plfa-part3-Denotational-16319" href="../Denotational/#plfa_plfa-part3-Denotational-16319" class="Bound">v₁</a> <a id="plfa_plfa-part3-Denotational-16322" href="../Denotational/#plfa_plfa-part3-Denotational-16322" class="Bound">v₂</a> <a id="plfa_plfa-part3-Denotational-16325" href="../Denotational/#plfa_plfa-part3-Denotational-16325" class="Bound">v₃</a><a id="plfa_plfa-part3-Denotational-16327" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Denotational-16331" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-16333" href="../Denotational/#plfa_plfa-part3-Denotational-16301" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-16335" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-16337" href="../Denotational/#plfa_plfa-part3-Denotational-16313" class="Bound">M₁</a> <a id="plfa_plfa-part3-Denotational-16340" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-16342" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-16343" href="../Denotational/#plfa_plfa-part3-Denotational-16319" class="Bound">v₁</a> <a id="plfa_plfa-part3-Denotational-16346" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-16348" href="../Denotational/#plfa_plfa-part3-Denotational-16325" class="Bound">v₃</a><a id="plfa_plfa-part3-Denotational-16350" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Denotational-16354" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-16356" href="../Denotational/#plfa_plfa-part3-Denotational-16301" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-16358" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-16360" href="../Denotational/#plfa_plfa-part3-Denotational-16316" class="Bound">M₂</a> <a id="plfa_plfa-part3-Denotational-16363" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-16365" href="../Denotational/#plfa_plfa-part3-Denotational-16322" class="Bound">v₂</a>
  <a id="plfa_plfa-part3-Denotational-16370" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-16372" href="../Denotational/#plfa_plfa-part3-Denotational-16319" class="Bound">v₁</a> <a id="plfa_plfa-part3-Denotational-16375" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-16377" href="../Denotational/#plfa_plfa-part3-Denotational-16322" class="Bound">v₂</a>
    <a id="plfa_plfa-part3-Denotational-16384" class="Comment">------------------</a>
  <a id="plfa_plfa-part3-Denotational-16405" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-16407" href="../Denotational/#plfa_plfa-part3-Denotational-16301" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-16409" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-16411" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-16412" href="../Denotational/#plfa_plfa-part3-Denotational-16313" class="Bound">M₁</a> <a id="plfa_plfa-part3-Denotational-16415" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Denotational-16417" href="../Denotational/#plfa_plfa-part3-Denotational-16316" class="Bound">M₂</a><a id="plfa_plfa-part3-Denotational-16419" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-16421" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-16423" href="../Denotational/#plfa_plfa-part3-Denotational-16325" class="Bound">v₃</a>
<a id="plfa_plfa-part3-Denotational-16426" href="../Denotational/#plfa_plfa-part3-Denotational-16284" class="Function">↦-elim2</a> <a id="plfa_plfa-part3-Denotational-16434" href="../Denotational/#plfa_plfa-part3-Denotational-16434" class="Bound">d₁</a> <a id="plfa_plfa-part3-Denotational-16437" href="../Denotational/#plfa_plfa-part3-Denotational-16437" class="Bound">d₂</a> <a id="plfa_plfa-part3-Denotational-16440" href="../Denotational/#plfa_plfa-part3-Denotational-16440" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-16443" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-16445" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Denotational-16452" href="../Denotational/#plfa_plfa-part3-Denotational-16434" class="Bound">d₁</a> <a id="plfa_plfa-part3-Denotational-16455" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-16456" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Denotational-16460" href="../Denotational/#plfa_plfa-part3-Denotational-16437" class="Bound">d₂</a> <a id="plfa_plfa-part3-Denotational-16463" href="../Denotational/#plfa_plfa-part3-Denotational-16440" class="Bound">lt</a><a id="plfa_plfa-part3-Denotational-16465" class="Symbol">)</a>
</pre><h4 id="exercise-denot-plusᶜ-practice">Exercise <code>denot-plusᶜ</code> (practice)</h4><p>What is a denotation for <code>plusᶜ</code>? That is, find a value <code>v</code> (other than <code>⊥</code>) such that <code>∅ ⊢ plusᶜ ↓ v</code>. Also, give the proof of <code>∅ ⊢ plusᶜ ↓ v</code> for your choice of <code>v</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-16689" class="Comment">-- Your code goes here</a>
</pre><h2 id="denotations-and-denotational-equality">Denotations and denotational equality</h2><p>Next we define a notion of denotational equality based on the above semantics. Its statement makes use of an if-and-only-if, which we define as follows.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-_iff_"></a><a id="plfa_plfa-part3-Denotational-16922" href="../Denotational/#plfa_plfa-part3-Denotational-16922" class="Function Operator">_iff_</a> <a id="plfa_plfa-part3-Denotational-16928" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-16930" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#326" class="Primitive">Set</a> <a id="plfa_plfa-part3-Denotational-16934" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-16936" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#326" class="Primitive">Set</a> <a id="plfa_plfa-part3-Denotational-16940" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-16942" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="plfa_plfa-part3-Denotational-16946" href="../Denotational/#plfa_plfa-part3-Denotational-16946" class="Bound">P</a> <a id="plfa_plfa-part3-Denotational-16948" href="../Denotational/#plfa_plfa-part3-Denotational-16922" class="Function Operator">iff</a> <a id="plfa_plfa-part3-Denotational-16952" href="../Denotational/#plfa_plfa-part3-Denotational-16952" class="Bound">Q</a> <a id="plfa_plfa-part3-Denotational-16954" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-16956" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-16957" href="../Denotational/#plfa_plfa-part3-Denotational-16946" class="Bound">P</a> <a id="plfa_plfa-part3-Denotational-16959" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-16961" href="../Denotational/#plfa_plfa-part3-Denotational-16952" class="Bound">Q</a><a id="plfa_plfa-part3-Denotational-16962" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-16964" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Denotational-16966" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-16967" href="../Denotational/#plfa_plfa-part3-Denotational-16952" class="Bound">Q</a> <a id="plfa_plfa-part3-Denotational-16969" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-16971" href="../Denotational/#plfa_plfa-part3-Denotational-16946" class="Bound">P</a><a id="plfa_plfa-part3-Denotational-16972" class="Symbol">)</a>
</pre><p>Another way to view the denotational semantics is as a function that maps a term to a relation from environments to values. That is, the <em>denotation</em> of a term is a relation from environments to values.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-Denotation"></a><a id="plfa_plfa-part3-Denotational-17192" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Denotational-17203" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-17205" href="../Untyped/#plfa_plfa-part2-Untyped-4161" class="Datatype">Context</a> <a id="plfa_plfa-part3-Denotational-17213" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-17215" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#326" class="Primitive">Set₁</a>
<a id="plfa_plfa-part3-Denotational-17220" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Denotational-17231" href="../Denotational/#plfa_plfa-part3-Denotational-17231" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-17233" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-17235" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-17236" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-17240" href="../Denotational/#plfa_plfa-part3-Denotational-17231" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-17242" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-17244" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-17250" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-17252" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#326" class="Primitive">Set</a><a id="plfa_plfa-part3-Denotational-17255" class="Symbol">)</a>
</pre><p>The following function ℰ gives this alternative view of the semantics, which really just amounts to changing the order of the parameters.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-ℰ"></a><a id="plfa_plfa-part3-Denotational-17409" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Denotational-17411" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-17413" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-17415" href="../Denotational/#plfa_plfa-part3-Denotational-17415" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-17416" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-17418" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-17420" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-17421" href="../Denotational/#plfa_plfa-part3-Denotational-17421" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-17423" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-17425" href="../Denotational/#plfa_plfa-part3-Denotational-17415" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-17427" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-17429" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Denotational-17430" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-17432" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-17434" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Denotational-17445" href="../Denotational/#plfa_plfa-part3-Denotational-17415" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Denotational-17447" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Denotational-17449" href="../Denotational/#plfa_plfa-part3-Denotational-17449" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-17451" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-17453" class="Symbol">λ</a> <a id="plfa_plfa-part3-Denotational-17455" href="../Denotational/#plfa_plfa-part3-Denotational-17455" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-17457" href="../Denotational/#plfa_plfa-part3-Denotational-17457" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-17459" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-17461" href="../Denotational/#plfa_plfa-part3-Denotational-17455" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-17463" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-17465" href="../Denotational/#plfa_plfa-part3-Denotational-17449" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-17467" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-17469" href="../Denotational/#plfa_plfa-part3-Denotational-17457" class="Bound">v</a>
</pre><p>In general, two denotations are equal when they produce the same values in the same environment.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-17582" class="Keyword">infix</a> <a id="plfa_plfa-part3-Denotational-17588" class="Number">3</a> <a id="plfa_plfa-part3-Denotational-17590" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">_≃_</a>

<a id="plfa_plfa-part3-Denotational-_≃_"></a><a id="plfa_plfa-part3-Denotational-17595" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">_≃_</a> <a id="plfa_plfa-part3-Denotational-17599" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-17601" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-17603" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-17604" href="../Denotational/#plfa_plfa-part3-Denotational-17604" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-17605" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-17607" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-17609" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-17610" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Denotational-17621" href="../Denotational/#plfa_plfa-part3-Denotational-17604" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-17622" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-17624" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-17626" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-17627" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Denotational-17638" href="../Denotational/#plfa_plfa-part3-Denotational-17604" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-17639" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-17641" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-17643" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="plfa_plfa-part3-Denotational-17647" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-17648" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">_≃_</a> <a id="plfa_plfa-part3-Denotational-17652" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-17653" href="../Denotational/#plfa_plfa-part3-Denotational-17653" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-17654" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-17656" href="../Denotational/#plfa_plfa-part3-Denotational-17656" class="Bound">D₁</a> <a id="plfa_plfa-part3-Denotational-17659" href="../Denotational/#plfa_plfa-part3-Denotational-17659" class="Bound">D₂</a><a id="plfa_plfa-part3-Denotational-17661" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-17663" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-17665" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-17666" href="../Denotational/#plfa_plfa-part3-Denotational-17666" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-17668" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-17670" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-17674" href="../Denotational/#plfa_plfa-part3-Denotational-17653" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-17675" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-17677" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-17679" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-17680" href="../Denotational/#plfa_plfa-part3-Denotational-17680" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-17682" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-17684" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-17689" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-17691" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-17693" href="../Denotational/#plfa_plfa-part3-Denotational-17656" class="Bound">D₁</a> <a id="plfa_plfa-part3-Denotational-17696" href="../Denotational/#plfa_plfa-part3-Denotational-17666" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-17698" href="../Denotational/#plfa_plfa-part3-Denotational-17680" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-17700" href="../Denotational/#plfa_plfa-part3-Denotational-16922" class="Function Operator">iff</a> <a id="plfa_plfa-part3-Denotational-17704" href="../Denotational/#plfa_plfa-part3-Denotational-17659" class="Bound">D₂</a> <a id="plfa_plfa-part3-Denotational-17707" href="../Denotational/#plfa_plfa-part3-Denotational-17666" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-17709" href="../Denotational/#plfa_plfa-part3-Denotational-17680" class="Bound">v</a>
</pre><p>Denotational equality is an equivalence relation.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-≃-refl"></a><a id="plfa_plfa-part3-Denotational-17775" href="../Denotational/#plfa_plfa-part3-Denotational-17775" class="Function">≃-refl</a> <a id="plfa_plfa-part3-Denotational-17782" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-17784" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-17786" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-17787" href="../Denotational/#plfa_plfa-part3-Denotational-17787" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-17789" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-17791" href="../Untyped/#plfa_plfa-part2-Untyped-4161" class="Datatype">Context</a><a id="plfa_plfa-part3-Denotational-17798" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-17800" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-17802" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-17803" href="../Denotational/#plfa_plfa-part3-Denotational-17803" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-17805" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-17807" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Denotational-17818" href="../Denotational/#plfa_plfa-part3-Denotational-17787" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-17819" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Denotational-17823" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-17825" href="../Denotational/#plfa_plfa-part3-Denotational-17803" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-17827" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Denotational-17829" href="../Denotational/#plfa_plfa-part3-Denotational-17803" class="Bound">M</a>
<a id="plfa_plfa-part3-Denotational-17831" href="../Denotational/#plfa_plfa-part3-Denotational-17775" class="Function">≃-refl</a> <a id="plfa_plfa-part3-Denotational-17838" href="../Denotational/#plfa_plfa-part3-Denotational-17838" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-17840" href="../Denotational/#plfa_plfa-part3-Denotational-17840" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-17842" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-17844" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-17846" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Denotational-17849" href="../Denotational/#plfa_plfa-part3-Denotational-17849" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-17851" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-17853" href="../Denotational/#plfa_plfa-part3-Denotational-17849" class="Bound">x</a><a id="plfa_plfa-part3-Denotational-17854" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-17856" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-17858" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Denotational-17861" href="../Denotational/#plfa_plfa-part3-Denotational-17861" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-17863" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-17865" href="../Denotational/#plfa_plfa-part3-Denotational-17861" class="Bound">x</a><a id="plfa_plfa-part3-Denotational-17866" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-17868" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a>

<a id="plfa_plfa-part3-Denotational-≃-sym"></a><a id="plfa_plfa-part3-Denotational-17871" href="../Denotational/#plfa_plfa-part3-Denotational-17871" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Denotational-17877" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-17879" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-17881" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-17882" href="../Denotational/#plfa_plfa-part3-Denotational-17882" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-17884" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-17886" href="../Untyped/#plfa_plfa-part2-Untyped-4161" class="Datatype">Context</a><a id="plfa_plfa-part3-Denotational-17893" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-17895" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-17897" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-17898" href="../Denotational/#plfa_plfa-part3-Denotational-17898" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-17900" href="../Denotational/#plfa_plfa-part3-Denotational-17900" class="Bound">N</a> <a id="plfa_plfa-part3-Denotational-17902" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-17904" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Denotational-17915" href="../Denotational/#plfa_plfa-part3-Denotational-17882" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-17916" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Denotational-17920" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-17922" href="../Denotational/#plfa_plfa-part3-Denotational-17898" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-17924" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Denotational-17926" href="../Denotational/#plfa_plfa-part3-Denotational-17900" class="Bound">N</a>
    <a id="plfa_plfa-part3-Denotational-17932" class="Comment">-----</a>
  <a id="plfa_plfa-part3-Denotational-17940" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-17942" href="../Denotational/#plfa_plfa-part3-Denotational-17900" class="Bound">N</a> <a id="plfa_plfa-part3-Denotational-17944" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Denotational-17946" href="../Denotational/#plfa_plfa-part3-Denotational-17898" class="Bound">M</a>
<a id="plfa_plfa-part3-Denotational-17948" href="../Denotational/#plfa_plfa-part3-Denotational-17871" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Denotational-17954" href="../Denotational/#plfa_plfa-part3-Denotational-17954" class="Bound">eq</a> <a id="plfa_plfa-part3-Denotational-17957" href="../Denotational/#plfa_plfa-part3-Denotational-17957" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-17959" href="../Denotational/#plfa_plfa-part3-Denotational-17959" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-17961" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-17963" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-17965" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-17966" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="plfa_plfa-part3-Denotational-17972" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-17973" href="../Denotational/#plfa_plfa-part3-Denotational-17954" class="Bound">eq</a> <a id="plfa_plfa-part3-Denotational-17976" href="../Denotational/#plfa_plfa-part3-Denotational-17957" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-17978" href="../Denotational/#plfa_plfa-part3-Denotational-17959" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-17979" class="Symbol">))</a> <a id="plfa_plfa-part3-Denotational-17982" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-17984" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-17985" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="plfa_plfa-part3-Denotational-17991" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-17992" href="../Denotational/#plfa_plfa-part3-Denotational-17954" class="Bound">eq</a> <a id="plfa_plfa-part3-Denotational-17995" href="../Denotational/#plfa_plfa-part3-Denotational-17957" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-17997" href="../Denotational/#plfa_plfa-part3-Denotational-17959" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-17998" class="Symbol">))</a> <a id="plfa_plfa-part3-Denotational-18001" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a>

<a id="plfa_plfa-part3-Denotational-≃-trans"></a><a id="plfa_plfa-part3-Denotational-18004" href="../Denotational/#plfa_plfa-part3-Denotational-18004" class="Function">≃-trans</a> <a id="plfa_plfa-part3-Denotational-18012" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-18014" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-18016" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-18017" href="../Denotational/#plfa_plfa-part3-Denotational-18017" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-18019" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-18021" href="../Untyped/#plfa_plfa-part2-Untyped-4161" class="Datatype">Context</a><a id="plfa_plfa-part3-Denotational-18028" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-18030" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-18032" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-18033" href="../Denotational/#plfa_plfa-part3-Denotational-18033" class="Bound">M₁</a> <a id="plfa_plfa-part3-Denotational-18036" href="../Denotational/#plfa_plfa-part3-Denotational-18036" class="Bound">M₂</a> <a id="plfa_plfa-part3-Denotational-18039" href="../Denotational/#plfa_plfa-part3-Denotational-18039" class="Bound">M₃</a> <a id="plfa_plfa-part3-Denotational-18042" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-18044" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Denotational-18055" href="../Denotational/#plfa_plfa-part3-Denotational-18017" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-18056" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Denotational-18060" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-18062" href="../Denotational/#plfa_plfa-part3-Denotational-18033" class="Bound">M₁</a> <a id="plfa_plfa-part3-Denotational-18065" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Denotational-18067" href="../Denotational/#plfa_plfa-part3-Denotational-18036" class="Bound">M₂</a>
  <a id="plfa_plfa-part3-Denotational-18072" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-18074" href="../Denotational/#plfa_plfa-part3-Denotational-18036" class="Bound">M₂</a> <a id="plfa_plfa-part3-Denotational-18077" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Denotational-18079" href="../Denotational/#plfa_plfa-part3-Denotational-18039" class="Bound">M₃</a>
    <a id="plfa_plfa-part3-Denotational-18086" class="Comment">-------</a>
  <a id="plfa_plfa-part3-Denotational-18096" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-18098" href="../Denotational/#plfa_plfa-part3-Denotational-18033" class="Bound">M₁</a> <a id="plfa_plfa-part3-Denotational-18101" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Denotational-18103" href="../Denotational/#plfa_plfa-part3-Denotational-18039" class="Bound">M₃</a>
<a id="plfa_plfa-part3-Denotational-18106" href="../Denotational/#plfa_plfa-part3-Denotational-18004" class="Function">≃-trans</a> <a id="plfa_plfa-part3-Denotational-18114" href="../Denotational/#plfa_plfa-part3-Denotational-18114" class="Bound">eq1</a> <a id="plfa_plfa-part3-Denotational-18118" href="../Denotational/#plfa_plfa-part3-Denotational-18118" class="Bound">eq2</a> <a id="plfa_plfa-part3-Denotational-18122" href="../Denotational/#plfa_plfa-part3-Denotational-18122" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-18124" href="../Denotational/#plfa_plfa-part3-Denotational-18124" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-18126" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-18128" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-18130" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Denotational-18133" href="../Denotational/#plfa_plfa-part3-Denotational-18133" class="Bound">z</a> <a id="plfa_plfa-part3-Denotational-18135" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-18137" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="plfa_plfa-part3-Denotational-18143" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-18144" href="../Denotational/#plfa_plfa-part3-Denotational-18118" class="Bound">eq2</a> <a id="plfa_plfa-part3-Denotational-18148" href="../Denotational/#plfa_plfa-part3-Denotational-18122" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-18150" href="../Denotational/#plfa_plfa-part3-Denotational-18124" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-18151" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-18153" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-18154" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="plfa_plfa-part3-Denotational-18160" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-18161" href="../Denotational/#plfa_plfa-part3-Denotational-18114" class="Bound">eq1</a> <a id="plfa_plfa-part3-Denotational-18165" href="../Denotational/#plfa_plfa-part3-Denotational-18122" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-18167" href="../Denotational/#plfa_plfa-part3-Denotational-18124" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-18168" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-18170" href="../Denotational/#plfa_plfa-part3-Denotational-18133" class="Bound">z</a><a id="plfa_plfa-part3-Denotational-18171" class="Symbol">))</a> <a id="plfa_plfa-part3-Denotational-18174" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a>
                        <a id="plfa_plfa-part3-Denotational-18200" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Denotational-18203" href="../Denotational/#plfa_plfa-part3-Denotational-18203" class="Bound">z</a> <a id="plfa_plfa-part3-Denotational-18205" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-18207" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="plfa_plfa-part3-Denotational-18213" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-18214" href="../Denotational/#plfa_plfa-part3-Denotational-18114" class="Bound">eq1</a> <a id="plfa_plfa-part3-Denotational-18218" href="../Denotational/#plfa_plfa-part3-Denotational-18122" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-18220" href="../Denotational/#plfa_plfa-part3-Denotational-18124" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-18221" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-18223" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-18224" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="plfa_plfa-part3-Denotational-18230" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-18231" href="../Denotational/#plfa_plfa-part3-Denotational-18118" class="Bound">eq2</a> <a id="plfa_plfa-part3-Denotational-18235" href="../Denotational/#plfa_plfa-part3-Denotational-18122" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-18237" href="../Denotational/#plfa_plfa-part3-Denotational-18124" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-18238" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-18240" href="../Denotational/#plfa_plfa-part3-Denotational-18203" class="Bound">z</a><a id="plfa_plfa-part3-Denotational-18241" class="Symbol">))</a> <a id="plfa_plfa-part3-Denotational-18244" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a>
</pre><p>Two terms <code>M</code> and <code>N</code> are denotational equal when their denotations are equal, that is, <code>ℰ M ≃ ℰ N</code>.</p><p>The following submodule introduces equational reasoning for the <code>≃</code> relation.</p><pre class="Agda">
<a id="plfa_plfa-part3-Denotational-18441" class="Keyword">module</a> <a id="plfa_plfa-part3-Denotational-≃-Reasoning"></a><a id="plfa_plfa-part3-Denotational-18448" href="../Denotational/#plfa_plfa-part3-Denotational-18448" class="Module">≃-Reasoning</a> <a id="plfa_plfa-part3-Denotational-18460" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-18461" href="../Denotational/#plfa_plfa-part3-Denotational-18461" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-18463" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-18465" href="../Untyped/#plfa_plfa-part2-Untyped-4161" class="Datatype">Context</a><a id="plfa_plfa-part3-Denotational-18472" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-18474" class="Keyword">where</a>

  <a id="plfa_plfa-part3-Denotational-18483" class="Keyword">infix</a>  <a id="plfa_plfa-part3-Denotational-18490" class="Number">1</a> <a id="plfa_plfa-part3-Denotational-18492" href="../Denotational/#plfa_plfa-part3-Denotational-18540" class="Function Operator">start_</a>
  <a id="plfa_plfa-part3-Denotational-18501" class="Keyword">infixr</a> <a id="plfa_plfa-part3-Denotational-18508" class="Number">2</a> <a id="plfa_plfa-part3-Denotational-18510" href="../Denotational/#plfa_plfa-part3-Denotational-18771" class="Function Operator">_≃⟨⟩_</a> <a id="plfa_plfa-part3-Denotational-18516" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">_≃⟨_⟩_</a>
  <a id="plfa_plfa-part3-Denotational-18525" class="Keyword">infix</a>  <a id="plfa_plfa-part3-Denotational-18532" class="Number">3</a> <a id="plfa_plfa-part3-Denotational-18534" href="../Denotational/#plfa_plfa-part3-Denotational-18878" class="Function Operator">_☐</a>

  <a id="plfa_plfa-part3-Denotational-≃-Reasoning.start_"></a><a id="plfa_plfa-part3-Denotational-18540" href="../Denotational/#plfa_plfa-part3-Denotational-18540" class="Function Operator">start_</a> <a id="plfa_plfa-part3-Denotational-18547" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-18549" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-18551" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-18552" href="../Denotational/#plfa_plfa-part3-Denotational-18552" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-18554" href="../Denotational/#plfa_plfa-part3-Denotational-18554" class="Bound">y</a> <a id="plfa_plfa-part3-Denotational-18556" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-18558" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Denotational-18569" href="../Denotational/#plfa_plfa-part3-Denotational-18461" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-18570" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Denotational-18576" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-18578" href="../Denotational/#plfa_plfa-part3-Denotational-18552" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-18580" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Denotational-18582" href="../Denotational/#plfa_plfa-part3-Denotational-18554" class="Bound">y</a>
      <a id="plfa_plfa-part3-Denotational-18590" class="Comment">-----</a>
    <a id="plfa_plfa-part3-Denotational-18600" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-18602" href="../Denotational/#plfa_plfa-part3-Denotational-18552" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-18604" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Denotational-18606" href="../Denotational/#plfa_plfa-part3-Denotational-18554" class="Bound">y</a>
  <a id="plfa_plfa-part3-Denotational-18610" href="../Denotational/#plfa_plfa-part3-Denotational-18540" class="Function Operator">start</a> <a id="plfa_plfa-part3-Denotational-18616" href="../Denotational/#plfa_plfa-part3-Denotational-18616" class="Bound">x≃y</a>  <a id="plfa_plfa-part3-Denotational-18621" class="Symbol">=</a>  <a id="plfa_plfa-part3-Denotational-18624" href="../Denotational/#plfa_plfa-part3-Denotational-18616" class="Bound">x≃y</a>

  <a id="plfa_plfa-part3-Denotational-≃-Reasoning._≃⟨_⟩_"></a><a id="plfa_plfa-part3-Denotational-18631" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">_≃⟨_⟩_</a> <a id="plfa_plfa-part3-Denotational-18638" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-18640" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-18642" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-18643" href="../Denotational/#plfa_plfa-part3-Denotational-18643" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-18645" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-18647" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Denotational-18658" href="../Denotational/#plfa_plfa-part3-Denotational-18461" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-18659" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-18661" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-18662" href="../Denotational/#plfa_plfa-part3-Denotational-18662" class="Bound">y</a> <a id="plfa_plfa-part3-Denotational-18664" href="../Denotational/#plfa_plfa-part3-Denotational-18664" class="Bound">z</a> <a id="plfa_plfa-part3-Denotational-18666" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-18668" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Denotational-18679" href="../Denotational/#plfa_plfa-part3-Denotational-18461" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-18680" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Denotational-18686" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-18688" href="../Denotational/#plfa_plfa-part3-Denotational-18643" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-18690" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Denotational-18692" href="../Denotational/#plfa_plfa-part3-Denotational-18662" class="Bound">y</a>
    <a id="plfa_plfa-part3-Denotational-18698" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-18700" href="../Denotational/#plfa_plfa-part3-Denotational-18662" class="Bound">y</a> <a id="plfa_plfa-part3-Denotational-18702" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Denotational-18704" href="../Denotational/#plfa_plfa-part3-Denotational-18664" class="Bound">z</a>
      <a id="plfa_plfa-part3-Denotational-18712" class="Comment">-----</a>
    <a id="plfa_plfa-part3-Denotational-18722" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-18724" href="../Denotational/#plfa_plfa-part3-Denotational-18643" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-18726" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Denotational-18728" href="../Denotational/#plfa_plfa-part3-Denotational-18664" class="Bound">z</a>
  <a id="plfa_plfa-part3-Denotational-18732" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-18733" href="../Denotational/#plfa_plfa-part3-Denotational-18733" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-18735" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Denotational-18738" href="../Denotational/#plfa_plfa-part3-Denotational-18738" class="Bound">x≃y</a> <a id="plfa_plfa-part3-Denotational-18742" href="../Denotational/#plfa_plfa-part3-Denotational-18631" class="Function Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-18744" href="../Denotational/#plfa_plfa-part3-Denotational-18744" class="Bound">y≃z</a><a id="plfa_plfa-part3-Denotational-18747" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-18749" class="Symbol">=</a>  <a id="plfa_plfa-part3-Denotational-18752" href="../Denotational/#plfa_plfa-part3-Denotational-18004" class="Function">≃-trans</a> <a id="plfa_plfa-part3-Denotational-18760" href="../Denotational/#plfa_plfa-part3-Denotational-18738" class="Bound">x≃y</a> <a id="plfa_plfa-part3-Denotational-18764" href="../Denotational/#plfa_plfa-part3-Denotational-18744" class="Bound">y≃z</a>

  <a id="plfa_plfa-part3-Denotational-≃-Reasoning._≃⟨⟩_"></a><a id="plfa_plfa-part3-Denotational-18771" href="../Denotational/#plfa_plfa-part3-Denotational-18771" class="Function Operator">_≃⟨⟩_</a> <a id="plfa_plfa-part3-Denotational-18777" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-18779" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-18781" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-18782" href="../Denotational/#plfa_plfa-part3-Denotational-18782" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-18784" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-18786" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Denotational-18797" href="../Denotational/#plfa_plfa-part3-Denotational-18461" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-18798" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-18800" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-18801" href="../Denotational/#plfa_plfa-part3-Denotational-18801" class="Bound">y</a> <a id="plfa_plfa-part3-Denotational-18803" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-18805" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Denotational-18816" href="../Denotational/#plfa_plfa-part3-Denotational-18461" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-18817" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Denotational-18823" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-18825" href="../Denotational/#plfa_plfa-part3-Denotational-18782" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-18827" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Denotational-18829" href="../Denotational/#plfa_plfa-part3-Denotational-18801" class="Bound">y</a>
      <a id="plfa_plfa-part3-Denotational-18837" class="Comment">-----</a>
    <a id="plfa_plfa-part3-Denotational-18847" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-18849" href="../Denotational/#plfa_plfa-part3-Denotational-18782" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-18851" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Denotational-18853" href="../Denotational/#plfa_plfa-part3-Denotational-18801" class="Bound">y</a>
  <a id="plfa_plfa-part3-Denotational-18857" href="../Denotational/#plfa_plfa-part3-Denotational-18857" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-18859" href="../Denotational/#plfa_plfa-part3-Denotational-18771" class="Function Operator">≃⟨⟩</a> <a id="plfa_plfa-part3-Denotational-18863" href="../Denotational/#plfa_plfa-part3-Denotational-18863" class="Bound">x≃y</a>  <a id="plfa_plfa-part3-Denotational-18868" class="Symbol">=</a>  <a id="plfa_plfa-part3-Denotational-18871" href="../Denotational/#plfa_plfa-part3-Denotational-18863" class="Bound">x≃y</a>

  <a id="plfa_plfa-part3-Denotational-≃-Reasoning._☐"></a><a id="plfa_plfa-part3-Denotational-18878" href="../Denotational/#plfa_plfa-part3-Denotational-18878" class="Function Operator">_☐</a> <a id="plfa_plfa-part3-Denotational-18881" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-18883" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-18885" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-18886" href="../Denotational/#plfa_plfa-part3-Denotational-18886" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-18888" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-18890" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Denotational-18901" href="../Denotational/#plfa_plfa-part3-Denotational-18461" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-18902" class="Symbol">)</a>
      <a id="plfa_plfa-part3-Denotational-18910" class="Comment">-----</a>
    <a id="plfa_plfa-part3-Denotational-18920" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-18922" href="../Denotational/#plfa_plfa-part3-Denotational-18886" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-18924" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Denotational-18926" href="../Denotational/#plfa_plfa-part3-Denotational-18886" class="Bound">x</a>
  <a id="plfa_plfa-part3-Denotational-18930" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-18931" href="../Denotational/#plfa_plfa-part3-Denotational-18931" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-18933" href="../Denotational/#plfa_plfa-part3-Denotational-18878" class="Function Operator">☐</a><a id="plfa_plfa-part3-Denotational-18934" class="Symbol">)</a>  <a id="plfa_plfa-part3-Denotational-18937" class="Symbol">=</a>  <a id="plfa_plfa-part3-Denotational-18940" href="../Denotational/#plfa_plfa-part3-Denotational-17775" class="Function">≃-refl</a>
</pre><h2 id="road-map-for-the-following-chapters">Road map for the following chapters</h2><p>The subsequent chapters prove that the denotational semantics has several desirable properties. First, we prove that the semantics is compositional, i.e., that the denotation of a term is a function of the denotations of its subterms. To do this we shall prove equations of the following shape.</p><pre><code>ℰ (` x) ≃ ...
ℰ (ƛ M) ≃ ... ℰ M ...
ℰ (M · N) ≃ ... ℰ M ... ℰ N ...</code></pre><p>The compositionality property is not trivial because the semantics we have defined includes three rules that are not syntax directed: <code>⊥-intro</code>, <code>⊔-intro</code>, and <code>sub</code>. The above equations suggest that the denotational semantics can be defined as a recursive function, and indeed, we give such a definition and prove that it is equivalent to ℰ.</p><p>Next we investigate whether the denotational semantics and the reduction semantics are equivalent. Recall that the job of a language semantics is to describe the observable behavior of a given program <code>M</code>. For the lambda calculus there are several choices that one can make, but they usually boil down to a single bit of information:</p><ul><li>divergence: the program <code>M</code> executes forever.</li><li>termination: the program <code>M</code> halts.</li></ul><p>We can characterize divergence and termination in terms of reduction.</p><ul><li>divergence: <code>¬ (M —↠ ƛ N)</code> for any term <code>N</code>.</li><li>termination: <code>M —↠ ƛ N</code> for some term <code>N</code>.</li></ul><p>We can also characterize divergence and termination using denotations.</p><ul><li>divergence: <code>¬ (∅ ⊢ M ↓ v ↦ w)</code> for any <code>v</code> and <code>w</code>.</li><li>termination: <code>∅ ⊢ M ↓ v ↦ w</code> for some <code>v</code> and <code>w</code>.</li></ul><p>Alternatively, we can use the denotation function <code>ℰ</code>.</p><ul><li>divergence: <code>¬ (ℰ M ≃ ℰ (ƛ N))</code> for any term <code>N</code>.</li><li>termination: <code>ℰ M ≃ ℰ (ƛ N)</code> for some term <code>N</code>.</li></ul><p>So the question is whether the reduction semantics and denotational semantics are equivalent.</p><pre><code>(∃ N. M —↠ ƛ N)  iff  (∃ N. ℰ M ≃ ℰ (ƛ N))</code></pre><p>We address each direction of the equivalence in the second and third chapters. In the second chapter we prove that reduction to a lambda abstraction implies denotational equality to a lambda abstraction. This property is called the <em>soundness</em> in the literature.</p><pre><code>M —↠ ƛ N  implies  ℰ M ≃ ℰ (ƛ N)</code></pre><p>In the third chapter we prove that denotational equality to a lambda abstraction implies reduction to a lambda abstraction. This property is called <em>adequacy</em> in the literature.</p><pre><code>ℰ M ≃ ℰ (ƛ N)  implies M —↠ ƛ N′ for some N′</code></pre><p>The fourth chapter applies the results of the three preceding chapters (compositionality, soundness, and adequacy) to prove that denotational equality implies a property called <em>contextual equivalence</em>. This property is important because it justifies the use of denotational equality in proving the correctness of program transformations such as performance optimizations.</p><p>The proofs of all of these properties rely on some basic results about the denotational semantics, which we establish in the rest of this chapter. We start with some lemmas about renaming, which are quite similar to the renaming lemmas that we have seen in previous chapters. We conclude with a proof of an important inversion lemma for the less-than relation regarding function values.</p><h2 id="renaming-preserves-denotations">Renaming preserves denotations</h2><p>We shall prove that renaming variables, and changing the environment accordingly, preserves the meaning of a term. We generalize the renaming lemma to allow the values in the new environment to be the same or larger than the original values. This generalization is useful in proving that reduction implies denotational equality.</p><p>As before, we need an extension lemma to handle the case where we proceed underneath a lambda abstraction. Suppose that <code>ρ</code> is a renaming that maps variables in <code>γ</code> into variables with equal or larger values in <code>δ</code>. This lemmas says that extending the renaming producing a renaming <code>ext r</code> that maps <code>γ , v</code> to <code>δ , v</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-ext-⊑"></a><a id="plfa_plfa-part3-Denotational-22787" href="../Denotational/#plfa_plfa-part3-Denotational-22787" class="Function">ext-⊑</a> <a id="plfa_plfa-part3-Denotational-22793" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-22795" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-22797" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-22798" href="../Denotational/#plfa_plfa-part3-Denotational-22798" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-22800" href="../Denotational/#plfa_plfa-part3-Denotational-22800" class="Bound">Δ</a> <a id="plfa_plfa-part3-Denotational-22802" href="../Denotational/#plfa_plfa-part3-Denotational-22802" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-22803" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-22805" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-22806" href="../Denotational/#plfa_plfa-part3-Denotational-22806" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-22808" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-22810" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-22814" href="../Denotational/#plfa_plfa-part3-Denotational-22798" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-22815" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-22817" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-22818" href="../Denotational/#plfa_plfa-part3-Denotational-22818" class="Bound">δ</a> <a id="plfa_plfa-part3-Denotational-22820" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-22822" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-22826" href="../Denotational/#plfa_plfa-part3-Denotational-22800" class="Bound">Δ</a><a id="plfa_plfa-part3-Denotational-22827" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Denotational-22831" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-22833" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-22834" href="../Denotational/#plfa_plfa-part3-Denotational-22834" class="Bound">ρ</a> <a id="plfa_plfa-part3-Denotational-22836" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-22838" href="../Substitution/#plfa_plfa-part2-Substitution-2124" class="Function">Rename</a> <a id="plfa_plfa-part3-Denotational-22845" href="../Denotational/#plfa_plfa-part3-Denotational-22798" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-22847" href="../Denotational/#plfa_plfa-part3-Denotational-22800" class="Bound">Δ</a><a id="plfa_plfa-part3-Denotational-22848" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Denotational-22852" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-22854" href="../Denotational/#plfa_plfa-part3-Denotational-22806" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-22856" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Denotational-22859" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-22860" href="../Denotational/#plfa_plfa-part3-Denotational-22818" class="Bound">δ</a> <a id="plfa_plfa-part3-Denotational-22862" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Denotational-22864" href="../Denotational/#plfa_plfa-part3-Denotational-22834" class="Bound">ρ</a><a id="plfa_plfa-part3-Denotational-22865" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Denotational-22871" class="Comment">------------------------------</a>
  <a id="plfa_plfa-part3-Denotational-22904" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-22906" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-22907" href="../Denotational/#plfa_plfa-part3-Denotational-22806" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-22909" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Denotational-22912" href="../Denotational/#plfa_plfa-part3-Denotational-22802" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-22913" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-22915" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Denotational-22918" class="Symbol">((</a><a id="plfa_plfa-part3-Denotational-22920" href="../Denotational/#plfa_plfa-part3-Denotational-22818" class="Bound">δ</a> <a id="plfa_plfa-part3-Denotational-22922" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Denotational-22925" href="../Denotational/#plfa_plfa-part3-Denotational-22802" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-22926" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-22928" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Denotational-22930" href="../Untyped/#plfa_plfa-part2-Untyped-7839" class="Function">ext</a> <a id="plfa_plfa-part3-Denotational-22934" href="../Denotational/#plfa_plfa-part3-Denotational-22834" class="Bound">ρ</a><a id="plfa_plfa-part3-Denotational-22935" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-22937" href="../Denotational/#plfa_plfa-part3-Denotational-22787" class="Function">ext-⊑</a> <a id="plfa_plfa-part3-Denotational-22943" href="../Denotational/#plfa_plfa-part3-Denotational-22943" class="Bound">ρ</a> <a id="plfa_plfa-part3-Denotational-22945" href="../Denotational/#plfa_plfa-part3-Denotational-22945" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-22948" href="../Untyped/#plfa_plfa-part2-Untyped-4724" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Denotational-22950" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-22952" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a>
<a id="plfa_plfa-part3-Denotational-22959" href="../Denotational/#plfa_plfa-part3-Denotational-22787" class="Function">ext-⊑</a> <a id="plfa_plfa-part3-Denotational-22965" href="../Denotational/#plfa_plfa-part3-Denotational-22965" class="Bound">ρ</a> <a id="plfa_plfa-part3-Denotational-22967" href="../Denotational/#plfa_plfa-part3-Denotational-22967" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-22970" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-22971" href="../Untyped/#plfa_plfa-part2-Untyped-4769" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Denotational-22973" href="../Denotational/#plfa_plfa-part3-Denotational-22973" class="Bound">n′</a><a id="plfa_plfa-part3-Denotational-22975" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-22977" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-22979" href="../Denotational/#plfa_plfa-part3-Denotational-22967" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-22982" href="../Denotational/#plfa_plfa-part3-Denotational-22973" class="Bound">n′</a>
</pre><p>We proceed by cases on the de Bruijn index <code>n</code>.</p><ul><li><p>If it is <code>Z</code>, then we just need to show that <code>v ⊑ v</code>, which we have by <code>⊑-refl</code>.</p></li><li><p>If it is <code>S n′</code>, then the goal simplifies to <code>γ n′ ⊑ δ (ρ n′)</code>, which is an instance of the premise.</p></li></ul><p>Now for the renaming lemma. Suppose we have a renaming that maps variables in <code>γ</code> into variables with the same values in <code>δ</code>. If <code>M</code> results in <code>v</code> when evaluated in environment <code>γ</code>, then applying the renaming to <code>M</code> produces a program that results in the same value <code>v</code> when evaluated in <code>δ</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-rename-pres"></a><a id="plfa_plfa-part3-Denotational-23533" href="../Denotational/#plfa_plfa-part3-Denotational-23533" class="Function">rename-pres</a> <a id="plfa_plfa-part3-Denotational-23545" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-23547" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-23549" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-23550" href="../Denotational/#plfa_plfa-part3-Denotational-23550" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-23552" href="../Denotational/#plfa_plfa-part3-Denotational-23552" class="Bound">Δ</a> <a id="plfa_plfa-part3-Denotational-23554" href="../Denotational/#plfa_plfa-part3-Denotational-23554" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-23555" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-23557" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-23558" href="../Denotational/#plfa_plfa-part3-Denotational-23558" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-23560" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-23562" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-23566" href="../Denotational/#plfa_plfa-part3-Denotational-23550" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-23567" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-23569" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-23570" href="../Denotational/#plfa_plfa-part3-Denotational-23570" class="Bound">δ</a> <a id="plfa_plfa-part3-Denotational-23572" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-23574" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-23578" href="../Denotational/#plfa_plfa-part3-Denotational-23552" class="Bound">Δ</a><a id="plfa_plfa-part3-Denotational-23579" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-23581" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-23582" href="../Denotational/#plfa_plfa-part3-Denotational-23582" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-23584" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-23586" href="../Denotational/#plfa_plfa-part3-Denotational-23550" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-23588" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-23590" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Denotational-23591" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Denotational-23595" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-23597" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-23598" href="../Denotational/#plfa_plfa-part3-Denotational-23598" class="Bound">ρ</a> <a id="plfa_plfa-part3-Denotational-23600" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-23602" href="../Substitution/#plfa_plfa-part2-Substitution-2124" class="Function">Rename</a> <a id="plfa_plfa-part3-Denotational-23609" href="../Denotational/#plfa_plfa-part3-Denotational-23550" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-23611" href="../Denotational/#plfa_plfa-part3-Denotational-23552" class="Bound">Δ</a><a id="plfa_plfa-part3-Denotational-23612" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Denotational-23616" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-23618" href="../Denotational/#plfa_plfa-part3-Denotational-23558" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-23620" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Denotational-23623" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-23624" href="../Denotational/#plfa_plfa-part3-Denotational-23570" class="Bound">δ</a> <a id="plfa_plfa-part3-Denotational-23626" href="https://agda.github.io/agda-stdlib/v1.7.1/Function.Base.html#1031" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Denotational-23628" href="../Denotational/#plfa_plfa-part3-Denotational-23598" class="Bound">ρ</a><a id="plfa_plfa-part3-Denotational-23629" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Denotational-23633" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-23635" href="../Denotational/#plfa_plfa-part3-Denotational-23558" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-23637" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-23639" href="../Denotational/#plfa_plfa-part3-Denotational-23582" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-23641" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-23643" href="../Denotational/#plfa_plfa-part3-Denotational-23554" class="Bound">v</a>
    <a id="plfa_plfa-part3-Denotational-23649" class="Comment">---------------------</a>
  <a id="plfa_plfa-part3-Denotational-23673" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-23675" href="../Denotational/#plfa_plfa-part3-Denotational-23570" class="Bound">δ</a> <a id="plfa_plfa-part3-Denotational-23677" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-23679" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-23680" href="../Untyped/#plfa_plfa-part2-Untyped-8231" class="Function">rename</a> <a id="plfa_plfa-part3-Denotational-23687" href="../Denotational/#plfa_plfa-part3-Denotational-23598" class="Bound">ρ</a> <a id="plfa_plfa-part3-Denotational-23689" href="../Denotational/#plfa_plfa-part3-Denotational-23582" class="Bound">M</a><a id="plfa_plfa-part3-Denotational-23690" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-23692" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-23694" href="../Denotational/#plfa_plfa-part3-Denotational-23554" class="Bound">v</a>
<a id="plfa_plfa-part3-Denotational-23696" href="../Denotational/#plfa_plfa-part3-Denotational-23533" class="Function">rename-pres</a> <a id="plfa_plfa-part3-Denotational-23708" href="../Denotational/#plfa_plfa-part3-Denotational-23708" class="Bound">ρ</a> <a id="plfa_plfa-part3-Denotational-23710" href="../Denotational/#plfa_plfa-part3-Denotational-23710" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-23713" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-23714" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Denotational-23718" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-23719" class="Argument">x</a> <a id="plfa_plfa-part3-Denotational-23721" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-23723" href="../Denotational/#plfa_plfa-part3-Denotational-23723" class="Bound">x</a><a id="plfa_plfa-part3-Denotational-23724" class="Symbol">})</a> <a id="plfa_plfa-part3-Denotational-23727" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-23729" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Denotational-23733" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Denotational-23737" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-23738" href="../Denotational/#plfa_plfa-part3-Denotational-23710" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-23741" href="../Denotational/#plfa_plfa-part3-Denotational-23723" class="Bound">x</a><a id="plfa_plfa-part3-Denotational-23742" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-23744" href="../Denotational/#plfa_plfa-part3-Denotational-23533" class="Function">rename-pres</a> <a id="plfa_plfa-part3-Denotational-23756" href="../Denotational/#plfa_plfa-part3-Denotational-23756" class="Bound">ρ</a> <a id="plfa_plfa-part3-Denotational-23758" href="../Denotational/#plfa_plfa-part3-Denotational-23758" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-23761" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-23762" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Denotational-23769" href="../Denotational/#plfa_plfa-part3-Denotational-23769" class="Bound">d</a> <a id="plfa_plfa-part3-Denotational-23771" href="../Denotational/#plfa_plfa-part3-Denotational-23771" class="Bound">d₁</a><a id="plfa_plfa-part3-Denotational-23773" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-23775" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Denotational-23780" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Denotational-23787" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-23788" href="../Denotational/#plfa_plfa-part3-Denotational-23533" class="Function">rename-pres</a> <a id="plfa_plfa-part3-Denotational-23800" href="../Denotational/#plfa_plfa-part3-Denotational-23756" class="Bound">ρ</a> <a id="plfa_plfa-part3-Denotational-23802" href="../Denotational/#plfa_plfa-part3-Denotational-23758" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-23805" href="../Denotational/#plfa_plfa-part3-Denotational-23769" class="Bound">d</a><a id="plfa_plfa-part3-Denotational-23806" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-23808" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-23809" href="../Denotational/#plfa_plfa-part3-Denotational-23533" class="Function">rename-pres</a> <a id="plfa_plfa-part3-Denotational-23821" href="../Denotational/#plfa_plfa-part3-Denotational-23756" class="Bound">ρ</a> <a id="plfa_plfa-part3-Denotational-23823" href="../Denotational/#plfa_plfa-part3-Denotational-23758" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-23826" href="../Denotational/#plfa_plfa-part3-Denotational-23771" class="Bound">d₁</a><a id="plfa_plfa-part3-Denotational-23828" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-23830" href="../Denotational/#plfa_plfa-part3-Denotational-23533" class="Function">rename-pres</a> <a id="plfa_plfa-part3-Denotational-23842" href="../Denotational/#plfa_plfa-part3-Denotational-23842" class="Bound">ρ</a> <a id="plfa_plfa-part3-Denotational-23844" href="../Denotational/#plfa_plfa-part3-Denotational-23844" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-23847" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-23848" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Denotational-23856" href="../Denotational/#plfa_plfa-part3-Denotational-23856" class="Bound">d</a><a id="plfa_plfa-part3-Denotational-23857" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-23859" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Denotational-23864" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Denotational-23872" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-23873" href="../Denotational/#plfa_plfa-part3-Denotational-23533" class="Function">rename-pres</a> <a id="plfa_plfa-part3-Denotational-23885" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-23886" href="../Untyped/#plfa_plfa-part2-Untyped-7839" class="Function">ext</a> <a id="plfa_plfa-part3-Denotational-23890" href="../Denotational/#plfa_plfa-part3-Denotational-23842" class="Bound">ρ</a><a id="plfa_plfa-part3-Denotational-23891" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-23893" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-23894" href="../Denotational/#plfa_plfa-part3-Denotational-22787" class="Function">ext-⊑</a> <a id="plfa_plfa-part3-Denotational-23900" href="../Denotational/#plfa_plfa-part3-Denotational-23842" class="Bound">ρ</a> <a id="plfa_plfa-part3-Denotational-23902" href="../Denotational/#plfa_plfa-part3-Denotational-23844" class="Bound">lt</a><a id="plfa_plfa-part3-Denotational-23904" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-23906" href="../Denotational/#plfa_plfa-part3-Denotational-23856" class="Bound">d</a><a id="plfa_plfa-part3-Denotational-23907" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-23909" href="../Denotational/#plfa_plfa-part3-Denotational-23533" class="Function">rename-pres</a> <a id="plfa_plfa-part3-Denotational-23921" href="../Denotational/#plfa_plfa-part3-Denotational-23921" class="Bound">ρ</a> <a id="plfa_plfa-part3-Denotational-23923" href="../Denotational/#plfa_plfa-part3-Denotational-23923" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-23926" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Denotational-23934" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-23936" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Denotational-23944" href="../Denotational/#plfa_plfa-part3-Denotational-23533" class="Function">rename-pres</a> <a id="plfa_plfa-part3-Denotational-23956" href="../Denotational/#plfa_plfa-part3-Denotational-23956" class="Bound">ρ</a> <a id="plfa_plfa-part3-Denotational-23958" href="../Denotational/#plfa_plfa-part3-Denotational-23958" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-23961" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-23962" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Denotational-23970" href="../Denotational/#plfa_plfa-part3-Denotational-23970" class="Bound">d</a> <a id="plfa_plfa-part3-Denotational-23972" href="../Denotational/#plfa_plfa-part3-Denotational-23972" class="Bound">d₁</a><a id="plfa_plfa-part3-Denotational-23974" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-23976" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Denotational-23981" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Denotational-23989" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-23990" href="../Denotational/#plfa_plfa-part3-Denotational-23533" class="Function">rename-pres</a> <a id="plfa_plfa-part3-Denotational-24002" href="../Denotational/#plfa_plfa-part3-Denotational-23956" class="Bound">ρ</a> <a id="plfa_plfa-part3-Denotational-24004" href="../Denotational/#plfa_plfa-part3-Denotational-23958" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-24007" href="../Denotational/#plfa_plfa-part3-Denotational-23970" class="Bound">d</a><a id="plfa_plfa-part3-Denotational-24008" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-24010" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-24011" href="../Denotational/#plfa_plfa-part3-Denotational-23533" class="Function">rename-pres</a> <a id="plfa_plfa-part3-Denotational-24023" href="../Denotational/#plfa_plfa-part3-Denotational-23956" class="Bound">ρ</a> <a id="plfa_plfa-part3-Denotational-24025" href="../Denotational/#plfa_plfa-part3-Denotational-23958" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-24028" href="../Denotational/#plfa_plfa-part3-Denotational-23972" class="Bound">d₁</a><a id="plfa_plfa-part3-Denotational-24030" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-24032" href="../Denotational/#plfa_plfa-part3-Denotational-23533" class="Function">rename-pres</a> <a id="plfa_plfa-part3-Denotational-24044" href="../Denotational/#plfa_plfa-part3-Denotational-24044" class="Bound">ρ</a> <a id="plfa_plfa-part3-Denotational-24046" href="../Denotational/#plfa_plfa-part3-Denotational-24046" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-24049" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-24050" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Denotational-24054" href="../Denotational/#plfa_plfa-part3-Denotational-24054" class="Bound">d</a> <a id="plfa_plfa-part3-Denotational-24056" href="../Denotational/#plfa_plfa-part3-Denotational-24056" class="Bound">lt′</a><a id="plfa_plfa-part3-Denotational-24059" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-24061" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Denotational-24066" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Denotational-24070" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-24071" href="../Denotational/#plfa_plfa-part3-Denotational-23533" class="Function">rename-pres</a> <a id="plfa_plfa-part3-Denotational-24083" href="../Denotational/#plfa_plfa-part3-Denotational-24044" class="Bound">ρ</a> <a id="plfa_plfa-part3-Denotational-24085" href="../Denotational/#plfa_plfa-part3-Denotational-24046" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-24088" href="../Denotational/#plfa_plfa-part3-Denotational-24054" class="Bound">d</a><a id="plfa_plfa-part3-Denotational-24089" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-24091" href="../Denotational/#plfa_plfa-part3-Denotational-24056" class="Bound">lt′</a>
</pre><p>The proof is by induction on the semantics of <code>M</code>. As you can see, all of the cases are trivial except the cases for variables and lambda.</p><ul><li><p>For a variable <code>x</code>, we make use of the premise to show that <code>γ x ⊑ δ (ρ x)</code>.</p></li><li><p>For a lambda abstraction, the induction hypothesis requires us to extend the renaming. We do so, and use the <code>ext-⊑</code> lemma to show that the extended renaming maps variables to ones with equivalent values.</p></li></ul><h2 id="environment-strengthening-and-identity-renaming">Environment strengthening and identity renaming</h2><p>We shall need a corollary of the renaming lemma that says that replacing the environment with a larger one (a stronger one) does not change whether a term <code>M</code> results in particular value <code>v</code>. In particular, if <code>γ ⊢ M ↓ v</code> and <code>γ ⊑ δ</code>, then <code>δ ⊢ M ↓ v</code>. What does this have to do with renaming? It’s renaming with the identity function. We apply the renaming lemma with the identity renaming, which gives us <code>δ ⊢ rename (λ {A} x → x) M ↓ v</code>, and then we apply the <code>rename-id</code> lemma to obtain <code>δ ⊢ M ↓ v</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-⊑-env"></a><a id="plfa_plfa-part3-Denotational-25106" href="../Denotational/#plfa_plfa-part3-Denotational-25106" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Denotational-25112" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-25114" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-25116" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-25117" href="../Denotational/#plfa_plfa-part3-Denotational-25117" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-25118" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-25120" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-25121" href="../Denotational/#plfa_plfa-part3-Denotational-25121" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-25123" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-25125" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-25129" href="../Denotational/#plfa_plfa-part3-Denotational-25117" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-25130" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-25132" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-25133" href="../Denotational/#plfa_plfa-part3-Denotational-25133" class="Bound">δ</a> <a id="plfa_plfa-part3-Denotational-25135" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-25137" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-25141" href="../Denotational/#plfa_plfa-part3-Denotational-25117" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-25142" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-25144" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-25145" href="../Denotational/#plfa_plfa-part3-Denotational-25145" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-25147" href="../Denotational/#plfa_plfa-part3-Denotational-25147" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-25148" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Denotational-25152" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-25154" href="../Denotational/#plfa_plfa-part3-Denotational-25121" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-25156" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-25158" href="../Denotational/#plfa_plfa-part3-Denotational-25145" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-25160" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-25162" href="../Denotational/#plfa_plfa-part3-Denotational-25147" class="Bound">v</a>
  <a id="plfa_plfa-part3-Denotational-25166" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-25168" href="../Denotational/#plfa_plfa-part3-Denotational-25121" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-25170" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Denotational-25173" href="../Denotational/#plfa_plfa-part3-Denotational-25133" class="Bound">δ</a>
    <a id="plfa_plfa-part3-Denotational-25179" class="Comment">----------</a>
  <a id="plfa_plfa-part3-Denotational-25192" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-25194" href="../Denotational/#plfa_plfa-part3-Denotational-25133" class="Bound">δ</a> <a id="plfa_plfa-part3-Denotational-25196" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-25198" href="../Denotational/#plfa_plfa-part3-Denotational-25145" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-25200" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-25202" href="../Denotational/#plfa_plfa-part3-Denotational-25147" class="Bound">v</a>
<a id="plfa_plfa-part3-Denotational-25204" href="../Denotational/#plfa_plfa-part3-Denotational-25106" class="Function">⊑-env</a><a id="plfa_plfa-part3-Denotational-25209" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-25210" href="../Denotational/#plfa_plfa-part3-Denotational-25210" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-25211" class="Symbol">}{</a><a id="plfa_plfa-part3-Denotational-25213" href="../Denotational/#plfa_plfa-part3-Denotational-25213" class="Bound">γ</a><a id="plfa_plfa-part3-Denotational-25214" class="Symbol">}{</a><a id="plfa_plfa-part3-Denotational-25216" href="../Denotational/#plfa_plfa-part3-Denotational-25216" class="Bound">δ</a><a id="plfa_plfa-part3-Denotational-25217" class="Symbol">}{</a><a id="plfa_plfa-part3-Denotational-25219" href="../Denotational/#plfa_plfa-part3-Denotational-25219" class="Bound">M</a><a id="plfa_plfa-part3-Denotational-25220" class="Symbol">}{</a><a id="plfa_plfa-part3-Denotational-25222" href="../Denotational/#plfa_plfa-part3-Denotational-25222" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-25223" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-25225" href="../Denotational/#plfa_plfa-part3-Denotational-25225" class="Bound">d</a> <a id="plfa_plfa-part3-Denotational-25227" href="../Denotational/#plfa_plfa-part3-Denotational-25227" class="Bound">lt</a>
      <a id="plfa_plfa-part3-Denotational-25236" class="Keyword">with</a> <a id="plfa_plfa-part3-Denotational-25241" href="../Denotational/#plfa_plfa-part3-Denotational-23533" class="Function">rename-pres</a><a id="plfa_plfa-part3-Denotational-25252" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-25253" href="../Denotational/#plfa_plfa-part3-Denotational-25210" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-25254" class="Symbol">}{</a><a id="plfa_plfa-part3-Denotational-25256" href="../Denotational/#plfa_plfa-part3-Denotational-25210" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-25257" class="Symbol">}{</a><a id="plfa_plfa-part3-Denotational-25259" href="../Denotational/#plfa_plfa-part3-Denotational-25222" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-25260" class="Symbol">}{</a><a id="plfa_plfa-part3-Denotational-25262" href="../Denotational/#plfa_plfa-part3-Denotational-25213" class="Bound">γ</a><a id="plfa_plfa-part3-Denotational-25263" class="Symbol">}{</a><a id="plfa_plfa-part3-Denotational-25265" href="../Denotational/#plfa_plfa-part3-Denotational-25216" class="Bound">δ</a><a id="plfa_plfa-part3-Denotational-25266" class="Symbol">}{</a><a id="plfa_plfa-part3-Denotational-25268" href="../Denotational/#plfa_plfa-part3-Denotational-25219" class="Bound">M</a><a id="plfa_plfa-part3-Denotational-25269" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-25271" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Denotational-25274" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-25275" href="../Denotational/#plfa_plfa-part3-Denotational-25275" class="Bound">A</a><a id="plfa_plfa-part3-Denotational-25276" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-25278" href="../Denotational/#plfa_plfa-part3-Denotational-25278" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-25280" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-25282" href="../Denotational/#plfa_plfa-part3-Denotational-25278" class="Bound">x</a><a id="plfa_plfa-part3-Denotational-25283" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-25285" href="../Denotational/#plfa_plfa-part3-Denotational-25227" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-25288" href="../Denotational/#plfa_plfa-part3-Denotational-25225" class="Bound">d</a>
<a id="plfa_plfa-part3-Denotational-25290" class="Symbol">...</a> <a id="plfa_plfa-part3-Denotational-25294" class="Symbol">|</a> <a id="plfa_plfa-part3-Denotational-25296" href="../Denotational/#plfa_plfa-part3-Denotational-25296" class="Bound">δ⊢id[M]↓v</a> <a id="plfa_plfa-part3-Denotational-25306" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Denotational-25314" href="../Substitution/#plfa_plfa-part2-Substitution-17207" class="Function">rename-id</a> <a id="plfa_plfa-part3-Denotational-25324" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-25325" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-25326" class="Symbol">}{</a><a id="plfa_plfa-part3-Denotational-25328" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Denotational-25329" class="Symbol">}{</a><a id="plfa_plfa-part3-Denotational-25331" class="Bound">M</a><a id="plfa_plfa-part3-Denotational-25332" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-25334" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Denotational-25342" href="../Denotational/#plfa_plfa-part3-Denotational-25296" class="Bound">δ⊢id[M]↓v</a>
</pre><p>In the proof that substitution reflects denotations, in the case for lambda abstraction, we use a minor variation of <code>⊑-env</code>, in which just the last element of the environment gets larger.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-up-env"></a><a id="plfa_plfa-part3-Denotational-25555" href="../Denotational/#plfa_plfa-part3-Denotational-25555" class="Function">up-env</a> <a id="plfa_plfa-part3-Denotational-25562" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-25564" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-25566" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-25567" href="../Denotational/#plfa_plfa-part3-Denotational-25567" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-25568" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-25570" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-25571" href="../Denotational/#plfa_plfa-part3-Denotational-25571" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-25573" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-25575" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Denotational-25579" href="../Denotational/#plfa_plfa-part3-Denotational-25567" class="Bound">Γ</a><a id="plfa_plfa-part3-Denotational-25580" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-25582" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-25583" href="../Denotational/#plfa_plfa-part3-Denotational-25583" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-25585" href="../Denotational/#plfa_plfa-part3-Denotational-25585" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-25587" href="../Denotational/#plfa_plfa-part3-Denotational-25587" class="Bound">u₁</a> <a id="plfa_plfa-part3-Denotational-25590" href="../Denotational/#plfa_plfa-part3-Denotational-25590" class="Bound">u₂</a><a id="plfa_plfa-part3-Denotational-25592" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Denotational-25596" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-25598" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-25599" href="../Denotational/#plfa_plfa-part3-Denotational-25571" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-25601" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Denotational-25604" href="../Denotational/#plfa_plfa-part3-Denotational-25587" class="Bound">u₁</a><a id="plfa_plfa-part3-Denotational-25606" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-25608" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-25610" href="../Denotational/#plfa_plfa-part3-Denotational-25583" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-25612" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-25614" href="../Denotational/#plfa_plfa-part3-Denotational-25585" class="Bound">v</a>
  <a id="plfa_plfa-part3-Denotational-25618" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-25620" href="../Denotational/#plfa_plfa-part3-Denotational-25587" class="Bound">u₁</a> <a id="plfa_plfa-part3-Denotational-25623" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-25625" href="../Denotational/#plfa_plfa-part3-Denotational-25590" class="Bound">u₂</a>
    <a id="plfa_plfa-part3-Denotational-25632" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Denotational-25652" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-25654" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-25655" href="../Denotational/#plfa_plfa-part3-Denotational-25571" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-25657" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Denotational-25660" href="../Denotational/#plfa_plfa-part3-Denotational-25590" class="Bound">u₂</a><a id="plfa_plfa-part3-Denotational-25662" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-25664" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-25666" href="../Denotational/#plfa_plfa-part3-Denotational-25583" class="Bound">M</a> <a id="plfa_plfa-part3-Denotational-25668" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Denotational-25670" href="../Denotational/#plfa_plfa-part3-Denotational-25585" class="Bound">v</a>
<a id="plfa_plfa-part3-Denotational-25672" href="../Denotational/#plfa_plfa-part3-Denotational-25555" class="Function">up-env</a> <a id="plfa_plfa-part3-Denotational-25679" href="../Denotational/#plfa_plfa-part3-Denotational-25679" class="Bound">d</a> <a id="plfa_plfa-part3-Denotational-25681" href="../Denotational/#plfa_plfa-part3-Denotational-25681" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-25684" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-25686" href="../Denotational/#plfa_plfa-part3-Denotational-25106" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Denotational-25692" href="../Denotational/#plfa_plfa-part3-Denotational-25679" class="Bound">d</a> <a id="plfa_plfa-part3-Denotational-25694" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-25695" href="../Denotational/#plfa_plfa-part3-Denotational-25716" class="Function">ext-le</a> <a id="plfa_plfa-part3-Denotational-25702" href="../Denotational/#plfa_plfa-part3-Denotational-25681" class="Bound">lt</a><a id="plfa_plfa-part3-Denotational-25704" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Denotational-25708" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Denotational-25716" href="../Denotational/#plfa_plfa-part3-Denotational-25716" class="Function">ext-le</a> <a id="plfa_plfa-part3-Denotational-25723" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-25725" class="Symbol">∀</a> <a id="plfa_plfa-part3-Denotational-25727" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-25728" href="../Denotational/#plfa_plfa-part3-Denotational-25728" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-25730" href="../Denotational/#plfa_plfa-part3-Denotational-25730" class="Bound">u₁</a> <a id="plfa_plfa-part3-Denotational-25733" href="../Denotational/#plfa_plfa-part3-Denotational-25733" class="Bound">u₂</a><a id="plfa_plfa-part3-Denotational-25735" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-25737" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-25739" href="../Denotational/#plfa_plfa-part3-Denotational-25730" class="Bound">u₁</a> <a id="plfa_plfa-part3-Denotational-25742" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-25744" href="../Denotational/#plfa_plfa-part3-Denotational-25733" class="Bound">u₂</a> <a id="plfa_plfa-part3-Denotational-25747" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-25749" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-25750" href="../Denotational/#plfa_plfa-part3-Denotational-25728" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-25752" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Denotational-25755" href="../Denotational/#plfa_plfa-part3-Denotational-25730" class="Bound">u₁</a><a id="plfa_plfa-part3-Denotational-25757" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-25759" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Denotational-25762" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-25763" href="../Denotational/#plfa_plfa-part3-Denotational-25728" class="Bound">γ</a> <a id="plfa_plfa-part3-Denotational-25765" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Denotational-25768" href="../Denotational/#plfa_plfa-part3-Denotational-25733" class="Bound">u₂</a><a id="plfa_plfa-part3-Denotational-25770" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Denotational-25774" href="../Denotational/#plfa_plfa-part3-Denotational-25716" class="Function">ext-le</a> <a id="plfa_plfa-part3-Denotational-25781" href="../Denotational/#plfa_plfa-part3-Denotational-25781" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-25784" href="../Untyped/#plfa_plfa-part2-Untyped-4724" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Denotational-25786" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-25788" href="../Denotational/#plfa_plfa-part3-Denotational-25781" class="Bound">lt</a>
  <a id="plfa_plfa-part3-Denotational-25793" href="../Denotational/#plfa_plfa-part3-Denotational-25716" class="Function">ext-le</a> <a id="plfa_plfa-part3-Denotational-25800" href="../Denotational/#plfa_plfa-part3-Denotational-25800" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-25803" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-25804" href="../Untyped/#plfa_plfa-part2-Untyped-4769" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Denotational-25806" href="../Denotational/#plfa_plfa-part3-Denotational-25806" class="Bound">n</a><a id="plfa_plfa-part3-Denotational-25807" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-25809" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-25811" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a>
</pre><h4 id="exercise-denot-church-recommended">Exercise <code>denot-church</code> (recommended)</h4><p>Church numerals are more general than natural numbers in that they represent paths. A path consists of <code>n</code> edges and <code>n + 1</code> vertices. We store the vertices in a vector of length <code>n + 1</code> in reverse order. The edges in the path map the ith vertex to the <code>i + 1</code> vertex. The following function <code>D^suc</code> (for denotation of successor) constructs a table whose entries are all the edges in the path.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-D^suc"></a><a id="plfa_plfa-part3-Denotational-26270" href="../Denotational/#plfa_plfa-part3-Denotational-26270" class="Function">D^suc</a> <a id="plfa_plfa-part3-Denotational-26276" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-26278" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-26279" href="../Denotational/#plfa_plfa-part3-Denotational-26279" class="Bound">n</a> <a id="plfa_plfa-part3-Denotational-26281" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-26283" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="plfa_plfa-part3-Denotational-26284" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-26286" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-26288" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Vec.Base.html#998" class="Datatype">Vec</a> <a id="plfa_plfa-part3-Denotational-26292" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-26298" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-26299" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part3-Denotational-26303" href="../Denotational/#plfa_plfa-part3-Denotational-26279" class="Bound">n</a><a id="plfa_plfa-part3-Denotational-26304" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-26306" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-26308" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a>
<a id="plfa_plfa-part3-Denotational-26314" href="../Denotational/#plfa_plfa-part3-Denotational-26270" class="Function">D^suc</a> <a id="plfa_plfa-part3-Denotational-26320" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a> <a id="plfa_plfa-part3-Denotational-26325" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-26326" href="../Denotational/#plfa_plfa-part3-Denotational-26326" class="Bound">a[0]</a> <a id="plfa_plfa-part3-Denotational-26331" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Vec.Base.html#1053" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part3-Denotational-26333" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a><a id="plfa_plfa-part3-Denotational-26335" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-26337" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-26339" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a>
<a id="plfa_plfa-part3-Denotational-26341" href="../Denotational/#plfa_plfa-part3-Denotational-26270" class="Function">D^suc</a> <a id="plfa_plfa-part3-Denotational-26347" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-26348" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part3-Denotational-26352" href="../Denotational/#plfa_plfa-part3-Denotational-26352" class="Bound">i</a><a id="plfa_plfa-part3-Denotational-26353" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-26355" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-26356" href="../Denotational/#plfa_plfa-part3-Denotational-26356" class="Bound">a[i+1]</a> <a id="plfa_plfa-part3-Denotational-26363" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Vec.Base.html#1053" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part3-Denotational-26365" href="../Denotational/#plfa_plfa-part3-Denotational-26365" class="Bound">a[i]</a> <a id="plfa_plfa-part3-Denotational-26370" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Vec.Base.html#1053" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part3-Denotational-26372" href="../Denotational/#plfa_plfa-part3-Denotational-26372" class="Bound">ls</a><a id="plfa_plfa-part3-Denotational-26374" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-26376" class="Symbol">=</a>  <a id="plfa_plfa-part3-Denotational-26379" href="../Denotational/#plfa_plfa-part3-Denotational-26365" class="Bound">a[i]</a> <a id="plfa_plfa-part3-Denotational-26384" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-26386" href="../Denotational/#plfa_plfa-part3-Denotational-26356" class="Bound">a[i+1]</a>  <a id="plfa_plfa-part3-Denotational-26394" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a>  <a id="plfa_plfa-part3-Denotational-26397" href="../Denotational/#plfa_plfa-part3-Denotational-26270" class="Function">D^suc</a> <a id="plfa_plfa-part3-Denotational-26403" href="../Denotational/#plfa_plfa-part3-Denotational-26352" class="Bound">i</a> <a id="plfa_plfa-part3-Denotational-26405" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-26406" href="../Denotational/#plfa_plfa-part3-Denotational-26365" class="Bound">a[i]</a> <a id="plfa_plfa-part3-Denotational-26411" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Vec.Base.html#1053" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part3-Denotational-26413" href="../Denotational/#plfa_plfa-part3-Denotational-26372" class="Bound">ls</a><a id="plfa_plfa-part3-Denotational-26415" class="Symbol">)</a>
</pre><p>We use the following auxiliary function to obtain the last element of a non-empty vector. (This formulation is more convenient for our purposes than the one in the Agda standard library.)</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-vec-last"></a><a id="plfa_plfa-part3-Denotational-26619" href="../Denotational/#plfa_plfa-part3-Denotational-26619" class="Function">vec-last</a> <a id="plfa_plfa-part3-Denotational-26628" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-26630" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-26632" href="../Denotational/#plfa_plfa-part3-Denotational-26632" class="Bound">n</a> <a id="plfa_plfa-part3-Denotational-26634" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-26636" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="plfa_plfa-part3-Denotational-26637" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-26639" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-26641" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Vec.Base.html#998" class="Datatype">Vec</a> <a id="plfa_plfa-part3-Denotational-26645" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-26651" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-26652" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part3-Denotational-26656" href="../Denotational/#plfa_plfa-part3-Denotational-26632" class="Bound">n</a><a id="plfa_plfa-part3-Denotational-26657" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-26659" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-26661" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a>
<a id="plfa_plfa-part3-Denotational-26667" href="../Denotational/#plfa_plfa-part3-Denotational-26619" class="Function">vec-last</a> <a id="plfa_plfa-part3-Denotational-26676" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-26677" class="Number">0</a><a id="plfa_plfa-part3-Denotational-26678" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-26680" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-26681" href="../Denotational/#plfa_plfa-part3-Denotational-26681" class="Bound">a</a> <a id="plfa_plfa-part3-Denotational-26683" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Vec.Base.html#1053" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part3-Denotational-26685" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Vec.Base.html#1034" class="InductiveConstructor">[]</a><a id="plfa_plfa-part3-Denotational-26687" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-26689" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-26691" href="../Denotational/#plfa_plfa-part3-Denotational-26681" class="Bound">a</a>
<a id="plfa_plfa-part3-Denotational-26693" href="../Denotational/#plfa_plfa-part3-Denotational-26619" class="Function">vec-last</a> <a id="plfa_plfa-part3-Denotational-26702" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-26703" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part3-Denotational-26707" href="../Denotational/#plfa_plfa-part3-Denotational-26707" class="Bound">n</a><a id="plfa_plfa-part3-Denotational-26708" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-26710" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-26711" href="../Denotational/#plfa_plfa-part3-Denotational-26711" class="Bound">a</a> <a id="plfa_plfa-part3-Denotational-26713" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Vec.Base.html#1053" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part3-Denotational-26715" href="../Denotational/#plfa_plfa-part3-Denotational-26715" class="Bound">b</a> <a id="plfa_plfa-part3-Denotational-26717" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Vec.Base.html#1053" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part3-Denotational-26719" href="../Denotational/#plfa_plfa-part3-Denotational-26719" class="Bound">ls</a><a id="plfa_plfa-part3-Denotational-26721" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-26723" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-26725" href="../Denotational/#plfa_plfa-part3-Denotational-26619" class="Function">vec-last</a> <a id="plfa_plfa-part3-Denotational-26734" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-26735" href="../Denotational/#plfa_plfa-part3-Denotational-26715" class="Bound">b</a> <a id="plfa_plfa-part3-Denotational-26737" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Vec.Base.html#1053" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part3-Denotational-26739" href="../Denotational/#plfa_plfa-part3-Denotational-26719" class="Bound">ls</a><a id="plfa_plfa-part3-Denotational-26741" class="Symbol">)</a>
</pre><p>The function <code>Dᶜ</code> computes the denotation of the nth Church numeral for a given path.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-Dᶜ"></a><a id="plfa_plfa-part3-Denotational-26843" href="../Denotational/#plfa_plfa-part3-Denotational-26843" class="Function">Dᶜ</a> <a id="plfa_plfa-part3-Denotational-26846" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-26848" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-26849" href="../Denotational/#plfa_plfa-part3-Denotational-26849" class="Bound">n</a> <a id="plfa_plfa-part3-Denotational-26851" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-26853" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="plfa_plfa-part3-Denotational-26854" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-26856" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-26858" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Vec.Base.html#998" class="Datatype">Vec</a> <a id="plfa_plfa-part3-Denotational-26862" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-26868" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-26869" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part3-Denotational-26873" href="../Denotational/#plfa_plfa-part3-Denotational-26849" class="Bound">n</a><a id="plfa_plfa-part3-Denotational-26874" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-26876" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-26878" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a>
<a id="plfa_plfa-part3-Denotational-26884" href="../Denotational/#plfa_plfa-part3-Denotational-26843" class="Function">Dᶜ</a> <a id="plfa_plfa-part3-Denotational-26887" href="../Denotational/#plfa_plfa-part3-Denotational-26887" class="Bound">n</a> <a id="plfa_plfa-part3-Denotational-26889" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-26890" href="../Denotational/#plfa_plfa-part3-Denotational-26890" class="Bound">a[n]</a> <a id="plfa_plfa-part3-Denotational-26895" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Vec.Base.html#1053" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part3-Denotational-26897" href="../Denotational/#plfa_plfa-part3-Denotational-26897" class="Bound">ls</a><a id="plfa_plfa-part3-Denotational-26899" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-26901" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-26903" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-26904" href="../Denotational/#plfa_plfa-part3-Denotational-26270" class="Function">D^suc</a> <a id="plfa_plfa-part3-Denotational-26910" href="../Denotational/#plfa_plfa-part3-Denotational-26887" class="Bound">n</a> <a id="plfa_plfa-part3-Denotational-26912" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-26913" href="../Denotational/#plfa_plfa-part3-Denotational-26890" class="Bound">a[n]</a> <a id="plfa_plfa-part3-Denotational-26918" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Vec.Base.html#1053" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part3-Denotational-26920" href="../Denotational/#plfa_plfa-part3-Denotational-26897" class="Bound">ls</a><a id="plfa_plfa-part3-Denotational-26922" class="Symbol">))</a> <a id="plfa_plfa-part3-Denotational-26925" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-26927" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-26928" href="../Denotational/#plfa_plfa-part3-Denotational-26619" class="Function">vec-last</a> <a id="plfa_plfa-part3-Denotational-26937" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-26938" href="../Denotational/#plfa_plfa-part3-Denotational-26890" class="Bound">a[n]</a> <a id="plfa_plfa-part3-Denotational-26943" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Vec.Base.html#1053" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part3-Denotational-26945" href="../Denotational/#plfa_plfa-part3-Denotational-26897" class="Bound">ls</a><a id="plfa_plfa-part3-Denotational-26947" class="Symbol">))</a> <a id="plfa_plfa-part3-Denotational-26950" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-26952" href="../Denotational/#plfa_plfa-part3-Denotational-26890" class="Bound">a[n]</a>
</pre><ul><li><p>The Church numeral for 0 ignores its first argument and returns its second argument, so for the singleton path consisting of just <code>a[0]</code>, its denotation is</p><pre><code>  ⊥ ↦ a[0] ↦ a[0]</code></pre></li><li><p>The Church numeral for <code>suc n</code> takes two arguments: a successor function whose denotation is given by <code>D^suc</code>, and the start of the path (last of the vector). It returns the <code>n + 1</code> vertex in the path.</p><pre><code>  (D^suc (suc n) (a[n+1] ∷ a[n] ∷ ls)) ↦ (vec-last (a[n] ∷ ls)) ↦ a[n+1]</code></pre></li></ul><p>The exercise is to prove that for any path <code>ls</code>, the meaning of the Church numeral <code>n</code> is <code>Dᶜ n ls</code>.</p><p>To facilitate talking about arbitrary Church numerals, the following <code>church</code> function builds the term for the nth Church numeral, using the auxiliary function <code>apply-n</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-apply-n"></a><a id="plfa_plfa-part3-Denotational-27723" href="../Denotational/#plfa_plfa-part3-Denotational-27723" class="Function">apply-n</a> <a id="plfa_plfa-part3-Denotational-27731" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-27733" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-27734" href="../Denotational/#plfa_plfa-part3-Denotational-27734" class="Bound">n</a> <a id="plfa_plfa-part3-Denotational-27736" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-27738" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="plfa_plfa-part3-Denotational-27739" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-27741" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-27743" href="../Untyped/#plfa_plfa-part2-Untyped-4183" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part3-Denotational-27745" href="../Untyped/#plfa_plfa-part2-Untyped-4199" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-27747" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Denotational-27749" href="../Untyped/#plfa_plfa-part2-Untyped-4199" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-27751" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Denotational-27753" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-27755" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a>
<a id="plfa_plfa-part3-Denotational-27757" href="../Denotational/#plfa_plfa-part3-Denotational-27723" class="Function">apply-n</a> <a id="plfa_plfa-part3-Denotational-27765" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a> <a id="plfa_plfa-part3-Denotational-27770" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-27772" href="../Untyped/#plfa_plfa-part2-Untyped-6753" class="Function Operator">#</a> <a id="plfa_plfa-part3-Denotational-27774" class="Number">0</a>
<a id="plfa_plfa-part3-Denotational-27776" href="../Denotational/#plfa_plfa-part3-Denotational-27723" class="Function">apply-n</a> <a id="plfa_plfa-part3-Denotational-27784" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-27785" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part3-Denotational-27789" href="../Denotational/#plfa_plfa-part3-Denotational-27789" class="Bound">n</a><a id="plfa_plfa-part3-Denotational-27790" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-27792" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-27794" href="../Untyped/#plfa_plfa-part2-Untyped-6753" class="Function Operator">#</a> <a id="plfa_plfa-part3-Denotational-27796" class="Number">1</a> <a id="plfa_plfa-part3-Denotational-27798" href="../Untyped/#plfa_plfa-part2-Untyped-5880" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Denotational-27800" href="../Denotational/#plfa_plfa-part3-Denotational-27723" class="Function">apply-n</a> <a id="plfa_plfa-part3-Denotational-27808" href="../Denotational/#plfa_plfa-part3-Denotational-27789" class="Bound">n</a>

<a id="plfa_plfa-part3-Denotational-church"></a><a id="plfa_plfa-part3-Denotational-27811" href="../Denotational/#plfa_plfa-part3-Denotational-27811" class="Function">church</a> <a id="plfa_plfa-part3-Denotational-27818" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-27820" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-27821" href="../Denotational/#plfa_plfa-part3-Denotational-27821" class="Bound">n</a> <a id="plfa_plfa-part3-Denotational-27823" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-27825" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="plfa_plfa-part3-Denotational-27826" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-27828" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-27830" href="../Untyped/#plfa_plfa-part2-Untyped-4183" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part3-Denotational-27832" href="../Untyped/#plfa_plfa-part2-Untyped-5732" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Denotational-27834" href="../Untyped/#plfa_plfa-part2-Untyped-3766" class="InductiveConstructor">★</a>
<a id="plfa_plfa-part3-Denotational-27836" href="../Denotational/#plfa_plfa-part3-Denotational-27811" class="Function">church</a> <a id="plfa_plfa-part3-Denotational-27843" href="../Denotational/#plfa_plfa-part3-Denotational-27843" class="Bound">n</a> <a id="plfa_plfa-part3-Denotational-27845" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-27847" href="../Untyped/#plfa_plfa-part2-Untyped-5820" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Denotational-27849" href="../Untyped/#plfa_plfa-part2-Untyped-5820" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Denotational-27851" href="../Denotational/#plfa_plfa-part3-Denotational-27723" class="Function">apply-n</a> <a id="plfa_plfa-part3-Denotational-27859" href="../Denotational/#plfa_plfa-part3-Denotational-27843" class="Bound">n</a>
</pre><p>Prove the following theorem.</p><pre><code>denot-church : ∀{n : ℕ}{ls : Vec Value (suc n)}
   → `∅ ⊢ church n ↓ Dᶜ n ls</code></pre><pre class="Agda"><a id="plfa_plfa-part3-Denotational-27990" class="Comment">-- Your code goes here</a>
</pre><h2 id="inversion-of-the-less-than-relation-for-functions">Inversion of the less-than relation for functions</h2><p>What can we deduce from knowing that a function <code>v ↦ w</code> is less than some value <code>u</code>? What can we deduce about <code>u</code>? The answer to this question is called the inversion property of less-than for functions. This question is not easy to answer because of the <code>⊑-dist</code> rule, which relates a function on the left to a pair of functions on the right. So <code>u</code> may include several functions that, as a group, relate to <code>v ↦ w</code>. Furthermore, because of the rules <code>⊑-conj-R1</code> and <code>⊑-conj-R2</code>, there may be other values inside <code>u</code>, such as <code>⊥</code>, that have nothing to do with <code>v ↦ w</code>. But in general, we can deduce that <code>u</code> includes a collection of functions where the join of their domains is less than <code>v</code> and the join of their codomains is greater than <code>w</code>.</p><p>To precisely state and prove this inversion property, we need to define what it means for a value to <em>include</em> a collection of values. We also need to define how to compute the join of their domains and codomains.</p><h3 id="value-membership-and-inclusion">Value membership and inclusion</h3><p>Recall that we think of a value as a set of entries with the join operator <code>v ⊔ w</code> acting like set union. The function value <code>v ↦ w</code> and bottom value <code>⊥</code> constitute the two kinds of elements of the set. (In other contexts one can instead think of <code>⊥</code> as the empty set, but here we must think of it as an element.) We write <code>u ∈ v</code> to say that <code>u</code> is an element of <code>v</code>, as defined below.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-29471" class="Keyword">infix</a> <a id="plfa_plfa-part3-Denotational-29477" class="Number">5</a> <a id="plfa_plfa-part3-Denotational-29479" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">_∈_</a>

<a id="plfa_plfa-part3-Denotational-_∈_"></a><a id="plfa_plfa-part3-Denotational-29484" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">_∈_</a> <a id="plfa_plfa-part3-Denotational-29488" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-29490" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-29496" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-29498" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-29504" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-29506" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="plfa_plfa-part3-Denotational-29510" href="../Denotational/#plfa_plfa-part3-Denotational-29510" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-29512" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">∈</a> <a id="plfa_plfa-part3-Denotational-29514" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Denotational-29516" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-29518" href="../Denotational/#plfa_plfa-part3-Denotational-29510" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-29520" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Denotational-29522" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a>
<a id="plfa_plfa-part3-Denotational-29524" href="../Denotational/#plfa_plfa-part3-Denotational-29524" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-29526" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">∈</a> <a id="plfa_plfa-part3-Denotational-29528" href="../Denotational/#plfa_plfa-part3-Denotational-29528" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-29530" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-29532" href="../Denotational/#plfa_plfa-part3-Denotational-29532" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-29534" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-29536" href="../Denotational/#plfa_plfa-part3-Denotational-29524" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-29538" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Denotational-29540" href="../Denotational/#plfa_plfa-part3-Denotational-29528" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-29542" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-29544" href="../Denotational/#plfa_plfa-part3-Denotational-29532" class="Bound">w</a>
<a id="plfa_plfa-part3-Denotational-29546" href="../Denotational/#plfa_plfa-part3-Denotational-29546" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-29548" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">∈</a> <a id="plfa_plfa-part3-Denotational-29550" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-29551" href="../Denotational/#plfa_plfa-part3-Denotational-29551" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-29553" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-29555" href="../Denotational/#plfa_plfa-part3-Denotational-29555" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-29556" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-29558" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-29560" href="../Denotational/#plfa_plfa-part3-Denotational-29546" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-29562" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">∈</a> <a id="plfa_plfa-part3-Denotational-29564" href="../Denotational/#plfa_plfa-part3-Denotational-29551" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-29566" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="plfa_plfa-part3-Denotational-29568" href="../Denotational/#plfa_plfa-part3-Denotational-29546" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-29570" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">∈</a> <a id="plfa_plfa-part3-Denotational-29572" href="../Denotational/#plfa_plfa-part3-Denotational-29555" class="Bound">w</a>
</pre><p>So we can represent a collection of values simply as a value. We write <code>v ⊆ w</code> to say that all the elements of <code>v</code> are also in <code>w</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-29721" class="Keyword">infix</a> <a id="plfa_plfa-part3-Denotational-29727" class="Number">5</a> <a id="plfa_plfa-part3-Denotational-29729" href="../Denotational/#plfa_plfa-part3-Denotational-29734" class="Function Operator">_⊆_</a>

<a id="plfa_plfa-part3-Denotational-_⊆_"></a><a id="plfa_plfa-part3-Denotational-29734" href="../Denotational/#plfa_plfa-part3-Denotational-29734" class="Function Operator">_⊆_</a> <a id="plfa_plfa-part3-Denotational-29738" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-29740" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-29746" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-29748" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-29754" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-29756" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="plfa_plfa-part3-Denotational-29760" href="../Denotational/#plfa_plfa-part3-Denotational-29760" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-29762" href="../Denotational/#plfa_plfa-part3-Denotational-29734" class="Function Operator">⊆</a> <a id="plfa_plfa-part3-Denotational-29764" href="../Denotational/#plfa_plfa-part3-Denotational-29764" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-29766" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-29768" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-29770" href="../Denotational/#plfa_plfa-part3-Denotational-29770" class="Bound">u</a><a id="plfa_plfa-part3-Denotational-29771" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-29773" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-29775" href="../Denotational/#plfa_plfa-part3-Denotational-29770" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-29777" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">∈</a> <a id="plfa_plfa-part3-Denotational-29779" href="../Denotational/#plfa_plfa-part3-Denotational-29760" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-29781" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-29783" href="../Denotational/#plfa_plfa-part3-Denotational-29770" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-29785" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">∈</a> <a id="plfa_plfa-part3-Denotational-29787" href="../Denotational/#plfa_plfa-part3-Denotational-29764" class="Bound">w</a>
</pre><p>The notions of membership and inclusion for values are closely related to the less-than relation. They are narrower relations in that they imply the less-than relation but not the other way around.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-∈→⊑"></a><a id="plfa_plfa-part3-Denotational-30001" href="../Denotational/#plfa_plfa-part3-Denotational-30001" class="Function">∈→⊑</a> <a id="plfa_plfa-part3-Denotational-30005" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-30007" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-30009" href="../Denotational/#plfa_plfa-part3-Denotational-30009" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-30011" href="../Denotational/#plfa_plfa-part3-Denotational-30011" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-30013" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-30015" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-30020" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Denotational-30026" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-30028" href="../Denotational/#plfa_plfa-part3-Denotational-30009" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-30030" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">∈</a> <a id="plfa_plfa-part3-Denotational-30032" href="../Denotational/#plfa_plfa-part3-Denotational-30011" class="Bound">v</a>
      <a id="plfa_plfa-part3-Denotational-30040" class="Comment">-----</a>
    <a id="plfa_plfa-part3-Denotational-30050" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-30052" href="../Denotational/#plfa_plfa-part3-Denotational-30009" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-30054" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-30056" href="../Denotational/#plfa_plfa-part3-Denotational-30011" class="Bound">v</a>
<a id="plfa_plfa-part3-Denotational-30058" href="../Denotational/#plfa_plfa-part3-Denotational-30001" class="Function">∈→⊑</a> <a id="plfa_plfa-part3-Denotational-30062" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-30063" class="DottedPattern Symbol">.</a><a id="plfa_plfa-part3-Denotational-30064" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="DottedPattern InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Denotational-30065" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-30067" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-30068" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Denotational-30069" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-30071" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Denotational-30076" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-30078" href="../Denotational/#plfa_plfa-part3-Denotational-4370" class="InductiveConstructor">⊑-bot</a>
<a id="plfa_plfa-part3-Denotational-30084" href="../Denotational/#plfa_plfa-part3-Denotational-30001" class="Function">∈→⊑</a> <a id="plfa_plfa-part3-Denotational-30088" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-30089" href="../Denotational/#plfa_plfa-part3-Denotational-30089" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-30091" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-30093" href="../Denotational/#plfa_plfa-part3-Denotational-30093" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-30094" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-30096" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-30097" href="../Denotational/#plfa_plfa-part3-Denotational-30089" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-30099" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-30101" href="../Denotational/#plfa_plfa-part3-Denotational-30093" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-30102" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-30104" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Denotational-30109" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-30111" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a>
<a id="plfa_plfa-part3-Denotational-30118" href="../Denotational/#plfa_plfa-part3-Denotational-30001" class="Function">∈→⊑</a> <a id="plfa_plfa-part3-Denotational-30122" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-30123" href="../Denotational/#plfa_plfa-part3-Denotational-30123" class="Bound">u</a><a id="plfa_plfa-part3-Denotational-30124" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-30126" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-30127" href="../Denotational/#plfa_plfa-part3-Denotational-30127" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-30129" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-30131" href="../Denotational/#plfa_plfa-part3-Denotational-30131" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-30132" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-30134" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-30135" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Denotational-30140" href="../Denotational/#plfa_plfa-part3-Denotational-30140" class="Bound">x</a><a id="plfa_plfa-part3-Denotational-30141" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-30143" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-30145" href="../Denotational/#plfa_plfa-part3-Denotational-4479" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Denotational-30155" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-30156" href="../Denotational/#plfa_plfa-part3-Denotational-30001" class="Function">∈→⊑</a> <a id="plfa_plfa-part3-Denotational-30160" href="../Denotational/#plfa_plfa-part3-Denotational-30140" class="Bound">x</a><a id="plfa_plfa-part3-Denotational-30161" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-30163" href="../Denotational/#plfa_plfa-part3-Denotational-30001" class="Function">∈→⊑</a> <a id="plfa_plfa-part3-Denotational-30167" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-30168" href="../Denotational/#plfa_plfa-part3-Denotational-30168" class="Bound">u</a><a id="plfa_plfa-part3-Denotational-30169" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-30171" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-30172" href="../Denotational/#plfa_plfa-part3-Denotational-30172" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-30174" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-30176" href="../Denotational/#plfa_plfa-part3-Denotational-30176" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-30177" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-30179" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-30180" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Denotational-30185" href="../Denotational/#plfa_plfa-part3-Denotational-30185" class="Bound">y</a><a id="plfa_plfa-part3-Denotational-30186" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-30188" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-30190" href="../Denotational/#plfa_plfa-part3-Denotational-4552" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Denotational-30200" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-30201" href="../Denotational/#plfa_plfa-part3-Denotational-30001" class="Function">∈→⊑</a> <a id="plfa_plfa-part3-Denotational-30205" href="../Denotational/#plfa_plfa-part3-Denotational-30185" class="Bound">y</a><a id="plfa_plfa-part3-Denotational-30206" class="Symbol">)</a>

<a id="plfa_plfa-part3-Denotational-⊆→⊑"></a><a id="plfa_plfa-part3-Denotational-30209" href="../Denotational/#plfa_plfa-part3-Denotational-30209" class="Function">⊆→⊑</a> <a id="plfa_plfa-part3-Denotational-30213" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-30215" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-30217" href="../Denotational/#plfa_plfa-part3-Denotational-30217" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-30219" href="../Denotational/#plfa_plfa-part3-Denotational-30219" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-30221" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-30223" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-30228" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Denotational-30234" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-30236" href="../Denotational/#plfa_plfa-part3-Denotational-30217" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-30238" href="../Denotational/#plfa_plfa-part3-Denotational-29734" class="Function Operator">⊆</a> <a id="plfa_plfa-part3-Denotational-30240" href="../Denotational/#plfa_plfa-part3-Denotational-30219" class="Bound">v</a>
      <a id="plfa_plfa-part3-Denotational-30248" class="Comment">-----</a>
    <a id="plfa_plfa-part3-Denotational-30258" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-30260" href="../Denotational/#plfa_plfa-part3-Denotational-30217" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-30262" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-30264" href="../Denotational/#plfa_plfa-part3-Denotational-30219" class="Bound">v</a>
<a id="plfa_plfa-part3-Denotational-30266" href="../Denotational/#plfa_plfa-part3-Denotational-30209" class="Function">⊆→⊑</a> <a id="plfa_plfa-part3-Denotational-30270" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-30271" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Denotational-30272" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-30274" href="../Denotational/#plfa_plfa-part3-Denotational-30274" class="Bound">s</a> <a id="plfa_plfa-part3-Denotational-30276" class="Keyword">with</a> <a id="plfa_plfa-part3-Denotational-30281" href="../Denotational/#plfa_plfa-part3-Denotational-30274" class="Bound">s</a> <a id="plfa_plfa-part3-Denotational-30283" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-30284" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Denotational-30285" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-30287" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Denotational-30292" class="Symbol">...</a> <a id="plfa_plfa-part3-Denotational-30296" class="Symbol">|</a> <a id="plfa_plfa-part3-Denotational-30298" href="../Denotational/#plfa_plfa-part3-Denotational-30298" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-30300" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-30302" href="../Denotational/#plfa_plfa-part3-Denotational-4370" class="InductiveConstructor">⊑-bot</a>
<a id="plfa_plfa-part3-Denotational-30308" href="../Denotational/#plfa_plfa-part3-Denotational-30209" class="Function">⊆→⊑</a> <a id="plfa_plfa-part3-Denotational-30312" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-30313" href="../Denotational/#plfa_plfa-part3-Denotational-30313" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-30315" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-30317" href="../Denotational/#plfa_plfa-part3-Denotational-30317" class="Bound">u′</a><a id="plfa_plfa-part3-Denotational-30319" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-30321" href="../Denotational/#plfa_plfa-part3-Denotational-30321" class="Bound">s</a> <a id="plfa_plfa-part3-Denotational-30323" class="Keyword">with</a> <a id="plfa_plfa-part3-Denotational-30328" href="../Denotational/#plfa_plfa-part3-Denotational-30321" class="Bound">s</a> <a id="plfa_plfa-part3-Denotational-30330" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-30331" href="../Denotational/#plfa_plfa-part3-Denotational-30313" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-30333" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-30335" href="../Denotational/#plfa_plfa-part3-Denotational-30317" class="Bound">u′</a><a id="plfa_plfa-part3-Denotational-30337" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-30339" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Denotational-30344" class="Symbol">...</a> <a id="plfa_plfa-part3-Denotational-30348" class="Symbol">|</a> <a id="plfa_plfa-part3-Denotational-30350" href="../Denotational/#plfa_plfa-part3-Denotational-30350" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-30352" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-30354" href="../Denotational/#plfa_plfa-part3-Denotational-30001" class="Function">∈→⊑</a> <a id="plfa_plfa-part3-Denotational-30358" href="../Denotational/#plfa_plfa-part3-Denotational-30350" class="Bound">x</a>
<a id="plfa_plfa-part3-Denotational-30360" href="../Denotational/#plfa_plfa-part3-Denotational-30209" class="Function">⊆→⊑</a> <a id="plfa_plfa-part3-Denotational-30364" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-30365" href="../Denotational/#plfa_plfa-part3-Denotational-30365" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-30367" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-30369" href="../Denotational/#plfa_plfa-part3-Denotational-30369" class="Bound">u′</a><a id="plfa_plfa-part3-Denotational-30371" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-30373" href="../Denotational/#plfa_plfa-part3-Denotational-30373" class="Bound">s</a> <a id="plfa_plfa-part3-Denotational-30375" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-30377" href="../Denotational/#plfa_plfa-part3-Denotational-4395" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Denotational-30386" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-30387" href="../Denotational/#plfa_plfa-part3-Denotational-30209" class="Function">⊆→⊑</a> <a id="plfa_plfa-part3-Denotational-30391" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Denotational-30394" href="../Denotational/#plfa_plfa-part3-Denotational-30394" class="Bound">z</a> <a id="plfa_plfa-part3-Denotational-30396" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-30398" href="../Denotational/#plfa_plfa-part3-Denotational-30373" class="Bound">s</a> <a id="plfa_plfa-part3-Denotational-30400" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-30401" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Denotational-30406" href="../Denotational/#plfa_plfa-part3-Denotational-30394" class="Bound">z</a><a id="plfa_plfa-part3-Denotational-30407" class="Symbol">)))</a> <a id="plfa_plfa-part3-Denotational-30411" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-30412" href="../Denotational/#plfa_plfa-part3-Denotational-30209" class="Function">⊆→⊑</a> <a id="plfa_plfa-part3-Denotational-30416" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Denotational-30419" href="../Denotational/#plfa_plfa-part3-Denotational-30419" class="Bound">z</a> <a id="plfa_plfa-part3-Denotational-30421" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-30423" href="../Denotational/#plfa_plfa-part3-Denotational-30373" class="Bound">s</a> <a id="plfa_plfa-part3-Denotational-30425" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-30426" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Denotational-30431" href="../Denotational/#plfa_plfa-part3-Denotational-30419" class="Bound">z</a><a id="plfa_plfa-part3-Denotational-30432" class="Symbol">)))</a>
</pre><p>We shall also need some inversion principles for value inclusion. If the union of <code>u</code> and <code>v</code> is included in <code>w</code>, then of course both <code>u</code> and <code>v</code> are each included in <code>w</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-⊔⊆-inv"></a><a id="plfa_plfa-part3-Denotational-30623" href="../Denotational/#plfa_plfa-part3-Denotational-30623" class="Function">⊔⊆-inv</a> <a id="plfa_plfa-part3-Denotational-30630" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-30632" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-30634" href="../Denotational/#plfa_plfa-part3-Denotational-30634" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-30636" href="../Denotational/#plfa_plfa-part3-Denotational-30636" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-30638" href="../Denotational/#plfa_plfa-part3-Denotational-30638" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-30640" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-30642" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-30647" class="Symbol">}</a>
       <a id="plfa_plfa-part3-Denotational-30656" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-30658" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-30659" href="../Denotational/#plfa_plfa-part3-Denotational-30634" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-30661" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-30663" href="../Denotational/#plfa_plfa-part3-Denotational-30636" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-30664" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-30666" href="../Denotational/#plfa_plfa-part3-Denotational-29734" class="Function Operator">⊆</a> <a id="plfa_plfa-part3-Denotational-30668" href="../Denotational/#plfa_plfa-part3-Denotational-30638" class="Bound">w</a>
         <a id="plfa_plfa-part3-Denotational-30679" class="Comment">---------------</a>
       <a id="plfa_plfa-part3-Denotational-30702" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-30704" href="../Denotational/#plfa_plfa-part3-Denotational-30634" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-30706" href="../Denotational/#plfa_plfa-part3-Denotational-29734" class="Function Operator">⊆</a> <a id="plfa_plfa-part3-Denotational-30708" href="../Denotational/#plfa_plfa-part3-Denotational-30638" class="Bound">w</a>  <a id="plfa_plfa-part3-Denotational-30711" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Denotational-30714" href="../Denotational/#plfa_plfa-part3-Denotational-30636" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-30716" href="../Denotational/#plfa_plfa-part3-Denotational-29734" class="Function Operator">⊆</a> <a id="plfa_plfa-part3-Denotational-30718" href="../Denotational/#plfa_plfa-part3-Denotational-30638" class="Bound">w</a>
<a id="plfa_plfa-part3-Denotational-30720" href="../Denotational/#plfa_plfa-part3-Denotational-30623" class="Function">⊔⊆-inv</a> <a id="plfa_plfa-part3-Denotational-30727" href="../Denotational/#plfa_plfa-part3-Denotational-30727" class="Bound">uvw</a> <a id="plfa_plfa-part3-Denotational-30731" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-30733" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-30735" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Denotational-30738" href="../Denotational/#plfa_plfa-part3-Denotational-30738" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-30740" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-30742" href="../Denotational/#plfa_plfa-part3-Denotational-30727" class="Bound">uvw</a> <a id="plfa_plfa-part3-Denotational-30746" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-30747" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Denotational-30752" href="../Denotational/#plfa_plfa-part3-Denotational-30738" class="Bound">x</a><a id="plfa_plfa-part3-Denotational-30753" class="Symbol">))</a> <a id="plfa_plfa-part3-Denotational-30756" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-30758" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Denotational-30761" href="../Denotational/#plfa_plfa-part3-Denotational-30761" class="Bound">x</a> <a id="plfa_plfa-part3-Denotational-30763" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-30765" href="../Denotational/#plfa_plfa-part3-Denotational-30727" class="Bound">uvw</a> <a id="plfa_plfa-part3-Denotational-30769" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-30770" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Denotational-30775" href="../Denotational/#plfa_plfa-part3-Denotational-30761" class="Bound">x</a><a id="plfa_plfa-part3-Denotational-30776" class="Symbol">))</a> <a id="plfa_plfa-part3-Denotational-30779" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a>
</pre><p>In our value representation, the function value <code>v ↦ w</code> is both an element and also a singleton set. So if <code>v ↦ w</code> is a subset of <code>u</code>, then <code>v ↦ w</code> must be a member of <code>u</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-↦⊆→∈"></a><a id="plfa_plfa-part3-Denotational-30968" href="../Denotational/#plfa_plfa-part3-Denotational-30968" class="Function">↦⊆→∈</a> <a id="plfa_plfa-part3-Denotational-30973" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-30975" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-30977" href="../Denotational/#plfa_plfa-part3-Denotational-30977" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-30979" href="../Denotational/#plfa_plfa-part3-Denotational-30979" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-30981" href="../Denotational/#plfa_plfa-part3-Denotational-30981" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-30983" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-30985" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-30990" class="Symbol">}</a>
     <a id="plfa_plfa-part3-Denotational-30997" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-30999" href="../Denotational/#plfa_plfa-part3-Denotational-30977" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-31001" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-31003" href="../Denotational/#plfa_plfa-part3-Denotational-30979" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-31005" href="../Denotational/#plfa_plfa-part3-Denotational-29734" class="Function Operator">⊆</a> <a id="plfa_plfa-part3-Denotational-31007" href="../Denotational/#plfa_plfa-part3-Denotational-30981" class="Bound">u</a>
       <a id="plfa_plfa-part3-Denotational-31016" class="Comment">---------</a>
     <a id="plfa_plfa-part3-Denotational-31031" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-31033" href="../Denotational/#plfa_plfa-part3-Denotational-30977" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-31035" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-31037" href="../Denotational/#plfa_plfa-part3-Denotational-30979" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-31039" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">∈</a> <a id="plfa_plfa-part3-Denotational-31041" href="../Denotational/#plfa_plfa-part3-Denotational-30981" class="Bound">u</a>
<a id="plfa_plfa-part3-Denotational-31043" href="../Denotational/#plfa_plfa-part3-Denotational-30968" class="Function">↦⊆→∈</a> <a id="plfa_plfa-part3-Denotational-31048" href="../Denotational/#plfa_plfa-part3-Denotational-31048" class="Bound">incl</a> <a id="plfa_plfa-part3-Denotational-31053" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-31055" href="../Denotational/#plfa_plfa-part3-Denotational-31048" class="Bound">incl</a> <a id="plfa_plfa-part3-Denotational-31060" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre><h3 id="function-values">Function values</h3><p>To identify collections of functions, we define the following two predicates. We write <code>Fun u</code> if <code>u</code> is a function value, that is, if <code>u ≡ v ↦ w</code> for some values <code>v</code> and <code>w</code>. We write <code>all-funs v</code> if all the elements of <code>v</code> are functions.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-31341" class="Keyword">data</a> <a id="plfa_plfa-part3-Denotational-Fun"></a><a id="plfa_plfa-part3-Denotational-31346" href="../Denotational/#plfa_plfa-part3-Denotational-31346" class="Datatype">Fun</a> <a id="plfa_plfa-part3-Denotational-31350" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-31352" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-31358" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-31360" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#326" class="Primitive">Set</a> <a id="plfa_plfa-part3-Denotational-31364" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Denotational-Fun.fun"></a><a id="plfa_plfa-part3-Denotational-31372" href="../Denotational/#plfa_plfa-part3-Denotational-31372" class="InductiveConstructor">fun</a> <a id="plfa_plfa-part3-Denotational-31376" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-31378" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-31380" href="../Denotational/#plfa_plfa-part3-Denotational-31380" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-31382" href="../Denotational/#plfa_plfa-part3-Denotational-31382" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-31384" href="../Denotational/#plfa_plfa-part3-Denotational-31384" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-31385" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-31387" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-31389" href="../Denotational/#plfa_plfa-part3-Denotational-31380" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-31391" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Denotational-31393" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-31394" href="../Denotational/#plfa_plfa-part3-Denotational-31382" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-31396" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-31398" href="../Denotational/#plfa_plfa-part3-Denotational-31384" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-31399" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-31401" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-31403" href="../Denotational/#plfa_plfa-part3-Denotational-31346" class="Datatype">Fun</a> <a id="plfa_plfa-part3-Denotational-31407" href="../Denotational/#plfa_plfa-part3-Denotational-31380" class="Bound">u</a>

<a id="plfa_plfa-part3-Denotational-all-funs"></a><a id="plfa_plfa-part3-Denotational-31410" href="../Denotational/#plfa_plfa-part3-Denotational-31410" class="Function">all-funs</a> <a id="plfa_plfa-part3-Denotational-31419" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-31421" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-31427" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-31429" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="plfa_plfa-part3-Denotational-31433" href="../Denotational/#plfa_plfa-part3-Denotational-31410" class="Function">all-funs</a> <a id="plfa_plfa-part3-Denotational-31442" href="../Denotational/#plfa_plfa-part3-Denotational-31442" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-31444" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-31446" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-31448" href="../Denotational/#plfa_plfa-part3-Denotational-31448" class="Bound">u</a><a id="plfa_plfa-part3-Denotational-31449" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-31451" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-31453" href="../Denotational/#plfa_plfa-part3-Denotational-31448" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-31455" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">∈</a> <a id="plfa_plfa-part3-Denotational-31457" href="../Denotational/#plfa_plfa-part3-Denotational-31442" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-31459" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-31461" href="../Denotational/#plfa_plfa-part3-Denotational-31346" class="Datatype">Fun</a> <a id="plfa_plfa-part3-Denotational-31465" href="../Denotational/#plfa_plfa-part3-Denotational-31448" class="Bound">u</a>
</pre><p>The value <code>⊥</code> is not a function.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-¬Fun⊥"></a><a id="plfa_plfa-part3-Denotational-31514" href="../Denotational/#plfa_plfa-part3-Denotational-31514" class="Function">¬Fun⊥</a> <a id="plfa_plfa-part3-Denotational-31520" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-31522" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.html#656" class="Function Operator">¬</a> <a id="plfa_plfa-part3-Denotational-31524" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-31525" href="../Denotational/#plfa_plfa-part3-Denotational-31346" class="Datatype">Fun</a> <a id="plfa_plfa-part3-Denotational-31529" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Denotational-31530" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-31532" href="../Denotational/#plfa_plfa-part3-Denotational-31514" class="Function">¬Fun⊥</a> <a id="plfa_plfa-part3-Denotational-31538" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-31539" href="../Denotational/#plfa_plfa-part3-Denotational-31372" class="InductiveConstructor">fun</a> <a id="plfa_plfa-part3-Denotational-31543" class="Symbol">())</a>
</pre><p>In our values-as-sets representation, our sets always include at least one element. Thus, if all the elements are functions, there is at least one that is a function.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-all-funs∈"></a><a id="plfa_plfa-part3-Denotational-31728" href="../Denotational/#plfa_plfa-part3-Denotational-31728" class="Function">all-funs∈</a> <a id="plfa_plfa-part3-Denotational-31738" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-31740" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-31742" href="../Denotational/#plfa_plfa-part3-Denotational-31742" class="Bound">u</a><a id="plfa_plfa-part3-Denotational-31743" class="Symbol">}</a>
      <a id="plfa_plfa-part3-Denotational-31751" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-31753" href="../Denotational/#plfa_plfa-part3-Denotational-31410" class="Function">all-funs</a> <a id="plfa_plfa-part3-Denotational-31762" href="../Denotational/#plfa_plfa-part3-Denotational-31742" class="Bound">u</a>
      <a id="plfa_plfa-part3-Denotational-31770" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-31772" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Denotational-31775" href="../Denotational/#plfa_plfa-part3-Denotational-31775" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-31777" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Denotational-31779" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-31785" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Denotational-31787" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Denotational-31790" href="../Denotational/#plfa_plfa-part3-Denotational-31790" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-31792" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Denotational-31794" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-31800" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Denotational-31802" href="../Denotational/#plfa_plfa-part3-Denotational-31775" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-31804" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-31806" href="../Denotational/#plfa_plfa-part3-Denotational-31790" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-31808" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">∈</a> <a id="plfa_plfa-part3-Denotational-31810" href="../Denotational/#plfa_plfa-part3-Denotational-31742" class="Bound">u</a>
<a id="plfa_plfa-part3-Denotational-31812" href="../Denotational/#plfa_plfa-part3-Denotational-31728" class="Function">all-funs∈</a> <a id="plfa_plfa-part3-Denotational-31822" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-31823" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Denotational-31824" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-31826" href="../Denotational/#plfa_plfa-part3-Denotational-31826" class="Bound">f</a> <a id="plfa_plfa-part3-Denotational-31828" class="Keyword">with</a> <a id="plfa_plfa-part3-Denotational-31833" href="../Denotational/#plfa_plfa-part3-Denotational-31826" class="Bound">f</a> <a id="plfa_plfa-part3-Denotational-31835" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-31836" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Denotational-31837" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-31839" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Denotational-31844" class="Symbol">...</a> <a id="plfa_plfa-part3-Denotational-31848" class="Symbol">|</a> <a id="plfa_plfa-part3-Denotational-31850" href="../Denotational/#plfa_plfa-part3-Denotational-31372" class="InductiveConstructor">fun</a> <a id="plfa_plfa-part3-Denotational-31854" class="Symbol">()</a>
<a id="plfa_plfa-part3-Denotational-31857" href="../Denotational/#plfa_plfa-part3-Denotational-31728" class="Function">all-funs∈</a> <a id="plfa_plfa-part3-Denotational-31867" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-31868" href="../Denotational/#plfa_plfa-part3-Denotational-31868" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-31870" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-31872" href="../Denotational/#plfa_plfa-part3-Denotational-31872" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-31873" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-31875" href="../Denotational/#plfa_plfa-part3-Denotational-31875" class="Bound">f</a> <a id="plfa_plfa-part3-Denotational-31877" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-31879" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-31881" href="../Denotational/#plfa_plfa-part3-Denotational-31868" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-31883" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-31885" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-31887" href="../Denotational/#plfa_plfa-part3-Denotational-31872" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-31889" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-31891" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Denotational-31896" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-31898" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Denotational-31900" href="../Denotational/#plfa_plfa-part3-Denotational-31728" class="Function">all-funs∈</a> <a id="plfa_plfa-part3-Denotational-31910" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-31911" href="../Denotational/#plfa_plfa-part3-Denotational-31911" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-31913" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-31915" href="../Denotational/#plfa_plfa-part3-Denotational-31915" class="Bound">u′</a><a id="plfa_plfa-part3-Denotational-31917" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-31919" href="../Denotational/#plfa_plfa-part3-Denotational-31919" class="Bound">f</a>
    <a id="plfa_plfa-part3-Denotational-31925" class="Keyword">with</a> <a id="plfa_plfa-part3-Denotational-31930" href="../Denotational/#plfa_plfa-part3-Denotational-31728" class="Function">all-funs∈</a> <a id="plfa_plfa-part3-Denotational-31940" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Denotational-31943" href="../Denotational/#plfa_plfa-part3-Denotational-31943" class="Bound">z</a> <a id="plfa_plfa-part3-Denotational-31945" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-31947" href="../Denotational/#plfa_plfa-part3-Denotational-31919" class="Bound">f</a> <a id="plfa_plfa-part3-Denotational-31949" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-31950" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Denotational-31955" href="../Denotational/#plfa_plfa-part3-Denotational-31943" class="Bound">z</a><a id="plfa_plfa-part3-Denotational-31956" class="Symbol">))</a>
<a id="plfa_plfa-part3-Denotational-31959" class="Symbol">...</a> <a id="plfa_plfa-part3-Denotational-31963" class="Symbol">|</a> <a id="plfa_plfa-part3-Denotational-31965" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-31967" href="../Denotational/#plfa_plfa-part3-Denotational-31967" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-31969" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-31971" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-31973" href="../Denotational/#plfa_plfa-part3-Denotational-31973" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-31975" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-31977" href="../Denotational/#plfa_plfa-part3-Denotational-31977" class="Bound">m</a> <a id="plfa_plfa-part3-Denotational-31979" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-31981" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-31983" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-31985" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-31987" href="../Denotational/#plfa_plfa-part3-Denotational-31967" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-31989" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-31991" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-31993" href="../Denotational/#plfa_plfa-part3-Denotational-31973" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-31995" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-31997" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-31998" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Denotational-32003" href="../Denotational/#plfa_plfa-part3-Denotational-31977" class="Bound">m</a><a id="plfa_plfa-part3-Denotational-32004" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-32006" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-32008" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a>
</pre><h3 id="domains-and-codomains">Domains and codomains</h3><p>Returning to our goal, the inversion principle for less-than a function, we want to show that <code>v ↦ w ⊑ u</code> implies that <code>u</code> includes a set of function values such that the join of their domains is less than <code>v</code> and the join of their codomains is greater than <code>w</code>.</p><p>To this end we define the following <code>⨆dom</code> and <code>⨆cod</code> functions. Given some value <code>u</code> (that represents a set of entries), <code>⨆dom u</code> returns the join of their domains and <code>⨆cod u</code> returns the join of their codomains.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-⨆dom"></a><a id="plfa_plfa-part3-Denotational-32532" href="../Denotational/#plfa_plfa-part3-Denotational-32532" class="Function">⨆dom</a> <a id="plfa_plfa-part3-Denotational-32537" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-32539" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-32540" href="../Denotational/#plfa_plfa-part3-Denotational-32540" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-32542" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-32544" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-32549" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-32551" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-32553" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a>
<a id="plfa_plfa-part3-Denotational-32559" href="../Denotational/#plfa_plfa-part3-Denotational-32532" class="Function">⨆dom</a> <a id="plfa_plfa-part3-Denotational-32564" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a>  <a id="plfa_plfa-part3-Denotational-32567" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-32569" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a>
<a id="plfa_plfa-part3-Denotational-32571" href="../Denotational/#plfa_plfa-part3-Denotational-32532" class="Function">⨆dom</a> <a id="plfa_plfa-part3-Denotational-32576" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-32577" href="../Denotational/#plfa_plfa-part3-Denotational-32577" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-32579" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-32581" href="../Denotational/#plfa_plfa-part3-Denotational-32581" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-32582" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-32584" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-32586" href="../Denotational/#plfa_plfa-part3-Denotational-32577" class="Bound">v</a>
<a id="plfa_plfa-part3-Denotational-32588" href="../Denotational/#plfa_plfa-part3-Denotational-32532" class="Function">⨆dom</a> <a id="plfa_plfa-part3-Denotational-32593" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-32594" href="../Denotational/#plfa_plfa-part3-Denotational-32594" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-32596" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-32598" href="../Denotational/#plfa_plfa-part3-Denotational-32598" class="Bound">u′</a><a id="plfa_plfa-part3-Denotational-32600" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-32602" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-32604" href="../Denotational/#plfa_plfa-part3-Denotational-32532" class="Function">⨆dom</a> <a id="plfa_plfa-part3-Denotational-32609" href="../Denotational/#plfa_plfa-part3-Denotational-32594" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-32611" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-32613" href="../Denotational/#plfa_plfa-part3-Denotational-32532" class="Function">⨆dom</a> <a id="plfa_plfa-part3-Denotational-32618" href="../Denotational/#plfa_plfa-part3-Denotational-32598" class="Bound">u′</a>

<a id="plfa_plfa-part3-Denotational-⨆cod"></a><a id="plfa_plfa-part3-Denotational-32622" href="../Denotational/#plfa_plfa-part3-Denotational-32622" class="Function">⨆cod</a> <a id="plfa_plfa-part3-Denotational-32627" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-32629" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-32630" href="../Denotational/#plfa_plfa-part3-Denotational-32630" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-32632" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-32634" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-32639" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-32641" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-32643" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a>
<a id="plfa_plfa-part3-Denotational-32649" href="../Denotational/#plfa_plfa-part3-Denotational-32622" class="Function">⨆cod</a> <a id="plfa_plfa-part3-Denotational-32654" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a>  <a id="plfa_plfa-part3-Denotational-32657" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-32659" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a>
<a id="plfa_plfa-part3-Denotational-32661" href="../Denotational/#plfa_plfa-part3-Denotational-32622" class="Function">⨆cod</a> <a id="plfa_plfa-part3-Denotational-32666" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-32667" href="../Denotational/#plfa_plfa-part3-Denotational-32667" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-32669" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-32671" href="../Denotational/#plfa_plfa-part3-Denotational-32671" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-32672" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-32674" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-32676" href="../Denotational/#plfa_plfa-part3-Denotational-32671" class="Bound">w</a>
<a id="plfa_plfa-part3-Denotational-32678" href="../Denotational/#plfa_plfa-part3-Denotational-32622" class="Function">⨆cod</a> <a id="plfa_plfa-part3-Denotational-32683" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-32684" href="../Denotational/#plfa_plfa-part3-Denotational-32684" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-32686" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-32688" href="../Denotational/#plfa_plfa-part3-Denotational-32688" class="Bound">u′</a><a id="plfa_plfa-part3-Denotational-32690" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-32692" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-32694" href="../Denotational/#plfa_plfa-part3-Denotational-32622" class="Function">⨆cod</a> <a id="plfa_plfa-part3-Denotational-32699" href="../Denotational/#plfa_plfa-part3-Denotational-32684" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-32701" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-32703" href="../Denotational/#plfa_plfa-part3-Denotational-32622" class="Function">⨆cod</a> <a id="plfa_plfa-part3-Denotational-32708" href="../Denotational/#plfa_plfa-part3-Denotational-32688" class="Bound">u′</a>
</pre><p>We need just one property each for <code>⨆dom</code> and <code>⨆cod</code>. Given a collection of functions represented by value <code>u</code>, and an entry <code>v ↦ w ∈ u</code>, we know that <code>v</code> is included in the domain of <code>u</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-↦∈→⊆⨆dom"></a><a id="plfa_plfa-part3-Denotational-32915" href="../Denotational/#plfa_plfa-part3-Denotational-32915" class="Function">↦∈→⊆⨆dom</a> <a id="plfa_plfa-part3-Denotational-32924" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-32926" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-32928" href="../Denotational/#plfa_plfa-part3-Denotational-32928" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-32930" href="../Denotational/#plfa_plfa-part3-Denotational-32930" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-32932" href="../Denotational/#plfa_plfa-part3-Denotational-32932" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-32934" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-32936" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-32941" class="Symbol">}</a>
          <a id="plfa_plfa-part3-Denotational-32953" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-32955" href="../Denotational/#plfa_plfa-part3-Denotational-31410" class="Function">all-funs</a> <a id="plfa_plfa-part3-Denotational-32964" href="../Denotational/#plfa_plfa-part3-Denotational-32928" class="Bound">u</a>  <a id="plfa_plfa-part3-Denotational-32967" class="Symbol">→</a>  <a id="plfa_plfa-part3-Denotational-32970" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-32971" href="../Denotational/#plfa_plfa-part3-Denotational-32930" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-32973" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-32975" href="../Denotational/#plfa_plfa-part3-Denotational-32932" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-32976" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-32978" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">∈</a> <a id="plfa_plfa-part3-Denotational-32980" href="../Denotational/#plfa_plfa-part3-Denotational-32928" class="Bound">u</a>
            <a id="plfa_plfa-part3-Denotational-32994" class="Comment">----------------------</a>
          <a id="plfa_plfa-part3-Denotational-33027" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-33029" href="../Denotational/#plfa_plfa-part3-Denotational-32930" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-33031" href="../Denotational/#plfa_plfa-part3-Denotational-29734" class="Function Operator">⊆</a> <a id="plfa_plfa-part3-Denotational-33033" href="../Denotational/#plfa_plfa-part3-Denotational-32532" class="Function">⨆dom</a> <a id="plfa_plfa-part3-Denotational-33038" href="../Denotational/#plfa_plfa-part3-Denotational-32928" class="Bound">u</a>
<a id="plfa_plfa-part3-Denotational-33040" href="../Denotational/#plfa_plfa-part3-Denotational-32915" class="Function">↦∈→⊆⨆dom</a> <a id="plfa_plfa-part3-Denotational-33049" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-33050" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Denotational-33051" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-33053" href="../Denotational/#plfa_plfa-part3-Denotational-33053" class="Bound">fg</a> <a id="plfa_plfa-part3-Denotational-33056" class="Symbol">()</a> <a id="plfa_plfa-part3-Denotational-33059" href="../Denotational/#plfa_plfa-part3-Denotational-33059" class="Bound">u∈v</a>
<a id="plfa_plfa-part3-Denotational-33063" href="../Denotational/#plfa_plfa-part3-Denotational-32915" class="Function">↦∈→⊆⨆dom</a> <a id="plfa_plfa-part3-Denotational-33072" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-33073" href="../Denotational/#plfa_plfa-part3-Denotational-33073" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-33075" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-33077" href="../Denotational/#plfa_plfa-part3-Denotational-33077" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-33078" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-33080" href="../Denotational/#plfa_plfa-part3-Denotational-33080" class="Bound">fg</a> <a id="plfa_plfa-part3-Denotational-33083" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Denotational-33088" href="../Denotational/#plfa_plfa-part3-Denotational-33088" class="Bound">u∈v</a> <a id="plfa_plfa-part3-Denotational-33092" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-33094" href="../Denotational/#plfa_plfa-part3-Denotational-33088" class="Bound">u∈v</a>
<a id="plfa_plfa-part3-Denotational-33098" href="../Denotational/#plfa_plfa-part3-Denotational-32915" class="Function">↦∈→⊆⨆dom</a> <a id="plfa_plfa-part3-Denotational-33107" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-33108" href="../Denotational/#plfa_plfa-part3-Denotational-33108" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-33110" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-33112" href="../Denotational/#plfa_plfa-part3-Denotational-33112" class="Bound">u′</a><a id="plfa_plfa-part3-Denotational-33114" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-33116" href="../Denotational/#plfa_plfa-part3-Denotational-33116" class="Bound">fg</a> <a id="plfa_plfa-part3-Denotational-33119" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-33120" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Denotational-33125" href="../Denotational/#plfa_plfa-part3-Denotational-33125" class="Bound">v↦w∈u</a><a id="plfa_plfa-part3-Denotational-33130" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-33132" href="../Denotational/#plfa_plfa-part3-Denotational-33132" class="Bound">u∈v</a> <a id="plfa_plfa-part3-Denotational-33136" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Denotational-33141" class="Keyword">let</a> <a id="plfa_plfa-part3-Denotational-33145" href="../Denotational/#plfa_plfa-part3-Denotational-33145" class="Bound">ih</a> <a id="plfa_plfa-part3-Denotational-33148" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-33150" href="../Denotational/#plfa_plfa-part3-Denotational-32915" class="Function">↦∈→⊆⨆dom</a> <a id="plfa_plfa-part3-Denotational-33159" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Denotational-33162" href="../Denotational/#plfa_plfa-part3-Denotational-33162" class="Bound">z</a> <a id="plfa_plfa-part3-Denotational-33164" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-33166" href="../Denotational/#plfa_plfa-part3-Denotational-33116" class="Bound">fg</a> <a id="plfa_plfa-part3-Denotational-33169" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-33170" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Denotational-33175" href="../Denotational/#plfa_plfa-part3-Denotational-33162" class="Bound">z</a><a id="plfa_plfa-part3-Denotational-33176" class="Symbol">))</a> <a id="plfa_plfa-part3-Denotational-33179" href="../Denotational/#plfa_plfa-part3-Denotational-33125" class="Bound">v↦w∈u</a> <a id="plfa_plfa-part3-Denotational-33185" class="Keyword">in</a>
   <a id="plfa_plfa-part3-Denotational-33191" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Denotational-33196" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-33197" href="../Denotational/#plfa_plfa-part3-Denotational-33145" class="Bound">ih</a> <a id="plfa_plfa-part3-Denotational-33200" href="../Denotational/#plfa_plfa-part3-Denotational-33132" class="Bound">u∈v</a><a id="plfa_plfa-part3-Denotational-33203" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-33205" href="../Denotational/#plfa_plfa-part3-Denotational-32915" class="Function">↦∈→⊆⨆dom</a> <a id="plfa_plfa-part3-Denotational-33214" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-33215" href="../Denotational/#plfa_plfa-part3-Denotational-33215" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-33217" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-33219" href="../Denotational/#plfa_plfa-part3-Denotational-33219" class="Bound">u′</a><a id="plfa_plfa-part3-Denotational-33221" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-33223" href="../Denotational/#plfa_plfa-part3-Denotational-33223" class="Bound">fg</a> <a id="plfa_plfa-part3-Denotational-33226" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-33227" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Denotational-33232" href="../Denotational/#plfa_plfa-part3-Denotational-33232" class="Bound">v↦w∈u′</a><a id="plfa_plfa-part3-Denotational-33238" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-33240" href="../Denotational/#plfa_plfa-part3-Denotational-33240" class="Bound">u∈v</a> <a id="plfa_plfa-part3-Denotational-33244" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Denotational-33249" class="Keyword">let</a> <a id="plfa_plfa-part3-Denotational-33253" href="../Denotational/#plfa_plfa-part3-Denotational-33253" class="Bound">ih</a> <a id="plfa_plfa-part3-Denotational-33256" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-33258" href="../Denotational/#plfa_plfa-part3-Denotational-32915" class="Function">↦∈→⊆⨆dom</a> <a id="plfa_plfa-part3-Denotational-33267" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Denotational-33270" href="../Denotational/#plfa_plfa-part3-Denotational-33270" class="Bound">z</a> <a id="plfa_plfa-part3-Denotational-33272" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-33274" href="../Denotational/#plfa_plfa-part3-Denotational-33223" class="Bound">fg</a> <a id="plfa_plfa-part3-Denotational-33277" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-33278" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Denotational-33283" href="../Denotational/#plfa_plfa-part3-Denotational-33270" class="Bound">z</a><a id="plfa_plfa-part3-Denotational-33284" class="Symbol">))</a> <a id="plfa_plfa-part3-Denotational-33287" href="../Denotational/#plfa_plfa-part3-Denotational-33232" class="Bound">v↦w∈u′</a> <a id="plfa_plfa-part3-Denotational-33294" class="Keyword">in</a>
   <a id="plfa_plfa-part3-Denotational-33300" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Denotational-33305" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-33306" href="../Denotational/#plfa_plfa-part3-Denotational-33253" class="Bound">ih</a> <a id="plfa_plfa-part3-Denotational-33309" href="../Denotational/#plfa_plfa-part3-Denotational-33240" class="Bound">u∈v</a><a id="plfa_plfa-part3-Denotational-33312" class="Symbol">)</a>
</pre><p>Regarding <code>⨆cod</code>, suppose we have a collection of functions represented by <code>u</code>, but all of them are just copies of <code>v ↦ w</code>. Then the <code>⨆cod u</code> is included in <code>w</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-⊆↦→⨆cod⊆"></a><a id="plfa_plfa-part3-Denotational-33491" href="../Denotational/#plfa_plfa-part3-Denotational-33491" class="Function">⊆↦→⨆cod⊆</a> <a id="plfa_plfa-part3-Denotational-33500" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-33502" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-33504" href="../Denotational/#plfa_plfa-part3-Denotational-33504" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-33506" href="../Denotational/#plfa_plfa-part3-Denotational-33506" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-33508" href="../Denotational/#plfa_plfa-part3-Denotational-33508" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-33510" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-33512" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-33517" class="Symbol">}</a>
        <a id="plfa_plfa-part3-Denotational-33527" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-33529" href="../Denotational/#plfa_plfa-part3-Denotational-33504" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-33531" href="../Denotational/#plfa_plfa-part3-Denotational-29734" class="Function Operator">⊆</a> <a id="plfa_plfa-part3-Denotational-33533" href="../Denotational/#plfa_plfa-part3-Denotational-33506" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-33535" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-33537" href="../Denotational/#plfa_plfa-part3-Denotational-33508" class="Bound">w</a>
          <a id="plfa_plfa-part3-Denotational-33549" class="Comment">---------</a>
        <a id="plfa_plfa-part3-Denotational-33567" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-33569" href="../Denotational/#plfa_plfa-part3-Denotational-32622" class="Function">⨆cod</a> <a id="plfa_plfa-part3-Denotational-33574" href="../Denotational/#plfa_plfa-part3-Denotational-33504" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-33576" href="../Denotational/#plfa_plfa-part3-Denotational-29734" class="Function Operator">⊆</a> <a id="plfa_plfa-part3-Denotational-33578" href="../Denotational/#plfa_plfa-part3-Denotational-33508" class="Bound">w</a>
<a id="plfa_plfa-part3-Denotational-33580" href="../Denotational/#plfa_plfa-part3-Denotational-33491" class="Function">⊆↦→⨆cod⊆</a> <a id="plfa_plfa-part3-Denotational-33589" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-33590" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Denotational-33591" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-33593" href="../Denotational/#plfa_plfa-part3-Denotational-33593" class="Bound">s</a> <a id="plfa_plfa-part3-Denotational-33595" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Denotational-33600" class="Keyword">with</a> <a id="plfa_plfa-part3-Denotational-33605" href="../Denotational/#plfa_plfa-part3-Denotational-33593" class="Bound">s</a> <a id="plfa_plfa-part3-Denotational-33607" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-33608" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Denotational-33609" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-33611" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Denotational-33616" class="Symbol">...</a> <a id="plfa_plfa-part3-Denotational-33620" class="Symbol">|</a> <a id="plfa_plfa-part3-Denotational-33622" class="Symbol">()</a>
<a id="plfa_plfa-part3-Denotational-33625" href="../Denotational/#plfa_plfa-part3-Denotational-33491" class="Function">⊆↦→⨆cod⊆</a> <a id="plfa_plfa-part3-Denotational-33634" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-33635" href="../Denotational/#plfa_plfa-part3-Denotational-33635" class="Bound">C</a> <a id="plfa_plfa-part3-Denotational-33637" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-33639" href="../Denotational/#plfa_plfa-part3-Denotational-33639" class="Bound">C′</a><a id="plfa_plfa-part3-Denotational-33641" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-33643" href="../Denotational/#plfa_plfa-part3-Denotational-33643" class="Bound">s</a> <a id="plfa_plfa-part3-Denotational-33645" href="../Denotational/#plfa_plfa-part3-Denotational-33645" class="Bound">m</a> <a id="plfa_plfa-part3-Denotational-33647" class="Keyword">with</a> <a id="plfa_plfa-part3-Denotational-33652" href="../Denotational/#plfa_plfa-part3-Denotational-33643" class="Bound">s</a> <a id="plfa_plfa-part3-Denotational-33654" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-33655" href="../Denotational/#plfa_plfa-part3-Denotational-33635" class="Bound">C</a> <a id="plfa_plfa-part3-Denotational-33657" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-33659" href="../Denotational/#plfa_plfa-part3-Denotational-33639" class="Bound">C′</a><a id="plfa_plfa-part3-Denotational-33661" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-33663" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Denotational-33668" class="Symbol">...</a> <a id="plfa_plfa-part3-Denotational-33672" class="Symbol">|</a> <a id="plfa_plfa-part3-Denotational-33674" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Denotational-33679" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-33681" class="Bound">m</a>
<a id="plfa_plfa-part3-Denotational-33683" href="../Denotational/#plfa_plfa-part3-Denotational-33491" class="Function">⊆↦→⨆cod⊆</a> <a id="plfa_plfa-part3-Denotational-33692" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-33693" href="../Denotational/#plfa_plfa-part3-Denotational-33693" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-33695" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-33697" href="../Denotational/#plfa_plfa-part3-Denotational-33697" class="Bound">u′</a><a id="plfa_plfa-part3-Denotational-33699" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-33701" href="../Denotational/#plfa_plfa-part3-Denotational-33701" class="Bound">s</a> <a id="plfa_plfa-part3-Denotational-33703" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-33704" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Denotational-33709" href="../Denotational/#plfa_plfa-part3-Denotational-33709" class="Bound">x</a><a id="plfa_plfa-part3-Denotational-33710" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-33712" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-33714" href="../Denotational/#plfa_plfa-part3-Denotational-33491" class="Function">⊆↦→⨆cod⊆</a> <a id="plfa_plfa-part3-Denotational-33723" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Denotational-33726" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-33727" href="../Denotational/#plfa_plfa-part3-Denotational-33727" class="Bound">C</a><a id="plfa_plfa-part3-Denotational-33728" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-33730" href="../Denotational/#plfa_plfa-part3-Denotational-33730" class="Bound">z</a> <a id="plfa_plfa-part3-Denotational-33732" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-33734" href="../Denotational/#plfa_plfa-part3-Denotational-33701" class="Bound">s</a> <a id="plfa_plfa-part3-Denotational-33736" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-33737" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Denotational-33742" href="../Denotational/#plfa_plfa-part3-Denotational-33730" class="Bound">z</a><a id="plfa_plfa-part3-Denotational-33743" class="Symbol">))</a> <a id="plfa_plfa-part3-Denotational-33746" href="../Denotational/#plfa_plfa-part3-Denotational-33709" class="Bound">x</a>
<a id="plfa_plfa-part3-Denotational-33748" href="../Denotational/#plfa_plfa-part3-Denotational-33491" class="Function">⊆↦→⨆cod⊆</a> <a id="plfa_plfa-part3-Denotational-33757" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-33758" href="../Denotational/#plfa_plfa-part3-Denotational-33758" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-33760" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-33762" href="../Denotational/#plfa_plfa-part3-Denotational-33762" class="Bound">u′</a><a id="plfa_plfa-part3-Denotational-33764" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-33766" href="../Denotational/#plfa_plfa-part3-Denotational-33766" class="Bound">s</a> <a id="plfa_plfa-part3-Denotational-33768" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-33769" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Denotational-33774" href="../Denotational/#plfa_plfa-part3-Denotational-33774" class="Bound">y</a><a id="plfa_plfa-part3-Denotational-33775" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-33777" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-33779" href="../Denotational/#plfa_plfa-part3-Denotational-33491" class="Function">⊆↦→⨆cod⊆</a> <a id="plfa_plfa-part3-Denotational-33788" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Denotational-33791" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-33792" href="../Denotational/#plfa_plfa-part3-Denotational-33792" class="Bound">C</a><a id="plfa_plfa-part3-Denotational-33793" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-33795" href="../Denotational/#plfa_plfa-part3-Denotational-33795" class="Bound">z</a> <a id="plfa_plfa-part3-Denotational-33797" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-33799" href="../Denotational/#plfa_plfa-part3-Denotational-33766" class="Bound">s</a> <a id="plfa_plfa-part3-Denotational-33801" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-33802" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Denotational-33807" href="../Denotational/#plfa_plfa-part3-Denotational-33795" class="Bound">z</a><a id="plfa_plfa-part3-Denotational-33808" class="Symbol">))</a> <a id="plfa_plfa-part3-Denotational-33811" href="../Denotational/#plfa_plfa-part3-Denotational-33774" class="Bound">y</a>
</pre><p>With the <code>⨆dom</code> and <code>⨆cod</code> functions in hand, we can make precise the conclusion of the inversion principle for functions, which we package into the following predicate named <code>factor</code>. We say that <code>v ↦ w</code> <em>factors</em> <code>u</code> into <code>u′</code> if <code>u′</code> is included in <code>u</code>, if <code>u′</code> contains only functions, its domain is less than <code>v</code>, and its codomain is greater than <code>w</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-factor"></a><a id="plfa_plfa-part3-Denotational-34184" href="../Denotational/#plfa_plfa-part3-Denotational-34184" class="Function">factor</a> <a id="plfa_plfa-part3-Denotational-34191" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-34193" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-34194" href="../Denotational/#plfa_plfa-part3-Denotational-34194" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-34196" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-34198" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-34203" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-34205" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-34207" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-34208" href="../Denotational/#plfa_plfa-part3-Denotational-34208" class="Bound">u′</a> <a id="plfa_plfa-part3-Denotational-34211" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-34213" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-34218" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-34220" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-34222" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-34223" href="../Denotational/#plfa_plfa-part3-Denotational-34223" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-34225" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-34227" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-34232" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-34234" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-34236" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-34237" href="../Denotational/#plfa_plfa-part3-Denotational-34237" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-34239" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-34241" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-34246" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-34248" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-34250" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="plfa_plfa-part3-Denotational-34254" href="../Denotational/#plfa_plfa-part3-Denotational-34184" class="Function">factor</a> <a id="plfa_plfa-part3-Denotational-34261" href="../Denotational/#plfa_plfa-part3-Denotational-34261" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-34263" href="../Denotational/#plfa_plfa-part3-Denotational-34263" class="Bound">u′</a> <a id="plfa_plfa-part3-Denotational-34266" href="../Denotational/#plfa_plfa-part3-Denotational-34266" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-34268" href="../Denotational/#plfa_plfa-part3-Denotational-34268" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-34270" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-34272" href="../Denotational/#plfa_plfa-part3-Denotational-31410" class="Function">all-funs</a> <a id="plfa_plfa-part3-Denotational-34281" href="../Denotational/#plfa_plfa-part3-Denotational-34263" class="Bound">u′</a>  <a id="plfa_plfa-part3-Denotational-34285" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Denotational-34288" href="../Denotational/#plfa_plfa-part3-Denotational-34263" class="Bound">u′</a> <a id="plfa_plfa-part3-Denotational-34291" href="../Denotational/#plfa_plfa-part3-Denotational-29734" class="Function Operator">⊆</a> <a id="plfa_plfa-part3-Denotational-34293" href="../Denotational/#plfa_plfa-part3-Denotational-34261" class="Bound">u</a>  <a id="plfa_plfa-part3-Denotational-34296" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Denotational-34299" href="../Denotational/#plfa_plfa-part3-Denotational-32532" class="Function">⨆dom</a> <a id="plfa_plfa-part3-Denotational-34304" href="../Denotational/#plfa_plfa-part3-Denotational-34263" class="Bound">u′</a> <a id="plfa_plfa-part3-Denotational-34307" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-34309" href="../Denotational/#plfa_plfa-part3-Denotational-34266" class="Bound">v</a>  <a id="plfa_plfa-part3-Denotational-34312" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Denotational-34315" href="../Denotational/#plfa_plfa-part3-Denotational-34268" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-34317" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-34319" href="../Denotational/#plfa_plfa-part3-Denotational-32622" class="Function">⨆cod</a> <a id="plfa_plfa-part3-Denotational-34324" href="../Denotational/#plfa_plfa-part3-Denotational-34263" class="Bound">u′</a>
</pre><p>So the inversion principle for functions can be stated as</p><pre><code>  v ↦ w ⊑ u
  ---------------
→ factor u u′ v w</code></pre><p>We prove the inversion principle for functions by induction on the derivation of the less-than relation. To make the induction hypothesis stronger, we broaden the premise <code>v ↦ w ⊑ u</code> to <code>u₁ ⊑ u₂</code>, and strengthen the conclusion to say that for <em>every</em> function value <code>v ↦ w ∈ u₁</code>, we have that <code>v ↦ w</code> factors <code>u₂</code> into some value <code>u₃</code>.</p><pre><code>→ u₁ ⊑ u₂
  ------------------------------------------------------
→ ∀{v w} → v ↦ w ∈ u₁ → Σ[ u₃ ∈ Value ] factor u₂ u₃ v w</code></pre><h3 id="inversion-of-less-than-for-functions-the-case-for--trans">Inversion of less-than for functions, the case for ⊑-trans</h3><p>The crux of the proof is the case for <code>⊑-trans</code>.</p><pre><code>u₁ ⊑ u   u ⊑ u₂
--------------- (⊑-trans)
    u₁ ⊑ u₂</code></pre><p>By the induction hypothesis for <code>u₁ ⊑ u</code>, we know that <code>v ↦ w factors u into u′</code>, for some value <code>u′</code>, so we have <code>all-funs u′</code> and <code>u′ ⊆ u</code>. By the induction hypothesis for <code>u ⊑ u₂</code>, we know that for any <code>v′ ↦ w′ ∈ u</code>, <code>v′ ↦ w′</code> factors <code>u₂</code> into <code>u₃</code>. With these facts in hand, we proceed by induction on <code>u′</code> to prove that <code>(⨆dom u′) ↦ (⨆cod u′)</code> factors <code>u₂</code> into <code>u₃</code>. We discuss each case of the proof in the text below.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-sub-inv-trans"></a><a id="plfa_plfa-part3-Denotational-35544" href="../Denotational/#plfa_plfa-part3-Denotational-35544" class="Function">sub-inv-trans</a> <a id="plfa_plfa-part3-Denotational-35558" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-35560" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-35562" href="../Denotational/#plfa_plfa-part3-Denotational-35562" class="Bound">u′</a> <a id="plfa_plfa-part3-Denotational-35565" href="../Denotational/#plfa_plfa-part3-Denotational-35565" class="Bound">u₂</a> <a id="plfa_plfa-part3-Denotational-35568" href="../Denotational/#plfa_plfa-part3-Denotational-35568" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-35570" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-35572" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-35577" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Denotational-35583" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-35585" href="../Denotational/#plfa_plfa-part3-Denotational-31410" class="Function">all-funs</a> <a id="plfa_plfa-part3-Denotational-35594" href="../Denotational/#plfa_plfa-part3-Denotational-35562" class="Bound">u′</a>  <a id="plfa_plfa-part3-Denotational-35598" class="Symbol">→</a>  <a id="plfa_plfa-part3-Denotational-35601" href="../Denotational/#plfa_plfa-part3-Denotational-35562" class="Bound">u′</a> <a id="plfa_plfa-part3-Denotational-35604" href="../Denotational/#plfa_plfa-part3-Denotational-29734" class="Function Operator">⊆</a> <a id="plfa_plfa-part3-Denotational-35606" href="../Denotational/#plfa_plfa-part3-Denotational-35568" class="Bound">u</a>
    <a id="plfa_plfa-part3-Denotational-35612" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-35614" class="Symbol">(∀{</a><a id="plfa_plfa-part3-Denotational-35617" href="../Denotational/#plfa_plfa-part3-Denotational-35617" class="Bound">v′</a> <a id="plfa_plfa-part3-Denotational-35620" href="../Denotational/#plfa_plfa-part3-Denotational-35620" class="Bound">w′</a><a id="plfa_plfa-part3-Denotational-35622" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-35624" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-35626" href="../Denotational/#plfa_plfa-part3-Denotational-35617" class="Bound">v′</a> <a id="plfa_plfa-part3-Denotational-35629" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-35631" href="../Denotational/#plfa_plfa-part3-Denotational-35620" class="Bound">w′</a> <a id="plfa_plfa-part3-Denotational-35634" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">∈</a> <a id="plfa_plfa-part3-Denotational-35636" href="../Denotational/#plfa_plfa-part3-Denotational-35568" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-35638" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-35640" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Denotational-35643" href="../Denotational/#plfa_plfa-part3-Denotational-35643" class="Bound">u₃</a> <a id="plfa_plfa-part3-Denotational-35646" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Denotational-35648" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-35654" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Denotational-35656" href="../Denotational/#plfa_plfa-part3-Denotational-34184" class="Function">factor</a> <a id="plfa_plfa-part3-Denotational-35663" href="../Denotational/#plfa_plfa-part3-Denotational-35565" class="Bound">u₂</a> <a id="plfa_plfa-part3-Denotational-35666" href="../Denotational/#plfa_plfa-part3-Denotational-35643" class="Bound">u₃</a> <a id="plfa_plfa-part3-Denotational-35669" href="../Denotational/#plfa_plfa-part3-Denotational-35617" class="Bound">v′</a> <a id="plfa_plfa-part3-Denotational-35672" href="../Denotational/#plfa_plfa-part3-Denotational-35620" class="Bound">w′</a><a id="plfa_plfa-part3-Denotational-35674" class="Symbol">)</a>
      <a id="plfa_plfa-part3-Denotational-35682" class="Comment">---------------------------------------------------------------</a>
    <a id="plfa_plfa-part3-Denotational-35750" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-35752" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Denotational-35755" href="../Denotational/#plfa_plfa-part3-Denotational-35755" class="Bound">u₃</a> <a id="plfa_plfa-part3-Denotational-35758" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Denotational-35760" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-35766" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Denotational-35768" href="../Denotational/#plfa_plfa-part3-Denotational-34184" class="Function">factor</a> <a id="plfa_plfa-part3-Denotational-35775" href="../Denotational/#plfa_plfa-part3-Denotational-35565" class="Bound">u₂</a> <a id="plfa_plfa-part3-Denotational-35778" href="../Denotational/#plfa_plfa-part3-Denotational-35755" class="Bound">u₃</a> <a id="plfa_plfa-part3-Denotational-35781" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-35782" href="../Denotational/#plfa_plfa-part3-Denotational-32532" class="Function">⨆dom</a> <a id="plfa_plfa-part3-Denotational-35787" href="../Denotational/#plfa_plfa-part3-Denotational-35562" class="Bound">u′</a><a id="plfa_plfa-part3-Denotational-35789" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-35791" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-35792" href="../Denotational/#plfa_plfa-part3-Denotational-32622" class="Function">⨆cod</a> <a id="plfa_plfa-part3-Denotational-35797" href="../Denotational/#plfa_plfa-part3-Denotational-35562" class="Bound">u′</a><a id="plfa_plfa-part3-Denotational-35799" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-35801" href="../Denotational/#plfa_plfa-part3-Denotational-35544" class="Function">sub-inv-trans</a> <a id="plfa_plfa-part3-Denotational-35815" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-35816" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Denotational-35817" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-35819" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-35820" href="../Denotational/#plfa_plfa-part3-Denotational-35820" class="Bound">u₂</a><a id="plfa_plfa-part3-Denotational-35822" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-35824" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-35825" href="../Denotational/#plfa_plfa-part3-Denotational-35825" class="Bound">u</a><a id="plfa_plfa-part3-Denotational-35826" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-35828" href="../Denotational/#plfa_plfa-part3-Denotational-35828" class="Bound">fu′</a> <a id="plfa_plfa-part3-Denotational-35832" href="../Denotational/#plfa_plfa-part3-Denotational-35832" class="Bound">u′⊆u</a> <a id="plfa_plfa-part3-Denotational-35837" href="../Denotational/#plfa_plfa-part3-Denotational-35837" class="Bound">IH</a> <a id="plfa_plfa-part3-Denotational-35840" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Denotational-35845" href="https://agda.github.io/agda-stdlib/v1.7.1/Relation.Nullary.Negation.Core.html#778" class="Function">contradiction</a> <a id="plfa_plfa-part3-Denotational-35859" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-35860" href="../Denotational/#plfa_plfa-part3-Denotational-35828" class="Bound">fu′</a> <a id="plfa_plfa-part3-Denotational-35864" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Denotational-35868" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-35870" href="../Denotational/#plfa_plfa-part3-Denotational-31514" class="Function">¬Fun⊥</a>
<a id="plfa_plfa-part3-Denotational-35876" href="../Denotational/#plfa_plfa-part3-Denotational-35544" class="Function">sub-inv-trans</a> <a id="plfa_plfa-part3-Denotational-35890" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-35891" href="../Denotational/#plfa_plfa-part3-Denotational-35891" class="Bound">u₁′</a> <a id="plfa_plfa-part3-Denotational-35895" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-35897" href="../Denotational/#plfa_plfa-part3-Denotational-35897" class="Bound">u₂′</a><a id="plfa_plfa-part3-Denotational-35900" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-35902" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-35903" href="../Denotational/#plfa_plfa-part3-Denotational-35903" class="Bound">u₂</a><a id="plfa_plfa-part3-Denotational-35905" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-35907" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-35908" href="../Denotational/#plfa_plfa-part3-Denotational-35908" class="Bound">u</a><a id="plfa_plfa-part3-Denotational-35909" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-35911" href="../Denotational/#plfa_plfa-part3-Denotational-35911" class="Bound">fg</a> <a id="plfa_plfa-part3-Denotational-35914" href="../Denotational/#plfa_plfa-part3-Denotational-35914" class="Bound">u′⊆u</a> <a id="plfa_plfa-part3-Denotational-35919" href="../Denotational/#plfa_plfa-part3-Denotational-35919" class="Bound">IH</a> <a id="plfa_plfa-part3-Denotational-35922" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-35924" href="../Denotational/#plfa_plfa-part3-Denotational-35919" class="Bound">IH</a> <a id="plfa_plfa-part3-Denotational-35927" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-35928" href="../Denotational/#plfa_plfa-part3-Denotational-30968" class="Function">↦⊆→∈</a> <a id="plfa_plfa-part3-Denotational-35933" href="../Denotational/#plfa_plfa-part3-Denotational-35914" class="Bound">u′⊆u</a><a id="plfa_plfa-part3-Denotational-35937" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-35939" href="../Denotational/#plfa_plfa-part3-Denotational-35544" class="Function">sub-inv-trans</a> <a id="plfa_plfa-part3-Denotational-35953" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-35954" href="../Denotational/#plfa_plfa-part3-Denotational-35954" class="Bound">u₁′</a> <a id="plfa_plfa-part3-Denotational-35958" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-35960" href="../Denotational/#plfa_plfa-part3-Denotational-35960" class="Bound">u₂′</a><a id="plfa_plfa-part3-Denotational-35963" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-35965" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-35966" href="../Denotational/#plfa_plfa-part3-Denotational-35966" class="Bound">u₂</a><a id="plfa_plfa-part3-Denotational-35968" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-35970" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-35971" href="../Denotational/#plfa_plfa-part3-Denotational-35971" class="Bound">u</a><a id="plfa_plfa-part3-Denotational-35972" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-35974" href="../Denotational/#plfa_plfa-part3-Denotational-35974" class="Bound">fg</a> <a id="plfa_plfa-part3-Denotational-35977" href="../Denotational/#plfa_plfa-part3-Denotational-35977" class="Bound">u′⊆u</a> <a id="plfa_plfa-part3-Denotational-35982" href="../Denotational/#plfa_plfa-part3-Denotational-35982" class="Bound">IH</a>
    <a id="plfa_plfa-part3-Denotational-35989" class="Keyword">with</a> <a id="plfa_plfa-part3-Denotational-35994" href="../Denotational/#plfa_plfa-part3-Denotational-30623" class="Function">⊔⊆-inv</a> <a id="plfa_plfa-part3-Denotational-36001" href="../Denotational/#plfa_plfa-part3-Denotational-35977" class="Bound">u′⊆u</a>
<a id="plfa_plfa-part3-Denotational-36006" class="Symbol">...</a> <a id="plfa_plfa-part3-Denotational-36010" class="Symbol">|</a> <a id="plfa_plfa-part3-Denotational-36012" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-36014" href="../Denotational/#plfa_plfa-part3-Denotational-36014" class="Bound">u₁′⊆u</a> <a id="plfa_plfa-part3-Denotational-36020" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-36022" href="../Denotational/#plfa_plfa-part3-Denotational-36022" class="Bound">u₂′⊆u</a> <a id="plfa_plfa-part3-Denotational-36028" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a>
    <a id="plfa_plfa-part3-Denotational-36034" class="Keyword">with</a> <a id="plfa_plfa-part3-Denotational-36039" href="../Denotational/#plfa_plfa-part3-Denotational-35544" class="Function">sub-inv-trans</a> <a id="plfa_plfa-part3-Denotational-36053" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-36054" class="Bound">u₁′</a><a id="plfa_plfa-part3-Denotational-36057" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-36059" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-36060" class="Bound">u₂</a><a id="plfa_plfa-part3-Denotational-36062" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-36064" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-36065" class="Bound">u</a><a id="plfa_plfa-part3-Denotational-36066" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-36068" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Denotational-36071" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-36072" href="../Denotational/#plfa_plfa-part3-Denotational-36072" class="Bound">v′</a><a id="plfa_plfa-part3-Denotational-36074" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-36076" href="../Denotational/#plfa_plfa-part3-Denotational-36076" class="Bound">z</a> <a id="plfa_plfa-part3-Denotational-36078" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-36080" class="Bound">fg</a> <a id="plfa_plfa-part3-Denotational-36083" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-36084" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Denotational-36089" href="../Denotational/#plfa_plfa-part3-Denotational-36076" class="Bound">z</a><a id="plfa_plfa-part3-Denotational-36090" class="Symbol">))</a> <a id="plfa_plfa-part3-Denotational-36093" href="../Denotational/#plfa_plfa-part3-Denotational-36014" class="Bound">u₁′⊆u</a> <a id="plfa_plfa-part3-Denotational-36099" class="Bound">IH</a>
       <a id="plfa_plfa-part3-Denotational-36109" class="Symbol">|</a> <a id="plfa_plfa-part3-Denotational-36111" href="../Denotational/#plfa_plfa-part3-Denotational-35544" class="Function">sub-inv-trans</a> <a id="plfa_plfa-part3-Denotational-36125" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-36126" class="Bound">u₂′</a><a id="plfa_plfa-part3-Denotational-36129" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-36131" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-36132" class="Bound">u₂</a><a id="plfa_plfa-part3-Denotational-36134" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-36136" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-36137" class="Bound">u</a><a id="plfa_plfa-part3-Denotational-36138" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-36140" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Denotational-36143" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-36144" href="../Denotational/#plfa_plfa-part3-Denotational-36144" class="Bound">v′</a><a id="plfa_plfa-part3-Denotational-36146" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-36148" href="../Denotational/#plfa_plfa-part3-Denotational-36148" class="Bound">z</a> <a id="plfa_plfa-part3-Denotational-36150" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-36152" class="Bound">fg</a> <a id="plfa_plfa-part3-Denotational-36155" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-36156" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Denotational-36161" href="../Denotational/#plfa_plfa-part3-Denotational-36148" class="Bound">z</a><a id="plfa_plfa-part3-Denotational-36162" class="Symbol">))</a> <a id="plfa_plfa-part3-Denotational-36165" href="../Denotational/#plfa_plfa-part3-Denotational-36022" class="Bound">u₂′⊆u</a> <a id="plfa_plfa-part3-Denotational-36171" class="Bound">IH</a>
<a id="plfa_plfa-part3-Denotational-36174" class="Symbol">...</a> <a id="plfa_plfa-part3-Denotational-36178" class="Symbol">|</a> <a id="plfa_plfa-part3-Denotational-36180" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-36182" href="../Denotational/#plfa_plfa-part3-Denotational-36182" class="Bound">u₃₁</a> <a id="plfa_plfa-part3-Denotational-36186" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-36188" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-36190" href="../Denotational/#plfa_plfa-part3-Denotational-36190" class="Bound">fu21&#39;</a> <a id="plfa_plfa-part3-Denotational-36196" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-36198" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-36200" href="../Denotational/#plfa_plfa-part3-Denotational-36200" class="Bound">u₃₁⊆u₂</a> <a id="plfa_plfa-part3-Denotational-36207" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-36209" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-36211" href="../Denotational/#plfa_plfa-part3-Denotational-36211" class="Bound">du₃₁⊑du₁′</a> <a id="plfa_plfa-part3-Denotational-36221" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-36223" href="../Denotational/#plfa_plfa-part3-Denotational-36223" class="Bound">cu₁′⊑cu₃₁</a> <a id="plfa_plfa-part3-Denotational-36233" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-36235" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-36237" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-36239" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a>
    <a id="plfa_plfa-part3-Denotational-36245" class="Symbol">|</a> <a id="plfa_plfa-part3-Denotational-36247" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-36249" href="../Denotational/#plfa_plfa-part3-Denotational-36249" class="Bound">u₃₂</a> <a id="plfa_plfa-part3-Denotational-36253" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-36255" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-36257" href="../Denotational/#plfa_plfa-part3-Denotational-36257" class="Bound">fu22&#39;</a> <a id="plfa_plfa-part3-Denotational-36263" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-36265" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-36267" href="../Denotational/#plfa_plfa-part3-Denotational-36267" class="Bound">u₃₂⊆u₂</a> <a id="plfa_plfa-part3-Denotational-36274" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-36276" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-36278" href="../Denotational/#plfa_plfa-part3-Denotational-36278" class="Bound">du₃₂⊑du₂′</a> <a id="plfa_plfa-part3-Denotational-36288" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-36290" href="../Denotational/#plfa_plfa-part3-Denotational-36290" class="Bound">cu₁′⊑cu₃₂</a> <a id="plfa_plfa-part3-Denotational-36300" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-36302" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-36304" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-36306" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-36308" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Denotational-36316" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-36318" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-36319" href="../Denotational/#plfa_plfa-part3-Denotational-36182" class="Bound">u₃₁</a> <a id="plfa_plfa-part3-Denotational-36323" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-36325" href="../Denotational/#plfa_plfa-part3-Denotational-36249" class="Bound">u₃₂</a><a id="plfa_plfa-part3-Denotational-36328" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-36330" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-36332" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-36334" href="../Denotational/#plfa_plfa-part3-Denotational-36436" class="Function">fu₂′</a> <a id="plfa_plfa-part3-Denotational-36339" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-36341" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-36343" href="../Denotational/#plfa_plfa-part3-Denotational-36575" class="Function">u₂′⊆u₂</a> <a id="plfa_plfa-part3-Denotational-36350" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a>
      <a id="plfa_plfa-part3-Denotational-36358" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-36360" href="../Denotational/#plfa_plfa-part3-Denotational-5742" class="Function">⊔⊑⊔</a> <a id="plfa_plfa-part3-Denotational-36364" href="../Denotational/#plfa_plfa-part3-Denotational-36211" class="Bound">du₃₁⊑du₁′</a> <a id="plfa_plfa-part3-Denotational-36374" href="../Denotational/#plfa_plfa-part3-Denotational-36278" class="Bound">du₃₂⊑du₂′</a> <a id="plfa_plfa-part3-Denotational-36384" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a>
        <a id="plfa_plfa-part3-Denotational-36394" href="../Denotational/#plfa_plfa-part3-Denotational-5742" class="Function">⊔⊑⊔</a> <a id="plfa_plfa-part3-Denotational-36398" href="../Denotational/#plfa_plfa-part3-Denotational-36223" class="Bound">cu₁′⊑cu₃₁</a> <a id="plfa_plfa-part3-Denotational-36408" href="../Denotational/#plfa_plfa-part3-Denotational-36290" class="Bound">cu₁′⊑cu₃₂</a> <a id="plfa_plfa-part3-Denotational-36418" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-36420" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-36422" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-36424" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a>
    <a id="plfa_plfa-part3-Denotational-36430" class="Keyword">where</a> <a id="plfa_plfa-part3-Denotational-36436" href="../Denotational/#plfa_plfa-part3-Denotational-36436" class="Function">fu₂′</a> <a id="plfa_plfa-part3-Denotational-36441" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-36443" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-36444" href="../Denotational/#plfa_plfa-part3-Denotational-36444" class="Bound">v′</a> <a id="plfa_plfa-part3-Denotational-36447" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-36449" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-36454" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-36456" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-36458" href="../Denotational/#plfa_plfa-part3-Denotational-36444" class="Bound">v′</a> <a id="plfa_plfa-part3-Denotational-36461" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">∈</a> <a id="plfa_plfa-part3-Denotational-36463" href="../Denotational/#plfa_plfa-part3-Denotational-36182" class="Bound">u₃₁</a> <a id="plfa_plfa-part3-Denotational-36467" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="plfa_plfa-part3-Denotational-36469" href="../Denotational/#plfa_plfa-part3-Denotational-36444" class="Bound">v′</a> <a id="plfa_plfa-part3-Denotational-36472" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">∈</a> <a id="plfa_plfa-part3-Denotational-36474" href="../Denotational/#plfa_plfa-part3-Denotational-36249" class="Bound">u₃₂</a> <a id="plfa_plfa-part3-Denotational-36478" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-36480" href="../Denotational/#plfa_plfa-part3-Denotational-31346" class="Datatype">Fun</a> <a id="plfa_plfa-part3-Denotational-36484" href="../Denotational/#plfa_plfa-part3-Denotational-36444" class="Bound">v′</a>
          <a id="plfa_plfa-part3-Denotational-36497" href="../Denotational/#plfa_plfa-part3-Denotational-36436" class="Function">fu₂′</a> <a id="plfa_plfa-part3-Denotational-36502" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-36503" href="../Denotational/#plfa_plfa-part3-Denotational-36503" class="Bound">v′</a><a id="plfa_plfa-part3-Denotational-36505" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-36507" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-36508" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Denotational-36513" href="../Denotational/#plfa_plfa-part3-Denotational-36513" class="Bound">x</a><a id="plfa_plfa-part3-Denotational-36514" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-36516" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-36518" href="../Denotational/#plfa_plfa-part3-Denotational-36190" class="Bound">fu21&#39;</a> <a id="plfa_plfa-part3-Denotational-36524" href="../Denotational/#plfa_plfa-part3-Denotational-36513" class="Bound">x</a>
          <a id="plfa_plfa-part3-Denotational-36536" href="../Denotational/#plfa_plfa-part3-Denotational-36436" class="Function">fu₂′</a> <a id="plfa_plfa-part3-Denotational-36541" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-36542" href="../Denotational/#plfa_plfa-part3-Denotational-36542" class="Bound">v′</a><a id="plfa_plfa-part3-Denotational-36544" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-36546" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-36547" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Denotational-36552" href="../Denotational/#plfa_plfa-part3-Denotational-36552" class="Bound">y</a><a id="plfa_plfa-part3-Denotational-36553" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-36555" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-36557" href="../Denotational/#plfa_plfa-part3-Denotational-36257" class="Bound">fu22&#39;</a> <a id="plfa_plfa-part3-Denotational-36563" href="../Denotational/#plfa_plfa-part3-Denotational-36552" class="Bound">y</a>
          <a id="plfa_plfa-part3-Denotational-36575" href="../Denotational/#plfa_plfa-part3-Denotational-36575" class="Function">u₂′⊆u₂</a> <a id="plfa_plfa-part3-Denotational-36582" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-36584" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-36585" href="../Denotational/#plfa_plfa-part3-Denotational-36585" class="Bound">C</a> <a id="plfa_plfa-part3-Denotational-36587" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-36589" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-36594" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-36596" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-36598" href="../Denotational/#plfa_plfa-part3-Denotational-36585" class="Bound">C</a> <a id="plfa_plfa-part3-Denotational-36600" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">∈</a> <a id="plfa_plfa-part3-Denotational-36602" href="../Denotational/#plfa_plfa-part3-Denotational-36182" class="Bound">u₃₁</a> <a id="plfa_plfa-part3-Denotational-36606" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="plfa_plfa-part3-Denotational-36608" href="../Denotational/#plfa_plfa-part3-Denotational-36585" class="Bound">C</a> <a id="plfa_plfa-part3-Denotational-36610" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">∈</a> <a id="plfa_plfa-part3-Denotational-36612" href="../Denotational/#plfa_plfa-part3-Denotational-36249" class="Bound">u₃₂</a> <a id="plfa_plfa-part3-Denotational-36616" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-36618" href="../Denotational/#plfa_plfa-part3-Denotational-36585" class="Bound">C</a> <a id="plfa_plfa-part3-Denotational-36620" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">∈</a> <a id="plfa_plfa-part3-Denotational-36622" class="Bound">u₂</a>
          <a id="plfa_plfa-part3-Denotational-36635" href="../Denotational/#plfa_plfa-part3-Denotational-36575" class="Function">u₂′⊆u₂</a> <a id="plfa_plfa-part3-Denotational-36642" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-36643" href="../Denotational/#plfa_plfa-part3-Denotational-36643" class="Bound">C</a><a id="plfa_plfa-part3-Denotational-36644" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-36646" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-36647" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Denotational-36652" href="../Denotational/#plfa_plfa-part3-Denotational-36652" class="Bound">x</a><a id="plfa_plfa-part3-Denotational-36653" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-36655" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-36657" href="../Denotational/#plfa_plfa-part3-Denotational-36200" class="Bound">u₃₁⊆u₂</a> <a id="plfa_plfa-part3-Denotational-36664" href="../Denotational/#plfa_plfa-part3-Denotational-36652" class="Bound">x</a>
          <a id="plfa_plfa-part3-Denotational-36676" href="../Denotational/#plfa_plfa-part3-Denotational-36575" class="Function">u₂′⊆u₂</a> <a id="plfa_plfa-part3-Denotational-36683" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-36684" href="../Denotational/#plfa_plfa-part3-Denotational-36684" class="Bound">C</a><a id="plfa_plfa-part3-Denotational-36685" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-36687" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-36688" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Denotational-36693" href="../Denotational/#plfa_plfa-part3-Denotational-36693" class="Bound">y</a><a id="plfa_plfa-part3-Denotational-36694" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-36696" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-36698" href="../Denotational/#plfa_plfa-part3-Denotational-36267" class="Bound">u₃₂⊆u₂</a> <a id="plfa_plfa-part3-Denotational-36705" href="../Denotational/#plfa_plfa-part3-Denotational-36693" class="Bound">y</a>
</pre><ul><li><p>Suppose <code>u′ ≡ ⊥</code>. Then we have a contradiction because it is not the case that <code>Fun ⊥</code>.</p></li><li><p>Suppose <code>u′ ≡ u₁′ ↦ u₂′</code>. Then <code>u₁′ ↦ u₂′ ∈ u</code> and we can apply the premise (the induction hypothesis from <code>u ⊑ u₂</code>) to obtain that <code>u₁′ ↦ u₂′</code> factors <code>u₂</code> into <code>u₃</code>. This case is complete because <code>⨆dom u′ ≡ u₁′</code> and <code>⨆cod u′ ≡ u₂′</code>.</p></li><li><p>Suppose <code>u′ ≡ u₁′ ⊔ u₂′</code>. Then we have <code>u₁′ ⊆ u</code> and <code>u₂′ ⊆ u</code>. We also have <code>all-funs u₁′</code> and <code>all-funs u₂′</code>, so we can apply the induction hypothesis for both <code>u₁′</code> and <code>u₂′</code>. So there exists values <code>u₃₁</code> and <code>u₃₂</code> such that <code>(⨆dom u₁′) ↦ (⨆cod u₁′)</code> factors <code>u</code> into <code>u₃₁</code> and <code>(⨆dom u₂′) ↦ (⨆cod u₂′)</code> factors <code>u</code> into <code>u₃₂</code>. We will show that <code>(⨆dom u) ↦ (⨆cod u)</code> factors <code>u</code> into <code>u₃₁ ⊔ u₃₂</code>. So we need to show that</p><pre><code>  ⨆dom (u₃₁ ⊔ u₃₂) ⊑ ⨆dom (u₁′ ⊔ u₂′)
  ⨆cod (u₁′ ⊔ u₂′) ⊑ ⨆cod (u₃₁ ⊔ u₃₂)</code></pre><p>But those both follow directly from the factoring of <code>u</code> into <code>u₃₁</code> and <code>u₃₂</code>, using the monotonicity of <code>⊔</code> with respect to <code>⊑</code>.</p></li></ul><h3 id="inversion-of-less-than-for-functions">Inversion of less-than for functions</h3><p>We come to the proof of the main lemma concerning the inversion of less-than for functions. We show that if <code>u₁ ⊑ u₂</code>, then for any <code>v ↦ w ∈ u₁</code>, we can factor <code>u₂</code> into <code>u₃</code> according to <code>v ↦ w</code>. We proceed by induction on the derivation of <code>u₁ ⊑ u₂</code>, and describe each case in the text after the Agda proof.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-sub-inv"></a><a id="plfa_plfa-part3-Denotational-38075" href="../Denotational/#plfa_plfa-part3-Denotational-38075" class="Function">sub-inv</a> <a id="plfa_plfa-part3-Denotational-38083" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-38085" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-38087" href="../Denotational/#plfa_plfa-part3-Denotational-38087" class="Bound">u₁</a> <a id="plfa_plfa-part3-Denotational-38090" href="../Denotational/#plfa_plfa-part3-Denotational-38090" class="Bound">u₂</a> <a id="plfa_plfa-part3-Denotational-38093" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-38095" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-38100" class="Symbol">}</a>
        <a id="plfa_plfa-part3-Denotational-38110" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-38112" href="../Denotational/#plfa_plfa-part3-Denotational-38087" class="Bound">u₁</a> <a id="plfa_plfa-part3-Denotational-38115" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-38117" href="../Denotational/#plfa_plfa-part3-Denotational-38090" class="Bound">u₂</a>
        <a id="plfa_plfa-part3-Denotational-38128" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-38130" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-38132" href="../Denotational/#plfa_plfa-part3-Denotational-38132" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-38134" href="../Denotational/#plfa_plfa-part3-Denotational-38134" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-38135" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-38137" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-38139" href="../Denotational/#plfa_plfa-part3-Denotational-38132" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-38141" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-38143" href="../Denotational/#plfa_plfa-part3-Denotational-38134" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-38145" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">∈</a> <a id="plfa_plfa-part3-Denotational-38147" href="../Denotational/#plfa_plfa-part3-Denotational-38087" class="Bound">u₁</a>
          <a id="plfa_plfa-part3-Denotational-38160" class="Comment">-------------------------------------</a>
        <a id="plfa_plfa-part3-Denotational-38206" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-38208" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Denotational-38211" href="../Denotational/#plfa_plfa-part3-Denotational-38211" class="Bound">u₃</a> <a id="plfa_plfa-part3-Denotational-38214" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Denotational-38216" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-38222" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Denotational-38224" href="../Denotational/#plfa_plfa-part3-Denotational-34184" class="Function">factor</a> <a id="plfa_plfa-part3-Denotational-38231" href="../Denotational/#plfa_plfa-part3-Denotational-38090" class="Bound">u₂</a> <a id="plfa_plfa-part3-Denotational-38234" href="../Denotational/#plfa_plfa-part3-Denotational-38211" class="Bound">u₃</a> <a id="plfa_plfa-part3-Denotational-38237" href="../Denotational/#plfa_plfa-part3-Denotational-38132" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-38239" href="../Denotational/#plfa_plfa-part3-Denotational-38134" class="Bound">w</a>
<a id="plfa_plfa-part3-Denotational-38241" href="../Denotational/#plfa_plfa-part3-Denotational-38075" class="Function">sub-inv</a> <a id="plfa_plfa-part3-Denotational-38249" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-38250" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Denotational-38251" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-38253" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-38254" href="../Denotational/#plfa_plfa-part3-Denotational-38254" class="Bound">u₂</a><a id="plfa_plfa-part3-Denotational-38256" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-38258" href="../Denotational/#plfa_plfa-part3-Denotational-4370" class="InductiveConstructor">⊑-bot</a> <a id="plfa_plfa-part3-Denotational-38264" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-38265" href="../Denotational/#plfa_plfa-part3-Denotational-38265" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-38266" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-38268" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-38269" href="../Denotational/#plfa_plfa-part3-Denotational-38269" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-38270" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-38272" class="Symbol">()</a>
<a id="plfa_plfa-part3-Denotational-38275" href="../Denotational/#plfa_plfa-part3-Denotational-38075" class="Function">sub-inv</a> <a id="plfa_plfa-part3-Denotational-38283" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-38284" href="../Denotational/#plfa_plfa-part3-Denotational-38284" class="Bound">u₁₁</a> <a id="plfa_plfa-part3-Denotational-38288" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-38290" href="../Denotational/#plfa_plfa-part3-Denotational-38290" class="Bound">u₁₂</a><a id="plfa_plfa-part3-Denotational-38293" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-38295" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-38296" href="../Denotational/#plfa_plfa-part3-Denotational-38296" class="Bound">u₂</a><a id="plfa_plfa-part3-Denotational-38298" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-38300" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-38301" href="../Denotational/#plfa_plfa-part3-Denotational-4395" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Denotational-38310" href="../Denotational/#plfa_plfa-part3-Denotational-38310" class="Bound">lt1</a> <a id="plfa_plfa-part3-Denotational-38314" href="../Denotational/#plfa_plfa-part3-Denotational-38314" class="Bound">lt2</a><a id="plfa_plfa-part3-Denotational-38317" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-38319" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-38320" href="../Denotational/#plfa_plfa-part3-Denotational-38320" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-38321" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-38323" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-38324" href="../Denotational/#plfa_plfa-part3-Denotational-38324" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-38325" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-38327" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-38328" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Denotational-38333" href="../Denotational/#plfa_plfa-part3-Denotational-38333" class="Bound">x</a><a id="plfa_plfa-part3-Denotational-38334" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-38336" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-38338" href="../Denotational/#plfa_plfa-part3-Denotational-38075" class="Function">sub-inv</a> <a id="plfa_plfa-part3-Denotational-38346" href="../Denotational/#plfa_plfa-part3-Denotational-38310" class="Bound">lt1</a> <a id="plfa_plfa-part3-Denotational-38350" href="../Denotational/#plfa_plfa-part3-Denotational-38333" class="Bound">x</a>
<a id="plfa_plfa-part3-Denotational-38352" href="../Denotational/#plfa_plfa-part3-Denotational-38075" class="Function">sub-inv</a> <a id="plfa_plfa-part3-Denotational-38360" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-38361" href="../Denotational/#plfa_plfa-part3-Denotational-38361" class="Bound">u₁₁</a> <a id="plfa_plfa-part3-Denotational-38365" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-38367" href="../Denotational/#plfa_plfa-part3-Denotational-38367" class="Bound">u₁₂</a><a id="plfa_plfa-part3-Denotational-38370" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-38372" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-38373" href="../Denotational/#plfa_plfa-part3-Denotational-38373" class="Bound">u₂</a><a id="plfa_plfa-part3-Denotational-38375" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-38377" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-38378" href="../Denotational/#plfa_plfa-part3-Denotational-4395" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Denotational-38387" href="../Denotational/#plfa_plfa-part3-Denotational-38387" class="Bound">lt1</a> <a id="plfa_plfa-part3-Denotational-38391" href="../Denotational/#plfa_plfa-part3-Denotational-38391" class="Bound">lt2</a><a id="plfa_plfa-part3-Denotational-38394" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-38396" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-38397" href="../Denotational/#plfa_plfa-part3-Denotational-38397" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-38398" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-38400" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-38401" href="../Denotational/#plfa_plfa-part3-Denotational-38401" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-38402" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-38404" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-38405" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Denotational-38410" href="../Denotational/#plfa_plfa-part3-Denotational-38410" class="Bound">y</a><a id="plfa_plfa-part3-Denotational-38411" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-38413" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-38415" href="../Denotational/#plfa_plfa-part3-Denotational-38075" class="Function">sub-inv</a> <a id="plfa_plfa-part3-Denotational-38423" href="../Denotational/#plfa_plfa-part3-Denotational-38391" class="Bound">lt2</a> <a id="plfa_plfa-part3-Denotational-38427" href="../Denotational/#plfa_plfa-part3-Denotational-38410" class="Bound">y</a>
<a id="plfa_plfa-part3-Denotational-38429" href="../Denotational/#plfa_plfa-part3-Denotational-38075" class="CatchallClause Function">sub-inv</a><a id="plfa_plfa-part3-Denotational-38436" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38437" class="CatchallClause Symbol">{</a><a id="plfa_plfa-part3-Denotational-38438" href="../Denotational/#plfa_plfa-part3-Denotational-38438" class="CatchallClause Bound">u₁</a><a id="plfa_plfa-part3-Denotational-38440" class="CatchallClause Symbol">}</a><a id="plfa_plfa-part3-Denotational-38441" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38442" class="CatchallClause Symbol">{</a><a id="plfa_plfa-part3-Denotational-38443" href="../Denotational/#plfa_plfa-part3-Denotational-38443" class="CatchallClause Bound">u₂₁</a><a id="plfa_plfa-part3-Denotational-38446" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38447" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="CatchallClause InductiveConstructor Operator">⊔</a><a id="plfa_plfa-part3-Denotational-38448" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38449" href="../Denotational/#plfa_plfa-part3-Denotational-38449" class="CatchallClause Bound">u₂₂</a><a id="plfa_plfa-part3-Denotational-38452" class="CatchallClause Symbol">}</a><a id="plfa_plfa-part3-Denotational-38453" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38454" class="CatchallClause Symbol">(</a><a id="plfa_plfa-part3-Denotational-38455" href="../Denotational/#plfa_plfa-part3-Denotational-4479" class="CatchallClause InductiveConstructor">⊑-conj-R1</a><a id="plfa_plfa-part3-Denotational-38464" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38465" href="../Denotational/#plfa_plfa-part3-Denotational-38465" class="CatchallClause Bound">lt</a><a id="plfa_plfa-part3-Denotational-38467" class="CatchallClause Symbol">)</a><a id="plfa_plfa-part3-Denotational-38468" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38469" class="CatchallClause Symbol">{</a><a id="plfa_plfa-part3-Denotational-38470" href="../Denotational/#plfa_plfa-part3-Denotational-38470" class="CatchallClause Bound">v</a><a id="plfa_plfa-part3-Denotational-38471" class="CatchallClause Symbol">}</a><a id="plfa_plfa-part3-Denotational-38472" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38473" class="CatchallClause Symbol">{</a><a id="plfa_plfa-part3-Denotational-38474" href="../Denotational/#plfa_plfa-part3-Denotational-38474" class="CatchallClause Bound">w</a><a id="plfa_plfa-part3-Denotational-38475" class="CatchallClause Symbol">}</a><a id="plfa_plfa-part3-Denotational-38476" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38477" href="../Denotational/#plfa_plfa-part3-Denotational-38477" class="CatchallClause Bound">m</a>
    <a id="plfa_plfa-part3-Denotational-38483" class="Keyword">with</a> <a id="plfa_plfa-part3-Denotational-38488" href="../Denotational/#plfa_plfa-part3-Denotational-38075" class="Function">sub-inv</a> <a id="plfa_plfa-part3-Denotational-38496" href="../Denotational/#plfa_plfa-part3-Denotational-38465" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-38499" href="../Denotational/#plfa_plfa-part3-Denotational-38477" class="Bound">m</a>
<a id="plfa_plfa-part3-Denotational-38501" class="Symbol">...</a> <a id="plfa_plfa-part3-Denotational-38505" class="Symbol">|</a> <a id="plfa_plfa-part3-Denotational-38507" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-38509" href="../Denotational/#plfa_plfa-part3-Denotational-38509" class="Bound">u₃₁</a> <a id="plfa_plfa-part3-Denotational-38513" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-38515" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-38517" href="../Denotational/#plfa_plfa-part3-Denotational-38517" class="Bound">fu₃₁</a> <a id="plfa_plfa-part3-Denotational-38522" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-38524" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-38526" href="../Denotational/#plfa_plfa-part3-Denotational-38526" class="Bound">u₃₁⊆u₂₁</a> <a id="plfa_plfa-part3-Denotational-38534" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-38536" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-38538" href="../Denotational/#plfa_plfa-part3-Denotational-38538" class="Bound">domu₃₁⊑v</a> <a id="plfa_plfa-part3-Denotational-38547" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-38549" href="../Denotational/#plfa_plfa-part3-Denotational-38549" class="Bound">w⊑codu₃₁</a> <a id="plfa_plfa-part3-Denotational-38558" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-38560" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-38562" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-38564" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-38566" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Denotational-38574" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-38576" href="../Denotational/#plfa_plfa-part3-Denotational-38509" class="Bound">u₃₁</a> <a id="plfa_plfa-part3-Denotational-38580" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-38582" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-38584" href="../Denotational/#plfa_plfa-part3-Denotational-38517" class="Bound">fu₃₁</a> <a id="plfa_plfa-part3-Denotational-38589" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-38591" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-38593" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Denotational-38596" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-38597" href="../Denotational/#plfa_plfa-part3-Denotational-38597" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-38598" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-38600" href="../Denotational/#plfa_plfa-part3-Denotational-38600" class="Bound">z</a> <a id="plfa_plfa-part3-Denotational-38602" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-38604" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Denotational-38609" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-38610" href="../Denotational/#plfa_plfa-part3-Denotational-38526" class="Bound">u₃₁⊆u₂₁</a> <a id="plfa_plfa-part3-Denotational-38618" href="../Denotational/#plfa_plfa-part3-Denotational-38600" class="Bound">z</a><a id="plfa_plfa-part3-Denotational-38619" class="Symbol">))</a> <a id="plfa_plfa-part3-Denotational-38622" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a>
                                   <a id="plfa_plfa-part3-Denotational-38659" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-38661" href="../Denotational/#plfa_plfa-part3-Denotational-38538" class="Bound">domu₃₁⊑v</a> <a id="plfa_plfa-part3-Denotational-38670" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-38672" href="../Denotational/#plfa_plfa-part3-Denotational-38549" class="Bound">w⊑codu₃₁</a> <a id="plfa_plfa-part3-Denotational-38681" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-38683" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-38685" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-38687" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Denotational-38689" href="../Denotational/#plfa_plfa-part3-Denotational-38075" class="CatchallClause Function">sub-inv</a><a id="plfa_plfa-part3-Denotational-38696" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38697" class="CatchallClause Symbol">{</a><a id="plfa_plfa-part3-Denotational-38698" href="../Denotational/#plfa_plfa-part3-Denotational-38698" class="CatchallClause Bound">u₁</a><a id="plfa_plfa-part3-Denotational-38700" class="CatchallClause Symbol">}</a><a id="plfa_plfa-part3-Denotational-38701" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38702" class="CatchallClause Symbol">{</a><a id="plfa_plfa-part3-Denotational-38703" href="../Denotational/#plfa_plfa-part3-Denotational-38703" class="CatchallClause Bound">u₂₁</a><a id="plfa_plfa-part3-Denotational-38706" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38707" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="CatchallClause InductiveConstructor Operator">⊔</a><a id="plfa_plfa-part3-Denotational-38708" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38709" href="../Denotational/#plfa_plfa-part3-Denotational-38709" class="CatchallClause Bound">u₂₂</a><a id="plfa_plfa-part3-Denotational-38712" class="CatchallClause Symbol">}</a><a id="plfa_plfa-part3-Denotational-38713" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38714" class="CatchallClause Symbol">(</a><a id="plfa_plfa-part3-Denotational-38715" href="../Denotational/#plfa_plfa-part3-Denotational-4552" class="CatchallClause InductiveConstructor">⊑-conj-R2</a><a id="plfa_plfa-part3-Denotational-38724" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38725" href="../Denotational/#plfa_plfa-part3-Denotational-38725" class="CatchallClause Bound">lt</a><a id="plfa_plfa-part3-Denotational-38727" class="CatchallClause Symbol">)</a><a id="plfa_plfa-part3-Denotational-38728" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38729" class="CatchallClause Symbol">{</a><a id="plfa_plfa-part3-Denotational-38730" href="../Denotational/#plfa_plfa-part3-Denotational-38730" class="CatchallClause Bound">v</a><a id="plfa_plfa-part3-Denotational-38731" class="CatchallClause Symbol">}</a><a id="plfa_plfa-part3-Denotational-38732" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38733" class="CatchallClause Symbol">{</a><a id="plfa_plfa-part3-Denotational-38734" href="../Denotational/#plfa_plfa-part3-Denotational-38734" class="CatchallClause Bound">w</a><a id="plfa_plfa-part3-Denotational-38735" class="CatchallClause Symbol">}</a><a id="plfa_plfa-part3-Denotational-38736" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38737" href="../Denotational/#plfa_plfa-part3-Denotational-38737" class="CatchallClause Bound">m</a>
    <a id="plfa_plfa-part3-Denotational-38743" class="Keyword">with</a> <a id="plfa_plfa-part3-Denotational-38748" href="../Denotational/#plfa_plfa-part3-Denotational-38075" class="Function">sub-inv</a> <a id="plfa_plfa-part3-Denotational-38756" href="../Denotational/#plfa_plfa-part3-Denotational-38725" class="Bound">lt</a> <a id="plfa_plfa-part3-Denotational-38759" href="../Denotational/#plfa_plfa-part3-Denotational-38737" class="Bound">m</a>
<a id="plfa_plfa-part3-Denotational-38761" class="Symbol">...</a> <a id="plfa_plfa-part3-Denotational-38765" class="Symbol">|</a> <a id="plfa_plfa-part3-Denotational-38767" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-38769" href="../Denotational/#plfa_plfa-part3-Denotational-38769" class="Bound">u₃₂</a> <a id="plfa_plfa-part3-Denotational-38773" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-38775" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-38777" href="../Denotational/#plfa_plfa-part3-Denotational-38777" class="Bound">fu₃₂</a> <a id="plfa_plfa-part3-Denotational-38782" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-38784" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-38786" href="../Denotational/#plfa_plfa-part3-Denotational-38786" class="Bound">u₃₂⊆u₂₂</a> <a id="plfa_plfa-part3-Denotational-38794" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-38796" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-38798" href="../Denotational/#plfa_plfa-part3-Denotational-38798" class="Bound">domu₃₂⊑v</a> <a id="plfa_plfa-part3-Denotational-38807" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-38809" href="../Denotational/#plfa_plfa-part3-Denotational-38809" class="Bound">w⊑codu₃₂</a> <a id="plfa_plfa-part3-Denotational-38818" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-38820" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-38822" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-38824" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-38826" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Denotational-38834" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-38836" href="../Denotational/#plfa_plfa-part3-Denotational-38769" class="Bound">u₃₂</a> <a id="plfa_plfa-part3-Denotational-38840" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-38842" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-38844" href="../Denotational/#plfa_plfa-part3-Denotational-38777" class="Bound">fu₃₂</a> <a id="plfa_plfa-part3-Denotational-38849" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-38851" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-38853" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Denotational-38856" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-38857" href="../Denotational/#plfa_plfa-part3-Denotational-38857" class="Bound">C</a><a id="plfa_plfa-part3-Denotational-38858" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-38860" href="../Denotational/#plfa_plfa-part3-Denotational-38860" class="Bound">z</a> <a id="plfa_plfa-part3-Denotational-38862" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-38864" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Denotational-38869" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-38870" href="../Denotational/#plfa_plfa-part3-Denotational-38786" class="Bound">u₃₂⊆u₂₂</a> <a id="plfa_plfa-part3-Denotational-38878" href="../Denotational/#plfa_plfa-part3-Denotational-38860" class="Bound">z</a><a id="plfa_plfa-part3-Denotational-38879" class="Symbol">))</a> <a id="plfa_plfa-part3-Denotational-38882" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a>
                                   <a id="plfa_plfa-part3-Denotational-38919" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-38921" href="../Denotational/#plfa_plfa-part3-Denotational-38798" class="Bound">domu₃₂⊑v</a> <a id="plfa_plfa-part3-Denotational-38930" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-38932" href="../Denotational/#plfa_plfa-part3-Denotational-38809" class="Bound">w⊑codu₃₂</a> <a id="plfa_plfa-part3-Denotational-38941" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-38943" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-38945" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-38947" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Denotational-38949" href="../Denotational/#plfa_plfa-part3-Denotational-38075" class="CatchallClause Function">sub-inv</a><a id="plfa_plfa-part3-Denotational-38956" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38957" class="CatchallClause Symbol">{</a><a id="plfa_plfa-part3-Denotational-38958" href="../Denotational/#plfa_plfa-part3-Denotational-38958" class="CatchallClause Bound">u₁</a><a id="plfa_plfa-part3-Denotational-38960" class="CatchallClause Symbol">}</a><a id="plfa_plfa-part3-Denotational-38961" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38962" class="CatchallClause Symbol">{</a><a id="plfa_plfa-part3-Denotational-38963" href="../Denotational/#plfa_plfa-part3-Denotational-38963" class="CatchallClause Bound">u₂</a><a id="plfa_plfa-part3-Denotational-38965" class="CatchallClause Symbol">}</a><a id="plfa_plfa-part3-Denotational-38966" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38967" class="CatchallClause Symbol">(</a><a id="plfa_plfa-part3-Denotational-38968" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="CatchallClause InductiveConstructor">⊑-trans</a><a id="plfa_plfa-part3-Denotational-38975" class="CatchallClause Symbol">{</a><a id="plfa_plfa-part3-Denotational-38976" class="CatchallClause Argument">v</a><a id="plfa_plfa-part3-Denotational-38977" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38978" class="CatchallClause Symbol">=</a><a id="plfa_plfa-part3-Denotational-38979" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38980" href="../Denotational/#plfa_plfa-part3-Denotational-38980" class="CatchallClause Bound">u</a><a id="plfa_plfa-part3-Denotational-38981" class="CatchallClause Symbol">}</a><a id="plfa_plfa-part3-Denotational-38982" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38983" href="../Denotational/#plfa_plfa-part3-Denotational-38983" class="CatchallClause Bound">u₁⊑u</a><a id="plfa_plfa-part3-Denotational-38987" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38988" href="../Denotational/#plfa_plfa-part3-Denotational-38988" class="CatchallClause Bound">u⊑u₂</a><a id="plfa_plfa-part3-Denotational-38992" class="CatchallClause Symbol">)</a><a id="plfa_plfa-part3-Denotational-38993" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38994" class="CatchallClause Symbol">{</a><a id="plfa_plfa-part3-Denotational-38995" href="../Denotational/#plfa_plfa-part3-Denotational-38995" class="CatchallClause Bound">v</a><a id="plfa_plfa-part3-Denotational-38996" class="CatchallClause Symbol">}</a><a id="plfa_plfa-part3-Denotational-38997" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-38998" class="CatchallClause Symbol">{</a><a id="plfa_plfa-part3-Denotational-38999" href="../Denotational/#plfa_plfa-part3-Denotational-38999" class="CatchallClause Bound">w</a><a id="plfa_plfa-part3-Denotational-39000" class="CatchallClause Symbol">}</a><a id="plfa_plfa-part3-Denotational-39001" class="CatchallClause"> </a><a id="plfa_plfa-part3-Denotational-39002" href="../Denotational/#plfa_plfa-part3-Denotational-39002" class="CatchallClause Bound">v↦w∈u₁</a>
    <a id="plfa_plfa-part3-Denotational-39013" class="Keyword">with</a> <a id="plfa_plfa-part3-Denotational-39018" href="../Denotational/#plfa_plfa-part3-Denotational-38075" class="Function">sub-inv</a> <a id="plfa_plfa-part3-Denotational-39026" href="../Denotational/#plfa_plfa-part3-Denotational-38983" class="Bound">u₁⊑u</a> <a id="plfa_plfa-part3-Denotational-39031" href="../Denotational/#plfa_plfa-part3-Denotational-39002" class="Bound">v↦w∈u₁</a>
<a id="plfa_plfa-part3-Denotational-39038" class="Symbol">...</a> <a id="plfa_plfa-part3-Denotational-39042" class="Symbol">|</a> <a id="plfa_plfa-part3-Denotational-39044" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-39046" href="../Denotational/#plfa_plfa-part3-Denotational-39046" class="Bound">u′</a> <a id="plfa_plfa-part3-Denotational-39049" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-39051" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-39053" href="../Denotational/#plfa_plfa-part3-Denotational-39053" class="Bound">fu′</a> <a id="plfa_plfa-part3-Denotational-39057" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-39059" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-39061" href="../Denotational/#plfa_plfa-part3-Denotational-39061" class="Bound">u′⊆u</a> <a id="plfa_plfa-part3-Denotational-39066" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-39068" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-39070" href="../Denotational/#plfa_plfa-part3-Denotational-39070" class="Bound">domu′⊑v</a> <a id="plfa_plfa-part3-Denotational-39078" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-39080" href="../Denotational/#plfa_plfa-part3-Denotational-39080" class="Bound">w⊑codu′</a> <a id="plfa_plfa-part3-Denotational-39088" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-39090" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-39092" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-39094" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a>
    <a id="plfa_plfa-part3-Denotational-39100" class="Keyword">with</a> <a id="plfa_plfa-part3-Denotational-39105" href="../Denotational/#plfa_plfa-part3-Denotational-35544" class="Function">sub-inv-trans</a> <a id="plfa_plfa-part3-Denotational-39119" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-39120" href="../Denotational/#plfa_plfa-part3-Denotational-39046" class="Bound">u′</a><a id="plfa_plfa-part3-Denotational-39122" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-39124" href="../Denotational/#plfa_plfa-part3-Denotational-39053" class="Bound">fu′</a> <a id="plfa_plfa-part3-Denotational-39128" href="../Denotational/#plfa_plfa-part3-Denotational-39061" class="Bound">u′⊆u</a> <a id="plfa_plfa-part3-Denotational-39133" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-39134" href="../Denotational/#plfa_plfa-part3-Denotational-38075" class="Function">sub-inv</a> <a id="plfa_plfa-part3-Denotational-39142" class="Bound">u⊑u₂</a><a id="plfa_plfa-part3-Denotational-39146" class="Symbol">)</a>
<a id="plfa_plfa-part3-Denotational-39148" class="Symbol">...</a> <a id="plfa_plfa-part3-Denotational-39152" class="Symbol">|</a> <a id="plfa_plfa-part3-Denotational-39154" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-39156" href="../Denotational/#plfa_plfa-part3-Denotational-39156" class="Bound">u₃</a> <a id="plfa_plfa-part3-Denotational-39159" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-39161" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-39163" href="../Denotational/#plfa_plfa-part3-Denotational-39163" class="Bound">fu₃</a> <a id="plfa_plfa-part3-Denotational-39167" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-39169" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-39171" href="../Denotational/#plfa_plfa-part3-Denotational-39171" class="Bound">u₃⊆u₂</a> <a id="plfa_plfa-part3-Denotational-39177" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-39179" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-39181" href="../Denotational/#plfa_plfa-part3-Denotational-39181" class="Bound">domu₃⊑domu′</a> <a id="plfa_plfa-part3-Denotational-39193" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-39195" href="../Denotational/#plfa_plfa-part3-Denotational-39195" class="Bound">codu′⊑codu₃</a> <a id="plfa_plfa-part3-Denotational-39207" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-39209" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-39211" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-39213" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-39215" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Denotational-39223" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-39225" href="../Denotational/#plfa_plfa-part3-Denotational-39156" class="Bound">u₃</a> <a id="plfa_plfa-part3-Denotational-39228" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-39230" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-39232" href="../Denotational/#plfa_plfa-part3-Denotational-39163" class="Bound">fu₃</a> <a id="plfa_plfa-part3-Denotational-39236" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-39238" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-39240" href="../Denotational/#plfa_plfa-part3-Denotational-39171" class="Bound">u₃⊆u₂</a> <a id="plfa_plfa-part3-Denotational-39246" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-39248" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-39250" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Denotational-39258" href="../Denotational/#plfa_plfa-part3-Denotational-39181" class="Bound">domu₃⊑domu′</a> <a id="plfa_plfa-part3-Denotational-39270" class="Bound">domu′⊑v</a> <a id="plfa_plfa-part3-Denotational-39278" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a>
                                    <a id="plfa_plfa-part3-Denotational-39316" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Denotational-39324" class="Bound">w⊑codu′</a> <a id="plfa_plfa-part3-Denotational-39332" href="../Denotational/#plfa_plfa-part3-Denotational-39195" class="Bound">codu′⊑codu₃</a> <a id="plfa_plfa-part3-Denotational-39344" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-39346" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-39348" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-39350" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Denotational-39352" href="../Denotational/#plfa_plfa-part3-Denotational-38075" class="Function">sub-inv</a> <a id="plfa_plfa-part3-Denotational-39360" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-39361" href="../Denotational/#plfa_plfa-part3-Denotational-39361" class="Bound">u₁₁</a> <a id="plfa_plfa-part3-Denotational-39365" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-39367" href="../Denotational/#plfa_plfa-part3-Denotational-39367" class="Bound">u₁₂</a><a id="plfa_plfa-part3-Denotational-39370" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-39372" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-39373" href="../Denotational/#plfa_plfa-part3-Denotational-39373" class="Bound">u₂₁</a> <a id="plfa_plfa-part3-Denotational-39377" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-39379" href="../Denotational/#plfa_plfa-part3-Denotational-39379" class="Bound">u₂₂</a><a id="plfa_plfa-part3-Denotational-39382" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-39384" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-39385" href="../Denotational/#plfa_plfa-part3-Denotational-4696" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Denotational-39391" href="../Denotational/#plfa_plfa-part3-Denotational-39391" class="Bound">lt1</a> <a id="plfa_plfa-part3-Denotational-39395" href="../Denotational/#plfa_plfa-part3-Denotational-39395" class="Bound">lt2</a><a id="plfa_plfa-part3-Denotational-39398" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-39400" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Denotational-39405" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Denotational-39411" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-39413" href="../Denotational/#plfa_plfa-part3-Denotational-39373" class="Bound">u₂₁</a> <a id="plfa_plfa-part3-Denotational-39417" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-39419" href="../Denotational/#plfa_plfa-part3-Denotational-39379" class="Bound">u₂₂</a> <a id="plfa_plfa-part3-Denotational-39423" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-39425" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-39427" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Denotational-39430" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-39431" href="../Denotational/#plfa_plfa-part3-Denotational-39431" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-39432" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-39434" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-39436" href="../Denotational/#plfa_plfa-part3-Denotational-31372" class="InductiveConstructor">fun</a><a id="plfa_plfa-part3-Denotational-39439" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-39441" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-39443" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-39445" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Denotational-39448" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-39449" href="../Denotational/#plfa_plfa-part3-Denotational-39449" class="Bound">C</a><a id="plfa_plfa-part3-Denotational-39450" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-39452" href="../Denotational/#plfa_plfa-part3-Denotational-39452" class="Bound">z</a> <a id="plfa_plfa-part3-Denotational-39454" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-39456" href="../Denotational/#plfa_plfa-part3-Denotational-39452" class="Bound">z</a><a id="plfa_plfa-part3-Denotational-39457" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-39459" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-39461" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-39463" href="../Denotational/#plfa_plfa-part3-Denotational-39391" class="Bound">lt1</a> <a id="plfa_plfa-part3-Denotational-39467" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-39469" href="../Denotational/#plfa_plfa-part3-Denotational-39395" class="Bound">lt2</a> <a id="plfa_plfa-part3-Denotational-39473" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-39475" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-39477" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-39479" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Denotational-39481" href="../Denotational/#plfa_plfa-part3-Denotational-38075" class="Function">sub-inv</a> <a id="plfa_plfa-part3-Denotational-39489" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-39490" href="../Denotational/#plfa_plfa-part3-Denotational-39490" class="Bound">u₂₁</a> <a id="plfa_plfa-part3-Denotational-39494" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-39496" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-39497" href="../Denotational/#plfa_plfa-part3-Denotational-39497" class="Bound">u₂₂</a> <a id="plfa_plfa-part3-Denotational-39501" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-39503" href="../Denotational/#plfa_plfa-part3-Denotational-39503" class="Bound">u₂₃</a><a id="plfa_plfa-part3-Denotational-39506" class="Symbol">)}</a> <a id="plfa_plfa-part3-Denotational-39509" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-39510" href="../Denotational/#plfa_plfa-part3-Denotational-39490" class="Bound">u₂₁</a> <a id="plfa_plfa-part3-Denotational-39514" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-39516" href="../Denotational/#plfa_plfa-part3-Denotational-39497" class="Bound">u₂₂</a> <a id="plfa_plfa-part3-Denotational-39520" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-39522" href="../Denotational/#plfa_plfa-part3-Denotational-39490" class="Bound">u₂₁</a> <a id="plfa_plfa-part3-Denotational-39526" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-39528" href="../Denotational/#plfa_plfa-part3-Denotational-39503" class="Bound">u₂₃</a><a id="plfa_plfa-part3-Denotational-39531" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-39533" href="../Denotational/#plfa_plfa-part3-Denotational-4799" class="InductiveConstructor">⊑-dist</a>
    <a id="plfa_plfa-part3-Denotational-39544" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-39545" class="DottedPattern Symbol">.</a><a id="plfa_plfa-part3-Denotational-39546" href="../Denotational/#plfa_plfa-part3-Denotational-39490" class="DottedPattern Bound">u₂₁</a><a id="plfa_plfa-part3-Denotational-39549" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-39551" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-39552" class="DottedPattern Symbol">.(</a><a id="plfa_plfa-part3-Denotational-39554" href="../Denotational/#plfa_plfa-part3-Denotational-39497" class="DottedPattern Bound">u₂₂</a> <a id="plfa_plfa-part3-Denotational-39558" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="DottedPattern InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-39560" href="../Denotational/#plfa_plfa-part3-Denotational-39503" class="DottedPattern Bound">u₂₃</a><a id="plfa_plfa-part3-Denotational-39563" class="DottedPattern Symbol">)</a><a id="plfa_plfa-part3-Denotational-39564" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-39566" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Denotational-39571" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Denotational-39577" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-39579" href="../Denotational/#plfa_plfa-part3-Denotational-39490" class="Bound">u₂₁</a> <a id="plfa_plfa-part3-Denotational-39583" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-39585" href="../Denotational/#plfa_plfa-part3-Denotational-39497" class="Bound">u₂₂</a> <a id="plfa_plfa-part3-Denotational-39589" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-39591" href="../Denotational/#plfa_plfa-part3-Denotational-39490" class="Bound">u₂₁</a> <a id="plfa_plfa-part3-Denotational-39595" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-39597" href="../Denotational/#plfa_plfa-part3-Denotational-39503" class="Bound">u₂₃</a> <a id="plfa_plfa-part3-Denotational-39601" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-39603" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-39605" href="../Denotational/#plfa_plfa-part3-Denotational-39665" class="Function">f</a> <a id="plfa_plfa-part3-Denotational-39607" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-39609" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-39611" href="../Denotational/#plfa_plfa-part3-Denotational-39764" class="Function">g</a> <a id="plfa_plfa-part3-Denotational-39613" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-39615" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-39617" href="../Denotational/#plfa_plfa-part3-Denotational-4395" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Denotational-39626" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Denotational-39633" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Denotational-39640" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-39642" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Denotational-39649" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-39651" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-39653" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-39655" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Denotational-39659" class="Keyword">where</a> <a id="plfa_plfa-part3-Denotational-39665" href="../Denotational/#plfa_plfa-part3-Denotational-39665" class="Function">f</a> <a id="plfa_plfa-part3-Denotational-39667" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-39669" href="../Denotational/#plfa_plfa-part3-Denotational-31410" class="Function">all-funs</a> <a id="plfa_plfa-part3-Denotational-39678" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-39679" href="../Denotational/#plfa_plfa-part3-Denotational-39490" class="Bound">u₂₁</a> <a id="plfa_plfa-part3-Denotational-39683" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-39685" href="../Denotational/#plfa_plfa-part3-Denotational-39497" class="Bound">u₂₂</a> <a id="plfa_plfa-part3-Denotational-39689" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-39691" href="../Denotational/#plfa_plfa-part3-Denotational-39490" class="Bound">u₂₁</a> <a id="plfa_plfa-part3-Denotational-39695" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-39697" href="../Denotational/#plfa_plfa-part3-Denotational-39503" class="Bound">u₂₃</a><a id="plfa_plfa-part3-Denotational-39700" class="Symbol">)</a>
        <a id="plfa_plfa-part3-Denotational-39710" href="../Denotational/#plfa_plfa-part3-Denotational-39665" class="Function">f</a> <a id="plfa_plfa-part3-Denotational-39712" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-39713" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Denotational-39718" href="../Denotational/#plfa_plfa-part3-Denotational-39718" class="Bound">x</a><a id="plfa_plfa-part3-Denotational-39719" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-39721" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-39723" href="../Denotational/#plfa_plfa-part3-Denotational-31372" class="InductiveConstructor">fun</a> <a id="plfa_plfa-part3-Denotational-39727" href="../Denotational/#plfa_plfa-part3-Denotational-39718" class="Bound">x</a>
        <a id="plfa_plfa-part3-Denotational-39737" href="../Denotational/#plfa_plfa-part3-Denotational-39665" class="Function">f</a> <a id="plfa_plfa-part3-Denotational-39739" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-39740" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Denotational-39745" href="../Denotational/#plfa_plfa-part3-Denotational-39745" class="Bound">y</a><a id="plfa_plfa-part3-Denotational-39746" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-39748" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-39750" href="../Denotational/#plfa_plfa-part3-Denotational-31372" class="InductiveConstructor">fun</a> <a id="plfa_plfa-part3-Denotational-39754" href="../Denotational/#plfa_plfa-part3-Denotational-39745" class="Bound">y</a>
        <a id="plfa_plfa-part3-Denotational-39764" href="../Denotational/#plfa_plfa-part3-Denotational-39764" class="Function">g</a> <a id="plfa_plfa-part3-Denotational-39766" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-39768" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-39769" href="../Denotational/#plfa_plfa-part3-Denotational-39490" class="Bound">u₂₁</a> <a id="plfa_plfa-part3-Denotational-39773" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-39775" href="../Denotational/#plfa_plfa-part3-Denotational-39497" class="Bound">u₂₂</a> <a id="plfa_plfa-part3-Denotational-39779" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-39781" href="../Denotational/#plfa_plfa-part3-Denotational-39490" class="Bound">u₂₁</a> <a id="plfa_plfa-part3-Denotational-39785" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-39787" href="../Denotational/#plfa_plfa-part3-Denotational-39503" class="Bound">u₂₃</a><a id="plfa_plfa-part3-Denotational-39790" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-39792" href="../Denotational/#plfa_plfa-part3-Denotational-29734" class="Function Operator">⊆</a> <a id="plfa_plfa-part3-Denotational-39794" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-39795" href="../Denotational/#plfa_plfa-part3-Denotational-39490" class="Bound">u₂₁</a> <a id="plfa_plfa-part3-Denotational-39799" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-39801" href="../Denotational/#plfa_plfa-part3-Denotational-39497" class="Bound">u₂₂</a> <a id="plfa_plfa-part3-Denotational-39805" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Denotational-39807" href="../Denotational/#plfa_plfa-part3-Denotational-39490" class="Bound">u₂₁</a> <a id="plfa_plfa-part3-Denotational-39811" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-39813" href="../Denotational/#plfa_plfa-part3-Denotational-39503" class="Bound">u₂₃</a><a id="plfa_plfa-part3-Denotational-39816" class="Symbol">)</a>
        <a id="plfa_plfa-part3-Denotational-39826" href="../Denotational/#plfa_plfa-part3-Denotational-39764" class="Function">g</a> <a id="plfa_plfa-part3-Denotational-39828" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-39829" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Denotational-39834" href="../Denotational/#plfa_plfa-part3-Denotational-39834" class="Bound">x</a><a id="plfa_plfa-part3-Denotational-39835" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-39837" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-39839" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Denotational-39844" href="../Denotational/#plfa_plfa-part3-Denotational-39834" class="Bound">x</a>
        <a id="plfa_plfa-part3-Denotational-39854" href="../Denotational/#plfa_plfa-part3-Denotational-39764" class="Function">g</a> <a id="plfa_plfa-part3-Denotational-39856" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-39857" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Denotational-39862" href="../Denotational/#plfa_plfa-part3-Denotational-39862" class="Bound">y</a><a id="plfa_plfa-part3-Denotational-39863" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-39865" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-39867" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Denotational-39872" href="../Denotational/#plfa_plfa-part3-Denotational-39862" class="Bound">y</a>
</pre><p>Let <code>v</code> and <code>w</code> be arbitrary values.</p><ul><li><p>Case <code>⊑-bot</code>. So <code>u₁ ≡ ⊥</code>. We have <code>v ↦ w ∈ ⊥</code>, but that is impossible.</p></li><li><p>Case <code>⊑-conj-L</code>.</p><pre><code>  u₁₁ ⊑ u₂   u₁₂ ⊑ u₂
  -------------------
  u₁₁ ⊔ u₁₂ ⊑ u₂</code></pre><p>Given that <code>v ↦ w ∈ u₁₁ ⊔ u₁₂</code>, there are two subcases to consider.</p><ul><li><p>Subcase <code>v ↦ w ∈ u₁₁</code>. We conclude by the induction hypothesis for <code>u₁₁ ⊑ u₂</code>.</p></li><li><p>Subcase <code>v ↦ w ∈ u₁₂</code>. We conclude by the induction hypothesis for <code>u₁₂ ⊑ u₂</code>.</p></li></ul></li><li><p>Case <code>⊑-conj-R1</code>.</p><pre><code>  u₁ ⊑ u₂₁
  --------------
  u₁ ⊑ u₂₁ ⊔ u₂₂</code></pre><p>Given that <code>v ↦ w ∈ u₁</code>, the induction hypothesis for <code>u₁ ⊑ u₂₁</code> gives us that <code>v ↦ w</code> factors <code>u₂₁</code> into <code>u₃₁</code> for some <code>u₃₁</code>. To show that <code>v ↦ w</code> also factors <code>u₂₁ ⊔ u₂₂</code> into <code>u₃₁</code>, we just need to show that <code>u₃₁ ⊆ u₂₁ ⊔ u₂₂</code>, but that follows directly from <code>u₃₁ ⊆ u₂₁</code>.</p></li><li><p>Case <code>⊑-conj-R2</code>. This case follows by reasoning similar to the case for <code>⊑-conj-R1</code>.</p></li><li><p>Case <code>⊑-trans</code>.</p><pre><code>  u₁ ⊑ u   u ⊑ u₂
  ---------------
      u₁ ⊑ u₂</code></pre><p>By the induction hypothesis for <code>u₁ ⊑ u</code>, we know that <code>v ↦ w</code> factors <code>u</code> into <code>u′</code>, for some value <code>u′</code>, so we have <code>all-funs u′</code> and <code>u′ ⊆ u</code>. By the induction hypothesis for <code>u ⊑ u₂</code>, we know that for any <code>v′ ↦ w′ ∈ u</code>, <code>v′ ↦ w′</code> factors <code>u₂</code>. Now we apply the lemma sub-inv-trans, which gives us some <code>u₃</code> such that <code>(⨆dom u′) ↦ (⨆cod u′)</code> factors <code>u₂</code> into <code>u₃</code>. We show that <code>v ↦ w</code> also factors <code>u₂</code> into <code>u₃</code>. From <code>⨆dom u₃ ⊑ ⨆dom u′</code> and <code>⨆dom u′ ⊑ v</code>, we have <code>⨆dom u₃ ⊑ v</code>. From <code>w ⊑ ⨆cod u′</code> and <code>⨆cod u′ ⊑ ⨆cod u₃</code>, we have <code>w ⊑ ⨆cod u₃</code>, and this case is complete.</p></li><li><p>Case <code>⊑-fun</code>.</p><pre><code>  u₂₁ ⊑ u₁₁  u₁₂ ⊑ u₂₂
  ---------------------
  u₁₁ ↦ u₁₂ ⊑ u₂₁ ↦ u₂₂</code></pre><p>Given that <code>v ↦ w ∈ u₁₁ ↦ u₁₂</code>, we have <code>v ≡ u₁₁</code> and <code>w ≡ u₁₂</code>. We show that <code>u₁₁ ↦ u₁₂</code> factors <code>u₂₁ ↦ u₂₂</code> into itself. We need to show that <code>⨆dom (u₂₁ ↦ u₂₂) ⊑ u₁₁</code> and <code>u₁₂ ⊑ ⨆cod (u₂₁ ↦ u₂₂)</code>, but that is equivalent to our premises <code>u₂₁ ⊑ u₁₁</code> and <code>u₁₂ ⊑ u₂₂</code>.</p></li><li><p>Case <code>⊑-dist</code>.</p><pre><code>  ---------------------------------------------
  u₂₁ ↦ (u₂₂ ⊔ u₂₃) ⊑ (u₂₁ ↦ u₂₂) ⊔ (u₂₁ ↦ u₂₃)</code></pre><p>Given that <code>v ↦ w ∈ u₂₁ ↦ (u₂₂ ⊔ u₂₃)</code>, we have <code>v ≡ u₂₁</code> and <code>w ≡ u₂₂ ⊔ u₂₃</code>. We show that <code>u₂₁ ↦ (u₂₂ ⊔ u₂₃)</code> factors <code>(u₂₁ ↦ u₂₂) ⊔ (u₂₁ ↦ u₂₃)</code> into itself. We have <code>u₂₁ ⊔ u₂₁ ⊑ u₂₁</code>, and also <code>u₂₂ ⊔ u₂₃ ⊑ u₂₂ ⊔ u₂₃</code>, so the proof is complete.</p></li></ul><p>We conclude this section with two corollaries of the sub-inv lemma. First, we have the following property that is convenient to use in later proofs. We specialize the premise to just <code>v ↦ w ⊑ u₁</code> and we modify the conclusion to say that for every <code>v′ ↦ w′ ∈ u₂</code>, we have <code>v′ ⊑ v</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-sub-inv-fun"></a><a id="plfa_plfa-part3-Denotational-42552" href="../Denotational/#plfa_plfa-part3-Denotational-42552" class="Function">sub-inv-fun</a> <a id="plfa_plfa-part3-Denotational-42564" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-42566" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-42568" href="../Denotational/#plfa_plfa-part3-Denotational-42568" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-42570" href="../Denotational/#plfa_plfa-part3-Denotational-42570" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-42572" href="../Denotational/#plfa_plfa-part3-Denotational-42572" class="Bound">u₁</a> <a id="plfa_plfa-part3-Denotational-42575" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-42577" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Denotational-42582" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Denotational-42588" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-42590" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-42591" href="../Denotational/#plfa_plfa-part3-Denotational-42568" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-42593" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-42595" href="../Denotational/#plfa_plfa-part3-Denotational-42570" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-42596" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-42598" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-42600" href="../Denotational/#plfa_plfa-part3-Denotational-42572" class="Bound">u₁</a>
      <a id="plfa_plfa-part3-Denotational-42609" class="Comment">-----------------------------------------------------</a>
    <a id="plfa_plfa-part3-Denotational-42667" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-42669" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Denotational-42672" href="../Denotational/#plfa_plfa-part3-Denotational-42672" class="Bound">u₂</a> <a id="plfa_plfa-part3-Denotational-42675" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Denotational-42677" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Denotational-42683" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Denotational-42685" href="../Denotational/#plfa_plfa-part3-Denotational-31410" class="Function">all-funs</a> <a id="plfa_plfa-part3-Denotational-42694" href="../Denotational/#plfa_plfa-part3-Denotational-42672" class="Bound">u₂</a> <a id="plfa_plfa-part3-Denotational-42697" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Denotational-42699" href="../Denotational/#plfa_plfa-part3-Denotational-42672" class="Bound">u₂</a> <a id="plfa_plfa-part3-Denotational-42702" href="../Denotational/#plfa_plfa-part3-Denotational-29734" class="Function Operator">⊆</a> <a id="plfa_plfa-part3-Denotational-42704" href="../Denotational/#plfa_plfa-part3-Denotational-42572" class="Bound">u₁</a>
        <a id="plfa_plfa-part3-Denotational-42715" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Denotational-42717" class="Symbol">(∀{</a><a id="plfa_plfa-part3-Denotational-42720" href="../Denotational/#plfa_plfa-part3-Denotational-42720" class="Bound">v′</a> <a id="plfa_plfa-part3-Denotational-42723" href="../Denotational/#plfa_plfa-part3-Denotational-42723" class="Bound">w′</a><a id="plfa_plfa-part3-Denotational-42725" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-42727" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-42729" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-42730" href="../Denotational/#plfa_plfa-part3-Denotational-42720" class="Bound">v′</a> <a id="plfa_plfa-part3-Denotational-42733" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-42735" href="../Denotational/#plfa_plfa-part3-Denotational-42723" class="Bound">w′</a><a id="plfa_plfa-part3-Denotational-42737" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-42739" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">∈</a> <a id="plfa_plfa-part3-Denotational-42741" href="../Denotational/#plfa_plfa-part3-Denotational-42672" class="Bound">u₂</a> <a id="plfa_plfa-part3-Denotational-42744" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-42746" href="../Denotational/#plfa_plfa-part3-Denotational-42720" class="Bound">v′</a> <a id="plfa_plfa-part3-Denotational-42749" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-42751" href="../Denotational/#plfa_plfa-part3-Denotational-42568" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-42752" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-42754" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Denotational-42756" href="../Denotational/#plfa_plfa-part3-Denotational-42570" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-42758" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-42760" href="../Denotational/#plfa_plfa-part3-Denotational-32622" class="Function">⨆cod</a> <a id="plfa_plfa-part3-Denotational-42765" href="../Denotational/#plfa_plfa-part3-Denotational-42672" class="Bound">u₂</a>
<a id="plfa_plfa-part3-Denotational-42768" href="../Denotational/#plfa_plfa-part3-Denotational-42552" class="Function">sub-inv-fun</a><a id="plfa_plfa-part3-Denotational-42779" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-42780" href="../Denotational/#plfa_plfa-part3-Denotational-42780" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-42781" class="Symbol">}{</a><a id="plfa_plfa-part3-Denotational-42783" href="../Denotational/#plfa_plfa-part3-Denotational-42783" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-42784" class="Symbol">}{</a><a id="plfa_plfa-part3-Denotational-42786" href="../Denotational/#plfa_plfa-part3-Denotational-42786" class="Bound">u₁</a><a id="plfa_plfa-part3-Denotational-42788" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-42790" href="../Denotational/#plfa_plfa-part3-Denotational-42790" class="Bound">abc</a>
    <a id="plfa_plfa-part3-Denotational-42798" class="Keyword">with</a> <a id="plfa_plfa-part3-Denotational-42803" href="../Denotational/#plfa_plfa-part3-Denotational-38075" class="Function">sub-inv</a> <a id="plfa_plfa-part3-Denotational-42811" href="../Denotational/#plfa_plfa-part3-Denotational-42790" class="Bound">abc</a> <a id="plfa_plfa-part3-Denotational-42815" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-42816" href="../Denotational/#plfa_plfa-part3-Denotational-42780" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-42817" class="Symbol">}{</a><a id="plfa_plfa-part3-Denotational-42819" href="../Denotational/#plfa_plfa-part3-Denotational-42783" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-42820" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-42822" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Denotational-42827" class="Symbol">...</a> <a id="plfa_plfa-part3-Denotational-42831" class="Symbol">|</a> <a id="plfa_plfa-part3-Denotational-42833" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-42835" href="../Denotational/#plfa_plfa-part3-Denotational-42835" class="Bound">u₂</a> <a id="plfa_plfa-part3-Denotational-42838" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-42840" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-42842" href="../Denotational/#plfa_plfa-part3-Denotational-42842" class="Bound">f</a> <a id="plfa_plfa-part3-Denotational-42844" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-42846" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-42848" href="../Denotational/#plfa_plfa-part3-Denotational-42848" class="Bound">u₂⊆u₁</a> <a id="plfa_plfa-part3-Denotational-42854" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-42856" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-42858" href="../Denotational/#plfa_plfa-part3-Denotational-42858" class="Bound">db</a> <a id="plfa_plfa-part3-Denotational-42861" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-42863" href="../Denotational/#plfa_plfa-part3-Denotational-42863" class="Bound">cc</a> <a id="plfa_plfa-part3-Denotational-42866" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-42868" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-42870" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-42872" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-42874" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Denotational-42882" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-42884" href="../Denotational/#plfa_plfa-part3-Denotational-42835" class="Bound">u₂</a> <a id="plfa_plfa-part3-Denotational-42887" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-42889" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-42891" href="../Denotational/#plfa_plfa-part3-Denotational-42842" class="Bound">f</a> <a id="plfa_plfa-part3-Denotational-42893" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-42895" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-42897" href="../Denotational/#plfa_plfa-part3-Denotational-42848" class="Bound">u₂⊆u₁</a> <a id="plfa_plfa-part3-Denotational-42903" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-42905" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-42907" href="../Denotational/#plfa_plfa-part3-Denotational-42931" class="Function">G</a> <a id="plfa_plfa-part3-Denotational-42909" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-42911" href="../Denotational/#plfa_plfa-part3-Denotational-42863" class="Bound">cc</a> <a id="plfa_plfa-part3-Denotational-42914" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-42916" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-42918" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-42920" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a>
   <a id="plfa_plfa-part3-Denotational-42925" class="Keyword">where</a> <a id="plfa_plfa-part3-Denotational-42931" href="../Denotational/#plfa_plfa-part3-Denotational-42931" class="Function">G</a> <a id="plfa_plfa-part3-Denotational-42933" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-42935" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-42937" href="../Denotational/#plfa_plfa-part3-Denotational-42937" class="Bound">D</a> <a id="plfa_plfa-part3-Denotational-42939" href="../Denotational/#plfa_plfa-part3-Denotational-42939" class="Bound">E</a><a id="plfa_plfa-part3-Denotational-42940" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-42942" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-42944" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-42945" href="../Denotational/#plfa_plfa-part3-Denotational-42937" class="Bound">D</a> <a id="plfa_plfa-part3-Denotational-42947" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-42949" href="../Denotational/#plfa_plfa-part3-Denotational-42939" class="Bound">E</a><a id="plfa_plfa-part3-Denotational-42950" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-42952" href="../Denotational/#plfa_plfa-part3-Denotational-29484" class="Function Operator">∈</a> <a id="plfa_plfa-part3-Denotational-42954" href="../Denotational/#plfa_plfa-part3-Denotational-42835" class="Bound">u₂</a> <a id="plfa_plfa-part3-Denotational-42957" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-42959" href="../Denotational/#plfa_plfa-part3-Denotational-42937" class="Bound">D</a> <a id="plfa_plfa-part3-Denotational-42961" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-42963" class="Bound">v</a>
         <a id="plfa_plfa-part3-Denotational-42974" href="../Denotational/#plfa_plfa-part3-Denotational-42931" class="Function">G</a><a id="plfa_plfa-part3-Denotational-42975" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-42976" href="../Denotational/#plfa_plfa-part3-Denotational-42976" class="Bound">D</a><a id="plfa_plfa-part3-Denotational-42977" class="Symbol">}{</a><a id="plfa_plfa-part3-Denotational-42979" href="../Denotational/#plfa_plfa-part3-Denotational-42979" class="Bound">E</a><a id="plfa_plfa-part3-Denotational-42980" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-42982" href="../Denotational/#plfa_plfa-part3-Denotational-42982" class="Bound">m</a> <a id="plfa_plfa-part3-Denotational-42984" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-42986" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Denotational-42994" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-42995" href="../Denotational/#plfa_plfa-part3-Denotational-30209" class="Function">⊆→⊑</a> <a id="plfa_plfa-part3-Denotational-42999" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-43000" href="../Denotational/#plfa_plfa-part3-Denotational-32915" class="Function">↦∈→⊆⨆dom</a> <a id="plfa_plfa-part3-Denotational-43009" href="../Denotational/#plfa_plfa-part3-Denotational-42842" class="Bound">f</a> <a id="plfa_plfa-part3-Denotational-43011" href="../Denotational/#plfa_plfa-part3-Denotational-42982" class="Bound">m</a><a id="plfa_plfa-part3-Denotational-43012" class="Symbol">))</a> <a id="plfa_plfa-part3-Denotational-43015" href="../Denotational/#plfa_plfa-part3-Denotational-42858" class="Bound">db</a>
</pre><p>The second corollary is the inversion rule that one would expect for less-than with functions on the left and right-hand sides.</p><pre class="Agda"><a id="plfa_plfa-part3-Denotational-↦⊑↦-inv"></a><a id="plfa_plfa-part3-Denotational-43160" href="../Denotational/#plfa_plfa-part3-Denotational-43160" class="Function">↦⊑↦-inv</a> <a id="plfa_plfa-part3-Denotational-43168" class="Symbol">:</a> <a id="plfa_plfa-part3-Denotational-43170" class="Symbol">∀{</a><a id="plfa_plfa-part3-Denotational-43172" href="../Denotational/#plfa_plfa-part3-Denotational-43172" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-43174" href="../Denotational/#plfa_plfa-part3-Denotational-43174" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-43176" href="../Denotational/#plfa_plfa-part3-Denotational-43176" class="Bound">v′</a> <a id="plfa_plfa-part3-Denotational-43179" href="../Denotational/#plfa_plfa-part3-Denotational-43179" class="Bound">w′</a><a id="plfa_plfa-part3-Denotational-43181" class="Symbol">}</a>
        <a id="plfa_plfa-part3-Denotational-43191" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-43193" href="../Denotational/#plfa_plfa-part3-Denotational-43172" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-43195" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-43197" href="../Denotational/#plfa_plfa-part3-Denotational-43174" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-43199" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-43201" href="../Denotational/#plfa_plfa-part3-Denotational-43176" class="Bound">v′</a> <a id="plfa_plfa-part3-Denotational-43204" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Denotational-43206" href="../Denotational/#plfa_plfa-part3-Denotational-43179" class="Bound">w′</a>
          <a id="plfa_plfa-part3-Denotational-43219" class="Comment">-----------------</a>
        <a id="plfa_plfa-part3-Denotational-43245" class="Symbol">→</a> <a id="plfa_plfa-part3-Denotational-43247" href="../Denotational/#plfa_plfa-part3-Denotational-43176" class="Bound">v′</a> <a id="plfa_plfa-part3-Denotational-43250" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-43252" href="../Denotational/#plfa_plfa-part3-Denotational-43172" class="Bound">v</a> <a id="plfa_plfa-part3-Denotational-43254" href="https://agda.github.io/agda-stdlib/v1.7.1/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Denotational-43256" href="../Denotational/#plfa_plfa-part3-Denotational-43174" class="Bound">w</a> <a id="plfa_plfa-part3-Denotational-43258" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Denotational-43260" href="../Denotational/#plfa_plfa-part3-Denotational-43179" class="Bound">w′</a>
<a id="plfa_plfa-part3-Denotational-43263" href="../Denotational/#plfa_plfa-part3-Denotational-43160" class="Function">↦⊑↦-inv</a><a id="plfa_plfa-part3-Denotational-43270" class="Symbol">{</a><a id="plfa_plfa-part3-Denotational-43271" href="../Denotational/#plfa_plfa-part3-Denotational-43271" class="Bound">v</a><a id="plfa_plfa-part3-Denotational-43272" class="Symbol">}{</a><a id="plfa_plfa-part3-Denotational-43274" href="../Denotational/#plfa_plfa-part3-Denotational-43274" class="Bound">w</a><a id="plfa_plfa-part3-Denotational-43275" class="Symbol">}{</a><a id="plfa_plfa-part3-Denotational-43277" href="../Denotational/#plfa_plfa-part3-Denotational-43277" class="Bound">v′</a><a id="plfa_plfa-part3-Denotational-43279" class="Symbol">}{</a><a id="plfa_plfa-part3-Denotational-43281" href="../Denotational/#plfa_plfa-part3-Denotational-43281" class="Bound">w′</a><a id="plfa_plfa-part3-Denotational-43283" class="Symbol">}</a> <a id="plfa_plfa-part3-Denotational-43285" href="../Denotational/#plfa_plfa-part3-Denotational-43285" class="Bound">lt</a>
    <a id="plfa_plfa-part3-Denotational-43292" class="Keyword">with</a> <a id="plfa_plfa-part3-Denotational-43297" href="../Denotational/#plfa_plfa-part3-Denotational-42552" class="Function">sub-inv-fun</a> <a id="plfa_plfa-part3-Denotational-43309" href="../Denotational/#plfa_plfa-part3-Denotational-43285" class="Bound">lt</a>
<a id="plfa_plfa-part3-Denotational-43312" class="Symbol">...</a> <a id="plfa_plfa-part3-Denotational-43316" class="Symbol">|</a> <a id="plfa_plfa-part3-Denotational-43318" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-43320" href="../Denotational/#plfa_plfa-part3-Denotational-43320" class="Bound">Γ</a> <a id="plfa_plfa-part3-Denotational-43322" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-43324" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-43326" href="../Denotational/#plfa_plfa-part3-Denotational-43326" class="Bound">f</a> <a id="plfa_plfa-part3-Denotational-43328" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-43330" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-43332" href="../Denotational/#plfa_plfa-part3-Denotational-43332" class="Bound">Γ⊆v34</a> <a id="plfa_plfa-part3-Denotational-43338" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-43340" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-43342" href="../Denotational/#plfa_plfa-part3-Denotational-43342" class="Bound">lt1</a> <a id="plfa_plfa-part3-Denotational-43346" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-43348" href="../Denotational/#plfa_plfa-part3-Denotational-43348" class="Bound">lt2</a> <a id="plfa_plfa-part3-Denotational-43352" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-43354" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-43356" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-43358" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a>
    <a id="plfa_plfa-part3-Denotational-43364" class="Keyword">with</a> <a id="plfa_plfa-part3-Denotational-43369" href="../Denotational/#plfa_plfa-part3-Denotational-31728" class="Function">all-funs∈</a> <a id="plfa_plfa-part3-Denotational-43379" href="../Denotational/#plfa_plfa-part3-Denotational-43326" class="Bound">f</a>
<a id="plfa_plfa-part3-Denotational-43381" class="Symbol">...</a> <a id="plfa_plfa-part3-Denotational-43385" class="Symbol">|</a> <a id="plfa_plfa-part3-Denotational-43387" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-43389" href="../Denotational/#plfa_plfa-part3-Denotational-43389" class="Bound">u</a> <a id="plfa_plfa-part3-Denotational-43391" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-43393" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-43395" href="../Denotational/#plfa_plfa-part3-Denotational-43395" class="Bound">u′</a> <a id="plfa_plfa-part3-Denotational-43398" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-43400" href="../Denotational/#plfa_plfa-part3-Denotational-43400" class="Bound">u↦u′∈Γ</a> <a id="plfa_plfa-part3-Denotational-43407" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Denotational-43409" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a>
    <a id="plfa_plfa-part3-Denotational-43415" class="Keyword">with</a> <a id="plfa_plfa-part3-Denotational-43420" class="Bound">Γ⊆v34</a> <a id="plfa_plfa-part3-Denotational-43426" href="../Denotational/#plfa_plfa-part3-Denotational-43400" class="Bound">u↦u′∈Γ</a>
<a id="plfa_plfa-part3-Denotational-43433" class="Symbol">...</a> <a id="plfa_plfa-part3-Denotational-43437" class="Symbol">|</a> <a id="plfa_plfa-part3-Denotational-43439" href="https://agda.github.io/agda-stdlib/v1.7.1/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Denotational-43444" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Denotational-43448" class="Keyword">let</a> <a id="plfa_plfa-part3-Denotational-43452" href="../Denotational/#plfa_plfa-part3-Denotational-43452" class="Bound">⨆codΓ⊆w′</a> <a id="plfa_plfa-part3-Denotational-43461" class="Symbol">=</a> <a id="plfa_plfa-part3-Denotational-43463" href="../Denotational/#plfa_plfa-part3-Denotational-33491" class="Function">⊆↦→⨆cod⊆</a> <a id="plfa_plfa-part3-Denotational-43472" class="Bound">Γ⊆v34</a> <a id="plfa_plfa-part3-Denotational-43478" class="Keyword">in</a>
  <a id="plfa_plfa-part3-Denotational-43483" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Denotational-43485" class="Bound">lt1</a> <a id="plfa_plfa-part3-Denotational-43489" class="Bound">u↦u′∈Γ</a> <a id="plfa_plfa-part3-Denotational-43496" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Denotational-43498" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Denotational-43506" class="Bound">lt2</a> <a id="plfa_plfa-part3-Denotational-43510" class="Symbol">(</a><a id="plfa_plfa-part3-Denotational-43511" href="../Denotational/#plfa_plfa-part3-Denotational-30209" class="Function">⊆→⊑</a> <a id="plfa_plfa-part3-Denotational-43515" href="../Denotational/#plfa_plfa-part3-Denotational-43452" class="Bound">⨆codΓ⊆w′</a><a id="plfa_plfa-part3-Denotational-43523" class="Symbol">)</a> <a id="plfa_plfa-part3-Denotational-43525" href="../Denotational/#plfa_plfa-part3-Denotational-2730" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="notes">Notes</h2><p>The denotational semantics presented in this chapter is an example of a <em>filter model</em> (Barendregt, Coppo, Dezani-Ciancaglini, 1983). Filter models use type systems with intersection types to precisely characterize runtime behavior (Coppo, Dezani-Ciancaglini, and Salle, 1979). The notation that we use in this chapter is not that of type systems and intersection types, but the <code>Value</code> data type is isomorphic to types (<code>↦</code> is <code>→</code>, <code>⊔</code> is <code>∧</code>, <code>⊥</code> is <code>⊤</code>), the <code>⊑</code> relation is the inverse of subtyping <code>&lt;:</code>, and the evaluation relation <code>ρ ⊢ M ↓ v</code> is isomorphic to a type system. Write <code>Γ</code> instead of <code>ρ</code>, <code>A</code> instead of <code>v</code>, and replace <code>↓</code> with <code>:</code> and one has a typing judgement <code>Γ ⊢ M : A</code>. By varying the definition of subtyping and using different choices of type atoms, intersection type systems provide semantics for many different untyped λ calculi, from full beta to the lazy and call-by-value calculi (Alessi, Barbanera, and Dezani-Ciancaglini, 2006) (Rocca and Paolini, 2004). The denotational semantics in this chapter corresponds to the BCD system (Barendregt, Coppo, Dezani-Ciancaglini, 1983). Part 3 of the book <em>Lambda Calculus with Types</em> describes a framework for intersection type systems that enables results similar to the ones in this chapter, but for the entire family of intersection type systems (Barendregt, Dekkers, and Statman, 2013).</p><p>The two ideas of using finite tables to represent functions and of relaxing table lookup to enable self application first appeared in a technical report by Gordon Plotkin (1972) and are later described in an article in Theoretical Computer Science (Plotkin 1993). In that work, the inductive definition of <code>Value</code> is a bit different than the one we use:</p><pre><code>Value = C + ℘f(Value) × ℘f(Value)</code></pre><p>where <code>C</code> is a set of constants and <code>℘f</code> means finite powerset. The pairs in <code>℘f(Value) × ℘f(Value)</code> represent input-output mappings, just as in this chapter. The finite powersets are used to enable a function table to appear in the input and in the output. These differences amount to changing where the recursion appears in the definition of <code>Value</code>. Plotkin’s model is an example of a <em>graph model</em> of the untyped lambda calculus (Barendregt, 1984). In a graph model, the semantics is presented as a function from programs and environments to (possibly infinite) sets of values. The semantics in this chapter is instead defined as a relation, but set-valued functions are isomorphic to relations. Indeed, we present the semantics as a function in the next chapter and prove that it is equivalent to the relational version.</p><p>Dana Scott’s ℘(ω) (1976) and Engeler’s B(A) (1981) are two more examples of graph models. Both use the following inductive definition of <code>Value</code>.</p><pre><code>Value = C + ℘f(Value) × Value</code></pre><p>The use of <code>Value</code> instead of <code>℘f(Value)</code> in the output does not restrict expressiveness compared to Plotkin’s model because the semantics use sets of values and a pair of sets <code>(V, V′)</code> can be represented as a set of pairs <code>{ (V, v′) | v′ ∈ V′ }</code>. In Scott’s ℘(ω), the above values are mapped to and from the natural numbers using a kind of Godel encoding.</p><h2 id="references">References</h2><ul><li><p>Intersection Types and Lambda Models. Fabio Alessi, Franco Barbanera, and Mariangiola Dezani-Ciancaglini, Theoretical Compututer Science, vol. 355, pages 108-126, 2006.</p></li><li><p>The Lambda Calculus. H.P. Barendregt, 1984.</p></li><li><p>A filter lambda model and the completeness of type assignment. Henk Barendregt, Mario Coppo, and Mariangiola Dezani-Ciancaglini, Journal of Symbolic Logic, vol. 48, pages 931-940, 1983.</p></li><li><p>Lambda Calculus with Types. Henk Barendregt, Wil Dekkers, and Richard Statman, Cambridge University Press, Perspectives in Logic, 2013.</p></li><li><p>Functional characterization of some semantic equalities inside λ-calculus. Mario Coppo, Mariangiola Dezani-Ciancaglini, and Patrick Salle, in Sixth Colloquium on Automata, Languages and Programming. Springer, pages 133–146, 1979.</p></li><li><p>Algebras and combinators. Erwin Engeler, Algebra Universalis, vol. 13, pages 389-392, 1981.</p></li><li><p>A Set-Theoretical Definition of Application. Gordon D. Plotkin, University of Edinburgh, Technical Report MIP-R-95, 1972.</p></li><li><p>Set-theoretical and other elementary models of the λ-calculus. Gordon D. Plotkin, Theoretical Computer Science, vol. 121, pages 351-409, 1993.</p></li><li><p>The Parametric Lambda Calculus. Simona Ronchi Della Rocca and Luca Paolini, Springer, 2004.</p></li><li><p>Data Types as Lattices. Dana Scott, SIAM Journal on Computing, vol. 5, pages 522-587, 1976.</p></li></ul><h2 id="unicode">Unicode</h2><p>This chapter uses the following unicode:</p><pre><code>⊥  U+22A5  UP TACK (\bot)
↦  U+21A6  RIGHTWARDS ARROW FROM BAR (\mapsto)
⊔  U+2294  SQUARE CUP (\lub)
⊑  U+2291  SQUARE IMAGE OF OR EQUAL TO (\sqsubseteq)
⨆ U+2A06  N-ARY SQUARE UNION OPERATOR (\Lub)
⊢  U+22A2  RIGHT TACK (\|- or \vdash)
↓  U+2193  DOWNWARDS ARROW (\d)
ᶜ  U+1D9C  MODIFIER LETTER SMALL C (\^c)
ℰ  U+2130  SCRIPT CAPITAL E (\McE)
≃  U+2243  ASYMPTOTICALLY EQUAL TO (\~- or \simeq)
∈  U+2208  ELEMENT OF (\in)
⊆  U+2286  SUBSET OF OR EQUAL TO (\sub= or \subseteq)</code></pre></div><nav class="pager"><ul class="pagination"><li><a class="pagelink" href="../BigStep/">上一章</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Denotational.lagda.md">源文件</a></li><li class="separator">•</li><li><a class="pagelink" href="../Compositional/">下一章</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">编程语言基础：Agda 描述</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>